var s9=Object.create;var uc=Object.defineProperty,n9=Object.defineProperties,a9=Object.getOwnPropertyDescriptor,o9=Object.getOwnPropertyDescriptors,h9=Object.getOwnPropertyNames,Ex=Object.getOwnPropertySymbols,l9=Object.getPrototypeOf,Ax=Object.prototype.hasOwnProperty,u9=Object.prototype.propertyIsEnumerable;var Mx=(i,t,r)=>t in i?uc(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Xa=(i,t)=>{for(var r in t||(t={}))Ax.call(t,r)&&Mx(i,r,t[r]);if(Ex)for(var r of Ex(t))u9.call(t,r)&&Mx(i,r,t[r]);return i},Ph=(i,t)=>n9(i,o9(t));var Rx=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports);var f9=(i,t,r,x)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of h9(t))!Ax.call(i,s)&&s!==r&&uc(i,s,{get:()=>t[s],enumerable:!(x=a9(t,s))||x.enumerable});return i};var Ox=(i,t,r)=>(r=i!=null?s9(l9(i)):{},f9(t||!i||!i.__esModule?uc(r,"default",{value:i,enumerable:!0}):r,i));var wx=(i,t,r)=>new Promise((x,s)=>{var g=p=>{try{n(r.next(p))}catch(f){s(f)}},e=p=>{try{n(r.throw(p))}catch(f){s(f)}},n=p=>p.done?x(p.value):Promise.resolve(p.value).then(g,e);n((r=r.apply(i,t)).next())});var Lx=Rx((Wa,fc)=>{(function(t,r){typeof Wa=="object"&&typeof fc=="object"?fc.exports=r():typeof define=="function"&&define.amd?define("Phaser",[],r):typeof Wa=="object"?Wa.Phaser=r():t.Phaser=r()})(Wa,()=>(()=>{var i={6659:s=>{"use strict";var g=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function p(a,o,c){this.fn=a,this.context=o,this.once=c||!1}function f(a,o,c,h,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var v=new p(c,h||a,d),m=e?e+o:o;return a._events[m]?a._events[m].fn?a._events[m]=[a._events[m],v]:a._events[m].push(v):(a._events[m]=v,a._eventsCount++),a}function u(a,o){--a._eventsCount===0?a._events=new n:delete a._events[o]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var o=[],c,h;if(this._eventsCount===0)return o;for(h in c=this._events)g.call(c,h)&&o.push(e?h.slice(1):h);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(c)):o},l.prototype.listeners=function(o){var c=e?e+o:o,h=this._events[c];if(!h)return[];if(h.fn)return[h.fn];for(var d=0,v=h.length,m=new Array(v);d<v;d++)m[d]=h[d].fn;return m},l.prototype.listenerCount=function(o){var c=e?e+o:o,h=this._events[c];return h?h.fn?1:h.length:0},l.prototype.emit=function(o,c,h,d,v,m){var y=e?e+o:o;if(!this._events[y])return!1;var C=this._events[y],T=arguments.length,P,S;if(C.fn){switch(C.once&&this.removeListener(o,C.fn,void 0,!0),T){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,c),!0;case 3:return C.fn.call(C.context,c,h),!0;case 4:return C.fn.call(C.context,c,h,d),!0;case 5:return C.fn.call(C.context,c,h,d,v),!0;case 6:return C.fn.call(C.context,c,h,d,v,m),!0}for(S=1,P=new Array(T-1);S<T;S++)P[S-1]=arguments[S];C.fn.apply(C.context,P)}else{var M=C.length,E;for(S=0;S<M;S++)switch(C[S].once&&this.removeListener(o,C[S].fn,void 0,!0),T){case 1:C[S].fn.call(C[S].context);break;case 2:C[S].fn.call(C[S].context,c);break;case 3:C[S].fn.call(C[S].context,c,h);break;case 4:C[S].fn.call(C[S].context,c,h,d);break;default:if(!P)for(E=1,P=new Array(T-1);E<T;E++)P[E-1]=arguments[E];C[S].fn.apply(C[S].context,P)}}return!0},l.prototype.on=function(o,c,h){return f(this,o,c,h,!1)},l.prototype.once=function(o,c,h){return f(this,o,c,h,!0)},l.prototype.removeListener=function(o,c,h,d){var v=e?e+o:o;if(!this._events[v])return this;if(!c)return u(this,v),this;var m=this._events[v];if(m.fn)m.fn===c&&(!d||m.once)&&(!h||m.context===h)&&u(this,v);else{for(var y=0,C=[],T=m.length;y<T;y++)(m[y].fn!==c||d&&!m[y].once||h&&m[y].context!==h)&&C.push(m[y]);C.length?this._events[v]=C.length===1?C[0]:C:u(this,v)}return this},l.prototype.removeAllListeners=function(o){var c;return o?(c=e?e+o:o,this._events[c]&&u(this,c)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=e,l.EventEmitter=l,s.exports=l},62270:(s,g,e)=>{var n=e(82590),p=function(f,u,l,a){for(var o=f[0],c=1;c<f.length;c++){var h=f[c];n(h,o,u,l,a),o=h}return f};s.exports=p},61148:(s,g,e)=>{var n=e(6124),p=function(f,u,l,a,o){return n(f,"angle",u,l,a,o)};s.exports=p},22015:s=>{var g=function(e,n,p){for(var f=0;f<e.length;f++){var u=e[f];n.call(p,u)}return e};s.exports=g},31060:s=>{var g=function(e,n,p){p===void 0&&(p=0);for(var f=p;f<e.length;f++){var u=e[f],l=!0;for(var a in n)u[a]!==n[a]&&(l=!1);if(l)return u}return null};s.exports=g},52367:s=>{var g=function(e,n,p){p===void 0&&(p=0);for(var f=p;f<e.length;f++){var u=e[f],l=!0;for(var a in n)u[a]!==n[a]&&(l=!1);if(l)return u}return null};s.exports=g},12673:(s,g,e)=>{var n=e(40327),p=e(84093),f=e(72632),u=e(72283),l=e(71030),a=new l({sys:{queueDepthSort:u,events:{once:u}}},0,0,1,1).setOrigin(0,0),o=function(c,h){h===void 0&&(h={});var d=h.hasOwnProperty("width"),v=h.hasOwnProperty("height"),m=f(h,"width",-1),y=f(h,"height",-1),C=f(h,"cellWidth",1),T=f(h,"cellHeight",C),P=f(h,"position",p.TOP_LEFT),S=f(h,"x",0),M=f(h,"y",0),E=0,A=0,R=m*C,w=y*T;a.setPosition(S,M),a.setSize(C,T);for(var O=0;O<c.length;O++)if(n(c[O],a,P),d&&m===-1)a.x+=C;else if(v&&y===-1)a.y+=T;else if(v&&!d){if(A+=T,a.y+=T,A===w&&(A=0,E+=C,a.y=M,a.x+=C,E===R))break}else if(E+=C,a.x+=C,E===R&&(E=0,A+=T,a.x=S,a.y+=T,A===w))break;return c};s.exports=o},691:(s,g,e)=>{var n=e(6124),p=function(f,u,l,a,o){return n(f,"alpha",u,l,a,o)};s.exports=p},3877:(s,g,e)=>{var n=e(6124),p=function(f,u,l,a,o){return n(f,"x",u,l,a,o)};s.exports=p},71020:(s,g,e)=>{var n=e(6124),p=function(f,u,l,a,o,c,h){return l==null&&(l=u),n(f,"x",u,a,c,h),n(f,"y",l,o,c,h)};s.exports=p},28970:(s,g,e)=>{var n=e(6124),p=function(f,u,l,a,o){return n(f,"y",u,l,a,o)};s.exports=p},82249:s=>{var g=function(e,n,p,f){p===void 0&&(p=0),f===void 0&&(f=6.28);for(var u=p,l=(f-p)/e.length,a=n.x,o=n.y,c=n.radius,h=0;h<e.length;h++)e[h].x=a+c*Math.cos(u),e[h].y=o+c*Math.sin(u),u+=l;return e};s.exports=g},30285:s=>{var g=function(e,n,p,f){p===void 0&&(p=0),f===void 0&&(f=6.28);for(var u=p,l=(f-p)/e.length,a=n.width/2,o=n.height/2,c=0;c<e.length;c++)e[c].x=n.x+a*Math.cos(u),e[c].y=n.y+o*Math.sin(u),u+=l;return e};s.exports=g},61557:(s,g,e)=>{var n=e(8570),p=function(f,u){for(var l=n(u,f.length),a=0;a<f.length;a++){var o=f[a],c=l[a];o.x=c.x,o.y=c.y}return f};s.exports=p},63549:(s,g,e)=>{var n=e(40053),p=e(77640),f=e(38487),u=function(l,a,o){o===void 0&&(o=0);var c=n(a,!1,l.length);o>0?p(c,o):o<0&&f(c,Math.abs(o));for(var h=0;h<l.length;h++)l[h].x=c[h].x,l[h].y=c[h].y;return l};s.exports=u},51629:(s,g,e)=>{var n=e(58813),p=function(f,u,l){var a=n({x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2},l),o=n({x1:u.x2,y1:u.y2,x2:u.x3,y2:u.y3},l),c=n({x1:u.x3,y1:u.y3,x2:u.x1,y2:u.y1},l);a.pop(),o.pop(),c.pop(),a=a.concat(o,c);for(var h=a.length/f.length,d=0,v=0;v<f.length;v++){var m=f[v],y=a[Math.floor(d)];m.x=y.x,m.y=y.y,d+=h}return f};s.exports=p},1045:s=>{var g=function(e,n,p){for(var f=0;f<e.length;f++){var u=e[f];u.anims&&u.anims.play(n,p)}return e};s.exports=g},6124:s=>{var g=function(e,n,p,f,u,l){f===void 0&&(f=0),u===void 0&&(u=0),l===void 0&&(l=1);var a,o=0,c=e.length;if(l===1)for(a=u;a<c;a++)e[a][n]+=p+o*f,o++;else for(a=u;a>=0;a--)e[a][n]+=p+o*f,o++;return e};s.exports=g},23646:s=>{var g=function(e,n,p,f,u,l){f===void 0&&(f=0),u===void 0&&(u=0),l===void 0&&(l=1);var a,o=0,c=e.length;if(l===1)for(a=u;a<c;a++)e[a][n]=p+o*f,o++;else for(a=u;a>=0;a--)e[a][n]=p+o*f,o++;return e};s.exports=g},4392:(s,g,e)=>{var n=e(30977),p=function(f,u){for(var l=0;l<f.length;l++)n(u,f[l]);return f};s.exports=p},94985:(s,g,e)=>{var n=e(72006),p=function(f,u){for(var l=0;l<f.length;l++)n(u,f[l]);return f};s.exports=p},63305:(s,g,e)=>{var n=e(74077),p=function(f,u){for(var l=0;l<f.length;l++)n(u,f[l]);return f};s.exports=p},90739:(s,g,e)=>{var n=e(30001),p=function(f,u){for(var l=0;l<f.length;l++)n(u,f[l]);return f};s.exports=p},91417:(s,g,e)=>{var n=e(99761),p=function(f,u){for(var l=0;l<f.length;l++)n(u,f[l]);return f};s.exports=p},26182:(s,g,e)=>{var n=e(6124),p=function(f,u,l,a,o){return n(f,"rotation",u,l,a,o)};s.exports=p},87299:(s,g,e)=>{var n=e(72395),p=e(53996),f=function(u,l,a){for(var o=l.x,c=l.y,h=0;h<u.length;h++){var d=u[h];n(d,o,c,a,Math.max(1,p(d.x,d.y,o,c)))}return u};s.exports=f},92194:(s,g,e)=>{var n=e(72395),p=function(f,u,l,a){var o=u.x,c=u.y;if(a===0)return f;for(var h=0;h<f.length;h++)n(f[h],o,c,l,a);return f};s.exports=p},30363:(s,g,e)=>{var n=e(6124),p=function(f,u,l,a,o){return n(f,"scaleX",u,l,a,o)};s.exports=p},51449:(s,g,e)=>{var n=e(6124),p=function(f,u,l,a,o,c,h){return l==null&&(l=u),n(f,"scaleX",u,a,c,h),n(f,"scaleY",l,o,c,h)};s.exports=p},64895:(s,g,e)=>{var n=e(6124),p=function(f,u,l,a,o){return n(f,"scaleY",u,l,a,o)};s.exports=p},30329:(s,g,e)=>{var n=e(23646),p=function(f,u,l,a,o){return n(f,"alpha",u,l,a,o)};s.exports=p},43954:(s,g,e)=>{var n=e(23646),p=function(f,u,l,a){return n(f,"blendMode",u,0,l,a)};s.exports=p},70688:(s,g,e)=>{var n=e(23646),p=function(f,u,l,a,o){return n(f,"depth",u,l,a,o)};s.exports=p},8314:s=>{var g=function(e,n,p){for(var f=0;f<e.length;f++)e[f].setInteractive(n,p);return e};s.exports=g},12894:(s,g,e)=>{var n=e(23646),p=function(f,u,l,a,o,c,h){return l==null&&(l=u),n(f,"originX",u,a,c,h),n(f,"originY",l,o,c,h),f.forEach(function(d){d.updateDisplayOrigin()}),f};s.exports=p},38767:(s,g,e)=>{var n=e(23646),p=function(f,u,l,a,o){return n(f,"rotation",u,l,a,o)};s.exports=p},18584:(s,g,e)=>{var n=e(23646),p=function(f,u,l,a,o,c,h){return l==null&&(l=u),n(f,"scaleX",u,a,c,h),n(f,"scaleY",l,o,c,h)};s.exports=p},17381:(s,g,e)=>{var n=e(23646),p=function(f,u,l,a,o){return n(f,"scaleX",u,l,a,o)};s.exports=p},74370:(s,g,e)=>{var n=e(23646),p=function(f,u,l,a,o){return n(f,"scaleY",u,l,a,o)};s.exports=p},27773:(s,g,e)=>{var n=e(23646),p=function(f,u,l,a,o,c,h){return l==null&&(l=u),n(f,"scrollFactorX",u,a,c,h),n(f,"scrollFactorY",l,o,c,h)};s.exports=p},75257:(s,g,e)=>{var n=e(23646),p=function(f,u,l,a,o){return n(f,"scrollFactorX",u,l,a,o)};s.exports=p},54512:(s,g,e)=>{var n=e(23646),p=function(f,u,l,a,o){return n(f,"scrollFactorY",u,l,a,o)};s.exports=p},69423:s=>{var g=function(e,n,p,f,u){for(var l=0;l<e.length;l++)e[l].setTint(n,p,f,u);return e};s.exports=g},58291:(s,g,e)=>{var n=e(23646),p=function(f,u,l,a){return n(f,"visible",u,0,l,a)};s.exports=p},94833:(s,g,e)=>{var n=e(23646),p=function(f,u,l,a,o){return n(f,"x",u,l,a,o)};s.exports=p},14284:(s,g,e)=>{var n=e(23646),p=function(f,u,l,a,o,c,h){return l==null&&(l=u),n(f,"x",u,a,c,h),n(f,"y",l,o,c,h)};s.exports=p},96574:(s,g,e)=>{var n=e(23646),p=function(f,u,l,a,o){return n(f,"y",u,l,a,o)};s.exports=p},74086:(s,g,e)=>{var n=e(93736),p=function(f,u,l,a,o){a===void 0&&(a=0),o===void 0&&(o=new n);var c,h,d=f.length;if(d===1)c=f[0].x,h=f[0].y,f[0].x=u,f[0].y=l;else{var v=1,m=0;a===0&&(m=d-1,v=d-2),c=f[m].x,h=f[m].y,f[m].x=u,f[m].y=l;for(var y=0;y<d;y++)if(!(v>=d||v===-1)){var C=f[v],T=C.x,P=C.y;C.x=c,C.y=h,c=T,h=P,a===0?v--:v++}}return o.x=c,o.y=h,o};s.exports=p},86347:(s,g,e)=>{var n=e(18592),p=function(f){return n(f)};s.exports=p},1558:(s,g,e)=>{var n=e(5514),p=function(f,u,l,a,o){o===void 0&&(o=!1);var c=Math.abs(a-l)/f.length,h;if(o)for(h=0;h<f.length;h++)f[h][u]+=n(h*c,l,a);else for(h=0;h<f.length;h++)f[h][u]=n(h*c,l,a);return f};s.exports=p},9938:(s,g,e)=>{var n=e(87736),p=function(f,u,l,a,o){o===void 0&&(o=!1);var c=Math.abs(a-l)/f.length,h;if(o)for(h=0;h<f.length;h++)f[h][u]+=n(h*c,l,a);else for(h=0;h<f.length;h++)f[h][u]=n(h*c,l,a);return f};s.exports=p},71060:s=>{var g=function(e,n,p,f,u){if(u===void 0&&(u=!1),e.length===0)return e;if(e.length===1)return u?e[0][n]+=(f+p)/2:e[0][n]=(f+p)/2,e;var l=Math.abs(f-p)/(e.length-1),a;if(u)for(a=0;a<e.length;a++)e[a][n]+=a*l+p;else for(a=0;a<e.length;a++)e[a][n]=a*l+p;return e};s.exports=g},11207:s=>{var g=function(e){for(var n=0;n<e.length;n++)e[n].visible=!e[n].visible;return e};s.exports=g},24404:(s,g,e)=>{var n=e(1071),p=function(f,u,l){l===void 0&&(l=0);for(var a=0;a<f.length;a++){var o=f[a];o.x=n(o.x,u.left-l,u.right+l),o.y=n(o.y,u.top-l,u.bottom+l)}return f};s.exports=p},83979:(s,g,e)=>{s.exports={AlignTo:e(62270),Angle:e(61148),Call:e(22015),GetFirst:e(31060),GetLast:e(52367),GridAlign:e(12673),IncAlpha:e(691),IncX:e(3877),IncXY:e(71020),IncY:e(28970),PlaceOnCircle:e(82249),PlaceOnEllipse:e(30285),PlaceOnLine:e(61557),PlaceOnRectangle:e(63549),PlaceOnTriangle:e(51629),PlayAnimation:e(1045),PropertyValueInc:e(6124),PropertyValueSet:e(23646),RandomCircle:e(4392),RandomEllipse:e(94985),RandomLine:e(63305),RandomRectangle:e(90739),RandomTriangle:e(91417),Rotate:e(26182),RotateAround:e(87299),RotateAroundDistance:e(92194),ScaleX:e(30363),ScaleXY:e(51449),ScaleY:e(64895),SetAlpha:e(30329),SetBlendMode:e(43954),SetDepth:e(70688),SetHitArea:e(8314),SetOrigin:e(12894),SetRotation:e(38767),SetScale:e(18584),SetScaleX:e(17381),SetScaleY:e(74370),SetScrollFactor:e(27773),SetScrollFactorX:e(75257),SetScrollFactorY:e(54512),SetTint:e(69423),SetVisible:e(58291),SetX:e(94833),SetXY:e(14284),SetY:e(96574),ShiftPosition:e(74086),Shuffle:e(86347),SmootherStep:e(9938),SmoothStep:e(1558),Spread:e(71060),ToggleVisible:e(11207),WrapInRectangle:e(24404)}},85463:(s,g,e)=>{var n=e(82897),p=e(56694),f=e(16938),u=e(2406),l=e(71519),a=e(10850),o=e(28834),c=new p({initialize:function(d,v,m){this.manager=d,this.key=v,this.type="frame",this.frames=this.getFrames(d.textureManager,a(m,"frames",[]),a(m,"defaultTextureKey",null),a(m,"sortFrames",!0)),this.frameRate=a(m,"frameRate",null),this.duration=a(m,"duration",null),this.msPerFrame,this.skipMissedFrames=a(m,"skipMissedFrames",!0),this.delay=a(m,"delay",0),this.repeat=a(m,"repeat",0),this.repeatDelay=a(m,"repeatDelay",0),this.yoyo=a(m,"yoyo",!1),this.showBeforeDelay=a(m,"showBeforeDelay",!1),this.showOnStart=a(m,"showOnStart",!1),this.hideOnComplete=a(m,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(f.PAUSE_ALL,this.pause,this),this.manager.on(f.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(h,d,v,m){v===null&&m===null?(h.frameRate=24,h.duration=24/d*1e3):v&&m===null?(h.duration=v,h.frameRate=d/(v/1e3)):(h.frameRate=m,h.duration=d/m*1e3),h.msPerFrame=1e3/h.frameRate},addFrame:function(h){return this.addFrameAt(this.frames.length,h)},addFrameAt:function(h,d){var v=this.getFrames(this.manager.textureManager,d);if(v.length>0){if(h===0)this.frames=v.concat(this.frames);else if(h===this.frames.length)this.frames=this.frames.concat(v);else{var m=this.frames.slice(0,h),y=this.frames.slice(h);this.frames=m.concat(v,y)}this.updateFrameSequence()}return this},checkFrame:function(h){return h>=0&&h<this.frames.length},getFirstTick:function(h){h.accumulator=0,h.nextTick=h.msPerFrame+h.currentFrame.duration},getFrameAt:function(h){return this.frames[h]},getFrames:function(h,d,v,m){m===void 0&&(m=!0);var y=[],C,T,P=1,S,M;if(typeof d=="string"){if(M=d,!h.exists(M))return console.warn('Texture "%s" not found',M),y;var E=h.get(M),A=E.getFrameNames();m&&o(A),d=[],A.forEach(function(I){d.push({key:M,frame:I})})}if(!Array.isArray(d)||d.length===0)return y;for(S=0;S<d.length;S++){var R=d[S],w=a(R,"key",v);if(!!w){var O=a(R,"frame",0),F=h.getFrame(w,O);if(!F){console.warn('Texture "%s" not found',w);continue}T=new l(w,O,P,F),T.duration=a(R,"duration",0),T.isFirst=!C,C&&(C.nextFrame=T,T.prevFrame=C),y.push(T),C=T,P++}}if(y.length>0){T.isLast=!0,T.nextFrame=y[0],y[0].prevFrame=T;var b=1/(y.length-1);for(S=0;S<y.length;S++)y[S].progress=S*b}return y},getNextTick:function(h){h.accumulator-=h.nextTick,h.nextTick=h.msPerFrame+h.currentFrame.duration},getFrameByProgress:function(h){return h=n(h,0,1),u(h,this.frames,"progress")},nextFrame:function(h){var d=h.currentFrame;d.isLast?h.yoyo?this.handleYoyoFrame(h,!1):h.repeatCounter>0?h.inReverse&&h.forward?h.forward=!1:this.repeatAnimation(h):h.complete():this.updateAndGetNextTick(h,d.nextFrame)},handleYoyoFrame:function(h,d){if(d||(d=!1),h.inReverse===!d&&h.repeatCounter>0){(h.repeatDelay===0||h.pendingRepeat)&&(h.forward=d),this.repeatAnimation(h);return}if(h.inReverse!==d&&h.repeatCounter===0){h.complete();return}h.forward=d;var v=d?h.currentFrame.nextFrame:h.currentFrame.prevFrame;this.updateAndGetNextTick(h,v)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(h){var d=h.currentFrame;d.isFirst?h.yoyo?this.handleYoyoFrame(h,!0):h.repeatCounter>0?h.inReverse&&!h.forward?this.repeatAnimation(h):(h.forward=!0,this.repeatAnimation(h)):h.complete():this.updateAndGetNextTick(h,d.prevFrame)},updateAndGetNextTick:function(h,d){h.setCurrentFrame(d),this.getNextTick(h)},removeFrame:function(h){var d=this.frames.indexOf(h);return d!==-1&&this.removeFrameAt(d),this},removeFrameAt:function(h){return this.frames.splice(h,1),this.updateFrameSequence(),this},repeatAnimation:function(h){if(h._pendingStop===2){if(h._pendingStopValue===0)return h.stop();h._pendingStopValue--}h.repeatDelay>0&&!h.pendingRepeat?(h.pendingRepeat=!0,h.accumulator-=h.nextTick,h.nextTick+=h.repeatDelay):(h.repeatCounter--,h.forward?h.setCurrentFrame(h.currentFrame.nextFrame):h.setCurrentFrame(h.currentFrame.prevFrame),h.isPlaying&&(this.getNextTick(h),h.handleRepeat()))},toJSON:function(){var h={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(d){h.frames.push(d.toJSON())}),h},updateFrameSequence:function(){for(var h=this.frames.length,d=1/(h-1),v,m=0;m<h;m++)v=this.frames[m],v.index=m+1,v.isFirst=!1,v.isLast=!1,v.progress=m*d,m===0?(v.isFirst=!0,h===1?(v.isLast=!0,v.nextFrame=v,v.prevFrame=v):(v.isLast=!1,v.prevFrame=this.frames[h-1],v.nextFrame=this.frames[m+1])):m===h-1&&h>1?(v.isLast=!0,v.prevFrame=this.frames[h-2],v.nextFrame=this.frames[0]):h>1&&(v.prevFrame=this.frames[m-1],v.nextFrame=this.frames[m+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(f.PAUSE_ALL,this.pause,this),this.manager.off(f.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var h=0;h<this.frames.length;h++)this.frames[h].destroy();this.frames=[],this.manager=null}});s.exports=c},71519:(s,g,e)=>{var n=e(56694),p=new n({initialize:function(u,l,a,o,c){c===void 0&&(c=!1),this.textureKey=u,this.textureFrame=l,this.index=a,this.frame=o,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=c},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});s.exports=p},90249:(s,g,e)=>{var n=e(85463),p=e(56694),f=e(33885),u=e(6659),l=e(16938),a=e(97081),o=e(72632),c=e(10850),h=e(83392),d=e(13401),v=e(76400),m=new p({Extends:u,initialize:function(C){u.call(this),this.game=C,this.textureManager=null,this.globalTimeScale=1,this.anims=new f,this.mixes=new f,this.paused=!1,this.name="AnimationManager",C.events.once(a.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(a.DESTROY,this.destroy,this)},addMix:function(y,C,T){var P=this.anims,S=this.mixes,M=typeof y=="string"?y:y.key,E=typeof C=="string"?C:C.key;if(P.has(M)&&P.has(E)){var A=S.get(M);A||(A={}),A[E]=T,S.set(M,A)}return this},removeMix:function(y,C){var T=this.mixes,P=typeof y=="string"?y:y.key,S=T.get(P);if(S)if(C){var M=typeof C=="string"?C:C.key;S.hasOwnProperty(M)&&delete S[M]}else C||T.delete(P);return this},getMix:function(y,C){var T=this.mixes,P=typeof y=="string"?y:y.key,S=typeof C=="string"?C:C.key,M=T.get(P);return M&&M.hasOwnProperty(S)?M[S]:0},add:function(y,C){return this.anims.has(y)?(console.warn("Animation key exists: "+y),this):(C.key=y,this.anims.set(y,C),this.emit(l.ADD_ANIMATION,y,C),this)},exists:function(y){return this.anims.has(y)},createFromAseprite:function(y,C,T){var P=[],S=this.game.cache.json.get(y);if(!S)return console.warn("No Aseprite data found for: "+y),P;var M=this,E=c(S,"meta",null),A=c(S,"frames",null);if(E&&A){var R=c(E,"frameTags",[]);R.forEach(function(w){var O=[],F=o(w,"name",null),b=o(w,"from",0),I=o(w,"to",0),N=o(w,"direction","forward");if(!!F&&(!C||C&&C.indexOf(F)>-1)){for(var z=0,U=b;U<=I;U++){var W=U.toString(),D=A[W];if(D){var V=o(D,"duration",h.MAX_SAFE_INTEGER);O.push({key:y,frame:W,duration:V}),z+=V}}var L=z/O.length;O.forEach(function(Y){Y.duration-=L}),N==="reverse"&&(O=O.reverse());var B={key:F,frames:O,duration:z,yoyo:N==="pingpong"},G;T?T.anims&&(G=T.anims.create(B)):G=M.create(B),G&&P.push(G)}})}return P},create:function(y){var C=y.key,T=!1;return C&&(T=this.get(C),T?console.warn("AnimationManager key already exists: "+C):(T=new n(this,C,y),this.anims.set(C,T),this.emit(l.ADD_ANIMATION,C,T))),T},fromJSON:function(y,C){C===void 0&&(C=!1),C&&this.anims.clear(),typeof y=="string"&&(y=JSON.parse(y));var T=[];if(y.hasOwnProperty("anims")&&Array.isArray(y.anims)){for(var P=0;P<y.anims.length;P++)T.push(this.create(y.anims[P]));y.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=y.globalTimeScale)}else y.hasOwnProperty("key")&&y.type==="frame"&&T.push(this.create(y));return T},generateFrameNames:function(y,C){var T=c(C,"prefix",""),P=c(C,"start",0),S=c(C,"end",0),M=c(C,"suffix",""),E=c(C,"zeroPad",0),A=c(C,"outputArray",[]),R=c(C,"frames",!1);if(!this.textureManager.exists(y))return console.warn('Texture "%s" not found',y),A;var w=this.textureManager.get(y);if(!w)return A;var O;if(C)for(R||(R=d(P,S)),O=0;O<R.length;O++){var F=T+v(R[O],E,"0",1)+M;w.has(F)?A.push({key:y,frame:F}):console.warn('Frame "%s" not found in texture "%s"',F,y)}else for(R=w.getFrameNames(),O=0;O<R.length;O++)A.push({key:y,frame:R[O]});return A},generateFrameNumbers:function(y,C){var T=c(C,"start",0),P=c(C,"end",-1),S=c(C,"first",!1),M=c(C,"outputArray",[]),E=c(C,"frames",!1);if(!this.textureManager.exists(y))return console.warn('Texture "%s" not found',y),M;var A=this.textureManager.get(y);if(!A)return M;S&&A.has(S)&&M.push({key:y,frame:S}),E||(P===-1&&(P=A.frameTotal-2),E=d(T,P));for(var R=0;R<E.length;R++){var w=E[R];A.has(w)?M.push({key:y,frame:w}):console.warn('Frame "%s" not found in texture "%s"',w,y)}return M},get:function(y){return this.anims.get(y)},getAnimsFromTexture:function(y){for(var C=this.textureManager.get(y),T=C.key,P=this.anims.getArray(),S=[],M=0;M<P.length;M++)for(var E=P[M],A=E.frames,R=0;R<A.length;R++)if(A[R].textureKey===T){S.push(E.key);break}return S},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(l.PAUSE_ALL)),this},play:function(y,C){Array.isArray(C)||(C=[C]);for(var T=0;T<C.length;T++)C[T].anims.play(y);return this},staggerPlay:function(y,C,T,P){T===void 0&&(T=0),P===void 0&&(P=!0),Array.isArray(C)||(C=[C]);var S=C.length;P||S--;for(var M=0;M<C.length;M++){var E=T<0?Math.abs(T)*(S-M):T*M;C[M].anims.playAfterDelay(y,E)}return this},remove:function(y){var C=this.get(y);return C&&(this.emit(l.REMOVE_ANIMATION,y,C),this.anims.delete(y),this.removeMix(y)),C},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(l.RESUME_ALL)),this},toJSON:function(y){var C={anims:[],globalTimeScale:this.globalTimeScale};return y!==void 0&&y!==""?C.anims.push(this.anims.get(y).toJSON()):this.anims.each(function(T,P){C.anims.push(P.toJSON())}),C},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});s.exports=m},16569:(s,g,e)=>{var n=e(56694),p=e(33885),f=e(72632),u=e(16938),l=e(85463),a=new n({initialize:function(c){this.parent=c,this.animationManager=c.scene.sys.anims,this.animationManager.on(u.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(o){var c=this.parent;if(o===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,c;Array.isArray(o)||(o=[o]);for(var h=0;h<o.length;h++){var d=o[h];this.nextAnim?this.nextAnimsQueue.push(d):this.nextAnim=d}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(o){this.isPlaying&&this.stop();var c=this.animationManager,h=typeof o=="string"?o:f(o,"key",null),d=this.exists(h)?this.get(h):c.get(h);if(!d)console.warn("Missing animation: "+h);else{this.currentAnim=d;var v=d.getTotalFrames(),m=f(o,"frameRate",d.frameRate),y=f(o,"duration",d.duration);d.calculateDuration(this,v,y,m),this.delay=f(o,"delay",d.delay),this.repeat=f(o,"repeat",d.repeat),this.repeatDelay=f(o,"repeatDelay",d.repeatDelay),this.yoyo=f(o,"yoyo",d.yoyo),this.showBeforeDelay=f(o,"showBeforeDelay",d.showBeforeDelay),this.showOnStart=f(o,"showOnStart",d.showOnStart),this.hideOnComplete=f(o,"hideOnComplete",d.hideOnComplete),this.skipMissedFrames=f(o,"skipMissedFrames",d.skipMissedFrames),this.timeScale=f(o,"timeScale",this.timeScale);var C=f(o,"startFrame",0);C>d.getTotalFrames()&&(C=0);var T=d.frames[C];C===0&&!this.forward&&(T=d.getLastFrame()),this.currentFrame=T}return this.parent},pause:function(o){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),o!==void 0&&this.setCurrentFrame(o),this.parent},resume:function(o){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),o!==void 0&&this.setCurrentFrame(o),this.parent},playAfterDelay:function(o,c){if(!this.isPlaying)this.delayCounter=c,this.play(o,!0);else{var h=this.nextAnim,d=this.nextAnimsQueue;h&&d.unshift(h),this.nextAnim=o,this._pendingStop=1,this._pendingStopValue=c}return this.parent},playAfterRepeat:function(o,c){if(c===void 0&&(c=1),!this.isPlaying)this.play(o);else{var h=this.nextAnim,d=this.nextAnimsQueue;h&&d.unshift(h),this.repeatCounter!==-1&&c>this.repeatCounter&&(c=this.repeatCounter),this.nextAnim=o,this._pendingStop=2,this._pendingStopValue=c}return this.parent},play:function(o,c){c===void 0&&(c=!1);var h=this.currentAnim,d=this.parent,v=typeof o=="string"?o:o.key;if(c&&this.isPlaying&&h.key===v)return d;if(h&&this.isPlaying){var m=this.animationManager.getMix(h.key,o);if(m>0)return this.playAfterDelay(o,m)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(o)},playReverse:function(o,c){c===void 0&&(c=!1);var h=typeof o=="string"?o:o.key;return c&&this.isPlaying&&this.currentAnim.key===h?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(o))},startAnimation:function(o){this.load(o);var c=this.currentAnim,h=this.parent;return c&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,c.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),h},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(u.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(u.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(u.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(u.ANIMATION_COMPLETE,u.ANIMATION_COMPLETE_KEY)},emitEvents:function(o,c){var h=this.currentAnim;if(h){var d=this.currentFrame,v=this.parent,m=d.textureFrame;v.emit(o,h,d,v,m),c&&v.emit(c+h.key,h,d,v,m)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var o=this.currentFrame;if(!o)return 0;var c=o.progress;return this.inReverse&&(c*=-1),c},setProgress:function(o){return this.forward||(o=1-o),this.setCurrentFrame(this.currentAnim.getFrameByProgress(o)),this.parent},setRepeat:function(o){return this.repeatCounter=o===-1?Number.MAX_VALUE:o,this.parent},globalRemove:function(o,c){c===void 0&&(c=this.currentAnim),this.isPlaying&&c.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(o,c){o===void 0&&(o=!1),c===void 0&&(c=!1);var h=this.currentAnim,d=this.parent;return h?(c&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),h.getFirstTick(this),this.emitEvents(u.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!o,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(h.frames[0]),this.parent):d},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var o=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(o)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var o=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(o)}return this.parent},stopAfterDelay:function(o){return this._pendingStop=1,this._pendingStopValue=o,this.parent},stopAfterRepeat:function(o){return o===void 0&&(o=1),this.repeatCounter!==-1&&o>this.repeatCounter&&(o=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=o,this.parent},stopOnFrame:function(o){return this._pendingStop=3,this._pendingStopValue=o,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(o,c){var h=this.currentAnim;if(!(!this.isPlaying||!h||h.paused)){if(this.accumulator+=c*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=c,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?h.nextFrame(this):h.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var d=0;do this.forward?h.nextFrame(this):h.previousFrame(this),d++;while(this.isPlaying&&this.accumulator>this.nextTick&&d<60)}}},setCurrentFrame:function(o){var c=this.parent;return this.currentFrame=o,c.texture=o.frame.texture,c.frame=o.frame,c.isCropped&&c.frame.updateCropUVs(c._crop,c.flipX,c.flipY),o.setAlpha&&(c.alpha=o.alpha),c.setSizeToFrame(),c._originComponent&&(o.frame.customPivot?c.setOrigin(o.frame.pivotX,o.frame.pivotY):c.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(u.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===o&&this.stop()),c},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(o){return this.anims?this.anims.get(o):null},exists:function(o){return this.anims?this.anims.has(o):!1},create:function(o){var c=o.key,h=!1;return c&&(h=this.get(c),h?console.warn("Animation key already exists: "+c):(h=new l(this,c,o),this.anims||(this.anims=new p),this.anims.set(c,h))),h},createFromAseprite:function(o,c){return this.animationManager.createFromAseprite(o,c,this.parent)},generateFrameNames:function(o,c){return this.animationManager.generateFrameNames(o,c)},generateFrameNumbers:function(o,c){return this.animationManager.generateFrameNumbers(o,c)},remove:function(o){var c=this.get(o);return c&&(this.currentAnim===c&&this.stop(),this.anims.delete(o)),c},destroy:function(){this.animationManager.off(u.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});s.exports=a},44509:s=>{s.exports="add"},84563:s=>{s.exports="animationcomplete"},61586:s=>{s.exports="animationcomplete-"},72175:s=>{s.exports="animationrepeat"},568:s=>{s.exports="animationrestart"},37690:s=>{s.exports="animationstart"},58525:s=>{s.exports="animationstop"},5243:s=>{s.exports="animationupdate"},10598:s=>{s.exports="pauseall"},4860:s=>{s.exports="remove"},31865:s=>{s.exports="resumeall"},16938:(s,g,e)=>{s.exports={ADD_ANIMATION:e(44509),ANIMATION_COMPLETE:e(84563),ANIMATION_COMPLETE_KEY:e(61586),ANIMATION_REPEAT:e(72175),ANIMATION_RESTART:e(568),ANIMATION_START:e(37690),ANIMATION_STOP:e(58525),ANIMATION_UPDATE:e(5243),PAUSE_ALL:e(10598),REMOVE_ANIMATION:e(4860),RESUME_ALL:e(31865)}},13517:(s,g,e)=>{s.exports={Animation:e(85463),AnimationFrame:e(71519),AnimationManager:e(90249),AnimationState:e(16569),Events:e(16938)}},23740:(s,g,e)=>{var n=e(56694),p=e(33885),f=e(6659),u=e(69773),l=new n({initialize:function(){this.entries=new p,this.events=new f},add:function(a,o){return this.entries.set(a,o),this.events.emit(u.ADD,this,a,o),this},has:function(a){return this.entries.has(a)},exists:function(a){return this.entries.has(a)},get:function(a){return this.entries.get(a)},remove:function(a){var o=this.get(a);return o&&(this.entries.delete(a),this.events.emit(u.REMOVE,this,a,o.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});s.exports=l},43474:(s,g,e)=>{var n=e(23740),p=e(56694),f=e(97081),u=new p({initialize:function(a){this.game=a,this.binary=new n,this.bitmapFont=new n,this.json=new n,this.physics=new n,this.shader=new n,this.audio=new n,this.video=new n,this.text=new n,this.html=new n,this.obj=new n,this.tilemap=new n,this.xml=new n,this.custom={},this.game.events.once(f.DESTROY,this.destroy,this)},addCustom:function(l){return this.custom.hasOwnProperty(l)||(this.custom[l]=new n),this.custom[l]},destroy:function(){for(var l=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],a=0;a<l.length;a++)this[l[a]].destroy(),this[l[a]]=null;for(var o in this.custom)this.custom[o].destroy();this.custom=null,this.game=null}});s.exports=u},94762:s=>{s.exports="add"},75968:s=>{s.exports="remove"},69773:(s,g,e)=>{s.exports={ADD:e(94762),REMOVE:e(75968)}},45820:(s,g,e)=>{s.exports={BaseCache:e(23740),CacheManager:e(43474),Events:e(69773)}},51052:(s,g,e)=>{var n=e(56694),p=e(64937),f=e(75606),u=e(6659),l=e(89787),a=e(74118),o=e(69360),c=e(93222),h=e(93736),d=new n({Extends:u,Mixins:[p.AlphaSingle,p.Visible],initialize:function(m,y,C,T){m===void 0&&(m=0),y===void 0&&(y=0),C===void 0&&(C=0),T===void 0&&(T=0),u.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new a,this.dirty=!0,this._x=m,this._y=y,this._width=C,this._height=T,this._bounds=new a,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new o,this.transparent=!0,this.backgroundColor=c("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new h(C/2,T/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0},addToRenderList:function(v){this.renderList.push(v)},setOrigin:function(v,m){return v===void 0&&(v=.5),m===void 0&&(m=v),this.originX=v,this.originY=m,this},getScroll:function(v,m,y){y===void 0&&(y=new h);var C=this.width*.5,T=this.height*.5;return y.x=v-C,y.y=m-T,this.useBounds&&(y.x=this.clampX(y.x),y.y=this.clampY(y.y)),y},centerOnX:function(v){var m=this.width*.5;return this.midPoint.x=v,this.scrollX=v-m,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(v){var m=this.height*.5;return this.midPoint.y=v,this.scrollY=v-m,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(v,m){return this.centerOnX(v),this.centerOnY(m),this},centerToBounds:function(){if(this.useBounds){var v=this._bounds,m=this.width*.5,y=this.height*.5;this.midPoint.set(v.centerX,v.centerY),this.scrollX=v.centerX-m,this.scrollY=v.centerY-y}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(v){if(this.disableCull)return v;var m=this.matrix.matrix,y=m[0],C=m[1],T=m[2],P=m[3],S=y*P-C*T;if(!S)return v;var M=m[4],E=m[5],A=this.scrollX,R=this.scrollY,w=this.width,O=this.height,F=this.y,b=F+O,I=this.x,N=I+w,z=this.culledObjects,U=v.length;S=1/S,z.length=0;for(var W=0;W<U;++W){var D=v[W];if(!D.hasOwnProperty("width")||D.parentContainer){z.push(D);continue}var V=D.width,L=D.height,B=D.x-A*D.scrollFactorX-V*D.originX,G=D.y-R*D.scrollFactorY-L*D.originY,Y=B*y+G*T+M,X=B*C+G*P+E,k=(B+V)*y+(G+L)*T+M,H=(B+V)*C+(G+L)*P+E;k>I&&Y<N&&H>F&&X<b&&z.push(D)}return z},getWorldPoint:function(v,m,y){y===void 0&&(y=new h);var C=this.matrix.matrix,T=C[0],P=C[1],S=C[2],M=C[3],E=C[4],A=C[5],R=T*M-P*S;if(!R)return y.x=v,y.y=m,y;R=1/R;var w=M*R,O=-P*R,F=-S*R,b=T*R,I=(S*A-M*E)*R,N=(P*E-T*A)*R,z=Math.cos(this.rotation),U=Math.sin(this.rotation),W=this.zoomX,D=this.zoomY,V=this.scrollX,L=this.scrollY,B=v+(V*z-L*U)*W,G=m+(V*U+L*z)*D;return y.x=B*w+G*F+I,y.y=B*O+G*b+N,y},ignore:function(v){var m=this.id;Array.isArray(v)||(v=[v]);for(var y=0;y<v.length;y++){var C=v[y];Array.isArray(C)?this.ignore(C):C.isParent?this.ignore(C.getChildren()):C.cameraFilter|=m}return this},preRender:function(){this.renderList.length=0;var v=this.width,m=this.height,y=v*.5,C=m*.5,T=this.zoomX,P=this.zoomY,S=this.matrix,M=v*this.originX,E=m*this.originY,A=this.scrollX,R=this.scrollY;this.useBounds&&(A=this.clampX(A),R=this.clampY(R)),this.roundPixels&&(M=Math.round(M),E=Math.round(E)),this.scrollX=A,this.scrollY=R;var w=A+y,O=R+C;this.midPoint.set(w,O);var F=v/T,b=m/P;this.worldView.setTo(w-F/2,O-b/2,F,b),S.applyITRS(this.x+M,this.y+E,this.rotation,T,P),S.translate(-M,-E)},clampX:function(v){var m=this._bounds,y=this.displayWidth,C=m.x+(y-this.width)/2,T=Math.max(C,C+m.width-y);return v<C?v=C:v>T&&(v=T),v},clampY:function(v){var m=this._bounds,y=this.displayHeight,C=m.y+(y-this.height)/2,T=Math.max(C,C+m.height-y);return v<C?v=C:v>T&&(v=T),v},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(v){return v===void 0&&(v=0),this.rotation=f(v),this},setBackgroundColor:function(v){return v===void 0&&(v="rgba(0,0,0,0)"),this.backgroundColor=c(v),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(v,m,y,C,T){return T===void 0&&(T=!1),this._bounds.setTo(v,m,y,C),this.dirty=!0,this.useBounds=!0,T?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(v){v===void 0&&(v=new a);var m=this._bounds;return v.setTo(m.x,m.y,m.width,m.height),v},setName:function(v){return v===void 0&&(v=""),this.name=v,this},setPosition:function(v,m){return m===void 0&&(m=v),this.x=v,this.y=m,this},setRotation:function(v){return v===void 0&&(v=0),this.rotation=v,this},setRoundPixels:function(v){return this.roundPixels=v,this},setScene:function(v,m){m===void 0&&(m=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=v,this.isSceneCamera=m;var y=v.sys;return this.sceneManager=y.game.scene,this.scaleManager=y.scale,this.cameraManager=y.cameras,this.updateSystem(),this},setScroll:function(v,m){return m===void 0&&(m=v),this.scrollX=v,this.scrollY=m,this},setSize:function(v,m){return m===void 0&&(m=v),this.width=v,this.height=m,this},setViewport:function(v,m,y,C){return this.x=v,this.y=m,this.width=y,this.height=C,this},setZoom:function(v,m){return v===void 0&&(v=1),m===void 0&&(m=v),v===0&&(v=.001),m===0&&(m=.001),this.zoomX=v,this.zoomY=m,this},setMask:function(v,m){return m===void 0&&(m=!0),this.mask=v,this._maskCamera=m?this.cameraManager.default:this,this},clearMask:function(v){return v===void 0&&(v=!1),v&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var v={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(v.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),v},update:function(){},setIsSceneCamera:function(v){return this.isSceneCamera=v,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var v=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,m=this.sceneManager;v&&!this._customViewport?m.customViewports++:!v&&this._customViewport&&m.customViewports--,this.dirty=!0,this._customViewport=v}},destroy:function(){this.emit(l.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(v){this._x=v,this.updateSystem()}},y:{get:function(){return this._y},set:function(v){this._y=v,this.updateSystem()}},width:{get:function(){return this._width},set:function(v){this._width=v,this.updateSystem()}},height:{get:function(){return this._height},set:function(v){this._height=v,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(v){v!==this._scrollX&&(this._scrollX=v,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(v){v!==this._scrollY&&(this._scrollY=v,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(v){this._zoomX=v,this._zoomY=v,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(v){this._zoomX=v,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(v){this._zoomY=v,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(v){this._rotation=v,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});s.exports=d},47751:(s,g,e)=>{var n=e(51052),p=e(79993),f=e(82897),u=e(56694),l=e(64937),a=e(53030),o=e(89787),c=e(42798),h=e(74118),d=e(93736),v=new u({Extends:n,Mixins:[l.PostPipeline],initialize:function(y,C,T,P){n.call(this,y,C,T,P),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new a.Fade(this),this.flashEffect=new a.Flash(this),this.shakeEffect=new a.Shake(this),this.panEffect=new a.Pan(this),this.rotateToEffect=new a.RotateTo(this),this.zoomEffect=new a.Zoom(this),this.lerp=new d(1,1),this.followOffset=new d,this.deadzone=null,this._follow=null},setDeadzone:function(m,y){if(m===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=m,this.deadzone.height=y):this.deadzone=new h(0,0,m,y),this._follow){var C=this.width/2,T=this.height/2,P=this._follow.x-this.followOffset.x,S=this._follow.y-this.followOffset.y;this.midPoint.set(P,S),this.scrollX=P-C,this.scrollY=S-T}p(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(m,y,C,T,P,S){return this.fadeEffect.start(!1,m,y,C,T,!0,P,S)},fadeOut:function(m,y,C,T,P,S){return this.fadeEffect.start(!0,m,y,C,T,!0,P,S)},fadeFrom:function(m,y,C,T,P,S,M){return this.fadeEffect.start(!1,m,y,C,T,P,S,M)},fade:function(m,y,C,T,P,S,M){return this.fadeEffect.start(!0,m,y,C,T,P,S,M)},flash:function(m,y,C,T,P,S,M){return this.flashEffect.start(m,y,C,T,P,S,M)},shake:function(m,y,C,T,P){return this.shakeEffect.start(m,y,C,T,P)},pan:function(m,y,C,T,P,S,M){return this.panEffect.start(m,y,C,T,P,S,M)},rotateTo:function(m,y,C,T,P,S,M){return this.rotateToEffect.start(m,y,C,T,P,S,M)},zoomTo:function(m,y,C,T,P,S){return this.zoomEffect.start(m,y,C,T,P,S)},preRender:function(){this.renderList.length=0;var m=this.width,y=this.height,C=m*.5,T=y*.5,P=this.zoom,S=this.matrix,M=m*this.originX,E=y*this.originY,A=this._follow,R=this.deadzone,w=this.scrollX,O=this.scrollY;R&&p(R,this.midPoint.x,this.midPoint.y);var F=!1;if(this.roundPixels&&(M=Math.floor(M),E=Math.floor(E)),A&&!this.panEffect.isRunning){var b=this.lerp,I=A.x-this.followOffset.x,N=A.y-this.followOffset.y;this.roundPixels&&(I=Math.floor(I),N=Math.floor(N)),R?(I<R.x?w=c(w,w-(R.x-I),b.x):I>R.right&&(w=c(w,w+(I-R.right),b.x)),N<R.y?O=c(O,O-(R.y-N),b.y):N>R.bottom&&(O=c(O,O+(N-R.bottom),b.y))):(w=c(w,I-M,b.x),O=c(O,N-E,b.y)),F=!0}this.useBounds&&(w=this.clampX(w),O=this.clampY(O)),this.roundPixels&&(w=Math.floor(w),O=Math.floor(O)),this.scrollX=w,this.scrollY=O;var z=w+C,U=O+T;this.midPoint.set(z,U);var W=m/P,D=y/P,V=z-W/2,L=U-D/2;this.roundPixels&&(V=Math.floor(V),L=Math.floor(L)),this.worldView.setTo(V,L,W,D),S.applyITRS(Math.floor(this.x+M),Math.floor(this.y+E),this.rotation,P,P),S.translate(-M,-E),this.shakeEffect.preRender(),F&&this.emit(o.FOLLOW_UPDATE,this,A)},setLerp:function(m,y){return m===void 0&&(m=1),y===void 0&&(y=m),this.lerp.set(m,y),this},setFollowOffset:function(m,y){return m===void 0&&(m=0),y===void 0&&(y=0),this.followOffset.set(m,y),this},startFollow:function(m,y,C,T,P,S){y===void 0&&(y=!1),C===void 0&&(C=1),T===void 0&&(T=C),P===void 0&&(P=0),S===void 0&&(S=P),this._follow=m,this.roundPixels=y,C=f(C,0,1),T=f(T,0,1),this.lerp.set(C,T),this.followOffset.set(P,S);var M=this.width/2,E=this.height/2,A=m.x-P,R=m.y-S;return this.midPoint.set(A,R),this.scrollX=A-M,this.scrollY=R-E,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(m,y){this.visible&&(this.rotateToEffect.update(m,y),this.panEffect.update(m,y),this.zoomEffect.update(m,y),this.shakeEffect.update(m,y),this.flashEffect.update(m,y),this.fadeEffect.update(m,y))},destroy:function(){this.resetFX(),n.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});s.exports=v},62382:(s,g,e)=>{var n=e(47751),p=e(56694),f=e(72632),u=e(91963),l=e(94287),a=e(40444),o=e(7599),c=new p({initialize:function(d){this.scene=d,this.systems=d.sys,this.roundPixels=d.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,d.sys.events.once(o.BOOT,this.boot,this),d.sys.events.on(o.START,this.start,this)},boot:function(){var h=this.systems;h.settings.cameras?this.fromJSON(h.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new n(0,0,h.scale.width,h.scale.height).setScene(this.scene),h.game.scale.on(a.RESIZE,this.onResize,this),this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){if(!this.main){var h=this.systems;h.settings.cameras?this.fromJSON(h.settings.cameras):this.add(),this.main=this.cameras[0]}var d=this.systems.events;d.on(o.UPDATE,this.update,this),d.once(o.SHUTDOWN,this.shutdown,this)},add:function(h,d,v,m,y,C){h===void 0&&(h=0),d===void 0&&(d=0),v===void 0&&(v=this.scene.sys.scale.width),m===void 0&&(m=this.scene.sys.scale.height),y===void 0&&(y=!1),C===void 0&&(C="");var T=new n(h,d,v,m);return T.setName(C),T.setScene(this.scene),T.setRoundPixels(this.roundPixels),T.id=this.getNextID(),this.cameras.push(T),y&&(this.main=T),T},addExisting:function(h,d){d===void 0&&(d=!1);var v=this.cameras.indexOf(h);return v===-1?(h.id=this.getNextID(),h.setRoundPixels(this.roundPixels),this.cameras.push(h),d&&(this.main=h),h):null},getNextID:function(){for(var h=this.cameras,d=1,v=0;v<32;v++){for(var m=!1,y=0;y<h.length;y++){var C=h[y];if(C&&C.id===d){m=!0;continue}}if(m)d=d<<1;else return d}return 0},getTotal:function(h){h===void 0&&(h=!1);for(var d=0,v=this.cameras,m=0;m<v.length;m++){var y=v[m];(!h||h&&y.visible)&&d++}return d},fromJSON:function(h){Array.isArray(h)||(h=[h]);for(var d=this.scene.sys.scale.width,v=this.scene.sys.scale.height,m=0;m<h.length;m++){var y=h[m],C=f(y,"x",0),T=f(y,"y",0),P=f(y,"width",d),S=f(y,"height",v),M=this.add(C,T,P,S);M.name=f(y,"name",""),M.zoom=f(y,"zoom",1),M.rotation=f(y,"rotation",0),M.scrollX=f(y,"scrollX",0),M.scrollY=f(y,"scrollY",0),M.roundPixels=f(y,"roundPixels",!1),M.visible=f(y,"visible",!0);var E=f(y,"backgroundColor",!1);E&&M.setBackgroundColor(E);var A=f(y,"bounds",null);if(A){var R=f(A,"x",0),w=f(A,"y",0),O=f(A,"width",d),F=f(A,"height",v);M.setBounds(R,w,O,F)}}return this},getCamera:function(h){for(var d=this.cameras,v=0;v<d.length;v++)if(d[v].name===h)return d[v];return null},getCamerasBelowPointer:function(h){for(var d=this.cameras,v=h.x,m=h.y,y=[],C=0;C<d.length;C++){var T=d[C];T.visible&&T.inputEnabled&&l(T,v,m)&&y.unshift(T)}return y},remove:function(h,d){d===void 0&&(d=!0),Array.isArray(h)||(h=[h]);for(var v=0,m=this.cameras,y=0;y<h.length;y++){var C=m.indexOf(h[y]);C!==-1&&(d?m[C].destroy():m[C].renderList=[],m.splice(C,1),v++)}return!this.main&&m[0]&&(this.main=m[0]),v},render:function(h,d){for(var v=this.scene,m=this.cameras,y=0;y<m.length;y++){var C=m[y];if(C.visible&&C.alpha>0){C.preRender();var T=this.getVisibleChildren(d.getChildren(),C);h.render(v,T,C)}}},getVisibleChildren:function(h,d){return h.filter(function(v){return v.willRender(d)})},resetAll:function(){for(var h=0;h<this.cameras.length;h++)this.cameras[h].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(h,d){for(var v=0;v<this.cameras.length;v++)this.cameras[v].update(h,d)},onResize:function(h,d,v,m,y){for(var C=0;C<this.cameras.length;C++){var T=this.cameras[C];T._x===0&&T._y===0&&T._width===m&&T._height===y&&T.setSize(d.width,d.height)}},resize:function(h,d){for(var v=0;v<this.cameras.length;v++)this.cameras[v].setSize(h,d)},shutdown:function(){this.main=void 0;for(var h=0;h<this.cameras.length;h++)this.cameras[h].destroy();this.cameras=[];var d=this.systems.events;d.off(o.UPDATE,this.update,this),d.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(o.START,this.start,this),this.systems.events.off(o.DESTROY,this.destroy,this),this.systems.game.scale.off(a.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});u.register("CameraManager",c,"cameras"),s.exports=c},92522:(s,g,e)=>{var n=e(82897),p=e(56694),f=e(89787),u=new p({initialize:function(a){this.camera=a,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(l,a,o,c,h,d,v,m){if(l===void 0&&(l=!0),a===void 0&&(a=1e3),o===void 0&&(o=0),c===void 0&&(c=0),h===void 0&&(h=0),d===void 0&&(d=!1),v===void 0&&(v=null),m===void 0&&(m=this.camera.scene),!d&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=a,this.direction=l,this.progress=0,this.red=o,this.green=c,this.blue=h,this.alpha=l?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=v,this._onUpdateScope=m;var y=l?f.FADE_OUT_START:f.FADE_IN_START;return this.camera.emit(y,this.camera,this,a,o,c,h),this.camera},update:function(l,a){!this.isRunning||(this._elapsed+=a,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(l){if(!this.isRunning&&!this.isComplete)return!1;var a=this.camera;return l.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",l.fillRect(a.x,a.y,a.width,a.height),!0},postRenderWebGL:function(l,a){if(!this.isRunning&&!this.isComplete)return!1;var o=this.camera,c=this.red/255,h=this.green/255,d=this.blue/255;return l.drawFillRect(o.x,o.y,o.width,o.height,a(d,h,c,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var l=this.direction?f.FADE_OUT_COMPLETE:f.FADE_IN_COMPLETE;this.camera.emit(l,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});s.exports=u},22151:(s,g,e)=>{var n=e(82897),p=e(56694),f=e(89787),u=new p({initialize:function(a){this.camera=a,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(l,a,o,c,h,d,v){return l===void 0&&(l=250),a===void 0&&(a=255),o===void 0&&(o=255),c===void 0&&(c=255),h===void 0&&(h=!1),d===void 0&&(d=null),v===void 0&&(v=this.camera.scene),!h&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=l,this.progress=0,this.red=a,this.green=o,this.blue=c,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=d,this._onUpdateScope=v,this.camera.emit(f.FLASH_START,this.camera,this,l,a,o,c),this.camera)},update:function(l,a){!this.isRunning||(this._elapsed+=a,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(l){if(!this.isRunning)return!1;var a=this.camera;return l.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",l.fillRect(a.x,a.y,a.width,a.height),!0},postRenderWebGL:function(l,a){if(!this.isRunning)return!1;var o=this.camera,c=this.red/255,h=this.green/255,d=this.blue/255;return l.drawFillRect(o.x,o.y,o.width,o.height,a(d,h,c,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(f.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});s.exports=u},37551:(s,g,e)=>{var n=e(82897),p=e(56694),f=e(35060),u=e(89787),l=e(93736),a=new p({initialize:function(c){this.camera=c,this.isRunning=!1,this.duration=0,this.source=new l,this.current=new l,this.destination=new l,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(o,c,h,d,v,m,y){h===void 0&&(h=1e3),d===void 0&&(d=f.Linear),v===void 0&&(v=!1),m===void 0&&(m=null),y===void 0&&(y=this.camera.scene);var C=this.camera;return!v&&this.isRunning||(this.isRunning=!0,this.duration=h,this.progress=0,this.source.set(C.scrollX,C.scrollY),this.destination.set(o,c),C.getScroll(o,c,this.current),typeof d=="string"&&f.hasOwnProperty(d)?this.ease=f[d]:typeof d=="function"&&(this.ease=d),this._elapsed=0,this._onUpdate=m,this._onUpdateScope=y,this.camera.emit(u.PAN_START,this.camera,this,h,o,c)),C},update:function(o,c){if(!!this.isRunning){this._elapsed+=c;var h=n(this._elapsed/this.duration,0,1);this.progress=h;var d=this.camera;if(this._elapsed<this.duration){var v=this.ease(h);d.getScroll(this.destination.x,this.destination.y,this.current);var m=this.source.x+(this.current.x-this.source.x)*v,y=this.source.y+(this.current.y-this.source.y)*v;d.setScroll(m,y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,d,h,m,y)}else d.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,d,h,d.scrollX,d.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});s.exports=a},1771:(s,g,e)=>{var n=e(82897),p=e(56694),f=e(89787),u=e(35060),l=new p({initialize:function(o){this.camera=o,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(a,o,c,h,d,v,m){c===void 0&&(c=1e3),h===void 0&&(h=u.Linear),d===void 0&&(d=!1),v===void 0&&(v=null),m===void 0&&(m=this.camera.scene),o===void 0&&(o=!1),this.shortestPath=o;var y=a;a<0?(y=-1*a,this.clockwise=!1):this.clockwise=!0;var C=360*Math.PI/180;y=y-Math.floor(y/C)*C;var T=this.camera;if(!d&&this.isRunning)return T;if(this.isRunning=!0,this.duration=c,this.progress=0,this.source=T.rotation,this.destination=y,typeof h=="string"&&u.hasOwnProperty(h)?this.ease=u[h]:typeof h=="function"&&(this.ease=h),this._elapsed=0,this._onUpdate=v,this._onUpdateScope=m,this.shortestPath){var P=0,S=0;this.destination>this.source?P=Math.abs(this.destination-this.source):P=Math.abs(this.destination+C)-this.source,this.source>this.destination?S=Math.abs(this.source-this.destination):S=Math.abs(this.source+C)-this.destination,P<S?this.clockwise=!0:P>S&&(this.clockwise=!1)}return this.camera.emit(f.ROTATE_START,this.camera,this,c,y),T},update:function(a,o){if(!!this.isRunning){this._elapsed+=o;var c=n(this._elapsed/this.duration,0,1);this.progress=c;var h=this.camera;if(this._elapsed<this.duration){var d=this.ease(c);this.current=h.rotation;var v=0,m=360*Math.PI/180,y=this.destination,C=this.current;this.clockwise===!1&&(y=this.current,C=this.destination),y>=C?v=Math.abs(y-C):v=Math.abs(y+m)-C;var T=0;this.clockwise?T=h.rotation+v*d:T=h.rotation-v*d,h.rotation=T,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,h,c,T)}else h.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,h,c,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(f.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});s.exports=l},3241:(s,g,e)=>{var n=e(82897),p=e(56694),f=e(89787),u=e(93736),l=new p({initialize:function(o){this.camera=o,this.isRunning=!1,this.duration=0,this.intensity=new u,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(a,o,c,h,d){return a===void 0&&(a=100),o===void 0&&(o=.05),c===void 0&&(c=!1),h===void 0&&(h=null),d===void 0&&(d=this.camera.scene),!c&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=a,this.progress=0,typeof o=="number"?this.intensity.set(o):this.intensity.set(o.x,o.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=h,this._onUpdateScope=d,this.camera.emit(f.SHAKE_START,this.camera,this,a,o),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(a,o){if(!!this.isRunning)if(this._elapsed+=o,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var c=this.intensity,h=this.camera.width,d=this.camera.height,v=this.camera.zoom;this._offsetX=(Math.random()*c.x*h*2-c.x*h)*v,this._offsetY=(Math.random()*c.y*d*2-c.y*d)*v,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(f.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});s.exports=l},13383:(s,g,e)=>{var n=e(82897),p=e(56694),f=e(35060),u=e(89787),l=new p({initialize:function(o){this.camera=o,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(a,o,c,h,d,v){o===void 0&&(o=1e3),c===void 0&&(c=f.Linear),h===void 0&&(h=!1),d===void 0&&(d=null),v===void 0&&(v=this.camera.scene);var m=this.camera;return!h&&this.isRunning||(this.isRunning=!0,this.duration=o,this.progress=0,this.source=m.zoom,this.destination=a,typeof c=="string"&&f.hasOwnProperty(c)?this.ease=f[c]:typeof c=="function"&&(this.ease=c),this._elapsed=0,this._onUpdate=d,this._onUpdateScope=v,this.camera.emit(u.ZOOM_START,this.camera,this,o,a)),m},update:function(a,o){!this.isRunning||(this._elapsed+=o,this.progress=n(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});s.exports=l},53030:(s,g,e)=>{s.exports={Fade:e(92522),Flash:e(22151),Pan:e(37551),Shake:e(3241),RotateTo:e(1771),Zoom:e(13383)}},39577:s=>{s.exports="cameradestroy"},85373:s=>{s.exports="camerafadeincomplete"},92057:s=>{s.exports="camerafadeinstart"},1903:s=>{s.exports="camerafadeoutcomplete"},96131:s=>{s.exports="camerafadeoutstart"},85409:s=>{s.exports="cameraflashcomplete"},25500:s=>{s.exports="cameraflashstart"},44071:s=>{s.exports="followupdate"},19818:s=>{s.exports="camerapancomplete"},80002:s=>{s.exports="camerapanstart"},87966:s=>{s.exports="postrender"},74217:s=>{s.exports="prerender"},34805:s=>{s.exports="camerarotatecomplete"},30408:s=>{s.exports="camerarotatestart"},49856:s=>{s.exports="camerashakecomplete"},69189:s=>{s.exports="camerashakestart"},67657:s=>{s.exports="camerazoomcomplete"},14229:s=>{s.exports="camerazoomstart"},89787:(s,g,e)=>{s.exports={DESTROY:e(39577),FADE_IN_COMPLETE:e(85373),FADE_IN_START:e(92057),FADE_OUT_COMPLETE:e(1903),FADE_OUT_START:e(96131),FLASH_COMPLETE:e(85409),FLASH_START:e(25500),FOLLOW_UPDATE:e(44071),PAN_COMPLETE:e(19818),PAN_START:e(80002),POST_RENDER:e(87966),PRE_RENDER:e(74217),ROTATE_COMPLETE:e(34805),ROTATE_START:e(30408),SHAKE_COMPLETE:e(49856),SHAKE_START:e(69189),ZOOM_COMPLETE:e(67657),ZOOM_START:e(14229)}},32356:(s,g,e)=>{s.exports={Camera:e(47751),BaseCamera:e(51052),CameraManager:e(62382),Effects:e(53030),Events:e(89787)}},84219:(s,g,e)=>{var n=e(56694),p=e(10850),f=new n({initialize:function(l){this.camera=p(l,"camera",null),this.left=p(l,"left",null),this.right=p(l,"right",null),this.up=p(l,"up",null),this.down=p(l,"down",null),this.zoomIn=p(l,"zoomIn",null),this.zoomOut=p(l,"zoomOut",null),this.zoomSpeed=p(l,"zoomSpeed",.01),this.minZoom=p(l,"minZoom",.001),this.maxZoom=p(l,"maxZoom",1e3),this.speedX=0,this.speedY=0;var a=p(l,"speed",null);typeof a=="number"?(this.speedX=a,this.speedY=a):(this.speedX=p(l,"speed.x",0),this.speedY=p(l,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(u){return this.camera=u,this},update:function(u){if(!!this.active){u===void 0&&(u=1);var l=this.camera;this.up&&this.up.isDown?l.scrollY-=this.speedY*u|0:this.down&&this.down.isDown&&(l.scrollY+=this.speedY*u|0),this.left&&this.left.isDown?l.scrollX-=this.speedX*u|0:this.right&&this.right.isDown&&(l.scrollX+=this.speedX*u|0),this.zoomIn&&this.zoomIn.isDown?(l.zoom-=this.zoomSpeed,l.zoom<this.minZoom&&(l.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(l.zoom+=this.zoomSpeed,l.zoom>this.maxZoom&&(l.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});s.exports=f},69370:(s,g,e)=>{var n=e(56694),p=e(10850),f=new n({initialize:function(l){this.camera=p(l,"camera",null),this.left=p(l,"left",null),this.right=p(l,"right",null),this.up=p(l,"up",null),this.down=p(l,"down",null),this.zoomIn=p(l,"zoomIn",null),this.zoomOut=p(l,"zoomOut",null),this.zoomSpeed=p(l,"zoomSpeed",.01),this.minZoom=p(l,"minZoom",.001),this.maxZoom=p(l,"maxZoom",1e3),this.accelX=0,this.accelY=0;var a=p(l,"acceleration",null);typeof a=="number"?(this.accelX=a,this.accelY=a):(this.accelX=p(l,"acceleration.x",0),this.accelY=p(l,"acceleration.y",0)),this.dragX=0,this.dragY=0;var o=p(l,"drag",null);typeof o=="number"?(this.dragX=o,this.dragY=o):(this.dragX=p(l,"drag.x",0),this.dragY=p(l,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var c=p(l,"maxSpeed",null);typeof c=="number"?(this.maxSpeedX=c,this.maxSpeedY=c):(this.maxSpeedX=p(l,"maxSpeed.x",0),this.maxSpeedY=p(l,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(u){return this.camera=u,this},update:function(u){if(!!this.active){u===void 0&&(u=1);var l=this.camera;this._speedX>0?(this._speedX-=this.dragX*u,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*u,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*u,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*u,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(l.scrollX-=this._speedX*u|0),this._speedY!==0&&(l.scrollY-=this._speedY*u|0),this._zoom!==0&&(l.zoom+=this._zoom,l.zoom<this.minZoom?l.zoom=this.minZoom:l.zoom>this.maxZoom&&(l.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});s.exports=f},6524:(s,g,e)=>{s.exports={FixedKeyControl:e(84219),SmoothedKeyControl:e(69370)}},44143:(s,g,e)=>{s.exports={Controls:e(6524),Scene2D:e(32356)}},86459:(s,g,e)=>{var n={VERSION:"3.60.0",BlendModes:e(95723),ScaleModes:e(27394),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};s.exports=n},14033:(s,g,e)=>{var n=e(56694),p=e(86459),f=e(18360),u=e(77290),l=e(72632),a=e(10850),o=e(42911),c=e(72283),h=e(5923),d=e(65641),v=e(93222),m=new n({initialize:function(C){C===void 0&&(C={});var T=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],P="#ffffff",S=a(C,"scale",null);this.width=a(S,"width",1024,C),this.height=a(S,"height",768,C),this.zoom=a(S,"zoom",1,C),this.parent=a(S,"parent",void 0,C),this.scaleMode=a(S,S?"mode":"scaleMode",0,C),this.expandParent=a(S,"expandParent",!0,C),this.autoRound=a(S,"autoRound",!1,C),this.autoCenter=a(S,"autoCenter",0,C),this.resizeInterval=a(S,"resizeInterval",500,C),this.fullscreenTarget=a(S,"fullscreenTarget",null,C),this.minWidth=a(S,"minWidth",0,C),this.maxWidth=a(S,"maxWidth",0,C),this.minHeight=a(S,"minHeight",0,C),this.maxHeight=a(S,"maxHeight",0,C),this.renderType=a(C,"type",p.AUTO),this.canvas=a(C,"canvas",null),this.context=a(C,"context",null),this.canvasStyle=a(C,"canvasStyle",null),this.customEnvironment=a(C,"customEnvironment",!1),this.sceneConfig=a(C,"scene",null),this.seed=a(C,"seed",[(Date.now()*Math.random()).toString()]),h.RND=new h.RandomDataGenerator(this.seed),this.gameTitle=a(C,"title",""),this.gameURL=a(C,"url","https://phaser.io"),this.gameVersion=a(C,"version",""),this.autoFocus=a(C,"autoFocus",!0),this.stableSort=a(C,"stableSort",-1),this.stableSort===-1&&(this.stableSort=u.browser.es2019?1:0),u.features.stableSort=this.stableSort,this.domCreateContainer=a(C,"dom.createContainer",!1),this.domPointerEvents=a(C,"dom.pointerEvents","none"),this.inputKeyboard=a(C,"input.keyboard",!0),this.inputKeyboardEventTarget=a(C,"input.keyboard.target",window),this.inputKeyboardCapture=a(C,"input.keyboard.capture",[]),this.inputMouse=a(C,"input.mouse",!0),this.inputMouseEventTarget=a(C,"input.mouse.target",null),this.inputMousePreventDefaultDown=a(C,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=a(C,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=a(C,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=a(C,"input.mouse.preventDefaultWheel",!0),this.inputTouch=a(C,"input.touch",u.input.touch),this.inputTouchEventTarget=a(C,"input.touch.target",null),this.inputTouchCapture=a(C,"input.touch.capture",!0),this.inputActivePointers=a(C,"input.activePointers",1),this.inputSmoothFactor=a(C,"input.smoothFactor",0),this.inputWindowEvents=a(C,"input.windowEvents",!0),this.inputGamepad=a(C,"input.gamepad",!1),this.inputGamepadEventTarget=a(C,"input.gamepad.target",window),this.disableContextMenu=a(C,"disableContextMenu",!1),this.audio=a(C,"audio",{}),this.hideBanner=a(C,"banner",null)===!1,this.hidePhaser=a(C,"banner.hidePhaser",!1),this.bannerTextColor=a(C,"banner.text",P),this.bannerBackgroundColor=a(C,"banner.background",T),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=a(C,"fps",null);var M=a(C,"render",null);this.pipeline=a(M,"pipeline",null,C),this.autoMobilePipeline=a(M,"autoMobilePipeline",!0,C),this.defaultPipeline=a(M,"defaultPipeline",d.MULTI_PIPELINE,C),this.antialias=a(M,"antialias",!0,C),this.antialiasGL=a(M,"antialiasGL",!0,C),this.mipmapFilter=a(M,"mipmapFilter","",C),this.desynchronized=a(M,"desynchronized",!1,C),this.roundPixels=a(M,"roundPixels",!1,C),this.pixelArt=a(M,"pixelArt",this.zoom!==1,C),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=a(M,"transparent",!1,C),this.clearBeforeRender=a(M,"clearBeforeRender",!0,C),this.preserveDrawingBuffer=a(M,"preserveDrawingBuffer",!1,C),this.premultipliedAlpha=a(M,"premultipliedAlpha",!0,C),this.failIfMajorPerformanceCaveat=a(M,"failIfMajorPerformanceCaveat",!1,C),this.powerPreference=a(M,"powerPreference","default",C),this.batchSize=a(M,"batchSize",4096,C),this.maxTextures=a(M,"maxTextures",-1,C),this.maxLights=a(M,"maxLights",10,C);var E=a(C,"backgroundColor",0);this.backgroundColor=v(E),this.transparent&&(this.backgroundColor=v(0),this.backgroundColor.alpha=0),this.preBoot=a(C,"callbacks.preBoot",c),this.postBoot=a(C,"callbacks.postBoot",c),this.physics=a(C,"physics",{}),this.defaultPhysicsSystem=a(this.physics,"default",!1),this.loaderBaseURL=a(C,"loader.baseURL",""),this.loaderPath=a(C,"loader.path",""),this.loaderMaxParallelDownloads=a(C,"loader.maxParallelDownloads",u.os.android?6:32),this.loaderCrossOrigin=a(C,"loader.crossOrigin",void 0),this.loaderResponseType=a(C,"loader.responseType",""),this.loaderAsync=a(C,"loader.async",!0),this.loaderUser=a(C,"loader.user",""),this.loaderPassword=a(C,"loader.password",""),this.loaderTimeout=a(C,"loader.timeout",0),this.loaderWithCredentials=a(C,"loader.withCredentials",!1),this.loaderImageLoadType=a(C,"loader.imageLoadType","XHR"),this.loaderLocalScheme=a(C,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=a(C,"fx.glow.quality",.1),this.glowFXDistance=a(C,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var A=a(C,"plugins",null),R=f.DefaultScene;A&&(Array.isArray(A)?this.defaultPlugins=A:o(A)&&(this.installGlobalPlugins=l(A,"global",[]),this.installScenePlugins=l(A,"scene",[]),Array.isArray(A.default)?R=A.default:Array.isArray(A.defaultMerge)&&(R=R.concat(A.defaultMerge)))),this.defaultPlugins=R;var w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=a(C,"images.default",w+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=a(C,"images.missing",w+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=a(C,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=p.WEBGL:window.FORCE_CANVAS&&(this.renderType=p.CANVAS))}});s.exports=m},50150:(s,g,e)=>{var n=e(70616),p=e(61068),f=e(86459),u=e(90185),l=function(a){var o=a.config;if((o.customEnvironment||o.canvas)&&o.renderType===f.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!o.customEnvironment&&!o.canvas&&o.renderType!==f.HEADLESS)if(o.renderType===f.AUTO&&(o.renderType=u.webGL?f.WEBGL:f.CANVAS),o.renderType===f.WEBGL){if(!u.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(o.renderType===f.CANVAS){if(!u.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+o.renderType);o.antialias||p.disableSmoothing();var c=a.scale.baseSize,h=c.width,d=c.height;if(o.canvas?(a.canvas=o.canvas,a.canvas.width=h,a.canvas.height=d):a.canvas=p.create(a,h,d,o.renderType),o.canvasStyle&&(a.canvas.style=o.canvasStyle),o.antialias||n.setCrisp(a.canvas),o.renderType!==f.HEADLESS){var v,m;v=e(91135),m=e(11857),o.renderType===f.WEBGL?a.renderer=new m(a):(a.renderer=new v(a),a.context=a.renderer.gameContext)}};s.exports=l},77291:(s,g,e)=>{var n=e(86459),p=function(f){var u=f.config;if(!u.hideBanner){var l="WebGL";u.renderType===n.CANVAS?l="Canvas":u.renderType===n.HEADLESS&&(l="Headless");var a=u.audio,o=f.device.audio,c;if(o.webAudio&&!a.disableWebAudio?c="Web Audio":a.noAudio||!o.webAudio&&!o.audioData?c="No Audio":c="HTML5 Audio",f.device.browser.ie)window.console&&console.log("Phaser v"+n.VERSION+" / https://phaser.io");else{var h="",d=[h];if(Array.isArray(u.bannerBackgroundColor)){var v;u.bannerBackgroundColor.forEach(function(y){h=h.concat("%c "),d.push("background: "+y),v=y}),d[d.length-1]="color: "+u.bannerTextColor+"; background: "+v}else h=h.concat("%c "),d.push("color: "+u.bannerTextColor+"; background: "+u.bannerBackgroundColor);d.push("background: transparent"),u.gameTitle&&(h=h.concat(u.gameTitle),u.gameVersion&&(h=h.concat(" v"+u.gameVersion)),u.hidePhaser||(h=h.concat(" / ")));var m="";u.hidePhaser||(h=h.concat("Phaser v"+n.VERSION+m+" ("+l+" | "+c+")")),h=h.concat(" %c "+u.gameURL),d[0]=h,console.log.apply(console,d)}}};s.exports=p},15213:(s,g,e)=>{var n=e(99584),p=e(90249),f=e(43474),u=e(61068),l=e(56694),a=e(14033),o=e(85178),c=e(50150),h=e(81078),d=e(77291),v=e(77290),m=e(21546),y=e(6659),C=e(97081),T=e(69898),P=e(91963),S=e(49274),M=e(756),E=e(13553),A=e(38203),R=e(6237),w=e(26617),O=e(26493),F=e(84191);if(!1)var b;var I=new l({initialize:function(z){this.config=new a(z),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new y,this.anims=new p(this),this.textures=new R(this),this.cache=new f(this),this.registry=new h(this,new y),this.input=new T(this,this.config),this.scene=new E(this,this.config.sceneConfig),this.device=v,this.scale=new M(this,this.config),this.sound=null,this.sound=F.create(this),this.loop=new w(this,this.config.fps),this.plugins=new S(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,m(this.boot.bind(this))},boot:function(){if(!P.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),c(this),o(this),d(this),n(this.canvas,this.config.parent),this.textures.once(A.READY,this.texturesReady,this),this.events.emit(C.BOOT)},texturesReady:function(){this.events.emit(C.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),O(this);var N=this.events;N.on(C.HIDDEN,this.onHidden,this),N.on(C.VISIBLE,this.onVisible,this),N.on(C.BLUR,this.onBlur,this),N.on(C.FOCUS,this.onFocus,this)},step:function(N,z){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var U=this.events;U.emit(C.PRE_STEP,N,z),U.emit(C.STEP,N,z),this.scene.update(N,z),U.emit(C.POST_STEP,N,z);var W=this.renderer;W.preRender(),U.emit(C.PRE_RENDER,W,N,z),this.scene.render(W),W.postRender(),U.emit(C.POST_RENDER,W,N,z)}},headlessStep:function(N,z){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var U=this.events;U.emit(C.PRE_STEP,N,z),U.emit(C.STEP,N,z),this.scene.update(N,z),U.emit(C.POST_STEP,N,z),this.scene.isProcessing=!1,U.emit(C.PRE_RENDER,null,N,z),U.emit(C.POST_RENDER,null,N,z)}},onHidden:function(){this.loop.pause(),this.events.emit(C.PAUSE)},pause:function(){var N=this.isPaused;this.isPaused=!0,N||this.events.emit(C.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(C.RESUME)},resume:function(){var N=this.isPaused;this.isPaused=!1,N&&this.events.emit(C.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(N,z){z===void 0&&(z=!1),this.pendingDestroy=!0,this.removeCanvas=N,this.noReturn=z},runDestroy:function(){this.scene.destroy(),this.events.emit(C.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(u.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});s.exports=I},26617:(s,g,e)=>{var n=e(56694),p=e(10850),f=e(72283),u=e(27385),l=new n({initialize:function(o,c){this.game=o,this.raf=new u,this.started=!1,this.running=!1,this.minFps=p(c,"min",5),this.targetFps=p(c,"target",60),this.fpsLimit=p(c,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=f,this.forceSetTimeOut=p(c,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=p(c,"deltaHistory",10),this.panicMax=p(c,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=p(c,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var a=window.performance.now();this.time=a,this.lastTime=a,this.nextFpsUpdate=a+1e3,this.framesThisSecond=0;for(var o=0;o<this.deltaSmoothingMax;o++)this.deltaHistory[o]=Math.min(this._target,this.deltaHistory[o]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(a){if(this.started)return this;this.started=!0,this.running=!0;for(var o=0;o<this.deltaSmoothingMax;o++)this.deltaHistory[o]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=a;var c=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(c,this.forceSetTimeOut,this._target)},smoothDelta:function(a){var o=this.deltaIndex,c=this.deltaHistory,h=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,a=Math.min(a,this._target)),a>this._min&&(a=c[o],a=Math.min(a,this._min)),c[o]=a,this.deltaIndex++,this.deltaIndex>=h&&(this.deltaIndex=0);for(var d=0,v=0;v<h;v++)d+=c[v];return d/=h,d},updateFPS:function(a){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=a+1e3,this.framesThisSecond=0},stepLimitFPS:function(a){this.now=a;var o=Math.max(0,a-this.lastTime);this.rawDelta=o,this.time+=this.rawDelta,this.smoothStep&&(o=this.smoothDelta(o)),this.delta+=o,a>=this.nextFpsUpdate&&this.updateFPS(a),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(a,this.delta),this.delta=0),this.lastTime=a,this.frame++},step:function(a){this.now=a;var o=Math.max(0,a-this.lastTime);this.rawDelta=o,this.time+=this.rawDelta,this.smoothStep&&(o=this.smoothDelta(o)),this.delta=o,a>=this.nextFpsUpdate&&this.updateFPS(a),this.framesThisSecond++,this.callback(a,o),this.lastTime=a,this.frame++},tick:function(){var a=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(a):this.step(a)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(a){a===void 0&&(a=!1);var o=window.performance.now();if(!this.running){a&&(this.startTime+=-this.lastTime+(this.lastTime+o));var c=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(c,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=o+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});s.exports=l},26493:(s,g,e)=>{var n=e(97081),p=function(f){var u,l=f.events;if(document.hidden!==void 0)u="visibilitychange";else{var a=["webkit","moz","ms"];a.forEach(function(c){document[c+"Hidden"]!==void 0&&(document.hidden=function(){return document[c+"Hidden"]},u=c+"visibilitychange")})}var o=function(c){document.hidden||c.type==="pause"?l.emit(n.HIDDEN):l.emit(n.VISIBLE)};u&&document.addEventListener(u,o,!1),window.onblur=function(){l.emit(n.BLUR)},window.onfocus=function(){l.emit(n.FOCUS)},window.focus&&f.config.autoFocus&&window.focus()};s.exports=p},41651:s=>{s.exports="blur"},5520:s=>{s.exports="boot"},51673:s=>{s.exports="contextlost"},25055:s=>{s.exports="destroy"},23767:s=>{s.exports="focus"},57564:s=>{s.exports="hidden"},38327:s=>{s.exports="pause"},43807:s=>{s.exports="postrender"},73652:s=>{s.exports="poststep"},780:s=>{s.exports="prerender"},13781:s=>{s.exports="prestep"},38247:s=>{s.exports="ready"},29129:s=>{s.exports="resume"},34994:s=>{s.exports="step"},98704:s=>{s.exports="visible"},97081:(s,g,e)=>{s.exports={BLUR:e(41651),BOOT:e(5520),CONTEXT_LOST:e(51673),DESTROY:e(25055),FOCUS:e(23767),HIDDEN:e(57564),PAUSE:e(38327),POST_RENDER:e(43807),POST_STEP:e(73652),PRE_RENDER:e(780),PRE_STEP:e(13781),READY:e(38247),RESUME:e(29129),STEP:e(34994),VISIBLE:e(98704)}},80293:(s,g,e)=>{s.exports={Config:e(14033),CreateRenderer:e(50150),DebugHeader:e(77291),Events:e(97081),TimeStep:e(26617),VisibilityHandler:e(26493)}},52780:(s,g,e)=>{var n=e(81543),p=e(61068),f=e(10850),u=function(l){var a=f(l,"data",[]),o=f(l,"canvas",null),c=f(l,"palette",n),h=f(l,"pixelWidth",1),d=f(l,"pixelHeight",h),v=f(l,"resizeCanvas",!0),m=f(l,"clearCanvas",!0),y=f(l,"preRender",null),C=f(l,"postRender",null),T=Math.floor(Math.abs(a[0].length*h)),P=Math.floor(Math.abs(a.length*d));o||(o=p.create2D(this,T,P),v=!1,m=!1),v&&(o.width=T,o.height=P);var S=o.getContext("2d",{willReadFrequently:!0});m&&S.clearRect(0,0,T,P),y&&y(o,S);for(var M=0;M<a.length;M++)for(var E=a[M],A=0;A<E.length;A++){var R=E[A];R!=="."&&R!==" "&&(S.fillStyle=c[R],S.fillRect(A*h,M*d,h,d))}return C&&C(o,S),o};s.exports=u},84106:(s,g,e)=>{s.exports={GenerateTexture:e(52780),Palettes:e(25235)}},81543:s=>{s.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},75846:s=>{s.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},83206:s=>{s.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},13194:s=>{s.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},50686:s=>{s.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},25235:(s,g,e)=>{s.exports={ARNE16:e(81543),C64:e(75846),CGA:e(83206),JMP:e(13194),MSX:e(50686)}},63120:(s,g,e)=>{var n=e(56694),p=e(34631),f=e(38517),u=e(93736),l=new n({Extends:f,initialize:function(o,c,h,d){f.call(this,"CubicBezierCurve"),Array.isArray(o)&&(d=new u(o[6],o[7]),h=new u(o[4],o[5]),c=new u(o[2],o[3]),o=new u(o[0],o[1])),this.p0=o,this.p1=c,this.p2=h,this.p3=d},getStartPoint:function(a){return a===void 0&&(a=new u),a.copy(this.p0)},getResolution:function(a){return a},getPoint:function(a,o){o===void 0&&(o=new u);var c=this.p0,h=this.p1,d=this.p2,v=this.p3;return o.set(p(a,c.x,h.x,d.x,v.x),p(a,c.y,h.y,d.y,v.y))},draw:function(a,o){o===void 0&&(o=32);var c=this.getPoints(o);a.beginPath(),a.moveTo(this.p0.x,this.p0.y);for(var h=1;h<c.length;h++)a.lineTo(c[h].x,c[h].y);return a.strokePath(),a},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});l.fromJSON=function(a){var o=a.points,c=new u(o[0],o[1]),h=new u(o[2],o[3]),d=new u(o[4],o[5]),v=new u(o[6],o[7]);return new l(c,h,d,v)},s.exports=l},38517:(s,g,e)=>{var n=e(56694),p=e(80222),f=e(74118),u=e(93736),l=new n({initialize:function(o){this.type=o,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new u,this._tmpVec2B=new u},draw:function(a,o){return o===void 0&&(o=32),a.strokePoints(this.getPoints(o))},getBounds:function(a,o){a||(a=new f),o===void 0&&(o=16);var c=this.getLength();o>c&&(o=c/2);var h=Math.max(1,Math.round(c/o));return p(this.getSpacedPoints(h),a)},getDistancePoints:function(a){var o=this.getLength(),c=Math.max(1,o/a);return this.getSpacedPoints(c)},getEndPoint:function(a){return a===void 0&&(a=new u),this.getPointAt(1,a)},getLength:function(){var a=this.getLengths();return a[a.length-1]},getLengths:function(a){if(a===void 0&&(a=this.arcLengthDivisions),this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var o=[],c,h=this.getPoint(0,this._tmpVec2A),d=0;o.push(0);for(var v=1;v<=a;v++)c=this.getPoint(v/a,this._tmpVec2B),d+=c.distance(h),o.push(d),h.copy(c);return this.cacheArcLengths=o,o},getPointAt:function(a,o){var c=this.getUtoTmapping(a);return this.getPoint(c,o)},getPoints:function(a,o,c){c===void 0&&(c=[]),a||(o?a=this.getLength()/o:a=this.defaultDivisions);for(var h=0;h<=a;h++)c.push(this.getPoint(h/a));return c},getRandomPoint:function(a){return a===void 0&&(a=new u),this.getPoint(Math.random(),a)},getSpacedPoints:function(a,o,c){c===void 0&&(c=[]),a||(o?a=this.getLength()/o:a=this.defaultDivisions);for(var h=0;h<=a;h++){var d=this.getUtoTmapping(h/a,null,a);c.push(this.getPoint(d))}return c},getStartPoint:function(a){return a===void 0&&(a=new u),this.getPointAt(0,a)},getTangent:function(a,o){o===void 0&&(o=new u);var c=1e-4,h=a-c,d=a+c;return h<0&&(h=0),d>1&&(d=1),this.getPoint(h,this._tmpVec2A),this.getPoint(d,o),o.subtract(this._tmpVec2A).normalize()},getTangentAt:function(a,o){var c=this.getUtoTmapping(a);return this.getTangent(c,o)},getTFromDistance:function(a,o){return a<=0?0:this.getUtoTmapping(0,a,o)},getUtoTmapping:function(a,o,c){var h=this.getLengths(c),d=0,v=h.length,m;o?m=Math.min(o,h[v-1]):m=a*h[v-1];for(var y=0,C=v-1,T;y<=C;)if(d=Math.floor(y+(C-y)/2),T=h[d]-m,T<0)y=d+1;else if(T>0)C=d-1;else{C=d;break}if(d=C,h[d]===m)return d/(v-1);var P=h[d],S=h[d+1],M=S-P,E=(m-P)/M;return(d+E)/(v-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});s.exports=l},48835:(s,g,e)=>{var n=e(56694),p=e(38517),f=e(75606),u=e(10850),l=e(23701),a=e(93736),o=new n({Extends:p,initialize:function(h,d,v,m,y,C,T,P){if(typeof h=="object"){var S=h;h=u(S,"x",0),d=u(S,"y",0),v=u(S,"xRadius",0),m=u(S,"yRadius",v),y=u(S,"startAngle",0),C=u(S,"endAngle",360),T=u(S,"clockwise",!1),P=u(S,"rotation",0)}else m===void 0&&(m=v),y===void 0&&(y=0),C===void 0&&(C=360),T===void 0&&(T=!1),P===void 0&&(P=0);p.call(this,"EllipseCurve"),this.p0=new a(h,d),this._xRadius=v,this._yRadius=m,this._startAngle=f(y),this._endAngle=f(C),this._clockwise=T,this._rotation=f(P)},getStartPoint:function(c){return c===void 0&&(c=new a),this.getPoint(0,c)},getResolution:function(c){return c*2},getPoint:function(c,h){h===void 0&&(h=new a);for(var d=Math.PI*2,v=this._endAngle-this._startAngle,m=Math.abs(v)<Number.EPSILON;v<0;)v+=d;for(;v>d;)v-=d;v<Number.EPSILON&&(m?v=0:v=d),this._clockwise&&!m&&(v===d?v=-d:v=v-d);var y=this._startAngle+c*v,C=this.p0.x+this._xRadius*Math.cos(y),T=this.p0.y+this._yRadius*Math.sin(y);if(this._rotation!==0){var P=Math.cos(this._rotation),S=Math.sin(this._rotation),M=C-this.p0.x,E=T-this.p0.y;C=M*P-E*S+this.p0.x,T=M*S+E*P+this.p0.y}return h.set(C,T)},setXRadius:function(c){return this.xRadius=c,this},setYRadius:function(c){return this.yRadius=c,this},setWidth:function(c){return this.xRadius=c/2,this},setHeight:function(c){return this.yRadius=c/2,this},setStartAngle:function(c){return this.startAngle=c,this},setEndAngle:function(c){return this.endAngle=c,this},setClockwise:function(c){return this.clockwise=c,this},setRotation:function(c){return this.rotation=c,this},x:{get:function(){return this.p0.x},set:function(c){this.p0.x=c}},y:{get:function(){return this.p0.y},set:function(c){this.p0.y=c}},xRadius:{get:function(){return this._xRadius},set:function(c){this._xRadius=c}},yRadius:{get:function(){return this._yRadius},set:function(c){this._yRadius=c}},startAngle:{get:function(){return l(this._startAngle)},set:function(c){this._startAngle=f(c)}},endAngle:{get:function(){return l(this._endAngle)},set:function(c){this._endAngle=f(c)}},clockwise:{get:function(){return this._clockwise},set:function(c){this._clockwise=c}},angle:{get:function(){return l(this._rotation)},set:function(c){this._rotation=f(c)}},rotation:{get:function(){return this._rotation},set:function(c){this._rotation=c}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:l(this._startAngle),endAngle:l(this._endAngle),clockwise:this._clockwise,rotation:l(this._rotation)}}});o.fromJSON=function(c){return new o(c)},s.exports=o},58084:(s,g,e)=>{var n=e(56694),p=e(38517),f=e(80222),u=e(74118),l=e(93736),a=new n({Extends:p,initialize:function(c,h){p.call(this,"LineCurve"),Array.isArray(c)&&(h=new l(c[2],c[3]),c=new l(c[0],c[1])),this.p0=c,this.p1=h,this.arcLengthDivisions=1},getBounds:function(o){return o===void 0&&(o=new u),f([this.p0,this.p1],o)},getStartPoint:function(o){return o===void 0&&(o=new l),o.copy(this.p0)},getResolution:function(o){return o===void 0&&(o=1),o},getPoint:function(o,c){return c===void 0&&(c=new l),o===1?c.copy(this.p1):(c.copy(this.p1).subtract(this.p0).scale(o).add(this.p0),c)},getPointAt:function(o,c){return this.getPoint(o,c)},getTangent:function(o,c){return c===void 0&&(c=new l),c.copy(this.p1).subtract(this.p0).normalize(),c},getUtoTmapping:function(o,c,h){var d;if(c){var v=this.getLengths(h),m=v[v.length-1],y=Math.min(c,m);d=y/m}else d=o;return d},draw:function(o){return o.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),o},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});a.fromJSON=function(o){var c=o.points,h=new l(c[0],c[1]),d=new l(c[2],c[3]);return new a(h,d)},s.exports=a},64761:(s,g,e)=>{var n=e(56694),p=e(38517),f=e(16252),u=e(93736),l=new n({Extends:p,initialize:function(o,c,h){p.call(this,"QuadraticBezierCurve"),Array.isArray(o)&&(h=new u(o[4],o[5]),c=new u(o[2],o[3]),o=new u(o[0],o[1])),this.p0=o,this.p1=c,this.p2=h},getStartPoint:function(a){return a===void 0&&(a=new u),a.copy(this.p0)},getResolution:function(a){return a},getPoint:function(a,o){o===void 0&&(o=new u);var c=this.p0,h=this.p1,d=this.p2;return o.set(f(a,c.x,h.x,d.x),f(a,c.y,h.y,d.y))},draw:function(a,o){o===void 0&&(o=32);var c=this.getPoints(o);a.beginPath(),a.moveTo(this.p0.x,this.p0.y);for(var h=1;h<c.length;h++)a.lineTo(c[h].x,c[h].y);return a.strokePath(),a},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});l.fromJSON=function(a){var o=a.points,c=new u(o[0],o[1]),h=new u(o[2],o[3]),d=new u(o[4],o[5]);return new l(c,h,d)},s.exports=l},11956:(s,g,e)=>{var n=e(14976),p=e(56694),f=e(38517),u=e(93736),l=new p({Extends:f,initialize:function(o){o===void 0&&(o=[]),f.call(this,"SplineCurve"),this.points=[],this.addPoints(o)},addPoints:function(a){for(var o=0;o<a.length;o++){var c=new u;typeof a[o]=="number"?(c.x=a[o],c.y=a[o+1],o++):Array.isArray(a[o])?(c.x=a[o][0],c.y=a[o][1]):(c.x=a[o].x,c.y=a[o].y),this.points.push(c)}return this},addPoint:function(a,o){var c=new u(a,o);return this.points.push(c),c},getStartPoint:function(a){return a===void 0&&(a=new u),a.copy(this.points[0])},getResolution:function(a){return a*this.points.length},getPoint:function(a,o){o===void 0&&(o=new u);var c=this.points,h=(c.length-1)*a,d=Math.floor(h),v=h-d,m=c[d===0?d:d-1],y=c[d],C=c[d>c.length-2?c.length-1:d+1],T=c[d>c.length-3?c.length-1:d+2];return o.set(n(v,m.x,y.x,C.x,T.x),n(v,m.y,y.y,C.y,T.y))},toJSON:function(){for(var a=[],o=0;o<this.points.length;o++)a.push(this.points[o].x),a.push(this.points[o].y);return{type:this.type,points:a}}});l.fromJSON=function(a){return new l(a.points)},s.exports=l},73962:(s,g,e)=>{s.exports={Path:e(12822),MoveTo:e(53639),CubicBezier:e(63120),Curve:e(38517),Ellipse:e(48835),Line:e(58084),QuadraticBezier:e(64761),Spline:e(11956)}},53639:(s,g,e)=>{var n=e(56694),p=e(93736),f=new n({initialize:function(l,a){this.active=!1,this.p0=new p(l,a)},getPoint:function(u,l){return l===void 0&&(l=new p),l.copy(this.p0)},getPointAt:function(u,l){return this.getPoint(u,l)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});s.exports=f},12822:(s,g,e)=>{var n=e(56694),p=e(63120),f=e(48835),u=e(61286),l=e(58084),a=e(53639),o=e(64761),c=e(74118),h=e(11956),d=e(93736),v=e(83392),m=new n({initialize:function(C,T){C===void 0&&(C=0),T===void 0&&(T=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new d,this._tmpVec2A=new d,this._tmpVec2B=new d,typeof C=="object"?this.fromJSON(C):this.startPoint.set(C,T)},add:function(y){return this.curves.push(y),this},circleTo:function(y,C,T){return C===void 0&&(C=!1),this.ellipseTo(y,y,0,360,C,T)},closePath:function(){var y=this.curves[0].getPoint(0),C=this.curves[this.curves.length-1].getPoint(1);return y.equals(C)||this.curves.push(new l(C,y)),this},cubicBezierTo:function(y,C,T,P,S,M){var E=this.getEndPoint(),A,R,w;return y instanceof d?(A=y,R=C,w=T):(A=new d(T,P),R=new d(S,M),w=new d(y,C)),this.add(new p(E,A,R,w))},quadraticBezierTo:function(y,C,T,P){var S=this.getEndPoint(),M,E;return y instanceof d?(M=y,E=C):(M=new d(T,P),E=new d(y,C)),this.add(new o(S,M,E))},draw:function(y,C){for(var T=0;T<this.curves.length;T++){var P=this.curves[T];!P.active||P.draw(y,C)}return y},ellipseTo:function(y,C,T,P,S,M){var E=new f(0,0,y,C,T,P,S,M),A=this.getEndPoint(this._tmpVec2A),R=E.getStartPoint(this._tmpVec2B);return A.subtract(R),E.x=A.x,E.y=A.y,this.add(E)},fromJSON:function(y){this.curves=[],this.cacheLengths=[],this.startPoint.set(y.x,y.y),this.autoClose=y.autoClose;for(var C=0;C<y.curves.length;C++){var T=y.curves[C];switch(T.type){case"LineCurve":this.add(l.fromJSON(T));break;case"EllipseCurve":this.add(f.fromJSON(T));break;case"SplineCurve":this.add(h.fromJSON(T));break;case"CubicBezierCurve":this.add(p.fromJSON(T));break;case"QuadraticBezierCurve":this.add(o.fromJSON(T));break}}return this},getBounds:function(y,C){y===void 0&&(y=new c),C===void 0&&(C=16),y.x=Number.MAX_VALUE,y.y=Number.MAX_VALUE;for(var T=new c,P=v.MIN_SAFE_INTEGER,S=v.MIN_SAFE_INTEGER,M=0;M<this.curves.length;M++){var E=this.curves[M];!E.active||(E.getBounds(T,C),y.x=Math.min(y.x,T.x),y.y=Math.min(y.y,T.y),P=Math.max(P,T.right),S=Math.max(S,T.bottom))}return y.right=P,y.bottom=S,y},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var y=[],C=0,T=0;T<this.curves.length;T++)C+=this.curves[T].getLength(),y.push(C);return this.cacheLengths=y,y},getCurveAt:function(y){for(var C=y*this.getLength(),T=this.getCurveLengths(),P=0;P<T.length;){if(T[P]>=C)return this.curves[P];P++}return null},getEndPoint:function(y){return y===void 0&&(y=new d),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,y):y.copy(this.startPoint),y},getLength:function(){var y=this.getCurveLengths();return y[y.length-1]},getPoint:function(y,C){C===void 0&&(C=new d);for(var T=y*this.getLength(),P=this.getCurveLengths(),S=0;S<P.length;){if(P[S]>=T){var M=P[S]-T,E=this.curves[S],A=E.getLength(),R=A===0?0:1-M/A;return E.getPointAt(R,C)}S++}return null},getPoints:function(y){y===void 0&&(y=12);for(var C=[],T,P=0;P<this.curves.length;P++){var S=this.curves[P];if(!!S.active)for(var M=S.getResolution(y),E=S.getPoints(M),A=0;A<E.length;A++){var R=E[A];T&&T.equals(R)||(C.push(R),T=R)}}return this.autoClose&&C.length>1&&!C[C.length-1].equals(C[0])&&C.push(C[0]),C},getRandomPoint:function(y){return y===void 0&&(y=new d),this.getPoint(Math.random(),y)},getSpacedPoints:function(y){y===void 0&&(y=40);for(var C=[],T=0;T<=y;T++)C.push(this.getPoint(T/y));return this.autoClose&&C.push(C[0]),C},getStartPoint:function(y){return y===void 0&&(y=new d),y.copy(this.startPoint)},getTangent:function(y,C){C===void 0&&(C=new d);for(var T=y*this.getLength(),P=this.getCurveLengths(),S=0;S<P.length;){if(P[S]>=T){var M=P[S]-T,E=this.curves[S],A=E.getLength(),R=A===0?0:1-M/A;return E.getTangentAt(R,C)}S++}return null},lineTo:function(y,C){y instanceof d?this._tmpVec2B.copy(y):this._tmpVec2B.set(y,C);var T=this.getEndPoint(this._tmpVec2A);return this.add(new l([T.x,T.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(y){return y.unshift(this.getEndPoint()),this.add(new h(y))},moveTo:function(y,C){return y instanceof d?this.add(new a(y.x,y.y)):this.add(new a(y,C))},toJSON:function(){for(var y=[],C=0;C<this.curves.length;C++)y.push(this.curves[C].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:y}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});u.register("path",function(y,C){return new m(y,C)}),s.exports=m},81078:(s,g,e)=>{var n=e(56694),p=e(35026),f=new n({initialize:function(l,a){this.parent=l,this.events=a,a||(this.events=l.events?l.events:l),this.list={},this.values={},this._frozen=!1,!l.hasOwnProperty("sys")&&this.events&&this.events.once(p.DESTROY,this.destroy,this)},get:function(u){var l=this.list;if(Array.isArray(u)){for(var a=[],o=0;o<u.length;o++)a.push(l[u[o]]);return a}else return l[u]},getAll:function(){var u={};for(var l in this.list)this.list.hasOwnProperty(l)&&(u[l]=this.list[l]);return u},query:function(u){var l={};for(var a in this.list)this.list.hasOwnProperty(a)&&a.match(u)&&(l[a]=this.list[a]);return l},set:function(u,l){if(this._frozen)return this;if(typeof u=="string")return this.setValue(u,l);for(var a in u)this.setValue(a,u[a]);return this},inc:function(u,l){if(this._frozen)return this;l===void 0&&(l=1);var a=this.get(u);return a===void 0&&(a=0),this.set(u,a+l),this},toggle:function(u){return this._frozen?this:(this.set(u,!this.get(u)),this)},setValue:function(u,l){if(this._frozen)return this;if(this.has(u))this.values[u]=l;else{var a=this,o=this.list,c=this.events,h=this.parent;Object.defineProperty(this.values,u,{enumerable:!0,configurable:!0,get:function(){return o[u]},set:function(d){if(!a._frozen){var v=o[u];o[u]=d,c.emit(p.CHANGE_DATA,h,u,d,v),c.emit(p.CHANGE_DATA_KEY+u,h,d,v)}}}),o[u]=l,c.emit(p.SET_DATA,h,u,l)}return this},each:function(u,l){for(var a=[this.parent,null,void 0],o=1;o<arguments.length;o++)a.push(arguments[o]);for(var c in this.list)a[1]=c,a[2]=this.list[c],u.apply(l,a);return this},merge:function(u,l){l===void 0&&(l=!0);for(var a in u)u.hasOwnProperty(a)&&(l||!l&&!this.has(a))&&this.setValue(a,u[a]);return this},remove:function(u){if(this._frozen)return this;if(Array.isArray(u))for(var l=0;l<u.length;l++)this.removeValue(u[l]);else return this.removeValue(u);return this},removeValue:function(u){if(this.has(u)){var l=this.list[u];delete this.list[u],delete this.values[u],this.events.emit(p.REMOVE_DATA,this.parent,u,l)}return this},pop:function(u){var l=void 0;return!this._frozen&&this.has(u)&&(l=this.list[u],delete this.list[u],delete this.values[u],this.events.emit(p.REMOVE_DATA,this.parent,u,l)),l},has:function(u){return this.list.hasOwnProperty(u)},setFreeze:function(u){return this._frozen=u,this},reset:function(){for(var u in this.list)delete this.list[u],delete this.values[u];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(p.CHANGE_DATA),this.events.off(p.SET_DATA),this.events.off(p.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(u){this._frozen=!!u}},count:{get:function(){var u=0;for(var l in this.list)this.list[l]!==void 0&&u++;return u}}});s.exports=f},76508:(s,g,e)=>{var n=e(56694),p=e(81078),f=e(91963),u=e(7599),l=new n({Extends:p,initialize:function(o){p.call(this,o,o.sys.events),this.scene=o,this.systems=o.sys,o.sys.events.once(u.BOOT,this.boot,this),o.sys.events.on(u.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(u.DESTROY,this.destroy,this)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){p.prototype.destroy.call(this),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});f.register("DataManagerPlugin",l,"data"),s.exports=l},73569:s=>{s.exports="changedata"},15590:s=>{s.exports="changedata-"},37669:s=>{s.exports="destroy"},87090:s=>{s.exports="removedata"},90142:s=>{s.exports="setdata"},35026:(s,g,e)=>{s.exports={CHANGE_DATA:e(73569),CHANGE_DATA_KEY:e(15590),DESTROY:e(37669),REMOVE_DATA:e(87090),SET_DATA:e(90142)}},1999:(s,g,e)=>{s.exports={DataManager:e(81078),DataManagerPlugin:e(76508),Events:e(35026)}},10720:(s,g,e)=>{var n=e(1350),p={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function f(){if(typeof importScripts=="function")return p;p.audioData=!!window.Audio,p.webAudio=!!(window.AudioContext||window.webkitAudioContext);var u=document.createElement("audio"),l=!!u.canPlayType;try{if(l){var a=function(h,d){var v=u.canPlayType("audio/"+h).replace(/^no$/,"");return Boolean(d?v||u.canPlayType("audio/"+d).replace(/^no$/,""):v)};if(p.ogg=a('ogg; codecs="vorbis"'),p.opus=a('ogg; codecs="opus"',"opus"),p.mp3=a("mpeg"),p.wav=a("wav"),p.m4a=a("x-m4a"),p.aac=a("aac"),p.flac=a("flac","x-flac"),p.webm=a('webm; codecs="vorbis"'),u.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(n.edge)p.dolby=!0;else if(n.safari&&n.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var o=parseInt(RegExp.$1,10),c=parseInt(RegExp.$2,10);(o===10&&c>=11||o>10)&&(p.dolby=!0)}}}}catch(h){}return p}s.exports=f()},1350:(s,g,e)=>{var n=e(36580),p={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function f(){var u=navigator.userAgent;return/Edg\/\d+/.test(u)?(p.edge=!0,p.es2019=!0):/OPR/.test(u)?(p.opera=!0,p.es2019=!0):/Chrome\/(\d+)/.test(u)&&!n.windowsPhone?(p.chrome=!0,p.chromeVersion=parseInt(RegExp.$1,10),p.es2019=p.chromeVersion>69):/Firefox\D+(\d+)/.test(u)?(p.firefox=!0,p.firefoxVersion=parseInt(RegExp.$1,10),p.es2019=p.firefoxVersion>10):/AppleWebKit/.test(u)&&n.iOS?p.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(u)?(p.ie=!0,p.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+) Safari/.test(u)&&!n.windowsPhone?(p.safari=!0,p.safariVersion=parseInt(RegExp.$1,10),p.es2019=p.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(u)&&(p.ie=!0,p.trident=!0,p.tridentVersion=parseInt(RegExp.$1,10),p.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(u)&&(p.silk=!0),p}s.exports=f()},98581:(s,g,e)=>{var n=e(61068),p={supportInverseAlpha:!1,supportNewBlendModes:!1};function f(){var a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",o="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",c=new Image;return c.onload=function(){var h=new Image;h.onload=function(){var d=n.create2D(h,6),v=d.getContext("2d",{willReadFrequently:!0});if(v.globalCompositeOperation="multiply",v.drawImage(c,0,0),v.drawImage(h,2,0),!v.getImageData(2,0,1,1))return!1;var m=v.getImageData(2,0,1,1).data;n.remove(h),p.supportNewBlendModes=m[0]===255&&m[1]===0&&m[2]===0},h.src=a+"/wCKxvRF"+o},c.src=a+"AP804Oa6"+o,!1}function u(){var a=n.create2D(this,2),o=a.getContext("2d",{willReadFrequently:!0});o.fillStyle="rgba(10, 20, 30, 0.5)",o.fillRect(0,0,1,1);var c=o.getImageData(0,0,1,1);if(c===null)return!1;o.putImageData(c,1,0);var h=o.getImageData(1,0,1,1),d=h.data[0]===c.data[0]&&h.data[1]===c.data[1]&&h.data[2]===c.data[2]&&h.data[3]===c.data[3];return n.remove(this),d}function l(){return typeof importScripts!="function"&&document!==void 0&&(p.supportNewBlendModes=f(),p.supportInverseAlpha=u()),p}s.exports=l()},90185:(s,g,e)=>{var n=e(36580),p=e(1350),f=e(61068),u={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function l(){var o=new ArrayBuffer(4),c=new Uint8Array(o),h=new Uint32Array(o);return c[0]=161,c[1]=178,c[2]=195,c[3]=212,h[0]===3569595041?!0:h[0]===2712847316?!1:null}function a(){if(typeof importScripts=="function")return u;u.canvas=!!window.CanvasRenderingContext2D;try{u.localStorage=!!localStorage.getItem}catch(h){u.localStorage=!1}u.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,u.fileSystem=!!window.requestFileSystem;var o=!1,c=function(){if(window.WebGLRenderingContext)try{var h=f.createWebGL(this),d=h.getContext("webgl")||h.getContext("experimental-webgl"),v=f.create2D(this),m=v.getContext("2d",{willReadFrequently:!0}),y=m.createImageData(1,1);return o=y.data instanceof Uint8ClampedArray,f.remove(h),f.remove(v),!!d}catch(C){return!1}return!1};return u.webGL=c(),u.worker=!!window.Worker,u.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,u.getUserMedia=u.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,p.firefox&&p.firefoxVersion<21&&(u.getUserMedia=!1),!n.iOS&&(p.ie||p.firefox||p.chrome)&&(u.canvasBitBltShift=!0),(p.safari||p.mobileSafari)&&(u.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(u.vibration=!0),typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"&&typeof Uint32Array!="undefined"&&(u.littleEndian=l()),u.support32bit=typeof ArrayBuffer!="undefined"&&typeof Uint8ClampedArray!="undefined"&&typeof Int32Array!="undefined"&&u.littleEndian!==null&&o,u}s.exports=a()},33553:s=>{var g={available:!1,cancel:"",keyboard:!1,request:""};function e(){if(typeof importScripts=="function")return g;var n,p="Fullscreen",f="FullScreen",u=["request"+p,"request"+f,"webkitRequest"+p,"webkitRequest"+f,"msRequest"+p,"msRequest"+f,"mozRequest"+f,"mozRequest"+p];for(n=0;n<u.length;n++)if(document.documentElement[u[n]]){g.available=!0,g.request=u[n];break}var l=["cancel"+f,"exit"+p,"webkitCancel"+f,"webkitExit"+p,"msCancel"+f,"msExit"+p,"mozCancel"+f,"mozExit"+p];if(g.available){for(n=0;n<l.length;n++)if(document[l[n]]){g.cancel=l[n];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(g.keyboard=!0),Object.defineProperty(g,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),g}s.exports=e()},95872:(s,g,e)=>{var n=e(1350),p={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function f(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(p.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(p.mspointer=!0),navigator.getGamepads&&(p.gamepads=!0),"onwheel"in window||n.ie&&"WheelEvent"in window?p.wheelEvent="wheel":"onmousewheel"in window?p.wheelEvent="mousewheel":n.firefox&&"MouseScrollEvent"in window&&(p.wheelEvent="DOMMouseScroll")),p}s.exports=f()},36580:s=>{var g={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function e(){if(typeof importScripts=="function")return g;var n=navigator.userAgent;/Windows/.test(n)?g.windows=!0:/Mac OS/.test(n)&&!/like Mac OS/.test(n)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(g.iOS=!0,g.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),g.iOSVersion=parseInt(RegExp.$1,10)):g.macOS=!0:/Android/.test(n)?g.android=!0:/Linux/.test(n)?g.linux=!0:/iP[ao]d|iPhone/i.test(n)?(g.iOS=!0,navigator.appVersion.match(/OS (\d+)/),g.iOSVersion=parseInt(RegExp.$1,10),g.iPhone=n.toLowerCase().indexOf("iphone")!==-1,g.iPad=n.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(n)||/\bKF[A-Z][A-Z]+/.test(n)||/Silk.*Mobile Safari/.test(n)?g.kindle=!0:/CrOS/.test(n)&&(g.chromeOS=!0),(/Windows Phone/i.test(n)||/IEMobile/i.test(n))&&(g.android=!1,g.iOS=!1,g.macOS=!1,g.windows=!0,g.windowsPhone=!0);var p=/Silk/.test(n);return(g.windows||g.macOS||g.linux&&!p||g.chromeOS)&&(g.desktop=!0),(g.windowsPhone||/Windows NT/i.test(n)&&/Touch/i.test(n))&&(g.desktop=!1),navigator.standalone&&(g.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(g.cordova=!0),window.ejecta!==void 0&&(g.ejecta=!0)),typeof process!="undefined"&&process.versions&&process.versions.node&&(g.node=!0),g.node&&typeof process.versions=="object"&&(g.nodeWebkit=!!process.versions["node-webkit"],g.electron=!!process.versions.electron),/Crosswalk/.test(n)&&(g.crosswalk=!0),g.pixelRatio=window.devicePixelRatio||1,g}s.exports=e()},53861:(s,g,e)=>{var n=e(72632),p={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function f(){if(typeof importScripts=="function")return p;var u=document.createElement("video"),l=!!u.canPlayType,a=/^no$/;try{l&&(u.canPlayType('video/ogg; codecs="theora"').replace(a,"")&&(p.ogg=!0),u.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(a,"")&&(p.h264=!0,p.mp4=!0),u.canPlayType("video/x-m4v").replace(a,"")&&(p.m4v=!0),u.canPlayType('video/webm; codecs="vp8, vorbis"').replace(a,"")&&(p.webm=!0),u.canPlayType('video/webm; codecs="vp9"').replace(a,"")&&(p.vp9=!0),u.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(a,"")&&(p.hls=!0))}catch(o){}return u.parentNode&&u.parentNode.removeChild(u),p.getVideoURL=function(o){Array.isArray(o)||(o=[o]);for(var c=0;c<o.length;c++){var h=n(o[c],"url",o[c]);if(h.indexOf("blob:")===0)return{url:h,type:""};var d;if(h.indexOf("data:")===0?d=h.split(",")[0].match(/\/(.*?);/):d=h.match(/\.([a-zA-Z0-9]+)($|\?)/),d=n(o[c],"type",d?d[1]:"").toLowerCase(),p[d])return{url:h,type:d}}return null},p}s.exports=f()},77290:(s,g,e)=>{s.exports={os:e(36580),browser:e(1350),features:e(90185),input:e(95872),audio:e(10720),video:e(53861),fullscreen:e(33553),canvasFeatures:e(98581)}},65246:(s,g,e)=>{var n=e(56694),p=new Float32Array(20),f=new n({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(u){return this._matrix.set(u),this._dirty=!0,this},reset:function(){var u=this._matrix;return u.fill(0),u[0]=1,u[6]=1,u[12]=1,u[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var u=this._data;return this._dirty&&(u.set(this._matrix),u[4]/=255,u[9]/=255,u[14]/=255,u[19]/=255,this._dirty=!1),u},brightness:function(u,l){u===void 0&&(u=0),l===void 0&&(l=!1);var a=u;return this.multiply([a,0,0,0,0,0,a,0,0,0,0,0,a,0,0,0,0,0,1,0],l)},saturate:function(u,l){u===void 0&&(u=0),l===void 0&&(l=!1);var a=u*2/3+1,o=(a-1)*-.5;return this.multiply([a,o,o,0,0,o,a,o,0,0,o,o,a,0,0,0,0,0,1,0],l)},desaturate:function(u){return u===void 0&&(u=!1),this.saturate(-1,u)},hue:function(u,l){u===void 0&&(u=0),l===void 0&&(l=!1),u=u/180*Math.PI;var a=Math.cos(u),o=Math.sin(u),c=.213,h=.715,d=.072;return this.multiply([c+a*(1-c)+o*-c,h+a*-h+o*-h,d+a*-d+o*(1-d),0,0,c+a*-c+o*.143,h+a*(1-h)+o*.14,d+a*-d+o*-.283,0,0,c+a*-c+o*-(1-c),h+a*-h+o*h,d+a*(1-d)+o*d,0,0,0,0,0,1,0],l)},grayscale:function(u,l){return u===void 0&&(u=1),l===void 0&&(l=!1),this.saturate(-u,l)},blackWhite:function(u){return u===void 0&&(u=!1),this.multiply(f.BLACK_WHITE,u)},contrast:function(u,l){u===void 0&&(u=0),l===void 0&&(l=!1);var a=u+1,o=-.5*(a-1);return this.multiply([a,0,0,0,o,0,a,0,0,o,0,0,a,0,o,0,0,0,1,0],l)},negative:function(u){return u===void 0&&(u=!1),this.multiply(f.NEGATIVE,u)},desaturateLuminance:function(u){return u===void 0&&(u=!1),this.multiply(f.DESATURATE_LUMINANCE,u)},sepia:function(u){return u===void 0&&(u=!1),this.multiply(f.SEPIA,u)},night:function(u,l){return u===void 0&&(u=.1),l===void 0&&(l=!1),this.multiply([u*-2,-u,0,0,0,-u,0,u,0,0,0,u,u*2,0,0,0,0,0,1,0],l)},lsd:function(u){return u===void 0&&(u=!1),this.multiply(f.LSD,u)},brown:function(u){return u===void 0&&(u=!1),this.multiply(f.BROWN,u)},vintagePinhole:function(u){return u===void 0&&(u=!1),this.multiply(f.VINTAGE,u)},kodachrome:function(u){return u===void 0&&(u=!1),this.multiply(f.KODACHROME,u)},technicolor:function(u){return u===void 0&&(u=!1),this.multiply(f.TECHNICOLOR,u)},polaroid:function(u){return u===void 0&&(u=!1),this.multiply(f.POLAROID,u)},shiftToBGR:function(u){return u===void 0&&(u=!1),this.multiply(f.SHIFT_BGR,u)},multiply:function(u,l){l===void 0&&(l=!1),l||this.reset();var a=this._matrix,o=p;return o.set(a),a.set([o[0]*u[0]+o[1]*u[5]+o[2]*u[10]+o[3]*u[15],o[0]*u[1]+o[1]*u[6]+o[2]*u[11]+o[3]*u[16],o[0]*u[2]+o[1]*u[7]+o[2]*u[12]+o[3]*u[17],o[0]*u[3]+o[1]*u[8]+o[2]*u[13]+o[3]*u[18],o[0]*u[4]+o[1]*u[9]+o[2]*u[14]+o[3]*u[19]+o[4],o[5]*u[0]+o[6]*u[5]+o[7]*u[10]+o[8]*u[15],o[5]*u[1]+o[6]*u[6]+o[7]*u[11]+o[8]*u[16],o[5]*u[2]+o[6]*u[7]+o[7]*u[12]+o[8]*u[17],o[5]*u[3]+o[6]*u[8]+o[7]*u[13]+o[8]*u[18],o[5]*u[4]+o[6]*u[9]+o[7]*u[14]+o[8]*u[19]+o[9],o[10]*u[0]+o[11]*u[5]+o[12]*u[10]+o[13]*u[15],o[10]*u[1]+o[11]*u[6]+o[12]*u[11]+o[13]*u[16],o[10]*u[2]+o[11]*u[7]+o[12]*u[12]+o[13]*u[17],o[10]*u[3]+o[11]*u[8]+o[12]*u[13]+o[13]*u[18],o[10]*u[4]+o[11]*u[9]+o[12]*u[14]+o[13]*u[19]+o[14],o[15]*u[0]+o[16]*u[5]+o[17]*u[10]+o[18]*u[15],o[15]*u[1]+o[16]*u[6]+o[17]*u[11]+o[18]*u[16],o[15]*u[2]+o[16]*u[7]+o[17]*u[12]+o[18]*u[17],o[15]*u[3]+o[16]*u[8]+o[17]*u[13]+o[18]*u[18],o[15]*u[4]+o[16]*u[9]+o[17]*u[14]+o[18]*u[19]+o[19]]),this._dirty=!0,this}});f.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],f.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],f.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],f.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],f.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],f.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],f.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],f.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],f.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],f.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],f.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],s.exports=f},39298:(s,g,e)=>{var n=e(56694),p=e(72283),f=new n({initialize:function(l,a,o){this._rgb=[0,0,0],this.onChangeCallback=p,this.dirty=!1,this.set(l,a,o)},set:function(u,l,a){return u===void 0&&(u=0),l===void 0&&(l=0),a===void 0&&(a=0),this._rgb=[u,l,a],this.onChange(),this},equals:function(u,l,a){var o=this._rgb;return o[0]===u&&o[1]===l&&o[2]===a},onChange:function(){this.dirty=!0;var u=this._rgb;this.onChangeCallback.call(this,u[0],u[1],u[2])},r:{get:function(){return this._rgb[0]},set:function(u){this._rgb[0]=u,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(u){this._rgb[1]=u,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(u){this._rgb[2]=u,this.onChange()}},destroy:function(){this.onChangeCallback=null}});s.exports=f},84093:s=>{var g={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};s.exports=g},32058:(s,g,e)=>{var n=e(97328),p=e(59994),f=e(73174),u=e(28417),l=function(a,o,c,h){return c===void 0&&(c=0),h===void 0&&(h=0),u(a,p(o)+c),f(a,n(o)+h),a};s.exports=l},85535:(s,g,e)=>{var n=e(97328),p=e(40163),f=e(73174),u=e(74465),l=function(a,o,c,h){return c===void 0&&(c=0),h===void 0&&(h=0),u(a,p(o)-c),f(a,n(o)+h),a};s.exports=l},9605:(s,g,e)=>{var n=e(97328),p=e(70271),f=e(73174),u=e(19298),l=function(a,o,c,h){return c===void 0&&(c=0),h===void 0&&(h=0),u(a,p(o)+c),f(a,n(o)+h),a};s.exports=l},22529:(s,g,e)=>{var n=e(21843),p=e(59994),f=e(29568),u=function(l,a,o,c){return o===void 0&&(o=0),c===void 0&&(c=0),n(l,p(a)+o,f(a)+c),l};s.exports=u},5739:(s,g,e)=>{var n=e(29568),p=e(40163),f=e(81711),u=e(74465),l=function(a,o,c,h){return c===void 0&&(c=0),h===void 0&&(h=0),u(a,p(o)-c),f(a,n(o)+h),a};s.exports=l},40327:(s,g,e)=>{var n=e(84093),p=[];p[n.BOTTOM_CENTER]=e(32058),p[n.BOTTOM_LEFT]=e(85535),p[n.BOTTOM_RIGHT]=e(9605),p[n.CENTER]=e(22529),p[n.LEFT_CENTER]=e(5739),p[n.RIGHT_CENTER]=e(27683),p[n.TOP_CENTER]=e(96439),p[n.TOP_LEFT]=e(81447),p[n.TOP_RIGHT]=e(47888),p[n.LEFT_BOTTOM]=p[n.BOTTOM_LEFT],p[n.LEFT_TOP]=p[n.TOP_LEFT],p[n.RIGHT_BOTTOM]=p[n.BOTTOM_RIGHT],p[n.RIGHT_TOP]=p[n.TOP_RIGHT];var f=function(u,l,a,o,c){return p[a](u,l,o,c)};s.exports=f},27683:(s,g,e)=>{var n=e(29568),p=e(70271),f=e(81711),u=e(19298),l=function(a,o,c,h){return c===void 0&&(c=0),h===void 0&&(h=0),u(a,p(o)+c),f(a,n(o)+h),a};s.exports=l},96439:(s,g,e)=>{var n=e(59994),p=e(47196),f=e(28417),u=e(84349),l=function(a,o,c,h){return c===void 0&&(c=0),h===void 0&&(h=0),f(a,n(o)+c),u(a,p(o)-h),a};s.exports=l},81447:(s,g,e)=>{var n=e(40163),p=e(47196),f=e(74465),u=e(84349),l=function(a,o,c,h){return c===void 0&&(c=0),h===void 0&&(h=0),f(a,n(o)-c),u(a,p(o)-h),a};s.exports=l},47888:(s,g,e)=>{var n=e(70271),p=e(47196),f=e(19298),u=e(84349),l=function(a,o,c,h){return c===void 0&&(c=0),h===void 0&&(h=0),f(a,n(o)+c),u(a,p(o)-h),a};s.exports=l},46997:(s,g,e)=>{s.exports={BottomCenter:e(32058),BottomLeft:e(85535),BottomRight:e(9605),Center:e(22529),LeftCenter:e(5739),QuickSet:e(40327),RightCenter:e(27683),TopCenter:e(96439),TopLeft:e(81447),TopRight:e(47888)}},93545:(s,g,e)=>{var n=e(84093),p=e(98611),f={In:e(46997),To:e(86639)};f=p(!1,f,n),s.exports=f},27118:(s,g,e)=>{var n=e(97328),p=e(59994),f=e(28417),u=e(84349),l=function(a,o,c,h){return c===void 0&&(c=0),h===void 0&&(h=0),f(a,p(o)+c),u(a,n(o)+h),a};s.exports=l},84469:(s,g,e)=>{var n=e(97328),p=e(40163),f=e(74465),u=e(84349),l=function(a,o,c,h){return c===void 0&&(c=0),h===void 0&&(h=0),f(a,p(o)-c),u(a,n(o)+h),a};s.exports=l},51577:(s,g,e)=>{var n=e(97328),p=e(70271),f=e(19298),u=e(84349),l=function(a,o,c,h){return c===void 0&&(c=0),h===void 0&&(h=0),f(a,p(o)+c),u(a,n(o)+h),a};s.exports=l},90271:(s,g,e)=>{var n=e(97328),p=e(40163),f=e(73174),u=e(19298),l=function(a,o,c,h){return c===void 0&&(c=0),h===void 0&&(h=0),u(a,p(o)-c),f(a,n(o)+h),a};s.exports=l},30466:(s,g,e)=>{var n=e(29568),p=e(40163),f=e(81711),u=e(19298),l=function(a,o,c,h){return c===void 0&&(c=0),h===void 0&&(h=0),u(a,p(o)-c),f(a,n(o)+h),a};s.exports=l},50087:(s,g,e)=>{var n=e(40163),p=e(47196),f=e(19298),u=e(84349),l=function(a,o,c,h){return c===void 0&&(c=0),h===void 0&&(h=0),f(a,n(o)-c),u(a,p(o)-h),a};s.exports=l},82590:(s,g,e)=>{var n=e(84093),p=[];p[n.BOTTOM_CENTER]=e(27118),p[n.BOTTOM_LEFT]=e(84469),p[n.BOTTOM_RIGHT]=e(51577),p[n.LEFT_BOTTOM]=e(90271),p[n.LEFT_CENTER]=e(30466),p[n.LEFT_TOP]=e(50087),p[n.RIGHT_BOTTOM]=e(13555),p[n.RIGHT_CENTER]=e(99049),p[n.RIGHT_TOP]=e(67788),p[n.TOP_CENTER]=e(78170),p[n.TOP_LEFT]=e(54145),p[n.TOP_RIGHT]=e(75548);var f=function(u,l,a,o,c){return p[a](u,l,o,c)};s.exports=f},13555:(s,g,e)=>{var n=e(97328),p=e(70271),f=e(73174),u=e(74465),l=function(a,o,c,h){return c===void 0&&(c=0),h===void 0&&(h=0),u(a,p(o)+c),f(a,n(o)+h),a};s.exports=l},99049:(s,g,e)=>{var n=e(29568),p=e(70271),f=e(81711),u=e(74465),l=function(a,o,c,h){return c===void 0&&(c=0),h===void 0&&(h=0),u(a,p(o)+c),f(a,n(o)+h),a};s.exports=l},67788:(s,g,e)=>{var n=e(70271),p=e(47196),f=e(74465),u=e(84349),l=function(a,o,c,h){return c===void 0&&(c=0),h===void 0&&(h=0),f(a,n(o)+c),u(a,p(o)-h),a};s.exports=l},78170:(s,g,e)=>{var n=e(59994),p=e(47196),f=e(73174),u=e(28417),l=function(a,o,c,h){return c===void 0&&(c=0),h===void 0&&(h=0),u(a,n(o)+c),f(a,p(o)-h),a};s.exports=l},54145:(s,g,e)=>{var n=e(40163),p=e(47196),f=e(73174),u=e(74465),l=function(a,o,c,h){return c===void 0&&(c=0),h===void 0&&(h=0),u(a,n(o)-c),f(a,p(o)-h),a};s.exports=l},75548:(s,g,e)=>{var n=e(70271),p=e(47196),f=e(73174),u=e(19298),l=function(a,o,c,h){return c===void 0&&(c=0),h===void 0&&(h=0),u(a,n(o)+c),f(a,p(o)-h),a};s.exports=l},86639:(s,g,e)=>{s.exports={BottomCenter:e(27118),BottomLeft:e(84469),BottomRight:e(51577),LeftBottom:e(90271),LeftCenter:e(30466),LeftTop:e(50087),QuickSet:e(82590),RightBottom:e(13555),RightCenter:e(99049),RightTop:e(67788),TopCenter:e(78170),TopLeft:e(54145),TopRight:e(75548)}},21843:(s,g,e)=>{var n=e(28417),p=e(81711),f=function(u,l,a){return n(u,l),p(u,a)};s.exports=f},97328:s=>{var g=function(e){return e.y+e.height-e.height*e.originY};s.exports=g},7126:(s,g,e)=>{var n=e(97328),p=e(40163),f=e(70271),u=e(47196),l=e(74118),a=function(o,c){c===void 0&&(c=new l);var h=p(o),d=u(o);return c.x=h,c.y=d,c.width=f(o)-h,c.height=n(o)-d,c};s.exports=a},59994:s=>{var g=function(e){return e.x-e.width*e.originX+e.width*.5};s.exports=g},29568:s=>{var g=function(e){return e.y-e.height*e.originY+e.height*.5};s.exports=g},40163:s=>{var g=function(e){return e.x-e.width*e.originX};s.exports=g},52088:s=>{var g=function(e){return e.width*e.originX};s.exports=g},23379:s=>{var g=function(e){return e.height*e.originY};s.exports=g},70271:s=>{var g=function(e){return e.x+e.width-e.width*e.originX};s.exports=g},47196:s=>{var g=function(e){return e.y-e.height*e.originY};s.exports=g},73174:s=>{var g=function(e,n){return e.y=n-e.height+e.height*e.originY,e};s.exports=g},28417:s=>{var g=function(e,n){var p=e.width*e.originX;return e.x=n+p-e.width*.5,e};s.exports=g},81711:s=>{var g=function(e,n){var p=e.height*e.originY;return e.y=n+p-e.height*.5,e};s.exports=g},74465:s=>{var g=function(e,n){return e.x=n+e.width*e.originX,e};s.exports=g},19298:s=>{var g=function(e,n){return e.x=n-e.width+e.width*e.originX,e};s.exports=g},84349:s=>{var g=function(e,n){return e.y=n+e.height*e.originY,e};s.exports=g},15252:(s,g,e)=>{s.exports={CenterOn:e(21843),GetBottom:e(97328),GetBounds:e(7126),GetCenterX:e(59994),GetCenterY:e(29568),GetLeft:e(40163),GetOffsetX:e(52088),GetOffsetY:e(23379),GetRight:e(70271),GetTop:e(47196),SetBottom:e(73174),SetCenterX:e(28417),SetCenterY:e(81711),SetLeft:e(74465),SetRight:e(19298),SetTop:e(84349)}},70616:s=>{var g={setCrisp:function(e){var n=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return n.forEach(function(p){e.style["image-rendering"]=p}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}};s.exports=g},61068:(s,g,e)=>{var n=e(86459),p=e(8213),f=[],u=!1,l=function(){var a=function(T,P,S,M,E){P===void 0&&(P=1),S===void 0&&(S=1),M===void 0&&(M=n.CANVAS),E===void 0&&(E=!1);var A,R=h(M);return R===null?(R={parent:T,canvas:document.createElement("canvas"),type:M},M===n.CANVAS&&f.push(R),A=R.canvas):(R.parent=T,A=R.canvas),E&&(R.parent=A),A.width=P,A.height=S,u&&M===n.CANVAS&&p.disable(A.getContext("2d",{willReadFrequently:!1})),A},o=function(T,P,S){return a(T,P,S,n.CANVAS)},c=function(T,P,S){return a(T,P,S,n.WEBGL)},h=function(T){if(T===void 0&&(T=n.CANVAS),T===n.WEBGL)return null;for(var P=0;P<f.length;P++){var S=f[P];if(!S.parent&&S.type===T)return S}return null},d=function(T){var P=T instanceof HTMLCanvasElement;f.forEach(function(S){(P&&S.canvas===T||!P&&S.parent===T)&&(S.parent=null,S.canvas.width=1,S.canvas.height=1)})},v=function(){var T=0;return f.forEach(function(P){P.parent&&T++}),T},m=function(){return f.length-v()},y=function(){u=!0},C=function(){u=!1};return{create2D:o,create:a,createWebGL:c,disableSmoothing:y,enableSmoothing:C,first:h,free:m,pool:f,remove:d,total:v}};s.exports=l()},8213:s=>{var g="",e=function(){var n=function(l){for(var a=["i","webkitI","msI","mozI","oI"],o=0;o<a.length;o++){var c=a[o]+"mageSmoothingEnabled";if(c in l)return c}return null},p=function(l){return g===""&&(g=n(l)),g&&(l[g]=!0),l},f=function(l){return g===""&&(g=n(l)),g&&(l[g]=!1),l},u=function(l){return g!==null?l[g]:null};return{disable:f,enable:p,getPrefix:n,isEnabled:u}};s.exports=e()},59271:s=>{var g=function(e,n){return n===void 0&&(n="none"),e.style.msTouchAction=n,e.style["ms-touch-action"]=n,e.style["touch-action"]=n,e};s.exports=g},36505:s=>{var g=function(e,n){n===void 0&&(n="none");var p=["-webkit-","-khtml-","-moz-","-ms-",""];return p.forEach(function(f){e.style[f+"user-select"]=n}),e.style["-webkit-touch-callout"]=n,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e};s.exports=g},23514:(s,g,e)=>{s.exports={CanvasInterpolation:e(70616),CanvasPool:e(61068),Smoothing:e(8213),TouchAction:e(59271),UserSelect:e(36505)}},27119:(s,g,e)=>{var n=e(56694),p=e(22946),f=e(5657),u=e(24650),l=e(68033),a=new n({initialize:function(c,h,d,v){c===void 0&&(c=0),h===void 0&&(h=0),d===void 0&&(d=0),v===void 0&&(v=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(c,h,d,v)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(o,c,h,d,v){return d===void 0&&(d=255),v===void 0&&(v=!0),this._locked=!0,this.red=o,this.green=c,this.blue=h,this.alpha=d,this._locked=!1,this.update(v)},setGLTo:function(o,c,h,d){return d===void 0&&(d=1),this._locked=!0,this.redGL=o,this.greenGL=c,this.blueGL=h,this.alphaGL=d,this._locked=!1,this.update(!0)},setFromRGB:function(o){return this._locked=!0,this.red=o.r,this.green=o.g,this.blue=o.b,o.hasOwnProperty("a")&&(this.alpha=o.a),this._locked=!1,this.update(!0)},setFromHSV:function(o,c,h){return u(o,c,h,this)},update:function(o){if(o===void 0&&(o=!1),this._locked)return this;var c=this.r,h=this.g,d=this.b,v=this.a;return this._color=p(c,h,d),this._color32=f(c,h,d,v),this._rgba="rgba("+c+","+h+","+d+","+v/255+")",o&&l(c,h,d,this),this},updateHSV:function(){var o=this.r,c=this.g,h=this.b;return l(o,c,h,this),this},clone:function(){return new a(this.r,this.g,this.b,this.a)},gray:function(o){return this.setTo(o,o,o)},random:function(o,c){o===void 0&&(o=0),c===void 0&&(c=255);var h=Math.floor(o+Math.random()*(c-o)),d=Math.floor(o+Math.random()*(c-o)),v=Math.floor(o+Math.random()*(c-o));return this.setTo(h,d,v)},randomGray:function(o,c){o===void 0&&(o=0),c===void 0&&(c=255);var h=Math.floor(o+Math.random()*(c-o));return this.setTo(h,h,h)},saturate:function(o){return this.s+=o/100,this},desaturate:function(o){return this.s-=o/100,this},lighten:function(o){return this.v+=o/100,this},darken:function(o){return this.v-=o/100,this},brighten:function(o){var c=this.r,h=this.g,d=this.b;return c=Math.max(0,Math.min(255,c-Math.round(255*-(o/100)))),h=Math.max(0,Math.min(255,h-Math.round(255*-(o/100)))),d=Math.max(0,Math.min(255,d-Math.round(255*-(o/100)))),this.setTo(c,h,d)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(o){this.gl[0]=Math.min(Math.abs(o),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(o){this.gl[1]=Math.min(Math.abs(o),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(o){this.gl[2]=Math.min(Math.abs(o),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(o){this.gl[3]=Math.min(Math.abs(o),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(o){o=Math.floor(Math.abs(o)),this.r=Math.min(o,255),this.gl[0]=o/255,this.update(!0)}},green:{get:function(){return this.g},set:function(o){o=Math.floor(Math.abs(o)),this.g=Math.min(o,255),this.gl[1]=o/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(o){o=Math.floor(Math.abs(o)),this.b=Math.min(o,255),this.gl[2]=o/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(o){o=Math.floor(Math.abs(o)),this.a=Math.min(o,255),this.gl[3]=o/255,this.update()}},h:{get:function(){return this._h},set:function(o){this._h=o,u(o,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(o){this._s=o,u(this._h,o,this._v,this)}},v:{get:function(){return this._v},set:function(o){this._v=o,u(this._h,this._s,o,this)}}});s.exports=a},30245:(s,g,e)=>{var n=e(22946),p=function(f){f===void 0&&(f=1024);var u=[],l=255,a,o=255,c=0,h=0;for(a=0;a<=l;a++)u.push({r:o,g:a,b:h,color:n(o,a,h)});for(c=255,a=l;a>=0;a--)u.push({r:a,g:c,b:h,color:n(a,c,h)});for(o=0,a=0;a<=l;a++,c--)u.push({r:o,g:c,b:a,color:n(o,c,a)});for(c=0,h=255,a=0;a<=l;a++,h--,o++)u.push({r:o,g:c,b:h,color:n(o,c,h)});if(f===1024)return u;var d=[],v=0,m=1024/f;for(a=0;a<f;a++)d.push(u[Math.floor(v)]),v+=m;return d};s.exports=p},86672:s=>{var g=function(e){var n={r:e>>16&255,g:e>>8&255,b:e&255,a:255};return e>16777215&&(n.a=e>>>24),n};s.exports=g},25409:s=>{var g=function(e){var n=e.toString(16);return n.length===1?"0"+n:n};s.exports=g},22946:s=>{var g=function(e,n,p){return e<<16|n<<8|p};s.exports=g},5657:s=>{var g=function(e,n,p,f){return f<<24|e<<16|n<<8|p};s.exports=g},74777:(s,g,e)=>{var n=e(27119),p=e(59998),f=function(u,l,a){var o=a,c=a,h=a;if(l!==0){var d=a<.5?a*(1+l):a+l-a*l,v=2*a-d;o=p(v,d,u+1/3),c=p(v,d,u),h=p(v,d,u-1/3)}var m=new n;return m.setGLTo(o,c,h,1)};s.exports=f},89263:(s,g,e)=>{var n=e(24650),p=function(f,u){f===void 0&&(f=1),u===void 0&&(u=1);for(var l=[],a=0;a<=359;a++)l.push(n(a/359,f,u));return l};s.exports=p},24650:(s,g,e)=>{var n=e(22946);function p(u,l,a,o){var c=(u+l*6)%6,h=Math.min(c,4-c,1);return Math.round(255*(o-o*a*Math.max(0,h)))}var f=function(u,l,a,o){l===void 0&&(l=1),a===void 0&&(a=1);var c=p(5,u,l,a),h=p(3,u,l,a),d=p(1,u,l,a);return o?o.setTo?o.setTo(c,h,d,o.alpha,!0):(o.r=c,o.g=h,o.b=d,o.color=n(c,h,d),o):{r:c,g:h,b:d,color:n(c,h,d)}};s.exports=f},91487:(s,g,e)=>{var n=e(27119),p=function(f){var u=new n;f=f.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(h,d,v,m){return d+d+v+v+m+m});var l=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(f);if(l){var a=parseInt(l[1],16),o=parseInt(l[2],16),c=parseInt(l[3],16);u.setTo(a,o,c)}return u};s.exports=p},59998:s=>{var g=function(e,n,p){return p<0&&(p+=1),p>1&&(p-=1),p<.16666666666666666?e+(n-e)*6*p:p<.5?n:p<.6666666666666666?e+(n-e)*(.6666666666666666-p)*6:e};s.exports=g},74853:(s,g,e)=>{var n=e(27119),p=e(15978),f=function(u){var l=p(u);return new n(l.r,l.g,l.b,l.a)};s.exports=f},15978:s=>{var g=function(e){return e>16777215?{a:e>>>24,r:e>>16&255,g:e>>8&255,b:e&255}:{a:255,r:e>>16&255,g:e>>8&255,b:e&255}};s.exports=g},53756:(s,g,e)=>{var n=e(42798),p=function(l,a,o,c,h,d,v,m){v===void 0&&(v=100),m===void 0&&(m=0);var y=m/v;return{r:n(l,c,y),g:n(a,h,y),b:n(o,d,y)}},f=function(l,a,o,c){return o===void 0&&(o=100),c===void 0&&(c=0),p(l.r,l.g,l.b,a.r,a.g,a.b,o,c)},u=function(l,a,o,c,h,d){return h===void 0&&(h=100),d===void 0&&(d=0),p(l.r,l.g,l.b,a,o,c,h,d)};s.exports={RGBWithRGB:p,ColorWithRGB:u,ColorWithColor:f}},73904:(s,g,e)=>{var n=e(27119),p=function(f){return new n(f.r,f.g,f.b,f.a)};s.exports=p},26841:(s,g,e)=>{var n=e(27119),p=function(f){var u=new n,l=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(f.toLowerCase());if(l){var a=parseInt(l[1],10),o=parseInt(l[2],10),c=parseInt(l[3],10),h=l[4]!==void 0?parseFloat(l[4]):1;u.setTo(a,o,c,h*255)}return u};s.exports=p},68033:s=>{var g=function(e,n,p,f){f===void 0&&(f={h:0,s:0,v:0}),e/=255,n/=255,p/=255;var u=Math.min(e,n,p),l=Math.max(e,n,p),a=l-u,o=0,c=l===0?0:a/l,h=l;return l!==u&&(l===e?o=(n-p)/a+(n<p?6:0):l===n?o=(p-e)/a+2:l===p&&(o=(e-n)/a+4),o/=6),f.hasOwnProperty("_h")?(f._h=o,f._s=c,f._v=h):(f.h=o,f.s=c,f.v=h),f};s.exports=g},4880:(s,g,e)=>{var n=e(25409),p=function(f,u,l,a,o){return a===void 0&&(a=255),o===void 0&&(o="#"),o==="#"?"#"+((1<<24)+(f<<16)+(u<<8)+l).toString(16).slice(1,7):"0x"+n(a)+n(f)+n(u)+n(l)};s.exports=p},37243:(s,g,e)=>{var n=e(17489),p=e(27119),f=function(u,l){return u===void 0&&(u=0),l===void 0&&(l=255),new p(n(u,l),n(u,l),n(u,l))};s.exports=f},93222:(s,g,e)=>{var n=e(91487),p=e(74853),f=e(73904),u=e(26841),l=function(a){var o=typeof a;switch(o){case"string":return a.substr(0,3).toLowerCase()==="rgb"?u(a):n(a);case"number":return p(a);case"object":return f(a)}};s.exports=l},95509:(s,g,e)=>{var n=e(27119);n.ColorSpectrum=e(30245),n.ColorToRGBA=e(86672),n.ComponentToHex=e(25409),n.GetColor=e(22946),n.GetColor32=e(5657),n.HexStringToColor=e(91487),n.HSLToColor=e(74777),n.HSVColorWheel=e(89263),n.HSVToRGB=e(24650),n.HueToComponent=e(59998),n.IntegerToColor=e(74853),n.IntegerToRGB=e(15978),n.Interpolate=e(53756),n.ObjectToColor=e(73904),n.RandomRGB=e(37243),n.RGBStringToColor=e(26841),n.RGBToHSV=e(68033),n.RGBToString=e(4880),n.ValueToColor=e(93222),s.exports=n},24816:(s,g,e)=>{s.exports={Align:e(93545),BaseShader:e(31053),Bounds:e(15252),Canvas:e(23514),Color:e(95509),ColorMatrix:e(65246),Masks:e(93310),RGB:e(39298)}},76756:(s,g,e)=>{var n=e(56694),p=e(61286),f=new n({initialize:function(l,a,o,c,h,d){a||(a=l.sys.make.image({x:o,y:c,key:h,frame:d,add:!1})),this.bitmapMask=a,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(u){this.bitmapMask=u},preRenderWebGL:function(u,l,a){u.pipelines.BITMAPMASK_PIPELINE.beginMask(this,l,a)},postRenderWebGL:function(u,l,a){u.pipelines.BITMAPMASK_PIPELINE.endMask(this,l,a)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});p.register("bitmapMask",function(u,l,a,o,c){return new f(this.scene,u,l,a,o,c)}),s.exports=f},63037:(s,g,e)=>{var n=e(56694),p=new n({initialize:function(u,l){this.geometryMask=l,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(f){return this.geometryMask=f,this},setInvertAlpha:function(f){return f===void 0&&(f=!0),this.invertAlpha=f,this},preRenderWebGL:function(f,u,l){var a=f.gl;f.flush(),f.maskStack.length===0&&(a.enable(a.STENCIL_TEST),a.clear(a.STENCIL_BUFFER_BIT),f.maskCount=0),f.currentCameraMask.mask!==this&&(f.currentMask.mask=this),f.maskStack.push({mask:this,camera:l}),this.applyStencil(f,l,!0),f.maskCount++},applyStencil:function(f,u,l){var a=f.gl,o=this.geometryMask,c=f.maskCount,h=255;a.colorMask(!1,!1,!1,!1),l?(a.stencilFunc(a.EQUAL,c,h),a.stencilOp(a.KEEP,a.KEEP,a.INCR),c++):(a.stencilFunc(a.EQUAL,c+1,h),a.stencilOp(a.KEEP,a.KEEP,a.DECR)),this.level=c,o.renderWebGL(f,o,u),f.flush(),a.colorMask(!0,!0,!0,!0),a.stencilOp(a.KEEP,a.KEEP,a.KEEP),this.invertAlpha?a.stencilFunc(a.NOTEQUAL,c,h):a.stencilFunc(a.EQUAL,c,h)},postRenderWebGL:function(f){var u=f.gl;f.maskStack.pop(),f.maskCount--,f.flush();var l=f.currentMask;if(f.maskStack.length===0)l.mask=null,u.disable(u.STENCIL_TEST);else{var a=f.maskStack[f.maskStack.length-1];a.mask.applyStencil(f,a.camera,!1),f.currentCameraMask.mask!==a.mask?(l.mask=a.mask,l.camera=a.camera):l.mask=null}},preRenderCanvas:function(f,u,l){var a=this.geometryMask;f.currentContext.save(),a.renderCanvas(f,a,l,null,null,!0),f.currentContext.clip()},postRenderCanvas:function(f){f.currentContext.restore()},destroy:function(){this.geometryMask=null}});s.exports=p},93310:(s,g,e)=>{s.exports={BitmapMask:e(76756),GeometryMask:e(63037)}},31053:(s,g,e)=>{var n=e(56694),p=new n({initialize:function(u,l,a,o){(!l||l==="")&&(l=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!a||a==="")&&(a=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),o===void 0&&(o=null),this.key=u,this.fragmentSrc=l,this.vertexSrc=a,this.uniforms=o}});s.exports=p},99584:s=>{var g=function(e,n){var p;if(n)typeof n=="string"?p=document.getElementById(n):typeof n=="object"&&n.nodeType===1&&(p=n);else if(e.parentElement||n===null)return e;return p||(p=document.body),p.appendChild(e),e};s.exports=g},85178:(s,g,e)=>{var n=e(99584),p=function(f){var u=f.config;if(!(!u.parent||!u.domCreateContainer)){var l=document.createElement("div");l.style.cssText=["display: block;","width: "+f.scale.width+"px;","height: "+f.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+u.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),f.domContainer=l,n(l,u.parent)}};s.exports=p},21546:(s,g,e)=>{var n=e(36580),p=function(f){if(document.readyState==="complete"||document.readyState==="interactive"){f();return}var u=function(){document.removeEventListener("deviceready",u,!0),document.removeEventListener("DOMContentLoaded",u,!0),window.removeEventListener("load",u,!0),f()};document.body?n.cordova?document.addEventListener("deviceready",u,!1):(document.addEventListener("DOMContentLoaded",u,!0),window.addEventListener("load",u,!0)):window.setTimeout(u,20)};s.exports=p},74181:s=>{var g=function(e){if(!e)return window.innerHeight;var n=Math.abs(window.orientation),p={w:0,h:0},f=document.createElement("div");return f.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(f),p.w=n===90?f.offsetHeight:window.innerWidth,p.h=n===90?window.innerWidth:f.offsetHeight,document.documentElement.removeChild(f),f=null,Math.abs(window.orientation)!==90?p.h:p.w};s.exports=g},9229:(s,g,e)=>{var n=e(55301),p=function(f,u){var l=window.screen,a=l?l.orientation||l.mozOrientation||l.msOrientation:!1;if(a&&typeof a.type=="string")return a.type;if(typeof a=="string")return a;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?n.ORIENTATION.PORTRAIT:n.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return n.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return n.ORIENTATION.LANDSCAPE}else return u>f?n.ORIENTATION.PORTRAIT:n.ORIENTATION.LANDSCAPE};s.exports=p},2893:s=>{var g=function(e){var n;return e!==""&&(typeof e=="string"?n=document.getElementById(e):e&&e.nodeType===1&&(n=e)),n||(n=document.body),n};s.exports=g},89200:s=>{var g=function(e){var n="";try{if(window.DOMParser){var p=new DOMParser;n=p.parseFromString(e,"text/xml")}else n=new ActiveXObject("Microsoft.XMLDOM"),n.loadXML(e)}catch(f){n=null}return!n||!n.documentElement||n.getElementsByTagName("parsererror").length?null:n};s.exports=g},55638:s=>{var g=function(e){e.parentNode&&e.parentNode.removeChild(e)};s.exports=g},27385:(s,g,e)=>{var n=e(56694),p=e(72283),f=new n({initialize:function(){this.isRunning=!1,this.callback=p,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var l=this;this.step=function a(o){l.callback(o),l.isRunning&&(l.timeOutID=window.requestAnimationFrame(a))},this.stepTimeout=function a(){l.isRunning&&(l.timeOutID=window.setTimeout(a,l.delay)),l.callback(window.performance.now())}},start:function(u,l,a){this.isRunning||(this.callback=u,this.isSetTimeOut=l,this.delay=a,this.isRunning=!0,this.timeOutID=l?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=p}});s.exports=f},3590:(s,g,e)=>{var n={AddToDOM:e(99584),DOMContentLoaded:e(21546),GetInnerHeight:e(74181),GetScreenOrientation:e(9229),GetTarget:e(2893),ParseXML:e(89200),RemoveFromDOM:e(55638),RequestAnimationFrame:e(27385)};s.exports=n},78491:(s,g,e)=>{var n=e(56694),p=e(6659),f=e(91963),u=new n({Extends:p,initialize:function(){p.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});f.register("EventEmitter",u,"events"),s.exports=u},95146:(s,g,e)=>{s.exports={EventEmitter:e(78491)}},20170:(s,g,e)=>{var n=e(56694),p=e(47551),f=e(47406),u=new n({Extends:p,initialize:function(a,o){o===void 0&&(o=1),p.call(this,f.BARREL,a),this.amount=o}});s.exports=u},51182:(s,g,e)=>{var n=e(56694),p=e(47551),f=e(47406),u=new n({Extends:p,initialize:function(a,o,c,h,d,v,m){c===void 0&&(c=1),h===void 0&&(h=1),d===void 0&&(d=1),v===void 0&&(v=1),m===void 0&&(m=4),p.call(this,f.BLOOM,a),this.steps=m,this.offsetX=c,this.offsetY=h,this.blurStrength=d,this.strength=v,this.glcolor=[1,1,1],o!=null&&(this.color=o)},color:{get:function(){var l=this.glcolor;return(l[0]*255<<16)+(l[1]*255<<8)+(l[2]*255|0)},set:function(l){var a=this.glcolor;a[0]=(l>>16&255)/255,a[1]=(l>>8&255)/255,a[2]=(l&255)/255}}});s.exports=u},51498:(s,g,e)=>{var n=e(56694),p=e(47551),f=e(47406),u=new n({Extends:p,initialize:function(a,o,c,h,d,v,m){o===void 0&&(o=0),c===void 0&&(c=2),h===void 0&&(h=2),d===void 0&&(d=1),m===void 0&&(m=4),p.call(this,f.BLUR,a),this.quality=0,this.x=c,this.y=h,this.steps=m,this.strength=d,this.glcolor=[1,1,1],v!=null&&(this.color=v)},color:{get:function(){var l=this.glcolor;return(l[0]*255<<16)+(l[1]*255<<8)+(l[2]*255|0)},set:function(l){var a=this.glcolor;a[0]=(l>>16&255)/255,a[1]=(l>>8&255)/255,a[2]=(l&255)/255}}});s.exports=u},12042:(s,g,e)=>{var n=e(56694),p=e(47551),f=e(47406),u=new n({Extends:p,initialize:function(a,o,c,h,d,v,m,y){o===void 0&&(o=.5),c===void 0&&(c=1),h===void 0&&(h=.2),d===void 0&&(d=!1),v===void 0&&(v=1),m===void 0&&(m=1),y===void 0&&(y=1),p.call(this,f.BOKEH,a),this.radius=o,this.amount=c,this.contrast=h,this.isTiltShift=d,this.strength=y,this.blurX=v,this.blurY=m}});s.exports=u},69900:(s,g,e)=>{var n=e(56694),p=e(47551),f=e(47406),u=new n({Extends:p,initialize:function(a,o,c,h,d,v){o===void 0&&(o=8),d===void 0&&(d=1),v===void 0&&(v=.005),p.call(this,f.CIRCLE,a),this.scale=d,this.feather=v,this.thickness=o,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],c!=null&&(this.color=c),h!=null&&(this.backgroundColor=h)},color:{get:function(){var l=this.glcolor;return(l[0]*255<<16)+(l[1]*255<<8)+(l[2]*255|0)},set:function(l){var a=this.glcolor;a[0]=(l>>16&255)/255,a[1]=(l>>8&255)/255,a[2]=(l&255)/255}},backgroundColor:{get:function(){var l=this.glcolor2;return(l[0]*255<<16)+(l[1]*255<<8)+(l[2]*255|0)},set:function(l){var a=this.glcolor2;a[0]=(l>>16&255)/255,a[1]=(l>>8&255)/255,a[2]=(l&255)/255}}});s.exports=u},48991:(s,g,e)=>{var n=e(56694),p=e(65246),f=e(47406),u=new n({Extends:p,initialize:function(a){p.call(this),this.type=f.COLOR_MATRIX,this.gameObject=a,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});s.exports=u},47551:(s,g,e)=>{var n=e(56694),p=new n({initialize:function(u,l){this.type=u,this.gameObject=l,this.active=!0},setActive:function(f){return this.active=f,this},destroy:function(){this.gameObject=null,this.active=!1}});s.exports=p},47909:(s,g,e)=>{var n=e(56694),p=e(47551),f=e(47406),u=new n({Extends:p,initialize:function(a,o,c,h){o===void 0&&(o="__WHITE"),c===void 0&&(c=.005),h===void 0&&(h=.005),p.call(this,f.DISPLACEMENT,a),this.x=c,this.y=h,this.glTexture,this.setTexture(o)},setTexture:function(l){var a=this.gameObject.scene.sys.textures.getFrame(l);return a&&(this.glTexture=a.glTexture),this}});s.exports=u},18919:(s,g,e)=>{var n=e(56694),p=e(47551),f=e(47406),u=new n({Extends:p,initialize:function(a,o,c,h,d){c===void 0&&(c=4),h===void 0&&(h=0),d===void 0&&(d=!1),p.call(this,f.GLOW,a),this.outerStrength=c,this.innerStrength=h,this.knockout=d,this.glcolor=[1,1,1,1],o!==void 0&&(this.color=o)},color:{get:function(){var l=this.glcolor;return(l[0]*255<<16)+(l[1]*255<<8)+(l[2]*255|0)},set:function(l){var a=this.glcolor;a[0]=(l>>16&255)/255,a[1]=(l>>8&255)/255,a[2]=(l&255)/255}}});s.exports=u},62494:(s,g,e)=>{var n=e(56694),p=e(47551),f=e(47406),u=new n({Extends:p,initialize:function(a,o,c,h,d,v,m,y,C){h===void 0&&(h=.2),d===void 0&&(d=0),v===void 0&&(v=0),m===void 0&&(m=0),y===void 0&&(y=1),C===void 0&&(C=0),p.call(this,f.GRADIENT,a),this.alpha=h,this.size=C,this.fromX=d,this.fromY=v,this.toX=m,this.toY=y,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],o!=null&&(this.color1=o),c!=null&&(this.color2=c)},color1:{get:function(){var l=this.glcolor1;return(l[0]<<16)+(l[1]<<8)+(l[2]|0)},set:function(l){var a=this.glcolor1;a[0]=l>>16&255,a[1]=l>>8&255,a[2]=l&255}},color2:{get:function(){var l=this.glcolor2;return(l[0]<<16)+(l[1]<<8)+(l[2]|0)},set:function(l){var a=this.glcolor2;a[0]=l>>16&255,a[1]=l>>8&255,a[2]=l&255}}});s.exports=u},68897:(s,g,e)=>{var n=e(56694),p=e(47551),f=e(47406),u=new n({Extends:p,initialize:function(a,o){o===void 0&&(o=1),p.call(this,f.PIXELATE,a),this.amount=o}});s.exports=u},58575:(s,g,e)=>{var n=e(56694),p=e(47551),f=e(47406),u=new n({Extends:p,initialize:function(a,o,c,h,d,v,m,y){o===void 0&&(o=0),c===void 0&&(c=0),h===void 0&&(h=.1),d===void 0&&(d=1),m===void 0&&(m=6),y===void 0&&(y=1),p.call(this,f.SHADOW,a),this.x=o,this.y=c,this.decay=h,this.power=d,this.glcolor=[0,0,0,1],this.samples=m,this.intensity=y,v!==void 0&&(this.color=v)},color:{get:function(){var l=this.glcolor;return(l[0]*255<<16)+(l[1]*255<<8)+(l[2]*255|0)},set:function(l){var a=this.glcolor;a[0]=(l>>16&255)/255,a[1]=(l>>8&255)/255,a[2]=(l&255)/255}}});s.exports=u},33755:(s,g,e)=>{var n=e(56694),p=e(47551),f=e(47406),u=new n({Extends:p,initialize:function(a,o,c,h,d){o===void 0&&(o=.5),c===void 0&&(c=.5),h===void 0&&(h=3),d===void 0&&(d=!1),p.call(this,f.SHINE,a),this.speed=o,this.lineWidth=c,this.gradient=h,this.reveal=d}});s.exports=u},24949:(s,g,e)=>{var n=e(56694),p=e(47551),f=e(47406),u=new n({Extends:p,initialize:function(a,o,c,h,d){o===void 0&&(o=.5),c===void 0&&(c=.5),h===void 0&&(h=.5),d===void 0&&(d=.5),p.call(this,f.VIGNETTE,a),this.x=o,this.y=c,this.radius=h,this.strength=d}});s.exports=u},66241:(s,g,e)=>{var n=e(56694),p=e(47551),f=e(47406),u=new n({Extends:p,initialize:function(a,o,c,h,d){o===void 0&&(o=.1),c===void 0&&(c=0),h===void 0&&(h=0),d===void 0&&(d=!1),p.call(this,f.WIPE,a),this.progress=0,this.wipeWidth=o,this.direction=c,this.axis=h,this.reveal=d}});s.exports=u},47406:s=>{var g={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};s.exports=g},96910:(s,g,e)=>{var n=e(98611),p=e(47406),f={Barrel:e(20170),Controller:e(47551),Bloom:e(51182),Blur:e(51498),Bokeh:e(12042),Circle:e(69900),ColorMatrix:e(48991),Displacement:e(47909),Glow:e(18919),Gradient:e(62494),Pixelate:e(68897),Shadow:e(58575),Shine:e(33755),Vignette:e(24949),Wipe:e(66241)};f=n(!1,f,p),s.exports=f},88933:(s,g,e)=>{var n=e(95723),p=e(20494),f=function(u,l,a){l.x=p(a,"x",0),l.y=p(a,"y",0),l.depth=p(a,"depth",0),l.flipX=p(a,"flipX",!1),l.flipY=p(a,"flipY",!1);var o=p(a,"scale",null);typeof o=="number"?l.setScale(o):o!==null&&(l.scaleX=p(o,"x",1),l.scaleY=p(o,"y",1));var c=p(a,"scrollFactor",null);typeof c=="number"?l.setScrollFactor(c):c!==null&&(l.scrollFactorX=p(c,"x",1),l.scrollFactorY=p(c,"y",1)),l.rotation=p(a,"rotation",0);var h=p(a,"angle",null);h!==null&&(l.angle=h),l.alpha=p(a,"alpha",1);var d=p(a,"origin",null);if(typeof d=="number")l.setOrigin(d);else if(d!==null){var v=p(d,"x",.5),m=p(d,"y",.5);l.setOrigin(v,m)}l.blendMode=p(a,"blendMode",n.NORMAL),l.visible=p(a,"visible",!0);var y=p(a,"add",!0);return y&&u.sys.displayList.add(l),l.preUpdate&&u.sys.updateList.add(l),l};s.exports=f},32291:(s,g,e)=>{var n=e(20494),p=function(f,u){var l=n(u,"anims",null);if(l===null)return f;if(typeof l=="string")f.anims.play(l);else if(typeof l=="object"){var a=f.anims,o=n(l,"key",void 0);if(o){var c=n(l,"startFrame",void 0),h=n(l,"delay",0),d=n(l,"repeat",0),v=n(l,"repeatDelay",0),m=n(l,"yoyo",!1),y=n(l,"play",!1),C=n(l,"delayedPlay",0),T={key:o,delay:h,repeat:d,repeatDelay:v,yoyo:m,startFrame:c};y?a.play(T):C>0?a.playAfterDelay(T,C):a.load(T)}}return f};s.exports=p},91713:(s,g,e)=>{var n=e(56694),p=e(71207),f=e(91963),u=e(56631),l=e(7599),a=e(17922),o=new n({Extends:p,initialize:function(h){p.call(this,h),this.sortChildrenFlag=!1,this.scene=h,this.systems=h.sys,this.events=h.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(l.BOOT,this.boot,this),this.events.on(l.START,this.start,this)},boot:function(){this.events.once(l.DESTROY,this.destroy,this)},addChildCallback:function(c){c.displayList&&c.displayList!==this&&c.removeFromDisplayList(),c.parentContainer&&c.parentContainer.remove(c),c.displayList||(this.queueDepthSort(),c.displayList=this,c.emit(u.ADDED_TO_SCENE,c,this.scene),this.events.emit(l.ADDED_TO_SCENE,c,this.scene))},removeChildCallback:function(c){this.queueDepthSort(),c.displayList=null,c.emit(u.REMOVED_FROM_SCENE,c,this.scene),this.events.emit(l.REMOVED_FROM_SCENE,c,this.scene)},start:function(){this.events.once(l.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(a(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(c,h){return c._depth-h._depth},getChildren:function(){return this.list},shutdown:function(){for(var c=this.list;c.length;)c[0].destroy(!0);this.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(l.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});f.register("DisplayList",o,"displayList"),s.exports=o},89980:(s,g,e)=>{var n=e(56694),p=e(48129),f=e(81078),u=e(6659),l=e(56631),a=e(7599),o=new n({Extends:u,initialize:function(h,d){u.call(this),this.scene=h,this.displayList=null,this.type=d,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(l.ADDED_TO_SCENE,this.addedToScene,this),this.on(l.REMOVED_FROM_SCENE,this.removedFromScene,this),h.sys.queueDepthSort()},setActive:function(c){return this.active=c,this},setName:function(c){return this.name=c,this},setState:function(c){return this.state=c,this},setDataEnabled:function(){return this.data||(this.data=new f(this)),this},setData:function(c,h){return this.data||(this.data=new f(this)),this.data.set(c,h),this},incData:function(c,h){return this.data||(this.data=new f(this)),this.data.inc(c,h),this},toggleData:function(c){return this.data||(this.data=new f(this)),this.data.toggle(c),this},getData:function(c){return this.data||(this.data=new f(this)),this.data.get(c)},setInteractive:function(c,h,d){return this.scene.sys.input.enable(this,c,h,d),this},disableInteractive:function(){return this.scene.sys.input.disable(this),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return p(this)},willRender:function(c){var h=this.displayList&&this.displayList.active?this.displayList.willRender(c):!0;return!(!h||o.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&c.id)},getIndexList:function(){for(var c=this,h=this.parentContainer,d=[];h&&(d.unshift(h.getIndex(c)),c=h,h.parentContainer);)h=h.parentContainer;return this.displayList?d.unshift(this.displayList.getIndex(c)):d.unshift(this.scene.sys.displayList.getIndex(c)),d},addToDisplayList:function(c){return c===void 0&&(c=this.scene.sys.displayList),this.displayList&&this.displayList!==c&&this.removeFromDisplayList(),c.exists(this)||(this.displayList=c,c.add(this,!0),c.queueDepthSort(),this.emit(l.ADDED_TO_SCENE,this,this.scene),c.events.emit(a.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var c=this.displayList||this.scene.sys.displayList;return c&&c.exists(this)&&(c.remove(this,!0),c.queueDepthSort(),this.displayList=null,this.emit(l.REMOVED_FROM_SCENE,this,this.scene),c.events.emit(a.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(c){!this.scene||this.ignoreDestroy||(c===void 0&&(c=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(l.DESTROY,this,c),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});o.RENDER_MASK=15,s.exports=o},99325:(s,g,e)=>{var n=e(56694),p=e(91963),f=e(7599),u=new n({initialize:function(a){this.scene=a,this.systems=a.sys,this.events=a.sys.events,this.displayList,this.updateList,this.events.once(f.BOOT,this.boot,this),this.events.on(f.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(f.DESTROY,this.destroy,this)},start:function(){this.events.once(f.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(f.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});u.register=function(l,a){u.prototype.hasOwnProperty(l)||(u.prototype[l]=a)},u.remove=function(l){u.prototype.hasOwnProperty(l)&&delete u.prototype[l]},p.register("GameObjectCreator",u,"make"),s.exports=u},61286:(s,g,e)=>{var n=e(56694),p=e(91963),f=e(7599),u=new n({initialize:function(a){this.scene=a,this.systems=a.sys,this.events=a.sys.events,this.displayList,this.updateList,this.events.once(f.BOOT,this.boot,this),this.events.on(f.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(f.DESTROY,this.destroy,this)},start:function(){this.events.once(f.SHUTDOWN,this.shutdown,this)},existing:function(l){return(l.renderCanvas||l.renderWebGL)&&this.displayList.add(l),l.preUpdate&&this.updateList.add(l),l},shutdown:function(){this.events.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(f.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});u.register=function(l,a){u.prototype.hasOwnProperty(l)||(u.prototype[l]=a)},u.remove=function(l){u.prototype.hasOwnProperty(l)&&delete u.prototype[l]},p.register("GameObjectFactory",u,"add"),s.exports=u},73329:(s,g,e)=>{var n=e(69360),p=new n,f=new n,u=new n,l={camera:p,sprite:f,calc:u},a=function(o,c,h){var d=p,v=f,m=u;return v.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY),d.copyFrom(c.matrix),h?(d.multiplyWithOffset(h,-c.scrollX*o.scrollFactorX,-c.scrollY*o.scrollFactorY),v.e=o.x,v.f=o.y):(v.e-=c.scrollX*o.scrollFactorX,v.f-=c.scrollY*o.scrollFactorY),d.multiply(v,m),l};s.exports=a},92034:(s,g,e)=>{var n=e(56694),p=e(74623),f=e(91963),u=e(7599),l=new n({Extends:p,initialize:function(o){p.call(this),this.checkQueue=!0,this.scene=o,this.systems=o.sys,o.sys.events.once(u.BOOT,this.boot,this),o.sys.events.on(u.START,this.start,this)},boot:function(){this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){var a=this.systems.events;a.on(u.PRE_UPDATE,this.update,this),a.on(u.UPDATE,this.sceneUpdate,this),a.once(u.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(a,o){for(var c=this._active,h=c.length,d=0;d<h;d++){var v=c[d];v.active&&v.preUpdate.call(v,a,o)}},shutdown:function(){for(var a=this._active.length;a--;)this._active[a].destroy(!0);for(a=this._pending.length;a--;)this._pending[a].destroy(!0);for(a=this._destroy.length;a--;)this._destroy[a].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var o=this.systems.events;o.off(u.PRE_UPDATE,this.update,this),o.off(u.UPDATE,this.sceneUpdate,this),o.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});f.register("UpdateList",l,"updateList"),s.exports=l},8810:s=>{var g=function(e,n,p,f,u,l,a,o,c,h,d,v,m,y,C){var T=p.x-n.displayOriginX+u,P=p.y-n.displayOriginY+l,S=T+p.w,M=P+p.h,E=a.getXRound(T,P,o),A=a.getYRound(T,P,o),R=a.getXRound(T,M,o),w=a.getYRound(T,M,o),O=a.getXRound(S,M,o),F=a.getYRound(S,M,o),b=a.getXRound(S,P,o),I=a.getYRound(S,P,o);e.batchQuad(n,E,A,R,w,O,F,b,I,f.u0,f.v0,f.u1,f.v1,c,h,d,v,m,y,C)};s.exports=g},82173:s=>{var g=function(e,n,p,f){if(p===void 0&&(p=!1),f===void 0)return f={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},f;var u=e.text,l=u.length,a=e.maxWidth,o=e.wordWrapCharCode,c=Number.MAX_VALUE,h=Number.MAX_VALUE,d=0,v=0,m=e.fontData.chars,y=e.fontData.lineHeight,C=e.letterSpacing,T=e.lineSpacing,P=0,S=0,M=0,E=null,A=e._align,R=0,w=0,O=e.fontSize/e.fontData.size,F=O*e.scaleX,b=O*e.scaleY,I=null,N=0,z=[],U=Number.MAX_VALUE,W=0,D=0,V=0,L,B=[],G=[],Y=null;if(a>0){for(L=0;L<l;L++){if(M=u.charCodeAt(L),M===10){Y!==null&&(B.push({word:Y.word,i:Y.i,x:Y.x*F,y:Y.y*b,w:Y.w*F,h:Y.h*b,cr:!0}),Y=null),P=0,S+=y+T,I=null;continue}if(E=m[M],!!E){if(I!==null)var X=E.kerning[N];M===o?Y!==null&&(B.push({word:Y.word,i:Y.i,x:Y.x*F,y:Y.y*b,w:Y.w*F,h:Y.h*b,cr:!1}),Y=null):(Y===null&&(Y={word:"",i:L,x:P,y:S,w:0,h:y,cr:!1}),Y.word=Y.word.concat(u[L]),Y.w+=E.xOffset+E.xAdvance+(X!==void 0?X:0)),P+=E.xAdvance+C,I=E,N=M}}Y!==null&&B.push({word:Y.word,i:Y.i,x:Y.x*F,y:Y.y*b,w:Y.w*F,h:Y.h*b,cr:!1}),P=0,S=0,I=null,N=0;var k,H=0,K=[];for(L=0;L<B.length;L++){var j=B[L],$=j.x,Q=j.x+j.w;if(k){var _=$-(k.x+k.w);H=$-(_+k.w),k=null}var q=$-H,et=Q-H;q>a||et>a?(K.push(j.i-1),j.cr?(K.push(j.i+j.word.length),H=0,k=null):k=j):j.cr&&(K.push(j.i+j.word.length),H=0,k=null)}var at=function(qt,oe,ce){return qt.substr(0,oe)+ce+qt.substr(oe+1)};for(L=K.length-1;L>=0;L--)u=at(u,K[L],`
`);f.wrappedText=u,l=u.length,B=[],Y=null}var ht=0;for(L=0;L<l;L++){if(M=u.charCodeAt(L),M===10){Y!==null&&(B.push({word:Y.word,i:Y.i,x:Y.x*F,y:Y.y*b,w:Y.w*F,h:Y.h*b}),Y=null),P=0,S+=y+T,I=null,z[D]=V,V>W&&(W=V),V<U&&(U=V),D++,V=0;continue}if(E=m[M],!!E){if(R=P,w=S,I!==null){var ot=E.kerning[N];R+=ot!==void 0?ot:0}c>R&&(c=R),h>w&&(h=w);var tt=R+E.xAdvance,rt=w+y;d<tt&&(d=tt),v<rt&&(v=rt);var it=E.xOffset+E.xAdvance+(ot!==void 0?ot:0);M===o?Y!==null&&(B.push({word:Y.word,i:Y.i,x:Y.x*F,y:Y.y*b,w:Y.w*F,h:Y.h*b}),Y=null):(Y===null&&(Y={word:"",i:ht,x:P,y:S,w:0,h:y}),Y.word=Y.word.concat(u[L]),Y.w+=it),G.push({i:ht,idx:L,char:u[L],code:M,x:(E.xOffset+R)*O,y:(E.yOffset+S)*O,w:E.width*O,h:E.height*O,t:S*O,r:tt*O,b:y*O,line:D,glyph:E}),P+=E.xAdvance+C+(ot!==void 0?ot:0),I=E,N=M,V=tt*O,ht++}}if(Y!==null&&B.push({word:Y.word,i:Y.i,x:Y.x*F,y:Y.y*b,w:Y.w*F,h:Y.h*b}),z[D]=V,V>W&&(W=V),V<U&&(U=V),A>0)for(var xt=0;xt<G.length;xt++){var vt=G[xt];if(A===1){var Bt=(W-z[vt.line])/2;vt.x+=Bt,vt.r+=Bt}else if(A===2){var Rt=W-z[vt.line];vt.x+=Rt,vt.r+=Rt}}var St=f.local,yt=f.global,Ot=f.lines;return St.x=c*O,St.y=h*O,St.width=d*O,St.height=v*O,yt.x=e.x-e._displayOriginX+c*F,yt.y=e.y-e._displayOriginY+h*b,yt.width=d*F,yt.height=v*b,Ot.shortest=U,Ot.longest=W,Ot.lengths=z,n&&(St.x=Math.ceil(St.x),St.y=Math.ceil(St.y),St.width=Math.ceil(St.width),St.height=Math.ceil(St.height),yt.x=Math.ceil(yt.x),yt.y=Math.ceil(yt.y),yt.width=Math.ceil(yt.width),yt.height=Math.ceil(yt.height),Ot.shortest=Math.ceil(U),Ot.longest=Math.ceil(W)),p&&(e._displayOriginX=e.originX*St.width,e._displayOriginY=e.originY*St.height,yt.x=e.x-e._displayOriginX*e.scaleX,yt.y=e.y-e._displayOriginY*e.scaleY,n&&(yt.x=Math.ceil(yt.x),yt.y=Math.ceil(yt.y))),f.words=B,f.characters=G,f.lines.height=y,f.scale=O,f.scaleX=e.scaleX,f.scaleY=e.scaleY,f};s.exports=g},68298:(s,g,e)=>{var n=e(31476),p=function(f,u,l,a,o,c,h){var d=f.sys.textures.get(l),v=d.get(a),m=f.sys.cache.xml.get(o);if(v&&m){var y=n(m,v,c,h,d);return f.sys.cache.bitmapFont.add(u,{data:y,texture:l,frame:a,fromAtlas:!0}),!0}else return!1};s.exports=p},39860:(s,g,e)=>{var n=e(10850),p=function(f,u){var l=u.width,a=u.height,o=Math.floor(l/2),c=Math.floor(a/2),h=n(u,"chars","");if(h!==""){var d=n(u,"image",""),v=f.sys.textures.getFrame(d),m=v.cutX,y=v.cutY,C=v.source.width,T=v.source.height,P=n(u,"offset.x",0),S=n(u,"offset.y",0),M=n(u,"spacing.x",0),E=n(u,"spacing.y",0),A=n(u,"lineSpacing",0),R=n(u,"charsPerRow",null);R===null&&(R=C/l,R>h.length&&(R=h.length));for(var w=P,O=S,F={retroFont:!0,font:d,size:l,lineHeight:a+A,chars:{}},b=0,I=0;I<h.length;I++){var N=h.charCodeAt(I),z=(m+w)/C,U=(y+O)/T,W=(m+w+l)/C,D=(y+O+a)/T;F.chars[N]={x:w,y:O,width:l,height:a,centerX:o,centerY:c,xOffset:0,yOffset:0,xAdvance:l,data:{},kerning:{},u0:z,v0:U,u1:W,v1:D},b++,b===R?(b=0,w=P,O+=a+E):w+=l+M}var V={data:F,frame:null,texture:d};return V}};s.exports=p},31476:s=>{function g(n,p){return parseInt(n.getAttribute(p),10)}var e=function(n,p,f,u,l){f===void 0&&(f=0),u===void 0&&(u=0);var a=p.cutX,o=p.cutY,c=p.source.width,h=p.source.height,d=p.sourceIndex,v={},m=n.getElementsByTagName("info")[0],y=n.getElementsByTagName("common")[0];v.font=m.getAttribute("face"),v.size=g(m,"size"),v.lineHeight=g(y,"lineHeight")+u,v.chars={};var C=n.getElementsByTagName("char"),T=p!==void 0&&p.trimmed;if(T)var P=p.height,S=p.width;for(var M=0;M<C.length;M++){var E=C[M],A=g(E,"id"),R=String.fromCharCode(A),w=g(E,"x"),O=g(E,"y"),F=g(E,"width"),b=g(E,"height");T&&(w<S&&(S=w),O<P&&(P=O)),T&&P!==0&&S!==0&&(w-=p.x,O-=p.y);var I=(a+w)/c,N=(o+O)/h,z=(a+w+F)/c,U=(o+O+b)/h;if(v.chars[A]={x:w,y:O,width:F,height:b,centerX:Math.floor(F/2),centerY:Math.floor(b/2),xOffset:g(E,"xoffset"),yOffset:g(E,"yoffset"),xAdvance:g(E,"xadvance")+f,data:{},kerning:{},u0:I,v0:N,u1:z,v1:U},l&&F!==0&&b!==0){var W=l.add(R,d,w,O,F,b);W&&W.setUVs(F,b,I,N,z,U)}}var D=n.getElementsByTagName("kerning");for(M=0;M<D.length;M++){var V=D[M],L=g(V,"first"),B=g(V,"second"),G=g(V,"amount");v.chars[B].kerning[L]=G}return v};s.exports=e},55873:(s,g,e)=>{var n=e(66863),p=e(98611),f={Parse:e(39860)};f=p(!1,f,n),s.exports=f},66863:s=>{var g={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};s.exports=g},13468:(s,g,e)=>{var n=e(44616),p=e(56694),f=e(88899),u=new p({Extends:n,Mixins:[f],initialize:function(a,o,c,h,d,v,m){n.call(this,a,o,c,h,d,v,m),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(l,a){return this.cropWidth=l,this.cropHeight=a,this},setDisplayCallback:function(l){return this.displayCallback=l,this},setScrollX:function(l){return this.scrollX=l,this},setScrollY:function(l){return this.scrollY=l,this}});s.exports=u},93438:(s,g,e)=>{var n=e(49584),p=function(f,u,l,a){var o=u._text,c=o.length,h=f.currentContext;if(!(c===0||!n(f,h,u,l,a))){l.addToRenderList(u);var d=u.fromAtlas?u.frame:u.texture.frames.__BASE,v=u.displayCallback,m=u.callbackData,y=u.fontData.chars,C=u.fontData.lineHeight,T=u._letterSpacing,P=0,S=0,M=0,E=null,A=0,R=0,w=0,O=0,F=0,b=0,I=null,N=0,z=u.frame.source.image,U=d.cutX,W=d.cutY,D=0,V=0,L=u._fontSize/u.fontData.size,B=u._align,G=0,Y=0;u.getTextBounds(!1);var X=u._bounds.lines;B===1?Y=(X.longest-X.lengths[0])/2:B===2&&(Y=X.longest-X.lengths[0]),h.translate(-u.displayOriginX,-u.displayOriginY);var k=l.roundPixels;u.cropWidth>0&&u.cropHeight>0&&(h.beginPath(),h.rect(0,0,u.cropWidth,u.cropHeight),h.clip());for(var H=0;H<c;H++){if(V=L,D=0,M=o.charCodeAt(H),M===10){G++,B===1?Y=(X.longest-X.lengths[G])/2:B===2&&(Y=X.longest-X.lengths[G]),P=0,S+=C,I=null;continue}if(E=y[M],!!E){if(A=U+E.x,R=W+E.y,w=E.width,O=E.height,F=E.xOffset+P-u.scrollX,b=E.yOffset+S-u.scrollY,I!==null){var K=E.kerning[N];F+=K!==void 0?K:0}if(v){m.index=H,m.charCode=M,m.x=F,m.y=b,m.scale=V,m.rotation=D,m.data=E.data;var j=v(m);F=j.x,b=j.y,V=j.scale,D=j.rotation}F*=V,b*=V,F+=Y,P+=E.xAdvance+T+(K!==void 0?K:0),I=E,N=M,!(w===0||O===0||M===32)&&(k&&(F=Math.round(F),b=Math.round(b)),h.save(),h.translate(F,b),h.rotate(D),h.scale(V,V),h.drawImage(z,A,R,w,O,0,0,w,O),h.restore())}}h.restore()}};s.exports=p},67513:(s,g,e)=>{var n=e(13468),p=e(88933),f=e(99325),u=e(20494);f.register("dynamicBitmapText",function(l,a){l===void 0&&(l={});var o=u(l,"font",""),c=u(l,"text",""),h=u(l,"size",!1),d=new n(this.scene,0,0,o,c,h);return a!==void 0&&(l.add=a),p(this.scene,d,l),d})},94145:(s,g,e)=>{var n=e(13468),p=e(61286);p.register("dynamicBitmapText",function(f,u,l,a,o){return this.displayList.add(new n(this.scene,f,u,l,a,o))})},88899:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(16873),f=e(93438),s.exports={renderWebGL:p,renderCanvas:f}},16873:(s,g,e)=>{var n=e(73329),p=e(69360),f=e(75512),u=new p,l=function(a,o,c,h){var d=o.text,v=d.length;if(v!==0){c.addToRenderList(o);var m=a.pipelines.set(o.pipeline,o),y=n(o,c,h);a.pipelines.preBatch(o);var C=y.sprite,T=y.calc,P=u,S=o.cropWidth>0||o.cropHeight>0;S&&(m.flush(),a.pushScissor(T.tx,T.ty,o.cropWidth*T.scaleX,o.cropHeight*T.scaleY));var M=o.frame,E=M.glTexture,A=o.tintFill,R=f.getTintAppendFloatAlpha(o.tintTopLeft,c.alpha*o._alphaTL),w=f.getTintAppendFloatAlpha(o.tintTopRight,c.alpha*o._alphaTR),O=f.getTintAppendFloatAlpha(o.tintBottomLeft,c.alpha*o._alphaBL),F=f.getTintAppendFloatAlpha(o.tintBottomRight,c.alpha*o._alphaBR),b=m.setGameObject(o),I=0,N=0,z=0,U=0,W=o.letterSpacing,D,V=0,L=0,B,G=o.scrollX,Y=o.scrollY,X=o.fontData,k=X.chars,H=X.lineHeight,K=o.fontSize/X.size,j=0,$=o._align,Q=0,_=0,q=o.getTextBounds(!1);o.maxWidth>0&&(d=q.wrappedText,v=d.length);var et=o._bounds.lines;$===1?_=(et.longest-et.lengths[0])/2:$===2&&(_=et.longest-et.lengths[0]);for(var at=c.roundPixels,ht=o.displayCallback,ot=o.callbackData,tt=0;tt<v;tt++){if(z=d.charCodeAt(tt),z===10){Q++,$===1?_=(et.longest-et.lengths[Q])/2:$===2&&(_=et.longest-et.lengths[Q]),I=0,N+=H,B=null;continue}if(D=k[z],!!D){V=D.width,L=D.height;var rt=D.xOffset+I-G,it=D.yOffset+N-Y;if(B!==null){var xt=D.kerning[U];rt+=xt!==void 0?xt:0}if(I+=D.xAdvance+W,B=D,U=z,!(V===0||L===0||z===32)){if(K=o.fontSize/o.fontData.size,j=0,ht){ot.color=0,ot.tint.topLeft=R,ot.tint.topRight=w,ot.tint.bottomLeft=O,ot.tint.bottomRight=F,ot.index=tt,ot.charCode=z,ot.x=rt,ot.y=it,ot.scale=K,ot.rotation=j,ot.data=D.data;var vt=ht(ot);rt=vt.x,it=vt.y,K=vt.scale,j=vt.rotation,vt.color?(R=vt.color,w=vt.color,O=vt.color,F=vt.color):(R=vt.tint.topLeft,w=vt.tint.topRight,O=vt.tint.bottomLeft,F=vt.tint.bottomRight),R=f.getTintAppendFloatAlpha(R,c.alpha*o._alphaTL),w=f.getTintAppendFloatAlpha(w,c.alpha*o._alphaTR),O=f.getTintAppendFloatAlpha(O,c.alpha*o._alphaBL),F=f.getTintAppendFloatAlpha(F,c.alpha*o._alphaBR)}rt*=K,it*=K,rt-=o.displayOriginX,it-=o.displayOriginY,rt+=_,P.applyITRS(rt,it,j,K,K),T.multiply(P,C);var Bt=D.u0,Rt=D.v0,St=D.u1,yt=D.v1,Ot=V,qt=L,oe=C.e,ce=C.f,Qe=qt*C.c+C.e,Ts=qt*C.d+C.f,Ss=Ot*C.a+qt*C.c+C.e,Ps=Ot*C.b+qt*C.d+C.f,Es=Ot*C.a+C.e,Ms=Ot*C.b+C.f;at&&(oe=Math.round(oe),ce=Math.round(ce),Qe=Math.round(Qe),Ts=Math.round(Ts),Ss=Math.round(Ss),Ps=Math.round(Ps),Es=Math.round(Es),Ms=Math.round(Ms)),m.batchQuad(o,oe,ce,Qe,Ts,Ss,Ps,Es,Ms,Bt,Rt,St,yt,R,w,O,F,A,E,b)}}}S&&(m.flush(),a.popScissor()),a.pipelines.postBatch(o)}};s.exports=l},44616:(s,g,e)=>{var n=e(56694),p=e(82897),f=e(64937),u=e(89980),l=e(82173),a=e(68298),o=e(31476),c=e(74118),h=e(84557),d=new n({Extends:u,Mixins:[f.Alpha,f.BlendMode,f.Depth,f.GetBounds,f.Mask,f.Origin,f.Pipeline,f.PostPipeline,f.ScrollFactor,f.Texture,f.Tint,f.Transform,f.Visible,h],initialize:function(m,y,C,T,P,S,M){P===void 0&&(P=""),M===void 0&&(M=0),u.call(this,m,"BitmapText"),this.font=T;var E=this.scene.sys.cache.bitmapFont.get(T);E||console.warn("Invalid BitmapText key: "+T),this.fontData=E.data,this._text="",this._fontSize=S||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=M,this._bounds=l(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=E.fromAtlas,this.setTexture(E.texture,E.frame),this.setPosition(y,C),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(P)},setLeftAlign:function(){return this._align=d.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=d.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=d.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(v){return this._fontSize=v,this._dirty=!0,this},setLetterSpacing:function(v){return v===void 0&&(v=0),this._letterSpacing=v,this._dirty=!0,this},setLineSpacing:function(v){return v===void 0&&(v=0),this.lineSpacing=v,this},setText:function(v){return!v&&v!==0&&(v=""),Array.isArray(v)&&(v=v.join(`
`)),v!==this.text&&(this._text=v.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(v,m,y,C){return v===void 0&&(v=0),m===void 0&&(m=0),y===void 0&&(y=0),C===void 0&&(C=.5),this.dropShadowX=v,this.dropShadowY=m,this.dropShadowColor=y,this.dropShadowAlpha=C,this},setCharacterTint:function(v,m,y,C,T,P,S){v===void 0&&(v=0),m===void 0&&(m=1),y===void 0&&(y=!1),C===void 0&&(C=-1),T===void 0&&(T=C,P=C,S=C);var M=this.text.length;m===-1&&(m=M),v<0&&(v=M+v),v=p(v,0,M-1);for(var E=p(v+m,v,M),A=this.charColors,R=v;R<E;R++){var w=A[R];if(C===-1)A[R]=null;else{var O=y?1:0;w?(w.tintEffect=O,w.tintTL=C,w.tintTR=T,w.tintBL=P,w.tintBR=S):A[R]={tintEffect:O,tintTL:C,tintTR:T,tintBL:P,tintBR:S}}}return this},setWordTint:function(v,m,y,C,T,P,S){m===void 0&&(m=1);for(var M=this.getTextBounds(),E=M.words,A=typeof v=="number",R=0,w=0;w<E.length;w++){var O=E[w];if((A&&w===v||!A&&O.word===v)&&(this.setCharacterTint(O.i,O.word.length,y,C,T,P,S),R++,R===m))return this}return this},getTextBounds:function(v){var m=this._bounds;return(this._dirty||v||this.scaleX!==m.scaleX||this.scaleY!==m.scaleY)&&(l(this,v,!0,m),this._dirty=!1),m},getCharacterAt:function(v,m,y){for(var C=this.getLocalPoint(v,m,null,y),T=this.getTextBounds(),P=T.characters,S=new c,M=0;M<P.length;M++){var E=P[M];if(S.setTo(E.x,E.t,E.r-E.x,E.b),S.contains(C.x,C.y))return E}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(v,m,y){if(m===void 0&&(m=this._fontSize),y===void 0&&(y=this._align),v!==this.font){var C=this.scene.sys.cache.bitmapFont.get(v);C&&(this.font=v,this.fontData=C.data,this._fontSize=m,this._align=y,this.fromAtlas=C.fromAtlas===!0,this.setTexture(C.texture,C.frame),l(this,!1,!0,this._bounds))}return this},setMaxWidth:function(v,m){return this._maxWidth=v,this._dirty=!0,m!==void 0&&(this.wordWrapCharCode=m),this},align:{set:function(v){this._align=v,this._dirty=!0},get:function(){return this._align}},text:{set:function(v){this.setText(v)},get:function(){return this._text}},fontSize:{set:function(v){this._fontSize=v,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(v){this._letterSpacing=v,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(v){this._lineSpacing=v,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(v){this._maxWidth=v,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{get:function(){return this.width}},displayHeight:{get:function(){return this.height}},toJSON:function(){var v=f.ToJSON(this),m={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return v.data=m,v},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});d.ALIGN_LEFT=0,d.ALIGN_CENTER=1,d.ALIGN_RIGHT=2,d.ParseFromAtlas=a,d.ParseXMLBitmapFont=o,s.exports=d},97545:(s,g,e)=>{var n=e(49584),p=function(f,u,l,a){var o=u._text,c=o.length,h=f.currentContext;if(!(c===0||!n(f,h,u,l,a))){l.addToRenderList(u);var d=u.fromAtlas?u.frame:u.texture.frames.__BASE,v=u.fontData.chars,m=u.fontData.lineHeight,y=u._letterSpacing,C=u._lineSpacing,T=0,P=0,S=0,M=null,E=0,A=0,R=0,w=0,O=0,F=0,b=null,I=0,N=d.source.image,z=d.cutX,U=d.cutY,W=u._fontSize/u.fontData.size,D=u._align,V=0,L=0,B=u.getTextBounds(!1);u.maxWidth>0&&(o=B.wrappedText,c=o.length);var G=u._bounds.lines;D===1?L=(G.longest-G.lengths[0])/2:D===2&&(L=G.longest-G.lengths[0]),h.translate(-u.displayOriginX,-u.displayOriginY);for(var Y=l.roundPixels,X=0;X<c;X++){if(S=o.charCodeAt(X),S===10){V++,D===1?L=(G.longest-G.lengths[V])/2:D===2&&(L=G.longest-G.lengths[V]),T=0,P+=m+C,b=null;continue}if(M=v[S],!!M){if(E=z+M.x,A=U+M.y,R=M.width,w=M.height,O=M.xOffset+T,F=M.yOffset+P,b!==null){var k=M.kerning[I];O+=k!==void 0?k:0}O*=W,F*=W,O+=L,T+=M.xAdvance+y+(k!==void 0?k:0),b=M,I=S,!(R===0||w===0||S===32)&&(Y&&(O=Math.round(O),F=Math.round(F)),h.save(),h.translate(O,F),h.scale(W,W),h.drawImage(N,E,A,R,w,0,0,R,w),h.restore())}}h.restore()}};s.exports=p},95499:(s,g,e)=>{var n=e(44616),p=e(88933),f=e(99325),u=e(20494),l=e(10850);f.register("bitmapText",function(a,o){a===void 0&&(a={});var c=l(a,"font",""),h=u(a,"text",""),d=u(a,"size",!1),v=l(a,"align",0),m=new n(this.scene,0,0,c,h,d,v);return o!==void 0&&(a.add=o),p(this.scene,m,a),m})},21797:(s,g,e)=>{var n=e(44616),p=e(61286);p.register("bitmapText",function(f,u,l,a,o,c){return this.displayList.add(new n(this.scene,f,u,l,a,o,c))})},84557:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(26372),f=e(97545),s.exports={renderWebGL:p,renderCanvas:f}},26372:(s,g,e)=>{var n=e(8810),p=e(73329),f=e(75512),u=function(l,a,o,c){var h=a._text,d=h.length;if(d!==0){o.addToRenderList(a);var v=l.pipelines.set(a.pipeline,a),m=p(a,o,c).calc;l.pipelines.preBatch(a);var y=o.roundPixels,C=o.alpha,T=a.charColors,P=a.tintFill,S=f.getTintAppendFloatAlpha,M=S(a.tintTopLeft,C*a._alphaTL),E=S(a.tintTopRight,C*a._alphaTR),A=S(a.tintBottomLeft,C*a._alphaBL),R=S(a.tintBottomRight,C*a._alphaBR),w=a.frame.glTexture,O=v.setGameObject(a),F=a.getTextBounds(!1),b,I,N,z=F.characters,U=a.dropShadowX,W=a.dropShadowY,D=U!==0||W!==0;if(D){var V=a.dropShadowColor,L=a.dropShadowAlpha,B=S(V,C*L*a._alphaTL),G=S(V,C*L*a._alphaTR),Y=S(V,C*L*a._alphaBL),X=S(V,C*L*a._alphaBR);for(b=0;b<z.length;b++)I=z[b],N=I.glyph,!(I.code===32||N.width===0||N.height===0)&&n(v,a,I,N,U,W,m,y,B,G,Y,X,1,w,O)}for(b=0;b<z.length;b++)if(I=z[b],N=I.glyph,!(I.code===32||N.width===0||N.height===0))if(T[I.i]){var k=T[I.i],H=k.tintEffect,K=S(k.tintTL,C*a._alphaTL),j=S(k.tintTR,C*a._alphaTR),$=S(k.tintBL,C*a._alphaBL),Q=S(k.tintBR,C*a._alphaBR);n(v,a,I,N,0,0,m,y,K,j,$,Q,H,w,O)}else n(v,a,I,N,0,0,m,y,M,E,A,R,P,w,O);l.pipelines.postBatch(a)}};s.exports=u},52816:(s,g,e)=>{var n=e(92246),p=e(41664),f=e(56694),u=e(64937),l=e(82047),a=e(89980),o=e(71207),c=new f({Extends:a,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Mask,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Size,u.Texture,u.Transform,u.Visible,n],initialize:function(d,v,m,y,C){a.call(this,d,"Blitter"),this.setTexture(y,C),this.setPosition(v,m),this.initPipeline(),this.initPostPipeline(),this.children=new o,this.renderList=[],this.dirty=!1},create:function(h,d,v,m,y){m===void 0&&(m=!0),y===void 0&&(y=this.children.length),v===void 0?v=this.frame:v instanceof l||(v=this.texture.get(v));var C=new p(this,h,d,v,m);return this.children.addAt(C,y,!1),this.dirty=!0,C},createFromCallback:function(h,d,v,m){for(var y=this.createMultiple(d,v,m),C=0;C<y.length;C++){var T=y[C];h.call(this,T,C)}return y},createMultiple:function(h,d,v){d===void 0&&(d=this.frame.name),v===void 0&&(v=!0),Array.isArray(d)||(d=[d]);var m=[],y=this;return d.forEach(function(C){for(var T=0;T<h;T++)m.push(y.create(0,0,C,v))}),m},childCanRender:function(h){return h.visible&&h.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});s.exports=c},33177:s=>{var g=function(e,n,p,f){var u=n.getRenderList();if(u.length!==0){var l=e.currentContext,a=p.alpha*n.alpha;if(a!==0){p.addToRenderList(n),l.globalCompositeOperation=e.blendModes[n.blendMode],l.imageSmoothingEnabled=!n.frame.source.scaleMode;var o=n.x-p.scrollX*n.scrollFactorX,c=n.y-p.scrollY*n.scrollFactorY;l.save(),f&&f.copyToContext(l);for(var h=p.roundPixels,d=0;d<u.length;d++){var v=u[d],m=v.flipX||v.flipY,y=v.frame,C=y.canvasData,T=y.x,P=y.y,S=1,M=1,E=v.alpha*a;E!==0&&(l.globalAlpha=E,m?(v.flipX&&(S=-1,T-=C.width),v.flipY&&(M=-1,P-=C.height),C.width>0&&C.height>0&&(l.save(),l.translate(v.x+o,v.y+c),l.scale(S,M),l.drawImage(y.source.image,C.x,C.y,C.width,C.height,T,P,C.width,C.height),l.restore())):(h&&(T=Math.round(T),P=Math.round(P)),C.width>0&&C.height>0&&l.drawImage(y.source.image,C.x,C.y,C.width,C.height,T+v.x+o,P+v.y+c,C.width,C.height)))}l.restore()}}};s.exports=g},68452:(s,g,e)=>{var n=e(52816),p=e(88933),f=e(99325),u=e(20494);f.register("blitter",function(l,a){l===void 0&&(l={});var o=u(l,"key",null),c=u(l,"frame",null),h=new n(this.scene,0,0,o,c);return a!==void 0&&(l.add=a),p(this.scene,h,l),h})},38906:(s,g,e)=>{var n=e(52816),p=e(61286);p.register("blitter",function(f,u,l,a){return this.displayList.add(new n(this.scene,f,u,l,a))})},92246:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(89165),f=e(33177),s.exports={renderWebGL:p,renderCanvas:f}},89165:(s,g,e)=>{var n=e(69360),p=e(75512),f=new n,u=function(l,a,o,c){var h=a.getRenderList(),d=o.alpha*a.alpha;if(!(h.length===0||d===0)){o.addToRenderList(a);var v=l.pipelines.set(this.pipeline,a),m=o.scrollX*a.scrollFactorX,y=o.scrollY*a.scrollFactorY,C=f.copyFrom(o.matrix);c&&(C.multiplyWithOffset(c,-m,-y),m=0,y=0);var T=a.x-m,P=a.y-y,S=-1,M=!1,E=o.roundPixels;l.pipelines.preBatch(a);for(var A=0;A<h.length;A++){var R=h[A],w=R.frame,O=R.alpha*d;if(O!==0){var F=w.width,b=w.height,I=T+R.x+w.x,N=P+R.y+w.y;R.flipX&&(F*=-1,I+=w.width),R.flipY&&(b*=-1,N+=w.height);var z=C.setQuad(I,N,I+F,N+b,E),U=p.getTintAppendFloatAlpha(R.tint,O);if(w.sourceIndex!==S){var W=v.setGameObject(a,w);S=w.sourceIndex}v.batchQuad(a,z[0],z[1],z[2],z[3],z[4],z[5],z[6],z[7],w.u0,w.v0,w.u1,w.v1,U,U,U,U,M,w.glTexture,W)&&(S=-1)}}l.pipelines.postBatch(a)}};s.exports=u},41664:(s,g,e)=>{var n=e(56694),p=e(82047),f=new n({initialize:function(l,a,o,c,h){this.parent=l,this.x=a,this.y=o,this.frame=c,this.data={},this.tint=16777215,this._visible=h,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(u){return u===void 0?this.frame=this.parent.frame:u instanceof p&&u.texture===this.parent.texture?this.frame=u:this.frame=this.parent.texture.get(u),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(u,l,a){return this.x=u,this.y=l,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,a&&this.setFrame(a),this},setPosition:function(u,l){return this.x=u,this.y=l,this},setFlipX:function(u){return this.flipX=u,this},setFlipY:function(u){return this.flipY=u,this},setFlip:function(u,l){return this.flipX=u,this.flipY=l,this},setVisible:function(u){return this.visible=u,this},setAlpha:function(u){return this.alpha=u,this},setTint:function(u){return this.tint=u,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(u){this.parent.dirty|=this._visible!==u,this._visible=u}},alpha:{get:function(){return this._alpha},set:function(u){this.parent.dirty|=this._alpha>0!=u>0,this._alpha=u}}});s.exports=f},97123:(s,g,e)=>{var n=e(82897),p=2,f={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(u,l,a,o){return u===void 0&&(u=1),l===void 0?this.alpha=u:(this._alphaTL=n(u,0,1),this._alphaTR=n(l,0,1),this._alphaBL=n(a,0,1),this._alphaBR=n(o,0,1)),this},alpha:{get:function(){return this._alpha},set:function(u){var l=n(u,0,1);this._alpha=l,this._alphaTL=l,this._alphaTR=l,this._alphaBL=l,this._alphaBR=l,l===0?this.renderFlags&=~p:this.renderFlags|=p}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(u){var l=n(u,0,1);this._alphaTL=l,l!==0&&(this.renderFlags|=p)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(u){var l=n(u,0,1);this._alphaTR=l,l!==0&&(this.renderFlags|=p)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(u){var l=n(u,0,1);this._alphaBL=l,l!==0&&(this.renderFlags|=p)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(u){var l=n(u,0,1);this._alphaBR=l,l!==0&&(this.renderFlags|=p)}}};s.exports=f},15720:(s,g,e)=>{var n=e(82897),p=2,f={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(u){return u===void 0&&(u=1),this.alpha=u,this},alpha:{get:function(){return this._alpha},set:function(u){var l=n(u,0,1);this._alpha=l,l===0?this.renderFlags&=~p:this.renderFlags|=p}}};s.exports=f},69732:(s,g,e)=>{var n=e(95723),p={_blendMode:n.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(f){typeof f=="string"&&(f=n[f]),f|=0,f>=-1&&(this._blendMode=f)}},setBlendMode:function(f){return this.blendMode=f,this}};s.exports=p},28284:s=>{var g={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,n){return this.width=e,this.height=n,this},setDisplaySize:function(e,n){return this.displayWidth=e,this.displayHeight=n,this}};s.exports=g},85293:s=>{var g={texture:null,frame:null,isCropped:!1,setCrop:function(e,n,p,f){if(e===void 0)this.isCropped=!1;else if(this.frame){if(typeof e=="number")this.frame.setCropUVs(this._crop,e,n,p,f,this.flipX,this.flipY);else{var u=e;this.frame.setCropUVs(this._crop,u.x,u.y,u.width,u.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};s.exports=g},14975:s=>{var g={_depth:0,depth:{get:function(){return this._depth},set:function(e){this.displayList&&this.displayList.queueDepthSort(),this._depth=e}},setDepth:function(e){return e===void 0&&(e=0),this.depth=e,this}};s.exports=g},88677:(s,g,e)=>{var n=e(56694),p=e(96910),f=e(72677),u=new n({initialize:function(a,o){this.gameObject=a,this.isPost=o,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(l){return l===void 0&&(l=0),this.padding=l,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(l){if(!this.isPost){var a=this.gameObject.scene.sys.renderer;a&&a.pipelines?(this.gameObject.pipeline=a.pipelines.FX_PIPELINE,l!==void 0&&(this.padding=l),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var l=this.list,a=0;a<l.length;a++)l[a].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(l){var a;if(this.isPost){var o=this.gameObject.getPostPipeline(String(l.type));for(Array.isArray(o)||(o=[o]),a=0;a<o.length;a++){var c=o[a];if(c.controller===l){this.gameObject.removePostPipeline(c),l.destroy();break}}}else{var h=this.list;for(a=0;a<h.length;a++)h[a]===l&&(f(h,a),l.destroy())}return this.gameObject},disable:function(l){return l===void 0&&(l=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,l&&this.clear(),this.gameObject},add:function(l,a){if(this.isPost){var o=String(l.type);this.gameObject.setPostPipeline(o,a);var c=this.gameObject.getPostPipeline(o);if(c)return Array.isArray(c)&&(c=c.pop()),c.controller=l,l}else return this.enabled||this.enable(),this.list.push(l),l},addGlow:function(l,a,o,c,h,d){return this.add(new p.Glow(this.gameObject,l,a,o,c),{quality:h,distance:d})},addShadow:function(l,a,o,c,h,d,v){return this.add(new p.Shadow(this.gameObject,l,a,o,c,h,d,v))},addPixelate:function(l){return this.add(new p.Pixelate(this.gameObject,l))},addVignette:function(l,a,o,c){return this.add(new p.Vignette(this.gameObject,l,a,o,c))},addShine:function(l,a,o,c){return this.add(new p.Shine(this.gameObject,l,a,o,c))},addBlur:function(l,a,o,c,h,d){return this.add(new p.Blur(this.gameObject,l,a,o,c,h,d))},addGradient:function(l,a,o,c,h,d,v,m){return this.add(new p.Gradient(this.gameObject,l,a,o,c,h,d,v,m))},addBloom:function(l,a,o,c,h,d){return this.add(new p.Bloom(this.gameObject,l,a,o,c,h,d))},addColorMatrix:function(){return this.add(new p.ColorMatrix(this.gameObject))},addCircle:function(l,a,o,c,h){return this.add(new p.Circle(this.gameObject,l,a,o,c,h))},addBarrel:function(l){return this.add(new p.Barrel(this.gameObject,l))},addDisplacement:function(l,a,o){return this.add(new p.Displacement(this.gameObject,l,a,o))},addWipe:function(l,a,o){return this.add(new p.Wipe(this.gameObject,l,a,o))},addReveal:function(l,a,o){return this.add(new p.Wipe(this.gameObject,l,a,o,!0))},addBokeh:function(l,a,o){return this.add(new p.Bokeh(this.gameObject,l,a,o))},addTiltShift:function(l,a,o,c,h,d){return this.add(new p.Bokeh(this.gameObject,l,a,o,!0,c,h,d))},destroy:function(){this.clear(),this.gameObject=null}});s.exports=u},92972:s=>{var g={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,n){return this.flipX=e,this.flipY=n,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};s.exports=g},80693:(s,g,e)=>{var n=e(74118),p=e(2386),f=e(93736),u={prepareBoundsOutput:function(l,a){if(a===void 0&&(a=!1),this.rotation!==0&&p(l,this.x,this.y,this.rotation),a&&this.parentContainer){var o=this.parentContainer.getBoundsTransformMatrix();o.transformPoint(l.x,l.y,l)}return l},getCenter:function(l,a){return l===void 0&&(l=new f),l.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,l.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(l,a)},getTopLeft:function(l,a){return l||(l=new f),l.x=this.x-this.displayWidth*this.originX,l.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(l,a)},getTopCenter:function(l,a){return l||(l=new f),l.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,l.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(l,a)},getTopRight:function(l,a){return l||(l=new f),l.x=this.x-this.displayWidth*this.originX+this.displayWidth,l.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(l,a)},getLeftCenter:function(l,a){return l||(l=new f),l.x=this.x-this.displayWidth*this.originX,l.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(l,a)},getRightCenter:function(l,a){return l||(l=new f),l.x=this.x-this.displayWidth*this.originX+this.displayWidth,l.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(l,a)},getBottomLeft:function(l,a){return l||(l=new f),l.x=this.x-this.displayWidth*this.originX,l.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(l,a)},getBottomCenter:function(l,a){return l||(l=new f),l.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,l.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(l,a)},getBottomRight:function(l,a){return l||(l=new f),l.x=this.x-this.displayWidth*this.originX+this.displayWidth,l.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(l,a)},getBounds:function(l){l===void 0&&(l=new n);var a,o,c,h,d,v,m,y;if(this.parentContainer){var C=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(l),C.transformPoint(l.x,l.y,l),a=l.x,o=l.y,this.getTopRight(l),C.transformPoint(l.x,l.y,l),c=l.x,h=l.y,this.getBottomLeft(l),C.transformPoint(l.x,l.y,l),d=l.x,v=l.y,this.getBottomRight(l),C.transformPoint(l.x,l.y,l),m=l.x,y=l.y}else this.getTopLeft(l),a=l.x,o=l.y,this.getTopRight(l),c=l.x,h=l.y,this.getBottomLeft(l),d=l.x,v=l.y,this.getBottomRight(l),m=l.x,y=l.y;return l.x=Math.min(a,c,d,m),l.y=Math.min(o,h,v,y),l.width=Math.max(a,c,d,m)-l.x,l.height=Math.max(o,h,v,y)-l.y,l}};s.exports=u},39171:(s,g,e)=>{var n=e(76756),p=e(63037),f={mask:null,setMask:function(u){return this.mask=u,this},clearMask:function(u){return u===void 0&&(u=!1),u&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(u,l,a,o,c){return u===void 0&&(this.texture||this.shader||this.geom)&&(u=this),new n(this.scene,u,l,a,o,c)},createGeometryMask:function(u){return u===void 0&&(this.type==="Graphics"||this.geom)&&(u=this),new p(this.scene,u)}};s.exports=f},28072:s=>{var g={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(e){this._displayOriginX=e,this.originX=e/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(e){this._displayOriginY=e,this.originY=e/this.height}},setOrigin:function(e,n){return e===void 0&&(e=.5),n===void 0&&(n=e),this.originX=e,this.originY=n,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(e,n){return e===void 0&&(e=0),n===void 0&&(n=e),this.displayOriginX=e,this.displayOriginY=n,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};s.exports=g},54211:(s,g,e)=>{var n=e(75606),p=e(63130),f=e(10850),u=e(55303),l=e(93736),a={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:u.PLAYING_FORWARD,setPath:function(o,c){c===void 0&&(c=this.pathConfig);var h=this.pathTween;return h&&h.isPlaying()&&h.stop(),this.path=o,c&&this.startFollow(c),this},setRotateToPath:function(o,c){return c===void 0&&(c=0),this.rotateToPath=o,this.pathRotationOffset=c,this},isFollowing:function(){var o=this.pathTween;return o&&o.isPlaying()},startFollow:function(o,c){o===void 0&&(o={}),c===void 0&&(c=0);var h=this.pathTween;h&&h.isPlaying()&&h.stop(),typeof o=="number"&&(o={duration:o}),o.from=f(o,"from",0),o.to=f(o,"to",1);var d=p(o,"positionOnPath",!1);this.rotateToPath=p(o,"rotateToPath",!1),this.pathRotationOffset=f(o,"rotationOffset",0);var v=f(o,"startAt",c);if(v&&(o.onStart=function(y){var C=y.data[0];C.progress=v,C.elapsed=C.duration*v;var T=C.ease(C.progress);C.current=C.start+(C.end-C.start)*T,C.setTargetValue()}),this.pathOffset||(this.pathOffset=new l(this.x,this.y)),this.pathVector||(this.pathVector=new l),this.pathDelta||(this.pathDelta=new l),this.pathDelta.reset(),o.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(o),this.path.getStartPoint(this.pathOffset),d&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=u.PLAYING_FORWARD,this.rotateToPath){var m=this.path.getPoint(.1);this.rotation=Math.atan2(m.y-this.y,m.x-this.x)+n(this.pathRotationOffset)}return this.pathConfig=o,this},pauseFollow:function(){var o=this.pathTween;return o&&o.isPlaying()&&o.pause(),this},resumeFollow:function(){var o=this.pathTween;return o&&o.isPaused()&&o.resume(),this},stopFollow:function(){var o=this.pathTween;return o&&o.isPlaying()&&o.stop(),this},pathUpdate:function(){var o=this.pathTween;if(o){var c=o.data[0],h=this.pathDelta,d=this.pathVector;if(h.copy(d).negate(),c.state===u.COMPLETE){this.path.getPoint(c.end,d),h.add(d),d.add(this.pathOffset),this.setPosition(d.x,d.y);return}else if(c.state!==u.PLAYING_FORWARD&&c.state!==u.PLAYING_BACKWARD)return;this.path.getPoint(o.getValue(),d),h.add(d),d.add(this.pathOffset);var v=this.x,m=this.y;this.setPosition(d.x,d.y);var y=this.x-v,C=this.y-m;if(y===0&&C===0)return;if(c.state!==this._prevDirection){this._prevDirection=c.state;return}this.rotateToPath&&(this.rotation=Math.atan2(C,y)+n(this.pathRotationOffset))}}};s.exports=a},58210:(s,g,e)=>{var n=e(28699),p={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(f){this.pipelineData={};var u=this.scene.sys.renderer;if(!u)return!1;var l=u.pipelines;if(l){f===void 0&&(f=l.default);var a=l.get(f);if(a)return this.defaultPipeline=a,this.pipeline=a,!0}return!1},setPipeline:function(f,u,l){var a=this.scene.sys.renderer;if(!a)return this;var o=a.pipelines;if(o){var c=o.get(f);c&&(this.pipeline=c),u&&(this.pipelineData=l?n(u):u)}return this},setPipelineData:function(f,u){var l=this.pipelineData;return u===void 0?delete l[f]:l[f]=u,this},resetPipeline:function(f){return f===void 0&&(f=!1),this.pipeline=this.defaultPipeline,f&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline.name}};s.exports=p},44086:(s,g,e)=>{var n=e(28699),p=e(88677),f=e(72677),u={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(l){this.postPipelines=[],this.postPipelineData={},this.postFX=new p(this,!0),l&&(this.preFX=new p(this,!1))},setPostPipeline:function(l,a,o){var c=this.scene.sys.renderer;if(!c)return this;var h=c.pipelines;if(h){Array.isArray(l)||(l=[l]);for(var d=0;d<l.length;d++){var v=h.getPostPipeline(l[d],this,a);v&&this.postPipelines.push(v)}a&&(this.postPipelineData=o?n(a):a)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(l,a){var o=this.postPipelineData;return a===void 0?delete o[l]:o[l]=a,this},getPostPipeline:function(l){for(var a=typeof l=="string",o=this.postPipelines,c=[],h=0;h<o.length;h++){var d=o[h];(a&&d.name===l||!a&&d instanceof l)&&c.push(d)}return c.length===1?c[0]:c},resetPostPipeline:function(l){l===void 0&&(l=!1);for(var a=this.postPipelines,o=0;o<a.length;o++)a[o].destroy();this.postPipelines=[],this.hasPostPipeline=!1,l&&(this.postPipelineData={})},removePostPipeline:function(l){for(var a=typeof l=="string",o=this.postPipelines,c=o.length-1;c>=0;c--){var h=o[c];(a&&h.name===l||!a&&h===l)&&(h.destroy(),f(o,c))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};s.exports=u},45900:s=>{var g={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(e,n){return n===void 0&&(n=e),this.scrollFactorX=e,this.scrollFactorY=n,this}};s.exports=g},31654:s=>{var g={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(e){this.scaleX=e/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(e){this.scaleY=e/this.frame.realHeight}},setSizeToFrame:function(e){e||(e=this.frame),this.width=e.realWidth,this.height=e.realHeight;var n=this.input;return n&&!n.customHitArea&&(n.hitArea.width=this.width,n.hitArea.height=this.height),this},setSize:function(e,n){return this.width=e,this.height=n,this},setDisplaySize:function(e,n){return this.displayWidth=e,this.displayHeight=n,this}};s.exports=g},82081:(s,g,e)=>{var n=e(82047),p=8,f={texture:null,frame:null,isCropped:!1,setTexture:function(u,l){return this.texture=this.scene.sys.textures.get(u),this.setFrame(l)},setFrame:function(u,l,a){return l===void 0&&(l=!0),a===void 0&&(a=!0),u instanceof n?(this.texture=this.scene.sys.textures.get(u.texture.key),this.frame=u):this.frame=this.texture.get(u),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~p:this.renderFlags|=p,this._sizeComponent&&l&&this.setSizeToFrame(),this._originComponent&&a&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};s.exports=f},21850:(s,g,e)=>{var n=e(82047),p=8,f={texture:null,frame:null,isCropped:!1,setCrop:function(u,l,a,o){if(u===void 0)this.isCropped=!1;else if(this.frame){if(typeof u=="number")this.frame.setCropUVs(this._crop,u,l,a,o,this.flipX,this.flipY);else{var c=u;this.frame.setCropUVs(this._crop,c.x,c.y,c.width,c.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(u,l){return this.texture=this.scene.sys.textures.get(u),this.setFrame(l)},setFrame:function(u,l,a){return l===void 0&&(l=!0),a===void 0&&(a=!0),u instanceof n?(this.texture=this.scene.sys.textures.get(u.texture.key),this.frame=u):this.frame=this.texture.get(u),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~p:this.renderFlags|=p,this._sizeComponent&&l&&this.setSizeToFrame(),this._originComponent&&a&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};s.exports=f},58072:s=>{var g={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(e,n,p,f){return e===void 0&&(e=16777215),n===void 0&&(n=e,p=e,f=e),this.tintTopLeft=e,this.tintTopRight=n,this.tintBottomLeft=p,this.tintBottomRight=f,this.tintFill=!1,this},setTintFill:function(e,n,p,f){return this.setTint(e,n,p,f),this.tintFill=!0,this},tint:{set:function(e){this.setTint(e,e,e,e)}},isTinted:{get:function(){var e=16777215;return this.tintFill||this.tintTopLeft!==e||this.tintTopRight!==e||this.tintBottomLeft!==e||this.tintBottomRight!==e}}};s.exports=g},48129:s=>{var g=function(e){var n={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(n.textureKey=e.texture.key,n.frameKey=e.frame.name),n};s.exports=g},56584:(s,g,e)=>{var n=e(83392),p=e(69360),f=e(64462),u=e(35786),l=e(62138),a=e(93736),o=4,c={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(h){this._scaleX=h,this._scaleY=h,h===0?this.renderFlags&=~o:this.renderFlags|=o}},scaleX:{get:function(){return this._scaleX},set:function(h){this._scaleX=h,h===0?this.renderFlags&=~o:this._scaleY!==0&&(this.renderFlags|=o)}},scaleY:{get:function(){return this._scaleY},set:function(h){this._scaleY=h,h===0?this.renderFlags&=~o:this._scaleX!==0&&(this.renderFlags|=o)}},angle:{get:function(){return l(this._rotation*n.RAD_TO_DEG)},set:function(h){this.rotation=l(h)*n.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(h){this._rotation=u(h)}},setPosition:function(h,d,v,m){return h===void 0&&(h=0),d===void 0&&(d=h),v===void 0&&(v=0),m===void 0&&(m=0),this.x=h,this.y=d,this.z=v,this.w=m,this},copyPosition:function(h){return h.x!==void 0&&(this.x=h.x),h.y!==void 0&&(this.y=h.y),h.z!==void 0&&(this.z=h.z),h.w!==void 0&&(this.w=h.w),this},setRandomPosition:function(h,d,v,m){return h===void 0&&(h=0),d===void 0&&(d=0),v===void 0&&(v=this.scene.sys.scale.width),m===void 0&&(m=this.scene.sys.scale.height),this.x=h+Math.random()*v,this.y=d+Math.random()*m,this},setRotation:function(h){return h===void 0&&(h=0),this.rotation=h,this},setAngle:function(h){return h===void 0&&(h=0),this.angle=h,this},setScale:function(h,d){return h===void 0&&(h=1),d===void 0&&(d=h),this.scaleX=h,this.scaleY=d,this},setX:function(h){return h===void 0&&(h=0),this.x=h,this},setY:function(h){return h===void 0&&(h=0),this.y=h,this},setZ:function(h){return h===void 0&&(h=0),this.z=h,this},setW:function(h){return h===void 0&&(h=0),this.w=h,this},getLocalTransformMatrix:function(h){return h===void 0&&(h=new p),h.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(h,d){h===void 0&&(h=new p);var v=this.parentContainer;if(!v)return this.getLocalTransformMatrix(h);for(d||(d=new p),h.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);v;)d.applyITRS(v.x,v.y,v._rotation,v._scaleX,v._scaleY),d.multiply(h,h),v=v.parentContainer;return h},getLocalPoint:function(h,d,v,m){v||(v=new a),m||(m=this.scene.sys.cameras.main);var y=m.scrollX,C=m.scrollY,T=h+y*this.scrollFactorX-y,P=d+C*this.scrollFactorY-C;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(T,P,v):f(T,P,this.x,this.y,this.rotation,this.scaleX,this.scaleY,v),this._originComponent&&(v.x+=this._displayOriginX,v.y+=this._displayOriginY),v},getParentRotation:function(){for(var h=0,d=this.parentContainer;d;)h+=d.rotation,d=d.parentContainer;return h}};s.exports=c},69360:(s,g,e)=>{var n=e(56694),p=e(83392),f=e(93736),u=new n({initialize:function(a,o,c,h,d,v){a===void 0&&(a=1),o===void 0&&(o=0),c===void 0&&(c=0),h===void 0&&(h=1),d===void 0&&(d=0),v===void 0&&(v=0),this.matrix=new Float32Array([a,o,c,h,d,v,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(l){this.matrix[0]=l}},b:{get:function(){return this.matrix[1]},set:function(l){this.matrix[1]=l}},c:{get:function(){return this.matrix[2]},set:function(l){this.matrix[2]=l}},d:{get:function(){return this.matrix[3]},set:function(l){this.matrix[3]=l}},e:{get:function(){return this.matrix[4]},set:function(l){this.matrix[4]=l}},f:{get:function(){return this.matrix[5]},set:function(l){this.matrix[5]=l}},tx:{get:function(){return this.matrix[4]},set:function(l){this.matrix[4]=l}},ty:{get:function(){return this.matrix[5]},set:function(l){this.matrix[5]=l}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var l=this.matrix,a=l[0],o=l[1],c=l[2],h=l[3];return a||o?o>0?Math.acos(a/this.scaleX):-Math.acos(a/this.scaleX):c||h?p.TAU-(h>0?Math.acos(-c/this.scaleY):-Math.acos(c/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var l=this.matrix;return l[0]=1,l[1]=0,l[2]=0,l[3]=1,l[4]=0,l[5]=0,this},translate:function(l,a){var o=this.matrix;return o[4]=o[0]*l+o[2]*a+o[4],o[5]=o[1]*l+o[3]*a+o[5],this},scale:function(l,a){var o=this.matrix;return o[0]*=l,o[1]*=l,o[2]*=a,o[3]*=a,this},rotate:function(l){var a=Math.sin(l),o=Math.cos(l),c=this.matrix,h=c[0],d=c[1],v=c[2],m=c[3];return c[0]=h*o+v*a,c[1]=d*o+m*a,c[2]=h*-a+v*o,c[3]=d*-a+m*o,this},multiply:function(l,a){var o=this.matrix,c=l.matrix,h=o[0],d=o[1],v=o[2],m=o[3],y=o[4],C=o[5],T=c[0],P=c[1],S=c[2],M=c[3],E=c[4],A=c[5],R=a===void 0?o:a.matrix;return R[0]=T*h+P*v,R[1]=T*d+P*m,R[2]=S*h+M*v,R[3]=S*d+M*m,R[4]=E*h+A*v+y,R[5]=E*d+A*m+C,R},multiplyWithOffset:function(l,a,o){var c=this.matrix,h=l.matrix,d=c[0],v=c[1],m=c[2],y=c[3],C=c[4],T=c[5],P=a*d+o*m+C,S=a*v+o*y+T,M=h[0],E=h[1],A=h[2],R=h[3],w=h[4],O=h[5];return c[0]=M*d+E*m,c[1]=M*v+E*y,c[2]=A*d+R*m,c[3]=A*v+R*y,c[4]=w*d+O*m+P,c[5]=w*v+O*y+S,this},transform:function(l,a,o,c,h,d){var v=this.matrix,m=v[0],y=v[1],C=v[2],T=v[3],P=v[4],S=v[5];return v[0]=l*m+a*C,v[1]=l*y+a*T,v[2]=o*m+c*C,v[3]=o*y+c*T,v[4]=h*m+d*C+P,v[5]=h*y+d*T+S,this},transformPoint:function(l,a,o){o===void 0&&(o={x:0,y:0});var c=this.matrix,h=c[0],d=c[1],v=c[2],m=c[3],y=c[4],C=c[5];return o.x=l*h+a*v+y,o.y=l*d+a*m+C,o},invert:function(){var l=this.matrix,a=l[0],o=l[1],c=l[2],h=l[3],d=l[4],v=l[5],m=a*h-o*c;return l[0]=h/m,l[1]=-o/m,l[2]=-c/m,l[3]=a/m,l[4]=(c*v-h*d)/m,l[5]=-(a*v-o*d)/m,this},copyFrom:function(l){var a=this.matrix;return a[0]=l.a,a[1]=l.b,a[2]=l.c,a[3]=l.d,a[4]=l.e,a[5]=l.f,this},copyFromArray:function(l){var a=this.matrix;return a[0]=l[0],a[1]=l[1],a[2]=l[2],a[3]=l[3],a[4]=l[4],a[5]=l[5],this},copyToContext:function(l){var a=this.matrix;return l.transform(a[0],a[1],a[2],a[3],a[4],a[5]),l},setToContext:function(l){var a=this.matrix;return l.setTransform(a[0],a[1],a[2],a[3],a[4],a[5]),l},copyToArray:function(l){var a=this.matrix;return l===void 0?l=[a[0],a[1],a[2],a[3],a[4],a[5]]:(l[0]=a[0],l[1]=a[1],l[2]=a[2],l[3]=a[3],l[4]=a[4],l[5]=a[5]),l},setTransform:function(l,a,o,c,h,d){var v=this.matrix;return v[0]=l,v[1]=a,v[2]=o,v[3]=c,v[4]=h,v[5]=d,this},decomposeMatrix:function(){var l=this.decomposedMatrix,a=this.matrix,o=a[0],c=a[1],h=a[2],d=a[3],v=o*d-c*h;if(l.translateX=a[4],l.translateY=a[5],o||c){var m=Math.sqrt(o*o+c*c);l.rotation=c>0?Math.acos(o/m):-Math.acos(o/m),l.scaleX=m,l.scaleY=v/m}else if(h||d){var y=Math.sqrt(h*h+d*d);l.rotation=Math.PI*.5-(d>0?Math.acos(-h/y):-Math.acos(h/y)),l.scaleX=v/y,l.scaleY=y}else l.rotation=0,l.scaleX=0,l.scaleY=0;return l},applyITRS:function(l,a,o,c,h){var d=this.matrix,v=Math.sin(o),m=Math.cos(o);return d[4]=l,d[5]=a,d[0]=m*c,d[1]=v*c,d[2]=-v*h,d[3]=m*h,this},applyInverse:function(l,a,o){o===void 0&&(o=new f);var c=this.matrix,h=c[0],d=c[1],v=c[2],m=c[3],y=c[4],C=c[5],T=1/(h*m+v*-d);return o.x=m*T*l+-v*T*a+(C*v-y*m)*T,o.y=h*T*a+-d*T*l+(-C*h+y*d)*T,o},setQuad:function(l,a,o,c,h,d){d===void 0&&(d=this.quad);var v=this.matrix,m=v[0],y=v[1],C=v[2],T=v[3],P=v[4],S=v[5];return d[0]=l*m+a*C+P,d[1]=l*y+a*T+S,d[2]=l*m+c*C+P,d[3]=l*y+c*T+S,d[4]=o*m+c*C+P,d[5]=o*y+c*T+S,d[6]=o*m+a*C+P,d[7]=o*y+a*T+S,h&&d.forEach(function(M,E){d[E]=Math.round(M)}),d},getX:function(l,a){return l*this.a+a*this.c+this.e},getY:function(l,a){return l*this.b+a*this.d+this.f},getXRound:function(l,a,o){var c=this.getX(l,a);return o&&(c=Math.round(c)),c},getYRound:function(l,a,o){var c=this.getY(l,a);return o&&(c=Math.round(c)),c},getCSSMatrix:function(){var l=this.matrix;return"matrix("+l[0]+","+l[1]+","+l[2]+","+l[3]+","+l[4]+","+l[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});s.exports=u},59694:s=>{var g=1,e={_visible:!0,visible:{get:function(){return this._visible},set:function(n){n?(this._visible=!0,this.renderFlags|=g):(this._visible=!1,this.renderFlags&=~g)}},setVisible:function(n){return this.visible=n,this}};s.exports=e},64937:(s,g,e)=>{s.exports={Alpha:e(97123),AlphaSingle:e(15720),BlendMode:e(69732),ComputedSize:e(28284),Crop:e(85293),Depth:e(14975),Flip:e(92972),FX:e(88677),GetBounds:e(80693),Mask:e(39171),Origin:e(28072),PathFollower:e(54211),Pipeline:e(58210),PostPipeline:e(44086),ScrollFactor:e(45900),Size:e(31654),Texture:e(82081),TextureCrop:e(21850),Tint:e(58072),ToJSON:e(48129),Transform:e(56584),TransformMatrix:e(69360),Visible:e(59694)}},70339:(s,g,e)=>{var n=e(59959),p=e(95723),f=e(56694),u=e(64937),l=e(56631),a=e(89980),o=e(74118),c=e(98524),h=e(58795),d=e(93736),v=new f({Extends:a,Mixins:[u.AlphaSingle,u.BlendMode,u.ComputedSize,u.Depth,u.Mask,u.PostPipeline,u.Transform,u.Visible,c],initialize:function(y,C,T,P){a.call(this,y,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new u.TransformMatrix,this.tempTransformMatrix=new u.TransformMatrix,this._sortKey="",this._sysEvents=y.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(C,T),this.setBlendMode(p.SKIP_CHECK),P&&this.add(P)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(m){return m===void 0&&(m=!0),this.exclusive=m,this},getBounds:function(m){if(m===void 0&&(m=new o),m.setTo(this.x,this.y,0,0),this.parentContainer){var y=this.parentContainer.getBoundsTransformMatrix(),C=y.transformPoint(this.x,this.y);m.setTo(C.x,C.y,0,0)}if(this.list.length>0){var T=this.list,P=new o,S=!1;m.setEmpty();for(var M=0;M<T.length;M++){var E=T[M];E.getBounds&&(E.getBounds(P),S?h(P,m,m):(m.setTo(P.x,P.y,P.width,P.height),S=!0))}}return m},addHandler:function(m){m.once(l.DESTROY,this.remove,this),this.exclusive&&(m.parentContainer&&m.parentContainer.remove(m),m.parentContainer=this,m.removeFromDisplayList(),m.addedToScene())},removeHandler:function(m){m.off(l.DESTROY,this.remove,this),this.exclusive&&(m.parentContainer=null,m.removedFromScene(),m.addToDisplayList())},pointToContainer:function(m,y){y===void 0&&(y=new d),this.parentContainer?this.parentContainer.pointToContainer(m,y):(y.x=m.x,y.y=m.y);var C=this.tempTransformMatrix;return C.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),C.invert(),C.transformPoint(m.x,m.y,y),y},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(m){return n.Add(this.list,m,this.maxSize,this.addHandler,this),this},addAt:function(m,y){return n.AddAt(this.list,m,y,this.maxSize,this.addHandler,this),this},getAt:function(m){return this.list[m]},getIndex:function(m){return this.list.indexOf(m)},sort:function(m,y){return m?(y===void 0&&(y=function(C,T){return C[m]-T[m]}),n.StableSort(this.list,y),this):this},getByName:function(m){return n.GetFirst(this.list,"name",m)},getRandom:function(m,y){return n.GetRandom(this.list,m,y)},getFirst:function(m,y,C,T){return n.GetFirst(this.list,m,y,C,T)},getAll:function(m,y,C,T){return n.GetAll(this.list,m,y,C,T)},count:function(m,y,C,T){return n.CountAllMatching(this.list,m,y,C,T)},swap:function(m,y){return n.Swap(this.list,m,y),this},moveTo:function(m,y){return n.MoveTo(this.list,m,y),this},moveAbove:function(m,y){return n.MoveAbove(this.list,m,y),this},moveBelow:function(m,y){return n.MoveBelow(this.list,m,y),this},remove:function(m,y){var C=n.Remove(this.list,m,this.removeHandler,this);if(y&&C){Array.isArray(C)||(C=[C]);for(var T=0;T<C.length;T++)C[T].destroy()}return this},removeAt:function(m,y){var C=n.RemoveAt(this.list,m,this.removeHandler,this);return y&&C&&C.destroy(),this},removeBetween:function(m,y,C){var T=n.RemoveBetween(this.list,m,y,this.removeHandler,this);if(C)for(var P=0;P<T.length;P++)T[P].destroy();return this},removeAll:function(m){var y=this.list;if(m){for(var C=0;C<y.length;C++)y[C]&&y[C].scene&&(y[C].off(l.DESTROY,this.remove,this),y[C].destroy());this.list=[]}else n.RemoveBetween(y,0,y.length,this.removeHandler,this);return this},bringToTop:function(m){return n.BringToTop(this.list,m),this},sendToBack:function(m){return n.SendToBack(this.list,m),this},moveUp:function(m){return n.MoveUp(this.list,m),this},moveDown:function(m){return n.MoveDown(this.list,m),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return n.Shuffle(this.list),this},replace:function(m,y,C){var T=n.Replace(this.list,m,y);return T&&(this.addHandler(y),this.removeHandler(m),C&&m.destroy()),this},exists:function(m){return this.list.indexOf(m)>-1},setAll:function(m,y,C,T){return n.SetAll(this.list,m,y,C,T),this},each:function(m,y){var C=[null],T,P=this.list.slice(),S=P.length;for(T=2;T<arguments.length;T++)C.push(arguments[T]);for(T=0;T<S;T++)C[0]=P[T],m.apply(y,C);return this},iterate:function(m,y){var C=[null],T;for(T=2;T<arguments.length;T++)C.push(arguments[T]);for(T=0;T<this.list.length;T++)C[0]=this.list[T],m.apply(y,C);return this},setScrollFactor:function(m,y,C){return y===void 0&&(y=m),C===void 0&&(C=!1),this.scrollFactorX=m,this.scrollFactorY=y,C&&(n.SetAll(this.list,"scrollFactorX",m),n.SetAll(this.list,"scrollFactorY",y)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});s.exports=v},13916:s=>{var g=function(e,n,p,f){p.addToRenderList(n);var u=n.list;if(u.length!==0){var l=n.localTransform;f?(l.loadIdentity(),l.multiply(f),l.translate(n.x,n.y),l.rotate(n.rotation),l.scale(n.scaleX,n.scaleY)):l.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY);var a=n.blendMode!==-1;a||e.setBlendMode(0);var o=n._alpha,c=n.scrollFactorX,h=n.scrollFactorY;n.mask&&n.mask.preRenderCanvas(e,null,p);for(var d=0;d<u.length;d++){var v=u[d];if(!!v.willRender(p)){var m=v.alpha,y=v.scrollFactorX,C=v.scrollFactorY;!a&&v.blendMode!==e.currentBlendMode&&e.setBlendMode(v.blendMode),v.setScrollFactor(y*c,C*h),v.setAlpha(m*o),v.renderCanvas(e,v,p,l),v.setAlpha(m),v.setScrollFactor(y,C)}}n.mask&&n.mask.postRenderCanvas(e)}};s.exports=g},44516:(s,g,e)=>{var n=e(88933),p=e(70339),f=e(99325),u=e(20494);f.register("container",function(l,a){l===void 0&&(l={});var o=u(l,"x",0),c=u(l,"y",0),h=u(l,"children",null),d=new p(this.scene,o,c,h);return a!==void 0&&(l.add=a),n(this.scene,d,l),d})},23400:(s,g,e)=>{var n=e(70339),p=e(61286);p.register("container",function(f,u,l){return this.displayList.add(new n(this.scene,f,u,l))})},98524:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(36934),f=e(13916),s.exports={renderWebGL:p,renderCanvas:f}},36934:s=>{var g=function(e,n,p,f){p.addToRenderList(n);var u=n.list,l=u.length;if(l!==0){var a=n.localTransform;f?(a.loadIdentity(),a.multiply(f),a.translate(n.x,n.y),a.rotate(n.rotation),a.scale(n.scaleX,n.scaleY)):a.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY),e.pipelines.preBatch(n);var o=n.blendMode!==-1;o||e.setBlendMode(0);for(var c=n.alpha,h=n.scrollFactorX,d=n.scrollFactorY,v=0;v<l;v++){var m=u[v];if(!!m.willRender(p)){var y,C,T,P;if(m.alphaTopLeft!==void 0)y=m.alphaTopLeft,C=m.alphaTopRight,T=m.alphaBottomLeft,P=m.alphaBottomRight;else{var S=m.alpha;y=S,C=S,T=S,P=S}var M=m.scrollFactorX,E=m.scrollFactorY;!o&&m.blendMode!==e.currentBlendMode&&e.setBlendMode(m.blendMode);var A=m.mask;A&&A.preRenderWebGL(e,m,p);var R=m.type;R!==e.currentType&&(e.newType=!0,e.currentType=R),e.nextTypeMatch=v<l-1?u[v+1].type===e.currentType:!1,m.setScrollFactor(M*h,E*d),m.setAlpha(y*c,C*c,T*c,P*c),m.renderWebGL(e,m,p,a,n),m.setAlpha(y,C,T,P),m.setScrollFactor(M,E),A&&A.postRenderWebGL(e,p),e.newType=!1}}e.pipelines.postBatch(n)}};s.exports=g},2452:s=>{s.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},38943:(s,g,e)=>{var n=e(56694),p=e(64937),f=e(11603),u=e(89980),l=e(42911),a=e(55638),o=e(7599),c=e(51729),h=new n({Extends:u,Mixins:[p.AlphaSingle,p.BlendMode,p.Depth,p.Origin,p.ScrollFactor,p.Transform,p.Visible,f],initialize:function(v,m,y,C,T,P){u.call(this,v,"DOMElement"),this.parent=v.sys.game.domContainer,this.cache=v.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new c,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(m,y),typeof C=="string"?C[0]==="#"?this.setElement(C.substr(1),T,P):this.createElement(C,T,P):C&&this.setElement(C,T,P),v.sys.events.on(o.SLEEP,this.handleSceneEvent,this),v.sys.events.on(o.WAKE,this.handleSceneEvent,this),v.sys.events.on(o.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(d){var v=this.node,m=v.style;v&&(m.display=d.settings.visible?"block":"none")},setSkew:function(d,v){return d===void 0&&(d=0),v===void 0&&(v=d),this.skewX=d,this.skewY=v,this},setPerspective:function(d){return this.parent.style.perspective=d+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(d){this.parent.style.perspective=d+"px"}},addListener:function(d){if(this.node){d=d.split(" ");for(var v=0;v<d.length;v++)this.node.addEventListener(d[v],this.handler,!1)}return this},removeListener:function(d){if(this.node){d=d.split(" ");for(var v=0;v<d.length;v++)this.node.removeEventListener(d[v],this.handler)}return this},dispatchNativeEvent:function(d){this.emit(d.type,d)},createElement:function(d,v,m){return this.setElement(document.createElement(d),v,m)},setElement:function(d,v,m){this.removeElement();var y;if(typeof d=="string"?(d[0]==="#"&&(d=d.substr(1)),y=document.getElementById(d)):typeof d=="object"&&d.nodeType===1&&(y=d),!y)return this;if(this.node=y,v&&l(v))for(var C in v)y.style[C]=v[C];else typeof v=="string"&&(y.style=v);return y.style.zIndex="0",y.style.display="inline",y.style.position="absolute",y.phaser=this,this.parent&&this.parent.appendChild(y),m&&(y.innerText=m),this.updateSize()},createFromCache:function(d,v){var m=this.cache.get(d);return m&&this.createFromHTML(m,v),this},createFromHTML:function(d,v){v===void 0&&(v="div"),this.removeElement();var m=document.createElement(v);return this.node=m,m.style.zIndex="0",m.style.display="inline",m.style.position="absolute",m.phaser=this,this.parent&&this.parent.appendChild(m),m.innerHTML=d,this.updateSize()},removeElement:function(){return this.node&&(a(this.node),this.node=null),this},updateSize:function(){var d=this.node,v=d.getBoundingClientRect();return this.width=d.clientWidth,this.height=d.clientHeight,this.displayWidth=v.width||0,this.displayHeight=v.height||0,this},getChildByProperty:function(d,v){if(this.node){for(var m=this.node.querySelectorAll("*"),y=0;y<m.length;y++)if(m[y][d]===v)return m[y]}return null},getChildByID:function(d){return this.getChildByProperty("id",d)},getChildByName:function(d){return this.getChildByProperty("name",d)},setClassName:function(d){return this.node&&(this.node.className=d,this.updateSize()),this},setText:function(d){return this.node&&(this.node.innerText=d,this.updateSize()),this},setHTML:function(d){return this.node&&(this.node.innerHTML=d,this.updateSize()),this},preRender:function(){var d=this.parentContainer,v=this.node;v&&d&&!d.willRender()&&(v.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(o.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(o.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(o.PRE_RENDER,this.preRender,this)}});s.exports=h},66070:(s,g,e)=>{var n=e(2452),p=e(89980),f=e(69360),u=new f,l=new f,a=new f,o=function(c,h,d,v){if(!!h.node){var m=h.node.style,y=h.scene.sys.settings;if(!m||!y.visible||p.RENDER_MASK!==h.renderFlags||h.cameraFilter!==0&&h.cameraFilter&d.id||h.parentContainer&&!h.parentContainer.willRender()){m.display="none";return}var C=h.parentContainer,T=d.alpha*h.alpha;C&&(T*=C.alpha);var P=u,S=l,M=a,E=0,A=0,R="0%",w="0%";v?(E=h.width*h.scaleX*h.originX,A=h.height*h.scaleY*h.originY,S.applyITRS(h.x-E,h.y-A,h.rotation,h.scaleX,h.scaleY),P.copyFrom(d.matrix),P.multiplyWithOffset(v,-d.scrollX*h.scrollFactorX,-d.scrollY*h.scrollFactorY),S.e=h.x-E,S.f=h.y-A,P.multiply(S,M)):(E=h.width*h.originX,A=h.height*h.originY,S.applyITRS(h.x-E,h.y-A,h.rotation,h.scaleX,h.scaleY),P.copyFrom(d.matrix),R=100*h.originX+"%",w=100*h.originY+"%",S.e-=d.scrollX*h.scrollFactorX,S.f-=d.scrollY*h.scrollFactorY,P.multiply(S,M)),h.transformOnly||(m.display="block",m.opacity=T,m.zIndex=h._depth,m.pointerEvents=h.pointerEvents,m.mixBlendMode=n[h._blendMode]),m.transform=M.getCSSMatrix()+" skew("+h.skewX+"rad, "+h.skewY+"rad) rotate3d("+h.rotate3d.x+","+h.rotate3d.y+","+h.rotate3d.z+","+h.rotate3d.w+h.rotate3dAngle+")",m.transformOrigin=R+" "+w}};s.exports=o},66788:(s,g,e)=>{var n=e(38943),p=e(61286);p.register("dom",function(f,u,l,a,o){var c=new n(this.scene,f,u,l,a,o);return this.displayList.add(c),c})},11603:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(66070),f=e(66070),s.exports={renderWebGL:p,renderCanvas:f}},65492:s=>{s.exports="addedtoscene"},98398:s=>{s.exports="destroy"},40239:s=>{s.exports="removedfromscene"},17286:s=>{s.exports="complete"},31496:s=>{s.exports="created"},89587:s=>{s.exports="error"},59792:s=>{s.exports="locked"},96342:s=>{s.exports="loop"},6017:s=>{s.exports="playing"},49614:s=>{s.exports="play"},24418:s=>{s.exports="seeked"},87318:s=>{s.exports="seeking"},50009:s=>{s.exports="stalled"},61922:s=>{s.exports="stop"},79501:s=>{s.exports="textureready"},4052:s=>{s.exports="unlocked"},54857:s=>{s.exports="unsupported"},56631:(s,g,e)=>{s.exports={ADDED_TO_SCENE:e(65492),DESTROY:e(98398),REMOVED_FROM_SCENE:e(40239),VIDEO_COMPLETE:e(17286),VIDEO_CREATED:e(31496),VIDEO_ERROR:e(89587),VIDEO_LOCKED:e(59792),VIDEO_LOOP:e(96342),VIDEO_PLAY:e(49614),VIDEO_PLAYING:e(6017),VIDEO_SEEKED:e(24418),VIDEO_SEEKING:e(87318),VIDEO_STALLED:e(50009),VIDEO_STOP:e(61922),VIDEO_TEXTURE:e(79501),VIDEO_UNLOCKED:e(4052),VIDEO_UNSUPPORTED:e(54857)}},39419:(s,g,e)=>{var n=e(56694),p=e(64937),f=e(89980),u=e(79394),l=new n({Extends:f,Mixins:[p.Alpha,p.BlendMode,p.Depth,p.Flip,p.Origin,p.ScrollFactor,p.Size,p.Texture,p.Tint,p.Transform,p.Visible,u],initialize:function(o){f.call(this,o,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});s.exports=l},96699:()=>{},41155:(s,g,e)=>{var n=e(39419),p=e(61286);p.register("extern",function(){var f=new n(this.scene);return this.displayList.add(f),f})},79394:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(81410),f=e(96699),s.exports={renderWebGL:p,renderCanvas:f}},81410:(s,g,e)=>{var n=e(73329),p=function(f,u,l,a){f.pipelines.clear();var o=n(u,l,a).calc;u.render.call(u,f,l,o),f.pipelines.rebind()};s.exports=p},36266:s=>{s.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},33182:(s,g,e)=>{var n=e(51052),p=e(56694),f=e(36266),u=e(64937),l=e(95669),a=e(89980),o=e(72632),c=e(10850),h=e(83392),d=e(60898),v=new p({Extends:a,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Mask,u.Pipeline,u.PostPipeline,u.Transform,u.Visible,u.ScrollFactor,d],initialize:function(y,C){var T=c(C,"x",0),P=c(C,"y",0);a.call(this,y,"Graphics"),this.setPosition(T,P),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(C)},setDefaultStyles:function(m){return c(m,"lineStyle",null)&&(this.defaultStrokeWidth=c(m,"lineStyle.width",1),this.defaultStrokeColor=c(m,"lineStyle.color",16777215),this.defaultStrokeAlpha=c(m,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),c(m,"fillStyle",null)&&(this.defaultFillColor=c(m,"fillStyle.color",16777215),this.defaultFillAlpha=c(m,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(m,y,C){return C===void 0&&(C=1),this.commandBuffer.push(f.LINE_STYLE,m,y,C),this._lineWidth=m,this},fillStyle:function(m,y){return y===void 0&&(y=1),this.commandBuffer.push(f.FILL_STYLE,m,y),this},fillGradientStyle:function(m,y,C,T,P,S,M,E){return P===void 0&&(P=1),S===void 0&&(S=P),M===void 0&&(M=P),E===void 0&&(E=P),this.commandBuffer.push(f.GRADIENT_FILL_STYLE,P,S,M,E,m,y,C,T),this},lineGradientStyle:function(m,y,C,T,P,S){return S===void 0&&(S=1),this.commandBuffer.push(f.GRADIENT_LINE_STYLE,m,S,y,C,T,P),this},beginPath:function(){return this.commandBuffer.push(f.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(f.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(f.FILL_PATH),this},fill:function(){return this.commandBuffer.push(f.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(f.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(f.STROKE_PATH),this},fillCircleShape:function(m){return this.fillCircle(m.x,m.y,m.radius)},strokeCircleShape:function(m){return this.strokeCircle(m.x,m.y,m.radius)},fillCircle:function(m,y,C){return this.beginPath(),this.arc(m,y,C,0,h.PI2),this.fillPath(),this},strokeCircle:function(m,y,C){return this.beginPath(),this.arc(m,y,C,0,h.PI2),this.strokePath(),this},fillRectShape:function(m){return this.fillRect(m.x,m.y,m.width,m.height)},strokeRectShape:function(m){return this.strokeRect(m.x,m.y,m.width,m.height)},fillRect:function(m,y,C,T){return this.commandBuffer.push(f.FILL_RECT,m,y,C,T),this},strokeRect:function(m,y,C,T){var P=this._lineWidth/2,S=m-P,M=m+P;return this.beginPath(),this.moveTo(m,y),this.lineTo(m,y+T),this.strokePath(),this.beginPath(),this.moveTo(m+C,y),this.lineTo(m+C,y+T),this.strokePath(),this.beginPath(),this.moveTo(S,y),this.lineTo(M+C,y),this.strokePath(),this.beginPath(),this.moveTo(S,y+T),this.lineTo(M+C,y+T),this.strokePath(),this},fillRoundedRect:function(m,y,C,T,P){P===void 0&&(P=20);var S=P,M=P,E=P,A=P;typeof P!="number"&&(S=o(P,"tl",20),M=o(P,"tr",20),E=o(P,"bl",20),A=o(P,"br",20));var R=S>=0,w=M>=0,O=E>=0,F=A>=0;return S=Math.abs(S),M=Math.abs(M),E=Math.abs(E),A=Math.abs(A),this.beginPath(),this.moveTo(m+S,y),this.lineTo(m+C-M,y),w?this.arc(m+C-M,y+M,M,-h.TAU,0):this.arc(m+C,y,M,Math.PI,h.TAU,!0),this.lineTo(m+C,y+T-A),F?this.arc(m+C-A,y+T-A,A,0,h.TAU):this.arc(m+C,y+T,A,-h.TAU,Math.PI,!0),this.lineTo(m+E,y+T),O?this.arc(m+E,y+T-E,E,h.TAU,Math.PI):this.arc(m,y+T,E,0,-h.TAU,!0),this.lineTo(m,y+S),R?this.arc(m+S,y+S,S,-Math.PI,-h.TAU):this.arc(m,y,S,h.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(m,y,C,T,P){P===void 0&&(P=20);var S=P,M=P,E=P,A=P,R=Math.min(C,T)/2;typeof P!="number"&&(S=o(P,"tl",20),M=o(P,"tr",20),E=o(P,"bl",20),A=o(P,"br",20));var w=S>=0,O=M>=0,F=E>=0,b=A>=0;return S=Math.min(Math.abs(S),R),M=Math.min(Math.abs(M),R),E=Math.min(Math.abs(E),R),A=Math.min(Math.abs(A),R),this.beginPath(),this.moveTo(m+S,y),this.lineTo(m+C-M,y),this.moveTo(m+C-M,y),O?this.arc(m+C-M,y+M,M,-h.TAU,0):this.arc(m+C,y,M,Math.PI,h.TAU,!0),this.lineTo(m+C,y+T-A),this.moveTo(m+C,y+T-A),b?this.arc(m+C-A,y+T-A,A,0,h.TAU):this.arc(m+C,y+T,A,-h.TAU,Math.PI,!0),this.lineTo(m+E,y+T),this.moveTo(m+E,y+T),F?this.arc(m+E,y+T-E,E,h.TAU,Math.PI):this.arc(m,y+T,E,0,-h.TAU,!0),this.lineTo(m,y+S),this.moveTo(m,y+S),w?this.arc(m+S,y+S,S,-Math.PI,-h.TAU):this.arc(m,y,S,h.TAU,0,!0),this.strokePath(),this},fillPointShape:function(m,y){return this.fillPoint(m.x,m.y,y)},fillPoint:function(m,y,C){return!C||C<1?C=1:(m-=C/2,y-=C/2),this.commandBuffer.push(f.FILL_RECT,m,y,C,C),this},fillTriangleShape:function(m){return this.fillTriangle(m.x1,m.y1,m.x2,m.y2,m.x3,m.y3)},strokeTriangleShape:function(m){return this.strokeTriangle(m.x1,m.y1,m.x2,m.y2,m.x3,m.y3)},fillTriangle:function(m,y,C,T,P,S){return this.commandBuffer.push(f.FILL_TRIANGLE,m,y,C,T,P,S),this},strokeTriangle:function(m,y,C,T,P,S){return this.commandBuffer.push(f.STROKE_TRIANGLE,m,y,C,T,P,S),this},strokeLineShape:function(m){return this.lineBetween(m.x1,m.y1,m.x2,m.y2)},lineBetween:function(m,y,C,T){return this.beginPath(),this.moveTo(m,y),this.lineTo(C,T),this.strokePath(),this},lineTo:function(m,y){return this.commandBuffer.push(f.LINE_TO,m,y),this},moveTo:function(m,y){return this.commandBuffer.push(f.MOVE_TO,m,y),this},strokePoints:function(m,y,C,T){y===void 0&&(y=!1),C===void 0&&(C=!1),T===void 0&&(T=m.length),this.beginPath(),this.moveTo(m[0].x,m[0].y);for(var P=1;P<T;P++)this.lineTo(m[P].x,m[P].y);return y&&this.lineTo(m[0].x,m[0].y),C&&this.closePath(),this.strokePath(),this},fillPoints:function(m,y,C,T){y===void 0&&(y=!1),C===void 0&&(C=!1),T===void 0&&(T=m.length),this.beginPath(),this.moveTo(m[0].x,m[0].y);for(var P=1;P<T;P++)this.lineTo(m[P].x,m[P].y);return y&&this.lineTo(m[0].x,m[0].y),C&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(m,y){y===void 0&&(y=32);var C=m.getPoints(y);return this.strokePoints(C,!0)},strokeEllipse:function(m,y,C,T,P){P===void 0&&(P=32);var S=new l(m,y,C,T),M=S.getPoints(P);return this.strokePoints(M,!0)},fillEllipseShape:function(m,y){y===void 0&&(y=32);var C=m.getPoints(y);return this.fillPoints(C,!0)},fillEllipse:function(m,y,C,T,P){P===void 0&&(P=32);var S=new l(m,y,C,T),M=S.getPoints(P);return this.fillPoints(M,!0)},arc:function(m,y,C,T,P,S,M){return S===void 0&&(S=!1),M===void 0&&(M=0),this.commandBuffer.push(f.ARC,m,y,C,T,P,S,M),this},slice:function(m,y,C,T,P,S,M){return S===void 0&&(S=!1),M===void 0&&(M=0),this.commandBuffer.push(f.BEGIN_PATH),this.commandBuffer.push(f.MOVE_TO,m,y),this.commandBuffer.push(f.ARC,m,y,C,T,P,S,M),this.commandBuffer.push(f.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(f.SAVE),this},restore:function(){return this.commandBuffer.push(f.RESTORE),this},translateCanvas:function(m,y){return this.commandBuffer.push(f.TRANSLATE,m,y),this},scaleCanvas:function(m,y){return this.commandBuffer.push(f.SCALE,m,y),this},rotateCanvas:function(m){return this.commandBuffer.push(f.ROTATE,m),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(m,y,C){var T=this.scene.sys,P=T.game.renderer;y===void 0&&(y=T.scale.width),C===void 0&&(C=T.scale.height),v.TargetCamera.setScene(this.scene),v.TargetCamera.setViewport(0,0,y,C),v.TargetCamera.scrollX=this.x,v.TargetCamera.scrollY=this.y;var S,M,E={willReadFrequently:!0};if(typeof m=="string")if(T.textures.exists(m)){S=T.textures.get(m);var A=S.getSourceImage();A instanceof HTMLCanvasElement&&(M=A.getContext("2d",E))}else S=T.textures.createCanvas(m,y,C),M=S.getSourceImage().getContext("2d",E);else m instanceof HTMLCanvasElement&&(M=m.getContext("2d",E));return M&&(this.renderCanvas(P,this,v.TargetCamera,null,M,!1),S&&S.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});v.TargetCamera=new n,s.exports=v},91543:(s,g,e)=>{var n=e(36266),p=e(49584),f=function(u,l,a,o,c,h){var d=l.commandBuffer,v=d.length,m=c||u.currentContext;if(!(v===0||!p(u,m,l,a,o))){a.addToRenderList(l);var y=1,C=1,T=0,P=0,S=1,M=0,E=0,A=0;m.beginPath();for(var R=0;R<v;++R){var w=d[R];switch(w){case n.ARC:m.arc(d[R+1],d[R+2],d[R+3],d[R+4],d[R+5],d[R+6]),R+=7;break;case n.LINE_STYLE:S=d[R+1],T=d[R+2],y=d[R+3],M=(T&16711680)>>>16,E=(T&65280)>>>8,A=T&255,m.strokeStyle="rgba("+M+","+E+","+A+","+y+")",m.lineWidth=S,R+=3;break;case n.FILL_STYLE:P=d[R+1],C=d[R+2],M=(P&16711680)>>>16,E=(P&65280)>>>8,A=P&255,m.fillStyle="rgba("+M+","+E+","+A+","+C+")",R+=2;break;case n.BEGIN_PATH:m.beginPath();break;case n.CLOSE_PATH:m.closePath();break;case n.FILL_PATH:h||m.fill();break;case n.STROKE_PATH:h||m.stroke();break;case n.FILL_RECT:h?m.rect(d[R+1],d[R+2],d[R+3],d[R+4]):m.fillRect(d[R+1],d[R+2],d[R+3],d[R+4]),R+=4;break;case n.FILL_TRIANGLE:m.beginPath(),m.moveTo(d[R+1],d[R+2]),m.lineTo(d[R+3],d[R+4]),m.lineTo(d[R+5],d[R+6]),m.closePath(),h||m.fill(),R+=6;break;case n.STROKE_TRIANGLE:m.beginPath(),m.moveTo(d[R+1],d[R+2]),m.lineTo(d[R+3],d[R+4]),m.lineTo(d[R+5],d[R+6]),m.closePath(),h||m.stroke(),R+=6;break;case n.LINE_TO:m.lineTo(d[R+1],d[R+2]),R+=2;break;case n.MOVE_TO:m.moveTo(d[R+1],d[R+2]),R+=2;break;case n.LINE_FX_TO:m.lineTo(d[R+1],d[R+2]),R+=5;break;case n.MOVE_FX_TO:m.moveTo(d[R+1],d[R+2]),R+=5;break;case n.SAVE:m.save();break;case n.RESTORE:m.restore();break;case n.TRANSLATE:m.translate(d[R+1],d[R+2]),R+=2;break;case n.SCALE:m.scale(d[R+1],d[R+2]),R+=2;break;case n.ROTATE:m.rotate(d[R+1]),R+=1;break;case n.GRADIENT_FILL_STYLE:R+=5;break;case n.GRADIENT_LINE_STYLE:R+=6;break}}m.restore()}};s.exports=f},41286:(s,g,e)=>{var n=e(99325),p=e(33182);n.register("graphics",function(f,u){f===void 0&&(f={}),u!==void 0&&(f.add=u);var l=new p(this.scene,f);return f.add&&this.scene.sys.displayList.add(l),l})},13122:(s,g,e)=>{var n=e(33182),p=e(61286);p.register("graphics",function(f){return this.displayList.add(new n(this.scene,f))})},60898:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(34429),f=e(91543),f=e(91543),s.exports={renderWebGL:p,renderCanvas:f}},34429:(s,g,e)=>{var n=e(36266),p=e(73329),f=e(69360),u=e(75512),l=function(d,v,m){this.x=d,this.y=v,this.width=m},a=function(d,v,m){this.points=[],this.pointsLength=1,this.points[0]=new l(d,v,m)},o=[],c=new f,h=function(d,v,m,y){if(v.commandBuffer.length!==0){m.addToRenderList(v);var C=d.pipelines.set(v.pipeline,v);d.pipelines.preBatch(v);for(var T=p(v,m,y).calc,P=c.loadIdentity(),S=v.commandBuffer,M=m.alpha*v.alpha,E=1,A=C.fillTint,R=C.strokeTint,w=0,O=0,F=0,b=.01,I=Math.PI*2,N,z=[],U=0,W=!0,D=null,V=u.getTintAppendFloatAlpha,L=0;L<S.length;L++)switch(N=S[L],N){case n.BEGIN_PATH:{z.length=0,D=null,W=!0;break}case n.CLOSE_PATH:{W=!1,D&&D.points.length&&D.points.push(D.points[0]);break}case n.FILL_PATH:{for(U=0;U<z.length;U++)C.batchFillPath(z[U].points,P,T);break}case n.STROKE_PATH:{for(U=0;U<z.length;U++)C.batchStrokePath(z[U].points,E,W,P,T);break}case n.LINE_STYLE:{E=S[++L];var B=S[++L],G=S[++L]*M,Y=V(B,G);R.TL=Y,R.TR=Y,R.BL=Y,R.BR=Y;break}case n.FILL_STYLE:{var X=S[++L],k=S[++L]*M,H=V(X,k);A.TL=H,A.TR=H,A.BL=H,A.BR=H;break}case n.GRADIENT_FILL_STYLE:{var K=S[++L]*M,j=S[++L]*M,$=S[++L]*M,Q=S[++L]*M;A.TL=V(S[++L],K),A.TR=V(S[++L],j),A.BL=V(S[++L],$),A.BR=V(S[++L],Q);break}case n.GRADIENT_LINE_STYLE:{E=S[++L];var _=S[++L]*M;R.TL=V(S[++L],_),R.TR=V(S[++L],_),R.BL=V(S[++L],_),R.BR=V(S[++L],_);break}case n.ARC:{var q=0,et=S[++L],at=S[++L],ht=S[++L],ot=S[++L],tt=S[++L],rt=S[++L],it=S[++L];for(tt-=ot,rt?tt<-I?tt=-I:tt>0&&(tt=-I+tt%I):tt>I?tt=I:tt<0&&(tt=I+tt%I),D===null&&(D=new a(et+Math.cos(ot)*ht,at+Math.sin(ot)*ht,E),z.push(D),q+=b);q<1+it;)F=tt*q+ot,w=et+Math.cos(F)*ht,O=at+Math.sin(F)*ht,D.points.push(new l(w,O,E)),q+=b;F=tt+ot,w=et+Math.cos(F)*ht,O=at+Math.sin(F)*ht,D.points.push(new l(w,O,E));break}case n.FILL_RECT:{C.batchFillRect(S[++L],S[++L],S[++L],S[++L],P,T);break}case n.FILL_TRIANGLE:{C.batchFillTriangle(S[++L],S[++L],S[++L],S[++L],S[++L],S[++L],P,T);break}case n.STROKE_TRIANGLE:{C.batchStrokeTriangle(S[++L],S[++L],S[++L],S[++L],S[++L],S[++L],E,P,T);break}case n.LINE_TO:{D!==null?D.points.push(new l(S[++L],S[++L],E)):(D=new a(S[++L],S[++L],E),z.push(D));break}case n.MOVE_TO:{D=new a(S[++L],S[++L],E),z.push(D);break}case n.SAVE:{o.push(P.copyToArray());break}case n.RESTORE:{P.copyFromArray(o.pop());break}case n.TRANSLATE:{et=S[++L],at=S[++L],P.translate(et,at);break}case n.SCALE:{et=S[++L],at=S[++L],P.scale(et,at);break}case n.ROTATE:{P.rotate(S[++L]);break}}d.pipelines.postBatch(v)}};s.exports=h},59192:(s,g,e)=>{var n=e(83979),p=e(56694),f=e(56631),u=e(6659),l=e(71608),a=e(72632),o=e(10850),c=e(19256),h=e(42911),d=e(75757),v=e(58403),m=e(13747),y=new p({Extends:u,initialize:function(T,P,S){u.call(this),S?P&&!Array.isArray(P)&&(P=[P]):Array.isArray(P)?h(P[0])&&(S=P,P=null):h(P)&&(S=P,P=null),this.scene=T,this.children=new v,this.isParent=!0,this.type="Group",this.classType=a(S,"classType",m),this.name=a(S,"name",""),this.active=a(S,"active",!0),this.maxSize=a(S,"maxSize",-1),this.defaultKey=a(S,"defaultKey",null),this.defaultFrame=a(S,"defaultFrame",null),this.runChildUpdate=a(S,"runChildUpdate",!1),this.createCallback=a(S,"createCallback",null),this.removeCallback=a(S,"removeCallback",null),this.createMultipleCallback=a(S,"createMultipleCallback",null),this.internalCreateCallback=a(S,"internalCreateCallback",null),this.internalRemoveCallback=a(S,"internalRemoveCallback",null),P&&this.addMultiple(P),S&&this.createMultiple(S),this.on(f.ADDED_TO_SCENE,this.addedToScene,this),this.on(f.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(C,T,P,S,M,E){if(C===void 0&&(C=0),T===void 0&&(T=0),P===void 0&&(P=this.defaultKey),S===void 0&&(S=this.defaultFrame),M===void 0&&(M=!0),E===void 0&&(E=!0),this.isFull())return null;var A=new this.classType(this.scene,C,T,P,S);return A.addToDisplayList(this.scene.sys.displayList),A.addToUpdateList(),A.visible=M,A.setActive(E),this.add(A),A},createMultiple:function(C){if(this.isFull())return[];Array.isArray(C)||(C=[C]);var T=[];if(C[0].key)for(var P=0;P<C.length;P++){var S=this.createFromConfig(C[P]);T=T.concat(S)}return T},createFromConfig:function(C){if(this.isFull())return[];this.classType=a(C,"classType",this.classType);var T=a(C,"key",void 0),P=a(C,"frame",null),S=a(C,"visible",!0),M=a(C,"active",!0),E=[];if(T===void 0)return E;Array.isArray(T)||(T=[T]),Array.isArray(P)||(P=[P]);var A=a(C,"repeat",0),R=a(C,"randomKey",!1),w=a(C,"randomFrame",!1),O=a(C,"yoyo",!1),F=a(C,"quantity",!1),b=a(C,"frameQuantity",1),I=a(C,"max",0),N=d(T,P,{max:I,qty:F||b,random:R,randomB:w,repeat:A,yoyo:O});C.createCallback&&(this.createCallback=C.createCallback),C.removeCallback&&(this.removeCallback=C.removeCallback);for(var z=0;z<N.length;z++){var U=this.create(0,0,N[z].a,N[z].b,S,M);if(!U)break;E.push(U)}if(c(C,"setXY")){var W=o(C,"setXY.x",0),D=o(C,"setXY.y",0),V=o(C,"setXY.stepX",0),L=o(C,"setXY.stepY",0);n.SetXY(E,W,D,V,L)}if(c(C,"setRotation")){var B=o(C,"setRotation.value",0),G=o(C,"setRotation.step",0);n.SetRotation(E,B,G)}if(c(C,"setScale")){var Y=o(C,"setScale.x",1),X=o(C,"setScale.y",Y),k=o(C,"setScale.stepX",0),H=o(C,"setScale.stepY",0);n.SetScale(E,Y,X,k,H)}if(c(C,"setOrigin")){var K=o(C,"setOrigin.x",.5),j=o(C,"setOrigin.y",K),$=o(C,"setOrigin.stepX",0),Q=o(C,"setOrigin.stepY",0);n.SetOrigin(E,K,j,$,Q)}if(c(C,"setAlpha")){var _=o(C,"setAlpha.value",1),q=o(C,"setAlpha.step",0);n.SetAlpha(E,_,q)}if(c(C,"setDepth")){var et=o(C,"setDepth.value",0),at=o(C,"setDepth.step",0);n.SetDepth(E,et,at)}if(c(C,"setScrollFactor")){var ht=o(C,"setScrollFactor.x",1),ot=o(C,"setScrollFactor.y",ht),tt=o(C,"setScrollFactor.stepX",0),rt=o(C,"setScrollFactor.stepY",0);n.SetScrollFactor(E,ht,ot,tt,rt)}var it=a(C,"hitArea",null),xt=a(C,"hitAreaCallback",null);it&&n.SetHitArea(E,it,xt);var vt=a(C,"gridAlign",!1);return vt&&n.GridAlign(E,vt),this.createMultipleCallback&&this.createMultipleCallback.call(this,E),E},preUpdate:function(C,T){if(!(!this.runChildUpdate||this.children.size===0))for(var P=this.children.entries.slice(),S=0;S<P.length;S++){var M=P[S];M.active&&M.update(C,T)}},add:function(C,T){return T===void 0&&(T=!1),this.isFull()?this:(this.children.set(C),this.internalCreateCallback&&this.internalCreateCallback.call(this,C),this.createCallback&&this.createCallback.call(this,C),T&&(C.addToDisplayList(this.scene.sys.displayList),C.addToUpdateList()),C.on(f.DESTROY,this.remove,this),this)},addMultiple:function(C,T){if(T===void 0&&(T=!1),Array.isArray(C))for(var P=0;P<C.length;P++)this.add(C[P],T);return this},remove:function(C,T,P){return T===void 0&&(T=!1),P===void 0&&(P=!1),this.children.contains(C)?(this.children.delete(C),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,C),this.removeCallback&&this.removeCallback.call(this,C),C.off(f.DESTROY,this.remove,this),P?C.destroy():T&&(C.removeFromDisplayList(),C.removeFromUpdateList()),this):this},clear:function(C,T){C===void 0&&(C=!1),T===void 0&&(T=!1);for(var P=this.children,S=0;S<P.size;S++){var M=P.entries[S];M.off(f.DESTROY,this.remove,this),T?M.destroy():C&&(M.removeFromDisplayList(),M.removeFromUpdateList())}return this.children.clear(),this},contains:function(C){return this.children.contains(C)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(C,T,P,S){return l(this.children.entries,C,T,P,S)},getFirst:function(C,T,P,S,M,E,A){return this.getHandler(!0,1,C,T,P,S,M,E,A)},getFirstNth:function(C,T,P,S,M,E,A,R){return this.getHandler(!0,C,T,P,S,M,E,A,R)},getLast:function(C,T,P,S,M,E,A){return this.getHandler(!1,1,C,T,P,S,M,E,A)},getLastNth:function(C,T,P,S,M,E,A,R){return this.getHandler(!1,C,T,P,S,M,E,A,R)},getHandler:function(C,T,P,S,M,E,A,R,w){P===void 0&&(P=!1),S===void 0&&(S=!1);var O,F,b=0,I=this.children.entries;if(C)for(F=0;F<I.length;F++)if(O=I[F],O.active===P){if(b++,b===T)break}else O=null;else for(F=I.length-1;F>=0;F--)if(O=I[F],O.active===P){if(b++,b===T)break}else O=null;return O?(typeof M=="number"&&(O.x=M),typeof E=="number"&&(O.y=E),O):S?this.create(M,E,A,R,w):null},get:function(C,T,P,S,M){return this.getFirst(!1,!0,C,T,P,S,M)},getFirstAlive:function(C,T,P,S,M,E){return this.getFirst(!0,C,T,P,S,M,E)},getFirstDead:function(C,T,P,S,M,E){return this.getFirst(!1,C,T,P,S,M,E)},playAnimation:function(C,T){return n.PlayAnimation(this.children.entries,C,T),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(C){C===void 0&&(C=!0);for(var T=0,P=0;P<this.children.size;P++)this.children.entries[P].active===C&&T++;return T},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var C=this.getTotalUsed(),T=this.maxSize===-1?999999999999:this.maxSize;return T-C},setActive:function(C){return this.active=C,this},setName:function(C){return this.name=C,this},propertyValueSet:function(C,T,P,S,M){return n.PropertyValueSet(this.children.entries,C,T,P,S,M),this},propertyValueInc:function(C,T,P,S,M){return n.PropertyValueInc(this.children.entries,C,T,P,S,M),this},setX:function(C,T){return n.SetX(this.children.entries,C,T),this},setY:function(C,T){return n.SetY(this.children.entries,C,T),this},setXY:function(C,T,P,S){return n.SetXY(this.children.entries,C,T,P,S),this},incX:function(C,T){return n.IncX(this.children.entries,C,T),this},incY:function(C,T){return n.IncY(this.children.entries,C,T),this},incXY:function(C,T,P,S){return n.IncXY(this.children.entries,C,T,P,S),this},shiftPosition:function(C,T,P){return n.ShiftPosition(this.children.entries,C,T,P),this},angle:function(C,T){return n.Angle(this.children.entries,C,T),this},rotate:function(C,T){return n.Rotate(this.children.entries,C,T),this},rotateAround:function(C,T){return n.RotateAround(this.children.entries,C,T),this},rotateAroundDistance:function(C,T,P){return n.RotateAroundDistance(this.children.entries,C,T,P),this},setAlpha:function(C,T){return n.SetAlpha(this.children.entries,C,T),this},setTint:function(C,T,P,S){return n.SetTint(this.children.entries,C,T,P,S),this},setOrigin:function(C,T,P,S){return n.SetOrigin(this.children.entries,C,T,P,S),this},scaleX:function(C,T){return n.ScaleX(this.children.entries,C,T),this},scaleY:function(C,T){return n.ScaleY(this.children.entries,C,T),this},scaleXY:function(C,T,P,S){return n.ScaleXY(this.children.entries,C,T,P,S),this},setDepth:function(C,T){return n.SetDepth(this.children.entries,C,T),this},setBlendMode:function(C){return n.SetBlendMode(this.children.entries,C),this},setHitArea:function(C,T){return n.SetHitArea(this.children.entries,C,T),this},shuffle:function(){return n.Shuffle(this.children.entries),this},kill:function(C){this.children.contains(C)&&C.setActive(!1)},killAndHide:function(C){this.children.contains(C)&&(C.setActive(!1),C.setVisible(!1))},setVisible:function(C,T,P){return n.SetVisible(this.children.entries,C,T,P),this},toggleVisible:function(){return n.ToggleVisible(this.children.entries),this},destroy:function(C,T){C===void 0&&(C=!1),T===void 0&&(T=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(f.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(T,C),this.scene=void 0,this.children=void 0)}});s.exports=y},61295:(s,g,e)=>{var n=e(99325),p=e(59192);n.register("group",function(f){return new p(this.scene,null,f)})},62598:(s,g,e)=>{var n=e(59192),p=e(61286);p.register("group",function(f,u){return this.updateList.add(new n(this.scene,f,u))})},1539:(s,g,e)=>{var n=e(56694),p=e(64937),f=e(89980),u=e(57322),l=new n({Extends:f,Mixins:[p.Alpha,p.BlendMode,p.Depth,p.Flip,p.GetBounds,p.Mask,p.Origin,p.Pipeline,p.PostPipeline,p.ScrollFactor,p.Size,p.TextureCrop,p.Tint,p.Transform,p.Visible,u],initialize:function(o,c,h,d,v){f.call(this,o,"Image"),this._crop=this.resetCropObject(),this.setTexture(d,v),this.setPosition(c,h),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});s.exports=l},57786:s=>{var g=function(e,n,p,f){p.addToRenderList(n),e.batchSprite(n,n.frame,p,f)};s.exports=g},83556:(s,g,e)=>{var n=e(88933),p=e(99325),f=e(20494),u=e(1539);p.register("image",function(l,a){l===void 0&&(l={});var o=f(l,"key",null),c=f(l,"frame",null),h=new u(this.scene,0,0,o,c);return a!==void 0&&(l.add=a),n(this.scene,h,l),h})},20927:(s,g,e)=>{var n=e(1539),p=e(61286);p.register("image",function(f,u,l,a){return this.displayList.add(new n(this.scene,f,u,l,a))})},57322:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(59390),f=e(57786),s.exports={renderWebGL:p,renderCanvas:f}},59390:s=>{var g=function(e,n,p,f){p.addToRenderList(n),this.pipeline.batchSprite(n,p,f)};s.exports=g},48013:(s,g,e)=>{var n={Events:e(56631),DisplayList:e(91713),GameObjectCreator:e(99325),GameObjectFactory:e(61286),UpdateList:e(92034),Components:e(64937),GetCalcMatrix:e(73329),BuildGameObject:e(88933),BuildGameObjectAnimation:e(32291),GameObject:e(89980),BitmapText:e(44616),Blitter:e(52816),Bob:e(41664),Container:e(70339),DOMElement:e(38943),DynamicBitmapText:e(13468),Extern:e(39419),Graphics:e(33182),Group:e(59192),Image:e(1539),Layer:e(85305),Particles:e(27684),PathFollower:e(29598),RenderTexture:e(15996),RetroFont:e(55873),Rope:e(79968),Sprite:e(13747),Text:e(76555),GetTextSize:e(32979),MeasureText:e(27030),TextStyle:e(74744),TileSprite:e(35856),Zone:e(71030),Video:e(8630),Shape:e(91461),Arc:e(28593),Curve:e(15220),Ellipse:e(28591),Grid:e(39169),IsoBox:e(4415),IsoTriangle:e(65159),Line:e(579),Polygon:e(91249),Rectangle:e(517),Star:e(77843),Triangle:e(21873),Factories:{Blitter:e(38906),Container:e(23400),DOMElement:e(66788),DynamicBitmapText:e(94145),Extern:e(41155),Graphics:e(13122),Group:e(62598),Image:e(20927),Layer:e(17676),Particles:e(81212),PathFollower:e(19626),RenderTexture:e(29599),Rope:e(31982),Sprite:e(66135),StaticBitmapText:e(21797),Text:e(94627),TileSprite:e(20509),Zone:e(34546),Video:e(215),Arc:e(10369),Curve:e(10147),Ellipse:e(99869),Grid:e(9326),IsoBox:e(88154),IsoTriangle:e(67765),Line:e(85665),Polygon:e(88203),Rectangle:e(94355),Star:e(23962),Triangle:e(79296)},Creators:{Blitter:e(68452),Container:e(44516),DynamicBitmapText:e(67513),Graphics:e(41286),Group:e(61295),Image:e(83556),Layer:e(56378),Particles:e(765),RenderTexture:e(85692),Rope:e(96027),Sprite:e(89219),StaticBitmapText:e(95499),Text:e(75397),TileSprite:e(63950),Zone:e(24067),Video:e(65601)}};n.Shader=e(27902),n.Mesh=e(83321),n.NineSlice=e(44139),n.PointLight=e(13171),n.Plane=e(33412),n.Factories.Shader=e(51979),n.Factories.Mesh=e(8767),n.Factories.NineSlice=e(53778),n.Factories.PointLight=e(91201),n.Factories.Plane=e(58322),n.Creators.Shader=e(13908),n.Creators.Mesh=e(41839),n.Creators.NineSlice=e(40964),n.Creators.PointLight=e(162),n.Creators.Plane=e(10912),n.Light=e(14455),n.LightsManager=e(26193),n.LightsPlugin=e(50296),s.exports=n},85305:(s,g,e)=>{var n=e(95723),p=e(56694),f=e(64937),u=e(48129),l=e(81078),a=e(6659),o=e(56631),c=e(71207),h=e(58010),d=e(7599),v=e(17922),m=new p({Extends:c,Mixins:[f.AlphaSingle,f.BlendMode,f.Depth,f.Mask,f.PostPipeline,f.Visible,a,h],initialize:function(C,T){c.call(this,C),a.call(this),this.scene=C,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=C.sys,this.events=C.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(n.SKIP_CHECK),T&&this.add(T),C.sys.queueDepthSort()},setActive:function(y){return this.active=y,this},setName:function(y){return this.name=y,this},setState:function(y){return this.state=y,this},setDataEnabled:function(){return this.data||(this.data=new l(this)),this},setData:function(y,C){return this.data||(this.data=new l(this)),this.data.set(y,C),this},incData:function(y,C){return this.data||(this.data=new l(this)),this.data.inc(y,C),this},toggleData:function(y){return this.data||(this.data=new l(this)),this.data.toggle(y),this},getData:function(y){return this.data||(this.data=new l(this)),this.data.get(y)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return u(this)},willRender:function(y){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&y.id)},getIndexList:function(){for(var y=this,C=this.parentContainer,T=[];C&&(T.unshift(C.getIndex(y)),y=C,C.parentContainer);)C=C.parentContainer;return T.unshift(this.displayList.getIndex(y)),T},addChildCallback:function(y){y.displayList&&y.displayList!==this&&y.removeFromDisplayList(),y.displayList||(this.queueDepthSort(),y.displayList=this,y.emit(o.ADDED_TO_SCENE,y,this.scene),this.events.emit(d.ADDED_TO_SCENE,y,this.scene))},removeChildCallback:function(y){this.queueDepthSort(),y.displayList=null,y.emit(o.REMOVED_FROM_SCENE,y,this.scene),this.events.emit(d.REMOVED_FROM_SCENE,y,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(v(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(y,C){return y._depth-C._depth},getChildren:function(){return this.list},addToDisplayList:function(y){return y===void 0&&(y=this.scene.sys.displayList),this.displayList&&this.displayList!==y&&this.removeFromDisplayList(),y.exists(this)||(this.displayList=y,y.add(this,!0),y.queueDepthSort(),this.emit(o.ADDED_TO_SCENE,this,this.scene),y.events.emit(d.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var y=this.displayList||this.scene.sys.displayList;return y.exists(this)&&(y.remove(this,!0),y.queueDepthSort(),this.displayList=null,this.emit(o.REMOVED_FROM_SCENE,this,this.scene),y.events.emit(d.REMOVED_FROM_SCENE,this,this.scene)),this},destroy:function(y){if(!(!this.scene||this.ignoreDestroy)){this.emit(o.DESTROY,this);for(var C=this.list;C.length;)C[0].destroy(y);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});s.exports=m},834:s=>{var g=function(e,n,p){var f=n.list;if(f.length!==0){n.depthSort();var u=n.blendMode!==-1;u||e.setBlendMode(0);var l=n._alpha;n.mask&&n.mask.preRenderCanvas(e,null,p);for(var a=0;a<f.length;a++){var o=f[a];if(!!o.willRender(p)){var c=o.alpha;!u&&o.blendMode!==e.currentBlendMode&&e.setBlendMode(o.blendMode),o.setAlpha(c*l),o.renderCanvas(e,o,p),o.setAlpha(c)}}n.mask&&n.mask.postRenderCanvas(e)}};s.exports=g},56378:(s,g,e)=>{var n=e(88933),p=e(85305),f=e(99325),u=e(20494);f.register("layer",function(l,a){l===void 0&&(l={});var o=u(l,"children",null),c=new p(this.scene,o);return a!==void 0&&(l.add=a),n(this.scene,c,l),c})},17676:(s,g,e)=>{var n=e(85305),p=e(61286);p.register("layer",function(f){return this.displayList.add(new n(this.scene,f))})},58010:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(17576),f=e(834),s.exports={renderWebGL:p,renderCanvas:f}},17576:s=>{var g=function(e,n,p){var f=n.list,u=f.length;if(u!==0){n.depthSort(),e.pipelines.preBatch(n);var l=n.blendMode!==-1;l||e.setBlendMode(0);for(var a=n.alpha,o=0;o<u;o++){var c=f[o];if(!!c.willRender(p)){var h,d,v,m;if(c.alphaTopLeft!==void 0)h=c.alphaTopLeft,d=c.alphaTopRight,v=c.alphaBottomLeft,m=c.alphaBottomRight;else{var y=c.alpha;h=y,d=y,v=y,m=y}!l&&c.blendMode!==e.currentBlendMode&&e.setBlendMode(c.blendMode);var C=c.mask;C&&C.preRenderWebGL(e,c,p);var T=c.type;T!==e.currentType&&(e.newType=!0,e.currentType=T),e.nextTypeMatch=o<u-1?f[o+1].type===e.currentType:!1,c.setAlpha(h*a,d*a,v*a,m*a),c.renderWebGL(e,c,p),c.setAlpha(h,d,v,m),C&&C.postRenderWebGL(e,p),e.newType=!1}}e.pipelines.postBatch(n)}};s.exports=g},14455:(s,g,e)=>{var n=e(26673),p=e(56694),f=e(64937),u=e(39298),l=e(75512),a=new p({Extends:n,Mixins:[f.Origin,f.ScrollFactor,f.Transform,f.Visible],initialize:function(c,h,d,v,m,y,C){n.call(this,c,h,d),this.color=new u(v,m,y),this.intensity=C,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(d)},displayWidth:{get:function(){return this.diameter},set:function(o){this.diameter=o}},displayHeight:{get:function(){return this.diameter},set:function(o){this.diameter=o}},width:{get:function(){return this.diameter},set:function(o){this.diameter=o}},height:{get:function(){return this.diameter},set:function(o){this.diameter=o}},willRender:function(o){return!(a.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&o.id)},setColor:function(o){var c=l.getFloatsFromUintRGB(o);return this.color.set(c[0],c[1],c[2]),this},setIntensity:function(o){return this.intensity=o,this},setRadius:function(o){return this.radius=o,this}});a.RENDER_MASK=15,s.exports=a},26193:(s,g,e)=>{var n=e(26535),p=e(56694),f=e(53996),u=e(14455),l=e(13171),a=e(39298),o=e(72677),c=e(17922),h=e(75512),d=new p({initialize:function(){this.lights=[],this.ambientColor=new a(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(v,m,y,C,T,P){return this.systems.displayList.add(new l(this.scene,v,m,y,C,T,P))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(v){for(var m=this.lights,y=v.worldView,C=[],T=0;T<m.length;T++){var P=m[T];P.willRender(v)&&n(P,y)&&C.push({light:P,distance:f(P.x,P.y,y.centerX,y.centerY)})}return C.length>this.maxLights&&(c(C,this.sortByDistance),C=C.slice(0,this.maxLights)),this.visibleLights=C.length,C},sortByDistance:function(v,m){return v.distance>=m.distance},setAmbientColor:function(v){var m=h.getFloatsFromUintRGB(v);return this.ambientColor.set(m[0],m[1],m[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(v,m,y,C,T){v===void 0&&(v=0),m===void 0&&(m=0),y===void 0&&(y=128),C===void 0&&(C=16777215),T===void 0&&(T=1);var P=h.getFloatsFromUintRGB(C),S=new u(v,m,y,P[0],P[1],P[2],T);return this.lights.push(S),S},removeLight:function(v){var m=this.lights.indexOf(v);return m>=0&&o(this.lights,m),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});s.exports=d},50296:(s,g,e)=>{var n=e(56694),p=e(26193),f=e(91963),u=e(7599),l=new n({Extends:p,initialize:function(o){this.scene=o,this.systems=o.sys,o.sys.settings.isBooted||o.sys.events.once(u.BOOT,this.boot,this),p.call(this)},boot:function(){var a=this.systems.events;a.on(u.SHUTDOWN,this.shutdown,this),a.on(u.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});f.register("LightsPlugin",l,"lights"),s.exports=l},83321:(s,g,e)=>{var n=e(56694),p=e(64937),f=e(75606),u=e(18693),l=e(89980),a=e(53267),o=e(67623),c=e(73329),h=e(16650),d=e(23464),v=e(23701),m=e(17922),y=e(70015),C=e(85769),T=new n({Extends:l,Mixins:[p.AlphaSingle,p.BlendMode,p.Depth,p.Mask,p.Pipeline,p.PostPipeline,p.ScrollFactor,p.Size,p.Texture,p.Transform,p.Visible,d],initialize:function(S,M,E,A,R,w,O,F,b,I,N,z){M===void 0&&(M=0),E===void 0&&(E=0),A===void 0&&(A="__WHITE"),l.call(this,S,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new y,this.modelScale=new y(1,1,1),this.modelRotation=new y,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new h,this.viewPosition=new y,this.viewMatrix=new h,this.projectionMatrix=new h,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var U=S.sys.renderer;this.setPosition(M,E),this.setTexture(A,R),this.setSize(U.width,U.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(U.width,U.height),w&&this.addVertices(w,O,F,b,I,N,z)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(P){return this.viewPosition.addScale(y.LEFT,P),this.dirtyCache[10]=1,this},panY:function(P){return this.viewPosition.y+=y.DOWN.y*P,this.dirtyCache[10]=1,this},panZ:function(P){return this.viewPosition.z+=P,this.dirtyCache[10]=1,this},setPerspective:function(P,S,M,E,A){return M===void 0&&(M=45),E===void 0&&(E=.01),A===void 0&&(A=1e3),this.fov=M,this.projectionMatrix.perspective(f(M),P/S,E,A),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(P,S,M,E){return P===void 0&&(P=this.scene.sys.renderer.getAspectRatio()),S===void 0&&(S=1),M===void 0&&(M=-1e3),E===void 0&&(E=1e3),this.fov=0,this.projectionMatrix.ortho(-P,P,-S,S,M,E),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(P){P.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(P,S,M,E,A,R,w,O,F){var b=this.scene.sys.cache.obj.get(P),I;return b&&(I=a(b,this,S,M,E,A,R,w,O,F)),(!I||I.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",P),this},sortByDepth:function(P,S){return P.depth-S.depth},depthSort:function(){return m(this.faces,this.sortByDepth),this},addVertex:function(P,S,M,E,A,R,w){var O=new C(P,S,M,E,A,R,w);return this.vertices.push(O),O},addFace:function(P,S,M){var E=new u(P,S,M);return this.faces.push(E),this.dirtyCache[9]=-1,E},addVertices:function(P,S,M,E,A,R,w){var O=o(P,S,M,E,A,R,w);return O?(this.faces=this.faces.concat(O.faces),this.vertices=this.vertices.concat(O.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(P){return this.faces[P]},hasFaceAt:function(P,S,M){M===void 0&&(M=this.scene.sys.cameras.main);for(var E=c(this,M).calc,A=this.faces,R=0;R<A.length;R++){var w=A[R];if(w.contains(P,S,E))return!0}return!1},getFaceAt:function(P,S,M){M===void 0&&(M=this.scene.sys.cameras.main);for(var E=c(this,M).calc,A=this.faces,R=[],w=0;w<A.length;w++){var O=A[w];O.contains(P,S,E)&&R.push(O)}return m(R,this.sortByDepth)},setDebug:function(P,S){return this.debugGraphic=P,!P&&!S?this.debugCallback=null:S?this.debugCallback=S:this.debugCallback=this.renderDebug,this},isDirty:function(){var P=this.modelPosition,S=this.modelRotation,M=this.modelScale,E=this.dirtyCache,A=P.x,R=P.y,w=P.z,O=S.x,F=S.y,b=S.z,I=M.x,N=M.y,z=M.z,U=this.getFaceCount(),W=E[0],D=E[1],V=E[2],L=E[3],B=E[4],G=E[5],Y=E[6],X=E[7],k=E[8],H=E[9];return E[0]=A,E[1]=R,E[2]=w,E[3]=O,E[4]=F,E[5]=b,E[6]=I,E[7]=N,E[8]=z,E[9]=U,W!==A||D!==R||V!==w||L!==O||B!==F||G!==b||Y!==I||X!==N||k!==z||H!==U},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var P=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!P[10]&&!this.isDirty())){var S=this.width,M=this.height,E=this.viewMatrix,A=this.viewPosition;P[10]&&(E.identity(),E.translate(A),E.invert(),P[10]=0);var R=this.transformMatrix;R.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var w=A.z,O=this.faces,F=0;F<O.length;F++)O[F].transformCoordinatesLocal(R,S,M,w);this.depthSort()}},renderDebug:function(P,S){for(var M=P.debugGraphic,E=0;E<S.length;E++){var A=S[E],R=A.vertex1.tx,w=A.vertex1.ty,O=A.vertex2.tx,F=A.vertex2.ty,b=A.vertex3.tx,I=A.vertex3.ty;M.strokeTriangle(R,w,O,F,b,I)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(){var P=this.faces,S=function(M,E,A){for(var R=0;R<P.length;R++){var w=P[R];if(w.contains(E,A))return!0}return!1};return this.scene.sys.input.enable(this,S),this},setTint:function(P){P===void 0&&(P=16777215);for(var S=this.vertices,M=0;M<S.length;M++)S[M].color=P;return this},uvScroll:function(P,S){for(var M=this.faces,E=0;E<M.length;E++)M[E].scrollUV(P,S);return this},uvScale:function(P,S){for(var M=this.faces,E=0;E<M.length;E++)M[E].scaleUV(P,S);return this},tint:{set:function(P){this.setTint(P)}},rotateX:{get:function(){return v(this.modelRotation.x)},set:function(P){this.modelRotation.x=f(P)}},rotateY:{get:function(){return v(this.modelRotation.y)},set:function(P){this.modelRotation.y=f(P)}},rotateZ:{get:function(){return v(this.modelRotation.z)},set:function(P){this.modelRotation.z=f(P)}}});s.exports=T},6317:s=>{var g=function(){};s.exports=g},41839:(s,g,e)=>{var n=e(88933),p=e(99325),f=e(20494),u=e(10850),l=e(83321);p.register("mesh",function(a,o){a===void 0&&(a={});var c=f(a,"key",null),h=f(a,"frame",null),d=u(a,"vertices",[]),v=u(a,"uvs",[]),m=u(a,"indicies",[]),y=u(a,"containsZ",!1),C=u(a,"normals",[]),T=u(a,"colors",16777215),P=u(a,"alphas",1),S=new l(this.scene,0,0,c,h,d,v,m,y,C,T,P);return o!==void 0&&(a.add=o),n(this.scene,S,a),S})},8767:(s,g,e)=>{var n=e(83321),p=e(61286);p.register("mesh",function(f,u,l,a,o,c,h,d,v,m,y){return this.displayList.add(new n(this.scene,f,u,l,a,o,c,h,d,v,m,y))})},23464:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(57410),f=e(6317),s.exports={renderWebGL:p,renderCanvas:f}},57410:(s,g,e)=>{var n=e(73329),p=function(f,u,l,a){var o=u.faces,c=o.length;if(c!==0){l.addToRenderList(u);var h=f.pipelines.set(u.pipeline,u),d=n(u,l,a).calc;f.pipelines.preBatch(u);for(var v=h.setGameObject(u),m=h.vertexViewF32,y=h.vertexViewU32,C=h.vertexCount*h.currentShader.vertexComponentCount-1,T=u.tintFill,P=[],S=u.debugCallback,M=d.a,E=d.b,A=d.c,R=d.d,w=d.e,O=d.f,F=u.viewPosition.z,b=u.hideCCW,I=l.roundPixels,N=l.alpha*u.alpha,z=0,U=0;U<c;U++){var W=o[U];!W.isInView(l,b,F,N,M,E,A,R,w,O,I)||(h.shouldFlush(3)&&(h.flush(),v=h.setGameObject(u),C=0),C=W.load(m,y,C,v,T),z++,h.vertexCount+=3,h.currentBatch.count=h.vertexCount-h.currentBatch.start,S&&P.push(W))}u.totalFrame+=z,S&&S.call(u,u,P),f.pipelines.postBatch(u)}};s.exports=p},44139:(s,g,e)=>{var n=e(56694),p=e(64937),f=e(89980),u=e(94456),l=e(85769),a=new n({Extends:f,Mixins:[p.AlphaSingle,p.BlendMode,p.Depth,p.GetBounds,p.Mask,p.Origin,p.Pipeline,p.PostPipeline,p.ScrollFactor,p.Texture,p.Transform,p.Visible,u],initialize:function(c,h,d,v,m,y,C,T,P,S,M){y===void 0&&(y=256),C===void 0&&(C=256),T===void 0&&(T=10),P===void 0&&(P=10),S===void 0&&(S=0),M===void 0&&(M=0),f.call(this,c,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1,this.is3Slice=S===0&&M===0;for(var E=this.is3Slice?18:54,A=0;A<E;A++)this.vertices.push(new l);this.setPosition(h,d),this.setTexture(v,m),this.setSlices(y,C,T,P,S,M),this.setOrigin(.5,.5),this.initPipeline(),this.initPostPipeline()},setSlices:function(o,c,h,d,v,m){o===void 0&&(o=256),c===void 0&&(c=256),h===void 0&&(h=10),d===void 0&&(d=10),v===void 0&&(v=0),m===void 0&&(m=0);var y=v===0&&m===0;return this.is3Slice!==y?console.warn("Cannot change 9 slice to 3 slice"):(this._width=o,this._height=c,this.leftWidth=h,this.rightWidth=d,this.topHeight=v,this.bottomHeight=m,this.is3Slice&&(c=this.frame.height,this._height=c,this.topHeight=c,this.bottomHeight=0),this.updateVertices(),this.updateUVs()),this},updateUVs:function(){var o=this.leftWidth,c=this.rightWidth,h=this.topHeight,d=this.bottomHeight,v=this.frame.width,m=this.frame.height;this.updateQuadUVs(0,0,0,o/v,h/m),this.updateQuadUVs(6,o/v,0,1-c/v,h/m),this.updateQuadUVs(12,1-c/v,0,1,h/m),this.is3Slice||(this.updateQuadUVs(18,0,h/m,o/v,1-d/m),this.updateQuadUVs(24,o/v,h/m,1-c/v,1-d/m),this.updateQuadUVs(30,1-c/v,h/m,1,1-d/m),this.updateQuadUVs(36,0,1-d/m,o/v,1),this.updateQuadUVs(42,o/v,1-d/m,1-c/v,1),this.updateQuadUVs(48,1-c/v,1-d/m,1,1))},updateVertices:function(){var o=this.leftWidth,c=this.rightWidth,h=this.topHeight,d=this.bottomHeight,v=this.width,m=this.height;this.updateQuad(0,-.5,.5,-.5+o/v,.5-h/m),this.updateQuad(6,-.5+o/v,.5,.5-c/v,.5-h/m),this.updateQuad(12,.5-c/v,.5,.5,.5-h/m),this.is3Slice||(this.updateQuad(18,-.5,.5-h/m,-.5+o/v,-.5+d/m),this.updateQuad(24,-.5+o/v,.5-h/m,.5-c/v,-.5+d/m),this.updateQuad(30,.5-c/v,.5-h/m,.5,-.5+d/m),this.updateQuad(36,-.5,-.5+d/m,-.5+o/v,-.5),this.updateQuad(42,-.5+o/v,-.5+d/m,.5-c/v,-.5),this.updateQuad(48,.5-c/v,-.5+d/m,.5,-.5))},updateQuad:function(o,c,h,d,v){var m=this.width,y=this.height,C=this.originX,T=this.originY,P=this.vertices;P[o+0].resize(c,h,m,y,C,T),P[o+1].resize(c,v,m,y,C,T),P[o+2].resize(d,h,m,y,C,T),P[o+3].resize(c,v,m,y,C,T),P[o+4].resize(d,v,m,y,C,T),P[o+5].resize(d,h,m,y,C,T)},updateQuadUVs:function(o,c,h,d,v){var m=this.vertices,y=this.frame,C=y.u0,T=y.v0,P=y.u1,S=y.v1;if(C!==0||P!==1){var M=P-C;c=C+c*M,d=C+d*M}if(T!==0||S!==1){var E=S-T;h=T+h*E,v=T+v*E}m[o+0].setUVs(c,h),m[o+1].setUVs(c,v),m[o+2].setUVs(d,h),m[o+3].setUVs(c,v),m[o+4].setUVs(d,v),m[o+5].setUVs(d,h)},clearTint:function(){return this.setTint(16777215),this},setTint:function(o){return o===void 0&&(o=16777215),this.tint=o,this.tintFill=!1,this},setTintFill:function(o){return this.setTint(o),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(o){this._width=Math.max(o,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(o){this.is3Slice||(this._height=Math.max(o,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(o){this.scaleX=o/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(o){this.scaleY=o/this.height}},setSize:function(o,c){this.width=o,this.height=c;var h=this.input;return h&&!h.customHitArea&&(h.hitArea.width=this.width,h.hitArea.height=this.height),this},setDisplaySize:function(o,c){return this.displayWidth=o,this.displayHeight=c,this},originX:{get:function(){return this._originX},set:function(o){this._originX=o,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(o){this._originY=o,this.updateVertices()}},setOrigin:function(o,c){return o===void 0&&(o=.5),c===void 0&&(c=o),this._originX=o,this._originY=c,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var o=this.frame.height;this._height=o,this.topHeight=o,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});s.exports=a},40964:(s,g,e)=>{var n=e(88933),p=e(99325),f=e(20494),u=e(10850),l=e(44139);p.register("nineslice",function(a,o){a===void 0&&(a={});var c=f(a,"key",null),h=f(a,"frame",null),d=u(a,"width",256),v=u(a,"height",256),m=u(a,"leftWidth",10),y=u(a,"rightWidth",10),C=u(a,"topHeight",0),T=u(a,"bottomHeight",0),P=new l(this.scene,0,0,c,h,d,v,m,y,C,T);return o!==void 0&&(a.add=o),n(this.scene,P,a),P})},53778:(s,g,e)=>{var n=e(44139),p=e(61286);p.register("nineslice",function(f,u,l,a,o,c,h,d,v,m){return this.displayList.add(new n(this.scene,f,u,l,a,o,c,h,d,v,m))})},94456:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(27420),s.exports={renderWebGL:p,renderCanvas:f}},27420:(s,g,e)=>{var n=e(73329),p=e(75512),f=function(u,l,a,o){var c=l.vertices,h=c.length;if(h!==0){a.addToRenderList(l);var d=u.pipelines.set(l.pipeline,l),v=n(l,a,o,!1).calc;u.pipelines.preBatch(l);var m=d.setGameObject(l),y=d.vertexViewF32,C=d.vertexViewU32,T=d.vertexCount*d.currentShader.vertexComponentCount-1,P=a.roundPixels,S=l.tintFill,M=a.alpha*l.alpha,E=p.getTintAppendFloatAlpha(l.tint,M),A=d.vertexAvailable(),R=-1;A<h&&(R=A);for(var w=0;w<h;w++){var O=c[w];w===R&&(d.flush(),m=d.setGameObject(l),T=0),y[++T]=v.getXRound(O.vx,O.vy,P),y[++T]=v.getYRound(O.vx,O.vy,P),y[++T]=O.u,y[++T]=O.v,y[++T]=m,y[++T]=S,C[++T]=E,d.vertexCount++,d.currentBatch.count=d.vertexCount-d.currentBatch.start}u.pipelines.postBatch(l)}};s.exports=f},19737:(s,g,e)=>{var n=e(56694),p=e(93025),f=e(22946),u=e(21902),l=e(4840),a=e(15978),o=new n({Extends:p,initialize:function(h){p.call(this,h,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var c=this.propertyValue,h=c,d=this.defaultEmit,v=this.defaultUpdate;if(this.method===9){this.start=c[0],this.ease=u("Linear"),this.interpolation=l("linear"),d=this.easedValueEmit,v=this.easeValueUpdate,h=c[0],this.active=!0;for(var m=0;m<c.length;m++){var y=a(c[m]);this.r.push(y.r),this.g.push(y.g),this.b.push(y.b)}}return this.onEmit=d,this.onUpdate=v,this.current=h,this},setEase:function(c){this.easeName=c,this.ease=u(c)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(c,h,d){var v=this.ease(d),m=this.interpolation(this.r,v),y=this.interpolation(this.g,v),C=this.interpolation(this.b,v),T=f(m,y,C);return this.current=T,T}});s.exports=o},93025:(s,g,e)=>{var n=e(17489),p=e(82897),f=e(56694),u=e(61616),l=e(21902),a=e(72632),o=e(4840),c=e(88462),h=e(1071),d=new f({initialize:function(m,y,C){C===void 0&&(C=!1),this.propertyKey=m,this.propertyValue=y,this.defaultValue=y,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=C,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(v,m){v===void 0&&(v={}),m&&(this.propertyKey=m),this.propertyValue=a(v,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(v){var m;switch(this.method){case 1:case 3:case 8:m=v;break;case 2:this.propertyValue.indexOf(v)>=0&&(m=v);break;case 4:var y=(this.end-this.start)/this.steps;m=c(v,y),this.counter=m;break;case 5:case 6:case 7:m=p(v,this.start,this.end);break;case 9:m=this.start[0];break}return this.current=m,this},getMethod:function(){var v=this.propertyValue;if(v===null)return 0;var m=typeof v;if(m==="number")return 1;if(Array.isArray(v))return 2;if(m==="function")return 3;if(m==="object"){if(this.hasBoth(v,"start","end"))return this.has(v,"steps")?4:5;if(this.hasBoth(v,"min","max"))return 6;if(this.has(v,"random"))return 7;if(this.hasEither(v,"onEmit","onUpdate"))return 8;if(this.has(v,"interpolation"))return 9}return 0},setMethods:function(){var v=this.propertyValue,m=v,y=this.defaultEmit,C=this.defaultUpdate;switch(this.method){case 1:y=this.staticValueEmit;break;case 2:y=this.randomStaticValueEmit,m=v[0];break;case 3:this._onEmit=v,y=this.proxyEmit;break;case 4:this.start=v.start,this.end=v.end,this.steps=v.steps,this.counter=this.start,this.yoyo=this.has(v,"yoyo")?v.yoyo:!1,this.direction=0,y=this.steppedEmit,m=this.start;break;case 5:this.start=v.start,this.end=v.end;var T=this.has(v,"ease")?v.ease:"Linear";this.ease=l(T,v.easeParams),y=this.has(v,"random")&&v.random?this.randomRangedValueEmit:this.easedValueEmit,C=this.easeValueUpdate,m=this.start;break;case 6:this.start=v.min,this.end=v.max,y=this.has(v,"int")&&v.int?this.randomRangedIntEmit:this.randomRangedValueEmit,m=this.start;break;case 7:var P=v.random;Array.isArray(P)&&(this.start=P[0],this.end=P[1]),y=this.randomRangedIntEmit,m=this.start;break;case 8:this._onEmit=this.has(v,"onEmit")?v.onEmit:this.defaultEmit,this._onUpdate=this.has(v,"onUpdate")?v.onUpdate:this.defaultUpdate,y=this.proxyEmit,C=this.proxyUpdate;break;case 9:this.start=v.values;var S=this.has(v,"ease")?v.ease:"Linear";this.ease=l(S,v.easeParams),this.interpolation=o(v.interpolation),y=this.easedValueEmit,C=this.easeValueUpdate,m=this.start[0];break}return this.onEmit=y,this.onUpdate=C,this.current=m,this},has:function(v,m){return v.hasOwnProperty(m)},hasBoth:function(v,m,y){return v.hasOwnProperty(m)&&v.hasOwnProperty(y)},hasEither:function(v,m,y){return v.hasOwnProperty(m)||v.hasOwnProperty(y)},defaultEmit:function(v,m,y){return y},defaultUpdate:function(v,m,y,C){return C},proxyEmit:function(v,m,y){var C=this._onEmit(v,m,y);return this.current=C,C},proxyUpdate:function(v,m,y,C){var T=this._onUpdate(v,m,y,C);return this.current=T,T},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var v=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[v],this.current},randomRangedValueEmit:function(v,m){var y=u(this.start,this.end);return v&&v.data[m]&&(v.data[m].min=y,v.data[m].max=this.end),this.current=y,y},randomRangedIntEmit:function(v,m){var y=n(this.start,this.end);return v&&v.data[m]&&(v.data[m].min=y,v.data[m].max=this.end),this.current=y,y},steppedEmit:function(){var v=this.counter,m=v,y=(this.end-this.start)/this.steps;if(this.yoyo){var C;this.direction===0?(m+=y,m>=this.end&&(C=m-this.end,m=this.end-C,this.direction=1)):(m-=y,m<=this.start&&(C=this.start-m,m=this.start+C,this.direction=0)),this.counter=m}else this.counter=h(m+y,this.start,this.end);return this.current=v,v},easedValueEmit:function(v,m){if(v&&v.data[m]){var y=v.data[m];y.min=this.start,y.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(v,m,y){var C=v.data[m],T,P=this.ease(y);return this.interpolation?T=this.interpolation(this.start,P):T=(C.max-C.min)*P+C.min,this.current=T,T},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});s.exports=d},87811:(s,g,e)=>{var n=e(56694),p=e(72632),f=e(30891),u=new n({Extends:f,initialize:function(a,o,c,h,d){if(typeof a=="object"){var v=a;a=p(v,"x",0),o=p(v,"y",0),c=p(v,"power",0),h=p(v,"epsilon",100),d=p(v,"gravity",50)}else a===void 0&&(a=0),o===void 0&&(o=0),c===void 0&&(c=0),h===void 0&&(h=100),d===void 0&&(d=50);f.call(this,a,o,!0),this._gravity=d,this._power=c*d,this._epsilon=h*h},update:function(l,a){var o=this.x-l.x,c=this.y-l.y,h=o*o+c*c;if(h!==0){var d=Math.sqrt(h);h<this._epsilon&&(h=this._epsilon);var v=this._power*a/(h*d)*100;l.velocityX+=o*v,l.velocityY+=c*v}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(l){this._epsilon=l*l}},power:{get:function(){return this._power/this._gravity},set:function(l){this._power=l*this._gravity}},gravity:{get:function(){return this._gravity},set:function(l){var a=this.power;this._gravity=l,this.power=a}}});s.exports=u},14909:(s,g,e)=>{var n=e(16569),p=e(82897),f=e(56694),u=e(75606),l=e(74118),a=e(2386),o=e(93736),c=new f({initialize:function(d){this.emitter=d,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new o,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=d.scene,this.anims=new n(this),this.bounds=new l},emit:function(h,d,v,m,y,C){return this.emitter.emit(h,d,v,m,y,C)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(h,d){h===void 0&&(h=0),d===void 0&&(d=0),this.x=h,this.y=d},fire:function(h,d){var v=this.emitter,m=v.ops,y=v.getAnim();if(y?this.anims.play(y):(this.frame=v.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(v.getEmitZone(this),h===void 0?this.x+=m.x.onEmit(this,"x"):m.x.steps>0?this.x+=h+m.x.onEmit(this,"x"):this.x+=h,d===void 0?this.y+=m.y.onEmit(this,"y"):m.y.steps>0?this.y+=d+m.y.onEmit(this,"y"):this.y+=d,this.life=m.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=m.delay.onEmit(this,"delay"),this.holdCurrent=m.hold.onEmit(this,"hold"),this.scaleX=m.scaleX.onEmit(this,"scaleX"),this.scaleY=m.scaleY.active?m.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=m.rotate.onEmit(this,"rotate"),this.rotation=u(this.angle),v.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&v.getDeathZone(this))return this.lifeCurrent=0,!1;var C=m.speedX.onEmit(this,"speedX"),T=m.speedY.active?m.speedY.onEmit(this,"speedY"):C;if(v.radial){var P=u(m.angle.onEmit(this,"angle"));this.velocityX=Math.cos(P)*Math.abs(C),this.velocityY=Math.sin(P)*Math.abs(T)}else if(v.moveTo){var S=m.moveToX.onEmit(this,"moveToX"),M=m.moveToY.onEmit(this,"moveToY"),E=this.life/1e3;this.velocityX=(S-this.x)/E,this.velocityY=(M-this.y)/E}else this.velocityX=C,this.velocityY=T;return v.acceleration&&(this.accelerationX=m.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=m.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=m.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=m.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=m.bounce.onEmit(this,"bounce"),this.alpha=m.alpha.onEmit(this,"alpha"),m.color.active?this.tint=m.color.onEmit(this,"tint"):this.tint=m.tint.onEmit(this,"tint"),!0},update:function(h,d,v){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=h,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=h,!1;this.anims.update(0,h);var m=this.emitter,y=m.ops,C=1-this.lifeCurrent/this.life;if(this.lifeT=C,this.x=y.x.onUpdate(this,"x",C,this.x),this.y=y.y.onUpdate(this,"y",C,this.y),m.moveTo){var T=y.moveToX.onUpdate(this,"moveToX",C,m.moveToX),P=y.moveToY.onUpdate(this,"moveToY",C,m.moveToY),S=this.lifeCurrent/1e3;this.velocityX=(T-this.x)/S,this.velocityY=(P-this.y)/S}return this.computeVelocity(m,h,d,v,C),this.scaleX=y.scaleX.onUpdate(this,"scaleX",C,this.scaleX),this.scaleY=this.scaleX,y.scaleY.active&&(this.scaleY=y.scaleY.onUpdate(this,"scaleY",C,this.scaleY)),this.angle=y.rotate.onUpdate(this,"rotate",C,this.angle),this.rotation=u(this.angle),m.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=y.alpha.onUpdate(this,"alpha",C,this.alpha),y.color.active?this.tint=y.color.onUpdate(this,"color",C,this.tint):this.tint=y.tint.onUpdate(this,"tint",C,this.tint),this.lifeCurrent-=h,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(h,d,v,m,y){var C=h.ops,T=this.velocityX,P=this.velocityY,S=C.accelerationX.onUpdate(this,"accelerationX",y,this.accelerationX),M=C.accelerationY.onUpdate(this,"accelerationY",y,this.accelerationY),E=C.maxVelocityX.onUpdate(this,"maxVelocityX",y,this.maxVelocityX),A=C.maxVelocityY.onUpdate(this,"maxVelocityY",y,this.maxVelocityY);this.bounce=C.bounce.onUpdate(this,"bounce",y,this.bounce),T+=h.gravityX*v+S*v,P+=h.gravityY*v+M*v,T=p(T,-E,E),P=p(P,-A,A),this.velocityX=T,this.velocityY=P,this.x+=T*v,this.y+=P*v,h.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var R=0;R<m.length;R++){var w=m[R];w.active&&w.update(this,d,v,y)}},setSizeToFrame:function(){},getBounds:function(h){h===void 0&&(h=this.emitter.getWorldTransformMatrix());var d=Math.abs(h.scaleX)*this.scaleX,v=Math.abs(h.scaleY)*this.scaleY,m=this.x,y=this.y,C=this.rotation,T=this.frame.width*d/2,P=this.frame.height*v/2,S=this.bounds,M=new o(m-T,y-P),E=new o(m+T,y-P),A=new o(m-T,y+P),R=new o(m+T,y+P);return C!==0&&(a(M,m,y,C),a(E,m,y,C),a(A,m,y,C),a(R,m,y,C)),h.transformPoint(M.x,M.y,M),h.transformPoint(E.x,E.y,E),h.transformPoint(A.x,A.y,A),h.transformPoint(R.x,R.y,R),S.x=Math.min(M.x,E.x,A.x,R.x),S.y=Math.min(M.y,E.y,A.y,R.y),S.width=Math.max(M.x,E.x,A.x,R.x)-S.x,S.height=Math.max(M.y,E.y,A.y,R.y)-S.y,S},destroy:function(){this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});s.exports=c},73106:(s,g,e)=>{var n=e(56694),p=e(30891),f=e(74118),u=new n({Extends:p,initialize:function(a,o,c,h,d,v,m,y){d===void 0&&(d=!0),v===void 0&&(v=!0),m===void 0&&(m=!0),y===void 0&&(y=!0),p.call(this,a,o,!0),this.bounds=new f(a,o,c,h),this.collideLeft=d,this.collideRight=v,this.collideTop=m,this.collideBottom=y},update:function(l){var a=this.bounds,o=-l.bounce,c=l.worldPosition;c.x<a.x&&this.collideLeft?(l.x+=a.x-c.x,l.velocityX*=o):c.x>a.right&&this.collideRight&&(l.x-=c.x-a.right,l.velocityX*=o),c.y<a.y&&this.collideTop?(l.y+=a.y-c.y,l.velocityY*=o):c.y>a.bottom&&this.collideBottom&&(l.y-=c.y-a.bottom,l.velocityY*=o)}});s.exports=u},9216:(s,g,e)=>{var n=e(56694),p=e(64937),f=e(48129),u=e(29538),l=e(69361),a=e(54213),o=e(19737),c=e(93025),h=e(40629),d=e(89980),v=e(72632),m=e(72861),y=e(87811),C=e(53523),T=e(19256),P=e(7782),S=e(71207),M=e(14655),E=e(14909),A=e(68433),R=e(74118),w=e(90205),O=e(66458),F=e(69116),b=e(17922),I=e(69360),N=e(93736),z=e(1071),U=e(73106),W=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],D=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],V=new n({Extends:d,Mixins:[p.AlphaSingle,p.BlendMode,p.Depth,p.Mask,p.Pipeline,p.PostPipeline,p.ScrollFactor,p.Texture,p.Transform,p.Visible,F],initialize:function(B,G,Y,X,k){d.call(this,B,"ParticleEmitter"),this.particleClass=E,this.ops={accelerationX:new c("accelerationX",0),accelerationY:new c("accelerationY",0),alpha:new c("alpha",1),angle:new c("angle",{min:0,max:360},!0),bounce:new c("bounce",0),color:new o("color"),delay:new c("delay",0,!0),hold:new c("hold",0,!0),lifespan:new c("lifespan",1e3,!0),maxVelocityX:new c("maxVelocityX",1e4),maxVelocityY:new c("maxVelocityY",1e4),moveToX:new c("moveToX",0),moveToY:new c("moveToY",0),quantity:new c("quantity",1,!0),rotate:new c("rotate",0),scaleX:new c("scaleX",1),scaleY:new c("scaleY",1),speedX:new c("speedX",0,!0),speedY:new c("speedY",0,!0),tint:new c("tint",16777215),x:new c("x",0),y:new c("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new N,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new I,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new S(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(G,Y),this.setTexture(X),k&&this.setConfig(k)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(L){if(!L)return this;var B=0,G="",Y=this.ops;for(B=0;B<D.length;B++)G=D[B],Y[G].loadConfig(L);for(B=0;B<W.length;B++)G=W[B],T(L,G)&&(this[G]=v(L,G));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=this.moveToX!==0&&this.moveToY!==0,T(L,"speed")&&(Y.speedX.loadConfig(L,"speed"),Y.speedY.active=!1),(C(L,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),T(L,"scale")&&(Y.scaleX.loadConfig(L,"scale"),Y.scaleY.active=!1),T(L,"callbackScope")){var X=v(L,"callbackScope",null);this.emitCallbackScope=X,this.deathCallbackScope=X}if(T(L,"emitZone")&&this.addEmitZone(L.emitZone),T(L,"deathZone")&&this.addDeathZone(L.deathZone),T(L,"bounds")){var k=this.addParticleBounds(L.bounds);k.collideLeft=v(L,"collideLeft",!0),k.collideRight=v(L,"collideRight",!0),k.collideTop=v(L,"collideTop",!0),k.collideBottom=v(L,"collideBottom",!0)}return T(L,"followOffset")&&this.followOffset.setFromObject(v(L,"followOffset",0)),T(L,"texture")&&this.setTexture(L.texture),T(L,"frame")?this.setEmitterFrame(L.frame):T(L,"anim")&&this.setAnim(L.anim),T(L,"reserve")&&this.reserve(L.reserve),T(L,"advance")&&this.fastForward(L.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(h.START,this),this},toJSON:function(){var L=f(this),B=0,G="";for(B=0;B<W.length;B++)G=W[B],L[G]=this[G];var Y=this.ops;for(B=0;B<D.length;B++)G=D[B],Y[G]&&(L[G]=Y[G].toJSON());return Y.speedY.active||(delete L.speedX,L.speed=Y.speedX.toJSON()),this.scaleX===this.scaleY&&(delete L.scaleX,delete L.scaleY,L.scale=Y.scaleX.toJSON()),L},resetCounters:function(L,B){var G=this.counters;G.fill(0),G[0]=L,B&&(G[5]=1)},startFollow:function(L,B,G,Y){return B===void 0&&(B=0),G===void 0&&(G=0),Y===void 0&&(Y=!1),this.follow=L,this.followOffset.set(B,G),this.trackVisible=Y,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var L=this.frames,B=L.length,G;return B===1?G=L[0]:this.randomFrame?G=m(L):(G=L[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===B&&(this.currentFrame=0))),this.texture.get(G)},setEmitterFrame:function(L,B,G){B===void 0&&(B=!0),G===void 0&&(G=1),this.randomFrame=B,this.frameQuantity=G,this.currentFrame=0;var Y=typeof L;if(this.frames.length=0,Array.isArray(L))this.frames=this.frames.concat(L);else if(Y==="string"||Y==="number")this.frames.push(L);else if(Y==="object"){var X=L;L=v(X,"frames",null),L&&(this.frames=this.frames.concat(L));var k=v(X,"cycle",!1);this.randomFrame=!k,this.frameQuantity=v(X,"quantity",G)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var L=this.anims,B=L.length;if(B===0)return null;if(B===1)return L[0];if(this.randomAnim)return m(L);var G=L[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=z(this.currentAnim+1,0,B-1)),G},setAnim:function(L,B,G){B===void 0&&(B=!0),G===void 0&&(G=1),this.randomAnim=B,this.animQuantity=G,this.currentAnim=0;var Y=typeof L;if(this.anims.length=0,Array.isArray(L))this.anims=this.anims.concat(L);else if(Y==="string")this.anims.push(L);else if(Y==="object"){var X=L;L=v(X,"anims",null),L&&(this.anims=this.anims.concat(L));var k=v(X,"cycle",!1);this.randomAnim=!k,this.animQuantity=v(X,"quantity",G)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(L){return L===void 0&&(L=!0),this.radial=L,this},addParticleBounds:function(L,B,G,Y,X,k,H,K){if(typeof L=="object"){var j=L;L=j.x,B=j.y,G=T(j,"w")?j.w:j.width,Y=T(j,"h")?j.h:j.height}return this.addParticleProcessor(new U(L,B,G,Y,X,k,H,K))},setParticleSpeed:function(L,B){return B===void 0&&(B=L),this.ops.speedX.onChange(L),L===B?this.ops.speedY.active=!1:this.ops.speedY.onChange(B),this.radial=!0,this},setParticleScale:function(L,B){return L===void 0&&(L=1),B===void 0&&(B=L),this.ops.scaleX.onChange(L),this.ops.scaleY.onChange(B),this},setParticleGravity:function(L,B){return this.gravityX=L,this.gravityY=B,this},setParticleAlpha:function(L){return this.ops.alpha.onChange(L),this},setParticleTint:function(L){return this.ops.tint.onChange(L),this},setEmitterAngle:function(L){return this.ops.angle.onChange(L),this},setParticleLifespan:function(L){return this.ops.lifespan.onChange(L),this},setQuantity:function(L){return this.quantity=L,this},setFrequency:function(L,B){return this.frequency=L,this.flowCounter=L>0?L:0,B&&(this.quantity=B),this},addDeathZone:function(L){Array.isArray(L)||(L=[L]);for(var B,G=this.deathZones,Y=0;Y<L.length;Y++)if(B=L[Y],B instanceof l)G.push(B);else if(typeof B.contains=="function")B=new l(B,!0),G.push(B);else{var X=v(B,"type","onEnter"),k=v(B,"source",null);if(k&&typeof k.contains=="function"){var H=X==="onEnter";B=new l(k,H),G.push(B)}}return B},removeDeathZone:function(L){return O(this.deathZones,L),this},addEmitZone:function(L){Array.isArray(L)||(L=[L]);for(var B,G=this.emitZones,Y=[],X=0;X<L.length;X++){if(B=L[X],B instanceof A||B instanceof a)G.push(B);else{var k=v(B,"type","random"),H=v(B,"source",null);if(k==="random")B=new A(H);else if(k==="edge"){var K=v(B,"quantity",1),j=v(B,"stepRate",0),$=v(B,"yoyo",!1),Q=v(B,"seamless",!0),_=v(B,"total",-1);B=new a(H,K,j,$,Q,_)}B&&G.push(B)}Y.push(B)}return Y},removeEmitZone:function(L){return O(this.emitZones,L),this.zoneIndex=0,this},getEmitZone:function(L){var B=this.emitZones,G=B.length;if(G!==0){var Y=B[this.zoneIndex];Y.getPoint(L),Y.total>-1&&(this.zoneTotal++,this.zoneTotal===Y.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===G&&(this.zoneIndex=0)))}},getDeathZone:function(L){for(var B=this.deathZones,G=0;G<B.length;G++){var Y=B[G];if(Y.willKill(L))return this.emit(h.DEATH_ZONE,this,L,Y),!0}return!1},setEmitZone:function(L){var B;return isFinite(L)?B=L:B=this.emitZones.indexOf(L),B>=0&&(this.zoneIndex=B),this},addParticleProcessor:function(L){return this.processors.exists(L)||(L.emitter&&L.emitter.removeParticleProcessor(L),this.processors.add(L),L.emitter=this),L},removeParticleProcessor:function(L){return this.processors.exists(L)&&(this.processors.remove(L,!0),L.emitter=null),L},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(L){return this.addParticleProcessor(new y(L))},reserve:function(L){var B=this.dead;if(this.maxParticles>0){var G=this.getParticleCount();G+L>this.maxParticles&&(L=this.maxParticles-(G+L))}for(var Y=0;Y<L;Y++)B.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(L,B){return L===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof L=="function"&&(this.emitCallback=L,B&&(this.emitCallbackScope=B)),this},onParticleDeath:function(L,B){return L===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof L=="function"&&(this.deathCallback=L,B&&(this.deathCallbackScope=B)),this},killAll:function(){for(var L=this.dead,B=this.alive;B.length>0;)L.push(B.pop());return this},forEachAlive:function(L,B){for(var G=this.alive,Y=G.length,X=0;X<Y;X++)L.call(B,G[X],this);return this},forEachDead:function(L,B){for(var G=this.dead,Y=G.length,X=0;X<Y;X++)L.call(B,G[X],this);return this},start:function(L,B){return L===void 0&&(L=0),this.emitting||(L>0&&this.fastForward(L),this.emitting=!0,this.resetCounters(this.frequency,!0),B!==void 0&&(this.duration=Math.abs(B)),this.emit(h.START,this)),this},stop:function(L){return L===void 0&&(L=!1),this.emitting&&(this.emitting=!1,L&&this.killAll(),this.emit(h.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(L,B){return L===void 0&&(L=""),B===void 0&&(B=this.true),this.sortProperty=L,this.sortOrderAsc=B,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(L){return this.sortProperty!==""?L=this.depthSortCallback:L=null,this.sortCallback=L,this},depthSort:function(){return b(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(L,B){var G=this.sortProperty;return this.sortOrderAsc?L[G]-B[G]:B[G]-L[G]},flow:function(L,B,G){return B===void 0&&(B=1),this.emitting=!1,this.frequency=L,this.quantity=B,G!==void 0&&(this.stopAfter=G),this.start()},explode:function(L,B,G){this.frequency=-1,this.resetCounters(-1,!0);var Y=this.emitParticle(L,B,G);return this.emit(h.EXPLODE,this,Y),Y},emitParticleAt:function(L,B,G){return this.emitParticle(G,L,B)},emitParticle:function(L,B,G){if(!this.atLimit()){L===void 0&&(L=this.ops.quantity.onEmit());for(var Y=this.dead,X=this.stopAfter,k=this.follow?this.follow.x+this.followOffset.x:B,H=this.follow?this.follow.y+this.followOffset.y:G,K=0;K<L;K++){var j=Y.pop();if(j||(j=new this.particleClass(this)),j.fire(k,H)?(this.particleBringToTop?this.alive.push(j):this.alive.unshift(j),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,j,this)):this.dead.push(j),X>0&&(this.stopCounter++,this.stopCounter>=X)||this.atLimit())break}return j}},fastForward:function(L,B){B===void 0&&(B=1e3/60);var G=0;for(this.skipping=!0;G<Math.abs(L);)this.preUpdate(0,B),G+=B;return this.skipping=!1,this},preUpdate:function(L,B){B*=this.timeScale;var G=B/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var Y=this.getProcessors(),X=this.alive,k=this.dead,H=0,K=[],j=X.length;for(H=0;H<j;H++){var $=X[H];$.update(B,G,Y)&&K.push({index:H,particle:$})}if(j=K.length,j>0){var Q=this.deathCallback,_=this.deathCallbackScope;for(H=j-1;H>=0;H--){var q=K[H];X.splice(q.index,1),k.push(q.particle),Q&&Q.call(_,q.particle),q.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&X.length===0&&(this.completeFlag=0,this.emit(h.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=B;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=B,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(L){for(var B=this.getWorldTransformMatrix(),G=this.alive,Y=G.length,X=[],k=0;k<Y;k++){var H=G[k];w(L,H.getBounds(B))&&X.push(H)}return X},getBounds:function(L,B,G,Y){L===void 0&&(L=0),B===void 0&&(B=0),G===void 0&&(G=1e3/60),Y===void 0&&(Y=new R);var X=this.getWorldTransformMatrix(),k,H,K=this.alive,j=!1;if(Y.setTo(0,0,0,0),B>0){var $=0;for(this.skipping=!0;$<Math.abs(B);){for(this.preUpdate(0,G),k=0;k<K.length;k++)H=K[k].getBounds(X),j?M(Y,H):(j=!0,u(H,Y));$+=G}this.skipping=!1}else for(k=0;k<K.length;k++)H=K[k].getBounds(X),j?M(Y,H):(j=!0,u(H,Y));return L>0&&P(Y,L,L),Y},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(L){this.ops.x.onChange(L)}},particleY:{get:function(){return this.ops.y.current},set:function(L){this.ops.y.onChange(L)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(L){this.ops.accelerationX.onChange(L)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(L){this.ops.accelerationY.onChange(L)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(L){this.ops.maxVelocityX.onChange(L)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(L){this.ops.maxVelocityY.onChange(L)}},speed:{get:function(){return this.ops.speedX.current},set:function(L){this.ops.speedX.onChange(L),this.ops.speedY.onChange(L)}},speedX:{get:function(){return this.ops.speedX.current},set:function(L){this.ops.speedX.onChange(L)}},speedY:{get:function(){return this.ops.speedY.current},set:function(L){this.ops.speedY.onChange(L)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(L){this.ops.moveToX.onChange(L)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(L){this.ops.moveToY.onChange(L)}},bounce:{get:function(){return this.ops.bounce.current},set:function(L){this.ops.bounce.onChange(L)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(L){this.ops.scaleX.onChange(L)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(L){this.ops.scaleY.onChange(L)}},particleColor:{get:function(){return this.ops.color.current},set:function(L){this.ops.color.onChange(L)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(L){this.ops.color.setEase(L)}},particleTint:{get:function(){return this.ops.tint.current},set:function(L){this.ops.tint.onChange(L)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(L){this.ops.alpha.onChange(L)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(L){this.ops.lifespan.onChange(L)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(L){this.ops.angle.onChange(L)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(L){this.ops.rotate.onChange(L)}},quantity:{get:function(){return this.ops.quantity.current},set:function(L){this.ops.quantity.onChange(L)}},delay:{get:function(){return this.ops.delay.current},set:function(L){this.ops.delay.onChange(L)}},hold:{get:function(){return this.ops.hold.current},set:function(L){this.ops.hold.onChange(L)}},flowCounter:{get:function(){return this.counters[0]},set:function(L){this.counters[0]=L}},frameCounter:{get:function(){return this.counters[1]},set:function(L){this.counters[1]=L}},animCounter:{get:function(){return this.counters[2]},set:function(L){this.counters[2]=L}},elapsed:{get:function(){return this.counters[3]},set:function(L){this.counters[3]=L}},stopCounter:{get:function(){return this.counters[4]},set:function(L){this.counters[4]=L}},completeFlag:{get:function(){return this.counters[5]},set:function(L){this.counters[5]=L}},zoneIndex:{get:function(){return this.counters[6]},set:function(L){this.counters[6]=L}},zoneTotal:{get:function(){return this.counters[7]},set:function(L){this.counters[7]=L}},currentFrame:{get:function(){return this.counters[8]},set:function(L){this.counters[8]=L}},currentAnim:{get:function(){return this.counters[9]},set:function(L){this.counters[9]=L}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var L,B=this.ops;for(L=0;L<D.length;L++){var G=D[L];B[G].destroy()}for(L=0;L<this.alive.length;L++)this.alive[L].destroy();for(L=0;L<this.dead.length;L++)this.dead[L].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});s.exports=V},10456:(s,g,e)=>{var n=e(90205),p=e(69360),f=new p,u=new p,l=new p,a=new p,o=function(c,h,d,v){var m=f,y=u,C=l,T=a;v?(T.loadIdentity(),T.multiply(v),T.translate(h.x,h.y),T.rotate(h.rotation),T.scale(h.scaleX,h.scaleY)):T.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY);var P=c.currentContext,S=d.roundPixels,M=d.alpha,E=h.alpha,A=h.alive,R=A.length,w=h.viewBounds;if(!(!h.visible||R===0||w&&!n(w,d.worldView))){h.sortCallback&&h.depthSort(),d.addToRenderList(h);var O=h.scrollFactorX,F=h.scrollFactorY;P.save(),P.globalCompositeOperation=c.blendModes[h.blendMode];for(var b=0;b<R;b++){var I=A[b],N=I.alpha*E*M;if(!(N<=0||I.scaleX===0||I.scaleY===0)){C.applyITRS(I.x,I.y,I.rotation,I.scaleX,I.scaleY),m.copyFrom(d.matrix),m.multiplyWithOffset(T,-d.scrollX*O,-d.scrollY*F),C.e=I.x,C.f=I.y,m.multiply(C,y);var z=I.frame,U=z.canvasData;if(U.width>0&&U.height>0){var W=-z.halfWidth,D=-z.halfHeight;P.globalAlpha=N,P.save(),y.setToContext(P),S&&(W=Math.round(W),D=Math.round(D)),P.imageSmoothingEnabled=!z.source.scaleMode,P.drawImage(z.source.image,U.x,U.y,U.width,U.height,W,D,U.width,U.height),P.restore()}}}P.restore()}};s.exports=o},765:(s,g,e)=>{var n=e(88933),p=e(99325),f=e(20494),u=e(72632),l=e(9216);p.register("particles",function(a,o){a===void 0&&(a={});var c=f(a,"key",null),h=u(a,"config",null),d=new l(this.scene,0,0,c);return o!==void 0&&(a.add=o),n(this.scene,d,a),h&&d.setConfig(h),d})},81212:(s,g,e)=>{var n=e(61286),p=e(9216);n.register("particles",function(f,u,l,a){return f!==void 0&&typeof f=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new p(this.scene,f,u,l,a))})},69116:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(10275),f=e(10456),s.exports={renderWebGL:p,renderCanvas:f}},10275:(s,g,e)=>{var n=e(90205),p=e(69360),f=e(75512),u=new p,l=new p,a=new p,o=new p,c=function(h,d,v,m){var y=h.pipelines.set(d.pipeline),C=u,T=l,P=a,S=o;m?(S.loadIdentity(),S.multiply(m),S.translate(d.x,d.y),S.rotate(d.rotation),S.scale(d.scaleX,d.scaleY)):S.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY);var M=v.roundPixels,E=f.getTintAppendFloatAlpha,A=v.alpha,R=d.alpha,w=d.frame.glTexture;h.pipelines.preBatch(d);var O=d.alive,F=O.length,b=d.viewBounds;if(!(F===0||b&&!n(b,v.worldView))){d.sortCallback&&d.depthSort();var I=y.setGameObject(d,d.frame);v.addToRenderList(d),C.copyFrom(v.matrix),C.multiplyWithOffset(S,-v.scrollX*d.scrollFactorX,-v.scrollY*d.scrollFactorY),h.setBlendMode(d.blendMode),d.mask&&(d.mask.preRenderWebGL(h,d,v),h.pipelines.set(d.pipeline));for(var N=d.tintFill,z=0;z<F;z++){var U=O[z],W=U.alpha*R*A;if(!(W<=0||U.scaleX===0||U.scaleY===0)){P.applyITRS(U.x,U.y,U.rotation,U.scaleX,U.scaleY),P.e=U.x,P.f=U.y,C.multiply(P,T);var D=U.frame,V=-D.halfWidth,L=-D.halfHeight,B=T.setQuad(V,L,V+D.width,L+D.height,M),G=E(U.tint,W);y.shouldFlush(6)&&(y.flush(),I=y.setGameObject(d,d.frame)),y.batchQuad(d,B[0],B[1],B[2],B[3],B[4],B[5],B[6],B[7],D.u0,D.v0,D.u1,D.v1,G,G,G,G,N,w,I)}}d.mask&&d.mask.postRenderWebGL(h,v),h.pipelines.postBatch(d)}};s.exports=c},30891:(s,g,e)=>{var n=e(56694),p=new n({initialize:function(u,l,a){u===void 0&&(u=0),l===void 0&&(l=0),a===void 0&&(a=!0),this.emitter,this.x=u,this.y=l,this.active=a},update:function(){},destroy:function(){this.emitter=null}});s.exports=p},76100:s=>{s.exports="complete"},26677:s=>{s.exports="deathzone"},62736:s=>{s.exports="explode"},56490:s=>{s.exports="start"},85715:s=>{s.exports="stop"},40629:(s,g,e)=>{s.exports={COMPLETE:e(76100),DEATH_ZONE:e(26677),EXPLODE:e(62736),START:e(56490),STOP:e(85715)}},27684:(s,g,e)=>{s.exports={EmitterColorOp:e(19737),EmitterOp:e(93025),Events:e(40629),GravityWell:e(87811),Particle:e(14909),ParticleBounds:e(73106),ParticleEmitter:e(9216),ParticleProcessor:e(30891),Zones:e(25962)}},69361:(s,g,e)=>{var n=e(56694),p=new n({initialize:function(u,l){this.source=u,this.killOnEnter=l},willKill:function(f){var u=f.worldPosition,l=this.source.contains(u.x,u.y);return l&&this.killOnEnter||!l&&!this.killOnEnter}});s.exports=p},54213:(s,g,e)=>{var n=e(56694),p=new n({initialize:function(u,l,a,o,c,h){o===void 0&&(o=!1),c===void 0&&(c=!0),h===void 0&&(h=-1),this.source=u,this.points=[],this.quantity=l,this.stepRate=a,this.yoyo=o,this.counter=-1,this.seamless=c,this._length=0,this._direction=0,this.total=h,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var f=this.points[0],u=this.points[this.points.length-1];f.x===u.x&&f.y===u.y&&this.points.pop()}var l=this._length;return this._length=this.points.length,this._length<l&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(f){return this.source=f,this.updateSource()},getPoint:function(f){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var u=this.points[this.counter];u&&(f.x=u.x,f.y=u.y)}});s.exports=p},68433:(s,g,e)=>{var n=e(56694),p=e(93736),f=new n({initialize:function(l){this.source=l,this._tempVec=new p,this.total=-1},getPoint:function(u){var l=this._tempVec;this.source.getRandomPoint(l),u.x=l.x,u.y=l.y}});s.exports=f},25962:(s,g,e)=>{s.exports={DeathZone:e(69361),EdgeZone:e(54213),RandomZone:e(68433)}},29598:(s,g,e)=>{var n=e(56694),p=e(64937),f=e(13747),u=new n({Extends:f,Mixins:[p.PathFollower],initialize:function(a,o,c,h,d,v){f.call(this,a,c,h,d,v),this.path=o},preUpdate:function(l,a){this.anims.update(l,a),this.pathUpdate(l)}});s.exports=u},19626:(s,g,e)=>{var n=e(61286),p=e(29598);n.register("follower",function(f,u,l,a,o){var c=new p(this.scene,f,u,l,a,o);return this.displayList.add(c),this.updateList.add(c),c})},33412:(s,g,e)=>{var n=e(16569),p=e(56694),f=e(99425),u=e(15978),l=e(83321),a=e(76583),o=new p({Extends:l,initialize:function(h,d,v,m,y,C,T,P){m||(m="__DEFAULT"),l.call(this,h,d,v,m,y),this.type="Plane",this.anims=new n(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(C,T,P),this.setSizeToFrame(!1),this.setViewHeight()},setGridSize:function(c,h,d){c===void 0&&(c=8),h===void 0&&(h=8),d===void 0&&(d=!1);var v=!1;return d&&(v=!0),this.gridWidth=c,this.gridHeight=h,this.isTiled=d,this.clear(),f({mesh:this,widthSegments:c,heightSegments:h,isOrtho:!1,tile:d,flipY:v}),this},setSizeToFrame:function(c){c===void 0&&(c=!0);var h=this.frame;if(this.setPerspective(this.width/h.width,this.height/h.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!c)return this;var d=this.gridWidth,v=this.gridHeight,m=this.vertices,y=h.u0,C=h.u1,T=h.v0,P=h.v1,S,M,E=0;if(this.isTiled)for(T=h.v1,P=h.v0,M=0;M<v;M++)for(S=0;S<d;S++)m[E++].setUVs(y,P),m[E++].setUVs(y,T),m[E++].setUVs(C,P),m[E++].setUVs(y,T),m[E++].setUVs(C,T),m[E++].setUVs(C,P);else{var A=d+1,R=v+1,w=C-y,O=P-T,F=[];for(M=0;M<R;M++)for(S=0;S<A;S++){var b=y+w*(S/d),I=T+O*(M/v);F.push(b,I)}for(M=0;M<v;M++)for(S=0;S<d;S++){var N=(S+A*M)*2,z=(S+A*(M+1))*2,U=(S+1+A*(M+1))*2,W=(S+1+A*M)*2;m[E++].setUVs(F[N],F[N+1]),m[E++].setUVs(F[z],F[z+1]),m[E++].setUVs(F[W],F[W+1]),m[E++].setUVs(F[z],F[z+1]),m[E++].setUVs(F[U],F[U+1]),m[E++].setUVs(F[W],F[W+1])}}return this},setViewHeight:function(c){c===void 0&&(c=this.frame.height);var h=this.fov*(Math.PI/180);this.viewPosition.z=this.height/c/Math.tan(h/2),this.dirtyCache[10]=1},createCheckerboard:function(c,h,d,v,m){c===void 0&&(c=16777215),h===void 0&&(h=255),d===void 0&&(d=255),v===void 0&&(v=255),m===void 0&&(m=128);var y=this.scene.sys.renderer.gl,C=y.createTexture();y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,C),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.NEAREST);for(var T=u(c),P=u(h),S=[],M=0;M<16;M++)for(var E=0;E<16;E++)M<8&&E<8||M>7&&E>7?S.push(T.r,T.g,T.b,d):S.push(P.r,P.g,P.b,v);y.texImage2D(y.TEXTURE_2D,0,y.RGBA,16,16,0,y.RGBA,y.UNSIGNED_BYTE,new Uint8Array(S)),C.isAlphaPremultiplied=!0,C.isRenderTexture=!1,C.width=16,C.height=16;var A=this.scene.sys.textures.addGLTexture(a(),C,16,16);return this.removeCheckerboard(),this._checkerboard=A,y.bindTexture(y.TEXTURE_2D,null),this.setTexture(A),this.setSizeToFrame(),this.setViewHeight(m),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(c,h){return this.anims.play(c,h)},playReverse:function(c,h){return this.anims.playReverse(c,h)},playAfterDelay:function(c,h){return this.anims.playAfterDelay(c,h)},playAfterRepeat:function(c,h){return this.anims.playAfterRepeat(c,h)},stop:function(){return this.anims.stop()},stopAfterDelay:function(c){return this.anims.stopAfterDelay(c)},stopAfterRepeat:function(c){return this.anims.stopAfterRepeat(c)},stopOnFrame:function(c){return this.anims.stopOnFrame(c)},preUpdate:function(c,h){l.prototype.preUpdate.call(this,c,h),this.anims.update(c,h)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});s.exports=o},10912:(s,g,e)=>{var n=e(88933),p=e(32291),f=e(99325),u=e(20494),l=e(10850),a=e(33412);f.register("plane",function(o,c){o===void 0&&(o={});var h=u(o,"key",null),d=u(o,"frame",null),v=l(o,"width",8),m=l(o,"height",8),y=l(o,"tile",!1),C=new a(this.scene,0,0,h,d,v,m,y);c!==void 0&&(o.add=c);var T=l(o,"checkerboard",null);if(T){var P=l(T,"color1",16777215),S=l(T,"color2",255),M=l(T,"alpha1",255),E=l(T,"alpha2",255),A=l(T,"height",128);C.createCheckerboard(P,S,M,E,A)}return n(this.scene,C,o),p(C,o),C})},58322:(s,g,e)=>{var n=e(33412),p=e(61286);p.register("plane",function(f,u,l,a,o,c,h){return this.displayList.add(new n(this.scene,f,u,l,a,o,c,h))})},13171:(s,g,e)=>{var n=e(56694),p=e(64937),f=e(89980),u=e(74853),l=e(65641),a=e(71606),o=new n({Extends:f,Mixins:[p.AlphaSingle,p.BlendMode,p.Depth,p.Mask,p.Pipeline,p.PostPipeline,p.ScrollFactor,p.Transform,p.Visible,a],initialize:function(h,d,v,m,y,C,T){m===void 0&&(m=16777215),y===void 0&&(y=128),C===void 0&&(C=1),T===void 0&&(T=.1),f.call(this,h,"PointLight"),this.initPipeline(l.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(d,v),this.color=u(m),this.intensity=C,this.attenuation=T,this.width=y*2,this.height=y*2,this._radius=y},radius:{get:function(){return this._radius},set:function(c){this._radius=c,this.width=c*2,this.height=c*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});s.exports=o},162:(s,g,e)=>{var n=e(88933),p=e(99325),f=e(20494),u=e(13171);p.register("pointlight",function(l,a){l===void 0&&(l={});var o=f(l,"color",16777215),c=f(l,"radius",128),h=f(l,"intensity",1),d=f(l,"attenuation",.1),v=new u(this.scene,0,0,o,c,h,d);return a!==void 0&&(l.add=a),n(this.scene,v,l),v})},91201:(s,g,e)=>{var n=e(61286),p=e(13171);n.register("pointlight",function(f,u,l,a,o,c){return this.displayList.add(new p(this.scene,f,u,l,a,o,c))})},71606:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(80590),s.exports={renderWebGL:p,renderCanvas:f}},80590:(s,g,e)=>{var n=e(73329),p=function(f,u,l,a){l.addToRenderList(u);var o=f.pipelines.set(u.pipeline),c=n(u,l,a).calc,h=u.width,d=u.height,v=-u._radius,m=-u._radius,y=v+h,C=m+d,T=c.getX(0,0),P=c.getY(0,0),S=c.getX(v,m),M=c.getY(v,m),E=c.getX(v,C),A=c.getY(v,C),R=c.getX(y,C),w=c.getY(y,C),O=c.getX(y,m),F=c.getY(y,m);f.pipelines.preBatch(u),o.batchPointLight(u,l,S,M,E,A,R,w,O,F,T,P),f.pipelines.postBatch(u)};s.exports=p},15996:(s,g,e)=>{var n=e(56694),p=e(845),f=e(1539),u=new n({Extends:f,initialize:function(a,o,c,h,d){o===void 0&&(o=0),c===void 0&&(c=0),h===void 0&&(h=32),d===void 0&&(d=32);var v=new p(a.sys.textures,"",h,d);f.call(this,a,o,c,v),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(l,a){this.width=l,this.height=a,this.texture.setSize(l,a),this.updateDisplayOrigin();var o=this.input;return o&&!o.customHitArea&&(o.hitArea.width=l,o.hitArea.height=a),this},resize:function(l,a){return this.setSize(l,a),this},saveTexture:function(l){var a=this.texture;return a.key=l,a.manager.addDynamicTexture(a)&&(this._saved=!0),a},fill:function(l,a,o,c,h,d){return this.texture.fill(l,a,o,c,h,d),this},clear:function(){return this.texture.clear(),this},stamp:function(l,a,o,c,h){return this.texture.stamp(l,a,o,c,h),this},erase:function(l,a,o){return this.texture.erase(l,a,o),this},draw:function(l,a,o,c,h){return this.texture.draw(l,a,o,c,h),this},drawFrame:function(l,a,o,c,h,d){return this.texture.drawFrame(l,a,o,c,h,d),this},repeat:function(l,a,o,c,h,d,v,m,y){return this.texture.repeat(l,a,o,c,h,d,v,m,y),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(l,a,o,c,h){return this.texture.batchDraw(l,a,o,c,h),this},batchDrawFrame:function(l,a,o,c,h,d){return this.texture.batchDrawFrame(l,a,o,c,h,d),this},endDraw:function(l){return this.texture.endDraw(l),this},snapshotArea:function(l,a,o,c,h,d,v){return this.texture.snapshotArea(l,a,o,c,h,d,v),this},snapshot:function(l,a,o){return this.snapshotArea(0,0,this.width,this.height,l,a,o)},snapshotPixel:function(l,a,o){return this.snapshotArea(l,a,1,1,o,"pixel")},preDestroy:function(){this._saved||this.texture.destroy()}});s.exports=u},85692:(s,g,e)=>{var n=e(88933),p=e(99325),f=e(20494),u=e(15996);p.register("renderTexture",function(l,a){l===void 0&&(l={});var o=f(l,"x",0),c=f(l,"y",0),h=f(l,"width",32),d=f(l,"height",32),v=new u(this.scene,o,c,h,d);return a!==void 0&&(l.add=a),n(this.scene,v,l),v})},29599:(s,g,e)=>{var n=e(61286),p=e(15996);n.register("renderTexture",function(f,u,l,a){return this.displayList.add(new p(this.scene,f,u,l,a))})},79968:(s,g,e)=>{var n=e(16569),p=e(56694),f=e(64937),u=e(89980),l=e(65641),a=e(58912),o=e(93736),c=new p({Extends:u,Mixins:[f.AlphaSingle,f.BlendMode,f.Depth,f.Flip,f.Mask,f.Pipeline,f.PostPipeline,f.Size,f.Texture,f.Transform,f.Visible,f.ScrollFactor,a],initialize:function(d,v,m,y,C,T,P,S,M){y===void 0&&(y="__DEFAULT"),T===void 0&&(T=2),P===void 0&&(P=!0),u.call(this,d,"Rope"),this.anims=new n(this),this.points=T,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=y==="__DEFAULT",this.dirty=!1,this.horizontal=P,this._flipX=!1,this._flipY=!1,this._perp=new o,this.debugCallback=null,this.debugGraphic=null,this.setTexture(y,C),this.setPosition(v,m),this.setSizeToFrame(),this.initPipeline(l.ROPE_PIPELINE),Array.isArray(T)&&this.resizeArrays(T.length),this.setPoints(T,S,M),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(h,d){var v=this.anims.currentFrame;this.anims.update(h,d),this.anims.currentFrame!==v&&(this.updateUVs(),this.updateVertices())},play:function(h,d,v){return this.anims.play(h,d,v),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(h,d,v){return h===void 0&&(h=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(h,d,v))},setVertical:function(h,d,v){return h===void 0&&(h=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(h,d,v)):this},setTintFill:function(h){return h===void 0&&(h=!1),this.tintFill=h,this},setAlphas:function(h,d){var v=this.points.length;if(v<1)return this;var m=this.alphas;h===void 0?h=[1]:!Array.isArray(h)&&d===void 0&&(h=[h]);var y,C=0;if(d!==void 0)for(y=0;y<v;y++)C=y*2,m[C]=h,m[C+1]=d;else if(h.length===v)for(y=0;y<v;y++)C=y*2,m[C]=h[y],m[C+1]=h[y];else{var T=h[0];for(y=0;y<v;y++)C=y*2,h.length>C&&(T=h[C]),m[C]=T,h.length>C+1&&(T=h[C+1]),m[C+1]=T}return this},setColors:function(h){var d=this.points.length;if(d<1)return this;var v=this.colors;h===void 0?h=[16777215]:Array.isArray(h)||(h=[h]);var m,y=0;if(h.length===d)for(m=0;m<d;m++)y=m*2,v[y]=h[m],v[y+1]=h[m];else{var C=h[0];for(m=0;m<d;m++)y=m*2,h.length>y&&(C=h[y]),v[y]=C,h.length>y+1&&(C=h[y+1]),v[y+1]=C}return this},setPoints:function(h,d,v){if(h===void 0&&(h=2),typeof h=="number"){var m=h;m<2&&(m=2),h=[];var y,C,T;if(this.horizontal)for(T=-this.frame.halfWidth,C=this.frame.width/(m-1),y=0;y<m;y++)h.push({x:T+y*C,y:0});else for(T=-this.frame.halfHeight,C=this.frame.height/(m-1),y=0;y<m;y++)h.push({x:0,y:T+y*C})}var P=h.length,S=this.points.length;return P<1?(console.warn("Rope: Not enough points given"),this):(P===1&&(h.unshift({x:0,y:0}),P++),S!==P&&this.resizeArrays(P),this.dirty=!0,this.points=h,this.updateUVs(),d!=null&&this.setColors(d),v!=null&&this.setAlphas(v),this)},updateUVs:function(){for(var h=this.uv,d=this.points.length,v=this.frame.u0,m=this.frame.v0,y=this.frame.u1,C=this.frame.v1,T=(y-v)/(d-1),P=(C-m)/(d-1),S=0;S<d;S++){var M=S*4,E,A,R,w;this.horizontal?(this._flipX?(E=y-S*T,R=y-S*T):(E=v+S*T,R=v+S*T),this._flipY?(A=C,w=m):(A=m,w=C)):(this._flipX?(E=v,R=y):(E=y,R=v),this._flipY?(A=C-S*P,w=C-S*P):(A=m+S*P,w=m+S*P)),h[M+0]=E,h[M+1]=A,h[M+2]=R,h[M+3]=w}return this},resizeArrays:function(h){var d=this.colors,v=this.alphas;this.vertices=new Float32Array(h*4),this.uv=new Float32Array(h*4),d=new Uint32Array(h*2),v=new Float32Array(h*2);for(var m=0;m<h*2;m++)d[m]=16777215,v[m]=1;return this.colors=d,this.alphas=v,this.dirty=!0,this},updateVertices:function(){var h=this._perp,d=this.points,v=this.vertices,m=d.length;if(this.dirty=!1,!(m<1)){for(var y,C=d[0],T=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,P=0;P<m;P++){var S=d[P],M=P*4;P<m-1?y=d[P+1]:y=S,h.x=y.y-C.y,h.y=-(y.x-C.x);var E=h.length();h.x/=E,h.y/=E,h.x*=T,h.y*=T,v[M]=S.x+h.x,v[M+1]=S.y+h.y,v[M+2]=S.x-h.x,v[M+3]=S.y-h.y,C=S}return this}},setDebug:function(h,d){return this.debugGraphic=h,!h&&!d?this.debugCallback=null:d?this.debugCallback=d:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(h,d,v){var m=h.debugGraphic,y=v[0],C=v[1],T=v[2],P=v[3];m.lineBetween(y,C,T,P);for(var S=4;S<d;S+=4){var M=v[S+0],E=v[S+1],A=v[S+2],R=v[S+3];m.lineBetween(y,C,M,E),m.lineBetween(T,P,A,R),m.lineBetween(T,P,M,E),m.lineBetween(M,E,A,R),y=M,C=E,T=A,P=R}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(h){return this._flipX=h,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(h){return this._flipY=h,this.updateUVs()}}});s.exports=c},44598:s=>{var g=function(){};s.exports=g},96027:(s,g,e)=>{var n=e(88933),p=e(99325),f=e(20494),u=e(10850),l=e(79968);p.register("rope",function(a,o){a===void 0&&(a={});var c=f(a,"key",null),h=f(a,"frame",null),d=f(a,"horizontal",!0),v=u(a,"points",void 0),m=u(a,"colors",void 0),y=u(a,"alphas",void 0),C=new l(this.scene,0,0,c,h,v,d,m,y);return o!==void 0&&(a.add=o),n(this.scene,C,a),C})},31982:(s,g,e)=>{var n=e(79968),p=e(61286);p.register("rope",function(f,u,l,a,o,c,h,d){return this.displayList.add(new n(this.scene,f,u,l,a,o,c,h,d))})},58912:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(49489),f=e(44598),s.exports={renderWebGL:p,renderCanvas:f}},49489:(s,g,e)=>{var n=e(73329),p=e(75512),f=function(u,l,a,o){a.addToRenderList(l);var c=u.pipelines.set(l.pipeline,l),h=n(l,a,o).calc,d=l.vertices,v=l.uv,m=l.colors,y=l.alphas,C=l.alpha,T=p.getTintAppendFloatAlpha,P=a.roundPixels,S=d.length,M=Math.floor(S*.5);c.flush(),u.pipelines.preBatch(l);var E=c.setGameObject(l),A=c.vertexViewF32,R=c.vertexViewU32,w=c.vertexCount*c.currentShader.vertexComponentCount-1,O=0,F=l.tintFill;l.dirty&&l.updateVertices();for(var b=l.debugCallback,I=[],N=0;N<S;N+=2){var z=d[N+0],U=d[N+1],W=z*h.a+U*h.c+h.e,D=z*h.b+U*h.d+h.f;P&&(W=Math.round(W),D=Math.round(D)),A[++w]=W,A[++w]=D,A[++w]=v[N+0],A[++w]=v[N+1],A[++w]=E,A[++w]=F,R[++w]=T(m[O],a.alpha*(y[O]*C)),O++,b&&(I[N+0]=W,I[N+1]=D)}b&&b.call(l,l,S,I),c.vertexCount+=M,c.currentBatch.count=c.vertexCount-c.currentBatch.start,u.pipelines.postBatch(l)};s.exports=f},27902:(s,g,e)=>{var n=e(56694),p=e(64937),f=e(89980),u=e(72632),l=e(98611),a=e(22440),o=e(24252),c=e(69360),h=new n({Extends:f,Mixins:[p.ComputedSize,p.Depth,p.GetBounds,p.Mask,p.Origin,p.ScrollFactor,p.Transform,p.Visible,o],initialize:function(v,m,y,C,T,P,S,M){y===void 0&&(y=0),C===void 0&&(C=0),T===void 0&&(T=128),P===void 0&&(P=128),f.call(this,v,"Shader"),this.blendMode=-1,this.shader;var E=v.sys.renderer;this.renderer=E,this.gl=E.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=E.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new c,this._tempMatrix2=new c,this._tempMatrix3=new c,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=E.width,this._rendererHeight=E.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(y,C),this.setSize(T,P),this.setOrigin(.5,.5),this.setShader(m,S,M)},willRender:function(d){return this.renderToTexture?!0:!(f.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&d.id)},setRenderToTexture:function(d,v){if(v===void 0&&(v=!1),!this.renderToTexture){var m=this.width,y=this.height,C=this.renderer;this.glTexture=C.createTextureFromSource(null,m,y,0),this.glTexture.flipY=v,this.framebuffer=C.createFramebuffer(m,y,this.glTexture,!1),this._rendererWidth=m,this._rendererHeight=y,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),d&&(this.texture=this.scene.sys.textures.addGLTexture(d,this.glTexture,m,y))}return this.shader&&(C.pipelines.clear(),this.load(),this.flush(),C.pipelines.rebind()),this},setShader:function(d,v,m){if(v===void 0&&(v=[]),typeof d=="string"){var y=this.scene.sys.cache.shader;if(!y.has(d))return console.warn("Shader missing: "+d),this;this.shader=y.get(d)}else this.shader=d;var C=this.gl,T=this.renderer;this.program&&C.deleteProgram(this.program);var P=T.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);C.uniformMatrix4fv(C.getUniformLocation(P,"uViewMatrix"),!1,this.viewMatrix),C.uniformMatrix4fv(C.getUniformLocation(P,"uProjectionMatrix"),!1,this.projectionMatrix),C.uniform2f(C.getUniformLocation(P,"uResolution"),this.width,this.height),this.program=P;var S=new Date,M={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[S.getFullYear(),S.getMonth(),S.getDate(),S.getHours()*60*60+S.getMinutes()*60+S.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=l(!0,{},this.shader.uniforms,M):this.uniforms=M;for(var E=0;E<4;E++)v[E]&&this.setSampler2D("iChannel"+E,v[E],E,m);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(d){return this.pointer=d,this},projOrtho:function(d,v,m,y){var C=-1e3,T=1e3,P=1/(d-v),S=1/(m-y),M=1/(C-T),E=this.projectionMatrix;E[0]=-2*P,E[5]=-2*S,E[10]=2*M,E[12]=(d+v)*P,E[13]=(y+m)*S,E[14]=(T+C)*M;var A=this.program,R=this.gl,w=this.renderer;w.setProgram(A),R.uniformMatrix4fv(R.getUniformLocation(A,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=v,this._rendererHeight=m},initUniforms:function(){var d=this.gl,v=this.renderer.glFuncMap,m=this.program;this._textureCount=0;for(var y in this.uniforms){var C=this.uniforms[y],T=C.type,P=v[T];C.uniformLocation=d.getUniformLocation(m,y),T!=="sampler2D"&&(C.glMatrix=P.matrix,C.glValueLength=P.length,C.glFunc=P.func)}},setSampler2DBuffer:function(d,v,m,y,C,T){C===void 0&&(C=0),T===void 0&&(T={});var P=this.uniforms[d];return P.value=v,T.width=m,T.height=y,P.textureData=T,this._textureCount=C,this.initSampler2D(P),this},setSampler2D:function(d,v,m,y){m===void 0&&(m=0);var C=this.scene.sys.textures;if(C.exists(v)){var T=C.getFrame(v);if(T.glTexture&&T.glTexture.isRenderTexture)return this.setSampler2DBuffer(d,T.glTexture,T.width,T.height,m,y);var P=this.uniforms[d],S=T.source;P.textureKey=v,P.source=S.image,P.value=T.glTexture,S.isGLTexture&&(y||(y={}),y.width=S.width,y.height=S.height),y&&(P.textureData=y),this._textureCount=m,this.initSampler2D(P)}return this},setUniform:function(d,v){return a(this.uniforms,d,v),this},getUniform:function(d){return u(this.uniforms,d,null)},setChannel0:function(d,v){return this.setSampler2D("iChannel0",d,0,v)},setChannel1:function(d,v){return this.setSampler2D("iChannel1",d,1,v)},setChannel2:function(d,v){return this.setSampler2D("iChannel2",d,2,v)},setChannel3:function(d,v){return this.setSampler2D("iChannel3",d,3,v)},initSampler2D:function(d){if(!!d.value){var v=this.gl;v.activeTexture(v.TEXTURE0+this._textureCount),v.bindTexture(v.TEXTURE_2D,d.value);var m=d.textureData;if(m&&!d.value.isRenderTexture){var y=v[u(m,"magFilter","linear").toUpperCase()],C=v[u(m,"minFilter","linear").toUpperCase()],T=v[u(m,"wrapS","repeat").toUpperCase()],P=v[u(m,"wrapT","repeat").toUpperCase()],S=v[u(m,"format","rgba").toUpperCase()];if(m.repeat&&(T=v.REPEAT,P=v.REPEAT),v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,!!m.flipY),m.width){var M=u(m,"width",512),E=u(m,"height",2),A=u(m,"border",0);v.texImage2D(v.TEXTURE_2D,0,S,M,E,A,S,v.UNSIGNED_BYTE,null)}else v.texImage2D(v.TEXTURE_2D,0,S,v.RGBA,v.UNSIGNED_BYTE,d.source);v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,y),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,C),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,T),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,P)}this.renderer.setProgram(this.program),v.uniform1i(d.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var d=this.gl,v=this.uniforms,m,y,C,T,P,S=0;for(var M in v)m=v[M],C=m.glFunc,y=m.glValueLength,T=m.uniformLocation,P=m.value,P!==null&&(y===1?m.glMatrix?C.call(d,T,m.transpose,P):C.call(d,T,P):y===2?C.call(d,T,P.x,P.y):y===3?C.call(d,T,P.x,P.y,P.z):y===4?C.call(d,T,P.x,P.y,P.z,P.w):m.type==="sampler2D"&&(d.activeTexture(d.TEXTURE0+S),d.bindTexture(d.TEXTURE_2D,P),d.uniform1i(T,S),S++))},load:function(d){var v=this.gl,m=this.width,y=this.height,C=this.renderer,T=this.program,P=this.viewMatrix;if(!this.renderToTexture){var S=-this._displayOriginX,M=-this._displayOriginY;P[0]=d[0],P[1]=d[1],P[4]=d[2],P[5]=d[3],P[8]=d[4],P[9]=d[5],P[12]=P[0]*S+P[4]*M,P[13]=P[1]*S+P[5]*M}v.useProgram(T),v.uniformMatrix4fv(v.getUniformLocation(T,"uViewMatrix"),!1,P),v.uniform2f(v.getUniformLocation(T,"uResolution"),this.width,this.height);var E=this.uniforms,A=E.resolution;A.value.x=m,A.value.y=y,E.time.value=C.game.loop.getDuration();var R=this.pointer;if(R){var w=E.mouse,O=R.x/m,F=1-R.y/y;w.value.x=O.toFixed(2),w.value.y=F.toFixed(2)}this.syncUniforms()},flush:function(){var d=this.width,v=this.height,m=this.program,y=this.gl,C=this.vertexBuffer,T=this.renderer,P=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(T.setFramebuffer(this.framebuffer),y.clearColor(0,0,0,0),y.clear(y.COLOR_BUFFER_BIT)),y.bindBuffer(y.ARRAY_BUFFER,C);var S=y.getAttribLocation(m,"inPosition");S!==-1&&(y.enableVertexAttribArray(S),y.vertexAttribPointer(S,2,y.FLOAT,!1,P,0));var M=this.vertexViewF32;M[3]=v,M[4]=d,M[5]=v,M[8]=d,M[9]=v,M[10]=d;var E=6;y.bufferSubData(y.ARRAY_BUFFER,0,this.bytes.subarray(0,E*P)),y.drawArrays(y.TRIANGLES,0,E),this.renderToTexture&&T.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var d=this.gl;d.deleteProgram(this.program),d.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});s.exports=h},10612:s=>{var g=function(){};s.exports=g},13908:(s,g,e)=>{var n=e(88933),p=e(99325),f=e(20494),u=e(27902);p.register("shader",function(l,a){l===void 0&&(l={});var o=f(l,"key",null),c=f(l,"x",0),h=f(l,"y",0),d=f(l,"width",128),v=f(l,"height",128),m=new u(this.scene,o,c,h,d,v);return a!==void 0&&(l.add=a),n(this.scene,m,l),m})},51979:(s,g,e)=>{var n=e(27902),p=e(61286);p.register("shader",function(f,u,l,a,o,c,h){return this.displayList.add(new n(this.scene,f,u,l,a,o,c,h))})},24252:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(19782),f=e(10612),s.exports={renderWebGL:p,renderCanvas:f}},19782:(s,g,e)=>{var n=e(73329),p=function(f,u,l,a){if(!!u.shader){if(l.addToRenderList(u),f.pipelines.clear(),u.renderToTexture)u.load(),u.flush();else{var o=n(u,l,a).calc;(f.width!==u._rendererWidth||f.height!==u._rendererHeight)&&u.projOrtho(0,f.width,f.height,0),u.load(o.matrix),u.flush()}f.pipelines.rebind()}};s.exports=p},19543:(s,g,e)=>{var n=e(75512),p=function(f,u,l,a,o,c){for(var h=n.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*a),d=l.pathData,v=l.pathIndexes,m=0;m<v.length;m+=3){var y=v[m]*2,C=v[m+1]*2,T=v[m+2]*2,P=d[y+0]-o,S=d[y+1]-c,M=d[C+0]-o,E=d[C+1]-c,A=d[T+0]-o,R=d[T+1]-c,w=u.getX(P,S),O=u.getY(P,S),F=u.getX(M,E),b=u.getY(M,E),I=u.getX(A,R),N=u.getY(A,R);f.batchTri(l,w,O,F,b,I,N,0,0,1,1,h,h,h,2)}};s.exports=p},15608:s=>{var g=function(e,n,p,f){var u=p||n.fillColor,l=f||n.fillAlpha,a=(u&16711680)>>>16,o=(u&65280)>>>8,c=u&255;e.fillStyle="rgba("+a+","+o+","+c+","+l+")"};s.exports=g},17876:s=>{var g=function(e,n,p,f){var u=p||n.strokeColor,l=f||n.strokeAlpha,a=(u&16711680)>>>16,o=(u&65280)>>>8,c=u&255;e.strokeStyle="rgba("+a+","+o+","+c+","+l+")",e.lineWidth=n.lineWidth};s.exports=g},91461:(s,g,e)=>{var n=e(56694),p=e(64937),f=e(89980),u=e(88829),l=new n({Extends:f,Mixins:[p.AlphaSingle,p.BlendMode,p.Depth,p.GetBounds,p.Mask,p.Origin,p.Pipeline,p.PostPipeline,p.ScrollFactor,p.Transform,p.Visible],initialize:function(o,c,h){c===void 0&&(c="Shape"),f.call(this,o,c),this.geom=h,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new u,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(a,o){return o===void 0&&(o=1),a===void 0?this.isFilled=!1:(this.fillColor=a,this.fillAlpha=o,this.isFilled=!0),this},setStrokeStyle:function(a,o,c){return c===void 0&&(c=1),a===void 0?this.isStroked=!1:(this.lineWidth=a,this.strokeColor=o,this.strokeAlpha=c,this.isStroked=!0),this},setClosePath:function(a){return this.closePath=a,this},setSize:function(a,o){return this.width=a,this.height=o,this},setDisplaySize:function(a,o){return this.displayWidth=a,this.displayHeight=o,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(a){this.scaleX=a/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(a){this.scaleY=a/this.height}}});s.exports=l},50262:(s,g,e)=>{var n=e(75512),p=function(f,u,l,a,o){var c=f.strokeTint,h=n.getTintAppendFloatAlpha(u.strokeColor,u.strokeAlpha*l);c.TL=h,c.TR=h,c.BL=h,c.BR=h;var d=u.pathData,v=d.length-1,m=u.lineWidth,y=m/2,C=d[0]-a,T=d[1]-o;u.closePath||(v-=2);for(var P=2;P<v;P+=2){var S=d[P]-a,M=d[P+1]-o;f.batchLine(C,T,S,M,y,y,m,P-2,u.closePath?P===v-1:!1),C=S,T=M}};s.exports=p},28593:(s,g,e)=>{var n=e(2213),p=e(56694),f=e(75606),u=e(11117),l=e(26673),a=e(83392),o=e(91461),c=new p({Extends:o,Mixins:[n],initialize:function(d,v,m,y,C,T,P,S,M){v===void 0&&(v=0),m===void 0&&(m=0),y===void 0&&(y=128),C===void 0&&(C=0),T===void 0&&(T=360),P===void 0&&(P=!1),o.call(this,d,"Arc",new l(0,0,y)),this._startAngle=C,this._endAngle=T,this._anticlockwise=P,this._iterations=.01,this.setPosition(v,m);var E=this.geom.radius*2;this.setSize(E,E),S!==void 0&&this.setFillStyle(S,M),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(h){this._iterations=h,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(h){this.geom.radius=h;var d=h*2;this.setSize(d,d),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(h){this._startAngle=h,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(h){this._endAngle=h,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(h){this._anticlockwise=h,this.updateData()}},setRadius:function(h){return this.radius=h,this},setIterations:function(h){return h===void 0&&(h=.01),this.iterations=h,this},setStartAngle:function(h,d){return this._startAngle=h,d!==void 0&&(this._anticlockwise=d),this.updateData()},setEndAngle:function(h,d){return this._endAngle=h,d!==void 0&&(this._anticlockwise=d),this.updateData()},updateData:function(){var h=this._iterations,d=h,v=this.geom.radius,m=f(this._startAngle),y=f(this._endAngle),C=this._anticlockwise,T=v,P=v;y-=m,C?y<-a.PI2?y=-a.PI2:y>0&&(y=-a.PI2+y%a.PI2):y>a.PI2?y=a.PI2:y<0&&(y=a.PI2+y%a.PI2);for(var S=[T+Math.cos(m)*v,P+Math.sin(m)*v],M;d<1;)M=y*d+m,S.push(T+Math.cos(M)*v,P+Math.sin(M)*v),d+=h;return M=y+m,S.push(T+Math.cos(M)*v,P+Math.sin(M)*v),S.push(T+Math.cos(m)*v,P+Math.sin(m)*v),this.pathIndexes=u(S),this.pathData=S,this}});s.exports=c},23560:(s,g,e)=>{var n=e(75606),p=e(15608),f=e(17876),u=e(49584),l=function(a,o,c,h){c.addToRenderList(o);var d=a.currentContext;if(u(a,d,o,c,h)){var v=o.radius;d.beginPath(),d.arc(v-o.originX*(v*2),v-o.originY*(v*2),v,n(o._startAngle),n(o._endAngle),o.anticlockwise),o.closePath&&d.closePath(),o.isFilled&&(p(d,o),d.fill()),o.isStroked&&(f(d,o),d.stroke()),d.restore()}};s.exports=l},10369:(s,g,e)=>{var n=e(28593),p=e(61286);p.register("arc",function(f,u,l,a,o,c,h,d){return this.displayList.add(new n(this.scene,f,u,l,a,o,c,h,d))}),p.register("circle",function(f,u,l,a,o){return this.displayList.add(new n(this.scene,f,u,l,0,360,!1,a,o))})},2213:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(58356),f=e(23560),s.exports={renderWebGL:p,renderCanvas:f}},58356:(s,g,e)=>{var n=e(73329),p=e(19543),f=e(50262),u=function(l,a,o,c){o.addToRenderList(a);var h=l.pipelines.set(a.pipeline),d=n(a,o,c),v=h.calcMatrix.copyFrom(d.calc),m=a._displayOriginX,y=a._displayOriginY,C=o.alpha*a.alpha;l.pipelines.preBatch(a),a.isFilled&&p(h,v,a,C,m,y),a.isStroked&&f(h,a,C,m,y),l.pipelines.postBatch(a)};s.exports=u},15220:(s,g,e)=>{var n=e(56694),p=e(87203),f=e(11117),u=e(74118),l=e(91461),a=new n({Extends:l,Mixins:[p],initialize:function(c,h,d,v,m,y){h===void 0&&(h=0),d===void 0&&(d=0),l.call(this,c,"Curve",v),this._smoothness=32,this._curveBounds=new u,this.closePath=!1,this.setPosition(h,d),m!==void 0&&this.setFillStyle(m,y),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(o){this._smoothness=o,this.updateData()}},setSmoothness:function(o){return this._smoothness=o,this.updateData()},updateData:function(){var o=this._curveBounds,c=this._smoothness;this.geom.getBounds(o,c),this.setSize(o.width,o.height),this.updateDisplayOrigin();for(var h=[],d=this.geom.getPoints(c),v=0;v<d.length;v++)h.push(d[v].x,d[v].y);return h.push(d[0].x,d[0].y),this.pathIndexes=f(h),this.pathData=h,this}});s.exports=a},4024:(s,g,e)=>{var n=e(15608),p=e(17876),f=e(49584),u=function(l,a,o,c){o.addToRenderList(a);var h=l.currentContext;if(f(l,h,a,o,c)){var d=a._displayOriginX+a._curveBounds.x,v=a._displayOriginY+a._curveBounds.y,m=a.pathData,y=m.length-1,C=m[0]-d,T=m[1]-v;h.beginPath(),h.moveTo(C,T),a.closePath||(y-=2);for(var P=2;P<y;P+=2){var S=m[P]-d,M=m[P+1]-v;h.lineTo(S,M)}a.closePath&&h.closePath(),a.isFilled&&(n(h,a),h.fill()),a.isStroked&&(p(h,a),h.stroke()),h.restore()}};s.exports=u},10147:(s,g,e)=>{var n=e(61286),p=e(15220);n.register("curve",function(f,u,l,a,o){return this.displayList.add(new p(this.scene,f,u,l,a,o))})},87203:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(82958),f=e(4024),s.exports={renderWebGL:p,renderCanvas:f}},82958:(s,g,e)=>{var n=e(19543),p=e(73329),f=e(50262),u=function(l,a,o,c){o.addToRenderList(a);var h=l.pipelines.set(a.pipeline),d=p(a,o,c),v=h.calcMatrix.copyFrom(d.calc),m=a._displayOriginX+a._curveBounds.x,y=a._displayOriginY+a._curveBounds.y,C=o.alpha*a.alpha;l.pipelines.preBatch(a),a.isFilled&&n(h,v,a,C,m,y),a.isStroked&&f(h,a,C,m,y),l.pipelines.postBatch(a)};s.exports=u},28591:(s,g,e)=>{var n=e(56694),p=e(11117),f=e(84171),u=e(95669),l=e(91461),a=new n({Extends:l,Mixins:[f],initialize:function(c,h,d,v,m,y,C){h===void 0&&(h=0),d===void 0&&(d=0),v===void 0&&(v=128),m===void 0&&(m=128),l.call(this,c,"Ellipse",new u(v/2,m/2,v,m)),this._smoothness=64,this.setPosition(h,d),this.width=v,this.height=m,y!==void 0&&this.setFillStyle(y,C),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(o){this._smoothness=o,this.updateData()}},setSize:function(o,c){return this.width=o,this.height=c,this.geom.setPosition(o/2,c/2),this.geom.setSize(o,c),this.updateData()},setSmoothness:function(o){return this._smoothness=o,this.updateData()},updateData:function(){for(var o=[],c=this.geom.getPoints(this._smoothness),h=0;h<c.length;h++)o.push(c[h].x,c[h].y);return o.push(c[0].x,c[0].y),this.pathIndexes=p(o),this.pathData=o,this}});s.exports=a},55881:(s,g,e)=>{var n=e(15608),p=e(17876),f=e(49584),u=function(l,a,o,c){o.addToRenderList(a);var h=l.currentContext;if(f(l,h,a,o,c)){var d=a._displayOriginX,v=a._displayOriginY,m=a.pathData,y=m.length-1,C=m[0]-d,T=m[1]-v;h.beginPath(),h.moveTo(C,T),a.closePath||(y-=2);for(var P=2;P<y;P+=2){var S=m[P]-d,M=m[P+1]-v;h.lineTo(S,M)}h.closePath(),a.isFilled&&(n(h,a),h.fill()),a.isStroked&&(p(h,a),h.stroke()),h.restore()}};s.exports=u},99869:(s,g,e)=>{var n=e(28591),p=e(61286);p.register("ellipse",function(f,u,l,a,o,c){return this.displayList.add(new n(this.scene,f,u,l,a,o,c))})},84171:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(17554),f=e(55881),s.exports={renderWebGL:p,renderCanvas:f}},17554:(s,g,e)=>{var n=e(19543),p=e(73329),f=e(50262),u=function(l,a,o,c){o.addToRenderList(a);var h=l.pipelines.set(a.pipeline),d=p(a,o,c),v=h.calcMatrix.copyFrom(d.calc),m=a._displayOriginX,y=a._displayOriginY,C=o.alpha*a.alpha;l.pipelines.preBatch(a),a.isFilled&&n(h,v,a,C,m,y),a.isStroked&&f(h,a,C,m,y),l.pipelines.postBatch(a)};s.exports=u},39169:(s,g,e)=>{var n=e(56694),p=e(91461),f=e(88059),u=new n({Extends:p,Mixins:[f],initialize:function(a,o,c,h,d,v,m,y,C,T,P){o===void 0&&(o=0),c===void 0&&(c=0),h===void 0&&(h=128),d===void 0&&(d=128),v===void 0&&(v=32),m===void 0&&(m=32),p.call(this,a,"Grid",null),this.cellWidth=v,this.cellHeight=m,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(o,c),this.setSize(h,d),this.setFillStyle(y,C),T!==void 0&&this.setOutlineStyle(T,P),this.updateDisplayOrigin()},setFillStyle:function(l,a){return a===void 0&&(a=1),l===void 0?this.showCells=!1:(this.fillColor=l,this.fillAlpha=a,this.showCells=!0),this},setAltFillStyle:function(l,a){return a===void 0&&(a=1),l===void 0?this.showAltCells=!1:(this.altFillColor=l,this.altFillAlpha=a,this.showAltCells=!0),this},setOutlineStyle:function(l,a){return a===void 0&&(a=1),l===void 0?this.showOutline=!1:(this.outlineFillColor=l,this.outlineFillAlpha=a,this.showOutline=!0),this}});s.exports=u},95525:(s,g,e)=>{var n=e(15608),p=e(17876),f=e(49584),u=function(l,a,o,c){o.addToRenderList(a);var h=l.currentContext;if(f(l,h,a,o,c)){var d=-a._displayOriginX,v=-a._displayOriginY,m=o.alpha*a.alpha,y=a.width,C=a.height,T=a.cellWidth,P=a.cellHeight,S=Math.ceil(y/T),M=Math.ceil(C/P),E=T,A=P,R=T-(S*T-y),w=P-(M*P-C),O=a.showCells,F=a.showAltCells,b=a.showOutline,I=0,N=0,z=0,U=0,W=0;if(b&&(E--,A--,R===T&&R--,w===P&&w--),O&&a.fillAlpha>0)for(n(h,a),N=0;N<M;N++)for(F&&(z=N%2),I=0;I<S;I++){if(F&&z){z=0;continue}z++,U=I<S-1?E:R,W=N<M-1?A:w,h.fillRect(d+I*T,v+N*P,U,W)}if(F&&a.altFillAlpha>0)for(n(h,a,a.altFillColor,a.altFillAlpha*m),N=0;N<M;N++)for(F&&(z=N%2),I=0;I<S;I++){if(F&&!z){z=1;continue}z=0,U=I<S-1?E:R,W=N<M-1?A:w,h.fillRect(d+I*T,v+N*P,U,W)}if(b&&a.outlineFillAlpha>0){for(p(h,a,a.outlineFillColor,a.outlineFillAlpha*m),I=1;I<S;I++){var D=I*T;h.beginPath(),h.moveTo(D+d,v),h.lineTo(D+d,C+v),h.stroke()}for(N=1;N<M;N++){var V=N*P;h.beginPath(),h.moveTo(d,V+v),h.lineTo(d+y,V+v),h.stroke()}}h.restore()}};s.exports=u},9326:(s,g,e)=>{var n=e(61286),p=e(39169);n.register("grid",function(f,u,l,a,o,c,h,d,v,m){return this.displayList.add(new p(this.scene,f,u,l,a,o,c,h,d,v,m))})},88059:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(50639),f=e(95525),s.exports={renderWebGL:p,renderCanvas:f}},50639:(s,g,e)=>{var n=e(73329),p=e(75512),f=function(u,l,a,o){a.addToRenderList(l);var c=u.pipelines.set(l.pipeline),h=n(l,a,o),d=c.calcMatrix.copyFrom(h.calc);d.translate(-l._displayOriginX,-l._displayOriginY);var v=a.alpha*l.alpha,m=l.width,y=l.height,C=l.cellWidth,T=l.cellHeight,P=Math.ceil(m/C),S=Math.ceil(y/T),M=C,E=T,A=C-(P*C-m),R=T-(S*T-y),w,O,F=l.showCells,b=l.showAltCells,I=l.showOutline,N=0,z=0,U=0,W=0,D=0;if(I&&(M--,E--,A===C&&A--,R===T&&R--),u.pipelines.preBatch(l),F&&l.fillAlpha>0)for(w=c.fillTint,O=p.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*v),w.TL=O,w.TR=O,w.BL=O,w.BR=O,z=0;z<S;z++)for(b&&(U=z%2),N=0;N<P;N++){if(b&&U){U=0;continue}U++,W=N<P-1?M:A,D=z<S-1?E:R,c.batchFillRect(N*C,z*T,W,D)}if(b&&l.altFillAlpha>0)for(w=c.fillTint,O=p.getTintAppendFloatAlpha(l.altFillColor,l.altFillAlpha*v),w.TL=O,w.TR=O,w.BL=O,w.BR=O,z=0;z<S;z++)for(b&&(U=z%2),N=0;N<P;N++){if(b&&!U){U=1;continue}U=0,W=N<P-1?M:A,D=z<S-1?E:R,c.batchFillRect(N*C,z*T,W,D)}if(I&&l.outlineFillAlpha>0){var V=c.strokeTint,L=p.getTintAppendFloatAlpha(l.outlineFillColor,l.outlineFillAlpha*v);for(V.TL=L,V.TR=L,V.BL=L,V.BR=L,N=1;N<P;N++){var B=N*C;c.batchLine(B,0,B,y,1,1,1,0,!1)}for(z=1;z<S;z++){var G=z*T;c.batchLine(0,G,m,G,1,1,1,0,!1)}}u.pipelines.postBatch(l)};s.exports=f},4415:(s,g,e)=>{var n=e(72296),p=e(56694),f=e(91461),u=new p({Extends:f,Mixins:[n],initialize:function(a,o,c,h,d,v,m,y){o===void 0&&(o=0),c===void 0&&(c=0),h===void 0&&(h=48),d===void 0&&(d=32),v===void 0&&(v=15658734),m===void 0&&(m=10066329),y===void 0&&(y=13421772),f.call(this,a,"IsoBox",null),this.projection=4,this.fillTop=v,this.fillLeft=m,this.fillRight=y,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(o,c),this.setSize(h,d),this.updateDisplayOrigin()},setProjection:function(l){return this.projection=l,this},setFaces:function(l,a,o){return l===void 0&&(l=!0),a===void 0&&(a=!0),o===void 0&&(o=!0),this.showTop=l,this.showLeft=a,this.showRight=o,this},setFillStyle:function(l,a,o){return this.fillTop=l,this.fillLeft=a,this.fillRight=o,this.isFilled=!0,this}});s.exports=u},32884:(s,g,e)=>{var n=e(15608),p=e(49584),f=function(u,l,a,o){a.addToRenderList(l);var c=u.currentContext;if(p(u,c,l,a,o)&&l.isFilled){var h=l.width,d=l.height,v=h/2,m=h/l.projection;l.showTop&&(n(c,l,l.fillTop),c.beginPath(),c.moveTo(-v,-d),c.lineTo(0,-m-d),c.lineTo(v,-d),c.lineTo(v,-1),c.lineTo(0,m-1),c.lineTo(-v,-1),c.lineTo(-v,-d),c.fill()),l.showLeft&&(n(c,l,l.fillLeft),c.beginPath(),c.moveTo(-v,0),c.lineTo(0,m),c.lineTo(0,m-d),c.lineTo(-v,-d),c.lineTo(-v,0),c.fill()),l.showRight&&(n(c,l,l.fillRight),c.beginPath(),c.moveTo(v,0),c.lineTo(0,m),c.lineTo(0,m-d),c.lineTo(v,-d),c.lineTo(v,0),c.fill()),c.restore()}};s.exports=f},88154:(s,g,e)=>{var n=e(61286),p=e(4415);n.register("isobox",function(f,u,l,a,o,c,h){return this.displayList.add(new p(this.scene,f,u,l,a,o,c,h))})},72296:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(33101),f=e(32884),s.exports={renderWebGL:p,renderCanvas:f}},33101:(s,g,e)=>{var n=e(73329),p=e(75512),f=function(u,l,a,o){a.addToRenderList(l);var c=u.pipelines.set(l.pipeline),h=n(l,a,o),d=c.calcMatrix.copyFrom(h.calc),v=l.width,m=l.height,y=v/2,C=v/l.projection,T=a.alpha*l.alpha;if(!!l.isFilled){var P,S,M,E,A,R,w,O,F;u.pipelines.preBatch(l),l.showTop&&(P=p.getTintAppendFloatAlpha(l.fillTop,T),S=d.getX(-y,-m),M=d.getY(-y,-m),E=d.getX(0,-C-m),A=d.getY(0,-C-m),R=d.getX(y,-m),w=d.getY(y,-m),O=d.getX(0,C-m),F=d.getY(0,C-m),c.batchQuad(l,S,M,E,A,R,w,O,F,0,0,1,1,P,P,P,P,2)),l.showLeft&&(P=p.getTintAppendFloatAlpha(l.fillLeft,T),S=d.getX(-y,0),M=d.getY(-y,0),E=d.getX(0,C),A=d.getY(0,C),R=d.getX(0,C-m),w=d.getY(0,C-m),O=d.getX(-y,-m),F=d.getY(-y,-m),c.batchQuad(l,S,M,E,A,R,w,O,F,0,0,1,1,P,P,P,P,2)),l.showRight&&(P=p.getTintAppendFloatAlpha(l.fillRight,T),S=d.getX(y,0),M=d.getY(y,0),E=d.getX(0,C),A=d.getY(0,C),R=d.getX(0,C-m),w=d.getY(0,C-m),O=d.getX(y,-m),F=d.getY(y,-m),c.batchQuad(l,S,M,E,A,R,w,O,F,0,0,1,1,P,P,P,P,2)),u.pipelines.postBatch(l)}};s.exports=f},65159:(s,g,e)=>{var n=e(56694),p=e(93387),f=e(91461),u=new n({Extends:f,Mixins:[p],initialize:function(a,o,c,h,d,v,m,y,C){o===void 0&&(o=0),c===void 0&&(c=0),h===void 0&&(h=48),d===void 0&&(d=32),v===void 0&&(v=!1),m===void 0&&(m=15658734),y===void 0&&(y=10066329),C===void 0&&(C=13421772),f.call(this,a,"IsoTriangle",null),this.projection=4,this.fillTop=m,this.fillLeft=y,this.fillRight=C,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=v,this.isFilled=!0,this.setPosition(o,c),this.setSize(h,d),this.updateDisplayOrigin()},setProjection:function(l){return this.projection=l,this},setReversed:function(l){return this.isReversed=l,this},setFaces:function(l,a,o){return l===void 0&&(l=!0),a===void 0&&(a=!0),o===void 0&&(o=!0),this.showTop=l,this.showLeft=a,this.showRight=o,this},setFillStyle:function(l,a,o){return this.fillTop=l,this.fillLeft=a,this.fillRight=o,this.isFilled=!0,this}});s.exports=u},9923:(s,g,e)=>{var n=e(15608),p=e(49584),f=function(u,l,a,o){a.addToRenderList(l);var c=u.currentContext;if(p(u,c,l,a,o)&&l.isFilled){var h=l.width,d=l.height,v=h/2,m=h/l.projection,y=l.isReversed;l.showTop&&y&&(n(c,l,l.fillTop),c.beginPath(),c.moveTo(-v,-d),c.lineTo(0,-m-d),c.lineTo(v,-d),c.lineTo(0,m-d),c.fill()),l.showLeft&&(n(c,l,l.fillLeft),c.beginPath(),y?(c.moveTo(-v,-d),c.lineTo(0,m),c.lineTo(0,m-d)):(c.moveTo(-v,0),c.lineTo(0,m),c.lineTo(0,m-d)),c.fill()),l.showRight&&(n(c,l,l.fillRight),c.beginPath(),y?(c.moveTo(v,-d),c.lineTo(0,m),c.lineTo(0,m-d)):(c.moveTo(v,0),c.lineTo(0,m),c.lineTo(0,m-d)),c.fill()),c.restore()}};s.exports=f},67765:(s,g,e)=>{var n=e(61286),p=e(65159);n.register("isotriangle",function(f,u,l,a,o,c,h,d){return this.displayList.add(new p(this.scene,f,u,l,a,o,c,h,d))})},93387:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(54946),f=e(9923),s.exports={renderWebGL:p,renderCanvas:f}},54946:(s,g,e)=>{var n=e(73329),p=e(75512),f=function(u,l,a,o){a.addToRenderList(l);var c=u.pipelines.set(l.pipeline),h=n(l,a,o),d=c.calcMatrix.copyFrom(h.calc),v=l.width,m=l.height,y=v/2,C=v/l.projection,T=l.isReversed,P=a.alpha*l.alpha;if(!!l.isFilled){u.pipelines.preBatch(l);var S,M,E,A,R,w,O;if(l.showTop&&T){S=p.getTintAppendFloatAlpha(l.fillTop,P),M=d.getX(-y,-m),E=d.getY(-y,-m),A=d.getX(0,-C-m),R=d.getY(0,-C-m),w=d.getX(y,-m),O=d.getY(y,-m);var F=d.getX(0,C-m),b=d.getY(0,C-m);c.batchQuad(l,M,E,A,R,w,O,F,b,0,0,1,1,S,S,S,S,2)}l.showLeft&&(S=p.getTintAppendFloatAlpha(l.fillLeft,P),T?(M=d.getX(-y,-m),E=d.getY(-y,-m),A=d.getX(0,C),R=d.getY(0,C),w=d.getX(0,C-m),O=d.getY(0,C-m)):(M=d.getX(-y,0),E=d.getY(-y,0),A=d.getX(0,C),R=d.getY(0,C),w=d.getX(0,C-m),O=d.getY(0,C-m)),c.batchTri(l,M,E,A,R,w,O,0,0,1,1,S,S,S,2)),l.showRight&&(S=p.getTintAppendFloatAlpha(l.fillRight,P),T?(M=d.getX(y,-m),E=d.getY(y,-m),A=d.getX(0,C),R=d.getY(0,C),w=d.getX(0,C-m),O=d.getY(0,C-m)):(M=d.getX(y,0),E=d.getY(y,0),A=d.getX(0,C),R=d.getY(0,C),w=d.getX(0,C-m),O=d.getY(0,C-m)),c.batchTri(l,M,E,A,R,w,O,0,0,1,1,S,S,S,2)),u.pipelines.postBatch(l)}};s.exports=f},579:(s,g,e)=>{var n=e(56694),p=e(91461),f=e(88829),u=e(52660),l=new n({Extends:p,Mixins:[u],initialize:function(o,c,h,d,v,m,y,C,T){c===void 0&&(c=0),h===void 0&&(h=0),d===void 0&&(d=0),v===void 0&&(v=0),m===void 0&&(m=128),y===void 0&&(y=0),p.call(this,o,"Line",new f(d,v,m,y));var P=Math.max(1,this.geom.right-this.geom.left),S=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(c,h),this.setSize(P,S),C!==void 0&&this.setStrokeStyle(1,C,T),this.updateDisplayOrigin()},setLineWidth:function(a,o){return o===void 0&&(o=a),this._startWidth=a,this._endWidth=o,this.lineWidth=a,this},setTo:function(a,o,c,h){return this.geom.setTo(a,o,c,h),this}});s.exports=l},52044:(s,g,e)=>{var n=e(17876),p=e(49584),f=function(u,l,a,o){a.addToRenderList(l);var c=u.currentContext;if(p(u,c,l,a,o)){var h=l._displayOriginX,d=l._displayOriginY;l.isStroked&&(n(c,l),c.beginPath(),c.moveTo(l.geom.x1-h,l.geom.y1-d),c.lineTo(l.geom.x2-h,l.geom.y2-d),c.stroke()),c.restore()}};s.exports=f},85665:(s,g,e)=>{var n=e(61286),p=e(579);n.register("line",function(f,u,l,a,o,c,h,d){return this.displayList.add(new p(this.scene,f,u,l,a,o,c,h,d))})},52660:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(46952),f=e(52044),s.exports={renderWebGL:p,renderCanvas:f}},46952:(s,g,e)=>{var n=e(73329),p=e(75512),f=function(u,l,a,o){a.addToRenderList(l);var c=u.pipelines.set(l.pipeline),h=n(l,a,o);c.calcMatrix.copyFrom(h.calc);var d=l._displayOriginX,v=l._displayOriginY,m=a.alpha*l.alpha;if(u.pipelines.preBatch(l),l.isStroked){var y=c.strokeTint,C=p.getTintAppendFloatAlpha(l.strokeColor,l.strokeAlpha*m);y.TL=C,y.TR=C,y.BL=C,y.BR=C;var T=l._startWidth,P=l._endWidth;c.batchLine(l.geom.x1-d,l.geom.y1-v,l.geom.x2-d,l.geom.y2-v,T,P,1,0,!1,h.sprite,h.camera)}u.pipelines.postBatch(l)};s.exports=f},91249:(s,g,e)=>{var n=e(70573),p=e(56694),f=e(11117),u=e(14045),l=e(8580),a=e(91461),o=e(18974),c=new p({Extends:a,Mixins:[n],initialize:function(d,v,m,y,C,T){v===void 0&&(v=0),m===void 0&&(m=0),a.call(this,d,"Polygon",new l(y));var P=u(this.geom);this.setPosition(v,m),this.setSize(P.width,P.height),C!==void 0&&this.setFillStyle(C,T),this.updateDisplayOrigin(),this.updateData()},smooth:function(h){h===void 0&&(h=1);for(var d=0;d<h;d++)o(this.geom);return this.updateData()},setTo:function(h){this.geom.setTo(h);var d=u(this.geom);return this.setSize(d.width,d.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var h=[],d=this.geom.points,v=0;v<d.length;v++)h.push(d[v].x,d[v].y);return h.push(d[0].x,d[0].y),this.pathIndexes=f(h),this.pathData=h,this}});s.exports=c},40834:(s,g,e)=>{var n=e(15608),p=e(17876),f=e(49584),u=function(l,a,o,c){o.addToRenderList(a);var h=l.currentContext;if(f(l,h,a,o,c)){var d=a._displayOriginX,v=a._displayOriginY,m=a.pathData,y=m.length-1,C=m[0]-d,T=m[1]-v;h.beginPath(),h.moveTo(C,T),a.closePath||(y-=2);for(var P=2;P<y;P+=2){var S=m[P]-d,M=m[P+1]-v;h.lineTo(S,M)}a.closePath&&h.closePath(),a.isFilled&&(n(h,a),h.fill()),a.isStroked&&(p(h,a),h.stroke()),h.restore()}};s.exports=u},88203:(s,g,e)=>{var n=e(61286),p=e(91249);n.register("polygon",function(f,u,l,a,o){return this.displayList.add(new p(this.scene,f,u,l,a,o))})},70573:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(72841),f=e(40834),s.exports={renderWebGL:p,renderCanvas:f}},72841:(s,g,e)=>{var n=e(19543),p=e(73329),f=e(50262),u=function(l,a,o,c){o.addToRenderList(a);var h=l.pipelines.set(a.pipeline),d=p(a,o,c),v=h.calcMatrix.copyFrom(d.calc),m=a._displayOriginX,y=a._displayOriginY,C=o.alpha*a.alpha;l.pipelines.preBatch(a),a.isFilled&&n(h,v,a,C,m,y),a.isStroked&&f(h,a,C,m,y),l.pipelines.postBatch(a)};s.exports=u},517:(s,g,e)=>{var n=e(56694),p=e(74118),f=e(91461),u=e(37673),l=new n({Extends:f,Mixins:[u],initialize:function(o,c,h,d,v,m,y){c===void 0&&(c=0),h===void 0&&(h=0),d===void 0&&(d=128),v===void 0&&(v=128),f.call(this,o,"Rectangle",new p(0,0,d,v)),this.setPosition(c,h),this.setSize(d,v),m!==void 0&&this.setFillStyle(m,y),this.updateDisplayOrigin(),this.updateData()},setSize:function(a,o){this.width=a,this.height=o,this.geom.setSize(a,o),this.updateData(),this.updateDisplayOrigin();var c=this.input;return c&&!c.customHitArea&&(c.hitArea.width=a,c.hitArea.height=o),this},updateData:function(){var a=[],o=this.geom,c=this._tempLine;return o.getLineA(c),a.push(c.x1,c.y1,c.x2,c.y2),o.getLineB(c),a.push(c.x2,c.y2),o.getLineC(c),a.push(c.x2,c.y2),o.getLineD(c),a.push(c.x2,c.y2),this.pathData=a,this}});s.exports=l},4091:(s,g,e)=>{var n=e(15608),p=e(17876),f=e(49584),u=function(l,a,o,c){o.addToRenderList(a);var h=l.currentContext;if(f(l,h,a,o,c)){var d=a._displayOriginX,v=a._displayOriginY;a.isFilled&&(n(h,a),h.fillRect(-d,-v,a.width,a.height)),a.isStroked&&(p(h,a),h.beginPath(),h.rect(-d,-v,a.width,a.height),h.stroke()),h.restore()}};s.exports=u},94355:(s,g,e)=>{var n=e(61286),p=e(517);n.register("rectangle",function(f,u,l,a,o,c){return this.displayList.add(new p(this.scene,f,u,l,a,o,c))})},37673:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(43532),f=e(4091),s.exports={renderWebGL:p,renderCanvas:f}},43532:(s,g,e)=>{var n=e(73329),p=e(50262),f=e(75512),u=function(l,a,o,c){o.addToRenderList(a);var h=l.pipelines.set(a.pipeline),d=n(a,o,c);h.calcMatrix.copyFrom(d.calc);var v=a._displayOriginX,m=a._displayOriginY,y=o.alpha*a.alpha;if(l.pipelines.preBatch(a),a.isFilled){var C=h.fillTint,T=f.getTintAppendFloatAlpha(a.fillColor,a.fillAlpha*y);C.TL=T,C.TR=T,C.BL=T,C.BR=T,h.batchFillRect(-v,-m,a.width,a.height)}a.isStroked&&p(h,a,y,v,m),l.pipelines.postBatch(a)};s.exports=u},77843:(s,g,e)=>{var n=e(87956),p=e(56694),f=e(11117),u=e(91461),l=new p({Extends:u,Mixins:[n],initialize:function(o,c,h,d,v,m,y,C){c===void 0&&(c=0),h===void 0&&(h=0),d===void 0&&(d=5),v===void 0&&(v=32),m===void 0&&(m=64),u.call(this,o,"Star",null),this._points=d,this._innerRadius=v,this._outerRadius=m,this.setPosition(c,h),this.setSize(m*2,m*2),y!==void 0&&this.setFillStyle(y,C),this.updateDisplayOrigin(),this.updateData()},setPoints:function(a){return this._points=a,this.updateData()},setInnerRadius:function(a){return this._innerRadius=a,this.updateData()},setOuterRadius:function(a){return this._outerRadius=a,this.updateData()},points:{get:function(){return this._points},set:function(a){this._points=a,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(a){this._innerRadius=a,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(a){this._outerRadius=a,this.updateData()}},updateData:function(){var a=[],o=this._points,c=this._innerRadius,h=this._outerRadius,d=Math.PI/2*3,v=Math.PI/o,m=h,y=h;a.push(m,y+-h);for(var C=0;C<o;C++)a.push(m+Math.cos(d)*h,y+Math.sin(d)*h),d+=v,a.push(m+Math.cos(d)*c,y+Math.sin(d)*c),d+=v;return a.push(m,y+-h),this.pathIndexes=f(a),this.pathData=a,this}});s.exports=l},11401:(s,g,e)=>{var n=e(15608),p=e(17876),f=e(49584),u=function(l,a,o,c){o.addToRenderList(a);var h=l.currentContext;if(f(l,h,a,o,c)){var d=a._displayOriginX,v=a._displayOriginY,m=a.pathData,y=m.length-1,C=m[0]-d,T=m[1]-v;h.beginPath(),h.moveTo(C,T),a.closePath||(y-=2);for(var P=2;P<y;P+=2){var S=m[P]-d,M=m[P+1]-v;h.lineTo(S,M)}h.closePath(),a.isFilled&&(n(h,a),h.fill()),a.isStroked&&(p(h,a),h.stroke()),h.restore()}};s.exports=u},23962:(s,g,e)=>{var n=e(77843),p=e(61286);p.register("star",function(f,u,l,a,o,c,h){return this.displayList.add(new n(this.scene,f,u,l,a,o,c,h))})},87956:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(12037),f=e(11401),s.exports={renderWebGL:p,renderCanvas:f}},12037:(s,g,e)=>{var n=e(19543),p=e(73329),f=e(50262),u=function(l,a,o,c){o.addToRenderList(a);var h=l.pipelines.set(a.pipeline),d=p(a,o,c),v=h.calcMatrix.copyFrom(d.calc),m=a._displayOriginX,y=a._displayOriginY,C=o.alpha*a.alpha;l.pipelines.preBatch(a),a.isFilled&&n(h,v,a,C,m,y),a.isStroked&&f(h,a,C,m,y),l.pipelines.postBatch(a)};s.exports=u},21873:(s,g,e)=>{var n=e(56694),p=e(91461),f=e(66349),u=e(70498),l=new n({Extends:p,Mixins:[u],initialize:function(o,c,h,d,v,m,y,C,T,P,S){c===void 0&&(c=0),h===void 0&&(h=0),d===void 0&&(d=0),v===void 0&&(v=128),m===void 0&&(m=64),y===void 0&&(y=0),C===void 0&&(C=128),T===void 0&&(T=128),p.call(this,o,"Triangle",new f(d,v,m,y,C,T));var M=this.geom.right-this.geom.left,E=this.geom.bottom-this.geom.top;this.setPosition(c,h),this.setSize(M,E),P!==void 0&&this.setFillStyle(P,S),this.updateDisplayOrigin(),this.updateData()},setTo:function(a,o,c,h,d,v){return this.geom.setTo(a,o,c,h,d,v),this.updateData()},updateData:function(){var a=[],o=this.geom,c=this._tempLine;return o.getLineA(c),a.push(c.x1,c.y1,c.x2,c.y2),o.getLineB(c),a.push(c.x2,c.y2),o.getLineC(c),a.push(c.x2,c.y2),this.pathData=a,this}});s.exports=l},60213:(s,g,e)=>{var n=e(15608),p=e(17876),f=e(49584),u=function(l,a,o,c){o.addToRenderList(a);var h=l.currentContext;if(f(l,h,a,o,c)){var d=a._displayOriginX,v=a._displayOriginY,m=a.geom.x1-d,y=a.geom.y1-v,C=a.geom.x2-d,T=a.geom.y2-v,P=a.geom.x3-d,S=a.geom.y3-v;h.beginPath(),h.moveTo(m,y),h.lineTo(C,T),h.lineTo(P,S),h.closePath(),a.isFilled&&(n(h,a),h.fill()),a.isStroked&&(p(h,a),h.stroke()),h.restore()}};s.exports=u},79296:(s,g,e)=>{var n=e(61286),p=e(21873);n.register("triangle",function(f,u,l,a,o,c,h,d,v,m){return this.displayList.add(new p(this.scene,f,u,l,a,o,c,h,d,v,m))})},70498:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(72291),f=e(60213),s.exports={renderWebGL:p,renderCanvas:f}},72291:(s,g,e)=>{var n=e(73329),p=e(50262),f=e(75512),u=function(l,a,o,c){o.addToRenderList(a);var h=l.pipelines.set(a.pipeline),d=n(a,o,c);h.calcMatrix.copyFrom(d.calc);var v=a._displayOriginX,m=a._displayOriginY,y=o.alpha*a.alpha;if(l.pipelines.preBatch(a),a.isFilled){var C=h.fillTint,T=f.getTintAppendFloatAlpha(a.fillColor,a.fillAlpha*y);C.TL=T,C.TR=T,C.BL=T,C.BR=T;var P=a.geom.x1-v,S=a.geom.y1-m,M=a.geom.x2-v,E=a.geom.y2-m,A=a.geom.x3-v,R=a.geom.y3-m;h.batchFillTriangle(P,S,M,E,A,R,d.sprite,d.camera)}a.isStroked&&p(h,a,y,v,m),l.pipelines.postBatch(a)};s.exports=u},13747:(s,g,e)=>{var n=e(16569),p=e(56694),f=e(64937),u=e(89980),l=e(20791),a=new p({Extends:u,Mixins:[f.Alpha,f.BlendMode,f.Depth,f.Flip,f.GetBounds,f.Mask,f.Origin,f.Pipeline,f.PostPipeline,f.ScrollFactor,f.Size,f.TextureCrop,f.Tint,f.Transform,f.Visible,l],initialize:function(c,h,d,v,m){u.call(this,c,"Sprite"),this._crop=this.resetCropObject(),this.anims=new n(this),this.setTexture(v,m),this.setPosition(h,d),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(o,c){this.anims.update(o,c)},play:function(o,c){return this.anims.play(o,c)},playReverse:function(o,c){return this.anims.playReverse(o,c)},playAfterDelay:function(o,c){return this.anims.playAfterDelay(o,c)},playAfterRepeat:function(o,c){return this.anims.playAfterRepeat(o,c)},chain:function(o){return this.anims.chain(o)},stop:function(){return this.anims.stop()},stopAfterDelay:function(o){return this.anims.stopAfterDelay(o)},stopAfterRepeat:function(o){return this.anims.stopAfterRepeat(o)},stopOnFrame:function(o){return this.anims.stopOnFrame(o)},toJSON:function(){return f.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});s.exports=a},27573:s=>{var g=function(e,n,p,f){p.addToRenderList(n),e.batchSprite(n,n.frame,p,f)};s.exports=g},89219:(s,g,e)=>{var n=e(88933),p=e(32291),f=e(99325),u=e(20494),l=e(13747);f.register("sprite",function(a,o){a===void 0&&(a={});var c=u(a,"key",null),h=u(a,"frame",null),d=new l(this.scene,0,0,c,h);return o!==void 0&&(a.add=o),n(this.scene,d,a),p(d,a),d})},66135:(s,g,e)=>{var n=e(61286),p=e(13747);n.register("sprite",function(f,u,l,a){return this.displayList.add(new p(this.scene,f,u,l,a))})},20791:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(21034),f=e(27573),s.exports={renderWebGL:p,renderCanvas:f}},21034:s=>{var g=function(e,n,p,f){p.addToRenderList(n),n.pipeline.batchSprite(n,p,f)};s.exports=g},32979:s=>{var g=function(e,n,p){var f=e.canvas,u=e.context,l=e.style,a=[],o=0,c=p.length;l.maxLines>0&&l.maxLines<p.length&&(c=l.maxLines),l.syncFont(f,u);for(var h=0;h<c;h++){var d=l.strokeThickness;d+=u.measureText(p[h]).width,l.wordWrap&&(d-=u.measureText(" ").width),a[h]=Math.ceil(d),o=Math.max(o,a[h])}var v=n.fontSize+l.strokeThickness,m=v*c,y=e.lineSpacing;return c>1&&(m+=y*(c-1)),{width:o,height:m,lines:c,lineWidths:a,lineSpacing:y,lineHeight:v}};s.exports=g},27030:(s,g,e)=>{var n=e(61068),p=function(f){var u=n.create(this),l=u.getContext("2d",{willReadFrequently:!0});f.syncFont(u,l);var a=l.measureText(f.testString);if("actualBoundingBoxAscent"in a){var o=a.actualBoundingBoxAscent,c=a.actualBoundingBoxDescent;return n.remove(u),{ascent:o,descent:c,fontSize:o+c}}var h=Math.ceil(a.width*f.baselineX),d=h,v=2*d;d=d*f.baselineY|0,u.width=h,u.height=v,l.fillStyle="#f00",l.fillRect(0,0,h,v),l.font=f._font,l.textBaseline="alphabetic",l.fillStyle="#000",l.fillText(f.testString,0,d);var m={ascent:0,descent:0,fontSize:0},y=l.getImageData(0,0,h,v);if(!y)return m.ascent=d,m.descent=d+6,m.fontSize=m.ascent+m.descent,n.remove(u),m;var C=y.data,T=C.length,P=h*4,S,M,E=0,A=!1;for(S=0;S<d;S++){for(M=0;M<P;M+=4)if(C[E+M]!==255){A=!0;break}if(!A)E+=P;else break}for(m.ascent=d-S,E=T-P,A=!1,S=v;S>d;S--){for(M=0;M<P;M+=4)if(C[E+M]!==255){A=!0;break}if(!A)E-=P;else break}return m.descent=S-d,m.fontSize=m.ascent+m.descent,n.remove(u),m};s.exports=p},76555:(s,g,e)=>{var n=e(99584),p=e(61068),f=e(56694),u=e(64937),l=e(89980),a=e(32979),o=e(10850),c=e(55638),h=e(80032),d=e(74744),v=new f({Extends:l,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Crop,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Tint,u.Transform,u.Visible,h],initialize:function(y,C,T,P,S){C===void 0&&(C=0),T===void 0&&(T=0),l.call(this,y,"Text"),this.renderer=y.sys.renderer,this.setPosition(C,T),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=p.create(this),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.style=new d(this,S),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=y.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(P),S&&S.padding&&this.setPadding(S.padding),S&&S.lineSpacing&&this.setLineSpacing(S.lineSpacing)},initRTL:function(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",n(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(m){var y=this.style;if(y.wordWrapCallback){var C=y.wordWrapCallback.call(y.wordWrapCallbackScope,m,this);return Array.isArray(C)&&(C=C.join(`
`)),C}else return y.wordWrapWidth?y.wordWrapUseAdvanced?this.advancedWordWrap(m,this.context,this.style.wordWrapWidth):this.basicWordWrap(m,this.context,this.style.wordWrapWidth):m},advancedWordWrap:function(m,y,C){for(var T="",P=m.replace(/ +/gi," ").split(this.splitRegExp),S=P.length,M=0;M<S;M++){var E=P[M],A="";E=E.replace(/^ *|\s*$/gi,"");var R=y.measureText(E).width;if(R<C){T+=E+`
`;continue}for(var w=C,O=E.split(" "),F=0;F<O.length;F++){var b=O[F],I=b+" ",N=y.measureText(I).width;if(N>w){if(F===0){for(var z=I;z.length&&(z=z.slice(0,-1),N=y.measureText(z).width,!(N<=w)););if(!z.length)throw new Error("wordWrapWidth < a single character");var U=b.substr(z.length);O[F]=U,A+=z}var W=O[F].length?F:F+1,D=O.slice(W).join(" ").replace(/[ \n]*$/gi,"");P.splice(M+1,0,D),S=P.length;break}else A+=I,w-=N}T+=A.replace(/[ \n]*$/gi,"")+`
`}return T=T.replace(/[\s|\n]*$/gi,""),T},basicWordWrap:function(m,y,C){for(var T="",P=m.split(this.splitRegExp),S=P.length-1,M=y.measureText(" ").width,E=0;E<=S;E++){for(var A=C,R=P[E].split(" "),w=R.length-1,O=0;O<=w;O++){var F=R[O],b=y.measureText(F).width,I=b;O<w&&(I+=M),I>A&&O>0&&(T+=`
`,A=C),T+=F,O<w?(T+=" ",A-=I):A-=b}E<S&&(T+=`
`)}return T},getWrappedText:function(m){m===void 0&&(m=this._text),this.style.syncFont(this.canvas,this.context);var y=this.runWordWrap(m);return y.split(this.splitRegExp)},setText:function(m){return!m&&m!==0&&(m=""),Array.isArray(m)&&(m=m.join(`
`)),m!==this._text&&(this._text=m.toString(),this.updateText()),this},appendText:function(m,y){y===void 0&&(y=!0),!m&&m!==0&&(m=""),Array.isArray(m)&&(m=m.join(`
`)),m=m.toString();var C=this._text.concat(y?`
`+m:m);return C!==this._text&&(this._text=C,this.updateText()),this},setStyle:function(m){return this.style.setStyle(m)},setFont:function(m){return this.style.setFont(m)},setFontFamily:function(m){return this.style.setFontFamily(m)},setFontSize:function(m){return this.style.setFontSize(m)},setFontStyle:function(m){return this.style.setFontStyle(m)},setFixedSize:function(m,y){return this.style.setFixedSize(m,y)},setBackgroundColor:function(m){return this.style.setBackgroundColor(m)},setFill:function(m){return this.style.setFill(m)},setColor:function(m){return this.style.setColor(m)},setStroke:function(m,y){return this.style.setStroke(m,y)},setShadow:function(m,y,C,T,P,S){return this.style.setShadow(m,y,C,T,P,S)},setShadowOffset:function(m,y){return this.style.setShadowOffset(m,y)},setShadowColor:function(m){return this.style.setShadowColor(m)},setShadowBlur:function(m){return this.style.setShadowBlur(m)},setShadowStroke:function(m){return this.style.setShadowStroke(m)},setShadowFill:function(m){return this.style.setShadowFill(m)},setWordWrapWidth:function(m,y){return this.style.setWordWrapWidth(m,y)},setWordWrapCallback:function(m,y){return this.style.setWordWrapCallback(m,y)},setAlign:function(m){return this.style.setAlign(m)},setResolution:function(m){return this.style.setResolution(m)},setLineSpacing:function(m){return this.lineSpacing=m,this.updateText()},setPadding:function(m,y,C,T){if(typeof m=="object"){var P=m,S=o(P,"x",null);S!==null?(m=S,C=S):(m=o(P,"left",0),C=o(P,"right",m));var M=o(P,"y",null);M!==null?(y=M,T=M):(y=o(P,"top",0),T=o(P,"bottom",y))}else m===void 0&&(m=0),y===void 0&&(y=m),C===void 0&&(C=m),T===void 0&&(T=y);return this.padding.left=m,this.padding.top=y,this.padding.right=C,this.padding.bottom=T,this.updateText()},setMaxLines:function(m){return this.style.setMaxLines(m)},updateText:function(){var m=this.canvas,y=this.context,C=this.style,T=C.resolution,P=C.metrics;C.syncFont(m,y);var S=this._text;(C.wordWrapWidth||C.wordWrapCallback)&&(S=this.runWordWrap(this._text));var M=S.split(this.splitRegExp),E=a(this,P,M),A=this.padding,R;C.fixedWidth===0?(this.width=E.width+A.left+A.right,R=E.width):(this.width=C.fixedWidth,R=this.width-A.left-A.right,R<E.width&&(R=E.width)),C.fixedHeight===0?this.height=E.height+A.top+A.bottom:this.height=C.fixedHeight;var w=this.width,O=this.height;this.updateDisplayOrigin(),w*=T,O*=T,w=Math.max(w,1),O=Math.max(O,1),m.width!==w||m.height!==O?(m.width=w,m.height=O,this.frame.setSize(w,O),C.syncFont(m,y),C.rtl&&(y.direction="rtl")):y.clearRect(0,0,w,O),y.save(),y.scale(T,T),C.backgroundColor&&(y.fillStyle=C.backgroundColor,y.fillRect(0,0,w,O)),C.syncStyle(m,y),y.translate(A.left,A.top);for(var F,b,I=0;I<E.lines;I++){if(F=C.strokeThickness/2,b=C.strokeThickness/2+I*E.lineHeight+P.ascent,I>0&&(b+=E.lineSpacing*I),C.rtl)F=w-F-A.left-A.right;else if(C.align==="right")F+=R-E.lineWidths[I];else if(C.align==="center")F+=(R-E.lineWidths[I])/2;else if(C.align==="justify"){var N=.85;if(E.lineWidths[I]/E.width>=N){var z=E.width-E.lineWidths[I],U=y.measureText(" ").width,W=M[I].trim(),D=W.split(" ");z+=(M[I].length-W.length)*U;for(var V=Math.floor(z/U),L=0;V>0;)D[L]+=" ",L=(L+1)%(D.length-1||1),--V;M[I]=D.join(" ")}}this.autoRound&&(F=Math.round(F),b=Math.round(b)),C.strokeThickness&&(C.syncShadow(y,C.shadowStroke),y.strokeText(M[I],F,b)),C.color&&(C.syncShadow(y,C.shadowFill),y.fillText(M[I],F,b))}y.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(m,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var B=this.input;return B&&!B.customHitArea&&(B.hitArea.width=this.width,B.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(m){this.setText(m)}},toJSON:function(){var m=u.ToJSON(this),y={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return m.data=y,m},preDestroy:function(){this.style.rtl&&c(this.canvas),p.remove(this.canvas),this.texture.destroy()}});s.exports=v},71649:s=>{var g=function(e,n,p,f){n.width===0||n.height===0||(p.addToRenderList(n),e.batchSprite(n,n.frame,p,f))};s.exports=g},75397:(s,g,e)=>{var n=e(88933),p=e(99325),f=e(20494),u=e(76555);p.register("text",function(l,a){l===void 0&&(l={});var o=f(l,"text",""),c=f(l,"style",null),h=f(l,"padding",null);h!==null&&(c.padding=h);var d=new u(this.scene,0,0,o,c);return a!==void 0&&(l.add=a),n(this.scene,d,l),d.autoRound=f(l,"autoRound",!0),d.resolution=f(l,"resolution",1),d})},94627:(s,g,e)=>{var n=e(76555),p=e(61286);p.register("text",function(f,u,l,a){return this.displayList.add(new n(this.scene,f,u,l,a))})},80032:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(76128),f=e(71649),s.exports={renderWebGL:p,renderCanvas:f}},74744:(s,g,e)=>{var n=e(56694),p=e(20494),f=e(10850),u=e(27030),l={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\xC3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},a=new n({initialize:function(c,h){this.parent=c,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(h,!1,!0)},setStyle:function(o,c,h){c===void 0&&(c=!0),h===void 0&&(h=!1),o&&o.hasOwnProperty("fontSize")&&typeof o.fontSize=="number"&&(o.fontSize=o.fontSize.toString()+"px");for(var d in l){var v=h?l[d][1]:this[d];d==="wordWrapCallback"||d==="wordWrapCallbackScope"?this[d]=f(o,l[d][0],v):this[d]=p(o,l[d][0],v)}var m=f(o,"font",null);m!==null&&this.setFont(m,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var y=f(o,"fill",null);y!==null&&(this.color=y);var C=f(o,"metrics",!1);return C?this.metrics={ascent:f(C,"ascent",0),descent:f(C,"descent",0),fontSize:f(C,"fontSize",0)}:(c||!this.metrics)&&(this.metrics=u(this)),c?this.parent.updateText():this.parent},syncFont:function(o,c){c.font=this._font},syncStyle:function(o,c){c.textBaseline="alphabetic",c.fillStyle=this.color,c.strokeStyle=this.stroke,c.lineWidth=this.strokeThickness,c.lineCap="round",c.lineJoin="round"},syncShadow:function(o,c){c?(o.shadowOffsetX=this.shadowOffsetX,o.shadowOffsetY=this.shadowOffsetY,o.shadowColor=this.shadowColor,o.shadowBlur=this.shadowBlur):(o.shadowOffsetX=0,o.shadowOffsetY=0,o.shadowColor=0,o.shadowBlur=0)},update:function(o){return o&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=u(this)),this.parent.updateText()},setFont:function(o,c){c===void 0&&(c=!0);var h=o,d="",v="";if(typeof o!="string")h=f(o,"fontFamily","Courier"),d=f(o,"fontSize","16px"),v=f(o,"fontStyle","");else{var m=o.split(" "),y=0;v=m.length>2?m[y++]:"",d=m[y++]||"16px",h=m[y++]||"Courier"}return(h!==this.fontFamily||d!==this.fontSize||v!==this.fontStyle)&&(this.fontFamily=h,this.fontSize=d,this.fontStyle=v,c&&this.update(!0)),this.parent},setFontFamily:function(o){return this.fontFamily!==o&&(this.fontFamily=o,this.update(!0)),this.parent},setFontStyle:function(o){return this.fontStyle!==o&&(this.fontStyle=o,this.update(!0)),this.parent},setFontSize:function(o){return typeof o=="number"&&(o=o.toString()+"px"),this.fontSize!==o&&(this.fontSize=o,this.update(!0)),this.parent},setTestString:function(o){return this.testString=o,this.update(!0)},setFixedSize:function(o,c){return this.fixedWidth=o,this.fixedHeight=c,o&&(this.parent.width=o),c&&(this.parent.height=c),this.update(!1)},setBackgroundColor:function(o){return this.backgroundColor=o,this.update(!1)},setFill:function(o){return this.color=o,this.update(!1)},setColor:function(o){return this.color=o,this.update(!1)},setResolution:function(o){return this.resolution=o,this.update(!1)},setStroke:function(o,c){return c===void 0&&(c=this.strokeThickness),o===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==o||this.strokeThickness!==c)&&(this.stroke=o,this.strokeThickness=c,this.update(!0)),this.parent},setShadow:function(o,c,h,d,v,m){return o===void 0&&(o=0),c===void 0&&(c=0),h===void 0&&(h="#000"),d===void 0&&(d=0),v===void 0&&(v=!1),m===void 0&&(m=!0),this.shadowOffsetX=o,this.shadowOffsetY=c,this.shadowColor=h,this.shadowBlur=d,this.shadowStroke=v,this.shadowFill=m,this.update(!1)},setShadowOffset:function(o,c){return o===void 0&&(o=0),c===void 0&&(c=o),this.shadowOffsetX=o,this.shadowOffsetY=c,this.update(!1)},setShadowColor:function(o){return o===void 0&&(o="#000"),this.shadowColor=o,this.update(!1)},setShadowBlur:function(o){return o===void 0&&(o=0),this.shadowBlur=o,this.update(!1)},setShadowStroke:function(o){return this.shadowStroke=o,this.update(!1)},setShadowFill:function(o){return this.shadowFill=o,this.update(!1)},setWordWrapWidth:function(o,c){return c===void 0&&(c=!1),this.wordWrapWidth=o,this.wordWrapUseAdvanced=c,this.update(!1)},setWordWrapCallback:function(o,c){return c===void 0&&(c=null),this.wordWrapCallback=o,this.wordWrapCallbackScope=c,this.update(!1)},setAlign:function(o){return o===void 0&&(o="left"),this.align=o,this.update(!1)},setMaxLines:function(o){return o===void 0&&(o=0),this.maxLines=o,this.update(!1)},getTextMetrics:function(){var o=this.metrics;return{ascent:o.ascent,descent:o.descent,fontSize:o.fontSize}},toJSON:function(){var o={};for(var c in l)o[c]=this[c];return o.metrics=this.getTextMetrics(),o},destroy:function(){this.parent=void 0}});s.exports=a},76128:(s,g,e)=>{var n=e(75512),p=function(f,u,l,a){if(!(u.width===0||u.height===0)){l.addToRenderList(u);var o=u.frame,c=o.width,h=o.height,d=n.getTintAppendFloatAlpha,v=f.pipelines.set(u.pipeline,u),m=v.setTexture2D(o.glTexture,u);v.batchTexture(u,o.glTexture,c,h,u.x,u.y,c/u.style.resolution,h/u.style.resolution,u.scaleX,u.scaleY,u.rotation,u.flipX,u.flipY,u.scrollFactorX,u.scrollFactorY,u.displayOriginX,u.displayOriginY,0,0,c,h,d(u.tintTopLeft,l.alpha*u._alphaTL),d(u.tintTopRight,l.alpha*u._alphaTR),d(u.tintBottomLeft,l.alpha*u._alphaBL),d(u.tintBottomRight,l.alpha*u._alphaBR),u.tintFill,0,0,l,a,!1,m)}};s.exports=p},35856:(s,g,e)=>{var n=e(61068),p=e(56694),f=e(64937),u=e(89980),l=e(3504),a=e(8213),o=e(9271),c=e(93736),h=8,d=new p({Extends:u,Mixins:[f.Alpha,f.BlendMode,f.ComputedSize,f.Crop,f.Depth,f.Flip,f.GetBounds,f.Mask,f.Origin,f.Pipeline,f.PostPipeline,f.ScrollFactor,f.Tint,f.Transform,f.Visible,o],initialize:function(m,y,C,T,P,S,M){var E=m.sys.renderer;u.call(this,m,"TileSprite");var A=m.sys.textures.get(S),R=A.get(M);R.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),A=m.sys.textures.get("__MISSING"),R=A.get()),A.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),A=m.sys.textures.get("__MISSING"),R=A.get()),!T||!P?(T=R.width,P=R.height):(T=Math.floor(T),P=Math.floor(P)),this._tilePosition=new c,this._tileScale=new c(1,1),this.dirty=!1,this.renderer=E,this.canvas=n.create(this,T,P),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=A,this.displayFrame=R,this._crop=this.resetCropObject(),this.texture=m.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=l(R.width),this.potHeight=l(R.height),this.fillCanvas=n.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(y,C),this.setSize(T,P),this.setFrame(M),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(v,m){return this.displayTexture=this.scene.sys.textures.get(v),this.setFrame(m)},setFrame:function(v){var m=this.displayTexture.get(v);return this.potWidth=l(m.width),this.potHeight=l(m.height),this.canvas.width=0,!m.cutWidth||!m.cutHeight?this.renderFlags&=~h:this.renderFlags|=h,this.displayFrame=m,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(v,m){return v!==void 0&&(this.tilePositionX=v),m!==void 0&&(this.tilePositionY=m),this},setTileScale:function(v,m){return v===void 0&&(v=this.tileScaleX),m===void 0&&(m=v),this.tileScaleX=v,this.tileScaleY=m,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var v=this.displayFrame;if(v.source.isRenderTexture||v.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var m=this.fillContext,y=this.fillCanvas,C=this.potWidth,T=this.potHeight;(!this.renderer||!this.renderer.gl)&&(C=v.cutWidth,T=v.cutHeight),m.clearRect(0,0,C,T),y.width=C,y.height=T,m.drawImage(v.source.image,v.cutX,v.cutY,v.cutWidth,v.cutHeight,0,0,C,T),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(y,this.fillPattern):this.fillPattern=m.createPattern(y,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var v=this.canvas;if((v.width!==this.width||v.height!==this.height)&&(v.width=this.width,v.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var m=this.context;this.scene.sys.game.config.antialias||a.disable(m);var y=this._tileScale.x,C=this._tileScale.y,T=this._tilePosition.x,P=this._tilePosition.y;m.clearRect(0,0,this.width,this.height),m.save(),m.scale(y,C),m.translate(-T,-P),m.fillStyle=this.fillPattern,m.fillRect(T,P,this.width/y,this.height/C),m.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),n.remove(this.canvas),n.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(v){this._tilePosition.x=v,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(v){this._tilePosition.y=v,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(v){this._tileScale.x=v,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(v){this._tileScale.y=v,this.dirty=!0}}});s.exports=d},93305:s=>{var g=function(e,n,p,f){n.updateCanvas(),p.addToRenderList(n),e.batchSprite(n,n.frame,p,f)};s.exports=g},63950:(s,g,e)=>{var n=e(88933),p=e(99325),f=e(20494),u=e(35856);p.register("tileSprite",function(l,a){l===void 0&&(l={});var o=f(l,"x",0),c=f(l,"y",0),h=f(l,"width",512),d=f(l,"height",512),v=f(l,"key",""),m=f(l,"frame",""),y=new u(this.scene,o,c,h,d,v,m);return a!==void 0&&(l.add=a),n(this.scene,y,l),y})},20509:(s,g,e)=>{var n=e(35856),p=e(61286);p.register("tileSprite",function(f,u,l,a,o,c){return this.displayList.add(new n(this.scene,f,u,l,a,o,c))})},9271:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(74287),f=e(93305),s.exports={renderWebGL:p,renderCanvas:f}},74287:(s,g,e)=>{var n=e(75512),p=function(f,u,l,a){u.updateCanvas();var o=u.width,c=u.height;if(!(o===0||c===0)){l.addToRenderList(u);var h=n.getTintAppendFloatAlpha,d=f.pipelines.set(u.pipeline,u),v=d.setTexture2D(u.fillPattern,u);d.batchTexture(u,u.fillPattern,u.displayFrame.width*u.tileScaleX,u.displayFrame.height*u.tileScaleY,u.x,u.y,o,c,u.scaleX,u.scaleY,u.rotation,u.flipX,u.flipY,u.scrollFactorX,u.scrollFactorY,u.originX*o,u.originY*c,0,0,o,c,h(u.tintTopLeft,l.alpha*u._alphaTL),h(u.tintTopRight,l.alpha*u._alphaTR),h(u.tintBottomLeft,l.alpha*u._alphaBL),h(u.tintBottomRight,l.alpha*u._alphaBR),u.tintFill,u.tilePositionX%u.displayFrame.width/u.displayFrame.width,u.tilePositionY%u.displayFrame.height/u.displayFrame.height,l,a,!1,v)}};s.exports=p},8630:(s,g,e)=>{var n=e(82897),p=e(56694),f=e(64937),u=e(56631),l=e(97081),a=e(89980),o=e(83392),c=e(76038),h=e(76583),d=e(77974),v=new p({Extends:a,Mixins:[f.Alpha,f.BlendMode,f.Depth,f.Flip,f.GetBounds,f.Mask,f.Origin,f.Pipeline,f.PostPipeline,f.ScrollFactor,f.Size,f.TextureCrop,f.Tint,f.Transform,f.Visible,d],initialize:function(y,C,T,P){a.call(this,y,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=h(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._rfvCallbackId=0;var S=y.sys.game;this._device=S.device.video,this.setPosition(C,T),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),S.events.on(l.PAUSE,this.globalPause,this),S.events.on(l.RESUME,this.globalResume,this);var M=y.sys.sound;M&&M.on(c.GLOBAL_MUTE,this.globalMute,this),P&&this.load(P)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(m){var y=this.scene.sys.cache.video.get(m);return y?(this.cacheKey=m,this.loadHandler(y.url,y.noAudio,y.crossOrigin)):console.warn("No video in cache for key: "+m),this},changeSource:function(m,y,C,T,P){y===void 0&&(y=!0),C===void 0&&(C=!1),this.cacheKey!==m&&(this.load(m),y&&this.play(C,T,P))},getVideoKey:function(){return this.cacheKey},loadURL:function(m,y,C){y===void 0&&(y=!1);var T=this._device.getVideoURL(m);return T?(this.cacheKey="",this.loadHandler(T.url,y,C)):console.warn("No supported video format found for "+m),this},loadMediaStream:function(m,y,C){return this.loadHandler(null,y,C,m)},loadHandler:function(m,y,C,T){y||(y=!1);var P=this.video;if(P?(this.removeLoadEventHandlers(),this.stop()):(P=document.createElement("video"),P.controls=!1,P.setAttribute("playsinline","playsinline"),P.setAttribute("preload","auto"),P.setAttribute("disablePictureInPicture","true")),y?(P.muted=!0,P.defaultMuted=!0,P.setAttribute("autoplay","autoplay")):(P.muted=!1,P.defaultMuted=!1,P.removeAttribute("autoplay")),C?P.setAttribute("crossorigin",C):P.removeAttribute("crossorigin"),T)if("srcObject"in P)try{P.srcObject=T}catch(S){if(S.name!=="TypeError")throw S;P.src=URL.createObjectURL(T)}else P.src=URL.createObjectURL(T);else P.src=m;return this.addLoadEventHandlers(),this.retry=0,this.video=P,this._playCalled=!1,P.load(),this},requestVideoFrame:function(m,y){var C=this.video;if(!!C){var T=y.width,P=y.height,S=this.videoTexture,M=this.videoTextureSource,E=!S||M.source!==C;E?(this._codePaused=C.paused,this._codeMuted=C.muted,S?(M.source=C,M.width=T,M.height=P,S.get().setSize(T,P)):(S=this.scene.sys.textures.create(this._key,C,T,P),S.add("__BASE",0,0,0,T,P),this.setTexture(S),this.videoTexture=S,this.videoTextureSource=S.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(u.VIDEO_TEXTURE,this,S)),this.setSizeToFrame(),this.updateDisplayOrigin()):M.update(),this.isStalled=!1,this.metadata=y;var A=y.mediaTime;E&&(this._lastUpdate=A,this.emit(u.VIDEO_CREATED,this,T,P),this.frameReady||(this.frameReady=!0,this.emit(u.VIDEO_PLAY,this))),this._playingMarker?A>=this._markerOut&&(C.loop?(C.currentTime=this._markerIn,this.emit(u.VIDEO_LOOP,this)):(this.stop(!1),this.emit(u.VIDEO_COMPLETE,this))):A<this._lastUpdate&&this.emit(u.VIDEO_LOOP,this),this._lastUpdate=A,this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(m,y,C){y===void 0&&(y=-1),C===void 0&&(C=o.MAX_SAFE_INTEGER);var T=this.video;return!T||this.isPlaying()?(T||console.warn("Video not loaded"),this):(m===void 0&&(m=T.loop),T.loop=m,this._markerIn=y,this._markerOut=C,this._playingMarker=y>-1&&C>y&&C<o.MAX_SAFE_INTEGER,this._playCalled||(this._rfvCallbackId=T.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},addLoadEventHandlers:function(){var m=this.video;m&&(m.addEventListener("error",this._loadCallbackHandler),m.addEventListener("abort",this._loadCallbackHandler))},removeLoadEventHandlers:function(){var m=this.video;m&&(m.removeEventListener("error",this._loadCallbackHandler),m.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var m=this.video;if(m){var y=this._callbacks;for(var C in y)m.addEventListener(C,y[C])}},removeEventHandlers:function(){var m=this.video;if(m){var y=this._callbacks;for(var C in y)m.removeEventListener(C,y[C])}},createPlayPromise:function(m){m===void 0&&(m=!0);var y=this.video,C=y.play();if(C!==void 0){var T=this.playSuccess.bind(this),P=this.playError.bind(this);if(!m){var S=this;P=function(){S.failedPlayAttempts++}}C.then(T).catch(P)}else y.addEventListener("playing",this._callbacks.legacy),m||this.failedPlayAttempts++},addMarker:function(m,y,C){return!isNaN(y)&&y>=0&&!isNaN(C)&&C>y&&(this.markers[m]=[y,C]),this},playMarker:function(m,y){var C=this.markers[m];return C&&this.play(y,C[0],C[1]),this},removeMarker:function(m){return delete this.markers[m],this},snapshot:function(m,y){return m===void 0&&(m=this.width),y===void 0&&(y=this.height),this.snapshotArea(0,0,this.width,this.height,m,y)},snapshotArea:function(m,y,C,T,P,S){m===void 0&&(m=0),y===void 0&&(y=0),C===void 0&&(C=this.width),T===void 0&&(T=this.height),P===void 0&&(P=C),S===void 0&&(S=T);var M=this.video,E=this.snapshotTexture;return E?(E.setSize(P,S),M&&E.context.drawImage(M,m,y,C,T,0,0,P,S)):(E=this.scene.sys.textures.createCanvas(h(),P,S),this.snapshotTexture=E,M&&E.context.drawImage(M,m,y,C,T,0,0,P,S)),E.update()},saveSnapshotTexture:function(m){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,m):this.snapshotTexture=this.scene.sys.textures.createCanvas(m,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(!!this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(u.VIDEO_UNLOCKED,this));var m=this.scene.sys.sound;m&&m.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(m){var y=m.name;y==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(u.VIDEO_LOCKED,this)):y==="NotSupportedError"?(this.stop(!1),this.emit(u.VIDEO_UNSUPPORTED,this,m)):(this.stop(!1),this.emit(u.VIDEO_ERROR,this,m))},legacyPlayHandler:function(){var m=this.video;m&&(this.playSuccess(),m.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(u.VIDEO_PLAYING,this)},loadErrorHandler:function(m){this.stop(!1),this.emit(u.VIDEO_ERROR,this,m)},stalledHandler:function(m){this.isStalled=!0,this.emit(u.VIDEO_STALLED,this,m)},completeHandler:function(){this._playCalled=!1,this.emit(u.VIDEO_COMPLETE,this)},preUpdate:function(m,y){var C=this.video;!C||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=y,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(m){var y=this.video;if(y){var C=y.duration;if(C!==1/0&&!isNaN(C)){var T=C*m;this.setCurrentTime(T)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(m){var y=this.video;if(y){if(typeof m=="string"){var C=m[0],T=parseFloat(m.substr(1));C==="+"?m=y.currentTime+T:C==="-"&&(m=y.currentTime-T)}y.currentTime=m}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(u.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(u.VIDEO_SEEKED,this)},getProgress:function(){var m=this.video;if(m){var y=m.duration;if(y!==1/0&&!isNaN(y))return m.currentTime/y}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(m){m===void 0&&(m=!0),this._codeMuted=m;var y=this.video;return y&&(y.muted=this._systemMuted?!0:m),this},isMuted:function(){return this._codeMuted},globalMute:function(m,y){this._systemMuted=y;var C=this.video;C&&(C.muted=this._codeMuted?!0:y)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(m){m===void 0&&(m=!0);var y=this.video;return this._codePaused=m,y&&!y.ended&&(m?y.paused||(this.removeEventHandlers(),y.pause()):m||(this._playCalled?y.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(m){return m===void 0&&(m=1),this.video&&(this.video.volume=n(m,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(m){return this.video&&(this.video.playbackRate=m),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(m){return m===void 0&&(m=!0),this.video&&(this.video.loop=m),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(m,y){return y===void 0&&(y=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,m),this.videoTextureSource.setFlipY(y)),this._key=m,this.flipY=y,!!this.videoTexture},stop:function(m){m===void 0&&(m=!0);var y=this.video;return y&&(this.removeEventHandlers(),y.cancelVideoFrameCallback(this._rfvCallbackId),y.pause()),this.retry=0,this._playCalled=!1,m&&this.emit(u.VIDEO_STOP,this),this},removeVideoElement:function(){var m=this.video;if(!!m){for(m.parentNode&&m.parentNode.removeChild(m);m.hasChildNodes();)m.removeChild(m.firstChild);m.removeAttribute("autoplay"),m.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var m=this.scene.sys.game.events;m.off(l.PAUSE,this.globalPause,this),m.off(l.RESUME,this.globalResume,this);var y=this.scene.sys.sound;y&&y.off(c.GLOBAL_MUTE,this.globalMute,this)}});s.exports=v},56933:s=>{var g=function(e,n,p,f){n.videoTexture&&(p.addToRenderList(n),e.batchSprite(n,n.frame,p,f))};s.exports=g},65601:(s,g,e)=>{var n=e(88933),p=e(99325),f=e(20494),u=e(8630);p.register("video",function(l,a){l===void 0&&(l={});var o=f(l,"key",null),c=new u(this.scene,0,0,o);return a!==void 0&&(l.add=a),n(this.scene,c,l),c})},215:(s,g,e)=>{var n=e(8630),p=e(61286);p.register("video",function(f,u,l){return this.displayList.add(new n(this.scene,f,u,l))})},77974:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(83572),f=e(56933),s.exports={renderWebGL:p,renderCanvas:f}},83572:s=>{var g=function(e,n,p,f){n.videoTexture&&(p.addToRenderList(n),n.pipeline.batchSprite(n,p,f))};s.exports=g},71030:(s,g,e)=>{var n=e(95723),p=e(26673),f=e(65650),u=e(56694),l=e(64937),a=e(89980),o=e(74118),c=e(94287),h=new u({Extends:a,Mixins:[l.Depth,l.GetBounds,l.Origin,l.Transform,l.ScrollFactor,l.Visible],initialize:function(v,m,y,C,T){C===void 0&&(C=1),T===void 0&&(T=C),a.call(this,v,"Zone"),this.setPosition(m,y),this.width=C,this.height=T,this.blendMode=n.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(d){this.scaleX=d/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(d){this.scaleY=d/this.height}},setSize:function(d,v,m){m===void 0&&(m=!0),this.width=d,this.height=v,this.updateDisplayOrigin();var y=this.input;return m&&y&&!y.customHitArea&&(y.hitArea.width=d,y.hitArea.height=v),this},setDisplaySize:function(d,v){return this.displayWidth=d,this.displayHeight=v,this},setCircleDropZone:function(d){return this.setDropZone(new p(0,0,d),f)},setRectangleDropZone:function(d,v){return this.setDropZone(new o(0,0,d,v),c)},setDropZone:function(d,v){return this.input||this.setInteractive(d,v,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(d,v,m){m.addToRenderList(v)},renderWebGL:function(d,v,m){m.addToRenderList(v)}});s.exports=h},24067:(s,g,e)=>{var n=e(99325),p=e(20494),f=e(71030);n.register("zone",function(u){var l=p(u,"x",0),a=p(u,"y",0),o=p(u,"width",1),c=p(u,"height",o);return new f(this.scene,l,a,o,c)})},34546:(s,g,e)=>{var n=e(71030),p=e(61286);p.register("zone",function(f,u,l,a){return this.displayList.add(new n(this.scene,f,u,l,a))})},95847:s=>{var g=function(e){return e.radius>0?Math.PI*e.radius*e.radius:0};s.exports=g},26673:(s,g,e)=>{var n=e(56694),p=e(65650),f=e(94026),u=e(62941),l=e(52394),a=e(30977),o=new n({initialize:function(h,d,v){h===void 0&&(h=0),d===void 0&&(d=0),v===void 0&&(v=0),this.type=l.CIRCLE,this.x=h,this.y=d,this._radius=v,this._diameter=v*2},contains:function(c,h){return p(this,c,h)},getPoint:function(c,h){return f(this,c,h)},getPoints:function(c,h,d){return u(this,c,h,d)},getRandomPoint:function(c){return a(this,c)},setTo:function(c,h,d){return this.x=c,this.y=h,this._radius=d,this._diameter=d*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(c,h){return h===void 0&&(h=c),this.x=c,this.y=h,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(c){this._radius=c,this._diameter=c*2}},diameter:{get:function(){return this._diameter},set:function(c){this._diameter=c,this._radius=c*.5}},left:{get:function(){return this.x-this._radius},set:function(c){this.x=c+this._radius}},right:{get:function(){return this.x+this._radius},set:function(c){this.x=c-this._radius}},top:{get:function(){return this.y-this._radius},set:function(c){this.y=c+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(c){this.y=c-this._radius}}});s.exports=o},37964:s=>{var g=function(e){return 2*(Math.PI*e.radius)};s.exports=g},72233:(s,g,e)=>{var n=e(79967),p=function(f,u,l){return l===void 0&&(l=new n),l.x=f.x+f.radius*Math.cos(u),l.y=f.y+f.radius*Math.sin(u),l};s.exports=p},61761:(s,g,e)=>{var n=e(26673),p=function(f){return new n(f.x,f.y,f.radius)};s.exports=p},65650:s=>{var g=function(e,n,p){if(e.radius>0&&n>=e.left&&n<=e.right&&p>=e.top&&p<=e.bottom){var f=(e.x-n)*(e.x-n),u=(e.y-p)*(e.y-p);return f+u<=e.radius*e.radius}else return!1};s.exports=g},39187:(s,g,e)=>{var n=e(65650),p=function(f,u){return n(f,u.x,u.y)};s.exports=p},58672:(s,g,e)=>{var n=e(65650),p=function(f,u){return n(f,u.x,u.y)&&n(f,u.right,u.y)&&n(f,u.x,u.bottom)&&n(f,u.right,u.bottom)};s.exports=p},42997:s=>{var g=function(e,n){return n.setTo(e.x,e.y,e.radius)};s.exports=g},94894:s=>{var g=function(e,n){return e.x===n.x&&e.y===n.y&&e.radius===n.radius};s.exports=g},48027:(s,g,e)=>{var n=e(74118),p=function(f,u){return u===void 0&&(u=new n),u.x=f.left,u.y=f.top,u.width=f.diameter,u.height=f.diameter,u};s.exports=p},94026:(s,g,e)=>{var n=e(72233),p=e(91806),f=e(83392),u=e(79967),l=function(a,o,c){c===void 0&&(c=new u);var h=p(o,0,f.PI2);return n(a,h,c)};s.exports=l},62941:(s,g,e)=>{var n=e(37964),p=e(72233),f=e(91806),u=e(83392),l=function(a,o,c,h){h===void 0&&(h=[]),!o&&c>0&&(o=n(a)/c);for(var d=0;d<o;d++){var v=f(d/o,0,u.PI2);h.push(p(a,v))}return h};s.exports=l},34585:s=>{var g=function(e,n,p){return e.x+=n,e.y+=p,e};s.exports=g},88665:s=>{var g=function(e,n){return e.x+=n.x,e.y+=n.y,e};s.exports=g},30977:(s,g,e)=>{var n=e(79967),p=function(f,u){u===void 0&&(u=new n);var l=2*Math.PI*Math.random(),a=Math.random()+Math.random(),o=a>1?2-a:a,c=o*Math.cos(l),h=o*Math.sin(l);return u.x=f.x+c*f.radius,u.y=f.y+h*f.radius,u};s.exports=p},6112:(s,g,e)=>{var n=e(26673);n.Area=e(95847),n.Circumference=e(37964),n.CircumferencePoint=e(72233),n.Clone=e(61761),n.Contains=e(65650),n.ContainsPoint=e(39187),n.ContainsRect=e(58672),n.CopyFrom=e(42997),n.Equals=e(94894),n.GetBounds=e(48027),n.GetPoint=e(94026),n.GetPoints=e(62941),n.Offset=e(34585),n.OffsetPoint=e(88665),n.Random=e(30977),s.exports=n},52394:s=>{var g={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};s.exports=g},58605:s=>{var g=function(e){return e.isEmpty()?0:e.getMajorRadius()*e.getMinorRadius()*Math.PI};s.exports=g},39507:s=>{var g=function(e){var n=e.width/2,p=e.height/2,f=Math.pow(n-p,2)/Math.pow(n+p,2);return Math.PI*(n+p)*(1+3*f/(10+Math.sqrt(4-3*f)))};s.exports=g},86998:(s,g,e)=>{var n=e(79967),p=function(f,u,l){l===void 0&&(l=new n);var a=f.width/2,o=f.height/2;return l.x=f.x+a*Math.cos(u),l.y=f.y+o*Math.sin(u),l};s.exports=p},81773:(s,g,e)=>{var n=e(95669),p=function(f){return new n(f.x,f.y,f.width,f.height)};s.exports=p},72313:s=>{var g=function(e,n,p){if(e.width<=0||e.height<=0)return!1;var f=(n-e.x)/e.width,u=(p-e.y)/e.height;return f*=f,u*=u,f+u<.25};s.exports=g},34368:(s,g,e)=>{var n=e(72313),p=function(f,u){return n(f,u.x,u.y)};s.exports=p},71431:(s,g,e)=>{var n=e(72313),p=function(f,u){return n(f,u.x,u.y)&&n(f,u.right,u.y)&&n(f,u.x,u.bottom)&&n(f,u.right,u.bottom)};s.exports=p},75459:s=>{var g=function(e,n){return n.setTo(e.x,e.y,e.width,e.height)};s.exports=g},95669:(s,g,e)=>{var n=e(56694),p=e(72313),f=e(95340),u=e(54978),l=e(52394),a=e(72006),o=new n({initialize:function(h,d,v,m){h===void 0&&(h=0),d===void 0&&(d=0),v===void 0&&(v=0),m===void 0&&(m=0),this.type=l.ELLIPSE,this.x=h,this.y=d,this.width=v,this.height=m},contains:function(c,h){return p(this,c,h)},getPoint:function(c,h){return f(this,c,h)},getPoints:function(c,h,d){return u(this,c,h,d)},getRandomPoint:function(c){return a(this,c)},setTo:function(c,h,d,v){return this.x=c,this.y=h,this.width=d,this.height=v,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(c,h){return h===void 0&&(h=c),this.x=c,this.y=h,this},setSize:function(c,h){return h===void 0&&(h=c),this.width=c,this.height=h,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(c){this.x=c+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(c){this.x=c-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(c){this.y=c+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(c){this.y=c-this.height/2}}});s.exports=o},98068:s=>{var g=function(e,n){return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height};s.exports=g},72897:(s,g,e)=>{var n=e(74118),p=function(f,u){return u===void 0&&(u=new n),u.x=f.left,u.y=f.top,u.width=f.width,u.height=f.height,u};s.exports=p},95340:(s,g,e)=>{var n=e(86998),p=e(91806),f=e(83392),u=e(79967),l=function(a,o,c){c===void 0&&(c=new u);var h=p(o,0,f.PI2);return n(a,h,c)};s.exports=l},54978:(s,g,e)=>{var n=e(39507),p=e(86998),f=e(91806),u=e(83392),l=function(a,o,c,h){h===void 0&&(h=[]),!o&&c>0&&(o=n(a)/c);for(var d=0;d<o;d++){var v=f(d/o,0,u.PI2);h.push(p(a,v))}return h};s.exports=l},77951:s=>{var g=function(e,n,p){return e.x+=n,e.y+=p,e};s.exports=g},36233:s=>{var g=function(e,n){return e.x+=n.x,e.y+=n.y,e};s.exports=g},72006:(s,g,e)=>{var n=e(79967),p=function(f,u){u===void 0&&(u=new n);var l=Math.random()*Math.PI*2,a=Math.sqrt(Math.random());return u.x=f.x+a*Math.cos(l)*f.width/2,u.y=f.y+a*Math.sin(l)*f.height/2,u};s.exports=p},40652:(s,g,e)=>{var n=e(95669);n.Area=e(58605),n.Circumference=e(39507),n.CircumferencePoint=e(86998),n.Clone=e(81773),n.Contains=e(72313),n.ContainsPoint=e(34368),n.ContainsRect=e(71431),n.CopyFrom=e(75459),n.Equals=e(98068),n.GetBounds=e(72897),n.GetPoint=e(95340),n.GetPoints=e(54978),n.Offset=e(77951),n.OffsetPoint=e(36233),n.Random=e(72006),s.exports=n},84068:(s,g,e)=>{var n=e(52394),p=e(98611),f={Circle:e(6112),Ellipse:e(40652),Intersects:e(7563),Line:e(28482),Mesh:e(14293),Point:e(63472),Polygon:e(44359),Rectangle:e(66658),Triangle:e(87619)};f=p(!1,f,n),s.exports=f},22184:(s,g,e)=>{var n=e(53996),p=function(f,u){return n(f.x,f.y,u.x,u.y)<=f.radius+u.radius};s.exports=p},26535:s=>{var g=function(e,n){var p=n.width/2,f=n.height/2,u=Math.abs(e.x-n.x-p),l=Math.abs(e.y-n.y-f),a=p+e.radius,o=f+e.radius;if(u>a||l>o)return!1;if(u<=p||l<=f)return!0;var c=u-p,h=l-f,d=c*c,v=h*h,m=e.radius*e.radius;return d+v<=m};s.exports=g},71145:(s,g,e)=>{var n=e(79967),p=e(22184),f=function(u,l,a){if(a===void 0&&(a=[]),p(u,l)){var o=u.x,c=u.y,h=u.radius,d=l.x,v=l.y,m=l.radius,y,C,T,P,S;if(c===v)S=(m*m-h*h-d*d+o*o)/(2*(o-d)),y=1,C=-2*v,T=d*d+S*S-2*d*S+v*v-m*m,P=C*C-4*y*T,P===0?a.push(new n(S,-C/(2*y))):P>0&&(a.push(new n(S,(-C+Math.sqrt(P))/(2*y))),a.push(new n(S,(-C-Math.sqrt(P))/(2*y))));else{var M=(o-d)/(c-v),E=(m*m-h*h-d*d+o*o-v*v+c*c)/(2*(c-v));y=M*M+1,C=2*c*M-2*E*M-2*o,T=o*o+c*c+E*E-h*h-2*c*E,P=C*C-4*y*T,P===0?(S=-C/(2*y),a.push(new n(S,E-S*M))):P>0&&(S=(-C+Math.sqrt(P))/(2*y),a.push(new n(S,E-S*M)),S=(-C-Math.sqrt(P))/(2*y),a.push(new n(S,E-S*M)))}}return a};s.exports=f},62508:(s,g,e)=>{var n=e(26111),p=e(26535),f=function(u,l,a){if(a===void 0&&(a=[]),p(u,l)){var o=l.getLineA(),c=l.getLineB(),h=l.getLineC(),d=l.getLineD();n(o,u,a),n(c,u,a),n(h,u,a),n(d,u,a)}return a};s.exports=f},26111:(s,g,e)=>{var n=e(79967),p=e(61472),f=function(u,l,a){if(a===void 0&&(a=[]),p(u,l)){var o=u.x1,c=u.y1,h=u.x2,d=u.y2,v=l.x,m=l.y,y=l.radius,C=h-o,T=d-c,P=o-v,S=c-m,M=C*C+T*T,E=2*(C*P+T*S),A=P*P+S*S-y*y,R=E*E-4*M*A,w,O;if(R===0){var F=-E/(2*M);w=o+F*C,O=c+F*T,F>=0&&F<=1&&a.push(new n(w,O))}else if(R>0){var b=(-E-Math.sqrt(R))/(2*M);w=o+b*C,O=c+b*T,b>=0&&b<=1&&a.push(new n(w,O));var I=(-E+Math.sqrt(R))/(2*M);w=o+I*C,O=c+I*T,I>=0&&I<=1&&a.push(new n(w,O))}}return a};s.exports=f},96537:(s,g,e)=>{var n=e(70015),p=function(f,u,l,a){l===void 0&&(l=!1);var o=f.x1,c=f.y1,h=f.x2,d=f.y2,v=u.x1,m=u.y1,y=u.x2,C=u.y2,T=h-o,P=d-c,S=y-v,M=C-m,E=T*M-P*S;if(E===0)return null;var A,R,w;if(l){if(A=(T*(m-c)+P*(o-v))/(S*P-M*T),R=(v+S*A-o)/T,R<0||A<0||A>1)return null;w=R}else{if(A=((v-o)*M-(m-c)*S)/E,R=((c-m)*T-(o-v)*P)/E,A<0||A>1||R<0||R>1)return null;w=A}return a===void 0&&(a=new n),a.set(o+T*w,c+P*w,w)};s.exports=p},17647:(s,g,e)=>{var n=e(96537),p=e(88829),f=e(70015),u=new p,l=new f,a=function(o,c,h,d){h===void 0&&(h=!1),d===void 0&&(d=new f);var v=!1;d.set(),l.set();for(var m=c[0],y=1;y<c.length;y++){var C=c[y];u.setTo(m.x,m.y,C.x,C.y),m=C,n(o,u,h,l)&&(!v||l.z<d.z)&&(d.copy(l),v=!0)}return v?d:null};s.exports=a},68439:(s,g,e)=>{var n=e(70015),p=e(51729),f=e(17647),u=new n,l=function(a,o,c,h){h===void 0&&(h=new p),Array.isArray(o)||(o=[o]);var d=!1;h.set(),u.set();for(var v=0;v<o.length;v++)f(a,o[v].points,c,u)&&(!d||u.z<h.z)&&(h.set(u.x,u.y,u.z,v),d=!0);return d?h:null};s.exports=l},9569:(s,g,e)=>{var n=e(79967),p=e(25227),f=e(47910),u=function(l,a,o){if(o===void 0&&(o=[]),f(l,a))for(var c=a.getLineA(),h=a.getLineB(),d=a.getLineC(),v=a.getLineD(),m=[new n,new n,new n,new n],y=[p(c,l,m[0]),p(h,l,m[1]),p(d,l,m[2]),p(v,l,m[3])],C=0;C<4;C++)y[C]&&o.push(m[C]);return o};s.exports=u},7449:(s,g,e)=>{var n=e(51729),p=e(68439),f=e(88829),u=new f;function l(c,h,d,v,m){var y=Math.cos(c),C=Math.sin(c);u.setTo(h,d,h+y,d+C);var T=p(u,v,!0);T&&m.push(new n(T.x,T.y,c,T.w))}function a(c,h){return c.z-h.z}var o=function(c,h,d){Array.isArray(d)||(d=[d]);for(var v=[],m=[],y=0;y<d.length;y++)for(var C=d[y].points,T=0;T<C.length;T++){var P=Math.atan2(C[T].y-h,C[T].x-c);m.indexOf(P)===-1&&(l(P,c,h,d,v),l(P-1e-5,c,h,d,v),l(P+1e-5,c,h,d,v),m.push(P))}return v.sort(a)};s.exports=o},82931:(s,g,e)=>{var n=e(74118),p=e(90205),f=function(u,l,a){return a===void 0&&(a=new n),p(u,l)&&(a.x=Math.max(u.x,l.x),a.y=Math.max(u.y,l.y),a.width=Math.min(u.right,l.right)-a.x,a.height=Math.min(u.bottom,l.bottom)-a.y),a};s.exports=f},1946:(s,g,e)=>{var n=e(9569),p=e(90205),f=function(u,l,a){if(a===void 0&&(a=[]),p(u,l)){var o=u.getLineA(),c=u.getLineB(),h=u.getLineC(),d=u.getLineD();n(o,l,a),n(c,l,a),n(h,l,a),n(d,l,a)}return a};s.exports=f},34211:(s,g,e)=>{var n=e(20370),p=e(9569),f=function(u,l,a){if(a===void 0&&(a=[]),n(u,l)){var o=l.getLineA(),c=l.getLineB(),h=l.getLineC();p(o,u,a),p(c,u,a),p(h,u,a)}return a};s.exports=f},80511:(s,g,e)=>{var n=e(26111),p=e(48411),f=function(u,l,a){if(a===void 0&&(a=[]),p(u,l)){var o=u.getLineA(),c=u.getLineB(),h=u.getLineC();n(o,l,a),n(c,l,a),n(h,l,a)}return a};s.exports=f},31343:(s,g,e)=>{var n=e(79967),p=e(86117),f=e(25227),u=function(l,a,o){if(o===void 0&&(o=[]),p(l,a))for(var c=l.getLineA(),h=l.getLineB(),d=l.getLineC(),v=[new n,new n,new n],m=[f(c,a,v[0]),f(h,a,v[1]),f(d,a,v[2])],y=0;y<3;y++)m[y]&&o.push(v[y]);return o};s.exports=u},70534:(s,g,e)=>{var n=e(23589),p=e(31343),f=function(u,l,a){if(a===void 0&&(a=[]),n(u,l)){var o=l.getLineA(),c=l.getLineB(),h=l.getLineC();p(u,o,a),p(u,c,a),p(u,h,a)}return a};s.exports=f},61472:(s,g,e)=>{var n=e(65650),p=e(79967),f=new p,u=function(l,a,o){if(o===void 0&&(o=f),n(a,l.x1,l.y1))return o.x=l.x1,o.y=l.y1,!0;if(n(a,l.x2,l.y2))return o.x=l.x2,o.y=l.y2,!0;var c=l.x2-l.x1,h=l.y2-l.y1,d=a.x-l.x1,v=a.y-l.y1,m=c*c+h*h,y=c,C=h;if(m>0){var T=(d*c+v*h)/m;y*=T,C*=T}o.x=l.x1+y,o.y=l.y1+C;var P=y*y+C*C;return P<=m&&y*c+C*h>=0&&n(a,o.x,o.y)};s.exports=u},25227:s=>{var g=function(e,n,p){var f=e.x1,u=e.y1,l=e.x2,a=e.y2,o=n.x1,c=n.y1,h=n.x2,d=n.y2;if(f===l&&u===a||o===h&&c===d)return!1;var v=(d-c)*(l-f)-(h-o)*(a-u);if(v===0)return!1;var m=((h-o)*(u-c)-(d-c)*(f-o))/v,y=((l-f)*(u-c)-(a-u)*(f-o))/v;return m<0||m>1||y<0||y>1?!1:(p&&(p.x=f+m*(l-f),p.y=u+m*(a-u)),!0)};s.exports=g},47910:s=>{var g=function(e,n){var p=e.x1,f=e.y1,u=e.x2,l=e.y2,a=n.x,o=n.y,c=n.right,h=n.bottom,d=0;if(p>=a&&p<=c&&f>=o&&f<=h||u>=a&&u<=c&&l>=o&&l<=h)return!0;if(p<a&&u>=a){if(d=f+(l-f)*(a-p)/(u-p),d>o&&d<=h)return!0}else if(p>c&&u<=c&&(d=f+(l-f)*(c-p)/(u-p),d>=o&&d<=h))return!0;if(f<o&&l>=o){if(d=p+(u-p)*(o-f)/(l-f),d>=a&&d<=c)return!0}else if(f>h&&l<=h&&(d=p+(u-p)*(h-f)/(l-f),d>=a&&d<=c))return!0;return!1};s.exports=g},34426:s=>{var g=function(e,n,p){p===void 0&&(p=1);var f=n.x1,u=n.y1,l=n.x2,a=n.y2,o=e.x,c=e.y,h=(l-f)*(l-f)+(a-u)*(a-u);if(h===0)return!1;var d=((o-f)*(l-f)+(c-u)*(a-u))/h;if(d<0)return Math.sqrt((f-o)*(f-o)+(u-c)*(u-c))<=p;if(d>=0&&d<=1){var v=((u-c)*(l-f)-(f-o)*(a-u))/h;return Math.abs(v)*Math.sqrt(h)<=p}else return Math.sqrt((l-o)*(l-o)+(a-c)*(a-c))<=p};s.exports=g},81414:(s,g,e)=>{var n=e(34426),p=function(f,u){if(!n(f,u))return!1;var l=Math.min(u.x1,u.x2),a=Math.max(u.x1,u.x2),o=Math.min(u.y1,u.y2),c=Math.max(u.y1,u.y2);return f.x>=l&&f.x<=a&&f.y>=o&&f.y<=c};s.exports=p},90205:s=>{var g=function(e,n){return e.width<=0||e.height<=0||n.width<=0||n.height<=0?!1:!(e.right<n.x||e.bottom<n.y||e.x>n.right||e.y>n.bottom)};s.exports=g},20370:(s,g,e)=>{var n=e(25227),p=e(94287),f=e(86875),u=e(87279),l=function(a,o){if(o.left>a.right||o.right<a.left||o.top>a.bottom||o.bottom<a.top)return!1;var c=o.getLineA(),h=o.getLineB(),d=o.getLineC();if(p(a,c.x1,c.y1)||p(a,c.x2,c.y2)||p(a,h.x1,h.y1)||p(a,h.x2,h.y2)||p(a,d.x1,d.y1)||p(a,d.x2,d.y2))return!0;var v=a.getLineA(),m=a.getLineB(),y=a.getLineC(),C=a.getLineD();if(n(c,v)||n(c,m)||n(c,y)||n(c,C)||n(h,v)||n(h,m)||n(h,y)||n(h,C)||n(d,v)||n(d,m)||n(d,y)||n(d,C))return!0;var T=u(a),P=f(o,T,!0);return P.length>0};s.exports=l},8786:s=>{var g=function(e,n,p,f,u,l){return l===void 0&&(l=0),!(n>e.right+l||p<e.left-l||f>e.bottom+l||u<e.top-l)};s.exports=g},48411:(s,g,e)=>{var n=e(61472),p=e(60689),f=function(u,l){return u.left>l.right||u.right<l.left||u.top>l.bottom||u.bottom<l.top?!1:!!(p(u,l.x,l.y)||n(u.getLineA(),l)||n(u.getLineB(),l)||n(u.getLineC(),l))};s.exports=f},86117:(s,g,e)=>{var n=e(25227),p=function(f,u){return!!(f.contains(u.x1,u.y1)||f.contains(u.x2,u.y2)||n(f.getLineA(),u)||n(f.getLineB(),u)||n(f.getLineC(),u))};s.exports=p},23589:(s,g,e)=>{var n=e(86875),p=e(18680),f=e(25227),u=function(l,a){if(l.left>a.right||l.right<a.left||l.top>a.bottom||l.bottom<a.top)return!1;var o=l.getLineA(),c=l.getLineB(),h=l.getLineC(),d=a.getLineA(),v=a.getLineB(),m=a.getLineC();if(f(o,d)||f(o,v)||f(o,m)||f(c,d)||f(c,v)||f(c,m)||f(h,d)||f(h,v)||f(h,m))return!0;var y=p(l),C=n(a,y,!0);return C.length>0||(y=p(a),C=n(l,y,!0),C.length>0)};s.exports=u},7563:(s,g,e)=>{s.exports={CircleToCircle:e(22184),CircleToRectangle:e(26535),GetCircleToCircle:e(71145),GetCircleToRectangle:e(62508),GetLineToCircle:e(26111),GetLineToLine:e(96537),GetLineToPoints:e(17647),GetLineToPolygon:e(68439),GetLineToRectangle:e(9569),GetRaysFromPointToPolygon:e(7449),GetRectangleIntersection:e(82931),GetRectangleToRectangle:e(1946),GetRectangleToTriangle:e(34211),GetTriangleToCircle:e(80511),GetTriangleToLine:e(31343),GetTriangleToTriangle:e(70534),LineToCircle:e(61472),LineToLine:e(25227),LineToRectangle:e(47910),PointToLine:e(34426),PointToLineSegment:e(81414),RectangleToRectangle:e(90205),RectangleToTriangle:e(20370),RectangleToValues:e(8786),TriangleToCircle:e(48411),TriangleToLine:e(86117),TriangleToTriangle:e(23589)}},50599:s=>{var g=function(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)};s.exports=g},58813:s=>{var g=function(e,n,p){n===void 0&&(n=1),p===void 0&&(p=[]);var f=Math.round(e.x1),u=Math.round(e.y1),l=Math.round(e.x2),a=Math.round(e.y2),o=Math.abs(l-f),c=Math.abs(a-u),h=f<l?1:-1,d=u<a?1:-1,v=o-c;p.push({x:f,y:u});for(var m=1;!(f===l&&u===a);){var y=v<<1;y>-c&&(v-=c,f+=h),y<o&&(v+=o,u+=d),m%n===0&&p.push({x:f,y:u}),m++}return p};s.exports=g},88513:s=>{var g=function(e,n,p){var f=n-(e.x1+e.x2)/2,u=p-(e.y1+e.y2)/2;return e.x1+=f,e.y1+=u,e.x2+=f,e.y2+=u,e};s.exports=g},26718:(s,g,e)=>{var n=e(88829),p=function(f){return new n(f.x1,f.y1,f.x2,f.y2)};s.exports=p},88930:s=>{var g=function(e,n){return n.setTo(e.x1,e.y1,e.x2,e.y2)};s.exports=g},90656:s=>{var g=function(e,n){return e.x1===n.x1&&e.y1===n.y1&&e.x2===n.x2&&e.y2===n.y2};s.exports=g},30897:(s,g,e)=>{var n=e(16028),p=function(f,u,l){l===void 0&&(l=u);var a=n(f),o=f.x2-f.x1,c=f.y2-f.y1;return u&&(f.x1=f.x1-o/a*u,f.y1=f.y1-c/a*u),l&&(f.x2=f.x2+o/a*l,f.y2=f.y2+c/a*l),f};s.exports=p},30684:(s,g,e)=>{var n=e(92951),p=e(21902),f=e(79967),u=function(l,a,o,c,h){c===void 0&&(c=0),h===void 0&&(h=[]);var d=[],v=l.x1,m=l.y1,y=l.x2-v,C=l.y2-m,T=p(a,h),P,S,M=o-1;for(P=0;P<M;P++)S=T(P/M),d.push(new f(v+y*S,m+C*S));if(S=T(1),d.push(new f(v+y*S,m+C*S)),c>0){var E=d[0],A=[E];for(P=1;P<d.length-1;P++){var R=d[P];n(E,R)>=c&&(A.push(R),E=R)}var w=d[d.length-1];return n(E,w)<c&&A.pop(),A.push(w),A}else return d};s.exports=u},20487:(s,g,e)=>{var n=e(79967),p=function(f,u){return u===void 0&&(u=new n),u.x=(f.x1+f.x2)/2,u.y=(f.y1+f.y2)/2,u};s.exports=p},11222:(s,g,e)=>{var n=e(79967),p=function(f,u,l){l===void 0&&(l=new n);var a=f.x1,o=f.y1,c=f.x2,h=f.y2,d=(c-a)*(c-a)+(h-o)*(h-o);if(d===0)return l;var v=((u.x-a)*(c-a)+(u.y-o)*(h-o))/d;return l.x=a+v*(c-a),l.y=o+v*(h-o),l};s.exports=p},7377:(s,g,e)=>{var n=e(83392),p=e(50599),f=e(79967),u=function(l,a){a===void 0&&(a=new f);var o=p(l)-n.TAU;return a.x=Math.cos(o),a.y=Math.sin(o),a};s.exports=u},66464:(s,g,e)=>{var n=e(79967),p=function(f,u,l){return l===void 0&&(l=new n),l.x=f.x1+(f.x2-f.x1)*u,l.y=f.y1+(f.y2-f.y1)*u,l};s.exports=p},8570:(s,g,e)=>{var n=e(16028),p=e(79967),f=function(u,l,a,o){o===void 0&&(o=[]),!l&&a>0&&(l=n(u)/a);for(var c=u.x1,h=u.y1,d=u.x2,v=u.y2,m=0;m<l;m++){var y=m/l,C=c+(d-c)*y,T=h+(v-h)*y;o.push(new p(C,T))}return o};s.exports=f},65269:s=>{var g=function(e,n){var p=e.x1,f=e.y1,u=e.x2,l=e.y2,a=(u-p)*(u-p)+(l-f)*(l-f);if(a===0)return!1;var o=((f-n.y)*(u-p)-(p-n.x)*(l-f))/a;return Math.abs(o)*Math.sqrt(a)};s.exports=g},82996:s=>{var g=function(e){return Math.abs(e.y1-e.y2)};s.exports=g},16028:s=>{var g=function(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))};s.exports=g},88829:(s,g,e)=>{var n=e(56694),p=e(66464),f=e(8570),u=e(52394),l=e(74077),a=e(93736),o=new n({initialize:function(h,d,v,m){h===void 0&&(h=0),d===void 0&&(d=0),v===void 0&&(v=0),m===void 0&&(m=0),this.type=u.LINE,this.x1=h,this.y1=d,this.x2=v,this.y2=m},getPoint:function(c,h){return p(this,c,h)},getPoints:function(c,h,d){return f(this,c,h,d)},getRandomPoint:function(c){return l(this,c)},setTo:function(c,h,d,v){return c===void 0&&(c=0),h===void 0&&(h=0),d===void 0&&(d=0),v===void 0&&(v=0),this.x1=c,this.y1=h,this.x2=d,this.y2=v,this},getPointA:function(c){return c===void 0&&(c=new a),c.set(this.x1,this.y1),c},getPointB:function(c){return c===void 0&&(c=new a),c.set(this.x2,this.y2),c},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(c){this.x1<=this.x2?this.x1=c:this.x2=c}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(c){this.x1>this.x2?this.x1=c:this.x2=c}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(c){this.y1<=this.y2?this.y1=c:this.y2=c}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(c){this.y1>this.y2?this.y1=c:this.y2=c}}});s.exports=o},73273:(s,g,e)=>{var n=e(83392),p=e(1071),f=e(50599),u=function(l){var a=f(l)-n.TAU;return p(a,-Math.PI,Math.PI)};s.exports=u},96936:(s,g,e)=>{var n=e(83392),p=e(50599),f=function(u){return Math.cos(p(u)-n.TAU)};s.exports=f},43581:(s,g,e)=>{var n=e(83392),p=e(50599),f=function(u){return Math.sin(p(u)-n.TAU)};s.exports=f},13990:s=>{var g=function(e,n,p){return e.x1+=n,e.y1+=p,e.x2+=n,e.y2+=p,e};s.exports=g},1298:s=>{var g=function(e){return-((e.x2-e.x1)/(e.y2-e.y1))};s.exports=g},74077:(s,g,e)=>{var n=e(79967),p=function(f,u){u===void 0&&(u=new n);var l=Math.random();return u.x=f.x1+l*(f.x2-f.x1),u.y=f.y1+l*(f.y2-f.y1),u};s.exports=p},30473:(s,g,e)=>{var n=e(50599),p=e(73273),f=function(u,l){return 2*p(l)-Math.PI-n(u)};s.exports=f},25968:(s,g,e)=>{var n=e(1809),p=function(f,u){var l=(f.x1+f.x2)/2,a=(f.y1+f.y2)/2;return n(f,l,a,u)};s.exports=p},24296:(s,g,e)=>{var n=e(1809),p=function(f,u,l){return n(f,u.x,u.y,l)};s.exports=p},1809:s=>{var g=function(e,n,p,f){var u=Math.cos(f),l=Math.sin(f),a=e.x1-n,o=e.y1-p;return e.x1=a*u-o*l+n,e.y1=a*l+o*u+p,a=e.x2-n,o=e.y2-p,e.x2=a*u-o*l+n,e.y2=a*l+o*u+p,e};s.exports=g},88171:s=>{var g=function(e,n,p,f,u){return e.x1=n,e.y1=p,e.x2=n+Math.cos(f)*u,e.y2=p+Math.sin(f)*u,e};s.exports=g},82797:s=>{var g=function(e){return(e.y2-e.y1)/(e.x2-e.x1)};s.exports=g},41067:s=>{var g=function(e){return Math.abs(e.x1-e.x2)};s.exports=g},28482:(s,g,e)=>{var n=e(88829);n.Angle=e(50599),n.BresenhamPoints=e(58813),n.CenterOn=e(88513),n.Clone=e(26718),n.CopyFrom=e(88930),n.Equals=e(90656),n.Extend=e(30897),n.GetEasedPoints=e(30684),n.GetMidPoint=e(20487),n.GetNearestPoint=e(11222),n.GetNormal=e(7377),n.GetPoint=e(66464),n.GetPoints=e(8570),n.GetShortestDistance=e(65269),n.Height=e(82996),n.Length=e(16028),n.NormalAngle=e(73273),n.NormalX=e(96936),n.NormalY=e(43581),n.Offset=e(13990),n.PerpSlope=e(1298),n.Random=e(74077),n.ReflectAngle=e(30473),n.Rotate=e(25968),n.RotateAroundPoint=e(24296),n.RotateAroundXY=e(1809),n.SetToAngle=e(88171),n.Slope=e(82797),n.Width=e(41067),s.exports=n},18693:(s,g,e)=>{var n=e(56694),p=e(74118),f=e(93736);function u(a,o,c,h){var d=a-c,v=o-h,m=d*d+v*v;return Math.sqrt(m)}var l=new n({initialize:function(o,c,h){this.vertex1=o,this.vertex2=c,this.vertex3=h,this.bounds=new p,this._inCenter=new f},getInCenter:function(a){a===void 0&&(a=!0);var o=this.vertex1,c=this.vertex2,h=this.vertex3,d,v,m,y,C,T;a?(d=o.x,v=o.y,m=c.x,y=c.y,C=h.x,T=h.y):(d=o.vx,v=o.vy,m=c.vx,y=c.vy,C=h.vx,T=h.vy);var P=u(C,T,m,y),S=u(d,v,C,T),M=u(m,y,d,v),E=P+S+M;return this._inCenter.set((d*P+m*S+C*M)/E,(v*P+y*S+T*M)/E)},contains:function(a,o,c){var h=this.vertex1,d=this.vertex2,v=this.vertex3,m=h.vx,y=h.vy,C=d.vx,T=d.vy,P=v.vx,S=v.vy;if(c){var M=c.a,E=c.b,A=c.c,R=c.d,w=c.e,O=c.f;m=h.vx*M+h.vy*A+w,y=h.vx*E+h.vy*R+O,C=d.vx*M+d.vy*A+w,T=d.vx*E+d.vy*R+O,P=v.vx*M+v.vy*A+w,S=v.vx*E+v.vy*R+O}var F=P-m,b=S-y,I=C-m,N=T-y,z=a-m,U=o-y,W=F*F+b*b,D=F*I+b*N,V=F*z+b*U,L=I*I+N*N,B=I*z+N*U,G=W*L-D*D,Y=G===0?0:1/G,X=(L*V-D*B)*Y,k=(W*B-D*V)*Y;return X>=0&&k>=0&&X+k<1},isCounterClockwise:function(a){var o=this.vertex1,c=this.vertex2,h=this.vertex3,d=(c.vx-o.vx)*(h.vy-o.vy)-(c.vy-o.vy)*(h.vx-o.vx);return a<=0?d>=0:d<0},load:function(a,o,c,h,d){return c=this.vertex1.load(a,o,c,h,d),c=this.vertex2.load(a,o,c,h,d),c=this.vertex3.load(a,o,c,h,d),c},transformCoordinatesLocal:function(a,o,c,h){return this.vertex1.transformCoordinatesLocal(a,o,c,h),this.vertex2.transformCoordinatesLocal(a,o,c,h),this.vertex3.transformCoordinatesLocal(a,o,c,h),this},updateBounds:function(){var a=this.vertex1,o=this.vertex2,c=this.vertex3,h=this.bounds;return h.x=Math.min(a.vx,o.vx,c.vx),h.y=Math.min(a.vy,o.vy,c.vy),h.width=Math.max(a.vx,o.vx,c.vx)-h.x,h.height=Math.max(a.vy,o.vy,c.vy)-h.y,this},isInView:function(a,o,c,h,d,v,m,y,C,T,P){this.update(h,d,v,m,y,C,T,P);var S=this.vertex1,M=this.vertex2,E=this.vertex3;if(S.ta<=0&&M.ta<=0&&E.ta<=0||o&&!this.isCounterClockwise(c))return!1;var A=this.bounds;A.x=Math.min(S.tx,M.tx,E.tx),A.y=Math.min(S.ty,M.ty,E.ty),A.width=Math.max(S.tx,M.tx,E.tx)-A.x,A.height=Math.max(S.ty,M.ty,E.ty)-A.y;var R=a.x+a.width,w=a.y+a.height;return A.width<=0||A.height<=0||a.width<=0||a.height<=0?!1:!(A.right<a.x||A.bottom<a.y||A.x>R||A.y>w)},scrollUV:function(a,o){return this.vertex1.scrollUV(a,o),this.vertex2.scrollUV(a,o),this.vertex3.scrollUV(a,o),this},scaleUV:function(a,o){return this.vertex1.scaleUV(a,o),this.vertex2.scaleUV(a,o),this.vertex3.scaleUV(a,o),this},setColor:function(a){return this.vertex1.color=a,this.vertex2.color=a,this.vertex3.color=a,this},update:function(a,o,c,h,d,v,m,y){return this.vertex1.update(o,c,h,d,v,m,y,a),this.vertex2.update(o,c,h,d,v,m,y,a),this.vertex3.update(o,c,h,d,v,m,y,a),this},translate:function(a,o){o===void 0&&(o=0);var c=this.vertex1,h=this.vertex2,d=this.vertex3;return c.x+=a,c.y+=o,h.x+=a,h.y+=o,d.x+=a,d.y+=o,this},x:{get:function(){return this.getInCenter().x},set:function(a){var o=this.getInCenter();this.translate(a-o.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(a){var o=this.getInCenter();this.translate(0,a-o.y)}},alpha:{get:function(){var a=this.vertex1,o=this.vertex2,c=this.vertex3;return(a.alpha+o.alpha+c.alpha)/3},set:function(a){this.vertex1.alpha=a,this.vertex2.alpha=a,this.vertex3.alpha=a}},depth:{get:function(){var a=this.vertex1,o=this.vertex2,c=this.vertex3;return(a.vz+o.vz+c.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});s.exports=l},99425:(s,g,e)=>{var n=e(18693),p=e(72632),f=e(16650),u=e(70015),l=e(85769),a=new u,o=new u,c=new f,h=function(d){var v=p(d,"mesh"),m=p(d,"texture",null),y=p(d,"frame"),C=p(d,"width",1),T=p(d,"height",C),P=p(d,"widthSegments",1),S=p(d,"heightSegments",P),M=p(d,"x",0),E=p(d,"y",0),A=p(d,"z",0),R=p(d,"rotateX",0),w=p(d,"rotateY",0),O=p(d,"rotateZ",0),F=p(d,"zIsUp",!0),b=p(d,"isOrtho",v?v.dirtyCache[11]:!1),I=p(d,"colors",[16777215]),N=p(d,"alphas",[1]),z=p(d,"tile",!1),U=p(d,"flipY",!1),W=p(d,"width",null),D={faces:[],verts:[]};a.set(M,E,A),o.set(R,w,O),c.fromRotationXYTranslation(o,a,F);var V;if(!m&&v)m=v.texture,y||(V=v.frame);else if(v&&typeof m=="string")m=v.scene.sys.textures.get(m);else if(!m)return D;V||(V=m.get(y)),!W&&b&&m&&v&&(C=V.width/v.height,T=V.height/v.height);var L=C/2,B=T/2,G=Math.floor(P),Y=Math.floor(S),X=G+1,k=Y+1,H=C/G,K=T/Y,j=[],$=[],Q,_,q=0,et=1,at=0,ht=1;V&&(q=V.u0,et=V.u1,U?(at=V.v1,ht=V.v0):(at=V.v0,ht=V.v1));var ot=et-q,tt=ht-at;for(_=0;_<k;_++){var rt=_*K-B;for(Q=0;Q<X;Q++){var it=Q*H-L;$.push(it,-rt);var xt=q+ot*(Q/G),vt=at+tt*(_/Y);j.push(xt,vt)}}Array.isArray(I)||(I=[I]),Array.isArray(N)||(N=[N]);var Bt=0,Rt=0;for(_=0;_<Y;_++)for(Q=0;Q<G;Q++){var St=(Q+X*_)*2,yt=(Q+X*(_+1))*2,Ot=(Q+1+X*(_+1))*2,qt=(Q+1+X*_)*2,oe=I[Rt],ce=N[Bt],Qe=new l($[St],$[St+1],0,j[St],j[St+1],oe,ce).transformMat4(c),Ts=new l($[yt],$[yt+1],0,j[yt],j[yt+1],oe,ce).transformMat4(c),Ss=new l($[qt],$[qt+1],0,j[qt],j[qt+1],oe,ce).transformMat4(c),Ps=new l($[yt],$[yt+1],0,j[yt],j[yt+1],oe,ce).transformMat4(c),Es=new l($[Ot],$[Ot+1],0,j[Ot],j[Ot+1],oe,ce).transformMat4(c),Ms=new l($[qt],$[qt+1],0,j[qt],j[qt+1],oe,ce).transformMat4(c);z&&(Qe.setUVs(q,ht),Ts.setUVs(q,at),Ss.setUVs(et,ht),Ps.setUVs(q,at),Es.setUVs(et,at),Ms.setUVs(et,ht)),Rt++,Rt===I.length&&(Rt=0),Bt++,Bt===N.length&&(Bt=0),D.verts.push(Qe,Ts,Ss,Ps,Es,Ms),D.faces.push(new n(Qe,Ts,Ss),new n(Ps,Es,Ms))}return v&&(v.faces=v.faces.concat(D.faces),v.vertices=v.vertices.concat(D.verts)),D};s.exports=h},53267:(s,g,e)=>{var n=e(18693),p=e(16650),f=e(70015),u=e(85769),l=new f,a=new f,o=new p,c=function(h,d,v,m,y,C,T,P,S,M){v===void 0&&(v=1),m===void 0&&(m=0),y===void 0&&(y=0),C===void 0&&(C=0),T===void 0&&(T=0),P===void 0&&(P=0),S===void 0&&(S=0),M===void 0&&(M=!0);var E={faces:[],verts:[]},A=h.materials;l.set(m,y,C),a.set(T,P,S),o.fromRotationXYTranslation(a,l,M);for(var R=0;R<h.models.length;R++)for(var w=h.models[R],O=w.vertices,F=w.textureCoords,b=w.faces,I=0;I<b.length;I++){var N=b[I],z=N.vertices[0],U=N.vertices[1],W=N.vertices[2],D=O[z.vertexIndex],V=O[U.vertexIndex],L=O[W.vertexIndex],B=z.textureCoordsIndex,G=U.textureCoordsIndex,Y=W.textureCoordsIndex,X=B===-1?{u:0,v:1}:F[B],k=G===-1?{u:0,v:0}:F[G],H=Y===-1?{u:1,v:1}:F[Y],K=16777215;N.material!==""&&A[N.material]&&(K=A[N.material]);var j=new u(D.x*v,D.y*v,D.z*v,X.u,X.v,K).transformMat4(o),$=new u(V.x*v,V.y*v,V.z*v,k.u,k.v,K).transformMat4(o),Q=new u(L.x*v,L.y*v,L.z*v,H.u,H.v,K).transformMat4(o);E.verts.push(j,$,Q),E.faces.push(new n(j,$,Q))}return d&&(d.faces=d.faces.concat(E.faces),d.vertices=d.vertices.concat(E.verts)),E};s.exports=c},67623:(s,g,e)=>{var n=e(18693),p=e(85769),f=function(u,l,a,o,c,h,d,v){if(o===void 0&&(o=!1),h===void 0&&(h=16777215),d===void 0&&(d=1),v===void 0&&(v=!1),u.length!==l.length&&!o){console.warn("GenerateVerts: vertices and uvs count not equal");return}var m={faces:[],vertices:[]},y,C,T,P,S,M,E,A,R,w,O,F=o?3:2,b=Array.isArray(h),I=Array.isArray(d);if(Array.isArray(a)&&a.length>0)for(y=0;y<a.length;y++){var N=a[y],z=a[y]*2,U=a[y]*F;C=u[U],T=u[U+1],P=o?u[U+2]:0,S=l[z],M=l[z+1],v&&(M=1-M),E=b?h[N]:h,A=I?d[N]:d,R=0,w=0,O=0,c&&(R=c[U],w=c[U+1],O=o?c[U+2]:0),m.vertices.push(new p(C,T,P,S,M,E,A,R,w,O))}else{var W=0,D=0;for(y=0;y<u.length;y+=F)C=u[y],T=u[y+1],P=o?u[y+2]:0,S=l[W],M=l[W+1],E=b?h[D]:h,A=I?d[D]:d,R=0,w=0,O=0,c&&(R=c[y],w=c[y+1],O=o?c[y+2]:0),m.vertices.push(new p(C,T,P,S,M,E,A,R,w,O)),W+=2,D++}for(y=0;y<m.vertices.length;y+=3){var V=m.vertices[y],L=m.vertices[y+1],B=m.vertices[y+2];m.faces.push(new n(V,L,B))}return m};s.exports=f},27291:s=>{var g=!0,e="untitled",n="",p="";function f(C){var T=C.indexOf("#");return T>-1?C.substring(0,T):C}function u(C){return C.models.length===0&&C.models.push({faces:[],name:e,textureCoords:[],vertexNormals:[],vertices:[]}),n="",C.models[C.models.length-1]}function l(C,T){var P=C.length>=2?C[1]:e;T.models.push({faces:[],name:P,textureCoords:[],vertexNormals:[],vertices:[]}),n=""}function a(C){C.length===2&&(n=C[1])}function o(C,T){var P=C.length,S=P>=2?parseFloat(C[1]):0,M=P>=3?parseFloat(C[2]):0,E=P>=4?parseFloat(C[3]):0;u(T).vertices.push({x:S,y:M,z:E})}function c(C,T){var P=C.length,S=P>=2?parseFloat(C[1]):0,M=P>=3?parseFloat(C[2]):0,E=P>=4?parseFloat(C[3]):0;isNaN(S)&&(S=0),isNaN(M)&&(M=0),isNaN(E)&&(E=0),g&&(M=1-M),u(T).textureCoords.push({u:S,v:M,w:E})}function h(C,T){var P=C.length,S=P>=2?parseFloat(C[1]):0,M=P>=3?parseFloat(C[2]):0,E=P>=4?parseFloat(C[3]):0;u(T).vertexNormals.push({x:S,y:M,z:E})}function d(C,T){var P=C.length-1;if(!(P<3)){for(var S={group:n,material:p,vertices:[]},M=0;M<P;M++){var E=C[M+1],A=E.split("/"),R=A.length;if(!(R<1||R>3)){var w=0,O=0,F=0;w=parseInt(A[0],10),R>1&&A[1]!==""&&(O=parseInt(A[1],10)),R>2&&(F=parseInt(A[2],10)),w!==0&&(w<0&&(w=u(T).vertices.length+1+w),O-=1,w-=1,F-=1,S.vertices.push({textureCoordsIndex:O,vertexIndex:w,vertexNormalIndex:F}))}}u(T).faces.push(S)}}function v(C,T){C.length>=2&&T.materialLibraries.push(C[1])}function m(C){C.length>=2&&(p=C[1])}var y=function(C,T){T===void 0&&(T=!0),g=T;var P={materials:{},materialLibraries:[],models:[]};n="",p="";for(var S=C.split(`
`),M=0;M<S.length;M++){var E=f(S[M]),A=E.replace(/\s\s+/g," ").trim().split(" ");switch(A[0].toLowerCase()){case"o":l(A,P);break;case"g":a(A);break;case"v":o(A,P);break;case"vt":c(A,P);break;case"vn":h(A,P);break;case"f":d(A,P);break;case"mtllib":v(A,P);break;case"usemtl":m(A);break}}return P};s.exports=y},76799:(s,g,e)=>{var n=e(22946),p=function(f){for(var u={},l=f.split(`
`),a="",o=0;o<l.length;o++){var c=l[o].trim();if(!(c.indexOf("#")===0||c==="")){var h=c.replace(/\s\s+/g," ").trim().split(" ");switch(h[0].toLowerCase()){case"newmtl":{a=h[1];break}case"kd":{var d=Math.floor(h[1]*255),v=h.length>=2?Math.floor(h[2]*255):d,m=h.length>=3?Math.floor(h[3]*255):d;u[a]=n(d,v,m);break}}}}return u};s.exports=p},15313:s=>{var g=function(e,n,p,f){var u,l;if(p===void 0&&f===void 0){var a=e.getInCenter();u=a.x,l=a.y}var o=Math.cos(n),c=Math.sin(n),h=e.vertex1,d=e.vertex2,v=e.vertex3,m=h.x-u,y=h.y-l;h.set(m*o-y*c+u,m*c+y*o+l),m=d.x-u,y=d.y-l,d.set(m*o-y*c+u,m*c+y*o+l),m=v.x-u,y=v.y-l,v.set(m*o-y*c+u,m*c+y*o+l)};s.exports=g},85769:(s,g,e)=>{var n=e(56694),p=e(75512),f=e(70015),u=new n({Extends:f,initialize:function(a,o,c,h,d,v,m,y,C,T){v===void 0&&(v=16777215),m===void 0&&(m=1),y===void 0&&(y=0),C===void 0&&(C=0),T===void 0&&(T=0),f.call(this,a,o,c),this.vx=0,this.vy=0,this.vz=0,this.nx=y,this.ny=C,this.nz=T,this.u=h,this.v=d,this.color=v,this.alpha=m,this.tx=0,this.ty=0,this.ta=0,this.tu=h,this.tv=d},setUVs:function(l,a){return this.u=l,this.v=a,this.tu=l,this.tv=a,this},scrollUV:function(l,a){return this.tu+=l,this.tv+=a,this},scaleUV:function(l,a){return this.tu=this.u*l,this.tv=this.v*a,this},transformCoordinatesLocal:function(l,a,o,c){var h=this.x,d=this.y,v=this.z,m=l.val,y=h*m[0]+d*m[4]+v*m[8]+m[12],C=h*m[1]+d*m[5]+v*m[9]+m[13],T=h*m[2]+d*m[6]+v*m[10]+m[14],P=h*m[3]+d*m[7]+v*m[11]+m[15];this.vx=y/P*a,this.vy=-(C/P)*o,c<=0?this.vz=T/P:this.vz=-(T/P)},resize:function(l,a,o,c,h,d){return this.x=l,this.y=a,this.vx=this.x*o,this.vy=-this.y*c,this.vz=0,h<.5?this.vx+=o*(.5-h):h>.5&&(this.vx-=o*(h-.5)),d<.5?this.vy+=c*(.5-d):d>.5&&(this.vy-=c*(d-.5)),this},update:function(l,a,o,c,h,d,v,m){var y=this.vx*l+this.vy*o+h,C=this.vx*a+this.vy*c+d;return v&&(y=Math.round(y),C=Math.round(C)),this.tx=y,this.ty=C,this.ta=this.alpha*m,this},load:function(l,a,o,c,h){return l[++o]=this.tx,l[++o]=this.ty,l[++o]=this.tu,l[++o]=this.tv,l[++o]=c,l[++o]=h,a[++o]=p.getTintAppendFloatAlpha(this.color,this.ta),o}});s.exports=u},14293:(s,g,e)=>{var n={Face:e(18693),GenerateGridVerts:e(99425),GenerateObjVerts:e(53267),GenerateVerts:e(67623),ParseObj:e(27291),ParseObjMaterial:e(76799),RotateFace:e(15313),Vertex:e(85769)};s.exports=n},77601:s=>{var g=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))};s.exports=g},38933:(s,g,e)=>{var n=e(79967),p=function(f){return new n(f.x,f.y)};s.exports=p},47103:s=>{var g=function(e,n){return n.setTo(e.x,e.y)};s.exports=g},13625:s=>{var g=function(e,n){return e.x===n.x&&e.y===n.y};s.exports=g},12536:s=>{var g=function(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))};s.exports=g},54205:(s,g,e)=>{var n=e(79967),p=function(f,u){if(u===void 0&&(u=new n),!Array.isArray(f))throw new Error("GetCentroid points argument must be an array");var l=f.length;if(l<1)throw new Error("GetCentroid points array must not be empty");if(l===1)u.x=f[0].x,u.y=f[0].y;else{for(var a=0;a<l;a++)u.x+=f[a].x,u.y+=f[a].y;u.x/=l,u.y/=l}return u};s.exports=p},50083:s=>{var g=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};s.exports=g},82712:s=>{var g=function(e){return e.x*e.x+e.y*e.y};s.exports=g},20052:(s,g,e)=>{var n=e(74118),p=function(f,u){u===void 0&&(u=new n);for(var l=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY,h=0;h<f.length;h++){var d=f[h];d.x>l&&(l=d.x),d.x<a&&(a=d.x),d.y>o&&(o=d.y),d.y<c&&(c=d.y)}return u.x=a,u.y=c,u.width=l-a,u.height=o-c,u};s.exports=p},77154:(s,g,e)=>{var n=e(79967),p=function(f,u,l,a){return l===void 0&&(l=0),a===void 0&&(a=new n),a.x=f.x+(u.x-f.x)*l,a.y=f.y+(u.y-f.y)*l,a};s.exports=p},42397:s=>{var g=function(e){return e.setTo(e.y,e.x)};s.exports=g},59464:(s,g,e)=>{var n=e(79967),p=function(f,u){return u===void 0&&(u=new n),u.setTo(-f.x,-f.y)};s.exports=p},79967:(s,g,e)=>{var n=e(56694),p=e(52394),f=new n({initialize:function(l,a){l===void 0&&(l=0),a===void 0&&(a=l),this.type=p.POINT,this.x=l,this.y=a},setTo:function(u,l){return u===void 0&&(u=0),l===void 0&&(l=u),this.x=u,this.y=l,this}});s.exports=f},53581:(s,g,e)=>{var n=e(79967),p=e(82712),f=function(u,l,a){a===void 0&&(a=new n);var o=u.x*l.x+u.y*l.y,c=o/p(l);return c!==0&&(a.x=c*l.x,a.y=c*l.y),a};s.exports=f},50817:(s,g,e)=>{var n=e(79967),p=function(f,u,l){l===void 0&&(l=new n);var a=f.x*u.x+f.y*u.y;return a!==0&&(l.x=a*u.x,l.y=a*u.y),l};s.exports=p},40525:(s,g,e)=>{var n=e(50083),p=function(f,u){if(f.x!==0||f.y!==0){var l=n(f);f.x/=l,f.y/=l}return f.x*=u,f.y*=u,f};s.exports=p},63472:(s,g,e)=>{var n=e(79967);n.Ceil=e(77601),n.Clone=e(38933),n.CopyFrom=e(47103),n.Equals=e(13625),n.Floor=e(12536),n.GetCentroid=e(54205),n.GetMagnitude=e(50083),n.GetMagnitudeSq=e(82712),n.GetRectangleFromPoints=e(20052),n.Interpolate=e(77154),n.Invert=e(42397),n.Negative=e(59464),n.Project=e(53581),n.ProjectUnit=e(50817),n.SetMagnitude=e(40525),s.exports=n},19631:(s,g,e)=>{var n=e(8580),p=function(f){return new n(f.points)};s.exports=p},45604:s=>{var g=function(e,n,p){for(var f=!1,u=-1,l=e.points.length-1;++u<e.points.length;l=u){var a=e.points[u].x,o=e.points[u].y,c=e.points[l].x,h=e.points[l].y;(o<=p&&p<h||h<=p&&p<o)&&n<(c-a)*(p-o)/(h-o)+a&&(f=!f)}return f};s.exports=g},87289:(s,g,e)=>{var n=e(45604),p=function(f,u){return n(f,u.x,u.y)};s.exports=p},11117:s=>{"use strict";function g(D,V,L){L=L||2;var B=V&&V.length,G=B?V[0]*L:D.length,Y=e(D,0,G,L,!0),X=[];if(!Y||Y.next===Y.prev)return X;var k,H,K,j,$,Q,_;if(B&&(Y=o(D,V,Y,L)),D.length>80*L){k=K=D[0],H=j=D[1];for(var q=L;q<G;q+=L)$=D[q],Q=D[q+1],$<k&&(k=$),Q<H&&(H=Q),$>K&&(K=$),Q>j&&(j=Q);_=Math.max(K-k,j-H),_=_!==0?32767/_:0}return p(Y,X,L,k,H,_,0),X}function e(D,V,L,B,G){var Y,X;if(G===W(D,V,L,B)>0)for(Y=V;Y<L;Y+=B)X=N(Y,D[Y],D[Y+1],X);else for(Y=L-B;Y>=V;Y-=B)X=N(Y,D[Y],D[Y+1],X);return X&&E(X,X.next)&&(z(X),X=X.next),X}function n(D,V){if(!D)return D;V||(V=D);var L=D,B;do if(B=!1,!L.steiner&&(E(L,L.next)||M(L.prev,L,L.next)===0)){if(z(L),L=V=L.prev,L===L.next)break;B=!0}else L=L.next;while(B||L!==V);return V}function p(D,V,L,B,G,Y,X){if(!!D){!X&&Y&&m(D,B,G,Y);for(var k=D,H,K;D.prev!==D.next;){if(H=D.prev,K=D.next,Y?u(D,B,G,Y):f(D)){V.push(H.i/L|0),V.push(D.i/L|0),V.push(K.i/L|0),z(D),D=K.next,k=K.next;continue}if(D=K,D===k){X?X===1?(D=l(n(D),V,L),p(D,V,L,B,G,Y,2)):X===2&&a(D,V,L,B,G,Y):p(n(D),V,L,B,G,Y,1);break}}}}function f(D){var V=D.prev,L=D,B=D.next;if(M(V,L,B)>=0)return!1;for(var G=V.x,Y=L.x,X=B.x,k=V.y,H=L.y,K=B.y,j=G<Y?G<X?G:X:Y<X?Y:X,$=k<H?k<K?k:K:H<K?H:K,Q=G>Y?G>X?G:X:Y>X?Y:X,_=k>H?k>K?k:K:H>K?H:K,q=B.next;q!==V;){if(q.x>=j&&q.x<=Q&&q.y>=$&&q.y<=_&&P(G,k,Y,H,X,K,q.x,q.y)&&M(q.prev,q,q.next)>=0)return!1;q=q.next}return!0}function u(D,V,L,B){var G=D.prev,Y=D,X=D.next;if(M(G,Y,X)>=0)return!1;for(var k=G.x,H=Y.x,K=X.x,j=G.y,$=Y.y,Q=X.y,_=k<H?k<K?k:K:H<K?H:K,q=j<$?j<Q?j:Q:$<Q?$:Q,et=k>H?k>K?k:K:H>K?H:K,at=j>$?j>Q?j:Q:$>Q?$:Q,ht=C(_,q,V,L,B),ot=C(et,at,V,L,B),tt=D.prevZ,rt=D.nextZ;tt&&tt.z>=ht&&rt&&rt.z<=ot;){if(tt.x>=_&&tt.x<=et&&tt.y>=q&&tt.y<=at&&tt!==G&&tt!==X&&P(k,j,H,$,K,Q,tt.x,tt.y)&&M(tt.prev,tt,tt.next)>=0||(tt=tt.prevZ,rt.x>=_&&rt.x<=et&&rt.y>=q&&rt.y<=at&&rt!==G&&rt!==X&&P(k,j,H,$,K,Q,rt.x,rt.y)&&M(rt.prev,rt,rt.next)>=0))return!1;rt=rt.nextZ}for(;tt&&tt.z>=ht;){if(tt.x>=_&&tt.x<=et&&tt.y>=q&&tt.y<=at&&tt!==G&&tt!==X&&P(k,j,H,$,K,Q,tt.x,tt.y)&&M(tt.prev,tt,tt.next)>=0)return!1;tt=tt.prevZ}for(;rt&&rt.z<=ot;){if(rt.x>=_&&rt.x<=et&&rt.y>=q&&rt.y<=at&&rt!==G&&rt!==X&&P(k,j,H,$,K,Q,rt.x,rt.y)&&M(rt.prev,rt,rt.next)>=0)return!1;rt=rt.nextZ}return!0}function l(D,V,L){var B=D;do{var G=B.prev,Y=B.next.next;!E(G,Y)&&A(G,B,B.next,Y)&&F(G,Y)&&F(Y,G)&&(V.push(G.i/L|0),V.push(B.i/L|0),V.push(Y.i/L|0),z(B),z(B.next),B=D=Y),B=B.next}while(B!==D);return n(B)}function a(D,V,L,B,G,Y){var X=D;do{for(var k=X.next.next;k!==X.prev;){if(X.i!==k.i&&S(X,k)){var H=I(X,k);X=n(X,X.next),H=n(H,H.next),p(X,V,L,B,G,Y,0),p(H,V,L,B,G,Y,0);return}k=k.next}X=X.next}while(X!==D)}function o(D,V,L,B){var G=[],Y,X,k,H,K;for(Y=0,X=V.length;Y<X;Y++)k=V[Y]*B,H=Y<X-1?V[Y+1]*B:D.length,K=e(D,k,H,B,!1),K===K.next&&(K.steiner=!0),G.push(T(K));for(G.sort(c),Y=0;Y<G.length;Y++)L=h(G[Y],L);return L}function c(D,V){return D.x-V.x}function h(D,V){var L=d(D,V);if(!L)return V;var B=I(L,D);return n(B,B.next),n(L,L.next)}function d(D,V){var L=V,B=D.x,G=D.y,Y=-1/0,X;do{if(G<=L.y&&G>=L.next.y&&L.next.y!==L.y){var k=L.x+(G-L.y)*(L.next.x-L.x)/(L.next.y-L.y);if(k<=B&&k>Y&&(Y=k,X=L.x<L.next.x?L:L.next,k===B))return X}L=L.next}while(L!==V);if(!X)return null;var H=X,K=X.x,j=X.y,$=1/0,Q;L=X;do B>=L.x&&L.x>=K&&B!==L.x&&P(G<j?B:Y,G,K,j,G<j?Y:B,G,L.x,L.y)&&(Q=Math.abs(G-L.y)/(B-L.x),F(L,D)&&(Q<$||Q===$&&(L.x>X.x||L.x===X.x&&v(X,L)))&&(X=L,$=Q)),L=L.next;while(L!==H);return X}function v(D,V){return M(D.prev,D,V.prev)<0&&M(V.next,D,D.next)<0}function m(D,V,L,B){var G=D;do G.z===0&&(G.z=C(G.x,G.y,V,L,B)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next;while(G!==D);G.prevZ.nextZ=null,G.prevZ=null,y(G)}function y(D){var V,L,B,G,Y,X,k,H,K=1;do{for(L=D,D=null,Y=null,X=0;L;){for(X++,B=L,k=0,V=0;V<K&&(k++,B=B.nextZ,!!B);V++);for(H=K;k>0||H>0&&B;)k!==0&&(H===0||!B||L.z<=B.z)?(G=L,L=L.nextZ,k--):(G=B,B=B.nextZ,H--),Y?Y.nextZ=G:D=G,G.prevZ=Y,Y=G;L=B}Y.nextZ=null,K*=2}while(X>1);return D}function C(D,V,L,B,G){return D=(D-L)*G|0,V=(V-B)*G|0,D=(D|D<<8)&16711935,D=(D|D<<4)&252645135,D=(D|D<<2)&858993459,D=(D|D<<1)&1431655765,V=(V|V<<8)&16711935,V=(V|V<<4)&252645135,V=(V|V<<2)&858993459,V=(V|V<<1)&1431655765,D|V<<1}function T(D){var V=D,L=D;do(V.x<L.x||V.x===L.x&&V.y<L.y)&&(L=V),V=V.next;while(V!==D);return L}function P(D,V,L,B,G,Y,X,k){return(G-X)*(V-k)>=(D-X)*(Y-k)&&(D-X)*(B-k)>=(L-X)*(V-k)&&(L-X)*(Y-k)>=(G-X)*(B-k)}function S(D,V){return D.next.i!==V.i&&D.prev.i!==V.i&&!O(D,V)&&(F(D,V)&&F(V,D)&&b(D,V)&&(M(D.prev,D,V.prev)||M(D,V.prev,V))||E(D,V)&&M(D.prev,D,D.next)>0&&M(V.prev,V,V.next)>0)}function M(D,V,L){return(V.y-D.y)*(L.x-V.x)-(V.x-D.x)*(L.y-V.y)}function E(D,V){return D.x===V.x&&D.y===V.y}function A(D,V,L,B){var G=w(M(D,V,L)),Y=w(M(D,V,B)),X=w(M(L,B,D)),k=w(M(L,B,V));return!!(G!==Y&&X!==k||G===0&&R(D,L,V)||Y===0&&R(D,B,V)||X===0&&R(L,D,B)||k===0&&R(L,V,B))}function R(D,V,L){return V.x<=Math.max(D.x,L.x)&&V.x>=Math.min(D.x,L.x)&&V.y<=Math.max(D.y,L.y)&&V.y>=Math.min(D.y,L.y)}function w(D){return D>0?1:D<0?-1:0}function O(D,V){var L=D;do{if(L.i!==D.i&&L.next.i!==D.i&&L.i!==V.i&&L.next.i!==V.i&&A(L,L.next,D,V))return!0;L=L.next}while(L!==D);return!1}function F(D,V){return M(D.prev,D,D.next)<0?M(D,V,D.next)>=0&&M(D,D.prev,V)>=0:M(D,V,D.prev)<0||M(D,D.next,V)<0}function b(D,V){var L=D,B=!1,G=(D.x+V.x)/2,Y=(D.y+V.y)/2;do L.y>Y!=L.next.y>Y&&L.next.y!==L.y&&G<(L.next.x-L.x)*(Y-L.y)/(L.next.y-L.y)+L.x&&(B=!B),L=L.next;while(L!==D);return B}function I(D,V){var L=new U(D.i,D.x,D.y),B=new U(V.i,V.x,V.y),G=D.next,Y=V.prev;return D.next=V,V.prev=D,L.next=G,G.prev=L,B.next=L,L.prev=B,Y.next=B,B.prev=Y,B}function N(D,V,L,B){var G=new U(D,V,L);return B?(G.next=B.next,G.prev=B,B.next.prev=G,B.next=G):(G.prev=G,G.next=G),G}function z(D){D.next.prev=D.prev,D.prev.next=D.next,D.prevZ&&(D.prevZ.nextZ=D.nextZ),D.nextZ&&(D.nextZ.prevZ=D.prevZ)}function U(D,V,L){this.i=D,this.x=V,this.y=L,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}g.deviation=function(D,V,L,B){var G=V&&V.length,Y=G?V[0]*L:D.length,X=Math.abs(W(D,0,Y,L));if(G)for(var k=0,H=V.length;k<H;k++){var K=V[k]*L,j=k<H-1?V[k+1]*L:D.length;X-=Math.abs(W(D,K,j,L))}var $=0;for(k=0;k<B.length;k+=3){var Q=B[k]*L,_=B[k+1]*L,q=B[k+2]*L;$+=Math.abs((D[Q]-D[q])*(D[_+1]-D[Q+1])-(D[Q]-D[_])*(D[q+1]-D[Q+1]))}return X===0&&$===0?0:Math.abs(($-X)/X)};function W(D,V,L,B){for(var G=0,Y=V,X=L-B;Y<L;Y+=B)G+=(D[X]-D[Y])*(D[Y+1]+D[X+1]),X=Y;return G}g.flatten=function(D){for(var V=D[0][0].length,L={vertices:[],holes:[],dimensions:V},B=0,G=0;G<D.length;G++){for(var Y=0;Y<D[G].length;Y++)for(var X=0;X<V;X++)L.vertices.push(D[G][Y][X]);G>0&&(B+=D[G-1].length,L.holes.push(B))}return L},s.exports=g},14045:(s,g,e)=>{var n=e(74118),p=function(f,u){u===void 0&&(u=new n);for(var l=1/0,a=1/0,o=-l,c=-a,h,d=0;d<f.points.length;d++)h=f.points[d],l=Math.min(l,h.x),a=Math.min(a,h.y),o=Math.max(o,h.x),c=Math.max(c,h.y);return u.x=l,u.y=a,u.width=o-l,u.height=c-a,u};s.exports=p},98286:s=>{var g=function(e,n){n===void 0&&(n=[]);for(var p=0;p<e.points.length;p++)n.push(e.points[p].x),n.push(e.points[p].y);return n};s.exports=g},89294:(s,g,e)=>{var n=e(16028),p=e(88829),f=e(5159),u=function(l,a,o,c){c===void 0&&(c=[]);var h=l.points,d=f(l);!a&&o>0&&(a=d/o);for(var v=0;v<a;v++)for(var m=d*(v/a),y=0,C=0;C<h.length;C++){var T=h[C],P=h[(C+1)%h.length],S=new p(T.x,T.y,P.x,P.y),M=n(S);if(m<y||m>y+M){y+=M;continue}var E=S.getPoint((m-y)/M);c.push(E);break}return c};s.exports=u},5159:(s,g,e)=>{var n=e(16028),p=e(88829),f=function(u){for(var l=u.points,a=0,o=0;o<l.length;o++){var c=l[o],h=l[(o+1)%l.length],d=new p(c.x,c.y,h.x,h.y);a+=n(d)}return a};s.exports=f},8580:(s,g,e)=>{var n=e(56694),p=e(45604),f=e(89294),u=e(52394),l=new n({initialize:function(o){this.type=u.POLYGON,this.area=0,this.points=[],o&&this.setTo(o)},contains:function(a,o){return p(this,a,o)},setTo:function(a){if(this.area=0,this.points=[],typeof a=="string"&&(a=a.split(" ")),!Array.isArray(a))return this;for(var o,c=Number.MAX_VALUE,h=0;h<a.length;h++)o={x:0,y:0},typeof a[h]=="number"||typeof a[h]=="string"?(o.x=parseFloat(a[h]),o.y=parseFloat(a[h+1]),h++):Array.isArray(a[h])?(o.x=a[h][0],o.y=a[h][1]):(o.x=a[h].x,o.y=a[h].y),this.points.push(o),o.y<c&&(c=o.y);return this.calculateArea(c),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var a=0,o,c,h=0;h<this.points.length-1;h++)o=this.points[h],c=this.points[h+1],a+=(c.x-o.x)*(o.y+c.y);return o=this.points[0],c=this.points[this.points.length-1],a+=(o.x-c.x)*(c.y+o.y),this.area=-a*.5,this.area},getPoints:function(a,o,c){return f(this,a,o,c)}});s.exports=l},32244:s=>{var g=function(e){return e.points.reverse(),e};s.exports=g},95874:s=>{function g(l,a){var o=l.x-a.x,c=l.y-a.y;return o*o+c*c}function e(l,a,o){var c=a.x,h=a.y,d=o.x-c,v=o.y-h;if(d!==0||v!==0){var m=((l.x-c)*d+(l.y-h)*v)/(d*d+v*v);m>1?(c=o.x,h=o.y):m>0&&(c+=d*m,h+=v*m)}return d=l.x-c,v=l.y-h,d*d+v*v}function n(l,a){for(var o=l[0],c=[o],h,d=1,v=l.length;d<v;d++)h=l[d],g(h,o)>a&&(c.push(h),o=h);return o!==h&&c.push(h),c}function p(l,a,o,c,h){for(var d=c,v,m=a+1;m<o;m++){var y=e(l[m],l[a],l[o]);y>d&&(v=m,d=y)}d>c&&(v-a>1&&p(l,a,v,c,h),h.push(l[v]),o-v>1&&p(l,v,o,c,h))}function f(l,a){var o=l.length-1,c=[l[0]];return p(l,0,o,a,c),c.push(l[o]),c}var u=function(l,a,o){a===void 0&&(a=1),o===void 0&&(o=!1);var c=l.points;if(c.length>2){var h=a*a;o||(c=n(c,h)),l.setTo(f(c,h))}return l};s.exports=u},18974:s=>{var g=function(n,p){return n[0]=p[0],n[1]=p[1],n},e=function(n){var p,f=[],u=n.points;for(p=0;p<u.length;p++)f.push([u[p].x,u[p].y]);var l=[];for(f.length>0&&l.push(g([0,0],f[0])),p=0;p<f.length-1;p++){var a=f[p],o=f[p+1],c=a[0],h=a[1],d=o[0],v=o[1];l.push([.85*c+.15*d,.85*h+.15*v]),l.push([.15*c+.85*d,.15*h+.85*v])}return f.length>1&&l.push(g([0,0],f[f.length-1])),n.setTo(l)};s.exports=e},23490:s=>{var g=function(e,n,p){for(var f=e.points,u=0;u<f.length;u++)f[u].x+=n,f[u].y+=p;return e};s.exports=g},44359:(s,g,e)=>{var n=e(8580);n.Clone=e(19631),n.Contains=e(45604),n.ContainsPoint=e(87289),n.Earcut=e(11117),n.GetAABB=e(14045),n.GetNumberArray=e(98286),n.GetPoints=e(89294),n.Perimeter=e(5159),n.Reverse=e(32244),n.Simplify=e(95874),n.Smooth=e(18974),n.Translate=e(23490),s.exports=n},1653:s=>{var g=function(e){return e.width*e.height};s.exports=g},33943:s=>{var g=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e};s.exports=g},58662:s=>{var g=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),e};s.exports=g},79993:s=>{var g=function(e,n,p){return e.x=n-e.width/2,e.y=p-e.height/2,e};s.exports=g},81572:(s,g,e)=>{var n=e(74118),p=function(f){return new n(f.x,f.y,f.width,f.height)};s.exports=p},94287:s=>{var g=function(e,n,p){return e.width<=0||e.height<=0?!1:e.x<=n&&e.x+e.width>=n&&e.y<=p&&e.y+e.height>=p};s.exports=g},28687:(s,g,e)=>{var n=e(94287),p=function(f,u){return n(f,u.x,u.y)};s.exports=p},73222:s=>{var g=function(e,n){return n.width*n.height>e.width*e.height?!1:n.x>e.x&&n.x<e.right&&n.right>e.x&&n.right<e.right&&n.y>e.y&&n.y<e.bottom&&n.bottom>e.y&&n.bottom<e.bottom};s.exports=g},29538:s=>{var g=function(e,n){return n.setTo(e.x,e.y,e.width,e.height)};s.exports=g},87279:s=>{var g=function(e,n){return n===void 0&&(n=[]),n.push({x:e.x,y:e.y}),n.push({x:e.right,y:e.y}),n.push({x:e.right,y:e.bottom}),n.push({x:e.x,y:e.bottom}),n};s.exports=g},19989:s=>{var g=function(e,n){return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height};s.exports=g},92628:(s,g,e)=>{var n=e(6700),p=function(f,u){var l=n(f);return l<n(u)?f.setSize(u.height*l,u.height):f.setSize(u.width,u.width/l),f.setPosition(u.centerX-f.width/2,u.centerY-f.height/2)};s.exports=p},85028:(s,g,e)=>{var n=e(6700),p=function(f,u){var l=n(f);return l>n(u)?f.setSize(u.height*l,u.height):f.setSize(u.width,u.width/l),f.setPosition(u.centerX-f.width/2,u.centerY-f.height/2)};s.exports=p},71356:s=>{var g=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e};s.exports=g},21687:s=>{var g=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height),e};s.exports=g},80222:(s,g,e)=>{var n=e(74118),p=e(83392),f=function(u,l){if(l===void 0&&(l=new n),u.length===0)return l;for(var a=Number.MAX_VALUE,o=Number.MAX_VALUE,c=p.MIN_SAFE_INTEGER,h=p.MIN_SAFE_INTEGER,d,v,m,y=0;y<u.length;y++)d=u[y],Array.isArray(d)?(v=d[0],m=d[1]):(v=d.x,m=d.y),a=Math.min(a,v),o=Math.min(o,m),c=Math.max(c,v),h=Math.max(h,m);return l.x=a,l.y=o,l.width=c-a,l.height=h-o,l};s.exports=f},75785:(s,g,e)=>{var n=e(74118),p=function(f,u,l,a,o){return o===void 0&&(o=new n),o.setTo(Math.min(f,l),Math.min(u,a),Math.abs(f-l),Math.abs(u-a))};s.exports=p},6700:s=>{var g=function(e){return e.height===0?NaN:e.width/e.height};s.exports=g},35242:(s,g,e)=>{var n=e(79967),p=function(f,u){return u===void 0&&(u=new n),u.x=f.centerX,u.y=f.centerY,u};s.exports=p},47698:(s,g,e)=>{var n=e(85876),p=e(79967),f=function(u,l,a){if(a===void 0&&(a=new p),l<=0||l>=1)return a.x=u.x,a.y=u.y,a;var o=n(u)*l;return l>.5?(o-=u.width+u.height,o<=u.width?(a.x=u.right-o,a.y=u.bottom):(a.x=u.x,a.y=u.bottom-(o-u.width))):o<=u.width?(a.x=u.x+o,a.y=u.y):(a.x=u.right,a.y=u.y+(o-u.width)),a};s.exports=f},54932:(s,g,e)=>{var n=e(47698),p=e(85876),f=function(u,l,a,o){o===void 0&&(o=[]),!l&&a>0&&(l=p(u)/a);for(var c=0;c<l;c++){var h=c/l;o.push(n(u,h))}return o};s.exports=f},31591:(s,g,e)=>{var n=e(79967),p=function(f,u){return u===void 0&&(u=new n),u.x=f.width,u.y=f.height,u};s.exports=p},7782:(s,g,e)=>{var n=e(79993),p=function(f,u,l){var a=f.centerX,o=f.centerY;return f.setSize(f.width+u*2,f.height+l*2),n(f,a,o)};s.exports=p},66217:(s,g,e)=>{var n=e(74118),p=e(90205),f=function(u,l,a){return a===void 0&&(a=new n),p(u,l)?(a.x=Math.max(u.x,l.x),a.y=Math.max(u.y,l.y),a.width=Math.min(u.right,l.right)-a.x,a.height=Math.min(u.bottom,l.bottom)-a.y):a.setEmpty(),a};s.exports=f},40053:(s,g,e)=>{var n=e(85876),p=e(79967),f=function(u,l,a,o){if(o===void 0&&(o=[]),!l&&!a)return o;l?a=Math.round(n(u)/l):l=n(u)/a;for(var c=u.x,h=u.y,d=0,v=0;v<a;v++)switch(o.push(new p(c,h)),d){case 0:c+=l,c>=u.right&&(d=1,h+=c-u.right,c=u.right);break;case 1:h+=l,h>=u.bottom&&(d=2,c-=h-u.bottom,h=u.bottom);break;case 2:c-=l,c<=u.left&&(d=3,h-=u.left-c,c=u.left);break;case 3:h-=l,h<=u.top&&(d=0,h=u.top);break}return o};s.exports=f},86673:s=>{var g=function(e,n){for(var p=e.x,f=e.right,u=e.y,l=e.bottom,a=0;a<n.length;a++)p=Math.min(p,n[a].x),f=Math.max(f,n[a].x),u=Math.min(u,n[a].y),l=Math.max(l,n[a].y);return e.x=p,e.y=u,e.width=f-p,e.height=l-u,e};s.exports=g},14655:s=>{var g=function(e,n){var p=Math.min(e.x,n.x),f=Math.max(e.right,n.right);e.x=p,e.width=f-p;var u=Math.min(e.y,n.y),l=Math.max(e.bottom,n.bottom);return e.y=u,e.height=l-u,e};s.exports=g},44755:s=>{var g=function(e,n,p){var f=Math.min(e.x,n),u=Math.max(e.right,n);e.x=f,e.width=u-f;var l=Math.min(e.y,p),a=Math.max(e.bottom,p);return e.y=l,e.height=a-l,e};s.exports=g},74466:s=>{var g=function(e,n,p){return e.x+=n,e.y+=p,e};s.exports=g},55946:s=>{var g=function(e,n){return e.x+=n.x,e.y+=n.y,e};s.exports=g},97474:s=>{var g=function(e,n){return e.x<n.right&&e.right>n.x&&e.y<n.bottom&&e.bottom>n.y};s.exports=g},85876:s=>{var g=function(e){return 2*(e.width+e.height)};s.exports=g},20243:(s,g,e)=>{var n=e(79967),p=e(75606),f=function(u,l,a){a===void 0&&(a=new n),l=p(l);var o=Math.sin(l),c=Math.cos(l),h=c>0?u.width/2:u.width/-2,d=o>0?u.height/2:u.height/-2;return Math.abs(h*o)<Math.abs(d*c)?d=h*o/c:h=d*c/o,a.x=h+u.centerX,a.y=d+u.centerY,a};s.exports=f},30001:(s,g,e)=>{var n=e(79967),p=function(f,u){return u===void 0&&(u=new n),u.x=f.x+Math.random()*f.width,u.y=f.y+Math.random()*f.height,u};s.exports=p},97691:(s,g,e)=>{var n=e(17489),p=e(73222),f=e(79967),u=function(l,a,o){if(o===void 0&&(o=new f),p(l,a))switch(n(0,3)){case 0:o.x=l.x+Math.random()*(a.right-l.x),o.y=l.y+Math.random()*(a.top-l.y);break;case 1:o.x=a.x+Math.random()*(l.right-a.x),o.y=a.bottom+Math.random()*(l.bottom-a.bottom);break;case 2:o.x=l.x+Math.random()*(a.x-l.x),o.y=a.y+Math.random()*(l.bottom-a.y);break;case 3:o.x=a.right+Math.random()*(l.right-a.right),o.y=l.y+Math.random()*(a.bottom-l.y);break}return o};s.exports=u},74118:(s,g,e)=>{var n=e(56694),p=e(94287),f=e(47698),u=e(54932),l=e(52394),a=e(88829),o=e(30001),c=new n({initialize:function(d,v,m,y){d===void 0&&(d=0),v===void 0&&(v=0),m===void 0&&(m=0),y===void 0&&(y=0),this.type=l.RECTANGLE,this.x=d,this.y=v,this.width=m,this.height=y},contains:function(h,d){return p(this,h,d)},getPoint:function(h,d){return f(this,h,d)},getPoints:function(h,d,v){return u(this,h,d,v)},getRandomPoint:function(h){return o(this,h)},setTo:function(h,d,v,m){return this.x=h,this.y=d,this.width=v,this.height=m,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(h,d){return d===void 0&&(d=h),this.x=h,this.y=d,this},setSize:function(h,d){return d===void 0&&(d=h),this.width=h,this.height=d,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(h){return h===void 0&&(h=new a),h.setTo(this.x,this.y,this.right,this.y),h},getLineB:function(h){return h===void 0&&(h=new a),h.setTo(this.right,this.y,this.right,this.bottom),h},getLineC:function(h){return h===void 0&&(h=new a),h.setTo(this.right,this.bottom,this.x,this.bottom),h},getLineD:function(h){return h===void 0&&(h=new a),h.setTo(this.x,this.bottom,this.x,this.y),h},left:{get:function(){return this.x},set:function(h){h>=this.right?this.width=0:this.width=this.right-h,this.x=h}},right:{get:function(){return this.x+this.width},set:function(h){h<=this.x?this.width=0:this.width=h-this.x}},top:{get:function(){return this.y},set:function(h){h>=this.bottom?this.height=0:this.height=this.bottom-h,this.y=h}},bottom:{get:function(){return this.y+this.height},set:function(h){h<=this.y?this.height=0:this.height=h-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(h){this.x=h-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(h){this.y=h-this.height/2}}});s.exports=c},51828:s=>{var g=function(e,n){return e.width===n.width&&e.height===n.height};s.exports=g},5691:s=>{var g=function(e,n,p){return p===void 0&&(p=n),e.width*=n,e.height*=p,e};s.exports=g},58795:(s,g,e)=>{var n=e(74118),p=function(f,u,l){l===void 0&&(l=new n);var a=Math.min(f.x,u.x),o=Math.min(f.y,u.y),c=Math.max(f.right,u.right)-a,h=Math.max(f.bottom,u.bottom)-o;return l.setTo(a,o,c,h)};s.exports=p},66658:(s,g,e)=>{var n=e(74118);n.Area=e(1653),n.Ceil=e(33943),n.CeilAll=e(58662),n.CenterOn=e(79993),n.Clone=e(81572),n.Contains=e(94287),n.ContainsPoint=e(28687),n.ContainsRect=e(73222),n.CopyFrom=e(29538),n.Decompose=e(87279),n.Equals=e(19989),n.FitInside=e(92628),n.FitOutside=e(85028),n.Floor=e(71356),n.FloorAll=e(21687),n.FromPoints=e(80222),n.FromXY=e(75785),n.GetAspectRatio=e(6700),n.GetCenter=e(35242),n.GetPoint=e(47698),n.GetPoints=e(54932),n.GetSize=e(31591),n.Inflate=e(7782),n.Intersection=e(66217),n.MarchingAnts=e(40053),n.MergePoints=e(86673),n.MergeRect=e(14655),n.MergeXY=e(44755),n.Offset=e(74466),n.OffsetPoint=e(55946),n.Overlaps=e(97474),n.Perimeter=e(85876),n.PerimeterPoint=e(20243),n.Random=e(30001),n.RandomOutside=e(97691),n.SameDimensions=e(51828),n.Scale=e(5691),n.Union=e(58795),s.exports=n},19108:s=>{var g=function(e){var n=e.x1,p=e.y1,f=e.x2,u=e.y2,l=e.x3,a=e.y3;return Math.abs(((l-n)*(u-p)-(f-n)*(a-p))/2)};s.exports=g},41199:(s,g,e)=>{var n=e(66349),p=function(f,u,l){var a=l*(Math.sqrt(3)/2),o=f,c=u,h=f+l/2,d=u+a,v=f-l/2,m=u+a;return new n(o,c,h,d,v,m)};s.exports=p},88730:(s,g,e)=>{var n=e(11117),p=e(66349),f=function(u,l,a,o,c){l===void 0&&(l=null),a===void 0&&(a=1),o===void 0&&(o=1),c===void 0&&(c=[]);for(var h=n(u,l),d,v,m,y,C,T,P,S,M,E=0;E<h.length;E+=3)d=h[E],v=h[E+1],m=h[E+2],y=u[d*2]*a,C=u[d*2+1]*o,T=u[v*2]*a,P=u[v*2+1]*o,S=u[m*2]*a,M=u[m*2+1]*o,c.push(new p(y,C,T,P,S,M));return c};s.exports=f},3635:(s,g,e)=>{var n=e(66349),p=function(f,u,l,a){a===void 0&&(a=l);var o=f,c=u,h=f,d=u-a,v=f+l,m=u;return new n(o,c,h,d,v,m)};s.exports=p},1882:(s,g,e)=>{var n=e(56595),p=e(9640),f=function(u,l,a,o){o===void 0&&(o=n);var c=o(u),h=l-c.x,d=a-c.y;return p(u,h,d)};s.exports=f},56595:(s,g,e)=>{var n=e(79967),p=function(f,u){return u===void 0&&(u=new n),u.x=(f.x1+f.x2+f.x3)/3,u.y=(f.y1+f.y2+f.y3)/3,u};s.exports=p},91835:(s,g,e)=>{var n=e(93736);function p(u,l,a,o){return u*o-l*a}var f=function(u,l){l===void 0&&(l=new n);var a=u.x3,o=u.y3,c=u.x1-a,h=u.y1-o,d=u.x2-a,v=u.y2-o,m=2*p(c,h,d,v),y=p(h,c*c+h*h,v,d*d+v*v),C=p(c,c*c+h*h,d,d*d+v*v);return l.x=a-y/m,l.y=o+C/m,l};s.exports=f},97073:(s,g,e)=>{var n=e(26673),p=function(f,u){u===void 0&&(u=new n);var l=f.x1,a=f.y1,o=f.x2,c=f.y2,h=f.x3,d=f.y3,v=o-l,m=c-a,y=h-l,C=d-a,T=v*(l+o)+m*(a+c),P=y*(l+h)+C*(a+d),S=2*(v*(d-c)-m*(h-o)),M,E;if(Math.abs(S)<1e-6){var A=Math.min(l,o,h),R=Math.min(a,c,d);M=(Math.max(l,o,h)-A)*.5,E=(Math.max(a,c,d)-R)*.5,u.x=A+M,u.y=R+E,u.radius=Math.sqrt(M*M+E*E)}else u.x=(C*T-m*P)/S,u.y=(v*P-y*T)/S,M=u.x-l,E=u.y-a,u.radius=Math.sqrt(M*M+E*E);return u};s.exports=p},75974:(s,g,e)=>{var n=e(66349),p=function(f){return new n(f.x1,f.y1,f.x2,f.y2,f.x3,f.y3)};s.exports=p},60689:s=>{var g=function(e,n,p){var f=e.x3-e.x1,u=e.y3-e.y1,l=e.x2-e.x1,a=e.y2-e.y1,o=n-e.x1,c=p-e.y1,h=f*f+u*u,d=f*l+u*a,v=f*o+u*c,m=l*l+a*a,y=l*o+a*c,C=h*m-d*d,T=C===0?0:1/C,P=(m*v-d*y)*T,S=(h*y-d*v)*T;return P>=0&&S>=0&&P+S<1};s.exports=g},86875:s=>{var g=function(e,n,p,f){p===void 0&&(p=!1),f===void 0&&(f=[]);for(var u=e.x3-e.x1,l=e.y3-e.y1,a=e.x2-e.x1,o=e.y2-e.y1,c=u*u+l*l,h=u*a+l*o,d=a*a+o*o,v=c*d-h*h,m=v===0?0:1/v,y,C,T,P,S,M,E=e.x1,A=e.y1,R=0;R<n.length&&(T=n[R].x-E,P=n[R].y-A,S=u*T+l*P,M=a*T+o*P,y=(d*S-h*M)*m,C=(c*M-h*S)*m,!(y>=0&&C>=0&&y+C<1&&(f.push({x:n[R].x,y:n[R].y}),p)));R++);return f};s.exports=g},51532:(s,g,e)=>{var n=e(60689),p=function(f,u){return n(f,u.x,u.y)};s.exports=p},42538:s=>{var g=function(e,n){return n.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};s.exports=g},18680:s=>{var g=function(e,n){return n===void 0&&(n=[]),n.push({x:e.x1,y:e.y1}),n.push({x:e.x2,y:e.y2}),n.push({x:e.x3,y:e.y3}),n};s.exports=g},29977:s=>{var g=function(e,n){return e.x1===n.x1&&e.y1===n.y1&&e.x2===n.x2&&e.y2===n.y2&&e.x3===n.x3&&e.y3===n.y3};s.exports=g},56088:(s,g,e)=>{var n=e(79967),p=e(16028),f=function(u,l,a){a===void 0&&(a=new n);var o=u.getLineA(),c=u.getLineB(),h=u.getLineC();if(l<=0||l>=1)return a.x=o.x1,a.y=o.y1,a;var d=p(o),v=p(c),m=p(h),y=d+v+m,C=y*l,T=0;return C<d?(T=C/d,a.x=o.x1+(o.x2-o.x1)*T,a.y=o.y1+(o.y2-o.y1)*T):C>d+v?(C-=d+v,T=C/m,a.x=h.x1+(h.x2-h.x1)*T,a.y=h.y1+(h.y2-h.y1)*T):(C-=d,T=C/v,a.x=c.x1+(c.x2-c.x1)*T,a.y=c.y1+(c.y2-c.y1)*T),a};s.exports=f},24402:(s,g,e)=>{var n=e(16028),p=e(79967),f=function(u,l,a,o){o===void 0&&(o=[]);var c=u.getLineA(),h=u.getLineB(),d=u.getLineC(),v=n(c),m=n(h),y=n(d),C=v+m+y;!l&&a>0&&(l=C/a);for(var T=0;T<l;T++){var P=C*(T/l),S=0,M=new p;P<v?(S=P/v,M.x=c.x1+(c.x2-c.x1)*S,M.y=c.y1+(c.y2-c.y1)*S):P>v+m?(P-=v+m,S=P/y,M.x=d.x1+(d.x2-d.x1)*S,M.y=d.y1+(d.y2-d.y1)*S):(P-=v,S=P/m,M.x=h.x1+(h.x2-h.x1)*S,M.y=h.y1+(h.y2-h.y1)*S),o.push(M)}return o};s.exports=f},83648:(s,g,e)=>{var n=e(79967);function p(u,l,a,o){var c=u-a,h=l-o,d=c*c+h*h;return Math.sqrt(d)}var f=function(u,l){l===void 0&&(l=new n);var a=u.x1,o=u.y1,c=u.x2,h=u.y2,d=u.x3,v=u.y3,m=p(d,v,c,h),y=p(a,o,d,v),C=p(c,h,a,o),T=m+y+C;return l.x=(a*m+c*y+d*C)/T,l.y=(o*m+h*y+v*C)/T,l};s.exports=f},9640:s=>{var g=function(e,n,p){return e.x1+=n,e.y1+=p,e.x2+=n,e.y2+=p,e.x3+=n,e.y3+=p,e};s.exports=g},95290:(s,g,e)=>{var n=e(16028),p=function(f){var u=f.getLineA(),l=f.getLineB(),a=f.getLineC();return n(u)+n(l)+n(a)};s.exports=p},99761:(s,g,e)=>{var n=e(79967),p=function(f,u){u===void 0&&(u=new n);var l=f.x2-f.x1,a=f.y2-f.y1,o=f.x3-f.x1,c=f.y3-f.y1,h=Math.random(),d=Math.random();return h+d>=1&&(h=1-h,d=1-d),u.x=f.x1+(l*h+o*d),u.y=f.y1+(a*h+c*d),u};s.exports=p},21934:(s,g,e)=>{var n=e(19211),p=e(83648),f=function(u,l){var a=p(u);return n(u,a.x,a.y,l)};s.exports=f},68454:(s,g,e)=>{var n=e(19211),p=function(f,u,l){return n(f,u.x,u.y,l)};s.exports=p},19211:s=>{var g=function(e,n,p,f){var u=Math.cos(f),l=Math.sin(f),a=e.x1-n,o=e.y1-p;return e.x1=a*u-o*l+n,e.y1=a*l+o*u+p,a=e.x2-n,o=e.y2-p,e.x2=a*u-o*l+n,e.y2=a*l+o*u+p,a=e.x3-n,o=e.y3-p,e.x3=a*u-o*l+n,e.y3=a*l+o*u+p,e};s.exports=g},66349:(s,g,e)=>{var n=e(56694),p=e(60689),f=e(56088),u=e(24402),l=e(52394),a=e(88829),o=e(99761),c=new n({initialize:function(d,v,m,y,C,T){d===void 0&&(d=0),v===void 0&&(v=0),m===void 0&&(m=0),y===void 0&&(y=0),C===void 0&&(C=0),T===void 0&&(T=0),this.type=l.TRIANGLE,this.x1=d,this.y1=v,this.x2=m,this.y2=y,this.x3=C,this.y3=T},contains:function(h,d){return p(this,h,d)},getPoint:function(h,d){return f(this,h,d)},getPoints:function(h,d,v){return u(this,h,d,v)},getRandomPoint:function(h){return o(this,h)},setTo:function(h,d,v,m,y,C){return h===void 0&&(h=0),d===void 0&&(d=0),v===void 0&&(v=0),m===void 0&&(m=0),y===void 0&&(y=0),C===void 0&&(C=0),this.x1=h,this.y1=d,this.x2=v,this.y2=m,this.x3=y,this.y3=C,this},getLineA:function(h){return h===void 0&&(h=new a),h.setTo(this.x1,this.y1,this.x2,this.y2),h},getLineB:function(h){return h===void 0&&(h=new a),h.setTo(this.x2,this.y2,this.x3,this.y3),h},getLineC:function(h){return h===void 0&&(h=new a),h.setTo(this.x3,this.y3,this.x1,this.y1),h},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(h){var d=0;this.x1<=this.x2&&this.x1<=this.x3?d=this.x1-h:this.x2<=this.x1&&this.x2<=this.x3?d=this.x2-h:d=this.x3-h,this.x1-=d,this.x2-=d,this.x3-=d}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(h){var d=0;this.x1>=this.x2&&this.x1>=this.x3?d=this.x1-h:this.x2>=this.x1&&this.x2>=this.x3?d=this.x2-h:d=this.x3-h,this.x1-=d,this.x2-=d,this.x3-=d}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(h){var d=0;this.y1<=this.y2&&this.y1<=this.y3?d=this.y1-h:this.y2<=this.y1&&this.y2<=this.y3?d=this.y2-h:d=this.y3-h,this.y1-=d,this.y2-=d,this.y3-=d}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(h){var d=0;this.y1>=this.y2&&this.y1>=this.y3?d=this.y1-h:this.y2>=this.y1&&this.y2>=this.y3?d=this.y2-h:d=this.y3-h,this.y1-=d,this.y2-=d,this.y3-=d}}});s.exports=c},87619:(s,g,e)=>{var n=e(66349);n.Area=e(19108),n.BuildEquilateral=e(41199),n.BuildFromPolygon=e(88730),n.BuildRight=e(3635),n.CenterOn=e(1882),n.Centroid=e(56595),n.CircumCenter=e(91835),n.CircumCircle=e(97073),n.Clone=e(75974),n.Contains=e(60689),n.ContainsArray=e(86875),n.ContainsPoint=e(51532),n.CopyFrom=e(42538),n.Decompose=e(18680),n.Equals=e(29977),n.GetPoint=e(56088),n.GetPoints=e(24402),n.InCenter=e(83648),n.Perimeter=e(95290),n.Offset=e(9640),n.Random=e(99761),n.Rotate=e(21934),n.RotateAroundPoint=e(68454),n.RotateAroundXY=e(19211),s.exports=n},27395:s=>{var g=function(e,n,p){return{gameObject:e,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:n,hitAreaCallback:p,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};s.exports=g},18104:s=>{var g=function(e,n){return function(p,f,u,l){var a=e.getPixelAlpha(f,u,l.texture.key,l.frame.name);return a&&a>=n}};s.exports=g},69898:(s,g,e)=>{var n=e(56694),p=e(72687),f=e(6659),u=e(33963),l=e(97081),a=e(71064),o=e(7905),c=e(40398),h=e(37579),d=e(69360),v=e(64462),m=new n({initialize:function(C,T){this.game=C,this.scaleManager,this.canvas,this.config=T,this.enabled=!0,this.events=new f,this.isOver=!0,this.defaultCursor="",this.keyboard=T.inputKeyboard?new a(this):null,this.mouse=T.inputMouse?new o(this):null,this.touch=T.inputTouch?new h(this):null,this.pointers=[],this.pointersTotal=T.inputActivePointers,T.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var P=0;P<=this.pointersTotal;P++){var S=new c(this,P);S.smoothFactor=T.inputSmoothFactor,this.pointers.push(S)}this.mousePointer=T.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new d,this._tempMatrix2=new d,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],C.events.once(l.BOOT,this.boot,this)},boot:function(){var y=this.game,C=y.events;this.canvas=y.canvas,this.scaleManager=y.scale,this.events.emit(u.MANAGER_BOOT),C.on(l.PRE_RENDER,this.preRender,this),C.once(l.DESTROY,this.destroy,this)},setCanvasOver:function(y){this.isOver=!0,this.events.emit(u.GAME_OVER,y)},setCanvasOut:function(y){this.isOver=!1,this.events.emit(u.GAME_OUT,y)},preRender:function(){var y=this.game.loop.now,C=this.game.loop.delta,T=this.game.scene.getScenes(!0,!0);this.time=y,this.events.emit(u.MANAGER_UPDATE);for(var P=0;P<T.length;P++){var S=T[P];if(S.sys.input&&S.sys.input.updatePoll(y,C)&&this.globalTopOnly)return}},setDefaultCursor:function(y){this.defaultCursor=y,this.canvas.style.cursor!==y&&(this.canvas.style.cursor=y)},setCursor:function(y){y.cursor&&(this.canvas.style.cursor=y.cursor)},resetCursor:function(y){y.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(y){y===void 0&&(y=1);var C=[];this.pointersTotal+y>10&&(y=10-this.pointersTotal);for(var T=0;T<y;T++){var P=this.pointers.length,S=new c(this,P);S.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(S),this.pointersTotal++,C.push(S)}return C},updateInputPlugins:function(y,C){var T=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var P=0;P<T.length;P++){var S=T[P];if(S.sys.input){var M=S.sys.input.update(y,C);if(M&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(y){for(var C=this.pointers,T=[],P=0;P<y.changedTouches.length;P++)for(var S=y.changedTouches[P],M=1;M<this.pointersTotal;M++){var E=C[M];if(!E.active){E.touchstart(S,y),this.activePointer=E,T.push(E);break}}this.updateInputPlugins(p.TOUCH_START,T)},onTouchMove:function(y){for(var C=this.pointers,T=[],P=0;P<y.changedTouches.length;P++)for(var S=y.changedTouches[P],M=1;M<this.pointersTotal;M++){var E=C[M];if(E.active&&E.identifier===S.identifier){var A=document.elementFromPoint(S.pageX,S.pageY),R=A===this.canvas;!this.isOver&&R?this.setCanvasOver(y):this.isOver&&!R&&this.setCanvasOut(y),this.isOver&&(E.touchmove(S,y),this.activePointer=E,T.push(E));break}}this.updateInputPlugins(p.TOUCH_MOVE,T)},onTouchEnd:function(y){for(var C=this.pointers,T=[],P=0;P<y.changedTouches.length;P++)for(var S=y.changedTouches[P],M=1;M<this.pointersTotal;M++){var E=C[M];if(E.active&&E.identifier===S.identifier){E.touchend(S,y),T.push(E);break}}this.updateInputPlugins(p.TOUCH_END,T)},onTouchCancel:function(y){for(var C=this.pointers,T=[],P=0;P<y.changedTouches.length;P++)for(var S=y.changedTouches[P],M=1;M<this.pointersTotal;M++){var E=C[M];if(E.active&&E.identifier===S.identifier){E.touchcancel(S,y),T.push(E);break}}this.updateInputPlugins(p.TOUCH_CANCEL,T)},onMouseDown:function(y){var C=this.mousePointer;C.down(y),C.updateMotion(),this.activePointer=C,this.updateInputPlugins(p.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(y){var C=this.mousePointer;C.move(y),C.updateMotion(),this.activePointer=C,this.updateInputPlugins(p.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(y){var C=this.mousePointer;C.up(y),C.updateMotion(),this.activePointer=C,this.updateInputPlugins(p.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(y){var C=this.mousePointer;C.wheel(y),this.activePointer=C,this.updateInputPlugins(p.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(y){var C=this.mouse.locked;this.mousePointer.locked=C,this.events.emit(u.POINTERLOCK_CHANGE,y,C)},inputCandidate:function(y,C){var T=y.input;if(!T||!T.enabled||!y.willRender(C))return!1;var P=!0,S=y.parentContainer;if(S)do{if(!S.willRender(C)){P=!1;break}S=S.parentContainer}while(S);return P},hitTest:function(y,C,T,P){P===void 0&&(P=this._tempHitTest);var S=this._tempPoint,M=T.scrollX,E=T.scrollY;P.length=0;var A=y.x,R=y.y;T.getWorldPoint(A,R,S),y.worldX=S.x,y.worldY=S.y;for(var w={x:0,y:0},O=this._tempMatrix,F=this._tempMatrix2,b=0;b<C.length;b++){var I=C[b];if(!!this.inputCandidate(I,T)){var N=S.x+M*I.scrollFactorX-M,z=S.y+E*I.scrollFactorY-E;I.parentContainer?(I.getWorldTransformMatrix(O,F),O.applyInverse(N,z,w)):v(N,z,I.x,I.y,I.rotation,I.scaleX,I.scaleY,w),this.pointWithinHitArea(I,w.x,w.y)&&P.push(I)}}return P},pointWithinHitArea:function(y,C,T){C+=y.displayOriginX,T+=y.displayOriginY;var P=y.input;return P&&P.hitAreaCallback(P.hitArea,C,T,y)?(P.localX=C,P.localY=T,!0):!1},pointWithinInteractiveObject:function(y,C,T){return y.hitArea?(C+=y.gameObject.displayOriginX,T+=y.gameObject.displayOriginY,y.localX=C,y.localY=T,y.hitAreaCallback(y.hitArea,C,T,y)):!1},transformPointer:function(y,C,T,P){var S=y.position,M=y.prevPosition;M.x=S.x,M.y=S.y;var E=this.scaleManager.transformX(C),A=this.scaleManager.transformY(T),R=y.smoothFactor;!P||R===0?(S.x=E,S.y=A):(S.x=E*R+M.x*(1-R),S.y=A*R+M.y*(1-R))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(l.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var y=0;y<this.pointers.length;y++)this.pointers[y].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});s.exports=m},12499:(s,g,e)=>{var n=e(26673),p=e(65650),f=e(56694),u=e(72687),l=e(27395),a=e(18104),o=e(53996),c=e(95669),h=e(72313),d=e(33963),v=e(6659),m=e(72632),y=e(52394),C=e(63399),T=e(42911),P=e(91963),S=e(74118),M=e(94287),E=e(7599),A=e(66349),R=e(60689),w=new f({Extends:v,initialize:function(F){v.call(this),this.scene=F,this.systems=F.sys,this.settings=F.sys.settings,this.manager=F.sys.game.input,this.pluginEvents=new v,this.enabled=!0,this.displayList,this.cameras,C.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var b={cancelled:!1};this._eventContainer={stopPropagation:function(){b.cancelled=!0}},this._eventData=b,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,F.sys.events.once(E.BOOT,this.boot,this),F.sys.events.on(E.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(E.DESTROY,this.destroy,this),this.pluginEvents.emit(d.BOOT)},start:function(){var O=this.systems.events;O.on(E.TRANSITION_START,this.transitionIn,this),O.on(E.TRANSITION_OUT,this.transitionOut,this),O.on(E.TRANSITION_COMPLETE,this.transitionComplete,this),O.on(E.PRE_UPDATE,this.preUpdate,this),O.once(E.SHUTDOWN,this.shutdown,this),this.manager.events.on(d.GAME_OUT,this.onGameOut,this),this.manager.events.on(d.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(d.START)},onGameOver:function(O){this.isActive()&&this.emit(d.GAME_OVER,O.timeStamp,O)},onGameOut:function(O){this.isActive()&&this.emit(d.GAME_OUT,O.timeStamp,O)},preUpdate:function(){this.pluginEvents.emit(d.PRE_UPDATE);var O=this._pendingRemoval,F=this._pendingInsertion,b=O.length,I=F.length;if(!(b===0&&I===0)){for(var N=this._list,z=0;z<b;z++){var U=O[z],W=N.indexOf(U);W>-1&&(N.splice(W,1),this.clear(U,!0))}this._pendingRemoval.length=0,this._list=N.concat(F.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.canInput()},updatePoll:function(O,F){if(!this.isActive())return!1;if(this.pluginEvents.emit(d.UPDATE,O,F),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var b,I=this.manager,N=I.pointers,z=I.pointersTotal;for(b=0;b<z;b++)N[b].updateMotion();if(this._list.length===0)return!1;var U=this.pollRate;if(U===-1)return!1;if(U>0)if(this._pollTimer-=F,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var W=!1;for(b=0;b<z;b++){var D=0,V=N[b];this._tempZones=[],this._temp=this.hitTestPointer(V),this.sortGameObjects(this._temp,V),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),D+=this.processOverOutEvents(V),this.getDragState(V)===2&&this.processDragThresholdEvent(V,O),D>0&&(W=!0)}return W},update:function(O,F){if(!this.isActive())return!1;for(var b=F.length,I=!1,N=0;N<b;N++){var z=0,U=F[N];switch(this._tempZones=[],this._temp=this.hitTestPointer(U),this.sortGameObjects(this._temp,U),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),O){case u.MOUSE_DOWN:z+=this.processDragDownEvent(U),z+=this.processDownEvents(U),z+=this.processOverOutEvents(U);break;case u.MOUSE_UP:z+=this.processDragUpEvent(U),z+=this.processUpEvents(U),z+=this.processOverOutEvents(U);break;case u.TOUCH_START:z+=this.processDragDownEvent(U),z+=this.processDownEvents(U),z+=this.processOverEvents(U);break;case u.TOUCH_END:case u.TOUCH_CANCEL:z+=this.processDragUpEvent(U),z+=this.processUpEvents(U),z+=this.processOutEvents(U);break;case u.MOUSE_MOVE:case u.TOUCH_MOVE:z+=this.processDragMoveEvent(U),z+=this.processMoveEvents(U),z+=this.processOverOutEvents(U);break;case u.MOUSE_WHEEL:z+=this.processWheelEvent(U);break}z>0&&(I=!0)}return this._updatedThisFrame=!0,I},clear:function(O,F){F===void 0&&(F=!1),this.disable(O);var b=O.input;b&&(this.removeDebug(O),b.gameObject=void 0,b.target=void 0,b.hitArea=void 0,b.hitAreaCallback=void 0,b.callbackContext=void 0,O.input=null),F||this.queueForRemoval(O);var I=this._draggable.indexOf(O);return I>-1&&this._draggable.splice(I,1),O},disable:function(O){var F=O.input;F&&(F.enabled=!1,F.dragState=0);var b=this._temp,I=this._drag,N=this._over,z=this.manager,U=b.indexOf(O);U>-1&&b.splice(U,1);for(var W=0;W<z.pointersTotal;W++)U=I[W].indexOf(O),U>-1&&I[W].splice(U,1),U=N[W].indexOf(O),U>-1&&(N[W].splice(U,1),z.resetCursor(F));return this},enable:function(O,F,b,I){return I===void 0&&(I=!1),O.input?O.input.enabled=!0:this.setHitArea(O,F,b),O.input&&I&&!O.input.dropZone&&(O.input.dropZone=I),this},hitTestPointer:function(O){for(var F=this.cameras.getCamerasBelowPointer(O),b=0;b<F.length;b++){for(var I=F[b],N=this.manager.hitTest(O,this._list,I),z=0;z<N.length;z++){var U=N[z];U.input.dropZone&&this._tempZones.push(U)}if(N.length>0)return O.camera=I,N}return O.camera=F[0],[]},processDownEvents:function(O){var F=0,b=this._temp,I=this._eventData,N=this._eventContainer;I.cancelled=!1;for(var z=!1,U=0;U<b.length;U++){var W=b[U];if(!(!W.input||!W.input.enabled)){if(F++,W.emit(d.GAMEOBJECT_POINTER_DOWN,O,W.input.localX,W.input.localY,N),I.cancelled||!W.input||!W.input.enabled){z=!0;break}if(this.emit(d.GAMEOBJECT_DOWN,O,W,N),I.cancelled||!W.input){z=!0;break}}}return!z&&this.manager&&(O.downElement===this.manager.game.canvas?this.emit(d.POINTER_DOWN,O,b):this.emit(d.POINTER_DOWN_OUTSIDE,O)),F},getDragState:function(O){return this._dragState[O.id]},setDragState:function(O,F){this._dragState[O.id]=F},processDragThresholdEvent:function(O,F){var b=!1,I=this.dragTimeThreshold,N=this.dragDistanceThreshold;if((N>0&&o(O.x,O.y,O.downX,O.downY)>=N||I>0&&F>=O.downTime+I)&&(b=!0),b)return this.setDragState(O,3),this.processDragStartList(O)},processDragStartList:function(O){if(this.getDragState(O)!==3)return 0;for(var F=this._drag[O.id],b=0;b<F.length;b++){var I=F[b],N=I.input;N.dragState=2,N.dragStartX=I.x,N.dragStartY=I.y,N.dragStartXGlobal=O.worldX,N.dragStartYGlobal=O.worldY,N.dragX=N.dragStartXGlobal-N.dragStartX,N.dragY=N.dragStartYGlobal-N.dragStartY,I.emit(d.GAMEOBJECT_DRAG_START,O,N.dragX,N.dragY),this.emit(d.DRAG_START,O,I)}return this.setDragState(O,4),F.length},processDragDownEvent:function(O){var F=this._temp;if(this._draggable.length===0||F.length===0||!O.primaryDown||this.getDragState(O)!==0)return 0;this.setDragState(O,1);for(var b=[],I=0;I<F.length;I++){var N=F[I];N.input.draggable&&N.input.dragState===0&&b.push(N)}return b.length===0?(this.setDragState(O,0),0):(b.length>1&&(this.sortGameObjects(b,O),this.topOnly&&b.splice(1)),this._drag[O.id]=b,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(O,3),this.processDragStartList(O)):(this.setDragState(O,2),0))},processDragMoveEvent:function(O){if(this.getDragState(O)===2&&this.processDragThresholdEvent(O,this.manager.game.loop.now),this.getDragState(O)!==4)return 0;for(var F=this._tempZones,b=this._drag[O.id],I=0;I<b.length;I++){var N=b[I],z=N.input,U=z.target;if(U){var W=F.indexOf(U);W===0?(N.emit(d.GAMEOBJECT_DRAG_OVER,O,U),this.emit(d.DRAG_OVER,O,N,U)):W>0?(N.emit(d.GAMEOBJECT_DRAG_LEAVE,O,U),this.emit(d.DRAG_LEAVE,O,N,U),z.target=F[0],U=z.target,N.emit(d.GAMEOBJECT_DRAG_ENTER,O,U),this.emit(d.DRAG_ENTER,O,N,U)):(N.emit(d.GAMEOBJECT_DRAG_LEAVE,O,U),this.emit(d.DRAG_LEAVE,O,N,U),F[0]?(z.target=F[0],U=z.target,N.emit(d.GAMEOBJECT_DRAG_ENTER,O,U),this.emit(d.DRAG_ENTER,O,N,U)):z.target=null)}else!U&&F[0]&&(z.target=F[0],U=z.target,N.emit(d.GAMEOBJECT_DRAG_ENTER,O,U),this.emit(d.DRAG_ENTER,O,N,U));var D,V;if(!N.parentContainer)D=O.worldX-z.dragX,V=O.worldY-z.dragY;else{var L=O.worldX-z.dragStartXGlobal,B=O.worldY-z.dragStartYGlobal,G=N.getParentRotation(),Y=L*Math.cos(G)+B*Math.sin(G),X=B*Math.cos(G)-L*Math.sin(G);Y*=1/N.parentContainer.scaleX,X*=1/N.parentContainer.scaleY,D=Y+z.dragStartX,V=X+z.dragStartY}N.emit(d.GAMEOBJECT_DRAG,O,D,V),this.emit(d.DRAG,O,N,D,V)}return b.length},processDragUpEvent:function(O){for(var F=this._drag[O.id],b=0;b<F.length;b++){var I=F[b],N=I.input;if(N&&N.dragState===2){N.dragState=0,N.dragX=N.localX-I.displayOriginX,N.dragY=N.localY-I.displayOriginY;var z=!1,U=N.target;U&&(I.emit(d.GAMEOBJECT_DROP,O,U),this.emit(d.DROP,O,I,U),N.target=null,z=!0),I.input&&I.input.enabled&&(I.emit(d.GAMEOBJECT_DRAG_END,O,N.dragX,N.dragY,z),this.emit(d.DRAG_END,O,I,z))}}return this.setDragState(O,0),F.splice(0),0},processMoveEvents:function(O){var F=0,b=this._temp,I=this._eventData,N=this._eventContainer;I.cancelled=!1;for(var z=!1,U=0;U<b.length;U++){var W=b[U];if(!(!W.input||!W.input.enabled)){if(F++,W.emit(d.GAMEOBJECT_POINTER_MOVE,O,W.input.localX,W.input.localY,N),I.cancelled||!W.input||!W.input.enabled){z=!0;break}if(this.emit(d.GAMEOBJECT_MOVE,O,W,N),I.cancelled||!W.input||!W.input.enabled){z=!0;break}if(this.topOnly)break}}return z||this.emit(d.POINTER_MOVE,O,b),F},processWheelEvent:function(O){var F=0,b=this._temp,I=this._eventData,N=this._eventContainer;I.cancelled=!1;for(var z=!1,U=O.deltaX,W=O.deltaY,D=O.deltaZ,V=0;V<b.length;V++){var L=b[V];if(!(!L.input||!L.input.enabled)){if(F++,L.emit(d.GAMEOBJECT_POINTER_WHEEL,O,U,W,D,N),I.cancelled||!L.input||!L.input.enabled){z=!0;break}if(this.emit(d.GAMEOBJECT_WHEEL,O,L,U,W,D,N),I.cancelled||!L.input||!L.input.enabled){z=!0;break}}}return z||this.emit(d.POINTER_WHEEL,O,b,U,W,D),F},processOverEvents:function(O){var F=this._temp,b=0,I=F.length,N=[];if(I>0){var z=this.manager,U=this._eventData,W=this._eventContainer;U.cancelled=!1;for(var D=!1,V=0;V<I;V++){var L=F[V];if(!(!L.input||!L.input.enabled)){if(N.push(L),z.setCursor(L.input),L.emit(d.GAMEOBJECT_POINTER_OVER,O,L.input.localX,L.input.localY,W),b++,U.cancelled||!L.input||!L.input.enabled){D=!0;break}if(this.emit(d.GAMEOBJECT_OVER,O,L,W),U.cancelled||!L.input||!L.input.enabled){D=!0;break}}}D||this.emit(d.POINTER_OVER,O,N)}return this._over[O.id]=N,b},processOutEvents:function(O){var F=this._over[O.id],b=0,I=F.length;if(I>0){var N=this.manager,z=this._eventData,U=this._eventContainer;z.cancelled=!1;var W=!1;this.sortGameObjects(F,O);for(var D=0;D<I;D++){var V=F[D];if(V=F[D],!(!V.input||!V.input.enabled)){if(N.resetCursor(V.input),V.emit(d.GAMEOBJECT_POINTER_OUT,O,U),b++,z.cancelled||!V.input||!V.input.enabled){W=!0;break}if(this.emit(d.GAMEOBJECT_OUT,O,V,U),z.cancelled||!V.input||!V.input.enabled){W=!0;break}W||this.emit(d.POINTER_OUT,O,F)}}this._over[O.id]=[]}return b},processOverOutEvents:function(O){var F=this._temp,b,I,N=[],z=[],U=[],W=this._over[O.id],D=this._drag[O.id],V=this.manager;for(b=0;b<W.length;b++)I=W[b],F.indexOf(I)===-1&&D.indexOf(I)===-1?N.push(I):U.push(I);for(b=0;b<F.length;b++)I=F[b],W.indexOf(I)===-1&&z.push(I);var L=N.length,B=0,G=this._eventData,Y=this._eventContainer;G.cancelled=!1;var X=!1;if(L>0){for(this.sortGameObjects(N,O),b=0;b<L;b++)if(I=N[b],!(!I.input||!I.input.enabled)){if(V.resetCursor(I.input),I.emit(d.GAMEOBJECT_POINTER_OUT,O,Y),B++,G.cancelled||!I.input||!I.input.enabled){X=!0;break}if(this.emit(d.GAMEOBJECT_OUT,O,I,Y),G.cancelled||!I.input||!I.input.enabled){X=!0;break}}X||this.emit(d.POINTER_OUT,O,N)}if(L=z.length,G.cancelled=!1,X=!1,L>0){for(this.sortGameObjects(z,O),b=0;b<L;b++)if(I=z[b],!(!I.input||!I.input.enabled)){if(V.setCursor(I.input),I.emit(d.GAMEOBJECT_POINTER_OVER,O,I.input.localX,I.input.localY,Y),B++,G.cancelled||!I.input||!I.input.enabled){X=!0;break}if(this.emit(d.GAMEOBJECT_OVER,O,I,Y),G.cancelled||!I.input||!I.input.enabled){X=!0;break}}X||this.emit(d.POINTER_OVER,O,z)}return W=U.concat(z),this._over[O.id]=this.sortGameObjects(W,O),B},processUpEvents:function(O){var F=this._temp,b=this._eventData,I=this._eventContainer;b.cancelled=!1;for(var N=!1,z=0;z<F.length;z++){var U=F[z];if(!(!U.input||!U.input.enabled)){if(U.emit(d.GAMEOBJECT_POINTER_UP,O,U.input.localX,U.input.localY,I),b.cancelled||!U.input||!U.input.enabled){N=!0;break}if(this.emit(d.GAMEOBJECT_UP,O,U,I),b.cancelled||!U.input||!U.input.enabled){N=!0;break}}}return!N&&this.manager&&(O.upElement===this.manager.game.canvas?this.emit(d.POINTER_UP,O,F):this.emit(d.POINTER_UP_OUTSIDE,O)),F.length},queueForInsertion:function(O){return this._pendingInsertion.indexOf(O)===-1&&this._list.indexOf(O)===-1&&this._pendingInsertion.push(O),this},queueForRemoval:function(O){return this._pendingRemoval.push(O),this},setDraggable:function(O,F){F===void 0&&(F=!0),Array.isArray(O)||(O=[O]);for(var b=0;b<O.length;b++){var I=O[b];I.input.draggable=F;var N=this._draggable.indexOf(I);F&&N===-1?this._draggable.push(I):!F&&N>-1&&this._draggable.splice(N,1)}return this},makePixelPerfect:function(O){O===void 0&&(O=1);var F=this.systems.textures;return a(F,O)},setHitArea:function(O,F,b){if(F===void 0)return this.setHitAreaFromTexture(O);Array.isArray(O)||(O=[O]);var I=!1,N=!1,z=!1,U=!1,W=!1,D=!0;if(T(F)){var V=F;F=m(V,"hitArea",null),b=m(V,"hitAreaCallback",null),I=m(V,"draggable",!1),N=m(V,"dropZone",!1),z=m(V,"cursor",!1),U=m(V,"useHandCursor",!1),W=m(V,"pixelPerfect",!1);var L=m(V,"alphaTolerance",1);W&&(F={},b=this.makePixelPerfect(L)),(!F||!b)&&(this.setHitAreaFromTexture(O),D=!1)}else typeof F=="function"&&!b&&(b=F,F={});for(var B=0;B<O.length;B++){var G=O[B];if(W&&G.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var Y=G.input?G.input:l(G,F,b);Y.customHitArea=D,Y.dropZone=N,Y.cursor=U?"pointer":z,G.input=Y,I&&this.setDraggable(G),this.queueForInsertion(G)}return this},setHitAreaCircle:function(O,F,b,I,N){N===void 0&&(N=p);var z=new n(F,b,I);return this.setHitArea(O,z,N)},setHitAreaEllipse:function(O,F,b,I,N,z){z===void 0&&(z=h);var U=new c(F,b,I,N);return this.setHitArea(O,U,z)},setHitAreaFromTexture:function(O,F){F===void 0&&(F=M),Array.isArray(O)||(O=[O]);for(var b=0;b<O.length;b++){var I=O[b],N=I.frame,z=0,U=0;if(I.width?(z=I.width,U=I.height):N&&(z=N.realWidth,U=N.realHeight),I.type==="Container"&&(z===0||U===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}z!==0&&U!==0&&(I.input=l(I,new S(0,0,z,U),F),this.queueForInsertion(I))}return this},setHitAreaRectangle:function(O,F,b,I,N,z){z===void 0&&(z=M);var U=new S(F,b,I,N);return this.setHitArea(O,U,z)},setHitAreaTriangle:function(O,F,b,I,N,z,U,W){W===void 0&&(W=R);var D=new A(F,b,I,N,z,U);return this.setHitArea(O,D,W)},enableDebug:function(O,F){F===void 0&&(F=65280);var b=O.input;if(!b||!b.hitArea)return this;var I=b.hitArea,N=I.type,z=b.hitAreaDebug,U=this.systems.add,W=this.systems.updateList;z&&(W.remove(z),z.destroy(),z=null);var D=0,V=0;switch(N){case y.CIRCLE:z=U.arc(0,0,I.radius),D=I.x-I.radius,V=I.y-I.radius;break;case y.ELLIPSE:z=U.ellipse(0,0,I.width,I.height),D=I.x-I.width/2,V=I.y-I.height/2;break;case y.LINE:z=U.line(0,0,I.x1,I.y1,I.x2,I.y2);break;case y.POLYGON:z=U.polygon(0,0,I.points);break;case y.RECTANGLE:z=U.rectangle(0,0,I.width,I.height),D=I.x,V=I.y;break;case y.TRIANGLE:z=U.triangle(0,0,I.x1,I.y1,I.x2,I.y2,I.x3,I.y3);break}return z&&(z.isFilled=!1,z.strokeColor=F,z.preUpdate=function(){z.setStrokeStyle(1/O.scale,z.strokeColor),z.setDisplayOrigin(O.displayOriginX,O.displayOriginY);var L=O.x,B=O.y,G=O.rotation,Y=O.scaleX,X=O.scaleY;if(O.parentContainer){var k=O.getWorldTransformMatrix();L=k.tx,B=k.ty,G=k.rotation,Y=k.scaleX,X=k.scaleY}z.setRotation(G),z.setScale(Y,X),z.setPosition(L+D*Y,B+V*X),z.setScrollFactor(O.scrollFactorX,O.scrollFactorY),z.setDepth(O.depth)},W.add(z),b.hitAreaDebug=z),this},removeDebug:function(O){var F=O.input;if(F&&F.hitAreaDebug){var b=F.hitAreaDebug;this.systems.updateList.remove(b),b.destroy(),F.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(O){return this.pollRate=O,this._pollTimer=0,this},setGlobalTopOnly:function(O){return this.manager.globalTopOnly=O,this},setTopOnly:function(O){return this.topOnly=O,this},sortGameObjects:function(O,F){if(O.length<2||!F.camera)return O;var b=F.camera.renderList;return O.sort(function(I,N){var z=Math.max(b.indexOf(I),0),U=Math.max(b.indexOf(N),0);return U-z})},sortDropZones:function(O){return O.length<2?O:(this.scene.sys.depthSort(),O.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(O,F){if(!O.parentContainer&&!F.parentContainer)return this.displayList.getIndex(F)-this.displayList.getIndex(O);if(O.parentContainer===F.parentContainer)return F.parentContainer.getIndex(F)-O.parentContainer.getIndex(O);if(O.parentContainer===F)return-1;if(F.parentContainer===O)return 1;for(var b=O.getIndexList(),I=F.getIndexList(),N=Math.min(b.length,I.length),z=0;z<N;z++){var U=b[z],W=I[z];if(U!==W)return W-U}return I.length-b.length;return 0},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(O){return this.manager.addPointer(O)},setDefaultCursor:function(O){return this.manager.setDefaultCursor(O),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(d.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var O=0;O<10;O++)this._drag[O]=[],this._over[O]=[];this.removeAllListeners();var F=this.manager;F.canvas.style.cursor=F.defaultCursor;var b=this.systems.events;b.off(E.TRANSITION_START,this.transitionIn,this),b.off(E.TRANSITION_OUT,this.transitionOut,this),b.off(E.TRANSITION_COMPLETE,this.transitionComplete,this),b.off(E.PRE_UPDATE,this.preUpdate,this),F.events.off(d.GAME_OUT,this.onGameOut,this),F.events.off(d.GAME_OVER,this.onGameOver,this),b.off(E.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var O=this.manager.pointers,F=0;F<O.length;F++)O[F].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(d.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(E.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});P.register("InputPlugin",w,"input"),s.exports=w},63399:(s,g,e)=>{var n=e(10850),p={},f={};f.register=function(u,l,a,o,c){p[u]={plugin:l,mapping:a,settingsKey:o,configKey:c}},f.getPlugin=function(u){return p[u]},f.install=function(u){var l=u.scene.sys,a=l.settings.input,o=l.game.config;for(var c in p){var h=p[c].plugin,d=p[c].mapping,v=p[c].settingsKey,m=p[c].configKey;n(a,v,o[m])&&(u[d]=new h(u))}},f.remove=function(u){p.hasOwnProperty(u)&&delete p[u]},s.exports=f},40398:(s,g,e)=>{var n=e(90447),p=e(56694),f=e(53996),u=e(88456),l=e(44521),a=e(93736),o=e(36580),c=new p({initialize:function(d,v){this.manager=d,this.id=v,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new a,this.prevPosition=new a,this.midPoint=new a(-1,-1),this.velocity=new a,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=v===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(h){var d=h.getWorldPoint(this.x,this.y);return this.worldX=d.x,this.worldY=d.y,this},positionToCamera:function(h,d){return h.getWorldPoint(this.x,this.y,d)},updateMotion:function(){var h=this.position.x,d=this.position.y,v=this.midPoint.x,m=this.midPoint.y;if(!(h===v&&d===m)){var y=l(this.motionFactor,v,h),C=l(this.motionFactor,m,d);u(y,h,.1)&&(y=h),u(C,d,.1)&&(C=d),this.midPoint.set(y,C);var T=h-y,P=d-C;this.velocity.set(T,P),this.angle=n(y,C,h,d),this.distance=Math.sqrt(T*T+P*P)}},up:function(h){"buttons"in h&&(this.buttons=h.buttons),this.event=h,this.button=h.button,this.upElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),h.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=h.timeStamp,this.wasTouch=!1)},down:function(h){"buttons"in h&&(this.buttons=h.buttons),this.event=h,this.button=h.button,this.downElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),h.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),o.macOS&&h.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=h.timeStamp),this.wasTouch=!1},move:function(h){"buttons"in h&&(this.buttons=h.buttons),this.event=h,this.manager.transformPointer(this,h.pageX,h.pageY,!0),this.locked&&(this.movementX=h.movementX||h.mozMovementX||h.webkitMovementX||0,this.movementY=h.movementY||h.mozMovementY||h.webkitMovementY||0),this.moveTime=h.timeStamp,this.wasTouch=!1},wheel:function(h){"buttons"in h&&(this.buttons=h.buttons),this.event=h,this.manager.transformPointer(this,h.pageX,h.pageY,!1),this.deltaX=h.deltaX,this.deltaY=h.deltaY,this.deltaZ=h.deltaZ,this.wasTouch=!1},touchstart:function(h,d){h.pointerId&&(this.pointerId=h.pointerId),this.identifier=h.identifier,this.target=h.target,this.active=!0,this.buttons=1,this.event=d,this.downElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=d.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(h,d){this.event=d,this.manager.transformPointer(this,h.pageX,h.pageY,!0),this.moveTime=d.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(h,d){this.buttons=0,this.event=d,this.upElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=d.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(h,d){this.buttons=0,this.event=d,this.upElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=d.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?f(this.downX,this.downY,this.x,this.y):f(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?n(this.downX,this.downY,this.x,this.y):n(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(h,d){h===void 0&&(h=10),d===void 0&&(d=[]);for(var v=this.prevPosition.x,m=this.prevPosition.y,y=this.position.x,C=this.position.y,T=0;T<h;T++){var P=1/h*T;d[T]={x:l(P,v,y),y:l(P,m,C)}}return d},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(h){this.position.x=h}},y:{get:function(){return this.position.y},set:function(h){this.position.y=h}},time:{get:function(){return this.event?this.event.timeStamp:0}}});s.exports=c},72687:s=>{var g={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};s.exports=g},14874:s=>{s.exports="boot"},54168:s=>{s.exports="destroy"},526:s=>{s.exports="dragend"},81623:s=>{s.exports="dragenter"},94472:s=>{s.exports="drag"},9304:s=>{s.exports="dragleave"},34265:s=>{s.exports="dragover"},50151:s=>{s.exports="dragstart"},98134:s=>{s.exports="drop"},56773:s=>{s.exports="gameobjectdown"},45824:s=>{s.exports="dragend"},39578:s=>{s.exports="dragenter"},72072:s=>{s.exports="drag"},82569:s=>{s.exports="dragleave"},70833:s=>{s.exports="dragover"},81442:s=>{s.exports="dragstart"},32936:s=>{s.exports="drop"},99658:s=>{s.exports="gameobjectmove"},60515:s=>{s.exports="gameobjectout"},55254:s=>{s.exports="gameobjectover"},34782:s=>{s.exports="pointerdown"},41769:s=>{s.exports="pointermove"},65588:s=>{s.exports="pointerout"},61640:s=>{s.exports="pointerover"},49342:s=>{s.exports="pointerup"},82662:s=>{s.exports="wheel"},13058:s=>{s.exports="gameobjectup"},52426:s=>{s.exports="gameobjectwheel"},78072:s=>{s.exports="gameout"},1545:s=>{s.exports="gameover"},67137:s=>{s.exports="boot"},27678:s=>{s.exports="process"},22257:s=>{s.exports="update"},90379:s=>{s.exports="pointerlockchange"},88909:s=>{s.exports="pointerdown"},36548:s=>{s.exports="pointerdownoutside"},18483:s=>{s.exports="pointermove"},22355:s=>{s.exports="pointerout"},7997:s=>{s.exports="pointerover"},66318:s=>{s.exports="pointerup"},94812:s=>{s.exports="pointerupoutside"},37310:s=>{s.exports="wheel"},24196:s=>{s.exports="preupdate"},27053:s=>{s.exports="shutdown"},29413:s=>{s.exports="start"},25165:s=>{s.exports="update"},33963:(s,g,e)=>{s.exports={BOOT:e(14874),DESTROY:e(54168),DRAG_END:e(526),DRAG_ENTER:e(81623),DRAG:e(94472),DRAG_LEAVE:e(9304),DRAG_OVER:e(34265),DRAG_START:e(50151),DROP:e(98134),GAME_OUT:e(78072),GAME_OVER:e(1545),GAMEOBJECT_DOWN:e(56773),GAMEOBJECT_DRAG_END:e(45824),GAMEOBJECT_DRAG_ENTER:e(39578),GAMEOBJECT_DRAG:e(72072),GAMEOBJECT_DRAG_LEAVE:e(82569),GAMEOBJECT_DRAG_OVER:e(70833),GAMEOBJECT_DRAG_START:e(81442),GAMEOBJECT_DROP:e(32936),GAMEOBJECT_MOVE:e(99658),GAMEOBJECT_OUT:e(60515),GAMEOBJECT_OVER:e(55254),GAMEOBJECT_POINTER_DOWN:e(34782),GAMEOBJECT_POINTER_MOVE:e(41769),GAMEOBJECT_POINTER_OUT:e(65588),GAMEOBJECT_POINTER_OVER:e(61640),GAMEOBJECT_POINTER_UP:e(49342),GAMEOBJECT_POINTER_WHEEL:e(82662),GAMEOBJECT_UP:e(13058),GAMEOBJECT_WHEEL:e(52426),MANAGER_BOOT:e(67137),MANAGER_PROCESS:e(27678),MANAGER_UPDATE:e(22257),POINTER_DOWN:e(88909),POINTER_DOWN_OUTSIDE:e(36548),POINTER_MOVE:e(18483),POINTER_OUT:e(22355),POINTER_OVER:e(7997),POINTER_UP:e(66318),POINTER_UP_OUTSIDE:e(94812),POINTER_WHEEL:e(37310),POINTERLOCK_CHANGE:e(90379),PRE_UPDATE:e(24196),SHUTDOWN:e(27053),START:e(29413),UPDATE:e(25165)}},70848:(s,g,e)=>{var n=e(56694),p=new n({initialize:function(u,l){this.pad=u,this.events=u.events,this.index=l,this.value=0,this.threshold=.1},update:function(f){this.value=f},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});s.exports=p},21274:(s,g,e)=>{var n=e(56694),p=e(43200),f=new n({initialize:function(l,a){this.pad=l,this.events=l.manager,this.index=a,this.value=0,this.threshold=1,this.pressed=!1},update:function(u){this.value=u;var l=this.pad,a=this.index;u>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(p.BUTTON_DOWN,l,this,u),this.pad.emit(p.GAMEPAD_BUTTON_DOWN,a,u,this)):this.pressed&&(this.pressed=!1,this.events.emit(p.BUTTON_UP,l,this,u),this.pad.emit(p.GAMEPAD_BUTTON_UP,a,u,this))},destroy:function(){this.pad=null,this.events=null}});s.exports=f},75956:(s,g,e)=>{var n=e(70848),p=e(21274),f=e(56694),u=e(6659),l=e(93736),a=new f({Extends:u,initialize:function(c,h){u.call(this),this.manager=c,this.pad=h,this.id=h.id,this.index=h.index;for(var d=[],v=0;v<h.buttons.length;v++)d.push(new p(this,v));this.buttons=d;var m=[];for(v=0;v<h.axes.length;v++)m.push(new n(this,v));this.axes=m,this.vibration=h.vibrationActuator;var y={value:0,pressed:!1};this._LCLeft=d[14]?d[14]:y,this._LCRight=d[15]?d[15]:y,this._LCTop=d[12]?d[12]:y,this._LCBottom=d[13]?d[13]:y,this._RCLeft=d[2]?d[2]:y,this._RCRight=d[1]?d[1]:y,this._RCTop=d[3]?d[3]:y,this._RCBottom=d[0]?d[0]:y,this._FBLeftTop=d[4]?d[4]:y,this._FBLeftBottom=d[6]?d[6]:y,this._FBRightTop=d[5]?d[5]:y,this._FBRightBottom=d[7]?d[7]:y;var C={value:0};this._HAxisLeft=m[0]?m[0]:C,this._VAxisLeft=m[1]?m[1]:C,this._HAxisRight=m[2]?m[2]:C,this._VAxisRight=m[3]?m[3]:C,this.leftStick=new l,this.rightStick=new l,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(o){return this.axes[o].getValue()},setAxisThreshold:function(o){for(var c=0;c<this.axes.length;c++)this.axes[c].threshold=o},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(o){return this.buttons[o].value},isButtonDown:function(o){return this.buttons[o].pressed},update:function(o){if(!(o.timestamp<this._created)){var c,h=this.buttons,d=o.buttons,v=h.length;for(c=0;c<v;c++)h[c].update(d[c].value);var m=this.axes,y=o.axes;for(v=m.length,c=0;c<v;c++)m[c].update(y[c]);v>=2&&(this.leftStick.set(m[0].getValue(),m[1].getValue()),v>=4&&this.rightStick.set(m[2].getValue(),m[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var o;for(o=0;o<this.buttons.length;o++)this.buttons[o].destroy();for(o=0;o<this.axes.length;o++)this.axes[o].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});s.exports=a},1379:(s,g,e)=>{var n=e(56694),p=e(6659),f=e(43200),u=e(75956),l=e(10850),a=e(63399),o=e(33963),c=new n({Extends:p,initialize:function(d){p.call(this),this.scene=d.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=d,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,d.pluginEvents.once(o.BOOT,this.boot,this),d.pluginEvents.on(o.START,this.start,this)},boot:function(){var h=this.scene.sys.game,d=this.settings.input,v=h.config;this.enabled=l(d,"gamepad",v.inputGamepad)&&h.device.input.gamepads,this.target=l(d,"gamepad.target",v.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(o.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(o.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var h=this,d=this.target,v=function(m){m.defaultPrevented||!h.isActive()||(h.refreshPads(),h.queue.push(m))};this.onGamepadHandler=v,d.addEventListener("gamepadconnected",v,!1),d.addEventListener("gamepaddisconnected",v,!1),this.sceneInputPlugin.pluginEvents.on(o.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(o.UPDATE,this.update);for(var h=0;h<this.gamepads.length;h++)this.gamepads[h].removeAllListeners()},disconnectAll:function(){for(var h=0;h<this.gamepads.length;h++)this.gamepads[h].pad.connected=!1},refreshPads:function(){var h=navigator.getGamepads();if(!h)this.disconnectAll();else for(var d=this.gamepads,v=0;v<h.length;v++){var m=h[v];if(!!m){var y=m.id,C=m.index,T=d[C];if(T)T.id!==y?(T.destroy(),d[C]=new u(this,m)):T.update(m);else{var P=new u(this,m);d[C]=P,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=P):this._pad3=P:this._pad2=P:this._pad1=P}}}},getAll:function(){for(var h=[],d=this.gamepads,v=0;v<d.length;v++)d[v]&&h.push(d[v]);return h},getPad:function(h){for(var d=this.gamepads,v=0;v<d.length;v++)if(d[v]&&d[v].index===h)return d[v]},update:function(){if(!!this.enabled){this.refreshPads();var h=this.queue.length;if(h!==0)for(var d=this.queue.splice(0,h),v=0;v<h;v++){var m=d[v],y=this.getPad(m.gamepad.index);m.type==="gamepadconnected"?this.emit(f.CONNECTED,y,m):m.type==="gamepaddisconnected"&&this.emit(f.DISCONNECTED,y,m)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var h=0;h<this.gamepads.length;h++)this.gamepads[h]&&this.gamepads[h].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});a.register("GamepadPlugin",c,"gamepad","gamepad","inputGamepad"),s.exports=c},33171:s=>{s.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},74982:s=>{s.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},43247:s=>{s.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},4898:(s,g,e)=>{s.exports={DUALSHOCK_4:e(74982),SNES_USB:e(33171),XBOX_360:e(43247)}},17344:s=>{s.exports="down"},36635:s=>{s.exports="up"},85724:s=>{s.exports="connected"},55832:s=>{s.exports="disconnected"},772:s=>{s.exports="down"},33608:s=>{s.exports="up"},43200:(s,g,e)=>{s.exports={BUTTON_DOWN:e(17344),BUTTON_UP:e(36635),CONNECTED:e(85724),DISCONNECTED:e(55832),GAMEPAD_BUTTON_DOWN:e(772),GAMEPAD_BUTTON_UP:e(33608)}},92636:(s,g,e)=>{s.exports={Axis:e(70848),Button:e(21274),Events:e(43200),Gamepad:e(75956),GamepadPlugin:e(1379),Configs:e(4898)}},20873:(s,g,e)=>{var n=e(72687),p=e(98611),f={CreatePixelPerfectHandler:e(18104),CreateInteractiveObject:e(27395),Events:e(33963),Gamepad:e(92636),InputManager:e(69898),InputPlugin:e(12499),InputPluginCache:e(63399),Keyboard:e(28388),Mouse:e(11343),Pointer:e(40398),Touch:e(77423)};f=p(!1,f,n),s.exports=f},71064:(s,g,e)=>{var n=e(66458),p=e(56694),f=e(97081),u=e(33963),l=e(11873),a=e(72283),o=new p({initialize:function(h){this.manager=h,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=a,this.onKeyUp=a,h.events.once(u.MANAGER_BOOT,this.boot,this)},boot:function(){var c=this.manager.config;this.enabled=c.inputKeyboard,this.target=c.inputKeyboardEventTarget,this.addCapture(c.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(f.POST_STEP,this.postUpdate,this)},startListeners:function(){var c=this;this.onKeyDown=function(d){if(!(d.defaultPrevented||!c.enabled||!c.manager)){c.queue.push(d),c.manager.events.emit(u.MANAGER_PROCESS);var v=d.altKey||d.ctrlKey||d.shiftKey||d.metaKey;c.preventDefault&&!v&&c.captures.indexOf(d.keyCode)>-1&&d.preventDefault()}},this.onKeyUp=function(d){if(!(d.defaultPrevented||!c.enabled||!c.manager)){c.queue.push(d),c.manager.events.emit(u.MANAGER_PROCESS);var v=d.altKey||d.ctrlKey||d.shiftKey||d.metaKey;c.preventDefault&&!v&&c.captures.indexOf(d.keyCode)>-1&&d.preventDefault()}};var h=this.target;h&&(h.addEventListener("keydown",this.onKeyDown,!1),h.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var c=this.target;c.removeEventListener("keydown",this.onKeyDown,!1),c.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(c){typeof c=="string"&&(c=c.split(",")),Array.isArray(c)||(c=[c]);for(var h=this.captures,d=0;d<c.length;d++){var v=c[d];typeof v=="string"&&(v=l[v.trim().toUpperCase()]),h.indexOf(v)===-1&&h.push(v)}this.preventDefault=h.length>0},removeCapture:function(c){typeof c=="string"&&(c=c.split(",")),Array.isArray(c)||(c=[c]);for(var h=this.captures,d=0;d<c.length;d++){var v=c[d];typeof v=="string"&&(v=l[v.toUpperCase()]),n(h,v)}this.preventDefault=h.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(f.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});s.exports=o},89666:(s,g,e)=>{var n=e(56694),p=e(6659),f=e(94030),u=e(97081),l=e(10850),a=e(33963),o=e(63399),c=e(50165),h=e(11873),d=e(95625),v=e(48044),m=e(7599),y=e(84314),C=new n({Extends:p,initialize:function(P){p.call(this),this.game=P.systems.game,this.scene=P.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=P,this.manager=P.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,P.pluginEvents.once(a.BOOT,this.boot,this),P.pluginEvents.on(a.START,this.start,this)},boot:function(){var T=this.settings.input;this.enabled=l(T,"keyboard",!0);var P=l(T,"keyboard.capture",null);P&&this.addCaptures(P),this.sceneInputPlugin.pluginEvents.once(a.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(a.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(a.SHUTDOWN,this.shutdown,this),this.game.events.on(u.BLUR,this.resetKeys,this),this.scene.sys.events.on(m.PAUSE,this.resetKeys,this),this.scene.sys.events.on(m.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(T){return this.manager.addCapture(T),this},removeCapture:function(T){return this.manager.removeCapture(T),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:h.UP,down:h.DOWN,left:h.LEFT,right:h.RIGHT,space:h.SPACE,shift:h.SHIFT})},addKeys:function(T,P,S){P===void 0&&(P=!0),S===void 0&&(S=!1);var M={};if(typeof T=="string"){T=T.split(",");for(var E=0;E<T.length;E++){var A=T[E].trim();A&&(M[A]=this.addKey(A,P,S))}}else for(var R in T)M[R]=this.addKey(T[R],P,S);return M},addKey:function(T,P,S){P===void 0&&(P=!0),S===void 0&&(S=!1);var M=this.keys;if(T instanceof c){var E=M.indexOf(T);return E>-1?M[E]=T:M[T.keyCode]=T,P&&this.addCapture(T.keyCode),T.setEmitOnRepeat(S),T}return typeof T=="string"&&(T=h[T.toUpperCase()]),M[T]||(M[T]=new c(this,T),P&&this.addCapture(T),M[T].setEmitOnRepeat(S)),M[T]},removeKey:function(T,P,S){P===void 0&&(P=!1),S===void 0&&(S=!1);var M=this.keys,E;if(T instanceof c){var A=M.indexOf(T);A>-1&&(E=this.keys[A],this.keys[A]=void 0)}else typeof T=="string"&&(T=h[T.toUpperCase()]);return M[T]&&(E=M[T],M[T]=void 0),E&&(E.plugin=null,S&&this.removeCapture(E.keyCode),P&&E.destroy()),this},removeAllKeys:function(T,P){T===void 0&&(T=!1),P===void 0&&(P=!1);for(var S=this.keys,M=0;M<S.length;M++){var E=S[M];E&&(S[M]=void 0,P&&this.removeCapture(E.keyCode),T&&E.destroy())}return this},createCombo:function(T,P){return new d(this,T,P)},checkDown:function(T,P){if(P===void 0&&(P=0),this.enabled&&T.isDown){var S=y(this.time-T.timeDown,P);if(S>T._tick)return T._tick=S,!0}return!1},update:function(){var T=this.manager.queue,P=T.length;if(!(!this.isActive()||P===0))for(var S=this.keys,M=0;M<P;M++){var E=T[M],A=E.keyCode,R=S[A],w=!1;E.cancelled===void 0&&(E.cancelled=0,E.stopImmediatePropagation=function(){E.cancelled=1},E.stopPropagation=function(){E.cancelled=-1}),E.cancelled!==-1&&(A===this.prevCode&&E.timeStamp===this.prevTime&&E.type===this.prevType||(this.prevCode=A,this.prevTime=E.timeStamp,this.prevType=E.type,E.type==="keydown"?(R&&(w=R.isDown,R.onDown(E)),!E.cancelled&&(!R||!w)&&(v[A]&&this.emit(f.KEY_DOWN+v[A],E),E.cancelled||this.emit(f.ANY_KEY_DOWN,E))):(R&&R.onUp(E),E.cancelled||(v[A]&&this.emit(f.KEY_UP+v[A],E),E.cancelled||this.emit(f.ANY_KEY_UP,E))),E.cancelled===1&&(E.cancelled=0)))}},resetKeys:function(){for(var T=this.keys,P=0;P<T.length;P++)T[P]&&T[P].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(a.MANAGER_PROCESS,this.update,this),this.game.events.off(u.BLUR,this.resetKeys),this.scene.sys.events.off(m.PAUSE,this.resetKeys,this),this.scene.sys.events.off(m.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var T=this.keys,P=0;P<T.length;P++)T[P]&&T[P].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});o.register("KeyboardPlugin",C,"keyboard","keyboard","inputKeyboard"),s.exports=C},60258:s=>{var g=function(e,n){return n.timeLastMatched=e.timeStamp,n.index++,n.index===n.size?!0:(n.current=n.keyCodes[n.index],!1)};s.exports=g},95625:(s,g,e)=>{var n=e(56694),p=e(94030),f=e(72632),u=e(2544),l=e(88754),a=new n({initialize:function(c,h,d){if(d===void 0&&(d={}),h.length<2)return!1;this.manager=c,this.enabled=!0,this.keyCodes=[];for(var v=0;v<h.length;v++){var m=h[v];typeof m=="string"?this.keyCodes.push(m.toUpperCase().charCodeAt(0)):typeof m=="number"?this.keyCodes.push(m):m.hasOwnProperty("keyCode")&&this.keyCodes.push(m.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=f(d,"resetOnWrongKey",!0),this.maxKeyDelay=f(d,"maxKeyDelay",0),this.resetOnMatch=f(d,"resetOnMatch",!1),this.deleteOnMatch=f(d,"deleteOnMatch",!1);var y=this,C=function(T){if(!(y.matched||!y.enabled)){var P=u(T,y);P&&(y.manager.emit(p.COMBO_MATCH,y,T),y.resetOnMatch?l(y):y.deleteOnMatch&&y.destroy())}};this.onKeyDown=C,this.manager.on(p.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(p.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});s.exports=a},2544:(s,g,e)=>{var n=e(60258),p=function(f,u){if(u.matched)return!0;var l=!1,a=!1;if(f.keyCode===u.current)if(u.index>0&&u.maxKeyDelay>0){var o=u.timeLastMatched+u.maxKeyDelay;f.timeStamp<=o&&(a=!0,l=n(f,u))}else a=!0,l=n(f,u);return!a&&u.resetOnWrongKey&&(u.index=0,u.current=u.keyCodes[0]),l&&(u.timeLastMatched=f.timeStamp,u.matched=!0,u.timeMatched=f.timeStamp),l};s.exports=p},88754:s=>{var g=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e};s.exports=g},5044:s=>{s.exports="keydown"},40813:s=>{s.exports="keyup"},89319:s=>{s.exports="keycombomatch"},43267:s=>{s.exports="down"},78595:s=>{s.exports="keydown-"},30056:s=>{s.exports="keyup-"},81939:s=>{s.exports="up"},94030:(s,g,e)=>{s.exports={ANY_KEY_DOWN:e(5044),ANY_KEY_UP:e(40813),COMBO_MATCH:e(89319),DOWN:e(43267),KEY_DOWN:e(78595),KEY_UP:e(30056),UP:e(81939)}},28388:(s,g,e)=>{s.exports={Events:e(94030),KeyboardManager:e(71064),KeyboardPlugin:e(89666),Key:e(50165),KeyCodes:e(11873),KeyCombo:e(95625),AdvanceKeyCombo:e(60258),ProcessKeyCombo:e(2544),ResetKeyCombo:e(88754),JustDown:e(42460),JustUp:e(53162),DownDuration:e(64964),UpDuration:e(70331)}},64964:s=>{var g=function(e,n){n===void 0&&(n=50);var p=e.plugin.game.loop.time-e.timeDown;return e.isDown&&p<n};s.exports=g},42460:s=>{var g=function(e){return e._justDown?(e._justDown=!1,!0):!1};s.exports=g},53162:s=>{var g=function(e){return e._justUp?(e._justUp=!1,!0):!1};s.exports=g},50165:(s,g,e)=>{var n=e(56694),p=e(6659),f=e(94030),u=new n({Extends:p,initialize:function(a,o){p.call(this),this.plugin=a,this.keyCode=o,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(l){return this.emitOnRepeat=l,this},onDown:function(l){this.originalEvent=l,this.enabled&&(this.altKey=l.altKey,this.ctrlKey=l.ctrlKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.location=l.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(f.DOWN,this,l):(this.isDown=!0,this.isUp=!1,this.timeDown=l.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(f.DOWN,this,l)))},onUp:function(l){this.originalEvent=l,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=l.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(f.UP,this,l))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});s.exports=u},11873:s=>{var g={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};s.exports=g},48044:(s,g,e)=>{var n=e(11873),p={};for(var f in n)p[n[f]]=f;s.exports=p},70331:s=>{var g=function(e,n){n===void 0&&(n=50);var p=e.plugin.game.loop.time-e.timeUp;return e.isUp&&p<n};s.exports=g},7905:(s,g,e)=>{var n=e(56694),p=e(90185),f=e(33963),u=e(72283),l=new n({initialize:function(o){this.manager=o,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=u,this.onMouseDown=u,this.onMouseUp=u,this.onMouseDownWindow=u,this.onMouseUpWindow=u,this.onMouseOver=u,this.onMouseOut=u,this.onMouseWheel=u,this.pointerLockChange=u,this.isTop=!0,o.events.once(f.MANAGER_BOOT,this.boot,this)},boot:function(){var a=this.manager.config;this.enabled=a.inputMouse,this.target=a.inputMouseEventTarget,this.passive=a.inputMousePassive,this.preventDefaultDown=a.inputMousePreventDefaultDown,this.preventDefaultUp=a.inputMousePreventDefaultUp,this.preventDefaultMove=a.inputMousePreventDefaultMove,this.preventDefaultWheel=a.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,a.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(a){return a.preventDefault(),!1}),this},requestPointerLock:function(){if(p.pointerLock){var a=this.target;a.requestPointerLock=a.requestPointerLock||a.mozRequestPointerLock||a.webkitRequestPointerLock,a.requestPointerLock()}},releasePointerLock:function(){p.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var a=this.target;if(!!a){var o=this,c=this.manager,h=c.canvas,d=window&&window.focus&&c.game.config.autoFocus;this.onMouseMove=function(m){!m.defaultPrevented&&o.enabled&&c&&c.enabled&&(c.onMouseMove(m),o.preventDefaultMove&&m.preventDefault())},this.onMouseDown=function(m){d&&window.focus(),!m.defaultPrevented&&o.enabled&&c&&c.enabled&&(c.onMouseDown(m),o.preventDefaultDown&&m.target===h&&m.preventDefault())},this.onMouseDownWindow=function(m){!m.defaultPrevented&&o.enabled&&c&&c.enabled&&m.target!==h&&c.onMouseDown(m)},this.onMouseUp=function(m){!m.defaultPrevented&&o.enabled&&c&&c.enabled&&(c.onMouseUp(m),o.preventDefaultUp&&m.target===h&&m.preventDefault())},this.onMouseUpWindow=function(m){!m.defaultPrevented&&o.enabled&&c&&c.enabled&&m.target!==h&&c.onMouseUp(m)},this.onMouseOver=function(m){!m.defaultPrevented&&o.enabled&&c&&c.enabled&&c.setCanvasOver(m)},this.onMouseOut=function(m){!m.defaultPrevented&&o.enabled&&c&&c.enabled&&c.setCanvasOut(m)},this.onMouseWheel=function(m){!m.defaultPrevented&&o.enabled&&c&&c.enabled&&c.onMouseWheel(m),o.preventDefaultWheel&&m.target===h&&m.preventDefault()};var v={passive:!0};if(a.addEventListener("mousemove",this.onMouseMove),a.addEventListener("mousedown",this.onMouseDown),a.addEventListener("mouseup",this.onMouseUp),a.addEventListener("mouseover",this.onMouseOver,v),a.addEventListener("mouseout",this.onMouseOut,v),this.preventDefaultWheel?a.addEventListener("wheel",this.onMouseWheel,{passive:!1}):a.addEventListener("wheel",this.onMouseWheel,v),window&&c.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,v),window.top.addEventListener("mouseup",this.onMouseUpWindow,v)}catch(m){window.addEventListener("mousedown",this.onMouseDownWindow,v),window.addEventListener("mouseup",this.onMouseUpWindow,v),this.isTop=!1}p.pointerLock&&(this.pointerLockChange=function(m){var y=o.target;o.locked=document.pointerLockElement===y||document.mozPointerLockElement===y||document.webkitPointerLockElement===y,c.onPointerLockChange(m)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var a=this.target;a.removeEventListener("mousemove",this.onMouseMove),a.removeEventListener("mousedown",this.onMouseDown),a.removeEventListener("mouseup",this.onMouseUp),a.removeEventListener("mouseover",this.onMouseOver),a.removeEventListener("mouseout",this.onMouseOut),window&&(a=this.isTop?window.top:window,a.removeEventListener("mousedown",this.onMouseDownWindow),a.removeEventListener("mouseup",this.onMouseUpWindow)),p.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});s.exports=l},11343:(s,g,e)=>{s.exports={MouseManager:e(7905)}},37579:(s,g,e)=>{var n=e(56694),p=e(33963),f=e(72283),u=new n({initialize:function(a){this.manager=a,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=f,this.onTouchStartWindow=f,this.onTouchMove=f,this.onTouchEnd=f,this.onTouchEndWindow=f,this.onTouchCancel=f,this.onTouchCancelWindow=f,this.isTop=!0,a.events.once(p.MANAGER_BOOT,this.boot,this)},boot:function(){var l=this.manager.config;this.enabled=l.inputTouch,this.target=l.inputTouchEventTarget,this.capture=l.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,l.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(l){return l.preventDefault(),!1}),this},startListeners:function(){var l=this.target;if(!!l){var a=this,o=this.manager,c=o.canvas,h=window&&window.focus&&o.game.config.autoFocus;this.onTouchMove=function(y){!y.defaultPrevented&&a.enabled&&o&&o.enabled&&(o.onTouchMove(y),a.capture&&y.cancelable&&y.preventDefault())},this.onTouchStart=function(y){h&&window.focus(),!y.defaultPrevented&&a.enabled&&o&&o.enabled&&(o.onTouchStart(y),a.capture&&y.cancelable&&y.target===c&&y.preventDefault())},this.onTouchStartWindow=function(y){!y.defaultPrevented&&a.enabled&&o&&o.enabled&&y.target!==c&&o.onTouchStart(y)},this.onTouchEnd=function(y){!y.defaultPrevented&&a.enabled&&o&&o.enabled&&(o.onTouchEnd(y),a.capture&&y.cancelable&&y.target===c&&y.preventDefault())},this.onTouchEndWindow=function(y){!y.defaultPrevented&&a.enabled&&o&&o.enabled&&y.target!==c&&o.onTouchEnd(y)},this.onTouchCancel=function(y){!y.defaultPrevented&&a.enabled&&o&&o.enabled&&(o.onTouchCancel(y),a.capture&&y.preventDefault())},this.onTouchCancelWindow=function(y){!y.defaultPrevented&&a.enabled&&o&&o.enabled&&o.onTouchCancel(y)};var d=this.capture,v={passive:!0},m={passive:!1};if(l.addEventListener("touchstart",this.onTouchStart,d?m:v),l.addEventListener("touchmove",this.onTouchMove,d?m:v),l.addEventListener("touchend",this.onTouchEnd,d?m:v),l.addEventListener("touchcancel",this.onTouchCancel,d?m:v),window&&o.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,m),window.top.addEventListener("touchend",this.onTouchEndWindow,m),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,m)}catch(y){window.addEventListener("touchstart",this.onTouchStartWindow,m),window.addEventListener("touchend",this.onTouchEndWindow,m),window.addEventListener("touchcancel",this.onTouchCancelWindow,m),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var l=this.target;l.removeEventListener("touchstart",this.onTouchStart),l.removeEventListener("touchmove",this.onTouchMove),l.removeEventListener("touchend",this.onTouchEnd),l.removeEventListener("touchcancel",this.onTouchCancel),window&&(l=this.isTop?window.top:window,l.removeEventListener("touchstart",this.onTouchStartWindow),l.removeEventListener("touchend",this.onTouchEndWindow),l.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});s.exports=u},77423:(s,g,e)=>{s.exports={TouchManager:e(37579)}},98035:(s,g,e)=>{var n=e(56694),p=e(12117),f=e(683),u=e(72632),l=e(30750),a=e(43531),o=e(88490),c=e(33868),h=new n({initialize:function(v,m){if(this.loader=v,this.cache=u(m,"cache",!1),this.type=u(m,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=u(m,"key",!1);var y=this.key;if(v.prefix&&v.prefix!==""&&(this.key=v.prefix+y),!this.key)throw new Error("Invalid File key: "+this.key);var C=u(m,"url");C===void 0?C=v.path+y+"."+u(m,"extension",""):typeof C=="string"&&!C.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(C=v.path+C),this.url=C,this.src="",this.xhrSettings=c(u(m,"responseType",void 0)),u(m,"xhrSettings",!1)&&(this.xhrSettings=a(this.xhrSettings,u(m,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?p.FILE_POPULATED:p.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=u(m,"config",{}),this.multiFile,this.linkFile},setLink:function(d){this.linkFile=d,d.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===p.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=p.FILE_LOADING,this.src=l(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=o(this,this.loader.xhr))},onLoad:function(d,v){var m=d.responseURL&&this.loader.localSchemes.some(function(T){return d.responseURL.indexOf(T)===0}),y=m&&v.target.status===0,C=!(v.target&&v.target.status!==200)||y;d.readyState===4&&d.status>=400&&d.status<=599&&(C=!1),this.state=p.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,C)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(d){d.lengthComputable&&(this.bytesLoaded=d.loaded,this.bytesTotal=d.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(f.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=p.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=p.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=p.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(d){if(this.state!==p.FILE_PENDING_DESTROY){d===void 0&&(d=this.data);var v=this.key,m=this.type;this.loader.emit(f.FILE_COMPLETE,v,m,d),this.loader.emit(f.FILE_KEY_COMPLETE+m+"-"+v,v,m,d),this.loader.flagForRemoval(this),this.state=p.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});h.createObjectURL=function(d,v,m){if(typeof URL=="function")d.src=URL.createObjectURL(v);else{var y=new FileReader;y.onload=function(){d.removeAttribute("crossOrigin"),d.src="data:"+(v.type||m)+";base64,"+y.result.split(",")[1]},y.onerror=d.onerror,y.readAsDataURL(v)}},h.revokeObjectURL=function(d){typeof URL=="function"&&URL.revokeObjectURL(d.src)},s.exports=h},76846:s=>{var g={},e={install:function(n){for(var p in g)n[p]=g[p]},register:function(n,p){g[n]=p},destroy:function(){g={}}};s.exports=e},30750:s=>{var g=function(e,n){return e.url?e.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?e.url:n+e.url:!1};s.exports=g},67285:(s,g,e)=>{var n=e(56694),p=e(12117),f=e(58403),u=e(6659),l=e(683),a=e(76846),o=e(72632),c=e(10850),h=e(91963),d=e(7599),v=e(33868),m=new n({Extends:u,initialize:function(C){u.call(this);var T=C.sys.game.config,P=C.sys.settings.loader;this.scene=C,this.systems=C.sys,this.cacheManager=C.sys.cache,this.textureManager=C.sys.textures,this.sceneManager=C.sys.game.scene,a.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(o(P,"baseURL",T.loaderBaseURL)),this.setPath(o(P,"path",T.loaderPath)),this.setPrefix(o(P,"prefix",T.loaderPrefix)),this.maxParallelDownloads=o(P,"maxParallelDownloads",T.loaderMaxParallelDownloads),this.xhr=v(o(P,"responseType",T.loaderResponseType),o(P,"async",T.loaderAsync),o(P,"user",T.loaderUser),o(P,"password",T.loaderPassword),o(P,"timeout",T.loaderTimeout),o(P,"withCredentials",T.loaderWithCredentials)),this.crossOrigin=o(P,"crossOrigin",T.loaderCrossOrigin),this.imageLoadType=o(P,"imageLoadType",T.loaderImageLoadType),this.localSchemes=o(P,"localScheme",T.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new f,this.inflight=new f,this.queue=new f,this._deleteQueue=new f,this.totalFailed=0,this.totalComplete=0,this.state=p.LOADER_IDLE,this.multiKeyIndex=0,C.sys.events.once(d.BOOT,this.boot,this),C.sys.events.on(d.START,this.pluginStart,this)},boot:function(){this.systems.events.once(d.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(d.SHUTDOWN,this.shutdown,this)},setBaseURL:function(y){return y===void 0&&(y=""),y!==""&&y.substr(-1)!=="/"&&(y=y.concat("/")),this.baseURL=y,this},setPath:function(y){return y===void 0&&(y=""),y!==""&&y.substr(-1)!=="/"&&(y=y.concat("/")),this.path=y,this},setPrefix:function(y){return y===void 0&&(y=""),this.prefix=y,this},setCORS:function(y){return this.crossOrigin=y,this},addFile:function(y){Array.isArray(y)||(y=[y]);for(var C=0;C<y.length;C++){var T=y[C];this.keyExists(T)||(this.list.set(T),this.emit(l.ADD,T.key,T.type,this,T),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(y){var C=y.hasCacheConflict();return C||this.list.iterate(function(T){if(T.type===y.type&&T.key===y.key)return C=!0,!1}),!C&&this.isLoading()&&(this.inflight.iterate(function(T){if(T.type===y.type&&T.key===y.key)return C=!0,!1}),this.queue.iterate(function(T){if(T.type===y.type&&T.key===y.key)return C=!0,!1})),C},addPack:function(y,C){if(typeof C=="string"){var T=c(y,C);T&&(y={packKey:T})}var P=0,S=this.baseURL,M=this.path,E=this.prefix;for(var A in y)if(!!Object.prototype.hasOwnProperty.call(y,A)){var R=y[A],w=o(R,"baseURL",S),O=o(R,"path",M),F=o(R,"prefix",E),b=o(R,"files",null),I=o(R,"defaultType","void");if(Array.isArray(b)){this.setBaseURL(w),this.setPath(O),this.setPrefix(F);for(var N=0;N<b.length;N++){var z=b[N],U=z.hasOwnProperty("type")?z.type:I;this[U]&&(this[U](z),P++)}}}return this.setBaseURL(S),this.setPath(M),this.setPrefix(E),P>0},isLoading:function(){return this.state===p.LOADER_LOADING||this.state===p.LOADER_PROCESSING},isReady:function(){return this.state===p.LOADER_IDLE||this.state===p.LOADER_COMPLETE},start:function(){!this.isReady()||(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(l.START,this),this.list.size===0?this.loadComplete():(this.state=p.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(d.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(l.PROGRESS,this.progress)},update:function(){this.state===p.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(y){if((y.state===p.FILE_POPULATED||y.state===p.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(y),this.list.delete(y),y.crossOrigin||(y.crossOrigin=this.crossOrigin),y.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(y,C){!this.inflight||(this.inflight.delete(y),this.updateProgress(),C?(this.totalComplete++,this.queue.set(y),this.emit(l.FILE_LOAD,y),y.onProcess()):(this.totalFailed++,this._deleteQueue.set(y),this.emit(l.FILE_LOAD_ERROR,y),this.fileProcessComplete(y)))},fileProcessComplete:function(y){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(y.state===p.FILE_ERRORED?y.multiFile&&y.multiFile.onFileFailed(y):y.state===p.FILE_COMPLETE&&(y.multiFile?y.multiFile.isReadyToProcess()&&(y.multiFile.addToCache(),y.multiFile.pendingDestroy()):(y.addToCache(),y.pendingDestroy())),this.queue.delete(y),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(l.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=p.LOADER_COMPLETE,this.systems.events.off(d.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(l.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(y){this._deleteQueue.set(y)},saveJSON:function(y,C){return this.save(JSON.stringify(y),C)},save:function(y,C,T){C===void 0&&(C="file.json"),T===void 0&&(T="application/json");var P=new Blob([y],{type:T}),S=URL.createObjectURL(P),M=document.createElement("a");return M.download=C,M.textContent="Download "+C,M.href=S,M.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var y=this.systems.game.config,C=this.systems.settings.loader;this.setBaseURL(o(C,"baseURL",y.loaderBaseURL)),this.setPath(o(C,"path",y.loaderPath)),this.setPrefix(o(C,"prefix",y.loaderPrefix)),this.state=p.LOADER_IDLE},shutdown:function(){this.reset(),this.state=p.LOADER_SHUTDOWN,this.systems.events.off(d.UPDATE,this.update,this),this.systems.events.off(d.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=p.LOADER_DESTROYED,this.systems.events.off(d.UPDATE,this.update,this),this.systems.events.off(d.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});h.register("Loader",m,"load"),s.exports=m},43531:(s,g,e)=>{var n=e(98611),p=e(33868),f=function(u,l){var a=u===void 0?p():n({},u);if(l)for(var o in l)l[o]!==void 0&&(a[o]=l[o]);return a};s.exports=f},45176:(s,g,e)=>{var n=e(56694),p=e(12117),f=e(683),u=new n({initialize:function(a,o,c,h){var d=[];h.forEach(function(m){m&&d.push(m)}),this.loader=a,this.type=o,this.key=c,this.multiKeyIndex=a.multiKeyIndex++,this.files=d,this.state=p.FILE_PENDING,this.complete=!1,this.pending=d.length,this.failed=0,this.config={},this.baseURL=a.baseURL,this.path=a.path,this.prefix=a.prefix;for(var v=0;v<d.length;v++)d[v].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(l){return this.files.push(l),l.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(l){var a=this.files.indexOf(l);a!==-1&&this.pending--},onFileFailed:function(l){var a=this.files.indexOf(l);a!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,l.type,l.key))},pendingDestroy:function(){if(this.state!==p.FILE_PENDING_DESTROY){var l=this.key,a=this.type;this.loader.emit(f.FILE_COMPLETE,l,a),this.loader.emit(f.FILE_KEY_COMPLETE+a+"-"+l,l,a),this.loader.flagForRemoval(this);for(var o=0;o<this.files.length;o++)this.files[o].pendingDestroy();this.state=p.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});s.exports=u},88490:(s,g,e)=>{var n=e(43531),p=function(f,u){var l=n(u,f.xhrSettings),a=new XMLHttpRequest;if(a.open("GET",f.src,l.async,l.user,l.password),a.responseType=f.xhrSettings.responseType,a.timeout=l.timeout,l.headers)for(var o in l.headers)a.setRequestHeader(o,l.headers[o]);return l.header&&l.headerValue&&a.setRequestHeader(l.header,l.headerValue),l.requestedWith&&a.setRequestHeader("X-Requested-With",l.requestedWith),l.overrideMimeType&&a.overrideMimeType(l.overrideMimeType),l.withCredentials&&(a.withCredentials=!0),a.onload=f.onLoad.bind(f,a),a.onerror=f.onError.bind(f,a),a.onprogress=f.onProgress.bind(f),a.send(),a};s.exports=p},33868:s=>{var g=function(e,n,p,f,u,l){return e===void 0&&(e=""),n===void 0&&(n=!0),p===void 0&&(p=""),f===void 0&&(f=""),u===void 0&&(u=0),l===void 0&&(l=!1),{responseType:e,async:n,user:p,password:f,timeout:u,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:l}};s.exports=g},12117:s=>{var g={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};s.exports=g},7398:s=>{s.exports="addfile"},52187:s=>{s.exports="complete"},36627:s=>{s.exports="filecomplete"},81925:s=>{s.exports="filecomplete-"},29774:s=>{s.exports="loaderror"},20943:s=>{s.exports="load"},74693:s=>{s.exports="fileprogress"},71176:s=>{s.exports="postprocess"},88984:s=>{s.exports="progress"},72753:s=>{s.exports="start"},683:(s,g,e)=>{s.exports={ADD:e(7398),COMPLETE:e(52187),FILE_COMPLETE:e(36627),FILE_KEY_COMPLETE:e(81925),FILE_LOAD_ERROR:e(29774),FILE_LOAD:e(20943),FILE_PROGRESS:e(74693),POST_PROCESS:e(71176),PROGRESS:e(88984),START:e(72753)}},46468:(s,g,e)=>{var n=e(56694),p=e(76846),f=e(70806),u=e(683),l=new n({Extends:f,initialize:function(o,c,h,d,v){f.call(this,o,c,h,d,v),this.type="animationJSON"},onProcess:function(){this.loader.once(u.POST_PROCESS,this.onLoadComplete,this),f.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});p.register("animation",function(a,o,c,h){if(Array.isArray(a))for(var d=0;d<a.length;d++)this.addFile(new l(this,a[d]));else this.addFile(new l(this,a,o,h,c));return this}),s.exports=l},31648:(s,g,e)=>{var n=e(56694),p=e(76846),f=e(72632),u=e(42927),l=e(42911),a=e(70806),o=e(45176),c=new n({Extends:o,initialize:function(d,v,m,y,C,T){var P,S;if(l(v)){var M=v;v=f(M,"key"),P=new u(d,{key:v,url:f(M,"textureURL"),extension:f(M,"textureExtension","png"),normalMap:f(M,"normalMap"),xhrSettings:f(M,"textureXhrSettings")}),S=new a(d,{key:v,url:f(M,"atlasURL"),extension:f(M,"atlasExtension","json"),xhrSettings:f(M,"atlasXhrSettings")})}else P=new u(d,v,m,C),S=new a(d,v,y,T);P.linkFile?o.call(this,d,"atlasjson",v,[P,S,P.linkFile]):o.call(this,d,"atlasjson",v,[P,S])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],d=this.files[1],v=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(h.key,h.data,d.data,v),d.addToCache(),this.complete=!0}}});p.register("aseprite",function(h,d,v,m,y){var C;if(Array.isArray(h))for(var T=0;T<h.length;T++)C=new c(this,h[T]),this.addFile(C.files);else C=new c(this,h,d,v,m,y),this.addFile(C.files);return this}),s.exports=c},73152:(s,g,e)=>{var n=e(56694),p=e(76846),f=e(72632),u=e(42927),l=e(42911),a=e(70806),o=e(45176),c=new n({Extends:o,initialize:function(d,v,m,y,C,T){var P,S;if(l(v)){var M=v;v=f(M,"key"),P=new u(d,{key:v,url:f(M,"textureURL"),extension:f(M,"textureExtension","png"),normalMap:f(M,"normalMap"),xhrSettings:f(M,"textureXhrSettings")}),S=new a(d,{key:v,url:f(M,"atlasURL"),extension:f(M,"atlasExtension","json"),xhrSettings:f(M,"atlasXhrSettings")})}else P=new u(d,v,m,C),S=new a(d,v,y,T);P.linkFile?o.call(this,d,"atlasjson",v,[P,S,P.linkFile]):o.call(this,d,"atlasjson",v,[P,S])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],d=this.files[1],v=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(h.key,h.data,d.data,v),this.complete=!0}}});p.register("atlas",function(h,d,v,m,y){var C;if(Array.isArray(h))for(var T=0;T<h.length;T++)C=new c(this,h[T]),this.addFile(C.files);else C=new c(this,h,d,v,m,y),this.addFile(C.files);return this}),s.exports=c},24616:(s,g,e)=>{var n=e(56694),p=e(76846),f=e(72632),u=e(42927),l=e(42911),a=e(45176),o=e(15297),c=new n({Extends:a,initialize:function(d,v,m,y,C,T){var P,S;if(l(v)){var M=v;v=f(M,"key"),P=new u(d,{key:v,url:f(M,"textureURL"),extension:f(M,"textureExtension","png"),normalMap:f(M,"normalMap"),xhrSettings:f(M,"textureXhrSettings")}),S=new o(d,{key:v,url:f(M,"atlasURL"),extension:f(M,"atlasExtension","xml"),xhrSettings:f(M,"atlasXhrSettings")})}else P=new u(d,v,m,C),S=new o(d,v,y,T);P.linkFile?a.call(this,d,"atlasxml",v,[P,S,P.linkFile]):a.call(this,d,"atlasxml",v,[P,S])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],d=this.files[1],v=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(h.key,h.data,d.data,v),this.complete=!0}}});p.register("atlasXML",function(h,d,v,m,y){var C;if(Array.isArray(h))for(var T=0;T<h.length;T++)C=new c(this,h[T]),this.addFile(C.files);else C=new c(this,h,d,v,m,y),this.addFile(C.files);return this}),s.exports=c},67448:(s,g,e)=>{var n=e(56694),p=e(12117),f=e(98035),u=e(76846),l=e(72632),a=e(30929),o=e(42911),c=new n({Extends:f,initialize:function(d,v,m,y,C){if(o(v)){var T=v;v=l(T,"key"),y=l(T,"xhrSettings"),C=l(T,"context",C)}var P={type:"audio",cache:d.cacheManager.audio,extension:m.type,responseType:"arraybuffer",key:v,url:m.url,xhrSettings:y,config:{context:C}};f.call(this,d,P)},onProcess:function(){this.state=p.FILE_PROCESSING;var h=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(d){h.data=d,h.onProcessComplete()},function(d){console.error("Error decoding audio: "+h.key+" - ",d?d.message:null),h.onProcessError()}),this.config.context=null}});c.create=function(h,d,v,m,y){var C=h.systems.game,T=C.config.audio,P=C.device.audio;o(d)&&(v=l(d,"url",[]),m=l(d,"config",{}));var S=c.getAudioURL(C,v);return S?P.webAudio&&!T.disableWebAudio?new c(h,d,S,y,C.sound.context):new a(h,d,S,m):(console.warn('No audio URLs for "%s" matched this device',d),null)},c.getAudioURL=function(h,d){Array.isArray(d)||(d=[d]);for(var v=0;v<d.length;v++){var m=l(d[v],"url",d[v]);if(m.indexOf("blob:")===0||m.indexOf("data:")===0)return{url:m,type:""};var y=m.match(/\.([a-zA-Z0-9]+)($|\?)/);if(y=l(d[v],"type",y?y[1]:"").toLowerCase(),h.device.audio[y])return{url:m,type:y}}return null},u.register("audio",function(h,d,v,m){var y=this.systems.game,C=y.config.audio,T=y.device.audio;if(C.noAudio||!T.webAudio&&!T.audioData)return this;var P;if(Array.isArray(h))for(var S=0;S<h.length;S++)P=c.create(this,h[S]),P&&this.addFile(P);else P=c.create(this,h,d,v,m),P&&this.addFile(P);return this}),s.exports=c},66109:(s,g,e)=>{var n=e(67448),p=e(56694),f=e(76846),u=e(72632),l=e(42911),a=e(70806),o=e(45176),c=new p({Extends:o,initialize:function(d,v,m,y,C,T,P){if(l(v)){var S=v;v=u(S,"key"),m=u(S,"jsonURL"),y=u(S,"audioURL"),C=u(S,"audioConfig"),T=u(S,"audioXhrSettings"),P=u(S,"jsonXhrSettings")}var M;if(!y)M=new a(d,v,m,P),o.call(this,d,"audiosprite",v,[M]),this.config.resourceLoad=!0,this.config.audioConfig=C,this.config.audioXhrSettings=T;else{var E=n.create(d,v,y,C,T);E&&(M=new a(d,v,m,P),o.call(this,d,"audiosprite",v,[E,M]),this.config.resourceLoad=!1)}},onFileComplete:function(h){var d=this.files.indexOf(h);if(d!==-1&&(this.pending--,this.config.resourceLoad&&h.type==="json"&&h.data.hasOwnProperty("resources"))){var v=h.data.resources,m=u(this.config,"audioConfig"),y=u(this.config,"audioXhrSettings"),C=n.create(this.loader,h.key,v,m,y);C&&(this.addToMultiFile(C),this.loader.addFile(C))}},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],d=this.files[1];h.addToCache(),d.addToCache(),this.complete=!0}}});f.register("audioSprite",function(h,d,v,m,y,C){var T=this.systems.game,P=T.config.audio,S=T.device.audio;if(P&&P.noAudio||!S.webAudio&&!S.audioData)return this;var M;if(Array.isArray(h))for(var E=0;E<h.length;E++)M=new c(this,h[E]),M.files&&this.addFile(M.files);else M=new c(this,h,d,v,m,y,C),M.files&&this.addFile(M.files);return this})},40612:(s,g,e)=>{var n=e(56694),p=e(12117),f=e(98035),u=e(76846),l=e(72632),a=e(42911),o=new n({Extends:f,initialize:function(h,d,v,m,y){var C="bin";if(a(d)){var T=d;d=l(T,"key"),v=l(T,"url"),m=l(T,"xhrSettings"),C=l(T,"extension",C),y=l(T,"dataType",y)}var P={type:"binary",cache:h.cacheManager.binary,extension:C,responseType:"arraybuffer",key:d,url:v,xhrSettings:m,config:{dataType:y}};f.call(this,h,P)},onProcess:function(){this.state=p.FILE_PROCESSING;var c=this.config.dataType;this.data=c?new c(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});u.register("binary",function(c,h,d,v){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new o(this,c[m]));else this.addFile(new o(this,c,h,v,d));return this}),s.exports=o},54565:(s,g,e)=>{var n=e(56694),p=e(76846),f=e(72632),u=e(42927),l=e(42911),a=e(45176),o=e(31476),c=e(15297),h=new n({Extends:a,initialize:function(v,m,y,C,T,P){var S,M;if(l(m)){var E=m;m=f(E,"key"),S=new u(v,{key:m,url:f(E,"textureURL"),extension:f(E,"textureExtension","png"),normalMap:f(E,"normalMap"),xhrSettings:f(E,"textureXhrSettings")}),M=new c(v,{key:m,url:f(E,"fontDataURL"),extension:f(E,"fontDataExtension","xml"),xhrSettings:f(E,"fontDataXhrSettings")})}else S=new u(v,m,y,T),M=new c(v,m,C,P);S.linkFile?a.call(this,v,"bitmapfont",m,[S,M,S.linkFile]):a.call(this,v,"bitmapfont",m,[S,M])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],v=this.files[1];d.addToCache();var m=d.cache.get(d.key),y=o(v.data,d.cache.getFrame(d.key),0,0,m);this.loader.cacheManager.bitmapFont.add(d.key,{data:y,texture:d.key,frame:null}),this.complete=!0}}});p.register("bitmapFont",function(d,v,m,y,C){var T;if(Array.isArray(d))for(var P=0;P<d.length;P++)T=new h(this,d[P]),this.addFile(T.files);else T=new h(this,d,v,m,y,C),this.addFile(T.files);return this}),s.exports=h},99898:(s,g,e)=>{var n=e(56694),p=e(12117),f=e(98035),u=e(76846),l=e(72632),a=e(42911),o=new n({Extends:f,initialize:function(h,d,v,m){var y="css";if(a(d)){var C=d;d=l(C,"key"),v=l(C,"url"),m=l(C,"xhrSettings"),y=l(C,"extension",y)}var T={type:"script",cache:!1,extension:y,responseType:"text",key:d,url:v,xhrSettings:m};f.call(this,h,T)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});u.register("css",function(c,h,d){if(Array.isArray(c))for(var v=0;v<c.length;v++)this.addFile(new o(this,c[v]));else this.addFile(new o(this,c,h,d));return this}),s.exports=o},47375:(s,g,e)=>{var n=e(73152),p=e(40612),f=e(56694),u=e(76846),l=e(72632),a=e(42927),o=e(42911),c=e(70806),h=e(67409),d=e(30657),v=e(80802),m=e(45176),y=e(24904),C=new f({Extends:m,initialize:function(P,S,M,E){if(M.multiAtlasURL){var A=new c(P,{key:S,url:M.multiAtlasURL,xhrSettings:E,config:M});m.call(this,P,"texture",S,[A])}else{var R=M.textureURL.substr(M.textureURL.length-3);M.type||(M.type=R.toLowerCase()==="ktx"?"KTX":"PVR");var w=new p(P,{key:S,url:M.textureURL,extension:R,xhrSettings:E,config:M});if(M.atlasURL){var O=new c(P,{key:S,url:M.atlasURL,xhrSettings:E,config:M});m.call(this,P,"texture",S,[w,O])}else m.call(this,P,"texture",S,[w])}this.config=M},onFileComplete:function(T){var P=this.files.indexOf(T);if(P!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(T.type==="json"&&T.data.hasOwnProperty("textures")){var S=T.data.textures,M=this.config,E=this.loader,A=E.baseURL,R=E.path,w=E.prefix,O=l(M,"multiBaseURL",this.baseURL),F=l(M,"multiPath",this.path),b=l(M,"prefix",this.prefix),I=l(M,"textureXhrSettings");O&&E.setBaseURL(O),F&&E.setPath(F),b&&E.setPrefix(b);for(var N=0;N<S.length;N++){var z=S[N].image,U="CMA"+this.multiKeyIndex+"_"+z,W=new p(E,U,z,I);if(this.addToMultiFile(W),E.addFile(W),S[N].normalMap){var D=new p(E,U,S[N].normalMap,I);D.type="normalMap",W.setLink(D),this.addToMultiFile(D),E.addFile(D)}}E.setBaseURL(A),E.setPath(R),E.setPrefix(w)}}},addToCache:function(){if(this.isReadyToProcess()){var T=this.config;if(T.multiAtlasURL)this.addMultiToCache();else{var P=this.loader.systems.renderer,S=this.loader.textureManager,M,E=this.files[0],A=this.files[1];if(T.type==="PVR"?M=y(E.data):T.type==="KTX"&&(M=h(E.data)),M&&P.supportsCompressedTexture(T.format,M.internalFormat)){M.format=P.getCompressedTextureName(T.format,M.internalFormat);var R=A&&A.data?A.data:null;S.addCompressedTexture(E.key,M,R)}}this.complete=!0}},addMultiToCache:function(){for(var T=this.config,P=this.files[0],S=[],M=[],E=[],A=this.loader.systems.renderer,R=this.loader.textureManager,w,O=1;O<this.files.length;O++){var F=this.files[O];if(F.type!=="normalMap")for(var b=F.key.indexOf("_"),I=F.key.substr(b+1),N=F.data,z=0;z<P.data.textures.length;z++){var U=P.data.textures[z];if(U.image===I){T.type==="PVR"?w=y(N):T.type==="KTX"&&(w=h(N)),w&&A.supportsCompressedTexture(T.format,w.internalFormat)&&(w.format=A.getCompressedTextureName(T.format,w.internalFormat),M.push(w),S.push(U),F.linkFile&&E.push(F.linkFile.data));break}}}E.length===0&&(E=void 0),R.addAtlasJSONArray(this.key,M,S,E),this.complete=!0}});u.register("texture",function(T,P,S){var M=this.systems.renderer,E=function(R,w,O,F){var b={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(o(w)){var I=w;w=l(I,"key"),O=l(I,"url"),F=l(I,"xhrSettings")}var N=!1;for(var z in O)if(M.supportsCompressedTexture(z)){var U=O[z];typeof U=="string"?b.textureURL=U:b=d(U,b),b.format=z.toUpperCase(),N=!0;break}if(!N)console.warn("No supported compressed texture format or IMG fallback",w);else if(b.format==="IMG"){var W,D;b.multiAtlasURL?(D=new v(R,w,b.multiAtlasURL,b.multiPath,b.multiBaseURL,F),W=D.files):b.atlasURL?(D=new n(R,w,b.textureURL,b.atlasURL,F),W=D.files):W=new a(R,w,b.textureURL,F),R.addFile(W)}else{var V=new C(R,w,b,F);R.addFile(V.files)}};if(Array.isArray(T))for(var A=0;A<T.length;A++)E(this,T[A]);else E(this,T,P,S);return this}),s.exports=C},46568:(s,g,e)=>{var n=e(56694),p=e(12117),f=e(98035),u=e(76846),l=e(72632),a=e(42911),o=e(31053),c=new n({Extends:f,initialize:function(d,v,m,y,C){var T="glsl";if(a(v)){var P=v;v=l(P,"key"),m=l(P,"url"),y=l(P,"shaderType","fragment"),C=l(P,"xhrSettings"),T=l(P,"extension",T)}else y===void 0&&(y="fragment");var S={type:"glsl",cache:d.cacheManager.shader,extension:T,responseType:"text",key:v,url:m,config:{shaderType:y},xhrSettings:C};f.call(this,d,S)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var h=this.data.split(`
`),d=this.extractBlock(h,0);if(d)for(;d;){var v=this.getShaderName(d.header),m=this.getShaderType(d.header),y=this.getShaderUniforms(d.header),C=d.shader;if(this.cache.has(v)){var T=this.cache.get(v);m==="fragment"?T.fragmentSrc=C:T.vertexSrc=C,T.uniforms||(T.uniforms=y)}else m==="fragment"?this.cache.add(v,new o(v,C,"",y)):this.cache.add(v,new o(v,"",C,y));d=this.extractBlock(h,d.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new o(this.key,this.data)):this.cache.add(this.key,new o(this.key,"",this.data))},getShaderName:function(h){for(var d=0;d<h.length;d++){var v=h[d].trim();if(v.substring(0,5)==="name:")return v.substring(5).trim()}return this.key},getShaderType:function(h){for(var d=0;d<h.length;d++){var v=h[d].trim();if(v.substring(0,5)==="type:")return v.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(h){for(var d={},v=0;v<h.length;v++){var m=h[v].trim();if(m.substring(0,8)==="uniform."){var y=m.indexOf(":");if(y){var C=m.substring(8,y);try{d[C]=JSON.parse(m.substring(y+1))}catch(T){console.warn("Invalid uniform JSON: "+C)}}}}return d},extractBlock:function(h,d){for(var v=-1,m=-1,y=-1,C=!1,T=!1,P=[],S=[],M=d;M<h.length;M++){var E=h[M].trim();if(E==="---")if(v===-1)v=M,C=!0;else if(C)m=M,C=!1,T=!0;else{T=!1;break}else C?P.push(E):T&&(S.push(E),y=M)}return!C&&m!==-1?{header:P,shader:S.join(`
`),offset:y}:null}});u.register("glsl",function(h,d,v,m){if(Array.isArray(h))for(var y=0;y<h.length;y++)this.addFile(new c(this,h[y]));else this.addFile(new c(this,h,d,v,m));return this}),s.exports=c},30929:(s,g,e)=>{var n=e(56694),p=e(683),f=e(98035),u=e(72632),l=e(30750),a=e(42911),o=new n({Extends:f,initialize:function(h,d,v,m){if(a(d)){var y=d;d=u(y,"key"),m=u(y,"config",m)}var C={type:"audio",cache:h.cacheManager.audio,extension:v.type,key:d,url:v.url,config:m};f.call(this,h,C),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var c=0;c<this.data.length;c++){var h=this.data[c];h.oncanplaythrough=null,h.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(c){var h=c.target;h.oncanplaythrough=null,h.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(p.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var c=this.config&&this.config.instances||1;this.filesTotal=c,this.filesLoaded=0,this.percentComplete=0;for(var h=0;h<c;h++){var d=new Audio;d.dataset||(d.dataset={}),d.dataset.name=this.key+("0"+h).slice(-2),d.dataset.used="false",this.locked?d.dataset.locked="true":(d.dataset.locked="false",d.preload="auto",d.oncanplaythrough=this.onProgress.bind(this),d.onerror=this.onError.bind(this)),this.data.push(d)}for(h=0;h<this.data.length;h++)d=this.data[h],d.src=l(this,this.loader.baseURL),this.locked||d.load();this.locked&&setTimeout(this.onLoad.bind(this))}});s.exports=o},77459:(s,g,e)=>{var n=e(56694),p=e(12117),f=e(98035),u=e(76846),l=e(72632),a=e(42911),o=new n({Extends:f,initialize:function(h,d,v,m){var y="html";if(a(d)){var C=d;d=l(C,"key"),v=l(C,"url"),m=l(C,"xhrSettings"),y=l(C,"extension",y)}var T={type:"text",cache:h.cacheManager.html,extension:y,responseType:"text",key:d,url:v,xhrSettings:m};f.call(this,h,T)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});u.register("html",function(c,h,d){if(Array.isArray(c))for(var v=0;v<c.length;v++)this.addFile(new o(this,c[v]));else this.addFile(new o(this,c,h,d));return this}),s.exports=o},9755:(s,g,e)=>{var n=e(56694),p=e(12117),f=e(98035),u=e(76846),l=e(72632),a=e(42911),o=new n({Extends:f,initialize:function(h,d,v,m,y,C){m===void 0&&(m=512),y===void 0&&(y=512);var T="html";if(a(d)){var P=d;d=l(P,"key"),v=l(P,"url"),C=l(P,"xhrSettings"),T=l(P,"extension",T),m=l(P,"width",m),y=l(P,"height",y)}var S={type:"html",cache:h.textureManager,extension:T,responseType:"text",key:d,url:v,xhrSettings:C,config:{width:m,height:y}};f.call(this,h,S)},onProcess:function(){this.state=p.FILE_PROCESSING;var c=this.config.width,h=this.config.height,d=[];d.push('<svg width="'+c+'px" height="'+h+'px" viewBox="0 0 '+c+" "+h+'" xmlns="http://www.w3.org/2000/svg">'),d.push('<foreignObject width="100%" height="100%">'),d.push('<body xmlns="http://www.w3.org/1999/xhtml">'),d.push(this.xhrLoader.responseText),d.push("</body>"),d.push("</foreignObject>"),d.push("</svg>");var v=[d.join(`
`)],m=this;try{var y=new window.Blob(v,{type:"image/svg+xml;charset=utf-8"})}catch(C){m.state=p.FILE_ERRORED,m.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){f.revokeObjectURL(m.data),m.onProcessComplete()},this.data.onerror=function(){f.revokeObjectURL(m.data),m.onProcessError()},f.createObjectURL(this.data,y,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});u.register("htmlTexture",function(c,h,d,v,m){if(Array.isArray(c))for(var y=0;y<c.length;y++)this.addFile(new o(this,c[y]));else this.addFile(new o(this,c,h,d,v,m));return this}),s.exports=o},42927:(s,g,e)=>{var n=e(56694),p=e(12117),f=e(98035),u=e(76846),l=e(72632),a=e(42911),o=e(30750),c=new n({Extends:f,initialize:function h(d,v,m,y,C){var T="png",P;if(a(v)){var S=v;v=l(S,"key"),m=l(S,"url"),P=l(S,"normalMap"),y=l(S,"xhrSettings"),T=l(S,"extension",T),C=l(S,"frameConfig")}Array.isArray(m)&&(P=m[1],m=m[0]);var M={type:"image",cache:d.textureManager,extension:T,responseType:"blob",key:v,url:m,xhrSettings:y,config:C};if(f.call(this,d,M),P){var E=new h(d,this.key,P,y,C);E.type="normalMap",this.setLink(E),d.addFile(E)}this.useImageElementLoad=d.imageLoadType==="HTMLImageElement",this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var h=this;this.data.onload=function(){f.revokeObjectURL(h.data),h.onProcessComplete()},this.data.onerror=function(){f.revokeObjectURL(h.data),h.onProcessError()},f.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var h=this.state;this.state=p.FILE_PROCESSING,h===p.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){if(this.state=p.FILE_LOADING,this.src=o(this,this.loader.baseURL),this.src.indexOf("data:")===0)console.warn("Local data URIs are not supported: "+this.key);else{this.data=new Image,this.data.crossOrigin=this.crossOrigin;var h=this;this.data.onload=function(){h.state=p.FILE_LOADED,h.loader.nextFile(h,!0)},this.data.onerror=function(){h.loader.nextFile(h,!1)},this.data.src=this.src}},addToCache:function(){var h=this.linkFile;h?h.state>=p.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addImage(this.key,h.data,this.data):this.cache.addImage(this.key,this.data,h.data)):this.cache.addImage(this.key,this.data)}});u.register("image",function(h,d,v){if(Array.isArray(h))for(var m=0;m<h.length;m++)this.addFile(new c(this,h[m]));else this.addFile(new c(this,h,d,v));return this}),s.exports=c},70806:(s,g,e)=>{var n=e(56694),p=e(12117),f=e(98035),u=e(76846),l=e(72632),a=e(10850),o=e(42911),c=new n({Extends:f,initialize:function(d,v,m,y,C){var T="json";if(o(v)){var P=v;v=l(P,"key"),m=l(P,"url"),y=l(P,"xhrSettings"),T=l(P,"extension",T),C=l(P,"dataKey",C)}var S={type:"json",cache:d.cacheManager.json,extension:T,responseType:"text",key:v,url:m,xhrSettings:y,config:C};f.call(this,d,S),o(m)&&(C?this.data=a(m,C):this.data=m,this.state=p.FILE_POPULATED)},onProcess:function(){if(this.state!==p.FILE_POPULATED){this.state=p.FILE_PROCESSING;try{var h=JSON.parse(this.xhrLoader.responseText)}catch(v){throw this.onProcessError(),v}var d=this.config;typeof d=="string"?this.data=a(h,d,h):this.data=h}this.onProcessComplete()}});u.register("json",function(h,d,v,m){if(Array.isArray(h))for(var y=0;y<h.length;y++)this.addFile(new c(this,h[y]));else this.addFile(new c(this,h,d,m,v));return this}),s.exports=c},80802:(s,g,e)=>{var n=e(56694),p=e(76846),f=e(72632),u=e(42927),l=e(42911),a=e(70806),o=e(45176),c=new n({Extends:o,initialize:function(d,v,m,y,C,T,P){if(l(v)){var S=v;v=f(S,"key"),f(S,"url",!1)?m=f(S,"url"):m=f(S,"atlasURL"),T=f(S,"xhrSettings"),y=f(S,"path"),C=f(S,"baseURL"),P=f(S,"textureXhrSettings")}var M=new a(d,v,m,T);o.call(this,d,"multiatlas",v,[M]),this.config.path=y,this.config.baseURL=C,this.config.textureXhrSettings=P},onFileComplete:function(h){var d=this.files.indexOf(h);if(d!==-1&&(this.pending--,h.type==="json"&&h.data.hasOwnProperty("textures"))){var v=h.data.textures,m=this.config,y=this.loader,C=y.baseURL,T=y.path,P=y.prefix,S=f(m,"baseURL",this.baseURL),M=f(m,"path",this.path),E=f(m,"prefix",this.prefix),A=f(m,"textureXhrSettings");y.setBaseURL(S),y.setPath(M),y.setPrefix(E);for(var R=0;R<v.length;R++){var w=v[R].image,O="MA"+this.multiKeyIndex+"_"+w,F=new u(y,O,w,A);if(this.addToMultiFile(F),y.addFile(F),v[R].normalMap){var b=new u(y,O,v[R].normalMap,A);b.type="normalMap",F.setLink(b),this.addToMultiFile(b),y.addFile(b)}}y.setBaseURL(C),y.setPath(T),y.setPrefix(P)}},addToCache:function(){if(this.isReadyToProcess()){for(var h=this.files[0],d=[],v=[],m=[],y=1;y<this.files.length;y++){var C=this.files[y];if(C.type!=="normalMap")for(var T=C.key.indexOf("_"),P=C.key.substr(T+1),S=C.data,M=0;M<h.data.textures.length;M++){var E=h.data.textures[M];if(E.image===P){v.push(S),d.push(E),C.linkFile&&m.push(C.linkFile.data);break}}}m.length===0&&(m=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,v,d,m),this.complete=!0}}});p.register("multiatlas",function(h,d,v,m,y){var C;if(Array.isArray(h))for(var T=0;T<h.length;T++)C=new c(this,h[T]),this.addFile(C.files);else C=new c(this,h,d,v,m,y),this.addFile(C.files);return this}),s.exports=c},39034:(s,g,e)=>{var n=e(56694),p=e(76846),f=e(72632),u=e(42911),l=e(45176),a=e(55188),o=new n({Extends:l,initialize:function(h,d,v,m){var y="js",C=[];if(u(d)){var T=d;d=f(T,"key"),v=f(T,"url"),m=f(T,"xhrSettings"),y=f(T,"extension",y)}Array.isArray(v)||(v=[v]);for(var P=0;P<v.length;P++){var S=new a(h,{key:d+"_"+P.toString(),url:v[P],extension:y,xhrSettings:m});S.onProcess=function(){this.onProcessComplete()},C.push(S)}l.call(this,h,"scripts",d,C)},addToCache:function(){if(this.isReadyToProcess()){for(var c=0;c<this.files.length;c++){var h=this.files[c];h.data=document.createElement("script"),h.data.language="javascript",h.data.type="text/javascript",h.data.defer=!1,h.data.text=h.xhrLoader.responseText,document.head.appendChild(h.data)}this.complete=!0}}});p.register("scripts",function(c,h,d){var v;if(Array.isArray(c))for(var m=0;m<c.length;m++)v=new o(this,c[m]),this.addFile(v.files);else v=new o(this,c,h,d),this.addFile(v.files);return this}),s.exports=o},85527:(s,g,e)=>{var n=e(56694),p=e(76846),f=e(72632),u=e(42911),l=e(45176),a=e(27291),o=e(76799),c=e(86897),h=new n({Extends:l,initialize:function(v,m,y,C,T,P){var S,M,E=v.cacheManager.obj;if(u(m)){var A=m;m=f(A,"key"),S=new c(v,{key:m,type:"obj",cache:E,url:f(A,"url"),extension:f(A,"extension","obj"),xhrSettings:f(A,"xhrSettings"),config:{flipUV:f(A,"flipUV",T)}}),C=f(A,"matURL"),C&&(M=new c(v,{key:m,type:"mat",cache:E,url:C,extension:f(A,"matExtension","mat"),xhrSettings:f(A,"xhrSettings")}))}else S=new c(v,{key:m,url:y,type:"obj",cache:E,extension:"obj",xhrSettings:P,config:{flipUV:T}}),C&&(M=new c(v,{key:m,url:C,type:"mat",cache:E,extension:"mat",xhrSettings:P}));l.call(this,v,"obj",m,[S,M])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],v=this.files[1],m=a(d.data,d.config.flipUV);v&&(m.materials=o(v.data)),d.cache.add(d.key,m),this.complete=!0}}});p.register("obj",function(d,v,m,y,C){var T;if(Array.isArray(d))for(var P=0;P<d.length;P++)T=new h(this,d[P]),this.addFile(T.files);else T=new h(this,d,v,m,y,C),this.addFile(T.files);return this}),s.exports=h},3616:(s,g,e)=>{var n=e(56694),p=e(12117),f=e(76846),u=e(70806),l=new n({Extends:u,initialize:function(o,c,h,d,v){u.call(this,o,c,h,d,v),this.type="packfile"},onProcess:function(){if(this.state!==p.FILE_POPULATED&&(this.state=p.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var a={};a[this.config]=this.data,this.data=a}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});f.register("pack",function(a,o,c,h){if(Array.isArray(a))for(var d=0;d<a.length;d++)this.addFile(new l(this,a[d]));else this.addFile(new l(this,a,o,h,c));return this}),s.exports=l},12217:(s,g,e)=>{var n=e(56694),p=e(12117),f=e(98035),u=e(76846),l=e(72632),a=e(42911),o=new n({Extends:f,initialize:function(h,d,v,m,y,C){var T="js";if(a(d)){var P=d;d=l(P,"key"),v=l(P,"url"),C=l(P,"xhrSettings"),T=l(P,"extension",T),m=l(P,"start"),y=l(P,"mapping")}var S={type:"plugin",cache:!1,extension:T,responseType:"text",key:d,url:v,xhrSettings:C,config:{start:m,mapping:y}};f.call(this,h,S),typeof v=="function"&&(this.data=v,this.state=p.FILE_POPULATED)},onProcess:function(){var c=this.loader.systems.plugins,h=this.config,d=l(h,"start",!1),v=l(h,"mapping",null);if(this.state===p.FILE_POPULATED)c.install(this.key,this.data,d,v);else{this.state=p.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var m=c.install(this.key,window[this.key],d,v);(d||v)&&(this.loader.systems[v]=m,this.loader.scene[v]=m)}this.onProcessComplete()}});u.register("plugin",function(c,h,d,v,m){if(Array.isArray(c))for(var y=0;y<c.length;y++)this.addFile(new o(this,c[y]));else this.addFile(new o(this,c,h,d,v,m));return this}),s.exports=o},4474:(s,g,e)=>{var n=e(56694),p=e(12117),f=e(98035),u=e(76846),l=e(72632),a=e(42911),o=new n({Extends:f,initialize:function(h,d,v,m,y){var C="svg";if(a(d)){var T=d;d=l(T,"key"),v=l(T,"url"),m=l(T,"svgConfig",{}),y=l(T,"xhrSettings"),C=l(T,"extension",C)}var P={type:"svg",cache:h.textureManager,extension:C,responseType:"text",key:d,url:v,xhrSettings:y,config:{width:l(m,"width"),height:l(m,"height"),scale:l(m,"scale")}};f.call(this,h,P)},onProcess:function(){this.state=p.FILE_PROCESSING;var c=this.xhrLoader.responseText,h=[c],d=this.config.width,v=this.config.height,m=this.config.scale;t:if(d&&v||m){var y=null,C=new DOMParser;y=C.parseFromString(c,"text/xml");var T=y.getElementsByTagName("svg")[0],P=T.hasAttribute("viewBox"),S=parseFloat(T.getAttribute("width")),M=parseFloat(T.getAttribute("height"));if(!P&&S&&M)T.setAttribute("viewBox","0  0 "+S+" "+M);else if(P&&!S&&!M){var E=T.getAttribute("viewBox").split(/\s+|,/);S=E[2],M=E[3]}if(m)if(S&&M)d=S*m,v=M*m;else break t;T.setAttribute("width",d.toString()+"px"),T.setAttribute("height",v.toString()+"px"),h=[new XMLSerializer().serializeToString(T)]}try{var A=new window.Blob(h,{type:"image/svg+xml;charset=utf-8"})}catch(O){this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var R=this,w=!1;this.data.onload=function(){w||f.revokeObjectURL(R.data),R.onProcessComplete()},this.data.onerror=function(){w?R.onProcessError():(w=!0,f.revokeObjectURL(R.data),R.data.src="data:image/svg+xml,"+encodeURIComponent(h.join("")))},f.createObjectURL(this.data,A,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});u.register("svg",function(c,h,d,v){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new o(this,c[m]));else this.addFile(new o(this,c,h,d,v));return this}),s.exports=o},95171:(s,g,e)=>{var n=e(56694),p=e(12117),f=e(98035),u=e(76846),l=e(72632),a=e(42911),o=new n({Extends:f,initialize:function(h,d,v,m){var y="js";if(a(d)){var C=d;d=l(C,"key"),v=l(C,"url"),m=l(C,"xhrSettings"),y=l(C,"extension",y)}var T={type:"text",extension:y,responseType:"text",key:d,url:v,xhrSettings:m};f.call(this,h,T)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var c=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),h=eval;this.loader.sceneManager.add(this.key,h(c)),this.complete=!0}});u.register("sceneFile",function(c,h,d){if(Array.isArray(c))for(var v=0;v<c.length;v++)this.addFile(new o(this,c[v]));else this.addFile(new o(this,c,h,d));return this}),s.exports=o},82458:(s,g,e)=>{var n=e(56694),p=e(12117),f=e(98035),u=e(76846),l=e(72632),a=e(42911),o=new n({Extends:f,initialize:function(h,d,v,m,y,C){var T="js";if(a(d)){var P=d;d=l(P,"key"),v=l(P,"url"),C=l(P,"xhrSettings"),T=l(P,"extension",T),m=l(P,"systemKey"),y=l(P,"sceneKey")}var S={type:"scenePlugin",cache:!1,extension:T,responseType:"text",key:d,url:v,xhrSettings:C,config:{systemKey:m,sceneKey:y}};f.call(this,h,S),typeof v=="function"&&(this.data=v,this.state=p.FILE_POPULATED)},onProcess:function(){var c=this.loader.systems.plugins,h=this.config,d=this.key,v=l(h,"systemKey",d),m=l(h,"sceneKey",d);this.state===p.FILE_POPULATED?c.installScenePlugin(v,this.data,m,this.loader.scene,!0):(this.state=p.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),c.installScenePlugin(v,window[this.key],m,this.loader.scene,!0)),this.onProcessComplete()}});u.register("scenePlugin",function(c,h,d,v,m){if(Array.isArray(c))for(var y=0;y<c.length;y++)this.addFile(new o(this,c[y]));else this.addFile(new o(this,c,h,d,v,m));return this}),s.exports=o},55188:(s,g,e)=>{var n=e(56694),p=e(12117),f=e(98035),u=e(76846),l=e(72632),a=e(42911),o=new n({Extends:f,initialize:function(h,d,v,m,y){var C="js";if(a(d)){var T=d;d=l(T,"key"),v=l(T,"url"),m=l(T,"type","script"),y=l(T,"xhrSettings"),C=l(T,"extension",C)}else m===void 0&&(m="script");var P={type:m,cache:!1,extension:C,responseType:"text",key:d,url:v,xhrSettings:y};f.call(this,h,P)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});u.register("script",function(c,h,d,v){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new o(this,c[m]));else this.addFile(new o(this,c,h,d,v));return this}),s.exports=o},33536:(s,g,e)=>{var n=e(56694),p=e(12117),f=e(76846),u=e(42927),l=new n({Extends:u,initialize:function(o,c,h,d,v){u.call(this,o,c,h,v,d),this.type="spritesheet"},addToCache:function(){var a=this.linkFile;a?a.state>=p.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,a.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,a.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});f.register("spritesheet",function(a,o,c,h){if(Array.isArray(a))for(var d=0;d<a.length;d++)this.addFile(new l(this,a[d]));else this.addFile(new l(this,a,o,c,h));return this}),s.exports=l},86897:(s,g,e)=>{var n=e(56694),p=e(12117),f=e(98035),u=e(76846),l=e(72632),a=e(42911),o=new n({Extends:f,initialize:function(h,d,v,m){var y="text",C="txt",T=h.cacheManager.text;if(a(d)){var P=d;d=l(P,"key"),v=l(P,"url"),m=l(P,"xhrSettings"),C=l(P,"extension",C),y=l(P,"type",y),T=l(P,"cache",T)}var S={type:y,cache:T,extension:C,responseType:"text",key:d,url:v,xhrSettings:m};f.call(this,h,S)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});u.register("text",function(c,h,d){if(Array.isArray(c))for(var v=0;v<c.length;v++)this.addFile(new o(this,c[v]));else this.addFile(new o(this,c,h,d));return this}),s.exports=o},58673:(s,g,e)=>{var n=e(56694),p=e(12117),f=e(98035),u=e(76846),l=e(72632),a=e(42911),o=e(93560),c=new n({Extends:f,initialize:function(d,v,m,y){var C="csv";if(a(v)){var T=v;v=l(T,"key"),m=l(T,"url"),y=l(T,"xhrSettings"),C=l(T,"extension",C)}var P={type:"tilemapCSV",cache:d.cacheManager.tilemap,extension:C,responseType:"text",key:v,url:m,xhrSettings:y};f.call(this,d,P),this.tilemapFormat=o.CSV},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var h={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,h)}});u.register("tilemapCSV",function(h,d,v){if(Array.isArray(h))for(var m=0;m<h.length;m++)this.addFile(new c(this,h[m]));else this.addFile(new c(this,h,d,v));return this}),s.exports=c},98896:(s,g,e)=>{var n=e(56694),p=e(76846),f=e(70806),u=e(93560),l=new n({Extends:f,initialize:function(o,c,h,d){f.call(this,o,c,h,d),this.type="tilemapJSON",this.cache=o.cacheManager.tilemap},addToCache:function(){var a={format:u.WELTMEISTER,data:this.data};this.cache.add(this.key,a)}});p.register("tilemapImpact",function(a,o,c){if(Array.isArray(a))for(var h=0;h<a.length;h++)this.addFile(new l(this,a[h]));else this.addFile(new l(this,a,o,c));return this}),s.exports=l},50563:(s,g,e)=>{var n=e(56694),p=e(76846),f=e(70806),u=e(93560),l=new n({Extends:f,initialize:function(o,c,h,d){f.call(this,o,c,h,d),this.type="tilemapJSON",this.cache=o.cacheManager.tilemap},addToCache:function(){var a={format:u.TILED_JSON,data:this.data};this.cache.add(this.key,a)}});p.register("tilemapTiledJSON",function(a,o,c){if(Array.isArray(a))for(var h=0;h<a.length;h++)this.addFile(new l(this,a[h]));else this.addFile(new l(this,a,o,c));return this}),s.exports=l},82857:(s,g,e)=>{var n=e(56694),p=e(76846),f=e(72632),u=e(42927),l=e(42911),a=e(45176),o=e(86897),c=new n({Extends:a,initialize:function(d,v,m,y,C,T){var P,S;if(l(v)){var M=v;v=f(M,"key"),P=new u(d,{key:v,url:f(M,"textureURL"),extension:f(M,"textureExtension","png"),normalMap:f(M,"normalMap"),xhrSettings:f(M,"textureXhrSettings")}),S=new o(d,{key:v,url:f(M,"atlasURL"),extension:f(M,"atlasExtension","txt"),xhrSettings:f(M,"atlasXhrSettings")})}else P=new u(d,v,m,C),S=new o(d,v,y,T);P.linkFile?a.call(this,d,"unityatlas",v,[P,S,P.linkFile]):a.call(this,d,"unityatlas",v,[P,S])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],d=this.files[1],v=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(h.key,h.data,d.data,v),this.complete=!0}}});p.register("unityAtlas",function(h,d,v,m,y){var C;if(Array.isArray(h))for(var T=0;T<h.length;T++)C=new c(this,h[T]),this.addFile(C.files);else C=new c(this,h,d,v,m,y),this.addFile(C.files);return this}),s.exports=c},22833:(s,g,e)=>{var n=e(56694),p=e(12117),f=e(98035),u=e(76846),l=e(30750),a=e(72632),o=e(42911),c=new n({Extends:f,initialize:function(d,v,m,y){if(y===void 0&&(y=!1),o(v)){var C=v;v=a(C,"key"),m=a(C,"url",[]),y=a(C,"noAudio",!1)}var T=d.systems.game.device.video.getVideoURL(m);T||console.warn("VideoFile: No supported format for "+v);var P={type:"video",cache:d.cacheManager.video,extension:T.type,key:v,url:T.url,config:{noAudio:y}};f.call(this,d,P)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=l(this,this.loader.baseURL),this.state=p.FILE_LOADED,this.loader.nextFile(this,!0)}});u.register("video",function(h,d,v){if(Array.isArray(h))for(var m=0;m<h.length;m++)this.addFile(new c(this,h[m]));else this.addFile(new c(this,h,d,v));return this}),s.exports=c},15297:(s,g,e)=>{var n=e(56694),p=e(12117),f=e(98035),u=e(76846),l=e(72632),a=e(42911),o=e(89200),c=new n({Extends:f,initialize:function(d,v,m,y){var C="xml";if(a(v)){var T=v;v=l(T,"key"),m=l(T,"url"),y=l(T,"xhrSettings"),C=l(T,"extension",C)}var P={type:"xml",cache:d.cacheManager.xml,extension:C,responseType:"text",key:v,url:m,xhrSettings:y};f.call(this,d,P)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=o(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});u.register("xml",function(h,d,v){if(Array.isArray(h))for(var m=0;m<h.length;m++)this.addFile(new c(this,h[m]));else this.addFile(new c(this,h,d,v));return this}),s.exports=c},34034:(s,g,e)=>{s.exports={AnimationJSONFile:e(46468),AsepriteFile:e(31648),AtlasJSONFile:e(73152),AtlasXMLFile:e(24616),AudioFile:e(67448),AudioSpriteFile:e(66109),BinaryFile:e(40612),BitmapFontFile:e(54565),CompressedTextureFile:e(47375),CSSFile:e(99898),GLSLFile:e(46568),HTML5AudioFile:e(30929),HTMLFile:e(77459),HTMLTextureFile:e(9755),ImageFile:e(42927),JSONFile:e(70806),MultiAtlasFile:e(80802),MultiScriptFile:e(39034),OBJFile:e(85527),PackFile:e(3616),PluginFile:e(12217),SceneFile:e(95171),ScenePluginFile:e(82458),ScriptFile:e(55188),SpriteSheetFile:e(33536),SVGFile:e(4474),TextFile:e(86897),TilemapCSVFile:e(58673),TilemapImpactFile:e(98896),TilemapJSONFile:e(50563),UnityAtlasFile:e(82857),VideoFile:e(22833),XMLFile:e(15297)}},95695:(s,g,e)=>{var n=e(12117),p=e(98611),f={Events:e(683),FileTypes:e(34034),File:e(98035),FileTypesManager:e(76846),GetURL:e(30750),LoaderPlugin:e(67285),MergeXHRSettings:e(43531),MultiFile:e(45176),XHRLoader:e(88490),XHRSettings:e(33868)};f=p(!1,f,n),s.exports=f},26042:s=>{var g=function(e){for(var n=0,p=0;p<e.length;p++)n+=+e[p];return n/e.length};s.exports=g},22824:(s,g,e)=>{var n=e(8034),p=function(f,u){return n(f)/n(u)/n(f-u)};s.exports=p},17489:s=>{var g=function(e,n){return Math.floor(Math.random()*(n-e+1)+e)};s.exports=g},14976:s=>{var g=function(e,n,p,f,u){var l=(f-n)*.5,a=(u-p)*.5,o=e*e,c=e*o;return(2*p-2*f+l+a)*c+(-3*p+3*f-2*l-a)*o+l*e+p};s.exports=g},89129:s=>{var g=function(e,n,p){n===void 0&&(n=0),p===void 0&&(p=10);var f=Math.pow(p,-n);return Math.ceil(e*f)/f};s.exports=g},82897:s=>{var g=function(e,n,p){return Math.max(n,Math.min(p,e))};s.exports=g},75606:(s,g,e)=>{var n=e(83392),p=function(f){return f*n.DEG_TO_RAD};s.exports=p},767:s=>{var g=function(e,n){return Math.abs(e-n)};s.exports=g},9849:(s,g,e)=>{var n=e(82897),p=e(56694),f=e(16650),u=e(72283),l=new f,a=new p({initialize:function o(c,h,d,v){c===void 0&&(c=0),h===void 0&&(h=0),d===void 0&&(d=0),v===void 0&&(v=o.DefaultOrder),this._x=c,this._y=h,this._z=d,this._order=v,this.onChangeCallback=u},x:{get:function(){return this._x},set:function(o){this._x=o,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(o){this._y=o,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(o){this._z=o,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(o){this._order=o,this.onChangeCallback(this)}},set:function(o,c,h,d){return d===void 0&&(d=this._order),this._x=o,this._y=c,this._z=h,this._order=d,this.onChangeCallback(this),this},copy:function(o){return this.set(o.x,o.y,o.z,o.order)},setFromQuaternion:function(o,c,h){return c===void 0&&(c=this._order),h===void 0&&(h=!1),l.fromQuat(o),this.setFromRotationMatrix(l,c,h)},setFromRotationMatrix:function(o,c,h){c===void 0&&(c=this._order),h===void 0&&(h=!1);var d=o.val,v=d[0],m=d[4],y=d[8],C=d[1],T=d[5],P=d[9],S=d[2],M=d[6],E=d[10],A=0,R=0,w=0,O=.99999;switch(c){case"XYZ":{R=Math.asin(n(y,-1,1)),Math.abs(y)<O?(A=Math.atan2(-P,E),w=Math.atan2(-m,v)):A=Math.atan2(M,T);break}case"YXZ":{A=Math.asin(-n(P,-1,1)),Math.abs(P)<O?(R=Math.atan2(y,E),w=Math.atan2(C,T)):R=Math.atan2(-S,v);break}case"ZXY":{A=Math.asin(n(M,-1,1)),Math.abs(M)<O?(R=Math.atan2(-S,E),w=Math.atan2(-m,T)):w=Math.atan2(C,v);break}case"ZYX":{R=Math.asin(-n(S,-1,1)),Math.abs(S)<O?(A=Math.atan2(M,E),w=Math.atan2(C,v)):w=Math.atan2(-m,T);break}case"YZX":{w=Math.asin(n(C,-1,1)),Math.abs(C)<O?(A=Math.atan2(-P,T),R=Math.atan2(-S,v)):R=Math.atan2(y,E);break}case"XZY":{w=Math.asin(-n(m,-1,1)),Math.abs(m)<O?(A=Math.atan2(M,T),R=Math.atan2(y,v)):A=Math.atan2(-P,E);break}}return this._x=A,this._y=R,this._z=w,this._order=c,h&&this.onChangeCallback(this),this}});a.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],a.DefaultOrder="XYZ",s.exports=a},8034:s=>{var g=function(e){if(e===0)return 1;for(var n=e;--e;)n*=e;return n};s.exports=g},61616:s=>{var g=function(e,n){return Math.random()*(n-e)+e};s.exports=g},60679:s=>{var g=function(e,n,p){n===void 0&&(n=0),p===void 0&&(p=10);var f=Math.pow(p,-n);return Math.floor(e*f)/f};s.exports=g},91806:(s,g,e)=>{var n=e(82897),p=function(f,u,l){return f=n(f,0,1),(l-u)*f+u};s.exports=p},79366:s=>{var g=function(e,n){return e/n/1e3};s.exports=g},43776:s=>{var g=function(e){return e==parseFloat(e)?!(e%2):void 0};s.exports=g},58442:s=>{var g=function(e){return e===parseFloat(e)?!(e%2):void 0};s.exports=g},42798:s=>{var g=function(e,n,p){return(n-e)*p+e};s.exports=g},61072:s=>{var g=function(e,n,p){return p===void 0&&(p=0),e.clone().lerp(n,p)};s.exports=g},5341:(s,g,e)=>{var n=e(56694),p=new n({initialize:function(u){this.val=new Float32Array(9),u?this.copy(u):this.identity()},clone:function(){return new p(this)},set:function(f){return this.copy(f)},copy:function(f){var u=this.val,l=f.val;return u[0]=l[0],u[1]=l[1],u[2]=l[2],u[3]=l[3],u[4]=l[4],u[5]=l[5],u[6]=l[6],u[7]=l[7],u[8]=l[8],this},fromMat4:function(f){var u=f.val,l=this.val;return l[0]=u[0],l[1]=u[1],l[2]=u[2],l[3]=u[4],l[4]=u[5],l[5]=u[6],l[6]=u[8],l[7]=u[9],l[8]=u[10],this},fromArray:function(f){var u=this.val;return u[0]=f[0],u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=f[6],u[7]=f[7],u[8]=f[8],this},identity:function(){var f=this.val;return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=1,f[5]=0,f[6]=0,f[7]=0,f[8]=1,this},transpose:function(){var f=this.val,u=f[1],l=f[2],a=f[5];return f[1]=f[3],f[2]=f[6],f[3]=u,f[5]=f[7],f[6]=l,f[7]=a,this},invert:function(){var f=this.val,u=f[0],l=f[1],a=f[2],o=f[3],c=f[4],h=f[5],d=f[6],v=f[7],m=f[8],y=m*c-h*v,C=-m*o+h*d,T=v*o-c*d,P=u*y+l*C+a*T;return P?(P=1/P,f[0]=y*P,f[1]=(-m*l+a*v)*P,f[2]=(h*l-a*c)*P,f[3]=C*P,f[4]=(m*u-a*d)*P,f[5]=(-h*u+a*o)*P,f[6]=T*P,f[7]=(-v*u+l*d)*P,f[8]=(c*u-l*o)*P,this):null},adjoint:function(){var f=this.val,u=f[0],l=f[1],a=f[2],o=f[3],c=f[4],h=f[5],d=f[6],v=f[7],m=f[8];return f[0]=c*m-h*v,f[1]=a*v-l*m,f[2]=l*h-a*c,f[3]=h*d-o*m,f[4]=u*m-a*d,f[5]=a*o-u*h,f[6]=o*v-c*d,f[7]=l*d-u*v,f[8]=u*c-l*o,this},determinant:function(){var f=this.val,u=f[0],l=f[1],a=f[2],o=f[3],c=f[4],h=f[5],d=f[6],v=f[7],m=f[8];return u*(m*c-h*v)+l*(-m*o+h*d)+a*(v*o-c*d)},multiply:function(f){var u=this.val,l=u[0],a=u[1],o=u[2],c=u[3],h=u[4],d=u[5],v=u[6],m=u[7],y=u[8],C=f.val,T=C[0],P=C[1],S=C[2],M=C[3],E=C[4],A=C[5],R=C[6],w=C[7],O=C[8];return u[0]=T*l+P*c+S*v,u[1]=T*a+P*h+S*m,u[2]=T*o+P*d+S*y,u[3]=M*l+E*c+A*v,u[4]=M*a+E*h+A*m,u[5]=M*o+E*d+A*y,u[6]=R*l+w*c+O*v,u[7]=R*a+w*h+O*m,u[8]=R*o+w*d+O*y,this},translate:function(f){var u=this.val,l=f.x,a=f.y;return u[6]=l*u[0]+a*u[3]+u[6],u[7]=l*u[1]+a*u[4]+u[7],u[8]=l*u[2]+a*u[5]+u[8],this},rotate:function(f){var u=this.val,l=u[0],a=u[1],o=u[2],c=u[3],h=u[4],d=u[5],v=Math.sin(f),m=Math.cos(f);return u[0]=m*l+v*c,u[1]=m*a+v*h,u[2]=m*o+v*d,u[3]=m*c-v*l,u[4]=m*h-v*a,u[5]=m*d-v*o,this},scale:function(f){var u=this.val,l=f.x,a=f.y;return u[0]=l*u[0],u[1]=l*u[1],u[2]=l*u[2],u[3]=a*u[3],u[4]=a*u[4],u[5]=a*u[5],this},fromQuat:function(f){var u=f.x,l=f.y,a=f.z,o=f.w,c=u+u,h=l+l,d=a+a,v=u*c,m=u*h,y=u*d,C=l*h,T=l*d,P=a*d,S=o*c,M=o*h,E=o*d,A=this.val;return A[0]=1-(C+P),A[3]=m+E,A[6]=y-M,A[1]=m-E,A[4]=1-(v+P),A[7]=T+S,A[2]=y+M,A[5]=T-S,A[8]=1-(v+C),this},normalFromMat4:function(f){var u=f.val,l=this.val,a=u[0],o=u[1],c=u[2],h=u[3],d=u[4],v=u[5],m=u[6],y=u[7],C=u[8],T=u[9],P=u[10],S=u[11],M=u[12],E=u[13],A=u[14],R=u[15],w=a*v-o*d,O=a*m-c*d,F=a*y-h*d,b=o*m-c*v,I=o*y-h*v,N=c*y-h*m,z=C*E-T*M,U=C*A-P*M,W=C*R-S*M,D=T*A-P*E,V=T*R-S*E,L=P*R-S*A,B=w*L-O*V+F*D+b*W-I*U+N*z;return B?(B=1/B,l[0]=(v*L-m*V+y*D)*B,l[1]=(m*W-d*L-y*U)*B,l[2]=(d*V-v*W+y*z)*B,l[3]=(c*V-o*L-h*D)*B,l[4]=(a*L-c*W+h*U)*B,l[5]=(o*W-a*V-h*z)*B,l[6]=(E*N-A*I+R*b)*B,l[7]=(A*F-M*N-R*O)*B,l[8]=(M*I-E*F+R*w)*B,this):null}});s.exports=p},16650:(s,g,e)=>{var n=e(56694),p=e(70015),f=1e-6,u=new n({initialize:function(v){this.val=new Float32Array(16),v?this.copy(v):this.identity()},clone:function(){return new u(this)},set:function(d){return this.copy(d)},setValues:function(d,v,m,y,C,T,P,S,M,E,A,R,w,O,F,b){var I=this.val;return I[0]=d,I[1]=v,I[2]=m,I[3]=y,I[4]=C,I[5]=T,I[6]=P,I[7]=S,I[8]=M,I[9]=E,I[10]=A,I[11]=R,I[12]=w,I[13]=O,I[14]=F,I[15]=b,this},copy:function(d){var v=d.val;return this.setValues(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15])},fromArray:function(d){return this.setValues(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(d,v,m){var y=l.fromQuat(m),C=y.val,T=v.x,P=v.y,S=v.z;return this.setValues(C[0]*T,C[1]*T,C[2]*T,0,C[4]*P,C[5]*P,C[6]*P,0,C[8]*S,C[9]*S,C[10]*S,0,d.x,d.y,d.z,1)},xyz:function(d,v,m){this.identity();var y=this.val;return y[12]=d,y[13]=v,y[14]=m,this},scaling:function(d,v,m){this.zero();var y=this.val;return y[0]=d,y[5]=v,y[10]=m,y[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var d=this.val,v=d[1],m=d[2],y=d[3],C=d[6],T=d[7],P=d[11];return d[1]=d[4],d[2]=d[8],d[3]=d[12],d[4]=v,d[6]=d[9],d[7]=d[13],d[8]=m,d[9]=C,d[11]=d[14],d[12]=y,d[13]=T,d[14]=P,this},getInverse:function(d){return this.copy(d),this.invert()},invert:function(){var d=this.val,v=d[0],m=d[1],y=d[2],C=d[3],T=d[4],P=d[5],S=d[6],M=d[7],E=d[8],A=d[9],R=d[10],w=d[11],O=d[12],F=d[13],b=d[14],I=d[15],N=v*P-m*T,z=v*S-y*T,U=v*M-C*T,W=m*S-y*P,D=m*M-C*P,V=y*M-C*S,L=E*F-A*O,B=E*b-R*O,G=E*I-w*O,Y=A*b-R*F,X=A*I-w*F,k=R*I-w*b,H=N*k-z*X+U*Y+W*G-D*B+V*L;return H?(H=1/H,this.setValues((P*k-S*X+M*Y)*H,(y*X-m*k-C*Y)*H,(F*V-b*D+I*W)*H,(R*D-A*V-w*W)*H,(S*G-T*k-M*B)*H,(v*k-y*G+C*B)*H,(b*U-O*V-I*z)*H,(E*V-R*U+w*z)*H,(T*X-P*G+M*L)*H,(m*G-v*X-C*L)*H,(O*D-F*U+I*N)*H,(A*U-E*D-w*N)*H,(P*B-T*Y-S*L)*H,(v*Y-m*B+y*L)*H,(F*z-O*W-b*N)*H,(E*W-A*z+R*N)*H)):this},adjoint:function(){var d=this.val,v=d[0],m=d[1],y=d[2],C=d[3],T=d[4],P=d[5],S=d[6],M=d[7],E=d[8],A=d[9],R=d[10],w=d[11],O=d[12],F=d[13],b=d[14],I=d[15];return this.setValues(P*(R*I-w*b)-A*(S*I-M*b)+F*(S*w-M*R),-(m*(R*I-w*b)-A*(y*I-C*b)+F*(y*w-C*R)),m*(S*I-M*b)-P*(y*I-C*b)+F*(y*M-C*S),-(m*(S*w-M*R)-P*(y*w-C*R)+A*(y*M-C*S)),-(T*(R*I-w*b)-E*(S*I-M*b)+O*(S*w-M*R)),v*(R*I-w*b)-E*(y*I-C*b)+O*(y*w-C*R),-(v*(S*I-M*b)-T*(y*I-C*b)+O*(y*M-C*S)),v*(S*w-M*R)-T*(y*w-C*R)+E*(y*M-C*S),T*(A*I-w*F)-E*(P*I-M*F)+O*(P*w-M*A),-(v*(A*I-w*F)-E*(m*I-C*F)+O*(m*w-C*A)),v*(P*I-M*F)-T*(m*I-C*F)+O*(m*M-C*P),-(v*(P*w-M*A)-T*(m*w-C*A)+E*(m*M-C*P)),-(T*(A*b-R*F)-E*(P*b-S*F)+O*(P*R-S*A)),v*(A*b-R*F)-E*(m*b-y*F)+O*(m*R-y*A),-(v*(P*b-S*F)-T*(m*b-y*F)+O*(m*S-y*P)),v*(P*R-S*A)-T*(m*R-y*A)+E*(m*S-y*P))},determinant:function(){var d=this.val,v=d[0],m=d[1],y=d[2],C=d[3],T=d[4],P=d[5],S=d[6],M=d[7],E=d[8],A=d[9],R=d[10],w=d[11],O=d[12],F=d[13],b=d[14],I=d[15],N=v*P-m*T,z=v*S-y*T,U=v*M-C*T,W=m*S-y*P,D=m*M-C*P,V=y*M-C*S,L=E*F-A*O,B=E*b-R*O,G=E*I-w*O,Y=A*b-R*F,X=A*I-w*F,k=R*I-w*b;return N*k-z*X+U*Y+W*G-D*B+V*L},multiply:function(d){var v=this.val,m=v[0],y=v[1],C=v[2],T=v[3],P=v[4],S=v[5],M=v[6],E=v[7],A=v[8],R=v[9],w=v[10],O=v[11],F=v[12],b=v[13],I=v[14],N=v[15],z=d.val,U=z[0],W=z[1],D=z[2],V=z[3];return v[0]=U*m+W*P+D*A+V*F,v[1]=U*y+W*S+D*R+V*b,v[2]=U*C+W*M+D*w+V*I,v[3]=U*T+W*E+D*O+V*N,U=z[4],W=z[5],D=z[6],V=z[7],v[4]=U*m+W*P+D*A+V*F,v[5]=U*y+W*S+D*R+V*b,v[6]=U*C+W*M+D*w+V*I,v[7]=U*T+W*E+D*O+V*N,U=z[8],W=z[9],D=z[10],V=z[11],v[8]=U*m+W*P+D*A+V*F,v[9]=U*y+W*S+D*R+V*b,v[10]=U*C+W*M+D*w+V*I,v[11]=U*T+W*E+D*O+V*N,U=z[12],W=z[13],D=z[14],V=z[15],v[12]=U*m+W*P+D*A+V*F,v[13]=U*y+W*S+D*R+V*b,v[14]=U*C+W*M+D*w+V*I,v[15]=U*T+W*E+D*O+V*N,this},multiplyLocal:function(d){var v=this.val,m=d.val;return this.setValues(v[0]*m[0]+v[1]*m[4]+v[2]*m[8]+v[3]*m[12],v[0]*m[1]+v[1]*m[5]+v[2]*m[9]+v[3]*m[13],v[0]*m[2]+v[1]*m[6]+v[2]*m[10]+v[3]*m[14],v[0]*m[3]+v[1]*m[7]+v[2]*m[11]+v[3]*m[15],v[4]*m[0]+v[5]*m[4]+v[6]*m[8]+v[7]*m[12],v[4]*m[1]+v[5]*m[5]+v[6]*m[9]+v[7]*m[13],v[4]*m[2]+v[5]*m[6]+v[6]*m[10]+v[7]*m[14],v[4]*m[3]+v[5]*m[7]+v[6]*m[11]+v[7]*m[15],v[8]*m[0]+v[9]*m[4]+v[10]*m[8]+v[11]*m[12],v[8]*m[1]+v[9]*m[5]+v[10]*m[9]+v[11]*m[13],v[8]*m[2]+v[9]*m[6]+v[10]*m[10]+v[11]*m[14],v[8]*m[3]+v[9]*m[7]+v[10]*m[11]+v[11]*m[15],v[12]*m[0]+v[13]*m[4]+v[14]*m[8]+v[15]*m[12],v[12]*m[1]+v[13]*m[5]+v[14]*m[9]+v[15]*m[13],v[12]*m[2]+v[13]*m[6]+v[14]*m[10]+v[15]*m[14],v[12]*m[3]+v[13]*m[7]+v[14]*m[11]+v[15]*m[15])},premultiply:function(d){return this.multiplyMatrices(d,this)},multiplyMatrices:function(d,v){var m=d.val,y=v.val,C=m[0],T=m[4],P=m[8],S=m[12],M=m[1],E=m[5],A=m[9],R=m[13],w=m[2],O=m[6],F=m[10],b=m[14],I=m[3],N=m[7],z=m[11],U=m[15],W=y[0],D=y[4],V=y[8],L=y[12],B=y[1],G=y[5],Y=y[9],X=y[13],k=y[2],H=y[6],K=y[10],j=y[14],$=y[3],Q=y[7],_=y[11],q=y[15];return this.setValues(C*W+T*B+P*k+S*$,M*W+E*B+A*k+R*$,w*W+O*B+F*k+b*$,I*W+N*B+z*k+U*$,C*D+T*G+P*H+S*Q,M*D+E*G+A*H+R*Q,w*D+O*G+F*H+b*Q,I*D+N*G+z*H+U*Q,C*V+T*Y+P*K+S*_,M*V+E*Y+A*K+R*_,w*V+O*Y+F*K+b*_,I*V+N*Y+z*K+U*_,C*L+T*X+P*j+S*q,M*L+E*X+A*j+R*q,w*L+O*X+F*j+b*q,I*L+N*X+z*j+U*q)},translate:function(d){return this.translateXYZ(d.x,d.y,d.z)},translateXYZ:function(d,v,m){var y=this.val;return y[12]=y[0]*d+y[4]*v+y[8]*m+y[12],y[13]=y[1]*d+y[5]*v+y[9]*m+y[13],y[14]=y[2]*d+y[6]*v+y[10]*m+y[14],y[15]=y[3]*d+y[7]*v+y[11]*m+y[15],this},scale:function(d){return this.scaleXYZ(d.x,d.y,d.z)},scaleXYZ:function(d,v,m){var y=this.val;return y[0]=y[0]*d,y[1]=y[1]*d,y[2]=y[2]*d,y[3]=y[3]*d,y[4]=y[4]*v,y[5]=y[5]*v,y[6]=y[6]*v,y[7]=y[7]*v,y[8]=y[8]*m,y[9]=y[9]*m,y[10]=y[10]*m,y[11]=y[11]*m,this},makeRotationAxis:function(d,v){var m=Math.cos(v),y=Math.sin(v),C=1-m,T=d.x,P=d.y,S=d.z,M=C*T,E=C*P;return this.setValues(M*T+m,M*P-y*S,M*S+y*P,0,M*P+y*S,E*P+m,E*S-y*T,0,M*S-y*P,E*S+y*T,C*S*S+m,0,0,0,0,1)},rotate:function(d,v){var m=this.val,y=v.x,C=v.y,T=v.z,P=Math.sqrt(y*y+C*C+T*T);if(Math.abs(P)<f)return this;P=1/P,y*=P,C*=P,T*=P;var S=Math.sin(d),M=Math.cos(d),E=1-M,A=m[0],R=m[1],w=m[2],O=m[3],F=m[4],b=m[5],I=m[6],N=m[7],z=m[8],U=m[9],W=m[10],D=m[11],V=m[12],L=m[13],B=m[14],G=m[15],Y=y*y*E+M,X=C*y*E+T*S,k=T*y*E-C*S,H=y*C*E-T*S,K=C*C*E+M,j=T*C*E+y*S,$=y*T*E+C*S,Q=C*T*E-y*S,_=T*T*E+M;return this.setValues(A*Y+F*X+z*k,R*Y+b*X+U*k,w*Y+I*X+W*k,O*Y+N*X+D*k,A*H+F*K+z*j,R*H+b*K+U*j,w*H+I*K+W*j,O*H+N*K+D*j,A*$+F*Q+z*_,R*$+b*Q+U*_,w*$+I*Q+W*_,O*$+N*Q+D*_,V,L,B,G)},rotateX:function(d){var v=this.val,m=Math.sin(d),y=Math.cos(d),C=v[4],T=v[5],P=v[6],S=v[7],M=v[8],E=v[9],A=v[10],R=v[11];return v[4]=C*y+M*m,v[5]=T*y+E*m,v[6]=P*y+A*m,v[7]=S*y+R*m,v[8]=M*y-C*m,v[9]=E*y-T*m,v[10]=A*y-P*m,v[11]=R*y-S*m,this},rotateY:function(d){var v=this.val,m=Math.sin(d),y=Math.cos(d),C=v[0],T=v[1],P=v[2],S=v[3],M=v[8],E=v[9],A=v[10],R=v[11];return v[0]=C*y-M*m,v[1]=T*y-E*m,v[2]=P*y-A*m,v[3]=S*y-R*m,v[8]=C*m+M*y,v[9]=T*m+E*y,v[10]=P*m+A*y,v[11]=S*m+R*y,this},rotateZ:function(d){var v=this.val,m=Math.sin(d),y=Math.cos(d),C=v[0],T=v[1],P=v[2],S=v[3],M=v[4],E=v[5],A=v[6],R=v[7];return v[0]=C*y+M*m,v[1]=T*y+E*m,v[2]=P*y+A*m,v[3]=S*y+R*m,v[4]=M*y-C*m,v[5]=E*y-T*m,v[6]=A*y-P*m,v[7]=R*y-S*m,this},fromRotationTranslation:function(d,v){var m=d.x,y=d.y,C=d.z,T=d.w,P=m+m,S=y+y,M=C+C,E=m*P,A=m*S,R=m*M,w=y*S,O=y*M,F=C*M,b=T*P,I=T*S,N=T*M;return this.setValues(1-(w+F),A+N,R-I,0,A-N,1-(E+F),O+b,0,R+I,O-b,1-(E+w),0,v.x,v.y,v.z,1)},fromQuat:function(d){var v=d.x,m=d.y,y=d.z,C=d.w,T=v+v,P=m+m,S=y+y,M=v*T,E=v*P,A=v*S,R=m*P,w=m*S,O=y*S,F=C*T,b=C*P,I=C*S;return this.setValues(1-(R+O),E+I,A-b,0,E-I,1-(M+O),w+F,0,A+b,w-F,1-(M+R),0,0,0,0,1)},frustum:function(d,v,m,y,C,T){var P=1/(v-d),S=1/(y-m),M=1/(C-T);return this.setValues(C*2*P,0,0,0,0,C*2*S,0,0,(v+d)*P,(y+m)*S,(T+C)*M,-1,0,0,T*C*2*M,0)},perspective:function(d,v,m,y){var C=1/Math.tan(d/2),T=1/(m-y);return this.setValues(C/v,0,0,0,0,C,0,0,0,0,(y+m)*T,-1,0,0,2*y*m*T,0)},perspectiveLH:function(d,v,m,y){return this.setValues(2*m/d,0,0,0,0,2*m/v,0,0,0,0,-y/(m-y),1,0,0,m*y/(m-y),0)},ortho:function(d,v,m,y,C,T){var P=d-v,S=m-y,M=C-T;return P=P===0?P:1/P,S=S===0?S:1/S,M=M===0?M:1/M,this.setValues(-2*P,0,0,0,0,-2*S,0,0,0,0,2*M,0,(d+v)*P,(y+m)*S,(T+C)*M,1)},lookAtRH:function(d,v,m){var y=this.val;return h.subVectors(d,v),h.getLengthSquared()===0&&(h.z=1),h.normalize(),o.crossVectors(m,h),o.getLengthSquared()===0&&(Math.abs(m.z)===1?h.x+=1e-4:h.z+=1e-4,h.normalize(),o.crossVectors(m,h)),o.normalize(),c.crossVectors(h,o),y[0]=o.x,y[1]=o.y,y[2]=o.z,y[4]=c.x,y[5]=c.y,y[6]=c.z,y[8]=h.x,y[9]=h.y,y[10]=h.z,this},lookAt:function(d,v,m){var y=d.x,C=d.y,T=d.z,P=m.x,S=m.y,M=m.z,E=v.x,A=v.y,R=v.z;if(Math.abs(y-E)<f&&Math.abs(C-A)<f&&Math.abs(T-R)<f)return this.identity();var w=y-E,O=C-A,F=T-R,b=1/Math.sqrt(w*w+O*O+F*F);w*=b,O*=b,F*=b;var I=S*F-M*O,N=M*w-P*F,z=P*O-S*w;b=Math.sqrt(I*I+N*N+z*z),b?(b=1/b,I*=b,N*=b,z*=b):(I=0,N=0,z=0);var U=O*z-F*N,W=F*I-w*z,D=w*N-O*I;return b=Math.sqrt(U*U+W*W+D*D),b?(b=1/b,U*=b,W*=b,D*=b):(U=0,W=0,D=0),this.setValues(I,U,w,0,N,W,O,0,z,D,F,0,-(I*y+N*C+z*T),-(U*y+W*C+D*T),-(w*y+O*C+F*T),1)},yawPitchRoll:function(d,v,m){this.zero(),l.zero(),a.zero();var y=this.val,C=l.val,T=a.val,P=Math.sin(m),S=Math.cos(m);return y[10]=1,y[15]=1,y[0]=S,y[1]=P,y[4]=-P,y[5]=S,P=Math.sin(v),S=Math.cos(v),C[0]=1,C[15]=1,C[5]=S,C[10]=S,C[9]=-P,C[6]=P,P=Math.sin(d),S=Math.cos(d),T[5]=1,T[15]=1,T[0]=S,T[2]=-P,T[8]=P,T[10]=S,this.multiplyLocal(l),this.multiplyLocal(a),this},setWorldMatrix:function(d,v,m,y,C){return this.yawPitchRoll(d.y,d.x,d.z),l.scaling(m.x,m.y,m.z),a.xyz(v.x,v.y,v.z),this.multiplyLocal(l),this.multiplyLocal(a),y&&this.multiplyLocal(y),C&&this.multiplyLocal(C),this},multiplyToMat4:function(d,v){var m=this.val,y=d.val,C=m[0],T=m[1],P=m[2],S=m[3],M=m[4],E=m[5],A=m[6],R=m[7],w=m[8],O=m[9],F=m[10],b=m[11],I=m[12],N=m[13],z=m[14],U=m[15],W=y[0],D=y[1],V=y[2],L=y[3],B=y[4],G=y[5],Y=y[6],X=y[7],k=y[8],H=y[9],K=y[10],j=y[11],$=y[12],Q=y[13],_=y[14],q=y[15];return v.setValues(W*C+D*M+V*w+L*I,D*T+D*E+V*O+L*N,V*P+D*A+V*F+L*z,L*S+D*R+V*b+L*U,B*C+G*M+Y*w+X*I,B*T+G*E+Y*O+X*N,B*P+G*A+Y*F+X*z,B*S+G*R+Y*b+X*U,k*C+H*M+K*w+j*I,k*T+H*E+K*O+j*N,k*P+H*A+K*F+j*z,k*S+H*R+K*b+j*U,$*C+Q*M+_*w+q*I,$*T+Q*E+_*O+q*N,$*P+Q*A+_*F+q*z,$*S+Q*R+_*b+q*U)},fromRotationXYTranslation:function(d,v,m){var y=v.x,C=v.y,T=v.z,P=Math.sin(d.x),S=Math.cos(d.x),M=Math.sin(d.y),E=Math.cos(d.y),A=y,R=C,w=T,O=-P,F=0-O*M,b=0-S*M,I=O*E,N=S*E;return m||(A=E*y+M*T,R=F*y+S*C+I*T,w=b*y+P*C+N*T),this.setValues(E,F,b,0,0,S,P,0,M,I,N,0,A,R,w,1)},getMaxScaleOnAxis:function(){var d=this.val,v=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],m=d[4]*d[4]+d[5]*d[5]+d[6]*d[6],y=d[8]*d[8]+d[9]*d[9]+d[10]*d[10];return Math.sqrt(Math.max(v,m,y))}}),l=new u,a=new u,o=new p,c=new p,h=new p;s.exports=u},69635:s=>{var g=function(e,n,p){return Math.min(e+n,p)};s.exports=g},37394:s=>{var g=function(e){var n=e.length;if(n===0)return 0;e.sort(function(f,u){return f-u});var p=Math.floor(n/2);return n%2===0?(e[p]+e[p-1])/2:e[p]};s.exports=g},17259:s=>{var g=function(e,n,p){return Math.max(e-n,p)};s.exports=g},61820:s=>{var g=function(e,n,p,f){p===void 0&&(p=n+1);var u=(e-n)/(p-n);return u>1?f!==void 0?(u=(f-e)/(f-p),u<0&&(u=0)):u=1:u<0&&(u=0),u};s.exports=g},75003:(s,g,e)=>{var n=e(56694),p=e(5341),f=e(72283),u=e(70015),l=1e-6,a=new Int8Array([1,2,0]),o=new Float32Array([0,0,0]),c=new u(1,0,0),h=new u(0,1,0),d=new u,v=new p,m=new n({initialize:function(C,T,P,S){this.onChangeCallback=f,this.set(C,T,P,S)},x:{get:function(){return this._x},set:function(y){this._x=y,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(y){this._y=y,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(y){this._z=y,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(y){this._w=y,this.onChangeCallback(this)}},copy:function(y){return this.set(y)},set:function(y,C,T,P,S){return S===void 0&&(S=!0),typeof y=="object"?(this._x=y.x||0,this._y=y.y||0,this._z=y.z||0,this._w=y.w||0):(this._x=y||0,this._y=C||0,this._z=T||0,this._w=P||0),S&&this.onChangeCallback(this),this},add:function(y){return this._x+=y.x,this._y+=y.y,this._z+=y.z,this._w+=y.w,this.onChangeCallback(this),this},subtract:function(y){return this._x-=y.x,this._y-=y.y,this._z-=y.z,this._w-=y.w,this.onChangeCallback(this),this},scale:function(y){return this._x*=y,this._y*=y,this._z*=y,this._w*=y,this.onChangeCallback(this),this},length:function(){var y=this.x,C=this.y,T=this.z,P=this.w;return Math.sqrt(y*y+C*C+T*T+P*P)},lengthSq:function(){var y=this.x,C=this.y,T=this.z,P=this.w;return y*y+C*C+T*T+P*P},normalize:function(){var y=this.x,C=this.y,T=this.z,P=this.w,S=y*y+C*C+T*T+P*P;return S>0&&(S=1/Math.sqrt(S),this._x=y*S,this._y=C*S,this._z=T*S,this._w=P*S),this.onChangeCallback(this),this},dot:function(y){return this.x*y.x+this.y*y.y+this.z*y.z+this.w*y.w},lerp:function(y,C){C===void 0&&(C=0);var T=this.x,P=this.y,S=this.z,M=this.w;return this.set(T+C*(y.x-T),P+C*(y.y-P),S+C*(y.z-S),M+C*(y.w-M))},rotationTo:function(y,C){var T=y.x*C.x+y.y*C.y+y.z*C.z;return T<-.999999?(d.copy(c).cross(y).length()<l&&d.copy(h).cross(y),d.normalize(),this.setAxisAngle(d,Math.PI)):T>.999999?this.set(0,0,0,1):(d.copy(y).cross(C),this._x=d.x,this._y=d.y,this._z=d.z,this._w=1+T,this.normalize())},setAxes:function(y,C,T){var P=v.val;return P[0]=C.x,P[3]=C.y,P[6]=C.z,P[1]=T.x,P[4]=T.y,P[7]=T.z,P[2]=-y.x,P[5]=-y.y,P[8]=-y.z,this.fromMat3(v).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(y,C){C=C*.5;var T=Math.sin(C);return this.set(T*y.x,T*y.y,T*y.z,Math.cos(C))},multiply:function(y){var C=this.x,T=this.y,P=this.z,S=this.w,M=y.x,E=y.y,A=y.z,R=y.w;return this.set(C*R+S*M+T*A-P*E,T*R+S*E+P*M-C*A,P*R+S*A+C*E-T*M,S*R-C*M-T*E-P*A)},slerp:function(y,C){var T=this.x,P=this.y,S=this.z,M=this.w,E=y.x,A=y.y,R=y.z,w=y.w,O=T*E+P*A+S*R+M*w;O<0&&(O=-O,E=-E,A=-A,R=-R,w=-w);var F=1-C,b=C;if(1-O>l){var I=Math.acos(O),N=Math.sin(I);F=Math.sin((1-C)*I)/N,b=Math.sin(C*I)/N}return this.set(F*T+b*E,F*P+b*A,F*S+b*R,F*M+b*w)},invert:function(){var y=this.x,C=this.y,T=this.z,P=this.w,S=y*y+C*C+T*T+P*P,M=S?1/S:0;return this.set(-y*M,-C*M,-T*M,P*M)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(y){y*=.5;var C=this.x,T=this.y,P=this.z,S=this.w,M=Math.sin(y),E=Math.cos(y);return this.set(C*E+S*M,T*E+P*M,P*E-T*M,S*E-C*M)},rotateY:function(y){y*=.5;var C=this.x,T=this.y,P=this.z,S=this.w,M=Math.sin(y),E=Math.cos(y);return this.set(C*E-P*M,T*E+S*M,P*E+C*M,S*E-T*M)},rotateZ:function(y){y*=.5;var C=this.x,T=this.y,P=this.z,S=this.w,M=Math.sin(y),E=Math.cos(y);return this.set(C*E+T*M,T*E-C*M,P*E+S*M,S*E-P*M)},calculateW:function(){var y=this.x,C=this.y,T=this.z;return this.w=-Math.sqrt(1-y*y-C*C-T*T),this},setFromEuler:function(y,C){var T=y.x/2,P=y.y/2,S=y.z/2,M=Math.cos(T),E=Math.cos(P),A=Math.cos(S),R=Math.sin(T),w=Math.sin(P),O=Math.sin(S);switch(y.order){case"XYZ":{this.set(R*E*A+M*w*O,M*w*A-R*E*O,M*E*O+R*w*A,M*E*A-R*w*O,C);break}case"YXZ":{this.set(R*E*A+M*w*O,M*w*A-R*E*O,M*E*O-R*w*A,M*E*A+R*w*O,C);break}case"ZXY":{this.set(R*E*A-M*w*O,M*w*A+R*E*O,M*E*O+R*w*A,M*E*A-R*w*O,C);break}case"ZYX":{this.set(R*E*A-M*w*O,M*w*A+R*E*O,M*E*O-R*w*A,M*E*A+R*w*O,C);break}case"YZX":{this.set(R*E*A+M*w*O,M*w*A+R*E*O,M*E*O-R*w*A,M*E*A-R*w*O,C);break}case"XZY":{this.set(R*E*A-M*w*O,M*w*A-R*E*O,M*E*O+R*w*A,M*E*A+R*w*O,C);break}}return this},setFromRotationMatrix:function(y){var C=y.val,T=C[0],P=C[4],S=C[8],M=C[1],E=C[5],A=C[9],R=C[2],w=C[6],O=C[10],F=T+E+O,b;return F>0?(b=.5/Math.sqrt(F+1),this.set((w-A)*b,(S-R)*b,(M-P)*b,.25/b)):T>E&&T>O?(b=2*Math.sqrt(1+T-E-O),this.set(.25*b,(P+M)/b,(S+R)/b,(w-A)/b)):E>O?(b=2*Math.sqrt(1+E-T-O),this.set((P+M)/b,.25*b,(A+w)/b,(S-R)/b)):(b=2*Math.sqrt(1+O-T-E),this.set((S+R)/b,(A+w)/b,.25*b,(M-P)/b)),this},fromMat3:function(y){var C=y.val,T=C[0]+C[4]+C[8],P;if(T>0)P=Math.sqrt(T+1),this.w=.5*P,P=.5/P,this._x=(C[7]-C[5])*P,this._y=(C[2]-C[6])*P,this._z=(C[3]-C[1])*P;else{var S=0;C[4]>C[0]&&(S=1),C[8]>C[S*3+S]&&(S=2);var M=a[S],E=a[M];P=Math.sqrt(C[S*3+S]-C[M*3+M]-C[E*3+E]+1),o[S]=.5*P,P=.5/P,o[M]=(C[M*3+S]+C[S*3+M])*P,o[E]=(C[E*3+S]+C[S*3+E])*P,this._x=o[0],this._y=o[1],this._z=o[2],this._w=(C[E*3+M]-C[M*3+E])*P}return this.onChangeCallback(this),this}});s.exports=m},23701:(s,g,e)=>{var n=e(83392),p=function(f){return f*n.RAD_TO_DEG};s.exports=p},16906:s=>{var g=function(e,n){n===void 0&&(n=1);var p=Math.random()*2*Math.PI;return e.x=Math.cos(p)*n,e.y=Math.sin(p)*n,e};s.exports=g},52417:s=>{var g=function(e,n){n===void 0&&(n=1);var p=Math.random()*2*Math.PI,f=Math.random()*2-1,u=Math.sqrt(1-f*f)*n;return e.x=Math.cos(p)*u,e.y=Math.sin(p)*u,e.z=f*n,e};s.exports=g},17915:s=>{var g=function(e,n){return n===void 0&&(n=1),e.x=(Math.random()*2-1)*n,e.y=(Math.random()*2-1)*n,e.z=(Math.random()*2-1)*n,e.w=(Math.random()*2-1)*n,e};s.exports=g},52257:s=>{var g=function(e,n){var p=e.x,f=e.y;return e.x=p*Math.cos(n)-f*Math.sin(n),e.y=p*Math.sin(n)+f*Math.cos(n),e};s.exports=g},2386:s=>{var g=function(e,n,p,f){var u=Math.cos(f),l=Math.sin(f),a=e.x-n,o=e.y-p;return e.x=a*u-o*l+n,e.y=a*l+o*u+p,e};s.exports=g},72395:s=>{var g=function(e,n,p,f,u){var l=f+Math.atan2(e.y-p,e.x-n);return e.x=n+u*Math.cos(l),e.y=p+u*Math.sin(l),e};s.exports=g},41061:s=>{var g=function(e,n,p,f,u){return e.x=n+u*Math.cos(f),e.y=p+u*Math.sin(f),e};s.exports=g},93709:(s,g,e)=>{var n=e(70015),p=e(16650),f=e(75003),u=new p,l=new f,a=new n,o=function(c,h,d){return l.setAxisAngle(h,d),u.fromRotationTranslation(l,a.set(0,0,0)),c.transformMat4(u)};s.exports=o},67233:s=>{var g=function(e){return e>0?Math.ceil(e):Math.floor(e)};s.exports=g},64333:s=>{var g=function(e,n,p){n===void 0&&(n=0),p===void 0&&(p=10);var f=Math.pow(p,-n);return Math.round(e*f)/f};s.exports=g},59533:s=>{var g=function(e,n,p,f){n===void 0&&(n=1),p===void 0&&(p=1),f===void 0&&(f=1),f*=Math.PI/e;for(var u=[],l=[],a=0;a<e;a++)p-=n*f,n+=p*f,u[a]=p,l[a]=n;return{sin:l,cos:u,length:e}};s.exports=g},5514:s=>{var g=function(e,n,p){return e<=n?0:e>=p?1:(e=(e-n)/(p-n),e*e*(3-2*e))};s.exports=g},87736:s=>{var g=function(e,n,p){return e=Math.max(0,Math.min(1,(e-n)/(p-n))),e*e*e*(e*(e*6-15)+10)};s.exports=g},55805:(s,g,e)=>{var n=e(93736),p=function(f,u,l,a){a===void 0&&(a=new n);var o=0,c=0,h=u*l;return f>0&&f<=h&&(f>u-1?(c=Math.floor(f/u),o=f-c*u):o=f),a.set(o,c)};s.exports=p},64462:(s,g,e)=>{var n=e(93736),p=function(f,u,l,a,o,c,h,d){d===void 0&&(d=new n);var v=Math.sin(o),m=Math.cos(o),y=m*c,C=v*c,T=-v*h,P=m*h,S=1/(y*P+T*-C);return d.x=P*S*f+-T*S*u+(a*T-l*P)*S,d.y=y*S*u+-C*S*f+(-a*y+l*C)*S,d};s.exports=p},93736:(s,g,e)=>{var n=e(56694),p=e(88456),f=new n({initialize:function(l,a){this.x=0,this.y=0,typeof l=="object"?(this.x=l.x||0,this.y=l.y||0):(a===void 0&&(a=l),this.x=l||0,this.y=a||0)},clone:function(){return new f(this.x,this.y)},copy:function(u){return this.x=u.x||0,this.y=u.y||0,this},setFromObject:function(u){return this.x=u.x||0,this.y=u.y||0,this},set:function(u,l){return l===void 0&&(l=u),this.x=u,this.y=l,this},setTo:function(u,l){return this.set(u,l)},setToPolar:function(u,l){return l==null&&(l=1),this.x=Math.cos(u)*l,this.y=Math.sin(u)*l,this},equals:function(u){return this.x===u.x&&this.y===u.y},fuzzyEquals:function(u,l){return p(this.x,u.x,l)&&p(this.y,u.y,l)},angle:function(){var u=Math.atan2(this.y,this.x);return u<0&&(u+=2*Math.PI),u},setAngle:function(u){return this.setToPolar(u,this.length())},add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.x-=u.x,this.y-=u.y,this},multiply:function(u){return this.x*=u.x,this.y*=u.y,this},scale:function(u){return isFinite(u)?(this.x*=u,this.y*=u):(this.x=0,this.y=0),this},divide:function(u){return this.x/=u.x,this.y/=u.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(u){var l=u.x-this.x,a=u.y-this.y;return Math.sqrt(l*l+a*a)},distanceSq:function(u){var l=u.x-this.x,a=u.y-this.y;return l*l+a*a},length:function(){var u=this.x,l=this.y;return Math.sqrt(u*u+l*l)},setLength:function(u){return this.normalize().scale(u)},lengthSq:function(){var u=this.x,l=this.y;return u*u+l*l},normalize:function(){var u=this.x,l=this.y,a=u*u+l*l;return a>0&&(a=1/Math.sqrt(a),this.x=u*a,this.y=l*a),this},normalizeRightHand:function(){var u=this.x;return this.x=this.y*-1,this.y=u,this},normalizeLeftHand:function(){var u=this.x;return this.x=this.y,this.y=u*-1,this},dot:function(u){return this.x*u.x+this.y*u.y},cross:function(u){return this.x*u.y-this.y*u.x},lerp:function(u,l){l===void 0&&(l=0);var a=this.x,o=this.y;return this.x=a+l*(u.x-a),this.y=o+l*(u.y-o),this},transformMat3:function(u){var l=this.x,a=this.y,o=u.val;return this.x=o[0]*l+o[3]*a+o[6],this.y=o[1]*l+o[4]*a+o[7],this},transformMat4:function(u){var l=this.x,a=this.y,o=u.val;return this.x=o[0]*l+o[4]*a+o[12],this.y=o[1]*l+o[5]*a+o[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(u){var l=this.length();return l&&l>u&&this.scale(u/l),this},reflect:function(u){return u=u.clone().normalize(),this.subtract(u.scale(2*this.dot(u)))},mirror:function(u){return this.reflect(u).negate()},rotate:function(u){var l=Math.cos(u),a=Math.sin(u);return this.set(l*this.x-a*this.y,a*this.x+l*this.y)},project:function(u){var l=this.dot(u)/u.dot(u);return this.copy(u).scale(l)}});f.ZERO=new f,f.RIGHT=new f(1,0),f.LEFT=new f(-1,0),f.UP=new f(0,-1),f.DOWN=new f(0,1),f.ONE=new f(1,1),s.exports=f},70015:(s,g,e)=>{var n=e(56694),p=new n({initialize:function(u,l,a){this.x=0,this.y=0,this.z=0,typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0):(this.x=u||0,this.y=l||0,this.z=a||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(f){return this.x=Math.min(this.x,f.x),this.y=Math.min(this.y,f.y),this.z=Math.min(this.z,f.z),this},max:function(f){return this.x=Math.max(this.x,f.x),this.y=Math.max(this.y,f.y),this.z=Math.max(this.z,f.z),this},clone:function(){return new p(this.x,this.y,this.z)},addVectors:function(f,u){return this.x=f.x+u.x,this.y=f.y+u.y,this.z=f.z+u.z,this},crossVectors:function(f,u){var l=f.x,a=f.y,o=f.z,c=u.x,h=u.y,d=u.z;return this.x=a*d-o*h,this.y=o*c-l*d,this.z=l*h-a*c,this},equals:function(f){return this.x===f.x&&this.y===f.y&&this.z===f.z},copy:function(f){return this.x=f.x,this.y=f.y,this.z=f.z||0,this},set:function(f,u,l){return typeof f=="object"?(this.x=f.x||0,this.y=f.y||0,this.z=f.z||0):(this.x=f||0,this.y=u||0,this.z=l||0),this},setFromMatrixPosition:function(f){return this.fromArray(f.val,12)},setFromMatrixColumn:function(f,u){return this.fromArray(f.val,u*4)},fromArray:function(f,u){return u===void 0&&(u=0),this.x=f[u],this.y=f[u+1],this.z=f[u+2],this},add:function(f){return this.x+=f.x,this.y+=f.y,this.z+=f.z||0,this},addScalar:function(f){return this.x+=f,this.y+=f,this.z+=f,this},addScale:function(f,u){return this.x+=f.x*u,this.y+=f.y*u,this.z+=f.z*u||0,this},subtract:function(f){return this.x-=f.x,this.y-=f.y,this.z-=f.z||0,this},multiply:function(f){return this.x*=f.x,this.y*=f.y,this.z*=f.z||1,this},scale:function(f){return isFinite(f)?(this.x*=f,this.y*=f,this.z*=f):(this.x=0,this.y=0,this.z=0),this},divide:function(f){return this.x/=f.x,this.y/=f.y,this.z/=f.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(f){var u=f.x-this.x,l=f.y-this.y,a=f.z-this.z||0;return Math.sqrt(u*u+l*l+a*a)},distanceSq:function(f){var u=f.x-this.x,l=f.y-this.y,a=f.z-this.z||0;return u*u+l*l+a*a},length:function(){var f=this.x,u=this.y,l=this.z;return Math.sqrt(f*f+u*u+l*l)},lengthSq:function(){var f=this.x,u=this.y,l=this.z;return f*f+u*u+l*l},normalize:function(){var f=this.x,u=this.y,l=this.z,a=f*f+u*u+l*l;return a>0&&(a=1/Math.sqrt(a),this.x=f*a,this.y=u*a,this.z=l*a),this},dot:function(f){return this.x*f.x+this.y*f.y+this.z*f.z},cross:function(f){var u=this.x,l=this.y,a=this.z,o=f.x,c=f.y,h=f.z;return this.x=l*h-a*c,this.y=a*o-u*h,this.z=u*c-l*o,this},lerp:function(f,u){u===void 0&&(u=0);var l=this.x,a=this.y,o=this.z;return this.x=l+u*(f.x-l),this.y=a+u*(f.y-a),this.z=o+u*(f.z-o),this},applyMatrix3:function(f){var u=this.x,l=this.y,a=this.z,o=f.val;return this.x=o[0]*u+o[3]*l+o[6]*a,this.y=o[1]*u+o[4]*l+o[7]*a,this.z=o[2]*u+o[5]*l+o[8]*a,this},applyMatrix4:function(f){var u=this.x,l=this.y,a=this.z,o=f.val,c=1/(o[3]*u+o[7]*l+o[11]*a+o[15]);return this.x=(o[0]*u+o[4]*l+o[8]*a+o[12])*c,this.y=(o[1]*u+o[5]*l+o[9]*a+o[13])*c,this.z=(o[2]*u+o[6]*l+o[10]*a+o[14])*c,this},transformMat3:function(f){var u=this.x,l=this.y,a=this.z,o=f.val;return this.x=u*o[0]+l*o[3]+a*o[6],this.y=u*o[1]+l*o[4]+a*o[7],this.z=u*o[2]+l*o[5]+a*o[8],this},transformMat4:function(f){var u=this.x,l=this.y,a=this.z,o=f.val;return this.x=o[0]*u+o[4]*l+o[8]*a+o[12],this.y=o[1]*u+o[5]*l+o[9]*a+o[13],this.z=o[2]*u+o[6]*l+o[10]*a+o[14],this},transformCoordinates:function(f){var u=this.x,l=this.y,a=this.z,o=f.val,c=u*o[0]+l*o[4]+a*o[8]+o[12],h=u*o[1]+l*o[5]+a*o[9]+o[13],d=u*o[2]+l*o[6]+a*o[10]+o[14],v=u*o[3]+l*o[7]+a*o[11]+o[15];return this.x=c/v,this.y=h/v,this.z=d/v,this},transformQuat:function(f){var u=this.x,l=this.y,a=this.z,o=f.x,c=f.y,h=f.z,d=f.w,v=d*u+c*a-h*l,m=d*l+h*u-o*a,y=d*a+o*l-c*u,C=-o*u-c*l-h*a;return this.x=v*d+C*-o+m*-h-y*-c,this.y=m*d+C*-c+y*-o-v*-h,this.z=y*d+C*-h+v*-c-m*-o,this},project:function(f){var u=this.x,l=this.y,a=this.z,o=f.val,c=o[0],h=o[1],d=o[2],v=o[3],m=o[4],y=o[5],C=o[6],T=o[7],P=o[8],S=o[9],M=o[10],E=o[11],A=o[12],R=o[13],w=o[14],O=o[15],F=1/(u*v+l*T+a*E+O);return this.x=(u*c+l*m+a*P+A)*F,this.y=(u*h+l*y+a*S+R)*F,this.z=(u*d+l*C+a*M+w)*F,this},projectViewMatrix:function(f,u){return this.applyMatrix4(f).applyMatrix4(u)},unprojectViewMatrix:function(f,u){return this.applyMatrix4(f).applyMatrix4(u)},unproject:function(f,u){var l=f.x,a=f.y,o=f.z,c=f.w,h=this.x-l,d=c-this.y-1-a,v=this.z;return this.x=2*h/o-1,this.y=2*d/c-1,this.z=2*v-1,this.project(u)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});p.ZERO=new p,p.RIGHT=new p(1,0,0),p.LEFT=new p(-1,0,0),p.UP=new p(0,-1,0),p.DOWN=new p(0,1,0),p.FORWARD=new p(0,0,1),p.BACK=new p(0,0,-1),p.ONE=new p(1,1,1),s.exports=p},51729:(s,g,e)=>{var n=e(56694),p=new n({initialize:function(u,l,a,o){this.x=0,this.y=0,this.z=0,this.w=0,typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0,this.w=u.w||0):(this.x=u||0,this.y=l||0,this.z=a||0,this.w=o||0)},clone:function(){return new p(this.x,this.y,this.z,this.w)},copy:function(f){return this.x=f.x,this.y=f.y,this.z=f.z||0,this.w=f.w||0,this},equals:function(f){return this.x===f.x&&this.y===f.y&&this.z===f.z&&this.w===f.w},set:function(f,u,l,a){return typeof f=="object"?(this.x=f.x||0,this.y=f.y||0,this.z=f.z||0,this.w=f.w||0):(this.x=f||0,this.y=u||0,this.z=l||0,this.w=a||0),this},add:function(f){return this.x+=f.x,this.y+=f.y,this.z+=f.z||0,this.w+=f.w||0,this},subtract:function(f){return this.x-=f.x,this.y-=f.y,this.z-=f.z||0,this.w-=f.w||0,this},scale:function(f){return this.x*=f,this.y*=f,this.z*=f,this.w*=f,this},length:function(){var f=this.x,u=this.y,l=this.z,a=this.w;return Math.sqrt(f*f+u*u+l*l+a*a)},lengthSq:function(){var f=this.x,u=this.y,l=this.z,a=this.w;return f*f+u*u+l*l+a*a},normalize:function(){var f=this.x,u=this.y,l=this.z,a=this.w,o=f*f+u*u+l*l+a*a;return o>0&&(o=1/Math.sqrt(o),this.x=f*o,this.y=u*o,this.z=l*o,this.w=a*o),this},dot:function(f){return this.x*f.x+this.y*f.y+this.z*f.z+this.w*f.w},lerp:function(f,u){u===void 0&&(u=0);var l=this.x,a=this.y,o=this.z,c=this.w;return this.x=l+u*(f.x-l),this.y=a+u*(f.y-a),this.z=o+u*(f.z-o),this.w=c+u*(f.w-c),this},multiply:function(f){return this.x*=f.x,this.y*=f.y,this.z*=f.z||1,this.w*=f.w||1,this},divide:function(f){return this.x/=f.x,this.y/=f.y,this.z/=f.z||1,this.w/=f.w||1,this},distance:function(f){var u=f.x-this.x,l=f.y-this.y,a=f.z-this.z||0,o=f.w-this.w||0;return Math.sqrt(u*u+l*l+a*a+o*o)},distanceSq:function(f){var u=f.x-this.x,l=f.y-this.y,a=f.z-this.z||0,o=f.w-this.w||0;return u*u+l*l+a*a+o*o},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(f){var u=this.x,l=this.y,a=this.z,o=this.w,c=f.val;return this.x=c[0]*u+c[4]*l+c[8]*a+c[12]*o,this.y=c[1]*u+c[5]*l+c[9]*a+c[13]*o,this.z=c[2]*u+c[6]*l+c[10]*a+c[14]*o,this.w=c[3]*u+c[7]*l+c[11]*a+c[15]*o,this},transformQuat:function(f){var u=this.x,l=this.y,a=this.z,o=f.x,c=f.y,h=f.z,d=f.w,v=d*u+c*a-h*l,m=d*l+h*u-o*a,y=d*a+o*l-c*u,C=-o*u-c*l-h*a;return this.x=v*d+C*-o+m*-h-y*-c,this.y=m*d+C*-c+y*-o-v*-h,this.z=y*d+C*-h+v*-c-m*-o,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});p.prototype.sub=p.prototype.subtract,p.prototype.mul=p.prototype.multiply,p.prototype.div=p.prototype.divide,p.prototype.dist=p.prototype.distance,p.prototype.distSq=p.prototype.distanceSq,p.prototype.len=p.prototype.length,p.prototype.lenSq=p.prototype.lengthSq,s.exports=p},9557:s=>{var g=function(e,n,p){return Math.abs(e-n)<=p};s.exports=g},1071:s=>{var g=function(e,n,p){if(e>=n&&e<=p)return e;var f=p-n;return n+((e-n)%f+f)%f};s.exports=g},90447:s=>{var g=function(e,n,p,f){return Math.atan2(f-n,p-e)};s.exports=g},94240:s=>{var g=function(e,n){return Math.atan2(n.y-e.y,n.x-e.x)};s.exports=g},84066:s=>{var g=function(e,n){return Math.atan2(n.x-e.x,n.y-e.y)};s.exports=g},9678:s=>{var g=function(e,n,p,f){return Math.atan2(p-e,f-n)};s.exports=g},76861:(s,g,e)=>{var n=e(83392),p=function(f){return f>Math.PI&&(f-=n.PI2),Math.abs(((f+n.TAU)%n.PI2-n.PI2)%n.PI2)};s.exports=p},37570:s=>{var g=function(e){return e=e%(2*Math.PI),e>=0?e:e+2*Math.PI};s.exports=g},87597:(s,g,e)=>{var n=e(61616),p=function(){return n(-Math.PI,Math.PI)};s.exports=p},74493:(s,g,e)=>{var n=e(61616),p=function(){return n(-180,180)};s.exports=p},19049:(s,g,e)=>{var n=e(37570),p=function(f){return n(f+Math.PI)};s.exports=p},90612:(s,g,e)=>{var n=e(83392),p=function(f,u,l){return l===void 0&&(l=.05),f===u||(Math.abs(u-f)<=l||Math.abs(u-f)>=n.PI2-l?f=u:(Math.abs(u-f)>Math.PI&&(u<f?u+=n.PI2:u-=n.PI2),u>f?f+=l:u<f&&(f-=l))),f};s.exports=p},93954:s=>{var g=function(e,n){var p=n-e;if(p===0)return 0;var f=Math.floor((p- -180)/360);return p-f*360};s.exports=g},35786:(s,g,e)=>{var n=e(1071),p=function(f){return n(f,-Math.PI,Math.PI)};s.exports=p},62138:(s,g,e)=>{var n=e(1071),p=function(f){return n(f,-180,180)};s.exports=p},22153:(s,g,e)=>{s.exports={Between:e(90447),BetweenPoints:e(94240),BetweenPointsY:e(84066),BetweenY:e(9678),CounterClockwise:e(76861),Normalize:e(37570),Random:e(87597),RandomDegrees:e(74493),Reverse:e(19049),RotateTo:e(90612),ShortestBetween:e(93954),Wrap:e(35786),WrapDegrees:e(62138)}},83392:s=>{var g={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};s.exports=g},53996:s=>{var g=function(e,n,p,f){var u=e-p,l=n-f;return Math.sqrt(u*u+l*l)};s.exports=g},92951:s=>{var g=function(e,n){var p=e.x-n.x,f=e.y-n.y;return Math.sqrt(p*p+f*f)};s.exports=g},12161:s=>{var g=function(e,n){var p=e.x-n.x,f=e.y-n.y;return p*p+f*f};s.exports=g},38057:s=>{var g=function(e,n,p,f){return Math.max(Math.abs(e-p),Math.abs(n-f))};s.exports=g},33297:s=>{var g=function(e,n,p,f,u){return u===void 0&&(u=2),Math.sqrt(Math.pow(p-e,u)+Math.pow(f-n,u))};s.exports=g},90366:s=>{var g=function(e,n,p,f){return Math.abs(e-p)+Math.abs(n-f)};s.exports=g},35032:s=>{var g=function(e,n,p,f){var u=e-p,l=n-f;return u*u+l*l};s.exports=g},10130:(s,g,e)=>{s.exports={Between:e(53996),BetweenPoints:e(92951),BetweenPointsSquared:e(12161),Chebyshev:e(38057),Power:e(33297),Snake:e(90366),Squared:e(35032)}},35060:(s,g,e)=>{var n=e(25265),p=e(57428),f=e(73214),u=e(71778),l=e(36468),a=e(88258),o=e(52910),c=e(67799),h=e(74083),d=e(92284),v=e(28035),m=e(8754);s.exports={Power0:o,Power1:c.Out,Power2:u.Out,Power3:h.Out,Power4:d.Out,Linear:o,Quad:c.Out,Cubic:u.Out,Quart:h.Out,Quint:d.Out,Sine:v.Out,Expo:a.Out,Circ:f.Out,Elastic:l.Out,Back:n.Out,Bounce:p.Out,Stepped:m,"Quad.easeIn":c.In,"Cubic.easeIn":u.In,"Quart.easeIn":h.In,"Quint.easeIn":d.In,"Sine.easeIn":v.In,"Expo.easeIn":a.In,"Circ.easeIn":f.In,"Elastic.easeIn":l.In,"Back.easeIn":n.In,"Bounce.easeIn":p.In,"Quad.easeOut":c.Out,"Cubic.easeOut":u.Out,"Quart.easeOut":h.Out,"Quint.easeOut":d.Out,"Sine.easeOut":v.Out,"Expo.easeOut":a.Out,"Circ.easeOut":f.Out,"Elastic.easeOut":l.Out,"Back.easeOut":n.Out,"Bounce.easeOut":p.Out,"Quad.easeInOut":c.InOut,"Cubic.easeInOut":u.InOut,"Quart.easeInOut":h.InOut,"Quint.easeInOut":d.InOut,"Sine.easeInOut":v.InOut,"Expo.easeInOut":a.InOut,"Circ.easeInOut":f.InOut,"Elastic.easeInOut":l.InOut,"Back.easeInOut":n.InOut,"Bounce.easeInOut":p.InOut}},25860:s=>{var g=function(e,n){return n===void 0&&(n=1.70158),e*e*((n+1)*e-n)};s.exports=g},45264:s=>{var g=function(e,n){n===void 0&&(n=1.70158);var p=n*1.525;return(e*=2)<1?.5*(e*e*((p+1)*e-p)):.5*((e-=2)*e*((p+1)*e+p)+2)};s.exports=g},36699:s=>{var g=function(e,n){return n===void 0&&(n=1.70158),--e*e*((n+1)*e+n)+1};s.exports=g},25265:(s,g,e)=>{s.exports={In:e(25860),Out:e(36699),InOut:e(45264)}},62191:s=>{var g=function(e){return e=1-e,e<.36363636363636365?1-7.5625*e*e:e<.7272727272727273?1-(7.5625*(e-=.5454545454545454)*e+.75):e<.9090909090909091?1-(7.5625*(e-=.8181818181818182)*e+.9375):1-(7.5625*(e-=.9545454545454546)*e+.984375)};s.exports=g},24799:s=>{var g=function(e){var n=!1;return e<.5?(e=1-e*2,n=!0):e=e*2-1,e<.36363636363636365?e=7.5625*e*e:e<.7272727272727273?e=7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?e=7.5625*(e-=.8181818181818182)*e+.9375:e=7.5625*(e-=.9545454545454546)*e+.984375,n?(1-e)*.5:e*.5+.5};s.exports=g},60819:s=>{var g=function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375};s.exports=g},57428:(s,g,e)=>{s.exports={In:e(62191),Out:e(60819),InOut:e(24799)}},86855:s=>{var g=function(e){return 1-Math.sqrt(1-e*e)};s.exports=g},7280:s=>{var g=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)};s.exports=g},18058:s=>{var g=function(e){return Math.sqrt(1- --e*e)};s.exports=g},73214:(s,g,e)=>{s.exports={In:e(86855),Out:e(18058),InOut:e(7280)}},91532:s=>{var g=function(e){return e*e*e};s.exports=g},63180:s=>{var g=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)};s.exports=g},16518:s=>{var g=function(e){return--e*e*e+1};s.exports=g},71778:(s,g,e)=>{s.exports={In:e(91532),Out:e(16518),InOut:e(63180)}},24729:s=>{var g=function(e,n,p){if(n===void 0&&(n=.1),p===void 0&&(p=.1),e===0)return 0;if(e===1)return 1;var f=p/4;return n<1?n=1:f=p*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(e-=1))*Math.sin((e-f)*(2*Math.PI)/p))};s.exports=g},50325:s=>{var g=function(e,n,p){if(n===void 0&&(n=.1),p===void 0&&(p=.1),e===0)return 0;if(e===1)return 1;var f=p/4;return n<1?n=1:f=p*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?-.5*(n*Math.pow(2,10*(e-=1))*Math.sin((e-f)*(2*Math.PI)/p)):n*Math.pow(2,-10*(e-=1))*Math.sin((e-f)*(2*Math.PI)/p)*.5+1};s.exports=g},84074:s=>{var g=function(e,n,p){if(n===void 0&&(n=.1),p===void 0&&(p=.1),e===0)return 0;if(e===1)return 1;var f=p/4;return n<1?n=1:f=p*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-f)*(2*Math.PI)/p)+1};s.exports=g},36468:(s,g,e)=>{s.exports={In:e(24729),Out:e(84074),InOut:e(50325)}},95638:s=>{var g=function(e){return Math.pow(2,10*(e-1))-.001};s.exports=g},10357:s=>{var g=function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))};s.exports=g},14894:s=>{var g=function(e){return 1-Math.pow(2,-10*e)};s.exports=g},88258:(s,g,e)=>{s.exports={In:e(95638),Out:e(14894),InOut:e(10357)}},33063:(s,g,e)=>{s.exports={Back:e(25265),Bounce:e(57428),Circular:e(73214),Cubic:e(71778),Elastic:e(36468),Expo:e(88258),Linear:e(52910),Quadratic:e(67799),Quartic:e(74083),Quintic:e(92284),Sine:e(28035),Stepped:e(8754)}},43927:s=>{var g=function(e){return e};s.exports=g},52910:(s,g,e)=>{s.exports=e(43927)},77471:s=>{var g=function(e){return e*e};s.exports=g},83863:s=>{var g=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)};s.exports=g},44383:s=>{var g=function(e){return e*(2-e)};s.exports=g},67799:(s,g,e)=>{s.exports={In:e(77471),Out:e(44383),InOut:e(83863)}},48311:s=>{var g=function(e){return e*e*e*e};s.exports=g},55248:s=>{var g=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)};s.exports=g},23135:s=>{var g=function(e){return 1- --e*e*e*e};s.exports=g},74083:(s,g,e)=>{s.exports={In:e(48311),Out:e(23135),InOut:e(55248)}},7313:s=>{var g=function(e){return e*e*e*e*e};s.exports=g},98759:s=>{var g=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)};s.exports=g},26670:s=>{var g=function(e){return--e*e*e*e*e+1};s.exports=g},92284:(s,g,e)=>{s.exports={In:e(7313),Out:e(26670),InOut:e(98759)}},52929:s=>{var g=function(e){return e===0?0:e===1?1:1-Math.cos(e*Math.PI/2)};s.exports=g},66333:s=>{var g=function(e){return e===0?0:e===1?1:.5*(1-Math.cos(Math.PI*e))};s.exports=g},37255:s=>{var g=function(e){return e===0?0:e===1?1:Math.sin(e*Math.PI/2)};s.exports=g},28035:(s,g,e)=>{s.exports={In:e(52929),Out:e(37255),InOut:e(66333)}},52770:s=>{var g=function(e,n){return n===void 0&&(n=1),e<=0?0:e>=1?1:((n*e|0)+1)*(1/n)};s.exports=g},8754:(s,g,e)=>{s.exports=e(52770)},17247:s=>{var g=function(e,n){return n===void 0&&(n=1e-4),Math.ceil(e-n)};s.exports=g},88456:s=>{var g=function(e,n,p){return p===void 0&&(p=1e-4),Math.abs(e-n)<p};s.exports=g},61824:s=>{var g=function(e,n){return n===void 0&&(n=1e-4),Math.floor(e+n)};s.exports=g},41935:s=>{var g=function(e,n,p){return p===void 0&&(p=1e-4),e>n-p};s.exports=g},54726:s=>{var g=function(e,n,p){return p===void 0&&(p=1e-4),e<n+p};s.exports=g},52778:(s,g,e)=>{s.exports={Ceil:e(17247),Equal:e(88456),Floor:e(61824),GreaterThan:e(41935),LessThan:e(54726)}},5923:(s,g,e)=>{var n=e(83392),p=e(98611),f={Angle:e(22153),Distance:e(10130),Easing:e(33063),Fuzzy:e(52778),Interpolation:e(48528),Pow2:e(73773),Snap:e(23679),RandomDataGenerator:e(81429),Average:e(26042),Bernstein:e(22824),Between:e(17489),CatmullRom:e(14976),CeilTo:e(89129),Clamp:e(82897),DegToRad:e(75606),Difference:e(767),Euler:e(9849),Factorial:e(8034),FloatBetween:e(61616),FloorTo:e(60679),FromPercent:e(91806),GetSpeed:e(79366),IsEven:e(43776),IsEvenStrict:e(58442),Linear:e(42798),LinearXY:e(61072),MaxAdd:e(69635),Median:e(37394),MinSub:e(17259),Percent:e(61820),RadToDeg:e(23701),RandomXY:e(16906),RandomXYZ:e(52417),RandomXYZW:e(17915),Rotate:e(52257),RotateAround:e(2386),RotateAroundDistance:e(72395),RotateTo:e(41061),RoundAwayFromZero:e(67233),RoundTo:e(64333),SinCosTableGenerator:e(59533),SmootherStep:e(87736),SmoothStep:e(5514),ToXY:e(55805),TransformXY:e(64462),Within:e(9557),Wrap:e(1071),Vector2:e(93736),Vector3:e(70015),Vector4:e(51729),Matrix3:e(5341),Matrix4:e(16650),Quaternion:e(75003),RotateVec3:e(93709)};f=p(!1,f,n),s.exports=f},63210:(s,g,e)=>{var n=e(22824),p=function(f,u){for(var l=0,a=f.length-1,o=0;o<=a;o++)l+=Math.pow(1-u,a-o)*Math.pow(u,o)*f[o]*n(a,o);return l};s.exports=p},88332:(s,g,e)=>{var n=e(14976),p=function(f,u){var l=f.length-1,a=l*u,o=Math.floor(a);return f[0]===f[l]?(u<0&&(o=Math.floor(a=l*(1+u))),n(a-o,f[(o-1+l)%l],f[o],f[(o+1)%l],f[(o+2)%l])):u<0?f[0]-(n(-a,f[0],f[0],f[1],f[1])-f[0]):u>1?f[l]-(n(a-l,f[l],f[l],f[l-1],f[l-1])-f[l]):n(a-o,f[o?o-1:0],f[o],f[l<o+1?l:o+1],f[l<o+2?l:o+2])};s.exports=p},34631:s=>{function g(u,l){var a=1-u;return a*a*a*l}function e(u,l){var a=1-u;return 3*a*a*u*l}function n(u,l){return 3*(1-u)*u*u*l}function p(u,l){return u*u*u*l}var f=function(u,l,a,o,c){return g(u,l)+e(u,a)+n(u,o)+p(u,c)};s.exports=f},47614:(s,g,e)=>{var n=e(42798),p=function(f,u){var l=f.length-1,a=l*u,o=Math.floor(a);return u<0?n(f[0],f[1],a):u>1?n(f[l],f[l-1],l-a):n(f[o],f[o+1>l?l:o+1],a-o)};s.exports=p},16252:s=>{function g(f,u){var l=1-f;return l*l*u}function e(f,u){return 2*(1-f)*f*u}function n(f,u){return f*f*u}var p=function(f,u,l,a){return g(f,u)+e(f,l)+n(f,a)};s.exports=p},44521:(s,g,e)=>{var n=e(5514),p=function(f,u,l){return u+(l-u)*n(f,0,1)};s.exports=p},45507:(s,g,e)=>{var n=e(87736),p=function(f,u,l){return u+(l-u)*n(f,0,1)};s.exports=p},48528:(s,g,e)=>{s.exports={Bezier:e(63210),CatmullRom:e(88332),CubicBezier:e(34631),Linear:e(47614),QuadraticBezier:e(16252),SmoothStep:e(44521),SmootherStep:e(45507)}},3504:s=>{var g=function(e){var n=Math.log(e)/.6931471805599453;return 1<<Math.ceil(n)};s.exports=g},28621:s=>{var g=function(e,n){return e>0&&(e&e-1)===0&&n>0&&(n&n-1)===0};s.exports=g},2018:s=>{var g=function(e){return e>0&&(e&e-1)===0};s.exports=g},73773:(s,g,e)=>{s.exports={GetNext:e(3504),IsSize:e(28621),IsValue:e(2018)}},81429:(s,g,e)=>{var n=e(56694),p=new n({initialize:function(u){u===void 0&&(u=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],u&&this.init(u)},rnd:function(){var f=2091639*this.s0+this.c*23283064365386963e-26;return this.c=f|0,this.s0=this.s1,this.s1=this.s2,this.s2=f-this.c,this.s2},hash:function(f){var u,l=this.n;f=f.toString();for(var a=0;a<f.length;a++)l+=f.charCodeAt(a),u=.02519603282416938*l,l=u>>>0,u-=l,u*=l,l=u>>>0,u-=l,l+=u*4294967296;return this.n=l,(l>>>0)*23283064365386963e-26},init:function(f){typeof f=="string"?this.state(f):this.sow(f)},sow:function(f){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!f)for(var u=0;u<f.length&&f[u]!=null;u++){var l=f[u];this.s0-=this.hash(l),this.s0+=~~(this.s0<0),this.s1-=this.hash(l),this.s1+=~~(this.s1<0),this.s2-=this.hash(l),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(f,u){return Math.floor(this.realInRange(0,u-f+1)+f)},between:function(f,u){return Math.floor(this.realInRange(0,u-f+1)+f)},realInRange:function(f,u){return this.frac()*(u-f)+f},normal:function(){return 1-2*this.frac()},uuid:function(){var f="",u="";for(u=f="";f++<36;u+=~f%5|f*3&4?(f^15?8^this.frac()*(f^20?16:4):4).toString(16):"-");return u},pick:function(f){return f[this.integerInRange(0,f.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(f){return f[~~(Math.pow(this.frac(),2)*(f.length-1)+.5)]},timestamp:function(f,u){return this.realInRange(f||9466848e5,u||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(f){return typeof f=="string"&&f.match(/^!rnd/)&&(f=f.split(","),this.c=parseFloat(f[1]),this.s0=parseFloat(f[2]),this.s1=parseFloat(f[3]),this.s2=parseFloat(f[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(f){for(var u=f.length-1,l=u;l>0;l--){var a=Math.floor(this.frac()*(l+1)),o=f[a];f[a]=f[l],f[l]=o}return f}});s.exports=p},82127:s=>{var g=function(e,n,p,f){return p===void 0&&(p=0),n===0?e:(e-=p,e=n*Math.ceil(e/n),f?(p+e)/n:p+e)};s.exports=g},84314:s=>{var g=function(e,n,p,f){return p===void 0&&(p=0),n===0?e:(e-=p,e=n*Math.floor(e/n),f?(p+e)/n:p+e)};s.exports=g},88462:s=>{var g=function(e,n,p,f){return p===void 0&&(p=0),n===0?e:(e-=p,e=n*Math.round(e/n),f?(p+e)/n:p+e)};s.exports=g},23679:(s,g,e)=>{s.exports={Ceil:e(82127),Floor:e(84314),To:e(88462)}},92491:(s,g,e)=>{e(75205);var n=e(86459),p=e(98611),f={Actions:e(83979),Animations:e(13517),BlendModes:e(95723),Cache:e(45820),Cameras:e(44143),Core:e(80293),Class:e(56694),Create:e(84106),Curves:e(73962),Data:e(1999),Display:e(24816),DOM:e(3590),Events:e(95146),FX:e(96910),Game:e(15213),GameObjects:e(48013),Geom:e(84068),Input:e(20873),Loader:e(95695),Math:e(5923),Physics:e(53954),Plugins:e(45615),Renderer:e(42069),Scale:e(86754),ScaleModes:e(27394),Scene:e(87157),Scenes:e(20436),Structs:e(20010),Textures:e(87499),Tilemaps:e(52678),Time:e(97121),Tweens:e(75193),Utils:e(22178)};f.Sound=e(56751),f=p(!1,f,n),s.exports=f,e.g.Phaser=f},62832:(s,g,e)=>{var n=e(56694),p=e(7864),f=e(1539),u=new n({Extends:f,Mixins:[p.Acceleration,p.Angular,p.Bounce,p.Debug,p.Drag,p.Enable,p.Friction,p.Gravity,p.Immovable,p.Mass,p.Pushable,p.Size,p.Velocity],initialize:function(a,o,c,h,d){f.call(this,a,o,c,h,d),this.body=null}});s.exports=u},66150:(s,g,e)=>{var n=e(56694),p=e(75606),f=e(53996),u=e(35032),l=e(99523),a=e(72632),o=e(30657),c=e(2732),h=e(15147),d=e(91963),v=e(7599),m=e(93736),y=e(85233),C=new n({initialize:function(P){this.scene=P,this.systems=P.sys,this.config=this.getConfig(),this.world,this.add,P.sys.events.once(v.BOOT,this.boot,this),P.sys.events.on(v.START,this.start,this)},boot:function(){this.world=new y(this.scene,this.config),this.add=new l(this.world),this.systems.events.once(v.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new y(this.scene,this.config),this.add=new l(this.world));var T=this.systems.events;a(this.config,"customUpdate",!1)||T.on(v.UPDATE,this.world.update,this.world),T.on(v.POST_UPDATE,this.world.postUpdate,this.world),T.once(v.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(v.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(v.UPDATE,this.world.update,this.world)},getConfig:function(){var T=this.systems.game.config.physics,P=this.systems.settings.physics,S=o(a(P,"arcade",{}),a(T,"arcade",{}));return S},overlap:function(T,P,S,M,E){return S===void 0&&(S=null),M===void 0&&(M=null),E===void 0&&(E=S),this.world.collideObjects(T,P,S,M,E,!0)},collide:function(T,P,S,M,E){return S===void 0&&(S=null),M===void 0&&(M=null),E===void 0&&(E=S),this.world.collideObjects(T,P,S,M,E,!1)},collideTiles:function(T,P,S,M,E){return this.world.collideTiles(T,P,S,M,E)},overlapTiles:function(T,P,S,M,E){return this.world.overlapTiles(T,P,S,M,E)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(T,P,S,M,E,A){M===void 0&&(M=60);var R=Math.atan2(S-T.y,P-T.x);return T.body.acceleration.setToPolar(R,M),E!==void 0&&A!==void 0&&T.body.maxVelocity.set(E,A),R},accelerateToObject:function(T,P,S,M,E){return this.accelerateTo(T,P.x,P.y,S,M,E)},closest:function(T,P){P||(P=this.world.bodies.entries);for(var S=Number.MAX_VALUE,M=null,E=T.x,A=T.y,R=P.length,w=0;w<R;w++){var O=P[w],F=O.body||O;if(!(T===O||T===F||T===F.gameObject||T===F.center)){var b=u(E,A,F.center.x,F.center.y);b<S&&(M=O,S=b)}}return M},furthest:function(T,P){P||(P=this.world.bodies.entries);for(var S=-1,M=null,E=T.x,A=T.y,R=P.length,w=0;w<R;w++){var O=P[w],F=O.body||O;if(!(T===O||T===F||T===F.gameObject||T===F.center)){var b=u(E,A,F.center.x,F.center.y);b>S&&(M=O,S=b)}}return M},moveTo:function(T,P,S,M,E){M===void 0&&(M=60),E===void 0&&(E=0);var A=Math.atan2(S-T.y,P-T.x);return E>0&&(M=f(T.x,T.y,P,S)/(E/1e3)),T.body.velocity.setToPolar(A,M),A},moveToObject:function(T,P,S,M){return this.moveTo(T,P.x,P.y,S,M)},velocityFromAngle:function(T,P,S){return P===void 0&&(P=60),S===void 0&&(S=new m),S.setToPolar(p(T),P)},velocityFromRotation:function(T,P,S){return P===void 0&&(P=60),S===void 0&&(S=new m),S.setToPolar(T,P)},overlapRect:function(T,P,S,M,E,A){return h(this.world,T,P,S,M,E,A)},overlapCirc:function(T,P,S,M,E){return c(this.world,T,P,S,M,E)},shutdown:function(){if(!!this.world){var T=this.systems.events;T.off(v.UPDATE,this.world.update,this.world),T.off(v.POST_UPDATE,this.world.postUpdate,this.world),T.off(v.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(v.START,this.start,this),this.scene=null,this.systems=null}});d.register("ArcadePhysics",C,"arcadePhysics"),s.exports=C},25084:(s,g,e)=>{var n=e(56694),p=e(7864),f=e(13747),u=new n({Extends:f,Mixins:[p.Acceleration,p.Angular,p.Bounce,p.Debug,p.Drag,p.Enable,p.Friction,p.Gravity,p.Immovable,p.Mass,p.Pushable,p.Size,p.Velocity],initialize:function(a,o,c,h,d){f.call(this,a,o,c,h,d),this.body=null}});s.exports=u},97602:(s,g,e)=>{var n=e(56694),p=e(47401),f=e(27037),u=e(23701),l=e(74118),a=e(94287),o=e(93736),c=new n({initialize:function(d,v){var m=64,y=64,C={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},T=v!==void 0;T&&v.displayWidth&&(m=v.displayWidth,y=v.displayHeight),T||(v=C),this.world=d,this.gameObject=T?v:void 0,this.isBody=!0,this.transform={x:v.x,y:v.y,rotation:v.angle,scaleX:v.scaleX,scaleY:v.scaleY,displayOriginX:v.displayOriginX,displayOriginY:v.displayOriginY},this.debugShowBody=d.defaults.debugShowBody,this.debugShowVelocity=d.defaults.debugShowVelocity,this.debugBodyColor=d.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new o,this.position=new o(v.x-v.scaleX*v.displayOriginX,v.y-v.scaleY*v.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=v.angle,this.preRotation=v.angle,this.width=m,this.height=y,this.sourceWidth=m,this.sourceHeight=y,v.frame&&(this.sourceWidth=v.frame.realWidth,this.sourceHeight=v.frame.realHeight),this.halfWidth=Math.abs(m/2),this.halfHeight=Math.abs(y/2),this.center=new o(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new o,this.newVelocity=new o,this.deltaMax=new o,this.acceleration=new o,this.allowDrag=!0,this.drag=new o,this.allowGravity=!0,this.gravity=new o,this.bounce=new o,this.worldBounce=null,this.customBoundsRectangle=d.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new o(1e4,1e4),this.maxSpeed=-1,this.friction=new o(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=p.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=p.DYNAMIC_BODY,this._sx=v.scaleX,this._sy=v.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new l},updateBounds:function(){var h=this.gameObject,d=this.transform;if(h.parentContainer){var v=h.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);d.x=v.tx,d.y=v.ty,d.rotation=u(v.rotation),d.scaleX=v.scaleX,d.scaleY=v.scaleY,d.displayOriginX=h.displayOriginX,d.displayOriginY=h.displayOriginY}else d.x=h.x,d.y=h.y,d.rotation=h.angle,d.scaleX=h.scaleX,d.scaleY=h.scaleY,d.displayOriginX=h.displayOriginX,d.displayOriginY=h.displayOriginY;var m=!1;if(this.syncBounds){var y=h.getBounds(this._bounds);this.width=y.width,this.height=y.height,m=!0}else{var C=Math.abs(d.scaleX),T=Math.abs(d.scaleY);(this._sx!==C||this._sy!==T)&&(this.width=this.sourceWidth*C,this.height=this.sourceHeight*T,this._sx=C,this._sy=T,m=!0)}m&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var h=this.transform;this.position.x=h.x+h.scaleX*(this.offset.x-h.displayOriginX),this.position.y=h.y+h.scaleY*(this.offset.y-h.displayOriginY),this.updateCenter()},resetFlags:function(h){h===void 0&&(h=!1);var d=this.wasTouching,v=this.touching,m=this.blocked;h?(d.none=!0,d.up=!1,d.down=!1,d.left=!1,d.right=!1):(d.none=v.none,d.up=v.up,d.down=v.down,d.left=v.left,d.right=v.right),v.none=!0,v.up=!1,v.down=!1,v.left=!1,v.right=!1,m.none=!0,m.up=!1,m.down=!1,m.left=!1,m.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(h,d){h&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),h&&this.update(d)},update:function(h){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,h);var d=this.velocity.x,v=this.velocity.y;this.newVelocity.set(d*h,v*h),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(v,d),this.speed=Math.sqrt(d*d+v*v),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(f.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var h=this.position.x-this.prevFrame.x,d=this.position.y-this.prevFrame.y,v=this.gameObject;if(this.moves){var m=this.deltaMax.x,y=this.deltaMax.y;m!==0&&h!==0&&(h<0&&h<-m?h=-m:h>0&&h>m&&(h=m)),y!==0&&d!==0&&(d<0&&d<-y?d=-y:d>0&&d>y&&(d=y)),v&&(v.x+=h,v.y+=d)}h<0?this.facing=p.FACING_LEFT:h>0&&(this.facing=p.FACING_RIGHT),d<0?this.facing=p.FACING_UP:d>0&&(this.facing=p.FACING_DOWN),this.allowRotation&&v&&(v.angle+=this.deltaZ()),this._tx=h,this._ty=d},setBoundsRectangle:function(h){return this.customBoundsRectangle=h||this.world.bounds,this},checkWorldBounds:function(){var h=this.position,d=this.customBoundsRectangle,v=this.world.checkCollision,m=this.worldBounce?-this.worldBounce.x:-this.bounce.x,y=this.worldBounce?-this.worldBounce.y:-this.bounce.y,C=!1;return h.x<d.x&&v.left?(h.x=d.x,this.velocity.x*=m,this.blocked.left=!0,C=!0):this.right>d.right&&v.right&&(h.x=d.right-this.width,this.velocity.x*=m,this.blocked.right=!0,C=!0),h.y<d.y&&v.up?(h.y=d.y,this.velocity.y*=y,this.blocked.up=!0,C=!0):this.bottom>d.bottom&&v.down&&(h.y=d.bottom-this.height,this.velocity.y*=y,this.blocked.down=!0,C=!0),C&&(this.blocked.none=!1,this.updateCenter()),C},setOffset:function(h,d){return d===void 0&&(d=h),this.offset.set(h,d),this},setGameObject:function(h,d){return d===void 0&&(d=!0),this.world.remove(this),this.gameObject&&this.gameObject.body&&(this.gameObject.body=null),this.gameObject=h,h.body&&(h.body=this),this.setSize(),this.world.add(this),this.enable=d,this},setSize:function(h,d,v){v===void 0&&(v=!0);var m=this.gameObject;if(m&&(!h&&m.frame&&(h=m.frame.realWidth),!d&&m.frame&&(d=m.frame.realHeight)),this.sourceWidth=h,this.sourceHeight=d,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),v&&m&&m.getCenter){var y=(m.width-h)/2,C=(m.height-d)/2;this.offset.set(y,C)}return this.isCircle=!1,this.radius=0,this},setCircle:function(h,d,v){return d===void 0&&(d=this.offset.x),v===void 0&&(v=this.offset.y),h>0?(this.isCircle=!0,this.radius=h,this.sourceWidth=h*2,this.sourceHeight=h*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(d,v),this.updateCenter()):this.isCircle=!1,this},reset:function(h,d){this.stop();var v=this.gameObject;v&&(v.setPosition(h,d),this.rotation=v.angle,this.preRotation=v.angle);var m=this.position;v&&v.getTopLeft?v.getTopLeft(m):m.set(h,d),this.prev.copy(m),this.prevFrame.copy(m),v&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(h){return h.x=this.x,h.y=this.y,h.right=this.right,h.bottom=this.bottom,h},hitTest:function(h,d){if(!this.isCircle)return a(this,h,d);if(this.radius>0&&h>=this.left&&h<=this.right&&d>=this.top&&d<=this.bottom){var v=(this.center.x-h)*(this.center.x-h),m=(this.center.y-d)*(this.center.y-d);return v+m<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(h){var d=this.position,v=d.x+this.halfWidth,m=d.y+this.halfHeight;this.debugShowBody&&(h.lineStyle(h.defaultStrokeWidth,this.debugBodyColor),this.isCircle?h.strokeCircle(v,m,this.width/2):(this.checkCollision.up&&h.lineBetween(d.x,d.y,d.x+this.width,d.y),this.checkCollision.right&&h.lineBetween(d.x+this.width,d.y,d.x+this.width,d.y+this.height),this.checkCollision.down&&h.lineBetween(d.x,d.y+this.height,d.x+this.width,d.y+this.height),this.checkCollision.left&&h.lineBetween(d.x,d.y,d.x,d.y+this.height))),this.debugShowVelocity&&(h.lineStyle(h.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),h.lineBetween(v,m,v+this.velocity.x/2,m+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(h,d,v,m){h===void 0&&(h=!0),this.collideWorldBounds=h;var y=d!==void 0,C=v!==void 0;return(y||C)&&(this.worldBounce||(this.worldBounce=new o),y&&(this.worldBounce.x=d),C&&(this.worldBounce.y=v)),m!==void 0&&(this.onWorldBounds=m),this},setVelocity:function(h,d){return this.velocity.set(h,d),h=this.velocity.x,d=this.velocity.y,this.speed=Math.sqrt(h*h+d*d),this},setVelocityX:function(h){return this.setVelocity(h,this.velocity.y)},setVelocityY:function(h){return this.setVelocity(this.velocity.x,h)},setMaxVelocity:function(h,d){return this.maxVelocity.set(h,d),this},setMaxVelocityX:function(h){return this.maxVelocity.x=h,this},setMaxVelocityY:function(h){return this.maxVelocity.y=h,this},setMaxSpeed:function(h){return this.maxSpeed=h,this},setBounce:function(h,d){return this.bounce.set(h,d),this},setBounceX:function(h){return this.bounce.x=h,this},setBounceY:function(h){return this.bounce.y=h,this},setAcceleration:function(h,d){return this.acceleration.set(h,d),this},setAccelerationX:function(h){return this.acceleration.x=h,this},setAccelerationY:function(h){return this.acceleration.y=h,this},setAllowDrag:function(h){return h===void 0&&(h=!0),this.allowDrag=h,this},setAllowGravity:function(h){return h===void 0&&(h=!0),this.allowGravity=h,this},setAllowRotation:function(h){return h===void 0&&(h=!0),this.allowRotation=h,this},setDrag:function(h,d){return this.drag.set(h,d),this},setDamping:function(h){return this.useDamping=h,this},setDragX:function(h){return this.drag.x=h,this},setDragY:function(h){return this.drag.y=h,this},setGravity:function(h,d){return this.gravity.set(h,d),this},setGravityX:function(h){return this.gravity.x=h,this},setGravityY:function(h){return this.gravity.y=h,this},setFriction:function(h,d){return this.friction.set(h,d),this},setFrictionX:function(h){return this.friction.x=h,this},setFrictionY:function(h){return this.friction.y=h,this},setAngularVelocity:function(h){return this.angularVelocity=h,this},setAngularAcceleration:function(h){return this.angularAcceleration=h,this},setAngularDrag:function(h){return this.angularDrag=h,this},setMass:function(h){return this.mass=h,this},setImmovable:function(h){return h===void 0&&(h=!0),this.immovable=h,this},setEnable:function(h){return h===void 0&&(h=!0),this.enable=h,this},processX:function(h,d,v,m){this.x+=h,this.updateCenter(),d!==null&&(this.velocity.x=d);var y=this.blocked;v&&(y.left=!0,y.none=!1),m&&(y.right=!0,y.none=!1)},processY:function(h,d,v,m){this.y+=h,this.updateCenter(),d!==null&&(this.velocity.y=d);var y=this.blocked;v&&(y.up=!0,y.none=!1),m&&(y.down=!0,y.none=!1)},x:{get:function(){return this.position.x},set:function(h){this.position.x=h}},y:{get:function(){return this.position.y},set:function(h){this.position.y=h}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});s.exports=c},3909:(s,g,e)=>{var n=e(56694),p=new n({initialize:function(u,l,a,o,c,h,d){this.world=u,this.name="",this.active=!0,this.overlapOnly=l,this.object1=a,this.object2=o,this.collideCallback=c,this.processCallback=h,this.callbackContext=d},setName:function(f){return this.name=f,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});s.exports=p},99523:(s,g,e)=>{var n=e(62832),p=e(25084),f=e(97602),u=e(56694),l=e(47401),a=e(10481),o=e(66634),c=e(46346),h=new u({initialize:function(v){this.world=v,this.scene=v.scene,this.sys=v.scene.sys},collider:function(d,v,m,y,C){return this.world.addCollider(d,v,m,y,C)},overlap:function(d,v,m,y,C){return this.world.addOverlap(d,v,m,y,C)},existing:function(d,v){var m=v?l.STATIC_BODY:l.DYNAMIC_BODY;return this.world.enableBody(d,m),d},staticImage:function(d,v,m,y){var C=new n(this.scene,d,v,m,y);return this.sys.displayList.add(C),this.world.enableBody(C,l.STATIC_BODY),C},image:function(d,v,m,y){var C=new n(this.scene,d,v,m,y);return this.sys.displayList.add(C),this.world.enableBody(C,l.DYNAMIC_BODY),C},staticSprite:function(d,v,m,y){var C=new p(this.scene,d,v,m,y);return this.sys.displayList.add(C),this.sys.updateList.add(C),this.world.enableBody(C,l.STATIC_BODY),C},sprite:function(d,v,m,y){var C=new p(this.scene,d,v,m,y);return this.sys.displayList.add(C),this.sys.updateList.add(C),this.world.enableBody(C,l.DYNAMIC_BODY),C},staticGroup:function(d,v){return this.sys.updateList.add(new c(this.world,this.world.scene,d,v))},group:function(d,v){return this.sys.updateList.add(new a(this.world,this.world.scene,d,v))},body:function(d,v,m,y){var C=new f(this.world);return C.position.set(d,v),m&&y&&C.setSize(m,y),this.world.add(C,l.DYNAMIC_BODY),C},staticBody:function(d,v,m,y){var C=new o(this.world);return C.position.set(d,v),m&&y&&C.setSize(m,y),this.world.add(C,l.STATIC_BODY),C},destroy:function(){this.world=null,this.scene=null,this.sys=null}});s.exports=h},75671:(s,g,e)=>{var n=e(47401),p=function(f,u,l,a){var o=0,c=f.deltaAbsX()+u.deltaAbsX()+a;return f._dx===0&&u._dx===0?(f.embedded=!0,u.embedded=!0):f._dx>u._dx?(o=f.right-u.x,o>c&&!l||f.checkCollision.right===!1||u.checkCollision.left===!1?o=0:(f.touching.none=!1,f.touching.right=!0,u.touching.none=!1,u.touching.left=!0,u.physicsType===n.STATIC_BODY&&!l&&(f.blocked.none=!1,f.blocked.right=!0),f.physicsType===n.STATIC_BODY&&!l&&(u.blocked.none=!1,u.blocked.left=!0))):f._dx<u._dx&&(o=f.x-u.width-u.x,-o>c&&!l||f.checkCollision.left===!1||u.checkCollision.right===!1?o=0:(f.touching.none=!1,f.touching.left=!0,u.touching.none=!1,u.touching.right=!0,u.physicsType===n.STATIC_BODY&&!l&&(f.blocked.none=!1,f.blocked.left=!0),f.physicsType===n.STATIC_BODY&&!l&&(u.blocked.none=!1,u.blocked.right=!0))),f.overlapX=o,u.overlapX=o,o};s.exports=p},66185:(s,g,e)=>{var n=e(47401),p=function(f,u,l,a){var o=0,c=f.deltaAbsY()+u.deltaAbsY()+a;return f._dy===0&&u._dy===0?(f.embedded=!0,u.embedded=!0):f._dy>u._dy?(o=f.bottom-u.y,o>c&&!l||f.checkCollision.down===!1||u.checkCollision.up===!1?o=0:(f.touching.none=!1,f.touching.down=!0,u.touching.none=!1,u.touching.up=!0,u.physicsType===n.STATIC_BODY&&!l&&(f.blocked.none=!1,f.blocked.down=!0),f.physicsType===n.STATIC_BODY&&!l&&(u.blocked.none=!1,u.blocked.up=!0))):f._dy<u._dy&&(o=f.y-u.bottom,-o>c&&!l||f.checkCollision.up===!1||u.checkCollision.down===!1?o=0:(f.touching.none=!1,f.touching.up=!0,u.touching.none=!1,u.touching.down=!0,u.physicsType===n.STATIC_BODY&&!l&&(f.blocked.none=!1,f.blocked.up=!0),f.physicsType===n.STATIC_BODY&&!l&&(u.blocked.none=!1,u.blocked.down=!0))),f.overlapY=o,u.overlapY=o,o};s.exports=p},10481:(s,g,e)=>{var n=e(25084),p=e(56694),f=e(47401),u=e(72632),l=e(59192),a=e(42911),o=new p({Extends:l,initialize:function(h,d,v,m){if(!v&&!m)m={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(a(v))m=v,v=null,m.internalCreateCallback=this.createCallbackHandler,m.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(v)&&a(v[0])){m=v[0];var y=this;v.forEach(function(C){C.internalCreateCallback=y.createCallbackHandler,C.internalRemoveCallback=y.removeCallbackHandler}),v=null}else m={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=h,m.classType=u(m,"classType",n),this.physicsType=f.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:u(m,"collideWorldBounds",!1),setBoundsRectangle:u(m,"customBoundsRectangle",null),setAccelerationX:u(m,"accelerationX",0),setAccelerationY:u(m,"accelerationY",0),setAllowDrag:u(m,"allowDrag",!0),setAllowGravity:u(m,"allowGravity",!0),setAllowRotation:u(m,"allowRotation",!0),setDamping:u(m,"useDamping",!1),setBounceX:u(m,"bounceX",0),setBounceY:u(m,"bounceY",0),setDragX:u(m,"dragX",0),setDragY:u(m,"dragY",0),setEnable:u(m,"enable",!0),setGravityX:u(m,"gravityX",0),setGravityY:u(m,"gravityY",0),setFrictionX:u(m,"frictionX",0),setFrictionY:u(m,"frictionY",0),setMaxSpeed:u(m,"maxSpeed",-1),setMaxVelocityX:u(m,"maxVelocityX",1e4),setMaxVelocityY:u(m,"maxVelocityY",1e4),setVelocityX:u(m,"velocityX",0),setVelocityY:u(m,"velocityY",0),setAngularVelocity:u(m,"angularVelocity",0),setAngularAcceleration:u(m,"angularAcceleration",0),setAngularDrag:u(m,"angularDrag",0),setMass:u(m,"mass",1),setImmovable:u(m,"immovable",!1)},l.call(this,d,v,m),this.type="PhysicsGroup"},createCallbackHandler:function(c){c.body||this.world.enableBody(c,f.DYNAMIC_BODY);var h=c.body;for(var d in this.defaults)h[d](this.defaults[d])},removeCallbackHandler:function(c){c.body&&this.world.disableBody(c)},setVelocity:function(c,h,d){d===void 0&&(d=0);for(var v=this.getChildren(),m=0;m<v.length;m++)v[m].body.velocity.set(c+m*d,h+m*d);return this},setVelocityX:function(c,h){h===void 0&&(h=0);for(var d=this.getChildren(),v=0;v<d.length;v++)d[v].body.velocity.x=c+v*h;return this},setVelocityY:function(c,h){h===void 0&&(h=0);for(var d=this.getChildren(),v=0;v<d.length;v++)d[v].body.velocity.y=c+v*h;return this}});s.exports=o},22916:s=>{var g,e,n,p,f,u,l,a,o,c,h,d,v,m,y,C,T,P=function(w,O,F){g=w,e=O;var b=g.velocity.x,I=e.velocity.x;return n=g.pushable,o=g._dx<0,c=g._dx>0,h=g._dx===0,y=Math.abs(g.right-e.x)<=Math.abs(e.right-g.x),l=I-b*g.bounce.x,p=e.pushable,d=e._dx<0,v=e._dx>0,m=e._dx===0,C=!y,a=b-I*e.bounce.x,T=Math.abs(F),S()},S=function(){return c&&y&&e.blocked.right?(g.processX(-T,l,!1,!0),1):o&&C&&e.blocked.left?(g.processX(T,l,!0),1):v&&C&&g.blocked.right?(e.processX(-T,a,!1,!0),2):d&&y&&g.blocked.left?(e.processX(T,a,!0),2):0},M=function(){var w=g.velocity.x,O=e.velocity.x,F=Math.sqrt(O*O*e.mass/g.mass)*(O>0?1:-1),b=Math.sqrt(w*w*g.mass/e.mass)*(w>0?1:-1),I=(F+b)*.5;return F-=I,b-=I,f=I+F*g.bounce.x,u=I+b*e.bounce.x,o&&C?E(0):d&&y?E(1):c&&y?E(2):v&&C?E(3):!1},E=function(w){if(n&&p)T*=.5,w===0||w===3?(g.processX(T,f),e.processX(-T,u)):(g.processX(-T,f),e.processX(T,u));else if(n&&!p)w===0||w===3?g.processX(T,l,!0):g.processX(-T,l,!1,!0);else if(!n&&p)w===0||w===3?e.processX(-T,a,!1,!0):e.processX(T,a,!0);else{var O=T*.5;w===0?m?(g.processX(T,0,!0),e.processX(0,null,!1,!0)):v?(g.processX(O,0,!0),e.processX(-O,0,!1,!0)):(g.processX(O,e.velocity.x,!0),e.processX(-O,null,!1,!0)):w===1?h?(g.processX(0,null,!1,!0),e.processX(T,0,!0)):c?(g.processX(-O,0,!1,!0),e.processX(O,0,!0)):(g.processX(-O,null,!1,!0),e.processX(O,g.velocity.x,!0)):w===2?m?(g.processX(-T,0,!1,!0),e.processX(0,null,!0)):d?(g.processX(-O,0,!1,!0),e.processX(O,0,!0)):(g.processX(-O,e.velocity.x,!1,!0),e.processX(O,null,!0)):w===3&&(h?(g.processX(0,null,!0),e.processX(-T,0,!1,!0)):o?(g.processX(O,0,!0),e.processX(-O,0,!1,!0)):(g.processX(O,e.velocity.y,!0),e.processX(-O,null,!1,!0)))}return!0},A=function(w){w===1?e.velocity.x=0:y?e.processX(T,a,!0):e.processX(-T,a,!1,!0),g.moves&&(e.y+=(g.y-g.prev.y)*g.friction.y,e._dy=e.y-e.prev.y)},R=function(w){w===2?g.velocity.x=0:C?g.processX(T,l,!0):g.processX(-T,l,!1,!0),e.moves&&(g.y+=(e.y-e.prev.y)*e.friction.y,g._dy=g.y-g.prev.y)};s.exports={BlockCheck:S,Check:M,Set:P,Run:E,RunImmovableBody1:A,RunImmovableBody2:R}},67050:s=>{var g,e,n,p,f,u,l,a,o,c,h,d,v,m,y,C,T,P=function(w,O,F){g=w,e=O;var b=g.velocity.y,I=e.velocity.y;return n=g.pushable,o=g._dy<0,c=g._dy>0,h=g._dy===0,y=Math.abs(g.bottom-e.y)<=Math.abs(e.bottom-g.y),l=I-b*g.bounce.y,p=e.pushable,d=e._dy<0,v=e._dy>0,m=e._dy===0,C=!y,a=b-I*e.bounce.y,T=Math.abs(F),S()},S=function(){return c&&y&&e.blocked.down?(g.processY(-T,l,!1,!0),1):o&&C&&e.blocked.up?(g.processY(T,l,!0),1):v&&C&&g.blocked.down?(e.processY(-T,a,!1,!0),2):d&&y&&g.blocked.up?(e.processY(T,a,!0),2):0},M=function(){var w=g.velocity.y,O=e.velocity.y,F=Math.sqrt(O*O*e.mass/g.mass)*(O>0?1:-1),b=Math.sqrt(w*w*g.mass/e.mass)*(w>0?1:-1),I=(F+b)*.5;return F-=I,b-=I,f=I+F*g.bounce.y,u=I+b*e.bounce.y,o&&C?E(0):d&&y?E(1):c&&y?E(2):v&&C?E(3):!1},E=function(w){if(n&&p)T*=.5,w===0||w===3?(g.processY(T,f),e.processY(-T,u)):(g.processY(-T,f),e.processY(T,u));else if(n&&!p)w===0||w===3?g.processY(T,l,!0):g.processY(-T,l,!1,!0);else if(!n&&p)w===0||w===3?e.processY(-T,a,!1,!0):e.processY(T,a,!0);else{var O=T*.5;w===0?m?(g.processY(T,0,!0),e.processY(0,null,!1,!0)):v?(g.processY(O,0,!0),e.processY(-O,0,!1,!0)):(g.processY(O,e.velocity.y,!0),e.processY(-O,null,!1,!0)):w===1?h?(g.processY(0,null,!1,!0),e.processY(T,0,!0)):c?(g.processY(-O,0,!1,!0),e.processY(O,0,!0)):(g.processY(-O,null,!1,!0),e.processY(O,g.velocity.y,!0)):w===2?m?(g.processY(-T,0,!1,!0),e.processY(0,null,!0)):d?(g.processY(-O,0,!1,!0),e.processY(O,0,!0)):(g.processY(-O,e.velocity.y,!1,!0),e.processY(O,null,!0)):w===3&&(h?(g.processY(0,null,!0),e.processY(-T,0,!1,!0)):o?(g.processY(O,0,!0),e.processY(-O,0,!1,!0)):(g.processY(O,e.velocity.y,!0),e.processY(-O,null,!1,!0)))}return!0},A=function(w){w===1?e.velocity.y=0:y?e.processY(T,a,!0):e.processY(-T,a,!1,!0),g.moves&&(e.x+=(g.x-g.prev.x)*g.friction.x,e._dx=e.x-e.prev.x)},R=function(w){w===2?g.velocity.y=0:C?g.processY(T,l,!0):g.processY(-T,l,!1,!0),e.moves&&(g.x+=(e.x-e.prev.x)*e.friction.x,g._dx=g.x-g.prev.x)};s.exports={BlockCheck:S,Check:M,Set:P,Run:E,RunImmovableBody1:A,RunImmovableBody2:R}},61777:(s,g,e)=>{var n=e(75671),p=e(22916),f=function(u,l,a,o,c){c===void 0&&(c=n(u,l,a,o));var h=u.immovable,d=l.immovable;if(a||c===0||h&&d||u.customSeparateX||l.customSeparateX)return c!==0||u.embedded&&l.embedded;var v=p.Set(u,l,c);return!h&&!d?v>0?!0:p.Check():(h?p.RunImmovableBody1(v):d&&p.RunImmovableBody2(v),!0)};s.exports=f},25299:(s,g,e)=>{var n=e(66185),p=e(67050),f=function(u,l,a,o,c){c===void 0&&(c=n(u,l,a,o));var h=u.immovable,d=l.immovable;if(a||c===0||h&&d||u.customSeparateY||l.customSeparateY)return c!==0||u.embedded&&l.embedded;var v=p.Set(u,l,c);return!h&&!d?v>0?!0:p.Check():(h?p.RunImmovableBody1(v):d&&p.RunImmovableBody2(v),!0)};s.exports=f},66634:(s,g,e)=>{var n=e(65650),p=e(56694),f=e(47401),u=e(94287),l=e(93736),a=new p({initialize:function(c,h){var d=64,v=64,m={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},y=h!==void 0;y&&h.displayWidth&&(d=h.displayWidth,v=h.displayHeight),y||(h=m),this.world=c,this.gameObject=y?h:void 0,this.isBody=!0,this.debugShowBody=c.defaults.debugShowStaticBody,this.debugBodyColor=c.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new l,this.position=new l(h.x-d*h.originX,h.y-v*h.originY),this.width=d,this.height=v,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new l(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=l.ZERO,this.allowGravity=!1,this.gravity=l.ZERO,this.bounce=l.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=f.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(o,c){return o&&o!==this.gameObject&&(this.gameObject.body=null,o.body=this,this.gameObject=o),c&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var o=this.gameObject;return o.getTopLeft(this.position),this.width=o.displayWidth,this.height=o.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(o,c){return c===void 0&&(c=o),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(o,c),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(o,c,h){h===void 0&&(h=!0);var d=this.gameObject;if(!o&&d.frame&&(o=d.frame.realWidth),!c&&d.frame&&(c=d.frame.realHeight),this.world.staticTree.remove(this),this.width=o,this.height=c,this.halfWidth=Math.floor(o/2),this.halfHeight=Math.floor(c/2),h&&d.getCenter){var v=d.displayWidth/2,m=d.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(v-this.halfWidth,m-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(o,c,h){return c===void 0&&(c=this.offset.x),h===void 0&&(h=this.offset.y),o>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=o,this.width=o*2,this.height=o*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(c,h),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(o,c){var h=this.gameObject;o===void 0&&(o=h.x),c===void 0&&(c=h.y),this.world.staticTree.remove(this),h.setPosition(o,c),h.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(o){return o.x=this.x,o.y=this.y,o.right=this.right,o.bottom=this.bottom,o},hitTest:function(o,c){return this.isCircle?n(this,o,c):u(this,o,c)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(o){var c=this.position,h=c.x+this.halfWidth,d=c.y+this.halfHeight;this.debugShowBody&&(o.lineStyle(o.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?o.strokeCircle(h,d,this.width/2):o.strokeRect(c.x,c.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(o){return o<=0&&(o=.1),this.mass=o,this},x:{get:function(){return this.position.x},set:function(o){this.world.staticTree.remove(this),this.position.x=o,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(o){this.world.staticTree.remove(this),this.position.y=o,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});s.exports=a},46346:(s,g,e)=>{var n=e(25084),p=e(56694),f=e(47401),u=e(72632),l=e(59192),a=e(42911),o=new p({Extends:l,initialize:function(h,d,v,m){!v&&!m?m={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:n}:a(v)?(m=v,v=null,m.internalCreateCallback=this.createCallbackHandler,m.internalRemoveCallback=this.removeCallbackHandler,m.createMultipleCallback=this.createMultipleCallbackHandler,m.classType=u(m,"classType",n)):Array.isArray(v)&&a(v[0])?(m=v,v=null,m.forEach(function(y){y.internalCreateCallback=this.createCallbackHandler,y.internalRemoveCallback=this.removeCallbackHandler,y.createMultipleCallback=this.createMultipleCallbackHandler,y.classType=u(y,"classType",n)})):m={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=h,this.physicsType=f.STATIC_BODY,l.call(this,d,v,m),this.type="StaticPhysicsGroup"},createCallbackHandler:function(c){c.body||this.world.enableBody(c,f.STATIC_BODY)},removeCallbackHandler:function(c){c.body&&this.world.disableBody(c)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var c=this.children.entries,h=0;h<c.length;h++)c[h].body.reset();return this}});s.exports=o},85233:(s,g,e)=>{var n=e(94240),p=e(97602),f=e(82897),u=e(56694),l=e(3909),a=e(47401),o=e(53996),c=e(92951),h=e(6659),d=e(27037),v=e(88456),m=e(41935),y=e(54726),C=e(75671),T=e(66185),P=e(44662),S=e(10850),M=e(83392),E=e(74623),A=e(25163),R=e(74118),w=e(68687),O=e(27354),F=e(61777),b=e(25299),I=e(58403),N=e(66634),z=e(28808),U=e(69360),W=e(93736),D=e(1071),V=new u({Extends:h,initialize:function(B,G){h.call(this),this.scene=B,this.bodies=new I,this.staticBodies=new I,this.pendingDestroy=new I,this.colliders=new E,this.gravity=new W(S(G,"gravity.x",0),S(G,"gravity.y",0)),this.bounds=new R(S(G,"x",0),S(G,"y",0),S(G,"width",B.sys.scale.width),S(G,"height",B.sys.scale.height)),this.checkCollision={up:S(G,"checkCollision.up",!0),down:S(G,"checkCollision.down",!0),left:S(G,"checkCollision.left",!0),right:S(G,"checkCollision.right",!0)},this.fps=S(G,"fps",60),this.fixedStep=S(G,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=S(G,"timeScale",1),this.OVERLAP_BIAS=S(G,"overlapBias",4),this.TILE_BIAS=S(G,"tileBias",16),this.forceX=S(G,"forceX",!1),this.isPaused=S(G,"isPaused",!1),this._total=0,this.drawDebug=S(G,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:S(G,"debugShowBody",!0),debugShowStaticBody:S(G,"debugShowStaticBody",!0),debugShowVelocity:S(G,"debugShowVelocity",!0),bodyDebugColor:S(G,"debugBodyColor",16711935),staticBodyDebugColor:S(G,"debugStaticBodyColor",255),velocityDebugColor:S(G,"debugVelocityColor",65280)},this.maxEntries=S(G,"maxEntries",16),this.useTree=S(G,"useTree",!0),this.tree=new w(this.maxEntries),this.staticTree=new w(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new U,this._tempMatrix2=new U,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(L,B){B===void 0&&(B=a.DYNAMIC_BODY),Array.isArray(L)||(L=[L]);for(var G=0;G<L.length;G++){var Y=L[G];if(Y.isParent)for(var X=Y.getChildren(),k=0;k<X.length;k++){var H=X[k];H.isParent?this.enable(H,B):this.enableBody(H,B)}else this.enableBody(Y,B)}},enableBody:function(L,B){return B===void 0&&(B=a.DYNAMIC_BODY),L.hasTransformComponent&&(L.body||(B===a.DYNAMIC_BODY?L.body=new p(this,L):B===a.STATIC_BODY&&(L.body=new N(this,L))),this.add(L.body)),L},add:function(L){return L.physicsType===a.DYNAMIC_BODY?this.bodies.set(L):L.physicsType===a.STATIC_BODY&&(this.staticBodies.set(L),this.staticTree.insert(L)),L.enable=!0,L},disable:function(L){Array.isArray(L)||(L=[L]);for(var B=0;B<L.length;B++){var G=L[B];if(G.isParent)for(var Y=G.getChildren(),X=0;X<Y.length;X++){var k=Y[X];k.isParent?this.disable(k):this.disableBody(k.body)}else this.disableBody(G.body)}},disableBody:function(L){this.remove(L),L.enable=!1},remove:function(L){L.physicsType===a.DYNAMIC_BODY?(this.tree.remove(L),this.bodies.delete(L)):L.physicsType===a.STATIC_BODY&&(this.staticBodies.delete(L),this.staticTree.remove(L))},createDebugGraphic:function(){var L=this.scene.sys.add.graphics({x:0,y:0});return L.setDepth(Number.MAX_VALUE),this.debugGraphic=L,this.drawDebug=!0,L},setBounds:function(L,B,G,Y,X,k,H,K){return this.bounds.setTo(L,B,G,Y),X!==void 0&&this.setBoundsCollision(X,k,H,K),this},setBoundsCollision:function(L,B,G,Y){return L===void 0&&(L=!0),B===void 0&&(B=!0),G===void 0&&(G=!0),Y===void 0&&(Y=!0),this.checkCollision.left=L,this.checkCollision.right=B,this.checkCollision.up=G,this.checkCollision.down=Y,this},pause:function(){return this.isPaused=!0,this.emit(d.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(d.RESUME),this},addCollider:function(L,B,G,Y,X){G===void 0&&(G=null),Y===void 0&&(Y=null),X===void 0&&(X=G);var k=new l(this,!1,L,B,G,Y,X);return this.colliders.add(k),k},addOverlap:function(L,B,G,Y,X){G===void 0&&(G=null),Y===void 0&&(Y=null),X===void 0&&(X=G);var k=new l(this,!0,L,B,G,Y,X);return this.colliders.add(k),k},removeCollider:function(L){return this.colliders.remove(L),this},setFPS:function(L){return this.fps=L,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(L,B){if(!(this.isPaused||this.bodies.size===0)){var G,Y=this._frameTime,X=this._frameTimeMS*this.timeScale;this._elapsed+=B;var k,H=this.bodies.entries,K=this._elapsed>=X;for(this.fixedStep||(Y=B*.001,K=!0,this._elapsed=0),G=0;G<H.length;G++)k=H[G],k.enable&&k.preUpdate(K,Y);if(K){this._elapsed-=X,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(H));var j=this.colliders.update();for(G=0;G<j.length;G++){var $=j[G];$.active&&$.update()}this.emit(d.WORLD_STEP,Y)}for(;this._elapsed>=X;)this._elapsed-=X,this.step(Y)}},step:function(L){var B,G,Y=this.bodies.entries,X=Y.length;for(B=0;B<X;B++)G=Y[B],G.enable&&G.update(L);this.useTree&&(this.tree.clear(),this.tree.load(Y));var k=this.colliders.update();for(B=0;B<k.length;B++){var H=k[B];H.active&&H.update()}this.emit(d.WORLD_STEP,L),this.stepsLastFrame++},postUpdate:function(){var L,B,G=this.bodies.entries,Y=G.length,X=this.bodies,k=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,L=0;L<Y;L++)B=G[L],B.enable&&B.postUpdate();if(this.drawDebug){var H=this.debugGraphic;for(H.clear(),L=0;L<Y;L++)B=G[L],B.willDrawDebug()&&B.drawDebug(H);for(G=k.entries,Y=G.length,L=0;L<Y;L++)B=G[L],B.willDrawDebug()&&B.drawDebug(H)}var K=this.pendingDestroy;if(K.size>0){var j=this.tree,$=this.staticTree;for(G=K.entries,Y=G.length,L=0;L<Y;L++)B=G[L],B.physicsType===a.DYNAMIC_BODY?(j.remove(B),X.delete(B)):B.physicsType===a.STATIC_BODY&&($.remove(B),k.delete(B)),B.world=void 0,B.gameObject=void 0;K.clear()}},updateMotion:function(L,B){L.allowRotation&&this.computeAngularVelocity(L,B),this.computeVelocity(L,B)},computeAngularVelocity:function(L,B){var G=L.angularVelocity,Y=L.angularAcceleration,X=L.angularDrag,k=L.maxAngular;Y?G+=Y*B:L.allowDrag&&X&&(X*=B,m(G-X,0,.1)?G-=X:y(G+X,0,.1)?G+=X:G=0),G=f(G,-k,k);var H=G-L.angularVelocity;L.angularVelocity+=H,L.rotation+=L.angularVelocity*B},computeVelocity:function(L,B){var G=L.velocity.x,Y=L.acceleration.x,X=L.drag.x,k=L.maxVelocity.x,H=L.velocity.y,K=L.acceleration.y,j=L.drag.y,$=L.maxVelocity.y,Q=L.speed,_=L.maxSpeed,q=L.allowDrag,et=L.useDamping;L.allowGravity&&(G+=(this.gravity.x+L.gravity.x)*B,H+=(this.gravity.y+L.gravity.y)*B),Y?G+=Y*B:q&&X&&(et?(X=Math.pow(X,B),G*=X,Q=Math.sqrt(G*G+H*H),v(Q,0,.001)&&(G=0)):(X*=B,m(G-X,0,.01)?G-=X:y(G+X,0,.01)?G+=X:G=0)),K?H+=K*B:q&&j&&(et?(j=Math.pow(j,B),H*=j,Q=Math.sqrt(G*G+H*H),v(Q,0,.001)&&(H=0)):(j*=B,m(H-j,0,.01)?H-=j:y(H+j,0,.01)?H+=j:H=0)),G=f(G,-k,k),H=f(H,-$,$),L.velocity.set(G,H),_>-1&&L.velocity.length()>_&&(L.velocity.normalize().scale(_),Q=_),L.speed=Q},separate:function(L,B,G,Y,X){var k,H,K=!1,j=!0;if(!L.enable||!B.enable||L.checkCollision.none||B.checkCollision.none||!this.intersects(L,B)||G&&G.call(Y,L.gameObject,B.gameObject)===!1)return K;if(L.isCircle||B.isCircle){var $=this.separateCircle(L,B,X);$.result?(K=!0,j=!1):(k=$.x,H=$.y,j=!0)}if(j){var Q=!1,_=!1,q=this.OVERLAP_BIAS;X?(Q=F(L,B,X,q,k),_=b(L,B,X,q,H)):this.forceX||Math.abs(this.gravity.y+L.gravity.y)<Math.abs(this.gravity.x+L.gravity.x)?(Q=F(L,B,X,q,k),this.intersects(L,B)&&(_=b(L,B,X,q,H))):(_=b(L,B,X,q,H),this.intersects(L,B)&&(Q=F(L,B,X,q,k))),K=Q||_}return K&&(X?(L.onOverlap||B.onOverlap)&&this.emit(d.OVERLAP,L.gameObject,B.gameObject,L,B):(L.onCollide||B.onCollide)&&this.emit(d.COLLIDE,L.gameObject,B.gameObject,L,B)),K},separateCircle:function(L,B,G){C(L,B,!1,0),T(L,B,!1,0);var Y=L.isCircle,X=B.isCircle,k=L.center,H=B.center,K=L.immovable,j=B.immovable,$=L.velocity,Q=B.velocity,_=0,q=!0;if(Y!==X){q=!1;var et=k.x,at=k.y,ht=L.halfWidth,ot=B.position.x,tt=B.position.y,rt=B.right,it=B.bottom;X&&(et=H.x,at=H.y,ht=B.halfWidth,ot=L.position.x,tt=L.position.y,rt=L.right,it=L.bottom),at<tt?et<ot?_=o(et,at,ot,tt)-ht:et>rt&&(_=o(et,at,rt,tt)-ht):at>it&&(et<ot?_=o(et,at,ot,it)-ht:et>rt&&(_=o(et,at,rt,it)-ht)),_*=-1}else _=L.halfWidth+B.halfWidth-c(k,H);L.overlapR=_,B.overlapR=_;var xt=n(k,H),vt=(_+M.EPSILON)*Math.cos(xt),Bt=(_+M.EPSILON)*Math.sin(xt),Rt={overlap:_,result:!1,x:vt,y:Bt};if(G&&(!q||q&&_!==0))return Rt.result=!0,Rt;if(!q&&_===0||K&&j||L.customSeparateX||B.customSeparateX)return Rt.x=void 0,Rt.y=void 0,Rt;var St=!L.pushable&&!B.pushable;if(q){var yt=k.x-H.x,Ot=k.y-H.y,qt=Math.sqrt(Math.pow(yt,2)+Math.pow(Ot,2)),oe=(H.x-k.x)/qt||0,ce=(H.y-k.y)/qt||0,Qe=2*($.x*oe+$.y*ce-Q.x*oe-Q.y*ce)/(L.mass+B.mass);(K||j)&&(Qe*=2),K||($.x=$.x-Qe/L.mass*oe,$.y=$.y-Qe/L.mass*ce,$.multiply(L.bounce)),j||(Q.x=Q.x+Qe/B.mass*oe,Q.y=Q.y+Qe/B.mass*ce,Q.multiply(B.bounce)),!K&&!j&&(vt*=.5,Bt*=.5),K||(L.x-=vt,L.y-=Bt,L.updateCenter()),j||(B.x+=vt,B.y+=Bt,B.updateCenter()),Rt.result=!0}else!K||L.pushable||St?(L.x-=vt,L.y-=Bt,L.updateCenter()):(!j||B.pushable||St)&&(B.x+=vt,B.y+=Bt,B.updateCenter()),Rt.x=void 0,Rt.y=void 0;return Rt},intersects:function(L,B){return L===B?!1:!L.isCircle&&!B.isCircle?!(L.right<=B.left||L.bottom<=B.top||L.left>=B.right||L.top>=B.bottom):L.isCircle?B.isCircle?c(L.center,B.center)<=L.halfWidth+B.halfWidth:this.circleBodyIntersects(L,B):this.circleBodyIntersects(B,L)},circleBodyIntersects:function(L,B){var G=f(L.center.x,B.left,B.right),Y=f(L.center.y,B.top,B.bottom),X=(L.center.x-G)*(L.center.x-G),k=(L.center.y-Y)*(L.center.y-Y);return X+k<=L.halfWidth*L.halfWidth},overlap:function(L,B,G,Y,X){return G===void 0&&(G=null),Y===void 0&&(Y=null),X===void 0&&(X=G),this.collideObjects(L,B,G,Y,X,!0)},collide:function(L,B,G,Y,X){return G===void 0&&(G=null),Y===void 0&&(Y=null),X===void 0&&(X=G),this.collideObjects(L,B,G,Y,X,!1)},collideObjects:function(L,B,G,Y,X,k){var H,K;L.isParent&&(L.physicsType===void 0||B===void 0||L===B)&&(L=L.children.entries),B&&B.isParent&&B.physicsType===void 0&&(B=B.children.entries);var j=Array.isArray(L),$=Array.isArray(B);if(this._total=0,!j&&!$)this.collideHandler(L,B,G,Y,X,k);else if(!j&&$)for(H=0;H<B.length;H++)this.collideHandler(L,B[H],G,Y,X,k);else if(j&&!$)if(B)for(H=0;H<L.length;H++)this.collideHandler(L[H],B,G,Y,X,k);else for(H=0;H<L.length;H++){var Q=L[H];for(K=H+1;K<L.length;K++)H!==K&&this.collideHandler(Q,L[K],G,Y,X,k)}else for(H=0;H<L.length;H++)for(K=0;K<B.length;K++)this.collideHandler(L[H],B[K],G,Y,X,k);return this._total>0},collideHandler:function(L,B,G,Y,X,k){if(B===void 0&&L.isParent)return this.collideGroupVsGroup(L,L,G,Y,X,k);if(!L||!B)return!1;if(L.body||L.isBody){if(B.body||B.isBody)return this.collideSpriteVsSprite(L,B,G,Y,X,k);if(B.isParent)return this.collideSpriteVsGroup(L,B,G,Y,X,k);if(B.isTilemap)return this.collideSpriteVsTilemapLayer(L,B,G,Y,X,k)}else if(L.isParent){if(B.body||B.isBody)return this.collideSpriteVsGroup(B,L,G,Y,X,k);if(B.isParent)return this.collideGroupVsGroup(L,B,G,Y,X,k);if(B.isTilemap)return this.collideGroupVsTilemapLayer(L,B,G,Y,X,k)}else if(L.isTilemap){if(B.body||B.isBody)return this.collideSpriteVsTilemapLayer(B,L,G,Y,X,k);if(B.isParent)return this.collideGroupVsTilemapLayer(B,L,G,Y,X,k)}},collideSpriteVsSprite:function(L,B,G,Y,X,k){var H=L.isBody?L:L.body,K=B.isBody?B:B.body;return!H||!K?!1:(this.separate(H,K,Y,X,k)&&(G&&G.call(X,L,B),this._total++),!0)},collideSpriteVsGroup:function(L,B,G,Y,X,k){var H=L.isBody?L:L.body;if(!(B.length===0||!H||!H.enable||H.checkCollision.none)){var K,j,$;if(this.useTree||B.physicsType===a.STATIC_BODY){var Q=this.treeMinMax;Q.minX=H.left,Q.minY=H.top,Q.maxX=H.right,Q.maxY=H.bottom;var _=B.physicsType===a.DYNAMIC_BODY?this.tree.search(Q):this.staticTree.search(Q);for(j=_.length,K=0;K<j;K++)$=_[K],!(H===$||!$.enable||$.checkCollision.none||!B.contains($.gameObject))&&this.separate(H,$,Y,X,k)&&(G&&G.call(X,H.gameObject,$.gameObject),this._total++)}else{var q=B.getChildren(),et=B.children.entries.indexOf(L);for(j=q.length,K=0;K<j;K++)$=q[K].body,!(!$||K===et||!$.enable)&&this.separate(H,$,Y,X,k)&&(G&&G.call(X,H.gameObject,$.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(L,B,G,Y,X,k){var H=L.getChildren();if(H.length===0)return!1;for(var K=!1,j=0;j<H.length;j++)(H[j].body||H[j].isBody)&&this.collideSpriteVsTilemapLayer(H[j],B,G,Y,X,k)&&(K=!0);return K},collideTiles:function(L,B,G,Y,X){return B.length===0||L.body&&!L.body.enable||L.isBody&&!L.enable?!1:this.collideSpriteVsTilesHandler(L,B,G,Y,X,!1,!1)},overlapTiles:function(L,B,G,Y,X){return B.length===0||L.body&&!L.body.enable||L.isBody&&!L.enable?!1:this.collideSpriteVsTilesHandler(L,B,G,Y,X,!0,!1)},collideSpriteVsTilemapLayer:function(L,B,G,Y,X,k){var H=L.isBody?L:L.body;if(!H.enable||H.checkCollision.none)return!1;var K=H.x,j=H.y,$=H.width,Q=H.height,_=B.layer;if(_.tileWidth>_.baseTileWidth){var q=(_.tileWidth-_.baseTileWidth)*B.scaleX;K-=q,$+=q}if(_.tileHeight>_.baseTileHeight){var et=(_.tileHeight-_.baseTileHeight)*B.scaleY;Q+=et}var at=k?null:this.tileFilterOptions,ht=P(K,j,$,Q,at,B.scene.cameras.main,B.layer);return ht.length===0?!1:this.collideSpriteVsTilesHandler(L,ht,G,Y,X,k,!0)},collideSpriteVsTilesHandler:function(L,B,G,Y,X,k,H){for(var K=L.isBody?L:L.body,j,$={left:0,right:0,top:0,bottom:0},Q,_=!1,q=0;q<B.length;q++){j=B[q],Q=j.tilemapLayer;var et=Q.tileToWorldXY(j.x,j.y);$.left=et.x,$.top=et.y,j.baseHeight!==j.height&&($.top-=(j.height-j.baseHeight)*Q.scaleY),$.right=$.left+j.width*Q.scaleX,$.bottom=$.top+j.height*Q.scaleY,z($,K)&&(!Y||Y.call(X,L,j))&&A(j,L)&&(k||O(q,K,j,$,Q,this.TILE_BIAS,H))&&(this._total++,_=!0,G&&G.call(X,L,j),k&&K.onOverlap?this.emit(d.TILE_OVERLAP,L,j,K):K.onCollide&&this.emit(d.TILE_COLLIDE,L,j,K))}return _},collideGroupVsGroup:function(L,B,G,Y,X,k){if(!(L.length===0||B.length===0))for(var H=L.getChildren(),K=0;K<H.length;K++)this.collideSpriteVsGroup(H[K],B,G,Y,X,k)},wrap:function(L,B){L.body?this.wrapObject(L,B):L.getChildren?this.wrapArray(L.getChildren(),B):Array.isArray(L)?this.wrapArray(L,B):this.wrapObject(L,B)},wrapArray:function(L,B){for(var G=0;G<L.length;G++)this.wrapObject(L[G],B)},wrapObject:function(L,B){B===void 0&&(B=0),L.x=D(L.x,this.bounds.left-B,this.bounds.right+B),L.y=D(L.y,this.bounds.top-B,this.bounds.bottom+B)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});s.exports=V},5321:s=>{var g={setAcceleration:function(e,n){return this.body.acceleration.set(e,n),this},setAccelerationX:function(e){return this.body.acceleration.x=e,this},setAccelerationY:function(e){return this.body.acceleration.y=e,this}};s.exports=g},29257:s=>{var g={setAngularVelocity:function(e){return this.body.angularVelocity=e,this},setAngularAcceleration:function(e){return this.body.angularAcceleration=e,this},setAngularDrag:function(e){return this.body.angularDrag=e,this}};s.exports=g},62122:s=>{var g={setBounce:function(e,n){return this.body.bounce.set(e,n),this},setBounceX:function(e){return this.body.bounce.x=e,this},setBounceY:function(e){return this.body.bounce.y=e,this},setCollideWorldBounds:function(e,n,p,f){return this.body.setCollideWorldBounds(e,n,p,f),this}};s.exports=g},99803:s=>{var g={setDebug:function(e,n,p){return this.debugShowBody=e,this.debugShowVelocity=n,this.debugBodyColor=p,this},setDebugBodyColor:function(e){return this.body.debugBodyColor=e,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(e){this.body.debugShowBody=e}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(e){this.body.debugShowVelocity=e}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(e){this.body.debugBodyColor=e}}};s.exports=g},87145:s=>{var g={setDrag:function(e,n){return this.body.drag.set(e,n),this},setDragX:function(e){return this.body.drag.x=e,this},setDragY:function(e){return this.body.drag.y=e,this},setDamping:function(e){return this.body.useDamping=e,this}};s.exports=g},96174:s=>{var g={enableBody:function(e,n,p,f,u){return e&&this.body.reset(n,p),f&&(this.body.gameObject.active=!0),u&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(e,n){return e===void 0&&(e=!1),n===void 0&&(n=!1),this.body.stop(),this.body.enable=!1,e&&(this.body.gameObject.active=!1),n&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};s.exports=g},51702:s=>{var g={setFriction:function(e,n){return this.body.friction.set(e,n),this},setFrictionX:function(e){return this.body.friction.x=e,this},setFrictionY:function(e){return this.body.friction.y=e,this}};s.exports=g},25578:s=>{var g={setGravity:function(e,n){return this.body.gravity.set(e,n),this},setGravityX:function(e){return this.body.gravity.x=e,this},setGravityY:function(e){return this.body.gravity.y=e,this}};s.exports=g},72029:s=>{var g={setImmovable:function(e){return e===void 0&&(e=!0),this.body.immovable=e,this}};s.exports=g},34566:s=>{var g={setMass:function(e){return this.body.mass=e,this}};s.exports=g},2732:(s,g,e)=>{var n=e(15147),p=e(26673),f=e(22184),u=e(26535),l=function(a,o,c,h,d,v){var m=n(a,o-h,c-h,2*h,2*h,d,v);if(m.length===0)return m;for(var y=new p(o,c,h),C=new p,T=[],P=0;P<m.length;P++){var S=m[P];S.isCircle?(C.setTo(S.center.x,S.center.y,S.halfWidth),f(y,C)&&T.push(S)):u(y,S)&&T.push(S)}return T};s.exports=l},15147:s=>{var g=function(e,n,p,f,u,l,a){l===void 0&&(l=!0),a===void 0&&(a=!1);var o=[],c=[],h=e.treeMinMax;if(h.minX=n,h.minY=p,h.maxX=n+f,h.maxY=p+u,a&&(c=e.staticTree.search(h)),l&&e.useTree)o=e.tree.search(h);else if(l){var d=e.bodies,v={position:{x:n,y:p},left:n,top:p,right:n+f,bottom:p+u,isCircle:!1},m=e.intersects;d.iterate(function(y){m(y,v)&&o.push(y)})}return c.concat(o)};s.exports=g},57527:s=>{var g={setPushable:function(e){return e===void 0&&(e=!0),this.body.pushable=e,this}};s.exports=g},77687:s=>{var g={setOffset:function(e,n){return this.body.setOffset(e,n),this},setSize:function(e,n,p){return this.body.setSize(e,n,p),this},setBodySize:function(e,n,p){return this.body.setSize(e,n,p),this},setCircle:function(e,n,p){return this.body.setCircle(e,n,p),this}};s.exports=g},66536:s=>{var g={setVelocity:function(e,n){return this.body.setVelocity(e,n),this},setVelocityX:function(e){return this.body.setVelocityX(e),this},setVelocityY:function(e){return this.body.setVelocityY(e),this},setMaxVelocity:function(e,n){return this.body.maxVelocity.set(e,n),this}};s.exports=g},7864:(s,g,e)=>{s.exports={Acceleration:e(5321),Angular:e(29257),Bounce:e(62122),Debug:e(99803),Drag:e(87145),Enable:e(96174),Friction:e(51702),Gravity:e(25578),Immovable:e(72029),Mass:e(34566),OverlapCirc:e(2732),OverlapRect:e(15147),Pushable:e(57527),Size:e(77687),Velocity:e(66536)}},47401:s=>{var g={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};s.exports=g},22346:s=>{s.exports="collide"},95092:s=>{s.exports="overlap"},15775:s=>{s.exports="pause"},74142:s=>{s.exports="resume"},22825:s=>{s.exports="tilecollide"},10851:s=>{s.exports="tileoverlap"},7543:s=>{s.exports="worldbounds"},1487:s=>{s.exports="worldstep"},27037:(s,g,e)=>{s.exports={COLLIDE:e(22346),OVERLAP:e(95092),PAUSE:e(15775),RESUME:e(74142),TILE_COLLIDE:e(22825),TILE_OVERLAP:e(10851),WORLD_BOUNDS:e(7543),WORLD_STEP:e(1487)}},39977:(s,g,e)=>{var n=e(47401),p=e(98611),f={ArcadePhysics:e(66150),Body:e(97602),Collider:e(3909),Components:e(7864),Events:e(27037),Factory:e(99523),GetOverlapX:e(75671),GetOverlapY:e(66185),SeparateX:e(61777),SeparateY:e(25299),Group:e(10481),Image:e(62832),Sprite:e(25084),StaticBody:e(66634),StaticGroup:e(46346),Tilemap:e(8413),World:e(85233)};f=p(!1,f,n),s.exports=f},25163:s=>{var g=function(e,n){return e.collisionCallback?!e.collisionCallback.call(e.collisionCallbackContext,n,e):e.layer.callbacks[e.index]?!e.layer.callbacks[e.index].callback.call(e.layer.callbacks[e.index].callbackContext,n,e):!0};s.exports=g},98209:s=>{var g=function(e,n){n<0?(e.blocked.none=!1,e.blocked.left=!0):n>0&&(e.blocked.none=!1,e.blocked.right=!0),e.position.x-=n,e.updateCenter(),e.bounce.x===0?e.velocity.x=0:e.velocity.x=-e.velocity.x*e.bounce.x};s.exports=g},72792:s=>{var g=function(e,n){n<0?(e.blocked.none=!1,e.blocked.up=!0):n>0&&(e.blocked.none=!1,e.blocked.down=!0),e.position.y-=n,e.updateCenter(),e.bounce.y===0?e.velocity.y=0:e.velocity.y=-e.velocity.y*e.bounce.y};s.exports=g},27354:(s,g,e)=>{var n=e(14405),p=e(52926),f=e(28808),u=function(l,a,o,c,h,d,v){var m=c.left,y=c.top,C=c.right,T=c.bottom,P=o.faceLeft||o.faceRight,S=o.faceTop||o.faceBottom;if(v||(P=!0,S=!0),!P&&!S)return!1;var M=0,E=0,A=0,R=1;if(a.deltaAbsX()>a.deltaAbsY()?A=-1:a.deltaAbsX()<a.deltaAbsY()&&(R=-1),a.deltaX()!==0&&a.deltaY()!==0&&P&&S&&(A=Math.min(Math.abs(a.position.x-C),Math.abs(a.right-m)),R=Math.min(Math.abs(a.position.y-T),Math.abs(a.bottom-y))),A<R){if(P&&(M=n(a,o,m,C,d,v),M!==0&&!f(c,a)))return!0;S&&(E=p(a,o,y,T,d,v))}else{if(S&&(E=p(a,o,y,T,d,v),E!==0&&!f(c,a)))return!0;P&&(M=n(a,o,m,C,d,v))}return M!==0||E!==0};s.exports=u},14405:(s,g,e)=>{var n=e(98209),p=function(f,u,l,a,o,c){var h=0,d=u.faceLeft,v=u.faceRight,m=u.collideLeft,y=u.collideRight;return c||(d=!0,v=!0,m=!0,y=!0),f.deltaX()<0&&y&&f.checkCollision.left?v&&f.x<a&&(h=f.x-a,h<-o&&(h=0)):f.deltaX()>0&&m&&f.checkCollision.right&&d&&f.right>l&&(h=f.right-l,h>o&&(h=0)),h!==0&&(f.customSeparateX?f.overlapX=h:n(f,h)),h};s.exports=p},52926:(s,g,e)=>{var n=e(72792),p=function(f,u,l,a,o,c){var h=0,d=u.faceTop,v=u.faceBottom,m=u.collideUp,y=u.collideDown;return c||(d=!0,v=!0,m=!0,y=!0),f.deltaY()<0&&y&&f.checkCollision.up?v&&f.y<a&&(h=f.y-a,h<-o&&(h=0)):f.deltaY()>0&&m&&f.checkCollision.down&&d&&f.bottom>l&&(h=f.bottom-l,h>o&&(h=0)),h!==0&&(f.customSeparateY?f.overlapY=h:n(f,h)),h};s.exports=p},28808:s=>{var g=function(e,n){return!(n.right<=e.left||n.bottom<=e.top||n.position.x>=e.right||n.position.y>=e.bottom)};s.exports=g},8413:(s,g,e)=>{var n={ProcessTileCallbacks:e(25163),ProcessTileSeparationX:e(98209),ProcessTileSeparationY:e(72792),SeparateTile:e(27354),TileCheckX:e(14405),TileCheckY:e(52926),TileIntersectsBody:e(28808)};s.exports=n},53954:(s,g,e)=>{s.exports={Arcade:e(39977),Matter:e(45949)}},63568:(s,g,e)=>{var n=e(56694),p=e(93736),f=new n({initialize:function(){this.boundsCenter=new p,this.centerDiff=new p},parseBody:function(u){if(u=u.hasOwnProperty("body")?u.body:u,!u.hasOwnProperty("bounds")||!u.hasOwnProperty("centerOfMass"))return!1;var l=this.boundsCenter,a=this.centerDiff,o=u.bounds.max.x-u.bounds.min.x,c=u.bounds.max.y-u.bounds.min.y,h=o*u.centerOfMass.x,d=c*u.centerOfMass.y;return l.set(o/2,c/2),a.set(h-l.x,d-l.y),!0},getTopLeft:function(u,l,a){if(l===void 0&&(l=0),a===void 0&&(a=0),this.parseBody(u)){var o=this.boundsCenter,c=this.centerDiff;return new p(l+o.x+c.x,a+o.y+c.y)}return!1},getTopCenter:function(u,l,a){if(l===void 0&&(l=0),a===void 0&&(a=0),this.parseBody(u)){var o=this.boundsCenter,c=this.centerDiff;return new p(l+c.x,a+o.y+c.y)}return!1},getTopRight:function(u,l,a){if(l===void 0&&(l=0),a===void 0&&(a=0),this.parseBody(u)){var o=this.boundsCenter,c=this.centerDiff;return new p(l-(o.x-c.x),a+o.y+c.y)}return!1},getLeftCenter:function(u,l,a){if(l===void 0&&(l=0),a===void 0&&(a=0),this.parseBody(u)){var o=this.boundsCenter,c=this.centerDiff;return new p(l+o.x+c.x,a+c.y)}return!1},getCenter:function(u,l,a){if(l===void 0&&(l=0),a===void 0&&(a=0),this.parseBody(u)){var o=this.centerDiff;return new p(l+o.x,a+o.y)}return!1},getRightCenter:function(u,l,a){if(l===void 0&&(l=0),a===void 0&&(a=0),this.parseBody(u)){var o=this.boundsCenter,c=this.centerDiff;return new p(l-(o.x-c.x),a+c.y)}return!1},getBottomLeft:function(u,l,a){if(l===void 0&&(l=0),a===void 0&&(a=0),this.parseBody(u)){var o=this.boundsCenter,c=this.centerDiff;return new p(l+o.x+c.x,a-(o.y-c.y))}return!1},getBottomCenter:function(u,l,a){if(l===void 0&&(l=0),a===void 0&&(a=0),this.parseBody(u)){var o=this.boundsCenter,c=this.centerDiff;return new p(l+c.x,a-(o.y-c.y))}return!1},getBottomRight:function(u,l,a){if(l===void 0&&(l=0),a===void 0&&(a=0),this.parseBody(u)){var o=this.boundsCenter,c=this.centerDiff;return new p(l-(o.x-c.x),a-(o.y-c.y))}return!1}});s.exports=f},18171:(s,g,e)=>{var n=e(16929);n.Body=e(84125),n.Composite=e(11299),n.World=e(72005),n.Collision=e(63454),n.Detector=e(13657),n.Pairs=e(91327),n.Pair=e(70584),n.Query=e(13390),n.Resolver=e(44272),n.Constraint=e(52838),n.Common=e(68758),n.Engine=e(45775),n.Events=e(39073),n.Sleeping=e(22806),n.Plugin=e(84474),n.Bodies=e(68516),n.Composites=e(56643),n.Axes=e(50658),n.Bounds=e(84091),n.Svg=e(92765),n.Vector=e(10438),n.Vertices=e(39745),n.World.add=n.Composite.add,n.World.remove=n.Composite.remove,n.World.addComposite=n.Composite.addComposite,n.World.addBody=n.Composite.addBody,n.World.addConstraint=n.Composite.addConstraint,n.World.clear=n.Composite.clear,s.exports=n},72653:(s,g,e)=>{var n=e(68516),p=e(56694),f=e(56643),u=e(52838),l=e(92765),a=e(3860),o=e(7030),c=e(73658),h=e(84720),d=e(10998),v=e(72829),m=e(88596),y=e(39745),C=new p({initialize:function(P){this.world=P,this.scene=P.scene,this.sys=P.scene.sys},rectangle:function(T,P,S,M,E){var A=n.rectangle(T,P,S,M,E);return this.world.add(A),A},trapezoid:function(T,P,S,M,E,A){var R=n.trapezoid(T,P,S,M,E,A);return this.world.add(R),R},circle:function(T,P,S,M,E){var A=n.circle(T,P,S,M,E);return this.world.add(A),A},polygon:function(T,P,S,M,E){var A=n.polygon(T,P,S,M,E);return this.world.add(A),A},fromVertices:function(T,P,S,M,E,A,R){typeof S=="string"&&(S=y.fromPath(S));var w=n.fromVertices(T,P,S,M,E,A,R);return this.world.add(w),w},fromPhysicsEditor:function(T,P,S,M,E){E===void 0&&(E=!0);var A=d.parseBody(T,P,S,M);return E&&!this.world.has(A)&&this.world.add(A),A},fromSVG:function(T,P,S,M,E,A){M===void 0&&(M=1),E===void 0&&(E={}),A===void 0&&(A=!0);for(var R=S.getElementsByTagName("path"),w=[],O=0;O<R.length;O++){var F=l.pathToVertices(R[O],30);M!==1&&y.scale(F,M,M),w.push(F)}var b=n.fromVertices(T,P,w,E);return A&&this.world.add(b),b},fromJSON:function(T,P,S,M,E){M===void 0&&(M={}),E===void 0&&(E=!0);var A=v.parseBody(T,P,S,M);return A&&E&&this.world.add(A),A},imageStack:function(T,P,S,M,E,A,R,w,O){R===void 0&&(R=0),w===void 0&&(w=0),O===void 0&&(O={});var F=this.world,b=this.sys.displayList;O.addToWorld=!1;var I=f.stack(S,M,E,A,R,w,function(N,z){var U=new o(F,N,z,T,P,O);return b.add(U),U.body});return F.add(I),I},stack:function(T,P,S,M,E,A,R){var w=f.stack(T,P,S,M,E,A,R);return this.world.add(w),w},pyramid:function(T,P,S,M,E,A,R){var w=f.pyramid(T,P,S,M,E,A,R);return this.world.add(w),w},chain:function(T,P,S,M,E,A){return f.chain(T,P,S,M,E,A)},mesh:function(T,P,S,M,E){return f.mesh(T,P,S,M,E)},newtonsCradle:function(T,P,S,M,E){var A=f.newtonsCradle(T,P,S,M,E);return this.world.add(A),A},car:function(T,P,S,M,E){var A=f.car(T,P,S,M,E);return this.world.add(A),A},softBody:function(T,P,S,M,E,A,R,w,O,F){var b=f.softBody(T,P,S,M,E,A,R,w,O,F);return this.world.add(b),b},joint:function(T,P,S,M,E){return this.constraint(T,P,S,M,E)},spring:function(T,P,S,M,E){return this.constraint(T,P,S,M,E)},constraint:function(T,P,S,M,E){M===void 0&&(M=1),E===void 0&&(E={}),E.bodyA=T.type==="body"?T:T.body,E.bodyB=P.type==="body"?P:P.body,isNaN(S)||(E.length=S),E.stiffness=M;var A=u.create(E);return this.world.add(A),A},worldConstraint:function(T,P,S,M){S===void 0&&(S=1),M===void 0&&(M={}),M.bodyB=T.type==="body"?T:T.body,isNaN(P)||(M.length=P),M.stiffness=S;var E=u.create(M);return this.world.add(E),E},mouseSpring:function(T){return this.pointerConstraint(T)},pointerConstraint:function(T){T===void 0&&(T={}),T.hasOwnProperty("render")||(T.render={visible:!1});var P=new m(this.scene,this.world,T);return this.world.add(P.constraint),P},image:function(T,P,S,M,E){var A=new o(this.world,T,P,S,M,E);return this.sys.displayList.add(A),A},tileBody:function(T,P){return new h(this.world,T,P)},sprite:function(T,P,S,M,E){var A=new c(this.world,T,P,S,M,E);return this.sys.displayList.add(A),this.sys.updateList.add(A),A},gameObject:function(T,P,S){return a(this.world,T,P,S)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});s.exports=C},3860:(s,g,e)=>{var n=e(74527),p=e(72632),f=e(93736);function u(a){return!!a.get&&typeof a.get=="function"||!!a.set&&typeof a.set=="function"}var l=function(a,o,c,h){c===void 0&&(c={}),h===void 0&&(h=!0);var d=o.x,v=o.y;o.body={temp:!0,position:{x:d,y:v}};var m=[n.Bounce,n.Collision,n.Force,n.Friction,n.Gravity,n.Mass,n.Sensor,n.SetBody,n.Sleep,n.Static,n.Transform,n.Velocity];if(m.forEach(function(C){for(var T in C)u(C[T])?Object.defineProperty(o,T,{get:C[T].get,set:C[T].set}):Object.defineProperty(o,T,{value:C[T]})}),o.world=a,o._tempVec2=new f(d,v),c.hasOwnProperty("type")&&c.type==="body")o.setExistingBody(c,h);else{var y=p(c,"shape",null);y||(y="rectangle"),c.addToWorld=h,o.setBody(y,c)}return o};s.exports=l},7030:(s,g,e)=>{var n=e(56694),p=e(74527),f=e(89980),u=e(72632),l=e(1539),a=e(58210),o=e(93736),c=new n({Extends:l,Mixins:[p.Bounce,p.Collision,p.Force,p.Friction,p.Gravity,p.Mass,p.Sensor,p.SetBody,p.Sleep,p.Static,p.Transform,p.Velocity,a],initialize:function(d,v,m,y,C,T){f.call(this,d.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(y,C),this.setSizeToFrame(),this.setOrigin(),this.world=d,this._tempVec2=new o(v,m);var P=u(T,"shape",null);P?this.setBody(P,T):this.setRectangle(this.width,this.height,T),this.setPosition(v,m),this.initPipeline(),this.initPostPipeline(!0)}});s.exports=c},50583:(s,g,e)=>{var n=e(84093),p=e(50658),f=e(68516),u=e(84125),l=e(63568),a=e(84091),o=e(56694),c=e(63454),h=e(68758),d=e(11299),v=e(56643),m=e(52838),y=e(13657),C=e(53996),T=e(72653),P=e(72632),S=e(10850),M=e(1675),E=e(80391),A=e(16929),R=e(44097),w=e(30657),O=e(70584),F=e(91327),b=e(84474),I=e(91963),N=e(13390),z=e(44272),U=e(7599),W=e(92765),D=e(10438),V=e(39745),L=e(31468);h.setDecomp(e(81084));var B=new o({initialize:function(Y){this.scene=Y,this.systems=Y.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=u,this.composite=d,this.collision=c,this.detector=y,this.pair=O,this.pairs=F,this.query=N,this.resolver=z,this.constraint=m,this.bodies=f,this.composites=v,this.axes=p,this.bounds=a,this.svg=W,this.vector=D,this.vertices=V,this.verts=V,this._tempVec2=D.create(),S(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),S(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),S(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),z._restingThresh=S(this.config,"restingThresh",4),z._restingThreshTangent=S(this.config,"restingThreshTangent",6),z._positionDampen=S(this.config,"positionDampen",.9),z._positionWarming=S(this.config,"positionWarming",.8),z._frictionNormalMultiplier=S(this.config,"frictionNormalMultiplier",5),Y.sys.events.once(U.BOOT,this.boot,this),Y.sys.events.on(U.START,this.start,this)},boot:function(){this.world=new L(this.scene,this.config),this.add=new T(this.world),this.bodyBounds=new l,this.systems.events.once(U.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new L(this.scene,this.config),this.add=new T(this.world));var G=this.systems.events;G.on(U.UPDATE,this.world.update,this.world),G.on(U.POST_UPDATE,this.world.postUpdate,this.world),G.once(U.SHUTDOWN,this.shutdown,this)},getConfig:function(){var G=this.systems.game.config.physics,Y=this.systems.settings.physics,X=w(P(Y,"matter",{}),P(G,"matter",{}));return X},enableAttractorPlugin:function(){return b.register(M),b.use(A,M),this},enableWrapPlugin:function(){return b.register(R),b.use(A,R),this},enableCollisionEventsPlugin:function(){return b.register(E),b.use(A,E),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(G,Y){this.world.step(G,Y)},containsPoint:function(G,Y,X){G=this.getMatterBodies(G);var k=D.create(Y,X),H=N.point(G,k);return H.length>0},intersectPoint:function(G,Y,X){X=this.getMatterBodies(X);var k=D.create(G,Y),H=[],K=N.point(X,k);return K.forEach(function(j){H.indexOf(j)===-1&&H.push(j)}),H},intersectRect:function(G,Y,X,k,H,K){H===void 0&&(H=!1),K=this.getMatterBodies(K);var j={min:{x:G,y:Y},max:{x:G+X,y:Y+k}},$=[],Q=N.region(K,j,H);return Q.forEach(function(_){$.indexOf(_)===-1&&$.push(_)}),$},intersectRay:function(G,Y,X,k,H,K){H===void 0&&(H=1),K=this.getMatterBodies(K);for(var j=[],$=N.ray(K,D.create(G,Y),D.create(X,k),H),Q=0;Q<$.length;Q++)j.push($[Q].body);return j},intersectBody:function(G,Y){Y=this.getMatterBodies(Y);for(var X=[],k=N.collides(G,Y),H=0;H<k.length;H++){var K=k[H];K.bodyA===G?X.push(K.bodyB):X.push(K.bodyA)}return X},overlap:function(G,Y,X,k,H){X===void 0&&(X=null),k===void 0&&(k=null),H===void 0&&(H=X),Array.isArray(G)||(G=[G]),G=this.getMatterBodies(G),Y=this.getMatterBodies(Y);for(var K=!1,j=0;j<G.length;j++)for(var $=G[j],Q=N.collides($,Y),_=0;_<Q.length;_++){var q=Q[_],et=q.bodyA.id===$.id?q.bodyB:q.bodyA;if(!k||k.call(H,$,et,q)){if(K=!0,X)X.call(H,$,et,q);else if(!k)return!0}}return K},setCollisionCategory:function(G,Y){return G=this.getMatterBodies(G),G.forEach(function(X){X.collisionFilter.category=Y}),this},setCollisionGroup:function(G,Y){return G=this.getMatterBodies(G),G.forEach(function(X){X.collisionFilter.group=Y}),this},setCollidesWith:function(G,Y){G=this.getMatterBodies(G);var X=0;if(!Array.isArray(Y))X=Y;else for(var k=0;k<Y.length;k++)X|=Y[k];return G.forEach(function(H){H.collisionFilter.mask=X}),this},getMatterBodies:function(G){if(!G)return this.world.getAllBodies();Array.isArray(G)||(G=[G]);for(var Y=[],X=0;X<G.length;X++){var k=G[X].hasOwnProperty("body")?G[X].body:G[X];Y.push(k)}return Y},setVelocity:function(G,Y,X){G=this.getMatterBodies(G);var k=this._tempVec2;return k.x=Y,k.y=X,G.forEach(function(H){u.setVelocity(H,k)}),this},setVelocityX:function(G,Y){G=this.getMatterBodies(G);var X=this._tempVec2;return X.x=Y,G.forEach(function(k){X.y=k.velocity.y,u.setVelocity(k,X)}),this},setVelocityY:function(G,Y){G=this.getMatterBodies(G);var X=this._tempVec2;return X.y=Y,G.forEach(function(k){X.x=k.velocity.x,u.setVelocity(k,X)}),this},setAngularVelocity:function(G,Y){return G=this.getMatterBodies(G),G.forEach(function(X){u.setAngularVelocity(X,Y)}),this},applyForce:function(G,Y){G=this.getMatterBodies(G);var X=this._tempVec2;return G.forEach(function(k){X.x=k.position.x,X.y=k.position.y,u.applyForce(k,X,Y)}),this},applyForceFromPosition:function(G,Y,X,k){G=this.getMatterBodies(G);var H=this._tempVec2;return G.forEach(function(K){k===void 0&&(k=K.angle),H.x=X*Math.cos(k),H.y=X*Math.sin(k),u.applyForce(K,Y,H)}),this},applyForceFromAngle:function(G,Y,X){G=this.getMatterBodies(G);var k=this._tempVec2;return G.forEach(function(H){X===void 0&&(X=H.angle),k.x=Y*Math.cos(X),k.y=Y*Math.sin(X),u.applyForce(H,{x:H.position.x,y:H.position.y},k)}),this},getConstraintLength:function(G){var Y=G.pointA.x,X=G.pointA.y,k=G.pointB.x,H=G.pointB.y;return G.bodyA&&(Y+=G.bodyA.position.x,X+=G.bodyA.position.y),G.bodyB&&(k+=G.bodyB.position.x,H+=G.bodyB.position.y),C(Y,X,k,H)},alignBody:function(G,Y,X,k){G=G.hasOwnProperty("body")?G.body:G;var H;switch(k){case n.TOP_LEFT:case n.LEFT_TOP:H=this.bodyBounds.getTopLeft(G,Y,X);break;case n.TOP_CENTER:H=this.bodyBounds.getTopCenter(G,Y,X);break;case n.TOP_RIGHT:case n.RIGHT_TOP:H=this.bodyBounds.getTopRight(G,Y,X);break;case n.LEFT_CENTER:H=this.bodyBounds.getLeftCenter(G,Y,X);break;case n.CENTER:H=this.bodyBounds.getCenter(G,Y,X);break;case n.RIGHT_CENTER:H=this.bodyBounds.getRightCenter(G,Y,X);break;case n.LEFT_BOTTOM:case n.BOTTOM_LEFT:H=this.bodyBounds.getBottomLeft(G,Y,X);break;case n.BOTTOM_CENTER:H=this.bodyBounds.getBottomCenter(G,Y,X);break;case n.BOTTOM_RIGHT:case n.RIGHT_BOTTOM:H=this.bodyBounds.getBottomRight(G,Y,X);break}return H&&u.setPosition(G,H),this},shutdown:function(){var G=this.systems.events;this.world&&(G.off(U.UPDATE,this.world.update,this.world),G.off(U.POST_UPDATE,this.world.postUpdate,this.world)),G.off(U.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(U.START,this.start,this),this.scene=null,this.systems=null}});I.register("MatterPhysics",B,"matterPhysics"),s.exports=B},73658:(s,g,e)=>{var n=e(16569),p=e(56694),f=e(74527),u=e(89980),l=e(72632),a=e(58210),o=e(13747),c=e(93736),h=new p({Extends:o,Mixins:[f.Bounce,f.Collision,f.Force,f.Friction,f.Gravity,f.Mass,f.Sensor,f.SetBody,f.Sleep,f.Static,f.Transform,f.Velocity,a],initialize:function(v,m,y,C,T,P){u.call(this,v.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new n(this),this.setTexture(C,T),this.setSizeToFrame(),this.setOrigin(),this.world=v,this._tempVec2=new c(m,y);var S=l(P,"shape",null);S?this.setBody(S,P):this.setRectangle(this.width,this.height,P),this.setPosition(m,y),this.initPipeline(),this.initPostPipeline(!0)}});s.exports=h},84720:(s,g,e)=>{var n=e(68516),p=e(84125),f=e(56694),u=e(74527),l=e(28699),a=e(6659),o=e(72632),c=e(19256),h=e(39745),d=new f({Extends:a,Mixins:[u.Bounce,u.Collision,u.Friction,u.Gravity,u.Mass,u.Sensor,u.Sleep,u.Static],initialize:function(m,y,C){a.call(this),this.tile=y,this.world=m,y.physics.matterBody&&y.physics.matterBody.destroy(),y.physics.matterBody=this;var T=o(C,"body",null),P=o(C,"addToWorld",!0);if(T)this.setBody(T,P);else{var S=y.getCollisionGroup(),M=o(S,"objects",[]);M.length>0?this.setFromTileCollision(C):this.setFromTileRectangle(C)}if(y.flipX||y.flipY){var E={x:y.getCenterX(),y:y.getCenterY()},A=y.flipX?-1:1,R=y.flipY?-1:1;p.scale(T,A,R,E)}},setFromTileRectangle:function(v){v===void 0&&(v={}),c(v,"isStatic")||(v.isStatic=!0),c(v,"addToWorld")||(v.addToWorld=!0);var m=this.tile.getBounds(),y=m.x+m.width/2,C=m.y+m.height/2,T=n.rectangle(y,C,m.width,m.height,v);return this.setBody(T,v.addToWorld),this},setFromTileCollision:function(v){v===void 0&&(v={}),c(v,"isStatic")||(v.isStatic=!0),c(v,"addToWorld")||(v.addToWorld=!0);for(var m=this.tile.tilemapLayer.scaleX,y=this.tile.tilemapLayer.scaleY,C=this.tile.getLeft(),T=this.tile.getTop(),P=this.tile.getCollisionGroup(),S=o(P,"objects",[]),M=[],E=0;E<S.length;E++){var A=S[E],R=C+A.x*m,w=T+A.y*y,O=A.width*m,F=A.height*y,b=null;if(A.rectangle)b=n.rectangle(R+O/2,w+F/2,O,F,v);else if(A.ellipse)b=n.circle(R+O/2,w+F/2,O/2,v);else if(A.polygon||A.polyline){var I=A.polygon?A.polygon:A.polyline,N=I.map(function(D){return{x:D.x*m,y:D.y*y}}),z=h.create(N),U=h.centre(z);R+=U.x,w+=U.y,b=n.fromVertices(R,w,z,v)}b&&M.push(b)}if(M.length===1)this.setBody(M[0],v.addToWorld);else if(M.length>1){var W=l(v);W.parts=M,this.setBody(p.create(W),W.addToWorld)}return this},setBody:function(v,m){return m===void 0&&(m=!0),this.body&&this.removeBody(),this.body=v,this.body.gameObject=this,m&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});s.exports=d},10998:(s,g,e)=>{var n=e(68516),p=e(84125),f=e(68758),u=e(72632),l=e(39745),a={parseBody:function(o,c,h,d){d===void 0&&(d={});for(var v=u(h,"fixtures",[]),m=[],y=0;y<v.length;y++)for(var C=this.parseFixture(v[y]),T=0;T<C.length;T++)m.push(C[T]);var P=f.clone(h,!0);f.extend(P,d,!0),delete P.fixtures,delete P.type;var S=p.create(P);return p.setParts(S,m),p.setPosition(S,{x:o,y:c}),S},parseFixture:function(o){var c=f.extend({},!1,o);delete c.circle,delete c.vertices;var h;if(o.circle){var d=u(o.circle,"x"),v=u(o.circle,"y"),m=u(o.circle,"radius");h=[n.circle(d,v,m,c)]}else o.vertices&&(h=this.parseVertices(o.vertices,c));return h},parseVertices:function(o,c){c===void 0&&(c={});for(var h=[],d=0;d<o.length;d++)l.clockwiseSort(o[d]),h.push(p.create(f.extend({position:l.centre(o[d]),vertices:o[d]},c)));return n.flagCoincidentParts(h)}};s.exports=a},72829:(s,g,e)=>{var n=e(68516),p=e(84125),f={parseBody:function(u,l,a,o){o===void 0&&(o={});var c,h=a.vertices;if(h.length===1)o.vertices=h[0],c=p.create(o),n.flagCoincidentParts(c.parts);else{for(var d=[],v=0;v<h.length;v++){var m=p.create({vertices:h[v]});d.push(m)}n.flagCoincidentParts(d),o.parts=d,c=p.create(o)}return c.label=a.label,p.setPosition(c,{x:u,y:l}),c}};s.exports=f},88596:(s,g,e)=>{var n=e(84091),p=e(56694),f=e(11299),u=e(52838),l=e(13657),a=e(35416),o=e(33963),c=e(30657),h=e(22806),d=e(93736),v=e(39745),m=new p({initialize:function(C,T,P){P===void 0&&(P={});var S={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=C,this.world=T,this.camera=null,this.pointer=null,this.active=!0,this.position=new d,this.body=null,this.part=null,this.constraint=u.create(c(P,S)),this.world.on(a.BEFORE_UPDATE,this.update,this),C.sys.input.on(o.POINTER_DOWN,this.onDown,this),C.sys.input.on(o.POINTER_UP,this.onUp,this)},onDown:function(y){this.pointer||(this.pointer=y,this.camera=y.camera)},onUp:function(y){y===this.pointer&&(this.pointer=null)},getBody:function(y){var C=this.position,T=this.constraint;this.camera.getWorldPoint(y.x,y.y,C);for(var P=f.allBodies(this.world.localWorld),S=0;S<P.length;S++){var M=P[S];if(!M.ignorePointer&&n.contains(M.bounds,C)&&l.canCollide(M.collisionFilter,T.collisionFilter)&&this.hitTestBody(M,C))return this.world.emit(a.DRAG_START,M,this.part,this),!0}return!1},hitTestBody:function(y,C){for(var T=this.constraint,P=y.parts.length,S=P>1?1:0,M=S;M<P;M++){var E=y.parts[M];if(v.contains(E.vertices,C))return T.pointA=C,T.pointB={x:C.x-y.position.x,y:C.y-y.position.y},T.bodyB=y,T.angleB=y.angle,h.set(y,!1),this.part=E,this.body=y,!0}return!1},update:function(){var y=this.pointer,C=this.body;if(!this.active||!y){C&&this.stopDrag();return}if(!y.isDown&&C){this.stopDrag();return}else if(y.isDown){if(!C&&!this.getBody(y))return;C=this.body;var T=this.position,P=this.constraint;this.camera.getWorldPoint(y.x,y.y,T),P.pointA.x=T.x,P.pointA.y=T.y,h.set(C,!1),this.world.emit(a.DRAG,C,this)}},stopDrag:function(){var y=this.body,C=this.constraint;C.bodyB=null,C.pointB=null,this.pointer=null,this.body=null,this.part=null,y&&this.world.emit(a.DRAG_END,y,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(a.BEFORE_UPDATE,this.update),this.scene.sys.input.off(o.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(o.POINTER_UP,this.onUp,this)}});s.exports=m},31468:(s,g,e)=>{var n=e(68516),p=e(84125),f=e(56694),u=e(68758),l=e(11299),a=e(45775),o=e(6659),c=e(35416),h=e(72632),d=e(10850),v=e(84125),m=e(39073),y=e(84720),C=e(72005),T=e(10438),P=new f({Extends:o,initialize:function(M,E){o.call(this),this.scene=M,this.engine=a.create(E),this.localWorld=this.engine.world;var A=d(E,"gravity",null);A?this.setGravity(A.x,A.y,A.scale):A===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=d(E,"enabled",!0),this.getDelta=d(E,"getDelta",this.update60Hz);var R=h(E,"runner",{}),w=h(R,"fps",!1),O=h(R,"fps",60),F=h(R,"delta",1e3/O),b=h(R,"deltaMin",1e3/O),I=h(R,"deltaMax",1e3/(O*.5));w||(O=1e3/F),this.runner={fps:O,deltaSampleSize:h(R,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:h(R,"isFixed",!1),delta:F,deltaMin:b,deltaMax:I},this.autoUpdate=d(E,"autoUpdate",!0);var N=d(E,"debug",!1);if(this.drawDebug=typeof N=="object"?!0:N,this.debugGraphic,this.debugConfig={showAxes:h(N,"showAxes",!1),showAngleIndicator:h(N,"showAngleIndicator",!1),angleColor:h(N,"angleColor",15208787),showBroadphase:h(N,"showBroadphase",!1),broadphaseColor:h(N,"broadphaseColor",16757760),showBounds:h(N,"showBounds",!1),boundsColor:h(N,"boundsColor",16777215),showVelocity:h(N,"showVelocity",!1),velocityColor:h(N,"velocityColor",44783),showCollisions:h(N,"showCollisions",!1),collisionColor:h(N,"collisionColor",16094476),showSeparations:h(N,"showSeparations",!1),separationColor:h(N,"separationColor",16753920),showBody:h(N,"showBody",!0),showStaticBody:h(N,"showStaticBody",!0),showInternalEdges:h(N,"showInternalEdges",!1),renderFill:h(N,"renderFill",!1),renderLine:h(N,"renderLine",!0),fillColor:h(N,"fillColor",1075465),fillOpacity:h(N,"fillOpacity",1),lineColor:h(N,"lineColor",2678297),lineOpacity:h(N,"lineOpacity",1),lineThickness:h(N,"lineThickness",1),staticFillColor:h(N,"staticFillColor",857979),staticLineColor:h(N,"staticLineColor",1255396),showSleeping:h(N,"showSleeping",!1),staticBodySleepOpacity:h(N,"staticBodySleepOpacity",.7),sleepFillColor:h(N,"sleepFillColor",4605510),sleepLineColor:h(N,"sleepLineColor",10066585),showSensors:h(N,"showSensors",!0),sensorFillColor:h(N,"sensorFillColor",857979),sensorLineColor:h(N,"sensorLineColor",1255396),showPositions:h(N,"showPositions",!0),positionSize:h(N,"positionSize",4),positionColor:h(N,"positionColor",14697178),showJoint:h(N,"showJoint",!0),jointColor:h(N,"jointColor",14737474),jointLineOpacity:h(N,"jointLineOpacity",1),jointLineThickness:h(N,"jointLineThickness",2),pinSize:h(N,"pinSize",4),pinColor:h(N,"pinColor",4382944),springColor:h(N,"springColor",14697184),anchorColor:h(N,"anchorColor",15724527),anchorSize:h(N,"anchorSize",4),showConvexHulls:h(N,"showConvexHulls",!1),hullColor:h(N,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),h(E,"setBounds",!1)){var z=E.setBounds;if(typeof z=="boolean")this.setBounds();else{var U=h(z,"x",0),W=h(z,"y",0),D=h(z,"width",M.sys.scale.width),V=h(z,"height",M.sys.scale.height),L=h(z,"thickness",64),B=h(z,"left",!0),G=h(z,"right",!0),Y=h(z,"top",!0),X=h(z,"bottom",!0);this.setBounds(U,W,D,V,L,B,G,Y,X)}}},setCompositeRenderStyle:function(S){var M=S.bodies,E=S.constraints,A=S.composites,R,w,O;for(R=0;R<M.length;R++)w=M[R],O=w.render,this.setBodyRenderStyle(w,O.lineColor,O.lineOpacity,O.lineThickness,O.fillColor,O.fillOpacity);for(R=0;R<E.length;R++)w=E[R],O=w.render,this.setConstraintRenderStyle(w,O.lineColor,O.lineOpacity,O.lineThickness,O.pinSize,O.anchorColor,O.anchorSize);for(R=0;R<A.length;R++)w=A[R],this.setCompositeRenderStyle(w);return this},setBodyRenderStyle:function(S,M,E,A,R,w){var O=S.render,F=this.debugConfig;return O?(M==null&&(M=S.isStatic?F.staticLineColor:F.lineColor),E==null&&(E=F.lineOpacity),A==null&&(A=F.lineThickness),R==null&&(R=S.isStatic?F.staticFillColor:F.fillColor),w==null&&(w=F.fillOpacity),M!==!1&&(O.lineColor=M),E!==!1&&(O.lineOpacity=E),A!==!1&&(O.lineThickness=A),R!==!1&&(O.fillColor=R),w!==!1&&(O.fillOpacity=w),this):this},setConstraintRenderStyle:function(S,M,E,A,R,w,O){var F=S.render,b=this.debugConfig;if(!F)return this;if(M==null){var I=F.type;I==="line"?M=b.jointColor:I==="pin"?M=b.pinColor:I==="spring"&&(M=b.springColor)}return E==null&&(E=b.jointLineOpacity),A==null&&(A=b.jointLineThickness),R==null&&(R=b.pinSize),w==null&&(w=b.anchorColor),O==null&&(O=b.anchorSize),M!==!1&&(F.lineColor=M),E!==!1&&(F.lineOpacity=E),A!==!1&&(F.lineThickness=A),R!==!1&&(F.pinSize=R),w!==!1&&(F.anchorColor=w),O!==!1&&(F.anchorSize=O),this},setEventsProxy:function(){var S=this,M=this.engine,E=this.localWorld;this.drawDebug&&(m.on(E,"compositeModified",function(A){S.setCompositeRenderStyle(A)}),m.on(E,"beforeAdd",function(A){for(var R=[].concat(A.object),w=0;w<R.length;w++){var O=R[w],F=O.render;O.type==="body"?S.setBodyRenderStyle(O,F.lineColor,F.lineOpacity,F.lineThickness,F.fillColor,F.fillOpacity):O.type==="composite"?S.setCompositeRenderStyle(O):O.type==="constraint"&&S.setConstraintRenderStyle(O,F.lineColor,F.lineOpacity,F.lineThickness,F.pinSize,F.anchorColor,F.anchorSize)}})),m.on(E,"beforeAdd",function(A){S.emit(c.BEFORE_ADD,A)}),m.on(E,"afterAdd",function(A){S.emit(c.AFTER_ADD,A)}),m.on(E,"beforeRemove",function(A){S.emit(c.BEFORE_REMOVE,A)}),m.on(E,"afterRemove",function(A){S.emit(c.AFTER_REMOVE,A)}),m.on(M,"beforeUpdate",function(A){S.emit(c.BEFORE_UPDATE,A)}),m.on(M,"afterUpdate",function(A){S.emit(c.AFTER_UPDATE,A)}),m.on(M,"collisionStart",function(A){var R=A.pairs,w,O;R.length>0&&(w=R[0].bodyA,O=R[0].bodyB),S.emit(c.COLLISION_START,A,w,O)}),m.on(M,"collisionActive",function(A){var R=A.pairs,w,O;R.length>0&&(w=R[0].bodyA,O=R[0].bodyB),S.emit(c.COLLISION_ACTIVE,A,w,O)}),m.on(M,"collisionEnd",function(A){var R=A.pairs,w,O;R.length>0&&(w=R[0].bodyA,O=R[0].bodyB),S.emit(c.COLLISION_END,A,w,O)})},setBounds:function(S,M,E,A,R,w,O,F,b){return S===void 0&&(S=0),M===void 0&&(M=0),E===void 0&&(E=this.scene.sys.scale.width),A===void 0&&(A=this.scene.sys.scale.height),R===void 0&&(R=64),w===void 0&&(w=!0),O===void 0&&(O=!0),F===void 0&&(F=!0),b===void 0&&(b=!0),this.updateWall(w,"left",S-R,M-R,R,A+R*2),this.updateWall(O,"right",S+E,M-R,R,A+R*2),this.updateWall(F,"top",S,M-R,E,R),this.updateWall(b,"bottom",S,M+A,E,R),this},updateWall:function(S,M,E,A,R,w){var O=this.walls[M];S?(O&&C.remove(this.localWorld,O),E+=R/2,A+=w/2,this.walls[M]=this.create(E,A,R,w,{isStatic:!0,friction:0,frictionStatic:0})):(O&&C.remove(this.localWorld,O),this.walls[M]=null)},createDebugGraphic:function(){var S=this.scene.sys.add.graphics({x:0,y:0});return S.setDepth(Number.MAX_VALUE),this.debugGraphic=S,this.drawDebug=!0,S},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(S,M,E){return S===void 0&&(S=0),M===void 0&&(M=1),E===void 0&&(E=.001),this.localWorld.gravity.x=S,this.localWorld.gravity.y=M,this.localWorld.gravity.scale=E,this},create:function(S,M,E,A,R){var w=n.rectangle(S,M,E,A,R);return C.add(this.localWorld,w),w},add:function(S){return C.add(this.localWorld,S),this},remove:function(S,M){Array.isArray(S)||(S=[S]);for(var E=0;E<S.length;E++){var A=S[E],R=A.body?A.body:A;l.remove(this.localWorld,R,M)}return this},removeConstraint:function(S,M){return l.remove(this.localWorld,S,M),this},convertTilemapLayer:function(S,M){var E=S.layer,A=S.getTilesWithin(0,0,E.width,E.height,{isColliding:!0});return this.convertTiles(A,M),this},convertTiles:function(S,M){if(S.length===0)return this;for(var E=0;E<S.length;E++)new y(this,S[E],M);return this},nextGroup:function(S){return v.nextGroup(S)},nextCategory:function(){return v.nextCategory()},pause:function(){return this.enabled=!1,this.emit(c.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(c.RESUME),this},update:function(S,M){if(!(!this.enabled||!this.autoUpdate)){var E=this.engine,A=this.runner,R=E.timing;A.isFixed?M=this.getDelta(S,M):(M=S-A.timePrev||A.delta,A.timePrev=S,A.deltaHistory.push(M),A.deltaHistory=A.deltaHistory.slice(-A.deltaSampleSize),M=Math.min.apply(null,A.deltaHistory),M=M<A.deltaMin?A.deltaMin:M,M=M>A.deltaMax?A.deltaMax:M,A.delta=M),A.timeScalePrev=R.timeScale,A.frameCounter+=1,S-A.counterTimestamp>=1e3&&(A.fps=A.frameCounter*((S-A.counterTimestamp)/1e3),A.counterTimestamp=S,A.frameCounter=0),a.update(E,M)}},step:function(S){a.update(this.engine,S)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(S){var M=S.hasOwnProperty("body")?S.body:S;return l.get(this.localWorld,M.id,M.type)!==null},getAllBodies:function(){return l.allBodies(this.localWorld)},getAllConstraints:function(){return l.allConstraints(this.localWorld)},getAllComposites:function(){return l.allComposites(this.localWorld)},postUpdate:function(){if(!!this.drawDebug){var S=this.debugConfig,M=this.engine,E=this.debugGraphic,A=l.allBodies(this.localWorld);this.debugGraphic.clear(),S.showBroadphase&&M.broadphase.controller&&this.renderGrid(M.broadphase,E,S.broadphaseColor,.5),S.showBounds&&this.renderBodyBounds(A,E,S.boundsColor,.5),(S.showBody||S.showStaticBody)&&this.renderBodies(A),S.showJoint&&this.renderJoints(),(S.showAxes||S.showAngleIndicator)&&this.renderBodyAxes(A,E,S.showAxes,S.angleColor,.5),S.showVelocity&&this.renderBodyVelocity(A,E,S.velocityColor,1,2),S.showSeparations&&this.renderSeparations(M.pairs.list,E,S.separationColor),S.showCollisions&&this.renderCollisions(M.pairs.list,E,S.collisionColor)}},renderGrid:function(S,M,E,A){M.lineStyle(1,E,A);for(var R=u.keys(S.buckets),w=0;w<R.length;w++){var O=R[w];if(!(S.buckets[O].length<2)){var F=O.split(/C|R/);M.strokeRect(parseInt(F[1],10)*S.bucketWidth,parseInt(F[2],10)*S.bucketHeight,S.bucketWidth,S.bucketHeight)}}return this},renderSeparations:function(S,M,E){M.lineStyle(1,E,1);for(var A=0;A<S.length;A++){var R=S[A];if(!!R.isActive){var w=R.collision,O=w.bodyA,F=w.bodyB,b=O.position,I=F.position,N=w.penetration,z=!O.isStatic&&!F.isStatic?4:1;F.isStatic&&(z=0),M.lineBetween(I.x,I.y,I.x-N.x*z,I.y-N.y*z),z=!O.isStatic&&!F.isStatic?4:1,O.isStatic&&(z=0),M.lineBetween(b.x,b.y,b.x-N.x*z,b.y-N.y*z)}}return this},renderCollisions:function(S,M,E){M.lineStyle(1,E,.5),M.fillStyle(E,1);var A,R;for(A=0;A<S.length;A++)if(R=S[A],!!R.isActive)for(var w=0;w<R.activeContacts.length;w++){var O=R.activeContacts[w],F=O.vertex;M.fillRect(F.x-2,F.y-2,5,5)}for(A=0;A<S.length;A++)if(R=S[A],!!R.isActive){var b=R.collision,I=R.activeContacts;if(I.length>0){var N=I[0].vertex.x,z=I[0].vertex.y;I.length===2&&(N=(I[0].vertex.x+I[1].vertex.x)/2,z=(I[0].vertex.y+I[1].vertex.y)/2),b.bodyB===b.supports[0].body||b.bodyA.isStatic?M.lineBetween(N-b.normal.x*8,z-b.normal.y*8,N,z):M.lineBetween(N+b.normal.x*8,z+b.normal.y*8,N,z)}}return this},renderBodyBounds:function(S,M,E,A){M.lineStyle(1,E,A);for(var R=0;R<S.length;R++){var w=S[R];if(!!w.render.visible){var O=w.bounds;if(O)M.strokeRect(O.min.x,O.min.y,O.max.x-O.min.x,O.max.y-O.min.y);else for(var F=w.parts,b=F.length>1?1:0;b<F.length;b++){var I=F[b];M.strokeRect(I.bounds.min.x,I.bounds.min.y,I.bounds.max.x-I.bounds.min.x,I.bounds.max.y-I.bounds.min.y)}}}return this},renderBodyAxes:function(S,M,E,A,R){M.lineStyle(1,A,R);for(var w=0;w<S.length;w++){var O=S[w],F=O.parts;if(!!O.render.visible){var b,I,N;if(E)for(I=F.length>1?1:0;I<F.length;I++)for(b=F[I],N=0;N<b.axes.length;N++){var z=b.axes[N];M.lineBetween(b.position.x,b.position.y,b.position.x+z.x*20,b.position.y+z.y*20)}else for(I=F.length>1?1:0;I<F.length;I++)for(b=F[I],N=0;N<b.axes.length;N++)M.lineBetween(b.position.x,b.position.y,(b.vertices[0].x+b.vertices[b.vertices.length-1].x)/2,(b.vertices[0].y+b.vertices[b.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(S,M,E,A,R){M.lineStyle(R,E,A);for(var w=0;w<S.length;w++){var O=S[w];!O.render.visible||M.lineBetween(O.position.x,O.position.y,O.position.x+(O.position.x-O.positionPrev.x)*2,O.position.y+(O.position.y-O.positionPrev.y)*2)}return this},renderBodies:function(S){for(var M=this.debugGraphic,E=this.debugConfig,A=E.showBody,R=E.showStaticBody,w=E.showSleeping,O=E.showInternalEdges,F=E.showConvexHulls,b=E.renderFill,I=E.renderLine,N=E.staticBodySleepOpacity,z=E.sleepFillColor,U=E.sleepLineColor,W=E.hullColor,D=0;D<S.length;D++){var V=S[D];if(!!V.render.visible&&!(!R&&V.isStatic||!A&&!V.isStatic)){var L=V.render.lineColor,B=V.render.lineOpacity,G=V.render.lineThickness,Y=V.render.fillColor,X=V.render.fillOpacity;w&&V.isSleeping&&(V.isStatic?(B*=N,X*=N):(L=U,Y=z)),b||(Y=null),I||(L=null),this.renderBody(V,M,O,L,B,G,Y,X);var k=V.parts.length;F&&k>1&&this.renderConvexHull(V,M,W,G)}}},renderBody:function(S,M,E,A,R,w,O,F){A===void 0&&(A=null),R===void 0&&(R=null),w===void 0&&(w=1),O===void 0&&(O=null),F===void 0&&(F=null);for(var b=this.debugConfig,I=b.sensorFillColor,N=b.sensorLineColor,z=S.parts,U=z.length,W=U>1?1:0;W<U;W++){var D=z[W],V=D.render,L=V.opacity;if(!(!V.visible||L===0||D.isSensor&&!b.showSensors)){var B=D.circleRadius;if(M.beginPath(),D.isSensor?(O!==null&&M.fillStyle(I,F*L),A!==null&&M.lineStyle(w,N,R*L)):(O!==null&&M.fillStyle(O,F*L),A!==null&&M.lineStyle(w,A,R*L)),B)M.arc(D.position.x,D.position.y,B,0,2*Math.PI);else{var G=D.vertices,Y=G.length;M.moveTo(G[0].x,G[0].y);for(var X=1;X<Y;X++){var k=G[X];if(!G[X-1].isInternal||E?M.lineTo(k.x,k.y):M.moveTo(k.x,k.y),X<Y&&k.isInternal&&!E){var H=(X+1)%Y;M.moveTo(G[H].x,G[H].y)}}M.closePath()}O!==null&&M.fillPath(),A!==null&&M.strokePath()}}if(b.showPositions&&!S.isStatic){var K=S.position.x,j=S.position.y,$=Math.ceil(b.positionSize/2);M.fillStyle(b.positionColor,1),M.fillRect(K-$,j-$,b.positionSize,b.positionSize)}return this},renderConvexHull:function(S,M,E,A){A===void 0&&(A=1);var R=S.parts,w=R.length;if(w>1){var O=S.vertices;M.lineStyle(A,E),M.beginPath(),M.moveTo(O[0].x,O[0].y);for(var F=1;F<O.length;F++)M.lineTo(O[F].x,O[F].y);M.lineTo(O[0].x,O[0].y),M.strokePath()}return this},renderJoints:function(){for(var S=this.debugGraphic,M=l.allConstraints(this.localWorld),E=0;E<M.length;E++){var A=M[E].render,R=A.lineColor,w=A.lineOpacity,O=A.lineThickness,F=A.pinSize,b=A.anchorColor,I=A.anchorSize;this.renderConstraint(M[E],S,R,w,O,F,b,I)}},renderConstraint:function(S,M,E,A,R,w,O,F){var b=S.render;if(!b.visible||!S.pointA||!S.pointB)return this;M.lineStyle(R,E,A);var I=S.bodyA,N=S.bodyB,z,U;if(I?z=T.add(I.position,S.pointA):z=S.pointA,b.type==="pin")M.strokeCircle(z.x,z.y,w);else{if(N?U=T.add(N.position,S.pointB):U=S.pointB,M.beginPath(),M.moveTo(z.x,z.y),b.type==="spring")for(var W=T.sub(U,z),D=T.perp(T.normalise(W)),V=Math.ceil(u.clamp(S.length/5,12,20)),L,B=1;B<V;B+=1)L=B%2===0?1:-1,M.lineTo(z.x+W.x*(B/V)+D.x*L*4,z.y+W.y*(B/V)+D.y*L*4);M.lineTo(U.x,U.y)}return M.strokePath(),b.anchors&&F>0&&(M.fillStyle(O),M.fillCircle(z.x,z.y,F),M.fillCircle(U.x,U.y,F)),this},resetCollisionIDs:function(){return p._nextCollidingGroupId=1,p._nextNonCollidingGroupId=-1,p._nextCategory=1,this},shutdown:function(){m.off(this.engine),this.removeAllListeners(),C.clear(this.localWorld,!1),a.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});s.exports=P},95349:s=>{var g={setBounce:function(e){return this.body.restitution=e,this}};s.exports=g},70679:s=>{var g={setCollisionCategory:function(e){return this.body.collisionFilter.category=e,this},setCollisionGroup:function(e){return this.body.collisionFilter.group=e,this},setCollidesWith:function(e){var n=0;if(!Array.isArray(e))n=e;else for(var p=0;p<e.length;p++)n|=e[p];return this.body.collisionFilter.mask=n,this},setOnCollide:function(e){return this.body.onCollideCallback=e,this},setOnCollideEnd:function(e){return this.body.onCollideEndCallback=e,this},setOnCollideActive:function(e){return this.body.onCollideActiveCallback=e,this},setOnCollideWith:function(e,n){Array.isArray(e)||(e=[e]);for(var p=0;p<e.length;p++){var f=e[p].hasOwnProperty("body")?e[p].body:e[p];this.body.setOnCollideWith(f,n)}return this}};s.exports=g},77178:(s,g,e)=>{var n=e(84125),p={applyForce:function(f){return this._tempVec2.set(this.body.position.x,this.body.position.y),n.applyForce(this.body,this._tempVec2,f),this},applyForceFrom:function(f,u){return n.applyForce(this.body,f,u),this},thrust:function(f){var u=this.body.angle;return this._tempVec2.set(f*Math.cos(u),f*Math.sin(u)),n.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(f){var u=this.body.angle-Math.PI/2;return this._tempVec2.set(f*Math.cos(u),f*Math.sin(u)),n.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(f){var u=this.body.angle+Math.PI/2;return this._tempVec2.set(f*Math.cos(u),f*Math.sin(u)),n.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(f){var u=this.body.angle-Math.PI;return this._tempVec2.set(f*Math.cos(u),f*Math.sin(u)),n.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};s.exports=p},74015:s=>{var g={setFriction:function(e,n,p){return this.body.friction=e,n!==void 0&&(this.body.frictionAir=n),p!==void 0&&(this.body.frictionStatic=p),this},setFrictionAir:function(e){return this.body.frictionAir=e,this},setFrictionStatic:function(e){return this.body.frictionStatic=e,this}};s.exports=g},11535:s=>{var g={setIgnoreGravity:function(e){return this.body.ignoreGravity=e,this}};s.exports=g},74497:(s,g,e)=>{var n=e(84125),p=e(93736),f={setMass:function(u){return n.setMass(this.body,u),this},setDensity:function(u){return n.setDensity(this.body,u),this},centerOfMass:{get:function(){return new p(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};s.exports=f},75529:s=>{var g={setSensor:function(e){return this.body.isSensor=e,this},isSensor:function(){return this.body.isSensor}};s.exports=g},64024:(s,g,e)=>{var n=e(68516),p=e(84125),f=e(88456),u=e(72632),l=e(10998),a=e(72829),o=e(39745),c={setRectangle:function(h,d,v){return this.setBody({type:"rectangle",width:h,height:d},v)},setCircle:function(h,d){return this.setBody({type:"circle",radius:h},d)},setPolygon:function(h,d,v){return this.setBody({type:"polygon",sides:d,radius:h},v)},setTrapezoid:function(h,d,v,m){return this.setBody({type:"trapezoid",width:h,height:d,slope:v},m)},setExistingBody:function(h,d){d===void 0&&(d=!0),this.body&&this.world.remove(this.body,!0),this.body=h;for(var v=0;v<h.parts.length;v++)h.parts[v].gameObject=this;var m=this;if(h.destroy=function(){m.world.remove(m.body,!0),m.body.gameObject=null},d&&(this.world.has(h)&&this.world.remove(h,!0),this.world.add(h)),this._originComponent){var y=h.render.sprite.xOffset,C=h.render.sprite.yOffset,T=h.centerOfMass.x,P=h.centerOfMass.y;if(f(T,.5)&&f(P,.5))this.setOrigin(y+.5,C+.5);else{var S=h.centerOffset.x,M=h.centerOffset.y;this.setOrigin(y+S/this.displayWidth,C+M/this.displayHeight)}}return this},setBody:function(h,d){if(!h)return this;var v;typeof h=="string"&&(h={type:h});var m=u(h,"type","rectangle"),y=u(h,"x",this._tempVec2.x),C=u(h,"y",this._tempVec2.y),T=u(h,"width",this.width),P=u(h,"height",this.height);switch(m){case"rectangle":v=n.rectangle(y,C,T,P,d);break;case"circle":var S=u(h,"radius",Math.max(T,P)/2),M=u(h,"maxSides",25);v=n.circle(y,C,S,d,M);break;case"trapezoid":var E=u(h,"slope",.5);v=n.trapezoid(y,C,T,P,E,d);break;case"polygon":var A=u(h,"sides",5),R=u(h,"radius",Math.max(T,P)/2);v=n.polygon(y,C,A,R,d);break;case"fromVertices":case"fromVerts":var w=u(h,"verts",null);if(w)if(typeof w=="string"&&(w=o.fromPath(w)),this.body&&!this.body.hasOwnProperty("temp"))p.setVertices(this.body,w),v=this.body;else{var O=u(h,"flagInternal",!1),F=u(h,"removeCollinear",.01),b=u(h,"minimumArea",10);v=n.fromVertices(y,C,w,d,O,F,b)}break;case"fromPhysicsEditor":v=l.parseBody(y,C,h,d);break;case"fromPhysicsTracer":v=a.parseBody(y,C,h,d);break}return v&&this.setExistingBody(v,h.addToWorld),this}};s.exports=c},25106:(s,g,e)=>{var n=e(35416),p=e(22806),f=e(39073),u={setToSleep:function(){return p.set(this.body,!0),this},setAwake:function(){return p.set(this.body,!1),this},setSleepThreshold:function(l){return l===void 0&&(l=60),this.body.sleepThreshold=l,this},setSleepEvents:function(l,a){return this.setSleepStartEvent(l),this.setSleepEndEvent(a),this},setSleepStartEvent:function(l){if(l){var a=this.world;f.on(this.body,"sleepStart",function(o){a.emit(n.SLEEP_START,o,this)})}else f.off(this.body,"sleepStart");return this},setSleepEndEvent:function(l){if(l){var a=this.world;f.on(this.body,"sleepEnd",function(o){a.emit(n.SLEEP_END,o,this)})}else f.off(this.body,"sleepEnd");return this}};s.exports=u},82884:(s,g,e)=>{var n=e(84125),p={setStatic:function(f){return n.setStatic(this.body,f),this},isStatic:function(){return this.body.isStatic}};s.exports=p},4753:(s,g,e)=>{var n=e(84125),p=e(83392),f=e(35786),u=e(62138),l=4,a={x:{get:function(){return this.body.position.x},set:function(o){this._tempVec2.set(o,this.y),n.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(o){this._tempVec2.set(this.x,o),n.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(o){var c=1/this._scaleX,h=1/this._scaleY;this._scaleX=o,this._scaleX===0?this.renderFlags&=~l:this.renderFlags|=l,n.scale(this.body,c,h),n.scale(this.body,o,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(o){var c=1/this._scaleX,h=1/this._scaleY;this._scaleY=o,this._scaleY===0?this.renderFlags&=~l:this.renderFlags|=l,n.scale(this.body,c,h),n.scale(this.body,this._scaleX,o)}},angle:{get:function(){return u(this.body.angle*p.RAD_TO_DEG)},set:function(o){this.rotation=u(o)*p.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(o){this._rotation=f(o),n.setAngle(this.body,this._rotation)}},setPosition:function(o,c){return o===void 0&&(o=0),c===void 0&&(c=o),this._tempVec2.set(o,c),n.setPosition(this.body,this._tempVec2),this},setRotation:function(o){return o===void 0&&(o=0),this._rotation=f(o),n.setAngle(this.body,o),this},setFixedRotation:function(){return n.setInertia(this.body,1/0),this},setAngle:function(o){return o===void 0&&(o=0),this.angle=o,n.setAngle(this.body,this.rotation),this},setScale:function(o,c,h){o===void 0&&(o=1),c===void 0&&(c=o);var d=1/this._scaleX,v=1/this._scaleY;return this._scaleX=o,this._scaleY=c,n.scale(this.body,d,v,h),n.scale(this.body,o,c,h),this}};s.exports=a},37268:(s,g,e)=>{var n=e(84125),p={setVelocityX:function(f){return this._tempVec2.set(f,this.body.velocity.y),n.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(f){return this._tempVec2.set(this.body.velocity.x,f),n.setVelocity(this.body,this._tempVec2),this},setVelocity:function(f,u){return this._tempVec2.set(f,u),n.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return n.getVelocity(this.body)},setAngularVelocity:function(f){return n.setAngularVelocity(this.body,f),this},getAngularVelocity:function(){return n.getAngularVelocity(this.body)},setAngularSpeed:function(f){return n.setAngularSpeed(this.body,f),this},getAngularSpeed:function(){return n.getAngularSpeed(this.body)}};s.exports=p},74527:(s,g,e)=>{s.exports={Bounce:e(95349),Collision:e(70679),Force:e(77178),Friction:e(74015),Gravity:e(11535),Mass:e(74497),Sensor:e(75529),SetBody:e(64024),Sleep:e(25106),Static:e(82884),Transform:e(4753),Velocity:e(37268)}},63201:s=>{s.exports="afteradd"},30474:s=>{s.exports="afterremove"},44822:s=>{s.exports="afterupdate"},88820:s=>{s.exports="beforeadd"},94849:s=>{s.exports="beforeremove"},6391:s=>{s.exports="beforeupdate"},96738:s=>{s.exports="collisionactive"},7916:s=>{s.exports="collisionend"},59529:s=>{s.exports="collisionstart"},10219:s=>{s.exports="dragend"},183:s=>{s.exports="drag"},39143:s=>{s.exports="dragstart"},16483:s=>{s.exports="pause"},35806:s=>{s.exports="resume"},22106:s=>{s.exports="sleepend"},5803:s=>{s.exports="sleepstart"},35416:(s,g,e)=>{s.exports={AFTER_ADD:e(63201),AFTER_REMOVE:e(30474),AFTER_UPDATE:e(44822),BEFORE_ADD:e(88820),BEFORE_REMOVE:e(94849),BEFORE_UPDATE:e(6391),COLLISION_ACTIVE:e(96738),COLLISION_END:e(7916),COLLISION_START:e(59529),DRAG_END:e(10219),DRAG:e(183),DRAG_START:e(39143),PAUSE:e(16483),RESUME:e(35806),SLEEP_END:e(22106),SLEEP_START:e(5803)}},45949:(s,g,e)=>{s.exports={BodyBounds:e(63568),Components:e(74527),Events:e(35416),Factory:e(72653),MatterGameObject:e(3860),Image:e(7030),Matter:e(18171),MatterPhysics:e(50583),PolyDecomp:e(81084),Sprite:e(73658),TileBody:e(84720),PhysicsEditorParser:e(10998),PhysicsJSONParser:e(72829),PointerConstraint:e(88596),World:e(31468)}},84125:(s,g,e)=>{var n={};s.exports=n;var p=e(39745),f=e(10438),u=e(22806),l=e(68758),a=e(84091),o=e(50658);(function(){n._timeCorrection=!0,n._inertiaScale=4,n._nextCollidingGroupId=1,n._nextNonCollidingGroupId=-1,n._nextCategory=1,n._baseDelta=16.666666666666668,n.create=function(h){var d={id:l.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!h.hasOwnProperty("position")&&h.hasOwnProperty("vertices")?h.position=p.centre(h.vertices):h.hasOwnProperty("vertices")||(d.vertices=p.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var v=l.extend(d,h);return c(v,h),v.setOnCollideWith=function(m,y){return y?this.onCollideWith[m.id]=y:delete this.onCollideWith[m.id],this},v},n.nextGroup=function(h){return h?n._nextNonCollidingGroupId--:n._nextCollidingGroupId++},n.nextCategory=function(){return n._nextCategory=n._nextCategory<<1,n._nextCategory};var c=function(h,d){if(d=d||{},n.set(h,{bounds:h.bounds||a.create(h.vertices),positionPrev:h.positionPrev||f.clone(h.position),anglePrev:h.anglePrev||h.angle,vertices:h.vertices,parts:h.parts||[h],isStatic:h.isStatic,isSleeping:h.isSleeping,parent:h.parent||h}),p.rotate(h.vertices,h.angle,h.position),o.rotate(h.axes,h.angle),a.update(h.bounds,h.vertices,h.velocity),n.set(h,{axes:d.axes||h.axes,area:d.area||h.area,mass:d.mass||h.mass,inertia:d.inertia||h.inertia}),h.parts.length===1){var v=h.bounds,m=h.centerOfMass,y=h.centerOffset,C=v.max.x-v.min.x,T=v.max.y-v.min.y;m.x=-(v.min.x-h.position.x)/C,m.y=-(v.min.y-h.position.y)/T,y.x=C*m.x,y.y=T*m.y}};n.set=function(h,d,v){var m;typeof d=="string"&&(m=d,d={},d[m]=v);for(m in d)if(!!Object.prototype.hasOwnProperty.call(d,m))switch(v=d[m],m){case"isStatic":n.setStatic(h,v);break;case"isSleeping":u.set(h,v);break;case"mass":n.setMass(h,v);break;case"density":n.setDensity(h,v);break;case"inertia":n.setInertia(h,v);break;case"vertices":n.setVertices(h,v);break;case"position":n.setPosition(h,v);break;case"angle":n.setAngle(h,v);break;case"velocity":n.setVelocity(h,v);break;case"angularVelocity":n.setAngularVelocity(h,v);break;case"speed":n.setSpeed(h,v);break;case"angularSpeed":n.setAngularSpeed(h,v);break;case"parts":n.setParts(h,v);break;case"centre":n.setCentre(h,v);break;default:h[m]=v}},n.setStatic=function(h,d){for(var v=0;v<h.parts.length;v++){var m=h.parts[v];d?(m.isStatic||(m._original={restitution:m.restitution,friction:m.friction,mass:m.mass,inertia:m.inertia,density:m.density,inverseMass:m.inverseMass,inverseInertia:m.inverseInertia}),m.restitution=0,m.friction=1,m.mass=m.inertia=m.density=1/0,m.inverseMass=m.inverseInertia=0,m.positionPrev.x=m.position.x,m.positionPrev.y=m.position.y,m.anglePrev=m.angle,m.angularVelocity=0,m.speed=0,m.angularSpeed=0,m.motion=0):m._original&&(m.restitution=m._original.restitution,m.friction=m._original.friction,m.mass=m._original.mass,m.inertia=m._original.inertia,m.density=m._original.density,m.inverseMass=m._original.inverseMass,m.inverseInertia=m._original.inverseInertia,m._original=null),m.isStatic=d}},n.setMass=function(h,d){var v=h.inertia/(h.mass/6);h.inertia=v*(d/6),h.inverseInertia=1/h.inertia,h.mass=d,h.inverseMass=1/h.mass,h.density=h.mass/h.area},n.setDensity=function(h,d){n.setMass(h,d*h.area),h.density=d},n.setInertia=function(h,d){h.inertia=d,h.inverseInertia=1/h.inertia},n.setVertices=function(h,d){d[0].body===h?h.vertices=d:h.vertices=p.create(d,h),h.axes=o.fromVertices(h.vertices),h.area=p.area(h.vertices),n.setMass(h,h.density*h.area);var v=p.centre(h.vertices);p.translate(h.vertices,v,-1),n.setInertia(h,n._inertiaScale*p.inertia(h.vertices,h.mass)),p.translate(h.vertices,h.position),a.update(h.bounds,h.vertices,h.velocity)},n.setParts=function(h,d,v){var m;for(d=d.slice(0),h.parts.length=0,h.parts.push(h),h.parent=h,m=0;m<d.length;m++){var y=d[m];y!==h&&(y.parent=h,h.parts.push(y))}if(h.parts.length!==1){if(v=typeof v!="undefined"?v:!0,v){var C=[];for(m=0;m<d.length;m++)C=C.concat(d[m].vertices);p.clockwiseSort(C);var T=p.hull(C),P=p.centre(T);n.setVertices(h,T),p.translate(h.vertices,P)}var S=n._totalProperties(h),M=S.centre.x,E=S.centre.y,A=h.bounds,R=h.centerOfMass,w=h.centerOffset;a.update(A,h.vertices,h.velocity),R.x=-(A.min.x-M)/(A.max.x-A.min.x),R.y=-(A.min.y-E)/(A.max.y-A.min.y),w.x=M,w.y=E,h.area=S.area,h.parent=h,h.position.x=M,h.position.y=E,h.positionPrev.x=M,h.positionPrev.y=E,n.setMass(h,S.mass),n.setInertia(h,S.inertia),n.setPosition(h,S.centre)}},n.setCentre=function(h,d,v){v?(h.positionPrev.x+=d.x,h.positionPrev.y+=d.y,h.position.x+=d.x,h.position.y+=d.y):(h.positionPrev.x=d.x-(h.position.x-h.positionPrev.x),h.positionPrev.y=d.y-(h.position.y-h.positionPrev.y),h.position.x=d.x,h.position.y=d.y)},n.setPosition=function(h,d,v){var m=f.sub(d,h.position);v?(h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.velocity.x=m.x,h.velocity.y=m.y,h.speed=f.magnitude(m)):(h.positionPrev.x+=m.x,h.positionPrev.y+=m.y);for(var y=0;y<h.parts.length;y++){var C=h.parts[y];C.position.x+=m.x,C.position.y+=m.y,p.translate(C.vertices,m),a.update(C.bounds,C.vertices,h.velocity)}},n.setAngle=function(h,d,v){var m=d-h.angle;v?(h.anglePrev=h.angle,h.angularVelocity=m,h.angularSpeed=Math.abs(m)):h.anglePrev+=m;for(var y=0;y<h.parts.length;y++){var C=h.parts[y];C.angle+=m,p.rotate(C.vertices,m,h.position),o.rotate(C.axes,m),a.update(C.bounds,C.vertices,h.velocity),y>0&&f.rotateAbout(C.position,m,h.position,C.position)}},n.setVelocity=function(h,d){var v=h.deltaTime/n._baseDelta;h.positionPrev.x=h.position.x-d.x*v,h.positionPrev.y=h.position.y-d.y*v,h.velocity.x=(h.position.x-h.positionPrev.x)/v,h.velocity.y=(h.position.y-h.positionPrev.y)/v,h.speed=f.magnitude(h.velocity)},n.getVelocity=function(h){var d=n._baseDelta/h.deltaTime;return{x:(h.position.x-h.positionPrev.x)*d,y:(h.position.y-h.positionPrev.y)*d}},n.getSpeed=function(h){return f.magnitude(n.getVelocity(h))},n.setSpeed=function(h,d){n.setVelocity(h,f.mult(f.normalise(n.getVelocity(h)),d))},n.setAngularVelocity=function(h,d){var v=h.deltaTime/n._baseDelta;h.anglePrev=h.angle-d*v,h.angularVelocity=(h.angle-h.anglePrev)/v,h.angularSpeed=Math.abs(h.angularVelocity)},n.getAngularVelocity=function(h){return(h.angle-h.anglePrev)*n._baseDelta/h.deltaTime},n.getAngularSpeed=function(h){return Math.abs(n.getAngularVelocity(h))},n.setAngularSpeed=function(h,d){n.setAngularVelocity(h,l.sign(n.getAngularVelocity(h))*d)},n.translate=function(h,d,v){n.setPosition(h,f.add(h.position,d),v)},n.rotate=function(h,d,v,m){if(!v)n.setAngle(h,h.angle+d,m);else{var y=Math.cos(d),C=Math.sin(d),T=h.position.x-v.x,P=h.position.y-v.y;n.setPosition(h,{x:v.x+(T*y-P*C),y:v.y+(T*C+P*y)},m),n.setAngle(h,h.angle+d,m)}},n.scale=function(h,d,v,m){var y=0,C=0;m=m||h.position;for(var T=0;T<h.parts.length;T++){var P=h.parts[T];P.scale.x=d,P.scale.y=v,p.scale(P.vertices,d,v,m),P.axes=o.fromVertices(P.vertices),P.area=p.area(P.vertices),n.setMass(P,h.density*P.area),p.translate(P.vertices,{x:-P.position.x,y:-P.position.y}),n.setInertia(P,n._inertiaScale*p.inertia(P.vertices,P.mass)),p.translate(P.vertices,{x:P.position.x,y:P.position.y}),T>0&&(y+=P.area,C+=P.inertia),P.position.x=m.x+(P.position.x-m.x)*d,P.position.y=m.y+(P.position.y-m.y)*v,a.update(P.bounds,P.vertices,h.velocity)}h.parts.length>1&&(h.area=y,h.isStatic||(n.setMass(h,h.density*y),n.setInertia(h,C))),h.circleRadius&&(d===v?h.circleRadius*=d:h.circleRadius=null)},n.update=function(h,d){d=(typeof d!="undefined"?d:16.666666666666668)*h.timeScale;var v=d*d,m=n._timeCorrection?d/(h.deltaTime||d):1,y=1-h.frictionAir*(d/l._baseDelta),C=(h.position.x-h.positionPrev.x)*m,T=(h.position.y-h.positionPrev.y)*m;h.velocity.x=C*y+h.force.x/h.mass*v,h.velocity.y=T*y+h.force.y/h.mass*v,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.position.x+=h.velocity.x,h.position.y+=h.velocity.y,h.deltaTime=d,h.angularVelocity=(h.angle-h.anglePrev)*y*m+h.torque/h.inertia*v,h.anglePrev=h.angle,h.angle+=h.angularVelocity,h.speed=f.magnitude(h.velocity),h.angularSpeed=Math.abs(h.angularVelocity);for(var P=0;P<h.parts.length;P++){var S=h.parts[P];p.translate(S.vertices,h.velocity),P>0&&(S.position.x+=h.velocity.x,S.position.y+=h.velocity.y),h.angularVelocity!==0&&(p.rotate(S.vertices,h.angularVelocity,h.position),o.rotate(S.axes,h.angularVelocity),P>0&&f.rotateAbout(S.position,h.angularVelocity,h.position,S.position)),a.update(S.bounds,S.vertices,h.velocity)}},n.updateVelocities=function(h){var d=n._baseDelta/h.deltaTime,v=h.velocity;v.x=(h.position.x-h.positionPrev.x)*d,v.y=(h.position.y-h.positionPrev.y)*d,h.speed=Math.sqrt(v.x*v.x+v.y*v.y),h.angularVelocity=(h.angle-h.anglePrev)*d,h.angularSpeed=Math.abs(h.angularVelocity)},n.applyForce=function(h,d,v){var m={x:d.x-h.position.x,y:d.y-h.position.y};h.force.x+=v.x,h.force.y+=v.y,h.torque+=m.x*v.y-m.y*v.x},n._totalProperties=function(h){for(var d={mass:0,area:0,inertia:0,centre:{x:0,y:0}},v=h.parts.length===1?0:1;v<h.parts.length;v++){var m=h.parts[v],y=m.mass!==1/0?m.mass:1;d.mass+=y,d.area+=m.area,d.inertia+=m.inertia,d.centre=f.add(d.centre,f.mult(m.position,y))}return d.centre=f.div(d.centre,d.mass),d}})()},11299:(s,g,e)=>{var n={};s.exports=n;var p=e(39073),f=e(68758),u=e(84091),l=e(84125);(function(){n.create=function(a){return f.extend({id:f.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},a)},n.setModified=function(a,o,c,h){if(p.trigger(a,"compositeModified",a),a.isModified=o,o&&a.cache&&(a.cache.allBodies=null,a.cache.allConstraints=null,a.cache.allComposites=null),c&&a.parent&&n.setModified(a.parent,o,c,h),h)for(var d=0;d<a.composites.length;d++){var v=a.composites[d];n.setModified(v,o,c,h)}},n.add=function(a,o){var c=[].concat(o);p.trigger(a,"beforeAdd",{object:o});for(var h=0;h<c.length;h++){var d=c[h];switch(d.type){case"body":if(d.parent!==d){f.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}n.addBody(a,d);break;case"constraint":n.addConstraint(a,d);break;case"composite":n.addComposite(a,d);break;case"mouseConstraint":n.addConstraint(a,d.constraint);break}}return p.trigger(a,"afterAdd",{object:o}),a},n.remove=function(a,o,c){var h=[].concat(o);p.trigger(a,"beforeRemove",{object:o});for(var d=0;d<h.length;d++){var v=h[d];switch(v.type){case"body":n.removeBody(a,v,c);break;case"constraint":n.removeConstraint(a,v,c);break;case"composite":n.removeComposite(a,v,c);break;case"mouseConstraint":n.removeConstraint(a,v.constraint);break}}return p.trigger(a,"afterRemove",{object:o}),a},n.addComposite=function(a,o){return a.composites.push(o),o.parent=a,n.setModified(a,!0,!0,!1),a},n.removeComposite=function(a,o,c){var h=f.indexOf(a.composites,o);if(h!==-1&&n.removeCompositeAt(a,h),c)for(var d=0;d<a.composites.length;d++)n.removeComposite(a.composites[d],o,!0);return a},n.removeCompositeAt=function(a,o){return a.composites.splice(o,1),n.setModified(a,!0,!0,!1),a},n.addBody=function(a,o){return a.bodies.push(o),n.setModified(a,!0,!0,!1),a},n.removeBody=function(a,o,c){var h=f.indexOf(a.bodies,o);if(h!==-1&&n.removeBodyAt(a,h),c)for(var d=0;d<a.composites.length;d++)n.removeBody(a.composites[d],o,!0);return a},n.removeBodyAt=function(a,o){return a.bodies.splice(o,1),n.setModified(a,!0,!0,!1),a},n.addConstraint=function(a,o){return a.constraints.push(o),n.setModified(a,!0,!0,!1),a},n.removeConstraint=function(a,o,c){var h=f.indexOf(a.constraints,o);if(h!==-1&&n.removeConstraintAt(a,h),c)for(var d=0;d<a.composites.length;d++)n.removeConstraint(a.composites[d],o,!0);return a},n.removeConstraintAt=function(a,o){return a.constraints.splice(o,1),n.setModified(a,!0,!0,!1),a},n.clear=function(a,o,c){if(c)for(var h=0;h<a.composites.length;h++)n.clear(a.composites[h],o,!0);return o?a.bodies=a.bodies.filter(function(d){return d.isStatic}):a.bodies.length=0,a.constraints.length=0,a.composites.length=0,n.setModified(a,!0,!0,!1),a},n.allBodies=function(a){if(a.cache&&a.cache.allBodies)return a.cache.allBodies;for(var o=[].concat(a.bodies),c=0;c<a.composites.length;c++)o=o.concat(n.allBodies(a.composites[c]));return a.cache&&(a.cache.allBodies=o),o},n.allConstraints=function(a){if(a.cache&&a.cache.allConstraints)return a.cache.allConstraints;for(var o=[].concat(a.constraints),c=0;c<a.composites.length;c++)o=o.concat(n.allConstraints(a.composites[c]));return a.cache&&(a.cache.allConstraints=o),o},n.allComposites=function(a){if(a.cache&&a.cache.allComposites)return a.cache.allComposites;for(var o=[].concat(a.composites),c=0;c<a.composites.length;c++)o=o.concat(n.allComposites(a.composites[c]));return a.cache&&(a.cache.allComposites=o),o},n.get=function(a,o,c){var h,d;switch(c){case"body":h=n.allBodies(a);break;case"constraint":h=n.allConstraints(a);break;case"composite":h=n.allComposites(a).concat(a);break}return h?(d=h.filter(function(v){return v.id.toString()===o.toString()}),d.length===0?null:d[0]):null},n.move=function(a,o,c){return n.remove(a,o),n.add(c,o),a},n.rebase=function(a){for(var o=n.allBodies(a).concat(n.allConstraints(a)).concat(n.allComposites(a)),c=0;c<o.length;c++)o[c].id=f.nextId();return a},n.translate=function(a,o,c){for(var h=c?n.allBodies(a):a.bodies,d=0;d<h.length;d++)l.translate(h[d],o);return a},n.rotate=function(a,o,c,h){for(var d=Math.cos(o),v=Math.sin(o),m=h?n.allBodies(a):a.bodies,y=0;y<m.length;y++){var C=m[y],T=C.position.x-c.x,P=C.position.y-c.y;l.setPosition(C,{x:c.x+(T*d-P*v),y:c.y+(T*v+P*d)}),l.rotate(C,o)}return a},n.scale=function(a,o,c,h,d){for(var v=d?n.allBodies(a):a.bodies,m=0;m<v.length;m++){var y=v[m],C=y.position.x-h.x,T=y.position.y-h.y;l.setPosition(y,{x:h.x+C*o,y:h.y+T*c}),l.scale(y,o,c)}return a},n.bounds=function(a){for(var o=n.allBodies(a),c=[],h=0;h<o.length;h+=1){var d=o[h];c.push(d.bounds.min,d.bounds.max)}return u.create(c)}})()},72005:(s,g,e)=>{var n={};s.exports=n;var p=e(11299);(function(){n.create=p.create,n.add=p.add,n.remove=p.remove,n.clear=p.clear,n.addComposite=p.addComposite,n.addBody=p.addBody,n.addConstraint=p.addConstraint})()},63454:(s,g,e)=>{var n={};s.exports=n;var p=e(39745),f=e(70584);(function(){var u=[],l={overlap:0,axis:null},a={overlap:0,axis:null};n.create=function(o,c){return{pair:null,collided:!1,bodyA:o,bodyB:c,parentA:o.parent,parentB:c.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},n.collides=function(o,c,h){if(n._overlapAxes(l,o.vertices,c.vertices,o.axes),l.overlap<=0||(n._overlapAxes(a,c.vertices,o.vertices,c.axes),a.overlap<=0))return null;var d=h&&h.table[f.id(o,c)],v;d?v=d.collision:(v=n.create(o,c),v.collided=!0,v.bodyA=o.id<c.id?o:c,v.bodyB=o.id<c.id?c:o,v.parentA=v.bodyA.parent,v.parentB=v.bodyB.parent),o=v.bodyA,c=v.bodyB;var m;l.overlap<a.overlap?m=l:m=a;var y=v.normal,C=v.supports,T=m.axis,P=T.x,S=T.y;P*(c.position.x-o.position.x)+S*(c.position.y-o.position.y)<0?(y.x=P,y.y=S):(y.x=-P,y.y=-S),v.tangent.x=-y.y,v.tangent.y=y.x,v.depth=m.overlap,v.penetration.x=y.x*v.depth,v.penetration.y=y.y*v.depth;var M=n._findSupports(o,c,y,1),E=0;if(p.contains(o.vertices,M[0])&&(C[E++]=M[0]),p.contains(o.vertices,M[1])&&(C[E++]=M[1]),E<2){var A=n._findSupports(c,o,y,-1);p.contains(c.vertices,A[0])&&(C[E++]=A[0]),E<2&&p.contains(c.vertices,A[1])&&(C[E++]=A[1])}return E===0&&(C[E++]=M[0]),C.length=E,v},n._overlapAxes=function(o,c,h,d){var v=c.length,m=h.length,y=c[0].x,C=c[0].y,T=h[0].x,P=h[0].y,S=d.length,M=Number.MAX_VALUE,E=0,A,R,w,O,F,b;for(F=0;F<S;F++){var I=d[F],N=I.x,z=I.y,U=y*N+C*z,W=T*N+P*z,D=U,V=W;for(b=1;b<v;b+=1)O=c[b].x*N+c[b].y*z,O>D?D=O:O<U&&(U=O);for(b=1;b<m;b+=1)O=h[b].x*N+h[b].y*z,O>V?V=O:O<W&&(W=O);if(R=D-W,w=V-U,A=R<w?R:w,A<M&&(M=A,E=F,A<=0))break}o.axis=d[E],o.overlap=M},n._projectToAxis=function(o,c,h){for(var d=c[0].x*h.x+c[0].y*h.y,v=d,m=1;m<c.length;m+=1){var y=c[m].x*h.x+c[m].y*h.y;y>v?v=y:y<d&&(d=y)}o.min=d,o.max=v},n._findSupports=function(o,c,h,d){var v=c.vertices,m=v.length,y=o.position.x,C=o.position.y,T=h.x*d,P=h.y*d,S=Number.MAX_VALUE,M,E,A,R,w;for(w=0;w<m;w+=1)E=v[w],R=T*(y-E.x)+P*(C-E.y),R<S&&(S=R,M=E);return A=v[(m+M.index-1)%m],S=T*(y-A.x)+P*(C-A.y),E=v[(M.index+1)%m],T*(y-E.x)+P*(C-E.y)<S?(u[0]=M,u[1]=E,u):(u[0]=M,u[1]=A,u)}})()},17319:s=>{var g={};s.exports=g,function(){g.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},13657:(s,g,e)=>{var n={};s.exports=n;var p=e(68758),f=e(63454);(function(){n.create=function(u){var l={bodies:[],pairs:null};return p.extend(l,u)},n.setBodies=function(u,l){u.bodies=l.slice(0)},n.clear=function(u){u.bodies=[]},n.collisions=function(u){var l=[],a=u.pairs,o=u.bodies,c=o.length,h=n.canCollide,d=f.collides,v,m;for(o.sort(n._compareBoundsX),v=0;v<c;v++){var y=o[v],C=y.bounds,T=y.bounds.max.x,P=y.bounds.max.y,S=y.bounds.min.y,M=y.isStatic||y.isSleeping,E=y.parts.length,A=E===1;for(m=v+1;m<c;m++){var R=o[m],w=R.bounds;if(w.min.x>T)break;if(!(P<w.min.y||S>w.max.y)&&!(M&&(R.isStatic||R.isSleeping))&&!!h(y.collisionFilter,R.collisionFilter)){var O=R.parts.length;if(A&&O===1){var F=d(y,R,a);F&&l.push(F)}else for(var b=E>1?1:0,I=O>1?1:0,N=b;N<E;N++)for(var z=y.parts[N],C=z.bounds,U=I;U<O;U++){var W=R.parts[U],w=W.bounds;if(!(C.min.x>w.max.x||C.max.x<w.min.x||C.max.y<w.min.y||C.min.y>w.max.y)){var F=d(z,W,a);F&&l.push(F)}}}}}return l},n.canCollide=function(u,l){return u.group===l.group&&u.group!==0?u.group>0:(u.mask&l.category)!==0&&(l.mask&u.category)!==0},n._compareBoundsX=function(u,l){return u.bounds.min.x-l.bounds.min.x}})()},70584:(s,g,e)=>{var n={};s.exports=n;var p=e(17319);(function(){n.create=function(f,u){var l=f.bodyA,a=f.bodyB,o={id:n.id(l,a),bodyA:l,bodyB:a,collision:f,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:l.isSensor||a.isSensor,timeCreated:u,timeUpdated:u,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return n.update(o,f,u),o},n.update=function(f,u,l){var a=f.contacts,o=u.supports,c=f.activeContacts,h=u.parentA,d=u.parentB,v=h.vertices.length;f.isActive=!0,f.timeUpdated=l,f.collision=u,f.separation=u.depth,f.inverseMass=h.inverseMass+d.inverseMass,f.friction=h.friction<d.friction?h.friction:d.friction,f.frictionStatic=h.frictionStatic>d.frictionStatic?h.frictionStatic:d.frictionStatic,f.restitution=h.restitution>d.restitution?h.restitution:d.restitution,f.slop=h.slop>d.slop?h.slop:d.slop,u.pair=f,c.length=0;for(var m=0;m<o.length;m++){var y=o[m],C=y.body===h?y.index:v+y.index,T=a[C];T?c.push(T):c.push(a[C]=p.create(y))}},n.setActive=function(f,u,l){u?(f.isActive=!0,f.timeUpdated=l):(f.isActive=!1,f.activeContacts.length=0)},n.id=function(f,u){return f.id<u.id?"A"+f.id+"B"+u.id:"A"+u.id+"B"+f.id}})()},91327:(s,g,e)=>{var n={};s.exports=n;var p=e(70584),f=e(68758);(function(){n.create=function(u){return f.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},u)},n.update=function(u,l,a){var o=u.list,c=o.length,h=u.table,d=l.length,v=u.collisionStart,m=u.collisionEnd,y=u.collisionActive,C,T,P,S;for(v.length=0,m.length=0,y.length=0,S=0;S<c;S++)o[S].confirmedActive=!1;for(S=0;S<d;S++)C=l[S],P=C.pair,P?(P.isActive?y.push(P):v.push(P),p.update(P,C,a),P.confirmedActive=!0):(P=p.create(C,a),h[P.id]=P,v.push(P),o.push(P));var M=[];for(c=o.length,S=0;S<c;S++)P=o[S],P.confirmedActive||(p.setActive(P,!1,a),m.push(P),!P.collision.bodyA.isSleeping&&!P.collision.bodyB.isSleeping&&M.push(S));for(S=0;S<M.length;S++)T=M[S]-S,P=o[T],o.splice(T,1),delete h[P.id]},n.clear=function(u){return u.table={},u.list.length=0,u.collisionStart.length=0,u.collisionActive.length=0,u.collisionEnd.length=0,u}})()},13390:(s,g,e)=>{var n={};s.exports=n;var p=e(10438),f=e(63454),u=e(84091),l=e(68516),a=e(39745);(function(){n.collides=function(o,c){for(var h=[],d=c.length,v=o.bounds,m=f.collides,y=u.overlaps,C=0;C<d;C++){var T=c[C],P=T.parts.length,S=P===1?0:1;if(o!==T&&y(T.bounds,v))for(var M=S;M<P;M++){var E=T.parts[M];if(y(E.bounds,v)){var A=m(E,o);if(A){h.push(A);break}}}}return h},n.ray=function(o,c,h,d){d=d||1e-100;for(var v=p.angle(c,h),m=p.magnitude(p.sub(c,h)),y=(h.x+c.x)*.5,C=(h.y+c.y)*.5,T=l.rectangle(y,C,m,d,{angle:v}),P=n.collides(T,o),S=0;S<P.length;S+=1){var M=P[S];M.body=M.bodyB=M.bodyA}return P},n.region=function(o,c,h){for(var d=[],v=0;v<o.length;v++){var m=o[v],y=u.overlaps(m.bounds,c);(y&&!h||!y&&h)&&d.push(m)}return d},n.point=function(o,c){for(var h=[],d=0;d<o.length;d++){var v=o[d];if(u.contains(v.bounds,c))for(var m=v.parts.length===1?0:1;m<v.parts.length;m++){var y=v.parts[m];if(u.contains(y.bounds,c)&&a.contains(y.vertices,c)){h.push(v);break}}}return h}})()},44272:(s,g,e)=>{var n={};s.exports=n;var p=e(39745),f=e(68758),u=e(84091);(function(){n._restingThresh=2,n._restingThreshTangent=Math.sqrt(6),n._positionDampen=.9,n._positionWarming=.8,n._frictionNormalMultiplier=5,n._frictionMaxStatic=Number.MAX_VALUE,n.preSolvePosition=function(l){var a,o,c,h=l.length;for(a=0;a<h;a++)o=l[a],o.isActive&&(c=o.activeContacts.length,o.collision.parentA.totalContacts+=c,o.collision.parentB.totalContacts+=c)},n.solvePosition=function(l,a,o){var c,h,d,v,m,y,C,T,P=n._positionDampen*(o||1),S=f.clamp(a/f._baseDelta,0,1),M=l.length;for(c=0;c<M;c++)h=l[c],!(!h.isActive||h.isSensor)&&(d=h.collision,v=d.parentA,m=d.parentB,y=d.normal,h.separation=y.x*(m.positionImpulse.x+d.penetration.x-v.positionImpulse.x)+y.y*(m.positionImpulse.y+d.penetration.y-v.positionImpulse.y));for(c=0;c<M;c++)h=l[c],!(!h.isActive||h.isSensor)&&(d=h.collision,v=d.parentA,m=d.parentB,y=d.normal,T=h.separation-h.slop*S,(v.isStatic||m.isStatic)&&(T*=2),v.isStatic||v.isSleeping||(C=P/v.totalContacts,v.positionImpulse.x+=y.x*T*C,v.positionImpulse.y+=y.y*T*C),m.isStatic||m.isSleeping||(C=P/m.totalContacts,m.positionImpulse.x-=y.x*T*C,m.positionImpulse.y-=y.y*T*C))},n.postSolvePosition=function(l){for(var a=n._positionWarming,o=l.length,c=p.translate,h=u.update,d=0;d<o;d++){var v=l[d],m=v.positionImpulse,y=m.x,C=m.y,T=v.velocity;if(v.totalContacts=0,y!==0||C!==0){for(var P=0;P<v.parts.length;P++){var S=v.parts[P];c(S.vertices,m),h(S.bounds,S.vertices,T),S.position.x+=y,S.position.y+=C}v.positionPrev.x+=y,v.positionPrev.y+=C,y*T.x+C*T.y<0?(m.x=0,m.y=0):(m.x*=a,m.y*=a)}}},n.preSolveVelocity=function(l){var a=l.length,o,c;for(o=0;o<a;o++){var h=l[o];if(!(!h.isActive||h.isSensor)){var d=h.activeContacts,v=d.length,m=h.collision,y=m.parentA,C=m.parentB,T=m.normal,P=m.tangent;for(c=0;c<v;c++){var S=d[c],M=S.vertex,E=S.normalImpulse,A=S.tangentImpulse;if(E!==0||A!==0){var R=T.x*E+P.x*A,w=T.y*E+P.y*A;y.isStatic||y.isSleeping||(y.positionPrev.x+=R*y.inverseMass,y.positionPrev.y+=w*y.inverseMass,y.anglePrev+=y.inverseInertia*((M.x-y.position.x)*w-(M.y-y.position.y)*R)),C.isStatic||C.isSleeping||(C.positionPrev.x-=R*C.inverseMass,C.positionPrev.y-=w*C.inverseMass,C.anglePrev-=C.inverseInertia*((M.x-C.position.x)*w-(M.y-C.position.y)*R))}}}}},n.solveVelocity=function(l,a){var o=a/f._baseDelta,c=o*o,h=c*o,d=-n._restingThresh*o,v=n._restingThreshTangent,m=n._frictionNormalMultiplier*o,y=n._frictionMaxStatic,C=l.length,T,P,S,M;for(S=0;S<C;S++){var E=l[S];if(!(!E.isActive||E.isSensor)){var A=E.collision,R=A.parentA,w=A.parentB,O=R.velocity,F=w.velocity,b=A.normal.x,I=A.normal.y,N=A.tangent.x,z=A.tangent.y,U=E.activeContacts,W=U.length,D=1/W,V=R.inverseMass+w.inverseMass,L=E.friction*E.frictionStatic*m;for(O.x=R.position.x-R.positionPrev.x,O.y=R.position.y-R.positionPrev.y,F.x=w.position.x-w.positionPrev.x,F.y=w.position.y-w.positionPrev.y,R.angularVelocity=R.angle-R.anglePrev,w.angularVelocity=w.angle-w.anglePrev,M=0;M<W;M++){var B=U[M],G=B.vertex,Y=G.x-R.position.x,X=G.y-R.position.y,k=G.x-w.position.x,H=G.y-w.position.y,K=O.x-X*R.angularVelocity,j=O.y+Y*R.angularVelocity,$=F.x-H*w.angularVelocity,Q=F.y+k*w.angularVelocity,_=K-$,q=j-Q,et=b*_+I*q,at=N*_+z*q,ht=E.separation+et,ot=Math.min(ht,1);ot=ht<0?0:ot;var tt=ot*L;at<-tt||at>tt?(P=at>0?at:-at,T=E.friction*(at>0?1:-1)*h,T<-P?T=-P:T>P&&(T=P)):(T=at,P=y);var rt=Y*I-X*b,it=k*I-H*b,xt=D/(V+R.inverseInertia*rt*rt+w.inverseInertia*it*it),vt=(1+E.restitution)*et*xt;if(T*=xt,et<d)B.normalImpulse=0;else{var Bt=B.normalImpulse;B.normalImpulse+=vt,B.normalImpulse>0&&(B.normalImpulse=0),vt=B.normalImpulse-Bt}if(at<-v||at>v)B.tangentImpulse=0;else{var Rt=B.tangentImpulse;B.tangentImpulse+=T,B.tangentImpulse<-P&&(B.tangentImpulse=-P),B.tangentImpulse>P&&(B.tangentImpulse=P),T=B.tangentImpulse-Rt}var St=b*vt+N*T,yt=I*vt+z*T;R.isStatic||R.isSleeping||(R.positionPrev.x+=St*R.inverseMass,R.positionPrev.y+=yt*R.inverseMass,R.anglePrev+=(Y*yt-X*St)*R.inverseInertia),w.isStatic||w.isSleeping||(w.positionPrev.x-=St*w.inverseMass,w.positionPrev.y-=yt*w.inverseMass,w.anglePrev-=(k*yt-H*St)*w.inverseInertia)}}}}})()},52838:(s,g,e)=>{var n={};s.exports=n;var p=e(39745),f=e(10438),u=e(22806),l=e(84091),a=e(50658),o=e(68758);(function(){n._warming=.4,n._torqueDampen=1,n._minLength=1e-6,n.create=function(c){var h=c;h.bodyA&&!h.pointA&&(h.pointA={x:0,y:0}),h.bodyB&&!h.pointB&&(h.pointB={x:0,y:0});var d=h.bodyA?f.add(h.bodyA.position,h.pointA):h.pointA,v=h.bodyB?f.add(h.bodyB.position,h.pointB):h.pointB,m=f.magnitude(f.sub(d,v));h.length=typeof h.length!="undefined"?h.length:m,h.id=h.id||o.nextId(),h.label=h.label||"Constraint",h.type="constraint",h.stiffness=h.stiffness||(h.length>0?1:.7),h.damping=h.damping||0,h.angularStiffness=h.angularStiffness||0,h.angleA=h.bodyA?h.bodyA.angle:h.angleA,h.angleB=h.bodyB?h.bodyB.angle:h.angleB,h.plugin={};var y={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return h.length===0&&h.stiffness>.1?(y.type="pin",y.anchors=!1):h.stiffness<.9&&(y.type="spring"),h.render=o.extend(y,h.render),h},n.preSolveAll=function(c){for(var h=0;h<c.length;h+=1){var d=c[h],v=d.constraintImpulse;d.isStatic||v.x===0&&v.y===0&&v.angle===0||(d.position.x+=v.x,d.position.y+=v.y,d.angle+=v.angle)}},n.solveAll=function(c,h){for(var d=o.clamp(h/o._baseDelta,0,1),v=0;v<c.length;v+=1){var m=c[v],y=!m.bodyA||m.bodyA&&m.bodyA.isStatic,C=!m.bodyB||m.bodyB&&m.bodyB.isStatic;(y||C)&&n.solve(c[v],d)}for(v=0;v<c.length;v+=1)m=c[v],y=!m.bodyA||m.bodyA&&m.bodyA.isStatic,C=!m.bodyB||m.bodyB&&m.bodyB.isStatic,!y&&!C&&n.solve(c[v],d)},n.solve=function(c,h){var d=c.bodyA,v=c.bodyB,m=c.pointA,y=c.pointB;if(!(!d&&!v)){d&&!d.isStatic&&(f.rotate(m,d.angle-c.angleA,m),c.angleA=d.angle),v&&!v.isStatic&&(f.rotate(y,v.angle-c.angleB,y),c.angleB=v.angle);var C=m,T=y;if(d&&(C=f.add(d.position,m)),v&&(T=f.add(v.position,y)),!(!C||!T)){var P=f.sub(C,T),S=f.magnitude(P);S<n._minLength&&(S=n._minLength);var M=(S-c.length)/S,E=c.stiffness>=1||c.length===0,A=E?c.stiffness*h:c.stiffness*h*h,R=c.damping*h,w=f.mult(P,M*A),O=(d?d.inverseMass:0)+(v?v.inverseMass:0),F=(d?d.inverseInertia:0)+(v?v.inverseInertia:0),b=O+F,I,N,z,U,W;if(R>0){var D=f.create();z=f.div(P,S),W=f.sub(v&&f.sub(v.position,v.positionPrev)||D,d&&f.sub(d.position,d.positionPrev)||D),U=f.dot(z,W)}d&&!d.isStatic&&(N=d.inverseMass/O,d.constraintImpulse.x-=w.x*N,d.constraintImpulse.y-=w.y*N,d.position.x-=w.x*N,d.position.y-=w.y*N,R>0&&(d.positionPrev.x-=R*z.x*U*N,d.positionPrev.y-=R*z.y*U*N),I=f.cross(m,w)/b*n._torqueDampen*d.inverseInertia*(1-c.angularStiffness),d.constraintImpulse.angle-=I,d.angle-=I),v&&!v.isStatic&&(N=v.inverseMass/O,v.constraintImpulse.x+=w.x*N,v.constraintImpulse.y+=w.y*N,v.position.x+=w.x*N,v.position.y+=w.y*N,R>0&&(v.positionPrev.x+=R*z.x*U*N,v.positionPrev.y+=R*z.y*U*N),I=f.cross(y,w)/b*n._torqueDampen*v.inverseInertia*(1-c.angularStiffness),v.constraintImpulse.angle+=I,v.angle+=I)}}},n.postSolveAll=function(c){for(var h=0;h<c.length;h++){var d=c[h],v=d.constraintImpulse;if(!(d.isStatic||v.x===0&&v.y===0&&v.angle===0)){u.set(d,!1);for(var m=0;m<d.parts.length;m++){var y=d.parts[m];p.translate(y.vertices,v),m>0&&(y.position.x+=v.x,y.position.y+=v.y),v.angle!==0&&(p.rotate(y.vertices,v.angle,d.position),a.rotate(y.axes,v.angle),m>0&&f.rotateAbout(y.position,v.angle,d.position,y.position)),l.update(y.bounds,y.vertices,d.velocity)}v.angle*=n._warming,v.x*=n._warming,v.y*=n._warming}}},n.pointAWorld=function(c){return{x:(c.bodyA?c.bodyA.position.x:0)+(c.pointA?c.pointA.x:0),y:(c.bodyA?c.bodyA.position.y:0)+(c.pointA?c.pointA.y:0)}},n.pointBWorld=function(c){return{x:(c.bodyB?c.bodyB.position.x:0)+(c.pointB?c.pointB.x:0),y:(c.bodyB?c.bodyB.position.y:0)+(c.pointB?c.pointB.y:0)}},n.currentLength=function(c){var h=(c.bodyA?c.bodyA.position.x:0)+(c.pointA?c.pointA.x:0),d=(c.bodyA?c.bodyA.position.y:0)+(c.pointA?c.pointA.y:0),v=(c.bodyB?c.bodyB.position.x:0)+(c.pointB?c.pointB.x:0),m=(c.bodyB?c.bodyB.position.y:0)+(c.pointB?c.pointB.y:0),y=h-v,C=d-m;return Math.sqrt(y*y+C*C)}})()},68758:(s,g,e)=>{var n={};s.exports=n,function(){n._baseDelta=16.666666666666668,n._nextId=0,n._seed=0,n._nowStartTime=+new Date,n._warnedOnce={},n._decomp=null,n.extend=function(f,u){var l,a,o;typeof u=="boolean"?(l=2,o=u):(l=1,o=!0);for(var c=l;c<arguments.length;c++){var h=arguments[c];if(h)for(var d in h)o&&h[d]&&h[d].constructor===Object&&(!f[d]||f[d].constructor===Object)?(f[d]=f[d]||{},n.extend(f[d],o,h[d])):f[d]=h[d]}return f},n.clone=function(f,u){return n.extend({},u,f)},n.keys=function(f){if(Object.keys)return Object.keys(f);var u=[];for(var l in f)u.push(l);return u},n.values=function(f){var u=[];if(Object.keys){for(var l=Object.keys(f),a=0;a<l.length;a++)u.push(f[l[a]]);return u}for(var o in f)u.push(f[o]);return u},n.get=function(f,u,l,a){u=u.split(".").slice(l,a);for(var o=0;o<u.length;o+=1)f=f[u[o]];return f},n.set=function(f,u,l,a,o){var c=u.split(".").slice(a,o);return n.get(f,u,0,-1)[c[c.length-1]]=l,l},n.shuffle=function(f){for(var u=f.length-1;u>0;u--){var l=Math.floor(n.random()*(u+1)),a=f[u];f[u]=f[l],f[l]=a}return f},n.choose=function(f){return f[Math.floor(n.random()*f.length)]},n.isElement=function(f){return typeof HTMLElement!="undefined"?f instanceof HTMLElement:!!(f&&f.nodeType&&f.nodeName)},n.isArray=function(f){return Object.prototype.toString.call(f)==="[object Array]"},n.isFunction=function(f){return typeof f=="function"},n.isPlainObject=function(f){return typeof f=="object"&&f.constructor===Object},n.isString=function(f){return toString.call(f)==="[object String]"},n.clamp=function(f,u,l){return f<u?u:f>l?l:f},n.sign=function(f){return f<0?-1:1},n.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-n._nowStartTime},n.random=function(f,u){return f=typeof f!="undefined"?f:0,u=typeof u!="undefined"?u:1,f+p()*(u-f)};var p=function(){return n._seed=(n._seed*9301+49297)%233280,n._seed/233280};n.colorToNumber=function(f){return f=f.replace("#",""),f.length==3&&(f=f.charAt(0)+f.charAt(0)+f.charAt(1)+f.charAt(1)+f.charAt(2)+f.charAt(2)),parseInt(f,16)},n.logLevel=1,n.log=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.info=function(){console&&n.logLevel>0&&n.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warn=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warnOnce=function(){var f=Array.prototype.slice.call(arguments).join(" ");n._warnedOnce[f]||(n.warn(f),n._warnedOnce[f]=!0)},n.deprecated=function(f,u,l){f[u]=n.chain(function(){n.warnOnce("\u{1F505} deprecated \u{1F505}",l)},f[u])},n.nextId=function(){return n._nextId++},n.indexOf=function(f,u){if(f.indexOf)return f.indexOf(u);for(var l=0;l<f.length;l++)if(f[l]===u)return l;return-1},n.map=function(f,u){if(f.map)return f.map(u);for(var l=[],a=0;a<f.length;a+=1)l.push(u(f[a]));return l},n.topologicalSort=function(f){var u=[],l=[],a=[];for(var o in f)!l[o]&&!a[o]&&n._topologicalSort(o,l,a,f,u);return u},n._topologicalSort=function(f,u,l,a,o){var c=a[f]||[];l[f]=!0;for(var h=0;h<c.length;h+=1){var d=c[h];l[d]||u[d]||n._topologicalSort(d,u,l,a,o)}l[f]=!1,u[f]=!0,o.push(f)},n.chain=function(){for(var f=[],u=0;u<arguments.length;u+=1){var l=arguments[u];l._chained?f.push.apply(f,l._chained):f.push(l)}var a=function(){for(var o,c=new Array(arguments.length),h=0,d=arguments.length;h<d;h++)c[h]=arguments[h];for(h=0;h<f.length;h+=1){var v=f[h].apply(o,c);typeof v!="undefined"&&(o=v)}return o};return a._chained=f,a},n.chainPathBefore=function(f,u,l){return n.set(f,u,n.chain(l,n.get(f,u)))},n.chainPathAfter=function(f,u,l){return n.set(f,u,n.chain(n.get(f,u),l))},n.setDecomp=function(f){n._decomp=f},n.getDecomp=function(){var f=n._decomp;try{!f&&typeof window!="undefined"&&(f=window.decomp),!f&&typeof e.g!="undefined"&&(f=e.g.decomp)}catch(u){f=null}return f}}()},45775:(s,g,e)=>{var n={};s.exports=n;var p=e(22806),f=e(44272),u=e(13657),l=e(91327),a=e(39073),o=e(11299),c=e(52838),h=e(68758),d=e(84125);(function(){n.create=function(v){v=v||{};var m={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},y=h.extend(m,v);return y.world=v.world||o.create({label:"World"}),y.pairs=v.pairs||l.create(),y.detector=v.detector||u.create(),y.grid={buckets:[]},y.world.gravity=y.gravity,y.broadphase=y.grid,y.metrics={},y},n.update=function(v,m){var y=h.now(),C=v.world,T=v.detector,P=v.pairs,S=v.timing,M=S.timestamp,E;m=typeof m!="undefined"?m:h._baseDelta,m*=S.timeScale,S.timestamp+=m,S.lastDelta=m;var A={timestamp:S.timestamp,delta:m};a.trigger(v,"beforeUpdate",A);var R=o.allBodies(C),w=o.allConstraints(C);for(C.isModified&&(u.setBodies(T,R),o.setModified(C,!1,!1,!0)),v.enableSleeping&&p.update(R,m),n._bodiesApplyGravity(R,v.gravity),m>0&&n._bodiesUpdate(R,m),a.trigger(v,"beforeSolve",A),c.preSolveAll(R),E=0;E<v.constraintIterations;E++)c.solveAll(w,m);c.postSolveAll(R),T.pairs=v.pairs;var O=u.collisions(T);l.update(P,O,M),v.enableSleeping&&p.afterCollisions(P.list),P.collisionStart.length>0&&a.trigger(v,"collisionStart",{pairs:P.collisionStart,timestamp:S.timestamp,delta:m});var F=h.clamp(20/v.positionIterations,0,1);for(f.preSolvePosition(P.list),E=0;E<v.positionIterations;E++)f.solvePosition(P.list,m,F);for(f.postSolvePosition(R),c.preSolveAll(R),E=0;E<v.constraintIterations;E++)c.solveAll(w,m);for(c.postSolveAll(R),f.preSolveVelocity(P.list),E=0;E<v.velocityIterations;E++)f.solveVelocity(P.list,m);return n._bodiesUpdateVelocities(R),P.collisionActive.length>0&&a.trigger(v,"collisionActive",{pairs:P.collisionActive,timestamp:S.timestamp,delta:m}),P.collisionEnd.length>0&&a.trigger(v,"collisionEnd",{pairs:P.collisionEnd,timestamp:S.timestamp,delta:m}),n._bodiesClearForces(R),a.trigger(v,"afterUpdate",A),v.timing.lastElapsed=h.now()-y,v},n.merge=function(v,m){if(h.extend(v,m),m.world){v.world=m.world,n.clear(v);for(var y=o.allBodies(v.world),C=0;C<y.length;C++){var T=y[C];p.set(T,!1),T.id=h.nextId()}}},n.clear=function(v){l.clear(v.pairs),u.clear(v.detector)},n._bodiesClearForces=function(v){for(var m=v.length,y=0;y<m;y++){var C=v[y];C.force.x=0,C.force.y=0,C.torque=0}},n._bodiesApplyGravity=function(v,m){var y=typeof m.scale!="undefined"?m.scale:.001,C=v.length;if(!(m.x===0&&m.y===0||y===0))for(var T=0;T<C;T++){var P=v[T];P.isStatic||P.isSleeping||(P.force.y+=P.mass*m.y*y,P.force.x+=P.mass*m.x*y)}},n._bodiesUpdate=function(v,m){for(var y=v.length,C=0;C<y;C++){var T=v[C];T.isStatic||T.isSleeping||d.update(T,m)}},n._bodiesUpdateVelocities=function(v){for(var m=v.length,y=0;y<m;y++)d.updateVelocities(v[y])}})()},39073:(s,g,e)=>{var n={};s.exports=n;var p=e(68758);(function(){n.on=function(f,u,l){for(var a=u.split(" "),o,c=0;c<a.length;c++)o=a[c],f.events=f.events||{},f.events[o]=f.events[o]||[],f.events[o].push(l);return l},n.off=function(f,u,l){if(!u){f.events={};return}typeof u=="function"&&(l=u,u=p.keys(f.events).join(" "));for(var a=u.split(" "),o=0;o<a.length;o++){var c=f.events[a[o]],h=[];if(l&&c)for(var d=0;d<c.length;d++)c[d]!==l&&h.push(c[d]);f.events[a[o]]=h}},n.trigger=function(f,u,l){var a,o,c,h,d=f.events;if(d&&p.keys(d).length>0){l||(l={}),a=u.split(" ");for(var v=0;v<a.length;v++)if(o=a[v],c=d[o],c){h=p.clone(l,!1),h.name=o,h.source=f;for(var m=0;m<c.length;m++)c[m].apply(f,[h])}}}})()},16929:(s,g,e)=>{var n={};s.exports=n;var p=e(84474),f=e(68758);(function(){n.name="matter-js",n.version="0.19.0",n.uses=[],n.used=[],n.use=function(){p.use(n,Array.prototype.slice.call(arguments))},n.before=function(u,l){return u=u.replace(/^Matter./,""),f.chainPathBefore(n,u,l)},n.after=function(u,l){return u=u.replace(/^Matter./,""),f.chainPathAfter(n,u,l)}})()},84474:(s,g,e)=>{var n={};s.exports=n;var p=e(68758);(function(){n._registry={},n.register=function(f){if(n.isPlugin(f)||p.warn("Plugin.register:",n.toString(f),"does not implement all required fields."),f.name in n._registry){var u=n._registry[f.name],l=n.versionParse(f.version).number,a=n.versionParse(u.version).number;l>a?(p.warn("Plugin.register:",n.toString(u),"was upgraded to",n.toString(f)),n._registry[f.name]=f):l<a?p.warn("Plugin.register:",n.toString(u),"can not be downgraded to",n.toString(f)):f!==u&&p.warn("Plugin.register:",n.toString(f),"is already registered to different plugin object")}else n._registry[f.name]=f;return f},n.resolve=function(f){return n._registry[n.dependencyParse(f).name]},n.toString=function(f){return typeof f=="string"?f:(f.name||"anonymous")+"@"+(f.version||f.range||"0.0.0")},n.isPlugin=function(f){return f&&f.name&&f.version&&f.install},n.isUsed=function(f,u){return f.used.indexOf(u)>-1},n.isFor=function(f,u){var l=f.for&&n.dependencyParse(f.for);return!f.for||u.name===l.name&&n.versionSatisfies(u.version,l.range)},n.use=function(f,u){if(f.uses=(f.uses||[]).concat(u||[]),f.uses.length===0){p.warn("Plugin.use:",n.toString(f),"does not specify any dependencies to install.");return}for(var l=n.dependencies(f),a=p.topologicalSort(l),o=[],c=0;c<a.length;c+=1)if(a[c]!==f.name){var h=n.resolve(a[c]);if(!h){o.push("\u274C "+a[c]);continue}n.isUsed(f,h.name)||(n.isFor(h,f)||(p.warn("Plugin.use:",n.toString(h),"is for",h.for,"but installed on",n.toString(f)+"."),h._warned=!0),h.install?h.install(f):(p.warn("Plugin.use:",n.toString(h),"does not specify an install function."),h._warned=!0),h._warned?(o.push("\u{1F536} "+n.toString(h)),delete h._warned):o.push("\u2705 "+n.toString(h)),f.used.push(h.name))}o.length>0&&!h.silent&&p.info(o.join("  "))},n.dependencies=function(f,u){var l=n.dependencyParse(f),a=l.name;if(u=u||{},!(a in u)){f=n.resolve(f)||f,u[a]=p.map(f.uses||[],function(c){n.isPlugin(c)&&n.register(c);var h=n.dependencyParse(c),d=n.resolve(c);return d&&!n.versionSatisfies(d.version,h.range)?(p.warn("Plugin.dependencies:",n.toString(d),"does not satisfy",n.toString(h),"used by",n.toString(l)+"."),d._warned=!0,f._warned=!0):d||(p.warn("Plugin.dependencies:",n.toString(c),"used by",n.toString(l),"could not be resolved."),f._warned=!0),h.name});for(var o=0;o<u[a].length;o+=1)n.dependencies(u[a][o],u);return u}},n.dependencyParse=function(f){if(p.isString(f)){var u=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return u.test(f)||p.warn("Plugin.dependencyParse:",f,"is not a valid dependency string."),{name:f.split("@")[0],range:f.split("@")[1]||"*"}}return{name:f.name,range:f.range||f.version}},n.versionParse=function(f){var u=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;u.test(f)||p.warn("Plugin.versionParse:",f,"is not a valid version or range.");var l=u.exec(f),a=Number(l[4]),o=Number(l[5]),c=Number(l[6]);return{isRange:Boolean(l[1]||l[2]),version:l[3],range:f,operator:l[1]||l[2]||"",major:a,minor:o,patch:c,parts:[a,o,c],prerelease:l[7],number:a*1e8+o*1e4+c}},n.versionSatisfies=function(f,u){u=u||"*";var l=n.versionParse(u),a=n.versionParse(f);if(l.isRange){if(l.operator==="*"||f==="*")return!0;if(l.operator===">")return a.number>l.number;if(l.operator===">=")return a.number>=l.number;if(l.operator==="~")return a.major===l.major&&a.minor===l.minor&&a.patch>=l.patch;if(l.operator==="^")return l.major>0?a.major===l.major&&a.number>=l.number:l.minor>0?a.minor===l.minor&&a.patch>=l.patch:a.patch===l.patch}return f===u||f==="*"}})()},22806:(s,g,e)=>{var n={};s.exports=n;var p=e(84125),f=e(39073),u=e(68758);(function(){n._motionWakeThreshold=.18,n._motionSleepThreshold=.08,n._minBias=.9,n.update=function(l,a){for(var o=a/u._baseDelta,c=n._motionSleepThreshold,h=0;h<l.length;h++){var d=l[h],v=p.getSpeed(d),m=p.getAngularSpeed(d),y=v*v+m*m;if(d.force.x!==0||d.force.y!==0){n.set(d,!1);continue}var C=Math.min(d.motion,y),T=Math.max(d.motion,y);d.motion=n._minBias*C+(1-n._minBias)*T,d.sleepThreshold>0&&d.motion<c?(d.sleepCounter+=1,d.sleepCounter>=d.sleepThreshold/o&&n.set(d,!0)):d.sleepCounter>0&&(d.sleepCounter-=1)}},n.afterCollisions=function(l){for(var a=n._motionSleepThreshold,o=0;o<l.length;o++){var c=l[o];if(!!c.isActive){var h=c.collision,d=h.bodyA.parent,v=h.bodyB.parent;if(!(d.isSleeping&&v.isSleeping||d.isStatic||v.isStatic)&&(d.isSleeping||v.isSleeping)){var m=d.isSleeping&&!d.isStatic?d:v,y=m===d?v:d;!m.isStatic&&y.motion>a&&n.set(m,!1)}}}},n.set=function(l,a){var o=l.isSleeping;a?(l.isSleeping=!0,l.sleepCounter=l.sleepThreshold,l.positionImpulse.x=0,l.positionImpulse.y=0,l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.anglePrev=l.angle,l.speed=0,l.angularSpeed=0,l.motion=0,o||f.trigger(l,"sleepStart")):(l.isSleeping=!1,l.sleepCounter=0,o&&f.trigger(l,"sleepEnd"))}})()},68516:(s,g,e)=>{var n={};s.exports=n;var p=e(39745),f=e(68758),u=e(84125),l=e(84091),a=e(10438);(function(){n.rectangle=function(o,c,h,d,v){v=v||{};var m={label:"Rectangle Body",position:{x:o,y:c},vertices:p.fromPath("L 0 0 L "+h+" 0 L "+h+" "+d+" L 0 "+d)};if(v.chamfer){var y=v.chamfer;m.vertices=p.chamfer(m.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete v.chamfer}return u.create(f.extend({},m,v))},n.trapezoid=function(o,c,h,d,v,m){m=m||{},v*=.5;var y=(1-v*2)*h,C=h*v,T=C+y,P=T+C,S;v<.5?S="L 0 0 L "+C+" "+-d+" L "+T+" "+-d+" L "+P+" 0":S="L 0 0 L "+T+" "+-d+" L "+P+" 0";var M={label:"Trapezoid Body",position:{x:o,y:c},vertices:p.fromPath(S)};if(m.chamfer){var E=m.chamfer;M.vertices=p.chamfer(M.vertices,E.radius,E.quality,E.qualityMin,E.qualityMax),delete m.chamfer}return u.create(f.extend({},M,m))},n.circle=function(o,c,h,d,v){d=d||{};var m={label:"Circle Body",circleRadius:h};v=v||25;var y=Math.ceil(Math.max(10,Math.min(v,h)));return y%2===1&&(y+=1),n.polygon(o,c,y,h,f.extend({},m,d))},n.polygon=function(o,c,h,d,v){if(v=v||{},h<3)return n.circle(o,c,d,v);for(var m=2*Math.PI/h,y="",C=m*.5,T=0;T<h;T+=1){var P=C+T*m,S=Math.cos(P)*d,M=Math.sin(P)*d;y+="L "+S.toFixed(3)+" "+M.toFixed(3)+" "}var E={label:"Polygon Body",position:{x:o,y:c},vertices:p.fromPath(y)};if(v.chamfer){var A=v.chamfer;E.vertices=p.chamfer(E.vertices,A.radius,A.quality,A.qualityMin,A.qualityMax),delete v.chamfer}return u.create(f.extend({},E,v))},n.fromVertices=function(o,c,h,d,v,m,y,C){var T=f.getDecomp(),P,S,M,E,A,R,w,O,F,b,I;for(P=Boolean(T&&T.quickDecomp),d=d||{},M=[],v=typeof v!="undefined"?v:!1,m=typeof m!="undefined"?m:.01,y=typeof y!="undefined"?y:10,C=typeof C!="undefined"?C:.01,f.isArray(h[0])||(h=[h]),b=0;b<h.length;b+=1)if(R=h[b],E=p.isConvex(R),A=!E,A&&!P&&f.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),E||!P)E?R=p.clockwiseSort(R):R=p.hull(R),M.push({position:{x:o,y:c},vertices:R});else{var N=R.map(function(k){return[k.x,k.y]});T.makeCCW(N),m!==!1&&T.removeCollinearPoints(N,m),C!==!1&&T.removeDuplicatePoints&&T.removeDuplicatePoints(N,C);var z=T.quickDecomp(N);for(w=0;w<z.length;w++){var U=z[w],W=U.map(function(k){return{x:k[0],y:k[1]}});y>0&&p.area(W)<y||M.push({position:p.centre(W),vertices:W})}}for(w=0;w<M.length;w++)M[w]=u.create(f.extend(M[w],d));if(v){var D=5;for(w=0;w<M.length;w++){var V=M[w];for(O=w+1;O<M.length;O++){var L=M[O];if(l.overlaps(V.bounds,L.bounds)){var B=V.vertices,G=L.vertices;for(F=0;F<V.vertices.length;F++)for(I=0;I<L.vertices.length;I++){var Y=a.magnitudeSquared(a.sub(B[(F+1)%B.length],G[I])),X=a.magnitudeSquared(a.sub(B[F],G[(I+1)%G.length]));Y<D&&X<D&&(B[F].isInternal=!0,G[I].isInternal=!0)}}}}}return M.length>1?(S=u.create(f.extend({parts:M.slice(0)},d)),u.setPosition(S,{x:o,y:c}),S):M[0]},n.flagCoincidentParts=function(o,c){c===void 0&&(c=5);for(var h=0;h<o.length;h++)for(var d=o[h],v=h+1;v<o.length;v++){var m=o[v];if(l.overlaps(d.bounds,m.bounds))for(var y=d.vertices,C=m.vertices,T=0;T<d.vertices.length;T++)for(var P=0;P<m.vertices.length;P++){var S=a.magnitudeSquared(a.sub(y[(T+1)%y.length],C[P])),M=a.magnitudeSquared(a.sub(y[T],C[(P+1)%C.length]));S<c&&M<c&&(y[T].isInternal=!0,C[P].isInternal=!0)}}return o}})()},56643:(s,g,e)=>{var n={};s.exports=n;var p=e(11299),f=e(52838),u=e(68758),l=e(84125),a=e(68516);(function(){n.stack=function(o,c,h,d,v,m,y){for(var C=p.create({label:"Stack"}),T=o,P=c,S,M=0,E=0;E<d;E++){for(var A=0,R=0;R<h;R++){var w=y(T,P,R,E,S,M);if(w){var O=w.bounds.max.y-w.bounds.min.y,F=w.bounds.max.x-w.bounds.min.x;O>A&&(A=O),l.translate(w,{x:F*.5,y:O*.5}),T=w.bounds.max.x+v,p.addBody(C,w),S=w,M+=1}else T+=v}P+=A+m,T=o}return C},n.chain=function(o,c,h,d,v,m){for(var y=o.bodies,C=1;C<y.length;C++){var T=y[C-1],P=y[C],S=T.bounds.max.y-T.bounds.min.y,M=T.bounds.max.x-T.bounds.min.x,E=P.bounds.max.y-P.bounds.min.y,A=P.bounds.max.x-P.bounds.min.x,R={bodyA:T,pointA:{x:M*c,y:S*h},bodyB:P,pointB:{x:A*d,y:E*v}},w=u.extend(R,m);p.addConstraint(o,f.create(w))}return o.label+=" Chain",o},n.mesh=function(o,c,h,d,v){var m=o.bodies,y,C,T,P,S;for(y=0;y<h;y++){for(C=1;C<c;C++)T=m[C-1+y*c],P=m[C+y*c],p.addConstraint(o,f.create(u.extend({bodyA:T,bodyB:P},v)));if(y>0)for(C=0;C<c;C++)T=m[C+(y-1)*c],P=m[C+y*c],p.addConstraint(o,f.create(u.extend({bodyA:T,bodyB:P},v))),d&&C>0&&(S=m[C-1+(y-1)*c],p.addConstraint(o,f.create(u.extend({bodyA:S,bodyB:P},v)))),d&&C<c-1&&(S=m[C+1+(y-1)*c],p.addConstraint(o,f.create(u.extend({bodyA:S,bodyB:P},v))))}return o.label+=" Mesh",o},n.pyramid=function(o,c,h,d,v,m,y){return n.stack(o,c,h,d,v,m,function(C,T,P,S,M,E){var A=Math.min(d,Math.ceil(h/2)),R=M?M.bounds.max.x-M.bounds.min.x:0;if(!(S>A)){S=A-S;var w=S,O=h-1-S;if(!(P<w||P>O)){E===1&&l.translate(M,{x:(P+(h%2===1?1:-1))*R,y:0});var F=M?P*R:0;return y(o+F+P*v,T,P,S,M,E)}}})},n.newtonsCradle=function(o,c,h,d,v){for(var m=p.create({label:"Newtons Cradle"}),y=0;y<h;y++){var C=1.9,T=a.circle(o+y*(d*C),c+v,d,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),P=f.create({pointA:{x:o+y*(d*C),y:c},bodyB:T});p.addBody(m,T),p.addConstraint(m,P)}return m},n.car=function(o,c,h,d,v){var m=l.nextGroup(!0),y=20,C=-h*.5+y,T=h*.5-y,P=0,S=p.create({label:"Car"}),M=a.rectangle(o,c,h,d,{collisionFilter:{group:m},chamfer:{radius:d*.5},density:2e-4}),E=a.circle(o+C,c+P,v,{collisionFilter:{group:m},friction:.8}),A=a.circle(o+T,c+P,v,{collisionFilter:{group:m},friction:.8}),R=f.create({bodyB:M,pointB:{x:C,y:P},bodyA:E,stiffness:1,length:0}),w=f.create({bodyB:M,pointB:{x:T,y:P},bodyA:A,stiffness:1,length:0});return p.addBody(S,M),p.addBody(S,E),p.addBody(S,A),p.addConstraint(S,R),p.addConstraint(S,w),S},n.softBody=function(o,c,h,d,v,m,y,C,T,P){T=u.extend({inertia:1/0},T),P=u.extend({stiffness:.2,render:{type:"line",anchors:!1}},P);var S=n.stack(o,c,h,d,v,m,function(M,E){return a.circle(M,E,C,T)});return n.mesh(S,h,d,y,P),S.label="Soft Body",S}})()},50658:(s,g,e)=>{var n={};s.exports=n;var p=e(10438),f=e(68758);(function(){n.fromVertices=function(u){for(var l={},a=0;a<u.length;a++){var o=(a+1)%u.length,c=p.normalise({x:u[o].y-u[a].y,y:u[a].x-u[o].x}),h=c.y===0?1/0:c.x/c.y;h=h.toFixed(3).toString(),l[h]=c}return f.values(l)},n.rotate=function(u,l){if(l!==0)for(var a=Math.cos(l),o=Math.sin(l),c=0;c<u.length;c++){var h=u[c],d;d=h.x*a-h.y*o,h.y=h.x*o+h.y*a,h.x=d}}})()},84091:s=>{var g={};s.exports=g,function(){g.create=function(e){var n={min:{x:0,y:0},max:{x:0,y:0}};return e&&g.update(n,e),n},g.update=function(e,n,p){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var f=0;f<n.length;f++){var u=n[f];u.x>e.max.x&&(e.max.x=u.x),u.x<e.min.x&&(e.min.x=u.x),u.y>e.max.y&&(e.max.y=u.y),u.y<e.min.y&&(e.min.y=u.y)}p&&(p.x>0?e.max.x+=p.x:e.min.x+=p.x,p.y>0?e.max.y+=p.y:e.min.y+=p.y)},g.contains=function(e,n){return n.x>=e.min.x&&n.x<=e.max.x&&n.y>=e.min.y&&n.y<=e.max.y},g.overlaps=function(e,n){return e.min.x<=n.max.x&&e.max.x>=n.min.x&&e.max.y>=n.min.y&&e.min.y<=n.max.y},g.translate=function(e,n){e.min.x+=n.x,e.max.x+=n.x,e.min.y+=n.y,e.max.y+=n.y},g.shift=function(e,n){var p=e.max.x-e.min.x,f=e.max.y-e.min.y;e.min.x=n.x,e.max.x=n.x+p,e.min.y=n.y,e.max.y=n.y+f}}()},92765:(s,g,e)=>{var n={};s.exports=n;var p=e(84091),f=e(68758);(function(){n.pathToVertices=function(u,l){typeof window!="undefined"&&!("SVGPathSeg"in window)&&f.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var a,o,c,h,d,v,m,y,C,T,P=[],S,M,E=0,A=0,R=0;l=l||15;var w=function(F,b,I){var N=I%2===1&&I>1;if(!C||F!=C.x||b!=C.y){C&&N?(S=C.x,M=C.y):(S=0,M=0);var z={x:S+F,y:M+b};(N||!C)&&(C=z),P.push(z),A=S+F,R=M+b}},O=function(F){var b=F.pathSegTypeAsLetter.toUpperCase();if(b!=="Z"){switch(b){case"M":case"L":case"T":case"C":case"S":case"Q":A=F.x,R=F.y;break;case"H":A=F.x;break;case"V":R=F.y;break}w(A,R,F.pathSegType)}};for(n._svgPathToAbsolute(u),c=u.getTotalLength(),v=[],a=0;a<u.pathSegList.numberOfItems;a+=1)v.push(u.pathSegList.getItem(a));for(m=v.concat();E<c;){if(T=u.getPathSegAtLength(E),d=v[T],d!=y){for(;m.length&&m[0]!=d;)O(m.shift());y=d}switch(d.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":h=u.getPointAtLength(E),w(h.x,h.y,0);break}E+=l}for(a=0,o=m.length;a<o;++a)O(m[a]);return P},n._svgPathToAbsolute=function(u){for(var l,a,o,c,h,d,v=u.pathSegList,m=0,y=0,C=v.numberOfItems,T=0;T<C;++T){var P=v.getItem(T),S=P.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(S))"x"in P&&(m=P.x),"y"in P&&(y=P.y);else switch("x1"in P&&(o=m+P.x1),"x2"in P&&(h=m+P.x2),"y1"in P&&(c=y+P.y1),"y2"in P&&(d=y+P.y2),"x"in P&&(m+=P.x),"y"in P&&(y+=P.y),S){case"m":v.replaceItem(u.createSVGPathSegMovetoAbs(m,y),T);break;case"l":v.replaceItem(u.createSVGPathSegLinetoAbs(m,y),T);break;case"h":v.replaceItem(u.createSVGPathSegLinetoHorizontalAbs(m),T);break;case"v":v.replaceItem(u.createSVGPathSegLinetoVerticalAbs(y),T);break;case"c":v.replaceItem(u.createSVGPathSegCurvetoCubicAbs(m,y,o,c,h,d),T);break;case"s":v.replaceItem(u.createSVGPathSegCurvetoCubicSmoothAbs(m,y,h,d),T);break;case"q":v.replaceItem(u.createSVGPathSegCurvetoQuadraticAbs(m,y,o,c),T);break;case"t":v.replaceItem(u.createSVGPathSegCurvetoQuadraticSmoothAbs(m,y),T);break;case"a":v.replaceItem(u.createSVGPathSegArcAbs(m,y,P.r1,P.r2,P.angle,P.largeArcFlag,P.sweepFlag),T);break;case"z":case"Z":m=l,y=a;break}(S=="M"||S=="m")&&(l=m,a=y)}}})()},10438:s=>{var g={};s.exports=g,function(){g.create=function(e,n){return{x:e||0,y:n||0}},g.clone=function(e){return{x:e.x,y:e.y}},g.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},g.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},g.rotate=function(e,n,p){var f=Math.cos(n),u=Math.sin(n);p||(p={});var l=e.x*f-e.y*u;return p.y=e.x*u+e.y*f,p.x=l,p},g.rotateAbout=function(e,n,p,f){var u=Math.cos(n),l=Math.sin(n);f||(f={});var a=p.x+((e.x-p.x)*u-(e.y-p.y)*l);return f.y=p.y+((e.x-p.x)*l+(e.y-p.y)*u),f.x=a,f},g.normalise=function(e){var n=g.magnitude(e);return n===0?{x:0,y:0}:{x:e.x/n,y:e.y/n}},g.dot=function(e,n){return e.x*n.x+e.y*n.y},g.cross=function(e,n){return e.x*n.y-e.y*n.x},g.cross3=function(e,n,p){return(n.x-e.x)*(p.y-e.y)-(n.y-e.y)*(p.x-e.x)},g.add=function(e,n,p){return p||(p={}),p.x=e.x+n.x,p.y=e.y+n.y,p},g.sub=function(e,n,p){return p||(p={}),p.x=e.x-n.x,p.y=e.y-n.y,p},g.mult=function(e,n){return{x:e.x*n,y:e.y*n}},g.div=function(e,n){return{x:e.x/n,y:e.y/n}},g.perp=function(e,n){return n=n===!0?-1:1,{x:n*-e.y,y:n*e.x}},g.neg=function(e){return{x:-e.x,y:-e.y}},g.angle=function(e,n){return Math.atan2(n.y-e.y,n.x-e.x)},g._temp=[g.create(),g.create(),g.create(),g.create(),g.create(),g.create()]}()},39745:(s,g,e)=>{var n={};s.exports=n;var p=e(10438),f=e(68758);(function(){n.create=function(u,l){for(var a=[],o=0;o<u.length;o++){var c=u[o],h={x:c.x,y:c.y,index:o,body:l,isInternal:!1};a.push(h)}return a},n.fromPath=function(u,l){var a=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,o=[];return u.replace(a,function(c,h,d){o.push({x:parseFloat(h),y:parseFloat(d)})}),n.create(o,l)},n.centre=function(u){for(var l=n.area(u,!0),a={x:0,y:0},o,c,h,d=0;d<u.length;d++)h=(d+1)%u.length,o=p.cross(u[d],u[h]),c=p.mult(p.add(u[d],u[h]),o),a=p.add(a,c);return p.div(a,6*l)},n.mean=function(u){for(var l={x:0,y:0},a=0;a<u.length;a++)l.x+=u[a].x,l.y+=u[a].y;return p.div(l,u.length)},n.area=function(u,l){for(var a=0,o=u.length-1,c=0;c<u.length;c++)a+=(u[o].x-u[c].x)*(u[o].y+u[c].y),o=c;return l?a/2:Math.abs(a)/2},n.inertia=function(u,l){for(var a=0,o=0,c=u,h,d,v=0;v<c.length;v++)d=(v+1)%c.length,h=Math.abs(p.cross(c[d],c[v])),a+=h*(p.dot(c[d],c[d])+p.dot(c[d],c[v])+p.dot(c[v],c[v])),o+=h;return l/6*(a/o)},n.translate=function(u,l,a){a=typeof a!="undefined"?a:1;var o=u.length,c=l.x*a,h=l.y*a,d;for(d=0;d<o;d++)u[d].x+=c,u[d].y+=h;return u},n.rotate=function(u,l,a){if(l!==0){var o=Math.cos(l),c=Math.sin(l),h=a.x,d=a.y,v=u.length,m,y,C,T;for(T=0;T<v;T++)m=u[T],y=m.x-h,C=m.y-d,m.x=h+(y*o-C*c),m.y=d+(y*c+C*o);return u}},n.contains=function(u,l){for(var a=l.x,o=l.y,c=u.length,h=u[c-1],d,v=0;v<c;v++){if(d=u[v],(a-h.x)*(d.y-h.y)+(o-h.y)*(h.x-d.x)>0)return!1;h=d}return!0},n.scale=function(u,l,a,o){if(l===1&&a===1)return u;o=o||n.centre(u);for(var c,h,d=0;d<u.length;d++)c=u[d],h=p.sub(c,o),u[d].x=o.x+h.x*l,u[d].y=o.y+h.y*a;return u},n.chamfer=function(u,l,a,o,c){typeof l=="number"?l=[l]:l=l||[8],a=typeof a!="undefined"?a:-1,o=o||2,c=c||14;for(var h=[],d=0;d<u.length;d++){var v=u[d-1>=0?d-1:u.length-1],m=u[d],y=u[(d+1)%u.length],C=l[d<l.length?d:l.length-1];if(C===0){h.push(m);continue}var T=p.normalise({x:m.y-v.y,y:v.x-m.x}),P=p.normalise({x:y.y-m.y,y:m.x-y.x}),S=Math.sqrt(2*Math.pow(C,2)),M=p.mult(f.clone(T),C),E=p.normalise(p.mult(p.add(T,P),.5)),A=p.sub(m,p.mult(E,S)),R=a;a===-1&&(R=Math.pow(C,.32)*1.75),R=f.clamp(R,o,c),R%2===1&&(R+=1);for(var w=Math.acos(p.dot(T,P)),O=w/R,F=0;F<R;F++)h.push(p.add(p.rotate(M,O*F),A))}return h},n.clockwiseSort=function(u){var l=n.mean(u);return u.sort(function(a,o){return p.angle(l,a)-p.angle(l,o)}),u},n.isConvex=function(u){var l=0,a=u.length,o,c,h,d;if(a<3)return null;for(o=0;o<a;o++)if(c=(o+1)%a,h=(o+2)%a,d=(u[c].x-u[o].x)*(u[h].y-u[c].y),d-=(u[c].y-u[o].y)*(u[h].x-u[c].x),d<0?l|=1:d>0&&(l|=2),l===3)return!1;return l!==0?!0:null},n.hull=function(u){var l=[],a=[],o,c;for(u=u.slice(0),u.sort(function(h,d){var v=h.x-d.x;return v!==0?v:h.y-d.y}),c=0;c<u.length;c+=1){for(o=u[c];a.length>=2&&p.cross3(a[a.length-2],a[a.length-1],o)<=0;)a.pop();a.push(o)}for(c=u.length-1;c>=0;c-=1){for(o=u[c];l.length>=2&&p.cross3(l[l.length-2],l[l.length-1],o)<=0;)l.pop();l.push(o)}return l.pop(),a.pop(),l.concat(a)}})()},1675:(s,g,e)=>{var n=e(18171),p={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.19.0",silent:!0,install:function(f){f.after("Body.create",function(){p.Body.init(this)}),f.before("Engine.update",function(u){p.Engine.update(u)})},Body:{init:function(f){f.plugin.attractors=f.plugin.attractors||[]}},Engine:{update:function(f){for(var u=n.Composite.allBodies(f.world),l=0;l<u.length;l++){var a=u[l],o=a.plugin.attractors;if(o&&o.length>0)for(var c=0;c<u.length;c++){var h=u[c];if(l!==c)for(var d=0;d<o.length;d++){var v=o[d],m=v;n.Common.isFunction(v)&&(m=v(a,h)),m&&n.Body.applyForce(h,h.position,m)}}}}},Attractors:{gravityConstant:.001,gravity:function(f,u){var l=n.Vector.sub(u.position,f.position),a=n.Vector.magnitudeSquared(l)||1e-4,o=n.Vector.normalise(l),c=-p.Attractors.gravityConstant*(f.mass*u.mass/a),h=n.Vector.mult(o,c);n.Body.applyForce(f,f.position,n.Vector.neg(h)),n.Body.applyForce(u,u.position,h)}}};s.exports=p},80391:s=>{var g={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.19.0",silent:!0,install:function(e){e.after("Engine.create",function(){e.Events.on(this,"collisionStart",function(n){n.pairs.map(function(p){var f=p.bodyA,u=p.bodyB;f.gameObject&&f.gameObject.emit("collide",f,u,p),u.gameObject&&u.gameObject.emit("collide",u,f,p),e.Events.trigger(f,"onCollide",{pair:p}),e.Events.trigger(u,"onCollide",{pair:p}),f.onCollideCallback&&f.onCollideCallback(p),u.onCollideCallback&&u.onCollideCallback(p),f.onCollideWith[u.id]&&f.onCollideWith[u.id](u,p),u.onCollideWith[f.id]&&u.onCollideWith[f.id](f,p)})}),e.Events.on(this,"collisionActive",function(n){n.pairs.map(function(p){var f=p.bodyA,u=p.bodyB;f.gameObject&&f.gameObject.emit("collideActive",f,u,p),u.gameObject&&u.gameObject.emit("collideActive",u,f,p),e.Events.trigger(f,"onCollideActive",{pair:p}),e.Events.trigger(u,"onCollideActive",{pair:p}),f.onCollideActiveCallback&&f.onCollideActiveCallback(p),u.onCollideActiveCallback&&u.onCollideActiveCallback(p)})}),e.Events.on(this,"collisionEnd",function(n){n.pairs.map(function(p){var f=p.bodyA,u=p.bodyB;f.gameObject&&f.gameObject.emit("collideEnd",f,u,p),u.gameObject&&u.gameObject.emit("collideEnd",u,f,p),e.Events.trigger(f,"onCollideEnd",{pair:p}),e.Events.trigger(u,"onCollideEnd",{pair:p}),f.onCollideEndCallback&&f.onCollideEndCallback(p),u.onCollideEndCallback&&u.onCollideEndCallback(p)})})})}};s.exports=g},44097:(s,g,e)=>{var n=e(18171),p={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.19.0",silent:!0,install:function(f){f.after("Engine.update",function(){p.Engine.update(this)})},Engine:{update:function(f){for(var u=f.world,l=n.Composite.allBodies(u),a=n.Composite.allComposites(u),o=0;o<l.length;o+=1){var c=l[o];c.plugin.wrap&&p.Body.wrap(c,c.plugin.wrap)}for(o=0;o<a.length;o+=1){var h=a[o];h.plugin.wrap&&p.Composite.wrap(h,h.plugin.wrap)}}},Bounds:{wrap:function(f,u){var l=null,a=null;if(typeof u.min.x!="undefined"&&typeof u.max.x!="undefined"&&(f.min.x>u.max.x?l=u.min.x-f.max.x:f.max.x<u.min.x&&(l=u.max.x-f.min.x)),typeof u.min.y!="undefined"&&typeof u.max.y!="undefined"&&(f.min.y>u.max.y?a=u.min.y-f.max.y:f.max.y<u.min.y&&(a=u.max.y-f.min.y)),l!==null||a!==null)return{x:l||0,y:a||0}}},Body:{wrap:function(f,u){var l=p.Bounds.wrap(f.bounds,u);return l&&n.Body.translate(f,l),l}},Composite:{bounds:function(f){for(var u=n.Composite.allBodies(f),l=[],a=0;a<u.length;a+=1){var o=u[a];l.push(o.bounds.min,o.bounds.max)}return n.Bounds.create(l)},wrap:function(f,u){var l=p.Bounds.wrap(p.Composite.bounds(f),u);return l&&n.Composite.translate(f,l),l}}};s.exports=p},81084:s=>{s.exports={decomp:w,quickDecomp:I,isSimple:F,removeCollinearPoints:N,removeDuplicatePoints:z,makeCCW:y};function g(D,V,L){L=L||0;var B=[0,0],G,Y,X,k,H,K,j;return G=D[1][1]-D[0][1],Y=D[0][0]-D[1][0],X=G*D[0][0]+Y*D[0][1],k=V[1][1]-V[0][1],H=V[0][0]-V[1][0],K=k*V[0][0]+H*V[0][1],j=G*H-k*Y,U(j,0,L)||(B[0]=(H*X-Y*K)/j,B[1]=(G*K-k*X)/j),B}function e(D,V,L,B){var G=V[0]-D[0],Y=V[1]-D[1],X=B[0]-L[0],k=B[1]-L[1];if(X*Y-k*G===0)return!1;var H=(G*(L[1]-D[1])+Y*(D[0]-L[0]))/(X*Y-k*G),K=(X*(D[1]-L[1])+k*(L[0]-D[0]))/(k*G-X*Y);return H>=0&&H<=1&&K>=0&&K<=1}function n(D,V,L){return(V[0]-D[0])*(L[1]-D[1])-(L[0]-D[0])*(V[1]-D[1])}function p(D,V,L){return n(D,V,L)>0}function f(D,V,L){return n(D,V,L)>=0}function u(D,V,L){return n(D,V,L)<0}function l(D,V,L){return n(D,V,L)<=0}var a=[],o=[];function c(D,V,L,B){if(B){var G=a,Y=o;G[0]=V[0]-D[0],G[1]=V[1]-D[1],Y[0]=L[0]-V[0],Y[1]=L[1]-V[1];var X=G[0]*Y[0]+G[1]*Y[1],k=Math.sqrt(G[0]*G[0]+G[1]*G[1]),H=Math.sqrt(Y[0]*Y[0]+Y[1]*Y[1]),K=Math.acos(X/(k*H));return K<B}else return n(D,V,L)===0}function h(D,V){var L=V[0]-D[0],B=V[1]-D[1];return L*L+B*B}function d(D,V){var L=D.length;return D[V<0?V%L+L:V%L]}function v(D){D.length=0}function m(D,V,L,B){for(var G=L;G<B;G++)D.push(V[G])}function y(D){for(var V=0,L=D,B=1;B<D.length;++B)(L[B][1]<L[V][1]||L[B][1]===L[V][1]&&L[B][0]>L[V][0])&&(V=B);return p(d(D,V-1),d(D,V),d(D,V+1))?!1:(C(D),!0)}function C(D){for(var V=[],L=D.length,B=0;B!==L;B++)V.push(D.pop());for(var B=0;B!==L;B++)D[B]=V[B]}function T(D,V){return u(d(D,V-1),d(D,V),d(D,V+1))}var P=[],S=[];function M(D,V,L){var B,G,Y=P,X=S;if(f(d(D,V+1),d(D,V),d(D,L))&&l(d(D,V-1),d(D,V),d(D,L)))return!1;G=h(d(D,V),d(D,L));for(var k=0;k!==D.length;++k)if(!((k+1)%D.length===V||k===V)&&f(d(D,V),d(D,L),d(D,k+1))&&l(d(D,V),d(D,L),d(D,k))&&(Y[0]=d(D,V),Y[1]=d(D,L),X[0]=d(D,k),X[1]=d(D,k+1),B=g(Y,X),h(d(D,V),B)<G))return!1;return!0}function E(D,V,L){for(var B=0;B!==D.length;++B)if(!(B===V||B===L||(B+1)%D.length===V||(B+1)%D.length===L)&&e(d(D,V),d(D,L),d(D,B),d(D,B+1)))return!1;return!0}function A(D,V,L,B){var G=B||[];if(v(G),V<L)for(var Y=V;Y<=L;Y++)G.push(D[Y]);else{for(var Y=0;Y<=L;Y++)G.push(D[Y]);for(var Y=V;Y<D.length;Y++)G.push(D[Y])}return G}function R(D){for(var V=[],L=[],B=[],G=[],Y=Number.MAX_VALUE,X=0;X<D.length;++X)if(T(D,X)){for(var k=0;k<D.length;++k)if(M(D,X,k)){L=R(A(D,X,k,G)),B=R(A(D,k,X,G));for(var H=0;H<B.length;H++)L.push(B[H]);L.length<Y&&(V=L,Y=L.length,V.push([d(D,X),d(D,k)]))}}return V}function w(D){var V=R(D);return V.length>0?O(D,V):[D]}function O(D,V){if(V.length===0)return[D];if(V instanceof Array&&V.length&&V[0]instanceof Array&&V[0].length===2&&V[0][0]instanceof Array){for(var L=[D],B=0;B<V.length;B++)for(var G=V[B],Y=0;Y<L.length;Y++){var X=L[Y],k=O(X,G);if(k){L.splice(Y,1),L.push(k[0],k[1]);break}}return L}else{var G=V,B=D.indexOf(G[0]),Y=D.indexOf(G[1]);return B!==-1&&Y!==-1?[A(D,B,Y),A(D,Y,B)]:!1}}function F(D){var V=D,L;for(L=0;L<V.length-1;L++)for(var B=0;B<L-1;B++)if(e(V[L],V[L+1],V[B],V[B+1]))return!1;for(L=1;L<V.length-2;L++)if(e(V[0],V[V.length-1],V[L],V[L+1]))return!1;return!0}function b(D,V,L,B,G){G=G||0;var Y=V[1]-D[1],X=D[0]-V[0],k=Y*D[0]+X*D[1],H=B[1]-L[1],K=L[0]-B[0],j=H*L[0]+K*L[1],$=Y*K-H*X;return U($,0,G)?[0,0]:[(K*k-X*j)/$,(Y*j-H*k)/$]}function I(D,V,L,B,G,Y,X){Y=Y||100,X=X||0,G=G||25,V=typeof V!="undefined"?V:[],L=L||[],B=B||[];var k=[0,0],H=[0,0],K=[0,0],j=0,$=0,Q=0,_=0,q=0,et=0,at=0,ht=[],ot=[],tt=D,rt=D;if(rt.length<3)return V;if(X++,X>Y)return console.warn("quickDecomp: max level ("+Y+") reached."),V;for(var it=0;it<D.length;++it)if(T(tt,it)){L.push(tt[it]),j=$=Number.MAX_VALUE;for(var xt=0;xt<D.length;++xt)p(d(tt,it-1),d(tt,it),d(tt,xt))&&l(d(tt,it-1),d(tt,it),d(tt,xt-1))&&(K=b(d(tt,it-1),d(tt,it),d(tt,xt),d(tt,xt-1)),u(d(tt,it+1),d(tt,it),K)&&(Q=h(tt[it],K),Q<$&&($=Q,H=K,et=xt))),p(d(tt,it+1),d(tt,it),d(tt,xt+1))&&l(d(tt,it+1),d(tt,it),d(tt,xt))&&(K=b(d(tt,it+1),d(tt,it),d(tt,xt),d(tt,xt+1)),p(d(tt,it-1),d(tt,it),K)&&(Q=h(tt[it],K),Q<j&&(j=Q,k=K,q=xt)));if(et===(q+1)%D.length)K[0]=(H[0]+k[0])/2,K[1]=(H[1]+k[1])/2,B.push(K),it<q?(m(ht,tt,it,q+1),ht.push(K),ot.push(K),et!==0&&m(ot,tt,et,tt.length),m(ot,tt,0,it+1)):(it!==0&&m(ht,tt,it,tt.length),m(ht,tt,0,q+1),ht.push(K),ot.push(K),m(ot,tt,et,it+1));else{if(et>q&&(q+=D.length),_=Number.MAX_VALUE,q<et)return V;for(var xt=et;xt<=q;++xt)f(d(tt,it-1),d(tt,it),d(tt,xt))&&l(d(tt,it+1),d(tt,it),d(tt,xt))&&(Q=h(d(tt,it),d(tt,xt)),Q<_&&E(tt,it,xt)&&(_=Q,at=xt%D.length));it<at?(m(ht,tt,it,at+1),at!==0&&m(ot,tt,at,rt.length),m(ot,tt,0,it+1)):(it!==0&&m(ht,tt,it,rt.length),m(ht,tt,0,at+1),m(ot,tt,at,it+1))}return ht.length<ot.length?(I(ht,V,L,B,G,Y,X),I(ot,V,L,B,G,Y,X)):(I(ot,V,L,B,G,Y,X),I(ht,V,L,B,G,Y,X)),V}return V.push(D),V}function N(D,V){for(var L=0,B=D.length-1;D.length>3&&B>=0;--B)c(d(D,B-1),d(D,B),d(D,B+1),V)&&(D.splice(B%D.length,1),L++);return L}function z(D,V){for(var L=D.length-1;L>=1;--L)for(var B=D[L],G=L-1;G>=0;--G)if(W(B,D[G],V)){D.splice(L,1);continue}}function U(D,V,L){return L=L||0,Math.abs(D-V)<=L}function W(D,V,L){return U(D[0],V[0],L)&&U(D[1],V[1],L)}},88257:(s,g,e)=>{var n=e(56694),p=new n({initialize:function(u){this.pluginManager=u,this.game=u.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});s.exports=p},18360:s=>{var g={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};s.exports=g},91963:s=>{var g={},e={},n={};n.register=function(p,f,u,l){l===void 0&&(l=!1),g[p]={plugin:f,mapping:u,custom:l}},n.registerCustom=function(p,f,u,l){e[p]={plugin:f,mapping:u,data:l}},n.hasCore=function(p){return g.hasOwnProperty(p)},n.hasCustom=function(p){return e.hasOwnProperty(p)},n.getCore=function(p){return g[p]},n.getCustom=function(p){return e[p]},n.getCustomClass=function(p){return e.hasOwnProperty(p)?e[p].plugin:null},n.remove=function(p){g.hasOwnProperty(p)&&delete g[p]},n.removeCustom=function(p){e.hasOwnProperty(p)&&delete e[p]},n.destroyCorePlugins=function(){for(var p in g)g.hasOwnProperty(p)&&delete g[p]},n.destroyCustomPlugins=function(){for(var p in e)e.hasOwnProperty(p)&&delete e[p]},s.exports=n},49274:(s,g,e)=>{var n=e(56694),p=e(97081),f=e(6659),u=e(76846),l=e(99325),a=e(61286),o=e(72632),c=e(91963),h=e(66458),d=new n({Extends:f,initialize:function(m){f.call(this),this.game=m,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],m.isBooted?this.boot():m.events.once(p.BOOT,this.boot,this)},boot:function(){var v,m,y,C,T,P,S,M=this.game.config,E=M.installGlobalPlugins;for(E=E.concat(this._pendingGlobal),v=0;v<E.length;v++)m=E[v],y=o(m,"key",null),C=o(m,"plugin",null),T=o(m,"start",!1),P=o(m,"mapping",null),S=o(m,"data",null),y&&(C?this.install(y,C,T,P,S):console.warn("Missing `plugin` for key: "+y));for(E=M.installScenePlugins,E=E.concat(this._pendingScene),v=0;v<E.length;v++)m=E[v],y=o(m,"key",null),C=o(m,"plugin",null),P=o(m,"mapping",null),y&&(C?this.installScenePlugin(y,C,P):console.warn("Missing `plugin` for key: "+y));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(p.DESTROY,this.destroy,this)},addToScene:function(v,m,y){var C,T,P,S=this.game,M=v.scene,E=v.settings.map,A=v.settings.isBooted;for(C=0;C<m.length;C++)T=m[C],S[T]?(v[T]=S[T],E.hasOwnProperty(T)&&(M[E[T]]=v[T])):T==="game"&&E.hasOwnProperty(T)&&(M[E[T]]=S);for(var R=0;R<y.length;R++)for(P=y[R],C=0;C<P.length;C++)if(T=P[C],!!c.hasCore(T)){var w=c.getCore(T),O=w.mapping,F=new w.plugin(M,this,O);v[O]=F,w.custom?M[O]=F:E.hasOwnProperty(O)&&(M[E[O]]=F),A&&F.boot()}for(P=this.plugins,C=0;C<P.length;C++){var b=P[C];b.mapping&&(M[b.mapping]=b.plugin)}},getDefaultScenePlugins:function(){var v=this.game.config.defaultPlugins;return v=v.concat(this.scenePlugins),v},installScenePlugin:function(v,m,y,C,T){if(T===void 0&&(T=!1),typeof m!="function"){console.warn("Invalid Scene Plugin: "+v);return}if(c.hasCore(v)||c.register(v,m,y,!0),this.scenePlugins.indexOf(v)===-1)this.scenePlugins.push(v);else if(!T&&c.hasCore(v)){console.warn("Scene Plugin key in use: "+v);return}if(C){var P=new m(C,this,v);C.sys[v]=P,y&&y!==""&&(C[y]=P),P.boot()}},install:function(v,m,y,C,T){if(y===void 0&&(y=!1),C===void 0&&(C=null),T===void 0&&(T=null),typeof m!="function")return console.warn("Invalid Plugin: "+v),null;if(c.hasCustom(v))return console.warn("Plugin key in use: "+v),null;if(C!==null&&(y=!0),!this.game.isBooted)this._pendingGlobal.push({key:v,plugin:m,start:y,mapping:C,data:T});else if(c.registerCustom(v,m,C,T),y)return this.start(v);return null},getIndex:function(v){for(var m=this.plugins,y=0;y<m.length;y++){var C=m[y];if(C.key===v)return y}return-1},getEntry:function(v){var m=this.getIndex(v);if(m!==-1)return this.plugins[m]},isActive:function(v){var m=this.getEntry(v);return m&&m.active},start:function(v,m){m===void 0&&(m=v);var y=this.getEntry(m);return y&&!y.active?(y.active=!0,y.plugin.start()):y||(y=this.createEntry(v,m)),y?y.plugin:null},createEntry:function(v,m){var y=c.getCustom(v);if(y){var C=new y.plugin(this);y={key:m,plugin:C,active:!0,mapping:y.mapping,data:y.data},this.plugins.push(y),C.init(y.data),C.start()}return y},stop:function(v){var m=this.getEntry(v);return m&&m.active&&(m.active=!1,m.plugin.stop()),this},get:function(v,m){m===void 0&&(m=!0);var y=this.getEntry(v);if(y)return y.plugin;var C=this.getClass(v);return C&&m?(y=this.createEntry(v,v),y?y.plugin:null):C||null},getClass:function(v){return c.getCustomClass(v)},removeGlobalPlugin:function(v){var m=this.getEntry(v);m&&h(this.plugins,m),c.removeCustom(v)},removeScenePlugin:function(v){h(this.scenePlugins,v),c.remove(v)},registerGameObject:function(v,m,y){return m&&a.register(v,m),y&&l.register(v,y),this},removeGameObject:function(v,m,y){return m===void 0&&(m=!0),y===void 0&&(y=!0),m&&a.remove(v),y&&l.remove(v),this},registerFileType:function(v,m,y){u.register(v,m),y&&y.sys.load&&(y.sys.load[v]=m)},destroy:function(){for(var v=0;v<this.plugins.length;v++)this.plugins[v].plugin.destroy();c.destroyCustomPlugins(),this.game.noReturn&&c.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});s.exports=d},39283:(s,g,e)=>{var n=e(88257),p=e(56694),f=e(7599),u=new p({Extends:n,initialize:function(a,o,c){n.call(this,o),this.scene=a,this.systems=a.sys,this.pluginKey=c,a.sys.events.once(f.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});s.exports=u},45615:(s,g,e)=>{s.exports={BasePlugin:e(88257),DefaultPlugins:e(18360),PluginCache:e(91963),PluginManager:e(49274),ScenePlugin:e(39283)}},75205:()=>{!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(s){let g=performance.now(),e=this.getVideoPlaybackQuality(),n=this.mozPresentedFrames||this.mozPaintedFrames||e.totalVideoFrames-e.droppedVideoFrames,p=(f,u)=>{let l=this.getVideoPlaybackQuality(),a=this.mozPresentedFrames||this.mozPaintedFrames||l.totalVideoFrames-l.droppedVideoFrames;if(a>n){let o=this.mozFrameDelay||l.totalFrameDelay-e.totalFrameDelay||0,c=u-f;s(u,{presentationTime:u+o*1e3,expectedDisplayTime:u+c,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+c/1e3,presentedFrames:a,processingDuration:o}),delete this._rvfcpolyfillmap[g]}else this._rvfcpolyfillmap[g]=requestAnimationFrame(o=>p(u,o))};return this._rvfcpolyfillmap[g]=requestAnimationFrame(f=>p(g,f)),g},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(s){cancelAnimationFrame(this._rvfcpolyfillmap[s]),delete this._rvfcpolyfillmap[s]})},95723:s=>{s.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},27394:s=>{var g={DEFAULT:0,LINEAR:0,NEAREST:1};s.exports=g},91135:(s,g,e)=>{var n=e(89787),p=e(61840),f=e(56694),u=e(86459),l=e(6659),a=e(81044),o=e(32834),c=e(40444),h=e(38203),d=e(69360),v=new f({Extends:l,initialize:function(y){l.call(this);var C=y.config;this.config={clearBeforeRender:C.clearBeforeRender,backgroundColor:C.backgroundColor,antialias:C.antialias,roundPixels:C.roundPixels},this.game=y,this.type=u.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=y.canvas;var T={alpha:y.config.transparent,desynchronized:y.config.desynchronized,willReadFrequently:!1};this.gameContext=C.context?C.context:this.gameCanvas.getContext("2d",T),this.currentContext=this.gameContext,this.antialias=y.config.antialias,this.blendModes=o(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new d,this._tempMatrix2=new d,this._tempMatrix3=new d,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(h.READY,this.boot,this)},boot:function(){var m=this.game,y=m.scale.baseSize;this.width=y.width,this.height=y.height,this.isBooted=!0,m.scale.on(c.RESIZE,this.onResize,this),this.resize(y.width,y.height)},onResize:function(m,y){(y.width!==this.width||y.height!==this.height)&&this.resize(y.width,y.height)},resize:function(m,y){this.width=m,this.height=y,this.emit(a.RESIZE,m,y)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(m){return this.currentContext.globalCompositeOperation=m,this},setContext:function(m){return this.currentContext=m||this.gameContext,this},setAlpha:function(m){return this.currentContext.globalAlpha=m,this},preRender:function(){var m=this.gameContext,y=this.config,C=this.width,T=this.height;m.globalAlpha=1,m.globalCompositeOperation="source-over",m.setTransform(1,0,0,1,0,0),y.clearBeforeRender&&(m.clearRect(0,0,C,T),y.transparent||(m.fillStyle=y.backgroundColor.rgba,m.fillRect(0,0,C,T))),m.save(),this.drawCount=0,this.emit(a.PRE_RENDER)},render:function(m,y,C){var T=y.length;this.emit(a.RENDER,m,C);var P=C.x,S=C.y,M=C.width,E=C.height,A=C.renderToTexture?C.context:m.sys.context;A.save(),this.game.scene.customViewports&&(A.beginPath(),A.rect(P,S,M,E),A.clip()),C.emit(n.PRE_RENDER,C),this.currentContext=A;var R=C.mask;R&&R.preRenderCanvas(this,null,C._maskCamera),C.transparent||(A.fillStyle=C.backgroundColor.rgba,A.fillRect(P,S,M,E)),A.globalAlpha=C.alpha,A.globalCompositeOperation="source-over",this.drawCount+=T,C.renderToTexture&&C.emit(n.PRE_RENDER,C),C.matrix.copyToContext(A);for(var w=0;w<T;w++){var O=y[w];O.mask&&O.mask.preRenderCanvas(this,O,C),O.renderCanvas(this,O,C),O.mask&&O.mask.postRenderCanvas(this,O,C)}A.setTransform(1,0,0,1,0,0),A.globalCompositeOperation="source-over",A.globalAlpha=1,C.flashEffect.postRenderCanvas(A),C.fadeEffect.postRenderCanvas(A),C.dirty=!1,R&&R.postRenderCanvas(this),A.restore(),C.renderToTexture&&(C.emit(n.POST_RENDER,C),C.renderToGame&&m.sys.context.drawImage(C.canvas,P,S)),C.emit(n.POST_RENDER,C)},postRender:function(){var m=this.gameContext;m.restore(),this.emit(a.POST_RENDER);var y=this.snapshotState;y.callback&&(p(this.gameCanvas,y),y.callback=null)},snapshotCanvas:function(m,y,C,T,P,S,M,E,A){C===void 0&&(C=!1),this.snapshotArea(T,P,S,M,y,E,A);var R=this.snapshotState;return R.getPixel=C,p(m,R),R.callback=null,this},snapshot:function(m,y,C){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,m,y,C)},snapshotArea:function(m,y,C,T,P,S,M){var E=this.snapshotState;return E.callback=P,E.type=S,E.encoder=M,E.getPixel=!1,E.x=m,E.y=y,E.width=Math.min(C,this.gameCanvas.width),E.height=Math.min(T,this.gameCanvas.height),this},snapshotPixel:function(m,y,C){return this.snapshotArea(m,y,1,1,C),this.snapshotState.getPixel=!0,this},batchSprite:function(m,y,C,T){var P=C.alpha*m.alpha;if(P!==0){var S=this.currentContext,M=this._tempMatrix1,E=this._tempMatrix2,A=y.canvasData,R=A.x,w=A.y,O=y.cutWidth,F=y.cutHeight,b=y.customPivot,I=y.source.resolution,N=m.displayOriginX,z=m.displayOriginY,U=-N+y.x,W=-z+y.y;if(m.isCropped){var D=m._crop;(D.flipX!==m.flipX||D.flipY!==m.flipY)&&y.updateCropUVs(D,m.flipX,m.flipY),O=D.cw,F=D.ch,R=D.cx,w=D.cy,U=-N+D.x,W=-z+D.y,m.flipX&&(U>=0?U=-(U+O):U<0&&(U=Math.abs(U)-O)),m.flipY&&(W>=0?W=-(W+F):W<0&&(W=Math.abs(W)-F))}var V=1,L=1;m.flipX&&(b||(U+=-y.realWidth+N*2),V=-1),m.flipY&&(b||(W+=-y.realHeight+z*2),L=-1);var B=m.x,G=m.y;C.roundPixels&&(B=Math.floor(B),G=Math.floor(G)),E.applyITRS(B,G,m.rotation,m.scaleX*V,m.scaleY*L),M.copyFrom(C.matrix),T?(M.multiplyWithOffset(T,-C.scrollX*m.scrollFactorX,-C.scrollY*m.scrollFactorY),E.e=B,E.f=G):(E.e-=C.scrollX*m.scrollFactorX,E.f-=C.scrollY*m.scrollFactorY),M.multiply(E),C.roundPixels&&(M.e=Math.round(M.e),M.f=Math.round(M.f)),S.save(),M.setToContext(S),S.globalCompositeOperation=this.blendModes[m.blendMode],S.globalAlpha=P,S.imageSmoothingEnabled=!y.source.scaleMode,m.mask&&m.mask.preRenderCanvas(this,m,C),O>0&&F>0&&S.drawImage(y.source.image,R,w,O,F,U,W,O/I,F/I),m.mask&&m.mask.postRenderCanvas(this,m,C),S.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});s.exports=v},6046:(s,g,e)=>{s.exports={CanvasRenderer:e(91135),GetBlendModes:e(32834),SetTransform:e(49584)}},32834:(s,g,e)=>{var n=e(95723),p=e(98581),f=function(){var u=[],l=p.supportNewBlendModes,a="source-over";return u[n.NORMAL]=a,u[n.ADD]="lighter",u[n.MULTIPLY]=l?"multiply":a,u[n.SCREEN]=l?"screen":a,u[n.OVERLAY]=l?"overlay":a,u[n.DARKEN]=l?"darken":a,u[n.LIGHTEN]=l?"lighten":a,u[n.COLOR_DODGE]=l?"color-dodge":a,u[n.COLOR_BURN]=l?"color-burn":a,u[n.HARD_LIGHT]=l?"hard-light":a,u[n.SOFT_LIGHT]=l?"soft-light":a,u[n.DIFFERENCE]=l?"difference":a,u[n.EXCLUSION]=l?"exclusion":a,u[n.HUE]=l?"hue":a,u[n.SATURATION]=l?"saturation":a,u[n.COLOR]=l?"color":a,u[n.LUMINOSITY]=l?"luminosity":a,u[n.ERASE]="destination-out",u[n.SOURCE_IN]="source-in",u[n.SOURCE_OUT]="source-out",u[n.SOURCE_ATOP]="source-atop",u[n.DESTINATION_OVER]="destination-over",u[n.DESTINATION_IN]="destination-in",u[n.DESTINATION_OUT]="destination-out",u[n.DESTINATION_ATOP]="destination-atop",u[n.LIGHTER]="lighter",u[n.COPY]="copy",u[n.XOR]="xor",u};s.exports=f},49584:(s,g,e)=>{var n=e(73329),p=function(f,u,l,a,o){var c=a.alpha*l.alpha;if(c<=0)return!1;var h=n(l,a,o).calc;return u.globalCompositeOperation=f.blendModes[l.blendMode],u.globalAlpha=c,u.save(),h.setToContext(u),u.imageSmoothingEnabled=l.frame?!l.frame.source.scaleMode:f.antialias,!0};s.exports=p},70936:s=>{s.exports="postrender"},99298:s=>{s.exports="prerender"},7743:s=>{s.exports="render"},99519:s=>{s.exports="resize"},81044:(s,g,e)=>{s.exports={POST_RENDER:e(70936),PRE_RENDER:e(99298),RENDER:e(7743),RESIZE:e(99519)}},42069:(s,g,e)=>{s.exports={Canvas:e(6046),Events:e(81044),Snapshot:e(95528),WebGL:e(55478)}},61840:(s,g,e)=>{var n=e(61068),p=e(27119),f=e(72632),u=function(l,a){var o=f(a,"callback"),c=f(a,"type","image/png"),h=f(a,"encoder",.92),d=Math.abs(Math.round(f(a,"x",0))),v=Math.abs(Math.round(f(a,"y",0))),m=Math.floor(f(a,"width",l.width)),y=Math.floor(f(a,"height",l.height)),C=f(a,"getPixel",!1);if(C){var T=l.getContext("2d",{willReadFrequently:!1}),P=T.getImageData(d,v,1,1),S=P.data;o.call(null,new p(S[0],S[1],S[2],S[3]))}else if(d!==0||v!==0||m!==l.width||y!==l.height){var M=n.createWebGL(this,m,y),E=M.getContext("2d",{willReadFrequently:!0});m>0&&y>0&&E.drawImage(l,d,v,m,y,0,0,m,y);var A=new Image;A.onerror=function(){o.call(null),n.remove(M)},A.onload=function(){o.call(null,A),n.remove(M)},A.src=M.toDataURL(c,h)}else{var R=new Image;R.onerror=function(){o.call(null)},R.onload=function(){o.call(null,R)},R.src=l.toDataURL(c,h)}};s.exports=u},1217:(s,g,e)=>{var n=e(61068),p=e(27119),f=e(72632),u=function(l,a){var o=l,c=f(a,"callback"),h=f(a,"type","image/png"),d=f(a,"encoder",.92),v=Math.abs(Math.round(f(a,"x",0))),m=Math.abs(Math.round(f(a,"y",0))),y=f(a,"getPixel",!1),C=f(a,"isFramebuffer",!1),T=C?f(a,"bufferWidth",1):o.drawingBufferWidth,P=C?f(a,"bufferHeight",1):o.drawingBufferHeight;if(y){var S=new Uint8Array(4),M=C?m:P-m;o.readPixels(v,M,1,1,o.RGBA,o.UNSIGNED_BYTE,S),c.call(null,new p(S[0],S[1],S[2],S[3]))}else{var E=Math.floor(f(a,"width",T)),A=Math.floor(f(a,"height",P)),R=E*A*4,w=new Uint8Array(R);o.readPixels(v,P-m-A,E,A,o.RGBA,o.UNSIGNED_BYTE,w);for(var O=n.createWebGL(this,E,A),F=O.getContext("2d",{willReadFrequently:!0}),b=F.getImageData(0,0,E,A),I=b.data,N=0;N<A;N++)for(var z=0;z<E;z++){var U=((A-N-1)*E+z)*4,W=C?R-(N*E+(E-z))*4:(N*E+z)*4;I[W+0]=w[U+0],I[W+1]=w[U+1],I[W+2]=w[U+2],I[W+3]=w[U+3]}F.putImageData(b,0,0);var D=new Image;D.onerror=function(){c.call(null),n.remove(O)},D.onload=function(){c.call(null,D),n.remove(O)},D.src=O.toDataURL(h,d)}};s.exports=u},95528:(s,g,e)=>{s.exports={Canvas:e(61840),WebGL:e(1217)}},35217:(s,g,e)=>{var n=e(56694),p=e(65641),f=e(33885),u=e(77290),l=e(72632),a=e(37410),o=e(82127),c=e(5583),h=e(58136),d=e(47406),v=e(81828),m=e(66901),y=e(71264),C=e(77310),T=e(10919),P=e(21213),S=e(51212),M=e(60848),E=new n({initialize:function(R){this.game=R.game,this.renderer=R,this.classes=new f([[p.UTILITY_PIPELINE,M],[p.MULTI_PIPELINE,C],[p.BITMAPMASK_PIPELINE,c],[p.SINGLE_PIPELINE,S],[p.ROPE_PIPELINE,P],[p.LIGHT_PIPELINE,m],[p.POINTLIGHT_PIPELINE,T],[p.MOBILE_PIPELINE,y],[p.FX_PIPELINE,v]]),this.postPipelineClasses=new f([[String(d.BARREL),h.Barrel],[String(d.BLOOM),h.Bloom],[String(d.BLUR),h.Blur],[String(d.BOKEH),h.Bokeh],[String(d.CIRCLE),h.Circle],[String(d.COLOR_MATRIX),h.ColorMatrix],[String(d.DISPLACEMENT),h.Displacement],[String(d.GLOW),h.Glow],[String(d.GRADIENT),h.Gradient],[String(d.PIXELATE),h.Pixelate],[String(d.SHADOW),h.Shadow],[String(d.SHINE),h.Shine],[String(d.VIGNETTE),h.Vignette],[String(d.WIPE),h.Wipe]]),this.pipelines=new f,this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(A,R,w){var O=this.renderer,F=this.renderTargets;this.frameInc=Math.floor(l(A,"frameInc",32));for(var b=O.width,I=O.height,N=Math.min(b,I),z=Math.ceil(N/this.frameInc),U=1;U<z;U++){var W=U*this.frameInc;F.push(new a(O,W,W)),F.push(new a(O,W,W)),F.push(new a(O,W,W)),this.maxDimension=W}F.push(new a(O,b,I,1,0,!0,!0)),F.push(new a(O,b,I,1,0,!0,!0)),F.push(new a(O,b,I,1,0,!0,!0));var D,V,L=this,B=this.game;if(this.classes.each(function(Y,X){D=L.add(Y,new X({game:B})),Y===p.UTILITY_PIPELINE&&(L.UTILITY_PIPELINE=D,L.fullFrame1=D.fullFrame1,L.fullFrame2=D.fullFrame2,L.halfFrame1=D.halfFrame1,L.halfFrame2=D.halfFrame2)}),this.MULTI_PIPELINE=this.get(p.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(p.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(p.MOBILE_PIPELINE),this.FX_PIPELINE=this.get(p.FX_PIPELINE),A)for(V in A){var G=A[V];D=new G(B),D.name=V,D.isPostFX?this.postPipelineClasses.set(V,G):this.has(V)||(this.classes.set(V,G),this.add(V,D))}this.default=this.get(R),w&&!u.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(A){var R=this.get(A);return R&&(this.default=R),R},add:function(A,R){if(R.isPostFX){console.warn(A+" is a Post Pipeline. Use `addPostPipeline` instead");return}var w=this.pipelines,O=this.renderer;return w.has(A)?console.warn("Pipeline exists: "+A):(R.name=A,R.manager=this,w.set(A,R)),R.hasBooted||R.boot(),O.width!==0&&O.height!==0&&!R.isPreFX&&R.resize(O.width,O.height),R},addPostPipeline:function(A,R){this.postPipelineClasses.has(A)||this.postPipelineClasses.set(A,R)},flush:function(){this.current&&this.current.flush()},has:function(A){var R=this.pipelines;return typeof A=="string"?R.has(A):!!R.contains(A)},get:function(A){var R=this.pipelines;if(typeof A=="string")return R.get(A);if(R.contains(A))return A},getPostPipeline:function(A,R,w){var O=this.postPipelineClasses,F,b="",I=typeof A;if(I==="string"||I==="number"?(F=O.get(A),b=A):I==="function"?(O.contains(A)&&(F=A),b=A.name):I==="object"&&(F=O.get(A.name),b=A.name),F){var N=new F(this.game,w);return N.name=b,R&&(N.gameObject=R),N}},remove:function(A,R,w){R===void 0&&(R=!0),w===void 0&&(w=!0),this.pipelines.delete(A),R&&this.classes.delete(A),w&&this.postPipelineClasses.delete(A)},set:function(A,R,w){if(!A.isPostFX)return this.isCurrent(A,w)||(this.flush(),this.current&&this.current.unbind(),this.current=A,A.bind(w)),A.updateProjectionMatrix(),A.onBind(R),A},preBatch:function(A){if(A.hasPostPipeline){this.flush();for(var R=A.postPipelines,w=R.length-1;w>=0;w--){var O=R[w];O.active&&O.preBatch(A)}}},postBatch:function(A){if(A.hasPostPipeline){this.flush();for(var R=A.postPipelines,w=0;w<R.length;w++){var O=R[w];O.active&&O.postBatch(A)}}},preBatchCamera:function(A){if(A.hasPostPipeline){this.flush();for(var R=A.postPipelines,w=R.length-1;w>=0;w--){var O=R[w];O.active&&O.preBatch(A)}}},postBatchCamera:function(A){if(A.hasPostPipeline){this.flush();for(var R=A.postPipelines,w=0;w<R.length;w++){var O=R[w];O.active&&O.postBatch(A)}}},isCurrent:function(A,R){var w=this.renderer,O=this.current;return O&&!R&&(R=O.currentShader),!(O!==A||R.program!==w.currentProgram)},copyFrame:function(A,R,w,O,F){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(A,R,w,O,F),this},copyToGame:function(A){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(A),this},drawFrame:function(A,R,w,O){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(A,R,w,O),this},blendFrames:function(A,R,w,O,F){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(A,R,w,O,F),this},blendFramesAdditive:function(A,R,w,O,F){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(A,R,w,O,F),this},clearFrame:function(A,R){return this.UTILITY_PIPELINE.clearFrame(A,R),this},blitFrame:function(A,R,w,O,F,b){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(A,R,w,O,F,b),this},copyFrameRect:function(A,R,w,O,F,b,I,N){return this.UTILITY_PIPELINE.copyFrameRect(A,R,w,O,F,b,I,N),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(A){return this.UTILITY_PIPELINE.bind(A)},setFX:function(){return this.set(this.FX_PIPELINE)},rebind:function(A){A===void 0&&this.previous&&(A=this.previous);var R=this.renderer,w=R.gl;w.disable(w.DEPTH_TEST),w.disable(w.CULL_FACE),R.hasActiveStencilMask()?w.clear(w.DEPTH_BUFFER_BIT):(w.disable(w.STENCIL_TEST),w.clear(w.DEPTH_BUFFER_BIT|w.STENCIL_BUFFER_BIT)),w.viewport(0,0,R.width,R.height),R.currentProgram=null,R.setBlendMode(0,!0);var O=R.vaoExtension;O&&O.bindVertexArrayOES(null);var F=this.pipelines.entries;for(var b in F)F[b].glReset=!0;A&&(this.current=A,A.rebind())},clear:function(){var A=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,A.currentProgram=null,A.setBlendMode(0,!0);var R=A.vaoExtension;R&&R.bindVertexArrayOES(null)},getRenderTarget:function(A){var R=this.renderTargets,w=3;if(A>this.maxDimension)return this.targetIndex=R.length-w,R[this.targetIndex];var O=(o(A,this.frameInc,0,!0)-1)*w;return this.targetIndex=O,R[O]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});s.exports=E},37410:(s,g,e)=>{var n=e(56694),p=e(81044),f=new n({initialize:function(l,a,o,c,h,d,v,m,y){c===void 0&&(c=1),h===void 0&&(h=0),d===void 0&&(d=!0),v===void 0&&(v=!1),m===void 0&&(m=!0),y===void 0&&(y=!0),this.renderer=l,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=c,this.minFilter=h,this.autoClear=d,this.autoResize=!0,this.hasDepthBuffer=m,this.forceClamp=y,this.resize(a,o),v?this.setAutoResize(!0):this.autoResize=!1},setAutoResize:function(u){return u&&!this.autoResize?(this.renderer.on(p.RESIZE,this.resize,this),this.autoResize=!0):!u&&this.autoResize&&(this.renderer.off(p.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(u,l){var a=u*this.scale,o=l*this.scale;if(this.autoResize&&(a!==this.width||o!==this.height)){var c=this.renderer;c.deleteFramebuffer(this.framebuffer),c.deleteTexture(this.texture),u*=this.scale,l*=this.scale,u=Math.round(u),l=Math.round(l),u<=0&&(u=1),l<=0&&(l=1),this.texture=c.createTextureFromSource(null,u,l,this.minFilter,this.forceClamp),this.framebuffer=c.createFramebuffer(u,l,this.texture,this.hasDepthBuffer),this.width=u,this.height=l}return this},bind:function(u,l,a){u===void 0&&(u=!1);var o=this.renderer;if(u&&o.flush(),l&&a&&this.resize(l,a),o.pushFramebuffer(this.framebuffer,!1,!1),u&&this.adjustViewport(),this.autoClear){var c=this.renderer.gl;c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT)}o.clearStencilMask()},adjustViewport:function(){var u=this.renderer.gl;u.viewport(0,0,this.width,this.height),u.disable(u.SCISSOR_TEST)},clear:function(){var u=this.renderer,l=u.gl;u.pushFramebuffer(this.framebuffer),l.disable(l.SCISSOR_TEST),l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT),u.popFramebuffer(),u.resetScissor()},unbind:function(u){u===void 0&&(u=!1);var l=this.renderer;return u&&l.flush(),l.popFramebuffer()},destroy:function(){var u=this.renderer;u.deleteFramebuffer(this.framebuffer),u.deleteTexture(this.texture),u.off(p.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});s.exports=f},75512:s=>{s.exports={getTintFromFloats:function(g,e,n,p){var f=(g*255|0)&255,u=(e*255|0)&255,l=(n*255|0)&255,a=(p*255|0)&255;return(a<<24|f<<16|u<<8|l)>>>0},getTintAppendFloatAlpha:function(g,e){var n=(e*255|0)&255;return(n<<24|g)>>>0},getTintAppendFloatAlphaAndSwap:function(g,e){var n=(g>>16|0)&255,p=(g>>8|0)&255,f=(g|0)&255,u=(e*255|0)&255;return(u<<24|f<<16|p<<8|n)>>>0},getFloatsFromUintRGB:function(g){var e=(g>>16|0)&255,n=(g>>8|0)&255,p=(g|0)&255;return[e/255,n/255,p/255]},checkShaderMax:function(g,e){var n=Math.min(16,g.getParameter(g.MAX_TEXTURE_IMAGE_UNITS));return!e||e===-1?n:Math.min(n,e)},parseFragmentShaderMaxTextures:function(g,e){if(!g)return"";for(var n="",p=0;p<e;p++)p>0&&(n+=`
	else `),p<e-1&&(n+="if (outTexId < "+p+".5)"),n+=`
	{`,n+=`
		texture = texture2D(uMainSampler[`+p+"], outTexCoord);",n+=`
	}`;return g=g.replace(/%count%/gi,e.toString()),g.replace(/%forloop%/gi,n)},setGlowQuality:function(g,e,n,p){return n===void 0&&(n=e.config.glowFXQuality),p===void 0&&(p=e.config.glowFXDistance),g=g.replace(/__SIZE__/gi,(1/n/p).toFixed(7)),g=g.replace(/__DIST__/gi,p.toFixed(0)+".0"),g}}},44775:(s,g,e)=>{var n=e(56694),p=e(28699),f=e(6659),u=e(18970),l=e(72632),a=e(16650),o=e(81044),c=e(37410),h=e(75512),d=e(71305),v=new n({Extends:f,initialize:function(y){f.call(this);var C=y.game,T=C.renderer,P=T.gl;this.name=l(y,"name","WebGLPipeline"),this.game=C,this.renderer=T,this.manager,this.gl=P,this.view=C.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=l(y,"topology",P.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=l(y,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=y,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[]},boot:function(){var m,y=this.gl,C=this.config,T=this.renderer;this.isPostFX||(this.projectionMatrix=new a().identity());var P=this.renderTargets,S=l(C,"renderTarget",!1);typeof S=="boolean"&&S&&(S=1);var M=T.width,E=T.height;if(typeof S=="number")for(m=0;m<S;m++)P.push(new c(T,M,E,1,0,!0));else if(Array.isArray(S))for(m=0;m<S.length;m++){var A=l(S[m],"scale",1),R=l(S[m],"minFilter",0),w=l(S[m],"autoClear",1),O=l(S[m],"width",null),F=l(S[m],"height",O);O?P.push(new c(T,O,F,1,R,w)):P.push(new c(T,M,E,A,R,w))}P.length&&(this.currentRenderTarget=P[0]),this.setShadersFromConfig(C);var b=this.shaders,I=0;for(m=0;m<b.length;m++)b[m].vertexSize>I&&(I=b[m].vertexSize);var N=l(C,"batchSize",T.config.batchSize);this.vertexCapacity=N*6;var z=new ArrayBuffer(this.vertexCapacity*I);this.vertexData=z,this.bytes=new Uint8Array(z),this.vertexViewF32=new Float32Array(z),this.vertexViewU32=new Uint32Array(z);var U=l(C,"vertices",null);for(U?(this.vertexViewF32.set(U),this.vertexBuffer=T.createVertexBuffer(z,y.STATIC_DRAW)):this.vertexBuffer=T.createVertexBuffer(z.byteLength,y.DYNAMIC_DRAW),this.setVertexBuffer(),m=b.length-1;m>=0;m--)b[m].rebind();this.hasBooted=!0,T.on(o.RESIZE,this.resize,this),T.on(o.PRE_RENDER,this.onPreRender,this),T.on(o.RENDER,this.onRender,this),T.on(o.POST_RENDER,this.onPostRender,this),this.emit(u.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(m,y,C){var T=this.renderer;if(m!==this.currentShader||T.currentProgram!==this.currentShader.program){this.flush();var P=this.setVertexBuffer(C);P&&!y&&(y=!0),m.bind(y,!1),this.currentShader=m}return this},getShaderByName:function(m){for(var y=this.shaders,C=0;C<y.length;C++)if(y[C].name===m)return y[C]},setShadersFromConfig:function(m){var y,C=this.shaders,T=this.renderer;for(y=0;y<C.length;y++)C[y].destroy();var P="vertShader",S="fragShader",M="attributes",E=l(m,P,null),A=h.parseFragmentShaderMaxTextures(l(m,S,null),T.maxTextures),R=l(m,M,null),w=l(m,"shaders",[]),O=w.length;if(O===0)E&&A&&(this.shaders=[new d(this,"default",E,A,p(R))]);else{var F=[];for(y=0;y<O;y++){var b=w[y],I,N,z,U;if(typeof b=="string"?(I="default",N=E,z=h.parseFragmentShaderMaxTextures(b,T.maxTextures),U=R):(I=l(b,"name","default"),N=l(b,P,E),z=h.parseFragmentShaderMaxTextures(l(b,S,A),T.maxTextures),U=l(b,M,R)),I==="default"){var W=z.split(`
`),D=W[0].trim();D.indexOf("#define SHADER_NAME")>-1&&(I=D.substring(20))}N&&z&&F.push(new d(this,I,N,z,p(U)))}this.shaders=F}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(m){return this.currentBatch={start:this.vertexCount,count:0,texture:[m],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=m,this.batch.push(this.currentBatch),0},addTextureToBatch:function(m){var y=this.currentBatch;y&&(y.texture.push(m),y.unit++,y.maxUnit++)},pushBatch:function(m){if(!this.currentBatch||this.forceZero&&m!==this.currentTexture)return this.createBatch(m);if(m===this.currentTexture)return this.currentUnit;var y=this.currentBatch,C=y.texture.indexOf(m);return C===-1?y.texture.length===this.renderer.maxTextures?this.createBatch(m):(y.unit++,y.maxUnit++,y.texture.push(m),this.currentUnit=y.unit,this.currentTexture=m,y.unit):(this.currentUnit=C,this.currentTexture=m,C)},setGameObject:function(m,y){return y===void 0&&(y=m.frame),this.pushBatch(y.source.glTexture)},shouldFlush:function(m){return m===void 0&&(m=0),this.vertexCount+m>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(m,y){(m!==this.width||y!==this.height)&&this.flush(),this.width=m,this.height=y;for(var C=this.renderTargets,T=0;T<C.length;T++)C[T].resize(m,y);return this.setProjectionMatrix(m,y),this.emit(u.RESIZE,m,y,this),this.onResize(m,y),this},setProjectionMatrix:function(m,y){var C=this.projectionMatrix;if(!C)return this;this.projectionWidth=m,this.projectionHeight=y,C.ortho(0,m,y,0,-1e3,1e3);for(var T=this.shaders,P="uProjectionMatrix",S=0;S<T.length;S++){var M=T[S];M.hasUniform(P)&&(M.resetUniform(P),M.setMatrix4fv(P,!1,C.val,M))}return this},flipProjectionMatrix:function(m){m===void 0&&(m=!0);var y=this.projectionMatrix;if(!y)return this;var C=this.projectionWidth,T=this.projectionHeight;m?y.ortho(0,C,0,T,-1e3,1e3):y.ortho(0,C,T,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,y.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var m=this.renderer.projectionWidth,y=this.renderer.projectionHeight;(this.projectionWidth!==m||this.projectionHeight!==y)&&this.setProjectionMatrix(m,y)}},bind:function(m){if(m===void 0&&(m=this.currentShader),this.glReset)return this.rebind(m);var y=!1,C=this.gl;return C.getParameter(C.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(C.bindBuffer(C.ARRAY_BUFFER,this.vertexBuffer),this.activeBuffer=this.vertexBuffer,y=!0),m.bind(y),this.currentShader=m,this.activeTextures.length=0,this.emit(u.BIND,this,m),this.onActive(m),this},rebind:function(m){this.activeBuffer=null,this.setVertexBuffer();for(var y=this.shaders,C=y.length-1;C>=0;C--){var T=y[C].rebind();(!m||T===m)&&(this.currentShader=T)}return this.activeTextures.length=0,this.emit(u.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(m){if(m===void 0&&(m=this.vertexBuffer),m!==this.activeBuffer){var y=this.gl;return this.gl.bindBuffer(y.ARRAY_BUFFER,m),this.activeBuffer=m,!0}return!1},preBatch:function(m){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(m),this},postBatch:function(m){return this.onDraw(this.currentRenderTarget),this.onPostBatch(m),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(m){if(m===void 0&&(m=!1),this.vertexCount>0){this.emit(u.BEFORE_FLUSH,this,m),this.onBeforeFlush(m);var y=this.gl,C=this.vertexCount,T=this.currentShader.vertexSize,P=this.topology;if(this.active){this.setVertexBuffer(),C===this.vertexCapacity?y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.DYNAMIC_DRAW):y.bufferSubData(y.ARRAY_BUFFER,0,this.bytes.subarray(0,C*T));var S,M,E,A=this.batch,R=this.activeTextures;if(this.forceZero)for(R[0]||y.activeTexture(y.TEXTURE0),S=0;S<A.length;S++)M=A[S],E=M.texture[0],R[0]!==E&&(y.bindTexture(y.TEXTURE_2D,E),R[0]=E),y.drawArrays(P,M.start,M.count);else for(S=0;S<A.length;S++){M=A[S];for(var w=0;w<=M.maxUnit;w++)E=M.texture[w],R[w]!==E&&(y.activeTexture(y.TEXTURE0+w),y.bindTexture(y.TEXTURE_2D,E),R[w]=E);y.drawArrays(P,M.start,M.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(u.AFTER_FLUSH,this,m),this.onAfterFlush(m)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(m,y,C,T,P,S,M){var E=this.vertexViewF32,A=this.vertexViewU32,R=this.vertexCount*this.currentShader.vertexComponentCount-1;E[++R]=m,E[++R]=y,E[++R]=C,E[++R]=T,E[++R]=P,E[++R]=S,A[++R]=M,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(m,y,C,T,P,S,M,E,A,R,w,O,F,b,I,N,z,U,W,D){D===void 0&&(D=this.currentUnit);var V=!1;this.shouldFlush(6)&&(this.flush(),V=!0),this.currentBatch||(D=this.setTexture2D(W));var L=this.vertexViewF32,B=this.vertexViewU32,G=this.vertexCount*this.currentShader.vertexComponentCount-1;return L[++G]=y,L[++G]=C,L[++G]=R,L[++G]=w,L[++G]=D,L[++G]=U,B[++G]=b,L[++G]=T,L[++G]=P,L[++G]=R,L[++G]=F,L[++G]=D,L[++G]=U,B[++G]=N,L[++G]=S,L[++G]=M,L[++G]=O,L[++G]=F,L[++G]=D,L[++G]=U,B[++G]=z,L[++G]=y,L[++G]=C,L[++G]=R,L[++G]=w,L[++G]=D,L[++G]=U,B[++G]=b,L[++G]=S,L[++G]=M,L[++G]=O,L[++G]=F,L[++G]=D,L[++G]=U,B[++G]=z,L[++G]=E,L[++G]=A,L[++G]=O,L[++G]=w,L[++G]=D,L[++G]=U,B[++G]=I,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(m),V},batchTri:function(m,y,C,T,P,S,M,E,A,R,w,O,F,b,I,N,z){z===void 0&&(z=this.currentUnit);var U=!1;this.shouldFlush(3)&&(this.flush(),U=!0),this.currentBatch||(z=this.setTexture2D(N));var W=this.vertexViewF32,D=this.vertexViewU32,V=this.vertexCount*this.currentShader.vertexComponentCount-1;return W[++V]=y,W[++V]=C,W[++V]=E,W[++V]=A,W[++V]=z,W[++V]=I,D[++V]=O,W[++V]=T,W[++V]=P,W[++V]=E,W[++V]=w,W[++V]=z,W[++V]=I,D[++V]=F,W[++V]=S,W[++V]=M,W[++V]=R,W[++V]=w,W[++V]=z,W[++V]=I,D[++V]=b,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(m),U},drawFillRect:function(m,y,C,T,P,S,M,E){M===void 0&&(M=this.renderer.whiteTexture),E===void 0&&(E=!0),m=Math.floor(m),y=Math.floor(y);var A=Math.floor(m+C),R=Math.floor(y+T),w=this.setTexture2D(M),O=h.getTintAppendFloatAlphaAndSwap(P,S),F=0,b=0,I=1,N=1;E&&(b=1,N=0),this.batchQuad(null,m,y,m,R,A,R,A,y,F,b,I,N,O,O,O,O,0,M,w)},setTexture2D:function(m){return m===void 0&&(m=this.renderer.whiteTexture),this.pushBatch(m)},bindTexture:function(m,y){y===void 0&&(y=0);var C=this.gl;return C.activeTexture(C.TEXTURE0+y),C.bindTexture(C.TEXTURE_2D,m),this},bindRenderTarget:function(m,y){return this.bindTexture(m.texture,y)},setTime:function(m,y){return this.set1f(m,this.game.loop.getDuration(),y),this},setBoolean:function(m,y,C){return C===void 0&&(C=this.currentShader),C.setBoolean(m,y),this},set1f:function(m,y,C){return C===void 0&&(C=this.currentShader),C.set1f(m,y),this},set2f:function(m,y,C,T){return T===void 0&&(T=this.currentShader),T.set2f(m,y,C),this},set3f:function(m,y,C,T,P){return P===void 0&&(P=this.currentShader),P.set3f(m,y,C,T),this},set4f:function(m,y,C,T,P,S){return S===void 0&&(S=this.currentShader),S.set4f(m,y,C,T,P),this},set1fv:function(m,y,C){return C===void 0&&(C=this.currentShader),C.set1fv(m,y),this},set2fv:function(m,y,C){return C===void 0&&(C=this.currentShader),C.set2fv(m,y),this},set3fv:function(m,y,C){return C===void 0&&(C=this.currentShader),C.set3fv(m,y),this},set4fv:function(m,y,C){return C===void 0&&(C=this.currentShader),C.set4fv(m,y),this},set1iv:function(m,y,C){return C===void 0&&(C=this.currentShader),C.set1iv(m,y),this},set2iv:function(m,y,C){return C===void 0&&(C=this.currentShader),C.set2iv(m,y),this},set3iv:function(m,y,C){return C===void 0&&(C=this.currentShader),C.set3iv(m,y),this},set4iv:function(m,y,C){return C===void 0&&(C=this.currentShader),C.set4iv(m,y),this},set1i:function(m,y,C){return C===void 0&&(C=this.currentShader),C.set1i(m,y),this},set2i:function(m,y,C,T){return T===void 0&&(T=this.currentShader),T.set2i(m,y,C),this},set3i:function(m,y,C,T,P){return P===void 0&&(P=this.currentShader),P.set3i(m,y,C,T),this},set4i:function(m,y,C,T,P,S){return S===void 0&&(S=this.currentShader),S.set4i(m,y,C,T,P),this},setMatrix2fv:function(m,y,C,T){return T===void 0&&(T=this.currentShader),T.setMatrix2fv(m,y,C),this},setMatrix3fv:function(m,y,C,T){return T===void 0&&(T=this.currentShader),T.setMatrix3fv(m,y,C),this},setMatrix4fv:function(m,y,C,T){return T===void 0&&(T=this.currentShader),T.setMatrix4fv(m,y,C),this},destroy:function(){this.emit(u.DESTROY,this);var m,y=this.shaders;for(m=0;m<y.length;m++)y[m].destroy();var C=this.renderTargets;for(m=0;m<C.length;m++)C[m].destroy();this.gl.deleteBuffer(this.vertexBuffer);var T=this.renderer;return T.off(o.RESIZE,this.resize,this),T.off(o.PRE_RENDER,this.onPreRender,this),T.off(o.RENDER,this.onRender,this),T.off(o.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});s.exports=v},11857:(s,g,e)=>{var n=e(66458),p=e(89787),f=e(56694),u=e(86459),l=e(6659),a=e(81044),o=e(28621),c=e(16650),h=e(72283),d=e(35217),v=e(37410),m=e(40444),y=e(38203),C=e(75512),T=e(1217),P=!1;if(!1)var S;var M=new f({Extends:l,initialize:function(A){l.call(this);var R=A.config,w={alpha:R.transparent,desynchronized:R.desynchronized,depth:!0,antialias:R.antialiasGL,premultipliedAlpha:R.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:R.failIfMajorPerformanceCaveat,powerPreference:R.powerPreference,preserveDrawingBuffer:R.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:R.clearBeforeRender,antialias:R.antialias,backgroundColor:R.backgroundColor,contextCreation:w,roundPixels:R.roundPixels,maxTextures:R.maxTextures,maxTextureSize:R.maxTextureSize,batchSize:R.batchSize,maxLights:R.maxLights,mipmapFilter:R.mipmapFilter},this.game=A,this.type=u.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=A.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=h,this.contextRestoredHandler=h,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(E){var A,R=this.game,w=this.canvas,O=E.backgroundColor;if(P&&(this.spector=new S.Spector,this.spector.onCapture.add(this.onCapture.bind(this))),R.config.context?A=R.config.context:A=w.getContext("webgl",E.contextCreation)||w.getContext("experimental-webgl",E.contextCreation),!A||A.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=A;var F=this;this.contextLostHandler=function(D){F.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),D.preventDefault()},w.addEventListener("webglcontextlost",this.contextLostHandler,!1),R.context=A;for(var b=0;b<=27;b++)this.blendModes.push({func:[A.ONE,A.ONE_MINUS_SRC_ALPHA],equation:A.FUNC_ADD});this.blendModes[1].func=[A.ONE,A.DST_ALPHA],this.blendModes[2].func=[A.DST_COLOR,A.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[A.ONE,A.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[A.ZERO,A.ONE_MINUS_SRC_ALPHA],equation:A.FUNC_REVERSE_SUBTRACT},this.glFormats=[A.BYTE,A.SHORT,A.UNSIGNED_BYTE,A.UNSIGNED_SHORT,A.FLOAT],this.glFuncMap={mat2:{func:A.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:A.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:A.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:A.uniform1f,length:1},"1fv":{func:A.uniform1fv,length:1},"1i":{func:A.uniform1i,length:1},"1iv":{func:A.uniform1iv,length:1},"2f":{func:A.uniform2f,length:2},"2fv":{func:A.uniform2fv,length:1},"2i":{func:A.uniform2i,length:2},"2iv":{func:A.uniform2iv,length:1},"3f":{func:A.uniform3f,length:3},"3fv":{func:A.uniform3fv,length:1},"3i":{func:A.uniform3i,length:3},"3iv":{func:A.uniform3iv,length:1},"4f":{func:A.uniform4f,length:4},"4fv":{func:A.uniform4fv,length:1},"4i":{func:A.uniform4i,length:4},"4iv":{func:A.uniform4iv,length:1}};var I=A.getSupportedExtensions();(!E.maxTextures||E.maxTextures===-1)&&(E.maxTextures=A.getParameter(A.MAX_TEXTURE_IMAGE_UNITS)),E.maxTextureSize||(E.maxTextureSize=A.getParameter(A.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),this.supportedExtensions=I;var N="ANGLE_instanced_arrays";this.instancedArraysExtension=I.indexOf(N)>-1?A.getExtension(N):null;var z="OES_vertex_array_object";this.vaoExtension=I.indexOf(z)>-1?A.getExtension(z):null,A.disable(A.DEPTH_TEST),A.disable(A.CULL_FACE),A.enable(A.BLEND),A.clearColor(O.redGL,O.greenGL,O.blueGL,O.alphaGL),E.mipmapFilter!==""&&(this.mipmapFilter=A[E.mipmapFilter]),this.maxTextures=C.checkShaderMax(A,E.maxTextures),this.textureIndexes=[];for(var U=0;U<this.maxTextures;U++){var W=A.createTexture();A.activeTexture(A.TEXTURE0+U),A.bindTexture(A.TEXTURE_2D,W),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,1,1,0,A.RGBA,A.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(U)}return this.pipelines=new d(this),this.setBlendMode(u.BlendModes.NORMAL),this.projectionMatrix=new c().identity(),R.textures.once(y.READY,this.boot,this),this},boot:function(){var E=this.game,A=this.pipelines,R=E.scale.baseSize,w=R.width,O=R.height;this.width=w,this.height=O,this.isBooted=!0,this.renderTarget=new v(this,w,O,1,0,!0,!0),this.maskTarget=new v(this,w,O,1,0,!0,!0),this.maskSource=new v(this,w,O,1,0,!0,!0);var F=E.config;A.boot(F.pipeline,F.defaultPipeline,F.autoMobilePipeline),this.blankTexture=E.textures.getFrame("__DEFAULT").glTexture,this.whiteTexture=E.textures.getFrame("__WHITE").glTexture;var b=this.gl;b.bindFramebuffer(b.FRAMEBUFFER,null),b.enable(b.SCISSOR_TEST),E.scale.on(m.RESIZE,this.onResize,this),this.resize(w,O)},captureFrame:function(E,A){E===void 0&&(E=!1),A===void 0&&(A=!1),P&&this.spector&&!this._debugCapture&&(this.spector.captureCanvas(this.canvas,0,E,A),this._debugCapture=!0)},captureNextFrame:function(){P&&this.spector&&!this._debugCapture&&(this._debugCapture=!0,this.spector.captureNextFrame(this.canvas))},getFps:function(){if(P&&this.spector)return this.spector.getFps()},log:function(){if(P&&this.spector){var E=Array.prototype.slice.call(arguments).join(" ");return this.spector.log(E)}},startCapture:function(E,A,R){E===void 0&&(E=0),A===void 0&&(A=!1),R===void 0&&(R=!1),P&&this.spector&&!this._debugCapture&&(this.spector.startCapture(this.canvas,E,A,R),this._debugCapture=!0)},stopCapture:function(){if(P&&this.spector&&this._debugCapture)return this.spector.stopCapture()},onCapture:function(E){if(P){var A=this.spector.getResultUI();A.display(E),this._debugCapture=!1}},onResize:function(E,A){(A.width!==this.width||A.height!==this.height)&&this.resize(A.width,A.height)},beginCapture:function(E,A){E===void 0&&(E=this.width),A===void 0&&(A=this.height),this.renderTarget.bind(!0,E,A),this.setProjectionMatrix(E,A)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(E,A){var R=this.gl;return this.width=E,this.height=A,this.setProjectionMatrix(E,A),R.viewport(0,0,E,A),this.drawingBufferHeight=R.drawingBufferHeight,R.scissor(0,R.drawingBufferHeight-A,E,A),this.defaultScissor[2]=E,this.defaultScissor[3]=A,this.emit(a.RESIZE,E,A),this},getCompressedTextures:function(){var E="WEBGL_compressed_texture_",A="WEBKIT_"+E,R=function(O,F){var b=O.getExtension(E+F)||O.getExtension(A+F);if(b){var I={};for(var N in b)I[b[N]]=N;return I}},w=this.gl;return{ETC:R(w,"etc"),ETC1:R(w,"etc1"),ATC:R(w,"atc"),ASTC:R(w,"astc"),BPTC:R(w,"bptc"),RGTC:R(w,"rgtc"),PVRTC:R(w,"pvrtc"),S3TC:R(w,"s3tc"),S3TCSRGB:R(w,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(E,A){var R=this.compression[E.toUpperCase()];if(A in R)return R[A]},supportsCompressedTexture:function(E,A){var R=this.compression[E.toUpperCase()];return R?A?A in R:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(E,A){return(E!==this.projectionWidth||A!==this.projectionHeight)&&(this.projectionWidth=E,this.projectionHeight=A,this.projectionMatrix.ortho(0,E,A,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(E){return this.supportedExtensions?this.supportedExtensions.indexOf(E):!1},getExtension:function(E){return this.hasExtension(E)?(E in this.extensions||(this.extensions[E]=this.gl.getExtension(E)),this.extensions[E]):null},flush:function(){this.pipelines.flush()},pushScissor:function(E,A,R,w,O){O===void 0&&(O=this.drawingBufferHeight);var F=this.scissorStack,b=[E,A,R,w];return F.push(b),this.setScissor(E,A,R,w,O),this.currentScissor=b,b},setScissor:function(E,A,R,w,O){O===void 0&&(O=this.drawingBufferHeight);var F=this.gl,b=this.currentScissor,I=R>0&&w>0;if(b&&I){var N=b[0],z=b[1],U=b[2],W=b[3];I=N!==E||z!==A||U!==R||W!==w}I&&(this.flush(),F.scissor(E,O-A-w,R,w))},resetScissor:function(){var E=this.gl;E.enable(E.SCISSOR_TEST);var A=this.currentScissor;if(A){var R=A[0],w=A[1],O=A[2],F=A[3];O>0&&F>0&&E.scissor(R,this.drawingBufferHeight-w-F,O,F)}},popScissor:function(){var E=this.scissorStack;E.pop();var A=E[E.length-1];A&&this.setScissor(A[0],A[1],A[2],A[3]),this.currentScissor=A},hasActiveStencilMask:function(){var E=this.currentMask.mask,A=this.currentCameraMask.mask;return E&&E.isStencil||A&&A.isStencil},resetViewport:function(){var E=this.gl;E.viewport(0,0,this.width,this.height),this.drawingBufferHeight=E.drawingBufferHeight},setBlendMode:function(E,A){A===void 0&&(A=!1);var R=this.gl,w=this.blendModes[E];return A||E!==u.BlendModes.SKIP_CHECK&&this.currentBlendMode!==E?(this.flush(),R.enable(R.BLEND),R.blendEquation(w.equation),w.func.length>2?R.blendFuncSeparate(w.func[0],w.func[1],w.func[2],w.func[3]):R.blendFunc(w.func[0],w.func[1]),this.currentBlendMode=E,!0):!1},addBlendMode:function(E,A){var R=this.blendModes.push({func:E,equation:A});return R-1},updateBlendMode:function(E,A,R){return this.blendModes[E]&&(this.blendModes[E].func=A,R&&(this.blendModes[E].equation=R)),this},removeBlendMode:function(E){return E>17&&this.blendModes[E]&&this.blendModes.splice(E,1),this},pushFramebuffer:function(E,A,R,w,O){return E===this.currentFramebuffer?this:(this.fboStack.push(E),this.setFramebuffer(E,A,R,w,O))},setFramebuffer:function(E,A,R,w,O){if(A===void 0&&(A=!1),R===void 0&&(R=!0),w===void 0&&(w=null),O===void 0&&(O=!1),E===this.currentFramebuffer)return this;var F=this.gl,b=this.width,I=this.height;return E&&E.renderTexture&&R?(b=E.renderTexture.width,I=E.renderTexture.height):this.flush(),F.bindFramebuffer(F.FRAMEBUFFER,E),R&&F.viewport(0,0,b,I),w&&F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_2D,w,0),O&&(F.clearColor(0,0,0,0),F.clear(F.COLOR_BUFFER_BIT)),A&&(E?(this.drawingBufferHeight=I,this.pushScissor(0,0,b,I)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=E,this},popFramebuffer:function(E,A){E===void 0&&(E=!1),A===void 0&&(A=!0);var R=this.fboStack;R.pop();var w=R[R.length-1];return w||(w=null),this.setFramebuffer(w,E,A),w},restoreFramebuffer:function(E,A){E===void 0&&(E=!1),A===void 0&&(A=!0);var R=this.fboStack,w=R[R.length-1];w||(w=null),this.currentFramebuffer=null,this.setFramebuffer(w,E,A)},setProgram:function(E){return E!==this.currentProgram?(this.flush(),this.gl.useProgram(E),this.currentProgram=E,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(E,A,R,w,O){O===void 0&&(O=!1);var F=this.gl,b=F.NEAREST,I=F.NEAREST,N=F.CLAMP_TO_EDGE,z=null;A=E?E.width:A,R=E?E.height:R;var U=o(A,R);return U&&!O&&(N=F.REPEAT),w===u.ScaleModes.LINEAR&&this.config.antialias&&(b=U&&this.mipmapFilter?this.mipmapFilter:F.LINEAR,I=F.LINEAR),E&&E.compressed&&(b=F.LINEAR,I=F.LINEAR),!E&&typeof A=="number"&&typeof R=="number"?z=this.createTexture2D(0,b,I,N,N,F.RGBA,null,A,R):z=this.createTexture2D(0,b,I,N,N,F.RGBA,E),z},createTexture2D:function(E,A,R,w,O,F,b,I,N,z,U,W){z=z==null?!0:z,U===void 0&&(U=!1),W===void 0&&(W=!1);var D=this.gl,V=D.createTexture();D.activeTexture(D.TEXTURE0);var L=D.getParameter(D.TEXTURE_BINDING_2D);D.bindTexture(D.TEXTURE_2D,V),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,A),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAG_FILTER,R),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_S,O),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_T,w),D.pixelStorei(D.UNPACK_PREMULTIPLY_ALPHA_WEBGL,z),W&&D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,!0);var B=!1;if(b==null)D.texImage2D(D.TEXTURE_2D,E,F,I,N,0,F,D.UNSIGNED_BYTE,null),B=o(I,N);else if(b.compressed){I=b.width,N=b.height,B=b.generateMipmap;for(var G=0;G<b.mipmaps.length;G++)D.compressedTexImage2D(D.TEXTURE_2D,G,b.internalFormat,b.mipmaps[G].width,b.mipmaps[G].height,0,b.mipmaps[G].data)}else U||(I=b.width,N=b.height),D.texImage2D(D.TEXTURE_2D,E,F,F,D.UNSIGNED_BYTE,b),B=o(I,N);return B&&D.generateMipmap(D.TEXTURE_2D),L&&D.bindTexture(D.TEXTURE_2D,L),V.isAlphaPremultiplied=z,V.isRenderTexture=!1,V.width=I,V.height=N,V},createFramebuffer:function(E,A,R,w){w===void 0&&(w=!0);var O=this.gl,F=O.createFramebuffer(),b=0;if(this.setFramebuffer(F),R.isRenderTexture=!0,R.isAlphaPremultiplied=!1,O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,R,0),b=O.checkFramebufferStatus(O.FRAMEBUFFER),b!==O.FRAMEBUFFER_COMPLETE){var I={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+(I[b]||b))}if(F.renderTexture=R,w){var N=O.createRenderbuffer();O.bindRenderbuffer(O.RENDERBUFFER,N),O.renderbufferStorage(O.RENDERBUFFER,O.DEPTH_STENCIL,E,A),O.framebufferRenderbuffer(O.FRAMEBUFFER,O.DEPTH_STENCIL_ATTACHMENT,O.RENDERBUFFER,N)}return this.setFramebuffer(null),F},beginBitmapMask:function(E,A){var R=this.gl;R&&(this.flush(),this.maskTarget.bind(),this.currentCameraMask.mask!==E&&(this.currentMask.mask=E,this.currentMask.camera=A))},drawBitmapMask:function(E,A,R){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),E.renderWebGL(this,E,A),this.maskSource.unbind(!0),this.maskTarget.unbind();var w=this.gl,O=this.getCurrentStencilMask();O?(w.enable(w.STENCIL_TEST),O.mask.applyStencil(this,O.camera,!0)):this.currentMask.mask=null,this.pipelines.set(R),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,this.maskTarget.texture),w.activeTexture(w.TEXTURE1),w.bindTexture(w.TEXTURE_2D,this.maskSource.texture)},createProgram:function(E,A){var R=this.gl,w=R.createProgram(),O=R.createShader(R.VERTEX_SHADER),F=R.createShader(R.FRAGMENT_SHADER);R.shaderSource(O,E),R.shaderSource(F,A),R.compileShader(O),R.compileShader(F);var b=`Shader failed:
`;if(!R.getShaderParameter(O,R.COMPILE_STATUS))throw new Error("Vertex "+b+R.getShaderInfoLog(O));if(!R.getShaderParameter(F,R.COMPILE_STATUS))throw new Error("Fragment "+b+R.getShaderInfoLog(F));if(R.attachShader(w,O),R.attachShader(w,F),R.linkProgram(w),!R.getProgramParameter(w,R.LINK_STATUS))throw new Error("Link "+b+R.getProgramInfoLog(w));return R.useProgram(w),w},createVertexBuffer:function(E,A){var R=this.gl,w=R.createBuffer();return R.bindBuffer(R.ARRAY_BUFFER,w),R.bufferData(R.ARRAY_BUFFER,E,A),R.bindBuffer(R.ARRAY_BUFFER,null),w},createIndexBuffer:function(E,A){var R=this.gl,w=R.createBuffer();return R.bindBuffer(R.ELEMENT_ARRAY_BUFFER,w),R.bufferData(R.ELEMENT_ARRAY_BUFFER,E,A),R.bindBuffer(R.ELEMENT_ARRAY_BUFFER,null),w},deleteTexture:function(E){return E&&this.gl.deleteTexture(E),this},deleteFramebuffer:function(E){if(E){var A=this.gl;A.bindFramebuffer(A.FRAMEBUFFER,E);var R=A.getParameter(A.RENDERBUFFER_BINDING);R&&A.deleteRenderbuffer(R),A.bindFramebuffer(A.FRAMEBUFFER,null),A.deleteFramebuffer(E),n(this.fboStack,E),this.currentFramebuffer===E&&(this.currentFramebuffer=null)}return this},deleteProgram:function(E){return E&&this.gl.deleteProgram(E),this},deleteBuffer:function(E){return this.gl.deleteBuffer(E),this},preRenderCamera:function(E){var A=E.x,R=E.y,w=E.width,O=E.height,F=E.backgroundColor;if(E.emit(p.PRE_RENDER,E),this.pipelines.preBatchCamera(E),this.pushScissor(A,R,w,O),E.mask&&(this.currentCameraMask.mask=E.mask,this.currentCameraMask.camera=E._maskCamera,E.mask.preRenderWebGL(this,E,E._maskCamera)),F.alphaGL>0){var b=this.pipelines.setMulti();b.drawFillRect(A,R,w,O,C.getTintFromFloats(F.blueGL,F.greenGL,F.redGL,1),F.alphaGL)}},getCurrentStencilMask:function(){var E=null,A=this.maskStack,R=this.currentCameraMask;return A.length>0?E=A[A.length-1]:R.mask&&R.mask.isStencil&&(E=R),E},postRenderCamera:function(E){var A=E.flashEffect,R=E.fadeEffect;if(A.isRunning||R.isRunning||R.isComplete){var w=this.pipelines.setMulti();A.postRenderWebGL(w,C.getTintFromFloats),R.postRenderWebGL(w,C.getTintFromFloats)}E.dirty=!1,this.popScissor(),E.mask&&(this.currentCameraMask.mask=null,E.mask.postRenderWebGL(this,E._maskCamera)),this.pipelines.postBatchCamera(E),E.emit(p.POST_RENDER,E)},preRender:function(){if(!this.contextLost){var E=this.gl;if(E.bindFramebuffer(E.FRAMEBUFFER,null),this.config.clearBeforeRender){var A=this.config.backgroundColor;E.clearColor(A.redGL,A.greenGL,A.blueGL,A.alphaGL),E.clear(E.COLOR_BUFFER_BIT|E.DEPTH_BUFFER_BIT|E.STENCIL_BUFFER_BIT)}E.enable(E.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&E.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(a.PRE_RENDER)}},render:function(E,A,R){if(!this.contextLost){var w=A.length;if(this.emit(a.RENDER,E,R),this.preRenderCamera(R),w===0){this.setBlendMode(u.BlendModes.NORMAL),this.postRenderCamera(R);return}this.currentType="";for(var O=this.currentMask,F=0;F<w;F++){this.finalType=F===w-1;var b=A[F],I=b.mask;O=this.currentMask,O.mask&&O.mask!==I&&O.mask.postRenderWebGL(this,O.camera),I&&O.mask!==I&&I.preRenderWebGL(this,b,R),b.blendMode!==this.currentBlendMode&&this.setBlendMode(b.blendMode);var N=b.type;N!==this.currentType&&(this.newType=!0,this.currentType=N),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=A[F+1].type===this.currentType,b.renderWebGL(this,b,R),this.newType=!1}O=this.currentMask,O.mask&&O.mask.postRenderWebGL(this,O.camera),this.setBlendMode(u.BlendModes.NORMAL),this.postRenderCamera(R)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(a.POST_RENDER);var E=this.snapshotState;E.callback&&(T(this.gl,E),E.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var E=this.gl,A=this.getCurrentStencilMask();if(A){var R=A.mask;E.enable(E.STENCIL_TEST),R.invertAlpha?E.stencilFunc(E.NOTEQUAL,R.level,255):E.stencilFunc(E.EQUAL,R.level,255)}},snapshot:function(E,A,R){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,E,A,R)},snapshotArea:function(E,A,R,w,O,F,b){var I=this.snapshotState;return I.callback=O,I.type=F,I.encoder=b,I.getPixel=!1,I.x=E,I.y=A,I.width=R,I.height=w,this},snapshotPixel:function(E,A,R){return this.snapshotArea(E,A,1,1,R),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(E,A,R,w,O,F,b,I,N,z,U){O===void 0&&(O=!1),F===void 0&&(F=0),b===void 0&&(b=0),I===void 0&&(I=A),N===void 0&&(N=R),z==="pixel"&&(O=!0,z="image/png");var W=this.currentFramebuffer;this.snapshotArea(F,b,I,N,w,z,U);var D=this.snapshotState;return D.getPixel=O,D.isFramebuffer=!0,D.bufferWidth=A,D.bufferHeight=R,D.width=Math.min(D.width,A),D.height=Math.min(D.height,R),this.setFramebuffer(E),T(this.gl,D),this.setFramebuffer(W),D.callback=null,D.isFramebuffer=!1,this},canvasToTexture:function(E,A,R,w){return R===void 0&&(R=!1),w===void 0&&(w=!1),A?this.updateCanvasTexture(E,A,w):this.createCanvasTexture(E,R,w)},createCanvasTexture:function(E,A,R){A===void 0&&(A=!1),R===void 0&&(R=!1);var w=this.gl,O=w.NEAREST,F=w.NEAREST,b=E.width,I=E.height,N=w.CLAMP_TO_EDGE,z=o(b,I);return!A&&z&&(N=w.REPEAT),this.config.antialias&&(O=z&&this.mipmapFilter?this.mipmapFilter:w.LINEAR,F=w.LINEAR),this.createTexture2D(0,O,F,N,N,w.RGBA,E,b,I,!0,!1,R)},updateCanvasTexture:function(E,A,R){R===void 0&&(R=!1);var w=this.gl,O=E.width,F=E.height;if(O>0&&F>0){w.activeTexture(w.TEXTURE0);var b=w.getParameter(w.TEXTURE_BINDING_2D);w.bindTexture(w.TEXTURE_2D,A),R&&w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,!0),w.pixelStorei(w.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,E),A.width=O,A.height=F,b&&w.bindTexture(w.TEXTURE_2D,b)}return A},createVideoTexture:function(E,A,R){A===void 0&&(A=!1),R===void 0&&(R=!1);var w=this.gl,O=w.NEAREST,F=w.NEAREST,b=E.videoWidth,I=E.videoHeight,N=w.CLAMP_TO_EDGE,z=o(b,I);return!A&&z&&(N=w.REPEAT),this.config.antialias&&(O=z&&this.mipmapFilter?this.mipmapFilter:w.LINEAR,F=w.LINEAR),this.createTexture2D(0,O,F,N,N,w.RGBA,E,b,I,!0,!0,R)},updateVideoTexture:function(E,A,R){R===void 0&&(R=!1);var w=this.gl,O=E.videoWidth,F=E.videoHeight;if(O>0&&F>0){w.activeTexture(w.TEXTURE0);var b=w.getParameter(w.TEXTURE_BINDING_2D);w.bindTexture(w.TEXTURE_2D,A),w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,R),w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,E),A.width=O,A.height=F,b&&w.bindTexture(w.TEXTURE_2D,b)}return A},setTextureFilter:function(E,A){var R=this.gl,w=[R.LINEAR,R.NEAREST][A];R.activeTexture(R.TEXTURE0);var O=R.getParameter(R.TEXTURE_BINDING_2D);return R.bindTexture(R.TEXTURE_2D,E),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,w),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,w),O&&R.bindTexture(R.TEXTURE_2D,O),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null,P&&(this.spector=null)}});s.exports=M},71305:(s,g,e)=>{var n=e(56694),p=e(72632),f=e(71402),u=new n({initialize:function(a,o,c,h,d){this.pipeline=a,this.name=o,this.renderer=a.renderer,this.gl=this.renderer.gl,this.fragSrc=h,this.vertSrc=c,this.program=this.renderer.createProgram(c,h),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(d),this.createUniforms()},createAttributes:function(l){var a=0,o=0,c=[];this.vertexComponentCount=0;for(var h=0;h<l.length;h++){var d=l[h],v=d.name,m=p(d,"size",1),y=p(d,"type",f.FLOAT),C=y.enum,T=y.size,P=!!d.normalized;c.push({name:v,size:m,type:C,normalized:P,offset:o,enabled:!1,location:-1}),T===4?a+=m:a++,o+=m*T}this.vertexSize=o,this.vertexComponentCount=a,this.attributes=c},bind:function(l,a){return l===void 0&&(l=!1),a===void 0&&(a=!1),a&&this.pipeline.flush(),this.renderer.setProgram(this.program),l&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(l){l===void 0&&(l=!1);for(var a=this.gl,o=this.vertexSize,c=this.attributes,h=this.program,d=0;d<c.length;d++){var v=c[d],m=v.size,y=v.type,C=v.offset,T=v.enabled,P=v.location,S=!!v.normalized;if(l){var M=a.getAttribLocation(h,v.name);M>=0?(a.enableVertexAttribArray(M),a.vertexAttribPointer(M,m,y,S,o,C),v.enabled=!0,v.location=M):M!==-1&&a.disableVertexAttribArray(M)}else T?a.vertexAttribPointer(P,m,y,S,o,C):!T&&P>-1&&(a.disableVertexAttribArray(P),v.location=-1)}return this},createUniforms:function(){var l=this.gl,a=this.program,o=this.uniforms,c,h,d,v=l.getProgramParameter(a,l.ACTIVE_UNIFORMS);for(c=0;c<v;c++){var m=l.getActiveUniform(a,c);if(m){h=m.name,d=l.getUniformLocation(a,h),d!==null&&(o[h]={name:h,location:d,value1:null,value2:null,value3:null,value4:null});var y=h.indexOf("[");y>0&&(h=h.substr(0,y),o.hasOwnProperty(h)||(d=l.getUniformLocation(a,h),d!==null&&(o[h]={name:h,location:d,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(l){return this.uniforms.hasOwnProperty(l)},resetUniform:function(l){var a=this.uniforms[l];return a&&(a.value1=null,a.value2=null,a.value3=null,a.value4=null),this},setUniform1:function(l,a,o,c){var h=this.uniforms[a];return h?((c||h.value1!==o)&&(h.value1=o,this.renderer.setProgram(this.program),l.call(this.gl,h.location,o),this.pipeline.currentShader=this),this):this},setUniform2:function(l,a,o,c,h){var d=this.uniforms[a];return d?((h||d.value1!==o||d.value2!==c)&&(d.value1=o,d.value2=c,this.renderer.setProgram(this.program),l.call(this.gl,d.location,o,c),this.pipeline.currentShader=this),this):this},setUniform3:function(l,a,o,c,h,d){var v=this.uniforms[a];return v?((d||v.value1!==o||v.value2!==c||v.value3!==h)&&(v.value1=o,v.value2=c,v.value3=h,this.renderer.setProgram(this.program),l.call(this.gl,v.location,o,c,h),this.pipeline.currentShader=this),this):this},setUniform4:function(l,a,o,c,h,d,v){var m=this.uniforms[a];return m?((v||m.value1!==o||m.value2!==c||m.value3!==h||m.value4!==d)&&(m.value1=o,m.value2=c,m.value3=h,m.value4=d,this.renderer.setProgram(this.program),l.call(this.gl,m.location,o,c,h,d),this.pipeline.currentShader=this),this):this},setBoolean:function(l,a){return this.setUniform1(this.gl.uniform1i,l,Number(a))},set1f:function(l,a){return this.setUniform1(this.gl.uniform1f,l,a)},set2f:function(l,a,o){return this.setUniform2(this.gl.uniform2f,l,a,o)},set3f:function(l,a,o,c){return this.setUniform3(this.gl.uniform3f,l,a,o,c)},set4f:function(l,a,o,c,h){return this.setUniform4(this.gl.uniform4f,l,a,o,c,h)},set1fv:function(l,a){return this.setUniform1(this.gl.uniform1fv,l,a,!0)},set2fv:function(l,a){return this.setUniform1(this.gl.uniform2fv,l,a,!0)},set3fv:function(l,a){return this.setUniform1(this.gl.uniform3fv,l,a,!0)},set4fv:function(l,a){return this.setUniform1(this.gl.uniform4fv,l,a,!0)},set1iv:function(l,a){return this.setUniform1(this.gl.uniform1iv,l,a,!0)},set2iv:function(l,a){return this.setUniform1(this.gl.uniform2iv,l,a,!0)},set3iv:function(l,a){return this.setUniform1(this.gl.uniform3iv,l,a,!0)},set4iv:function(l,a){return this.setUniform1(this.gl.uniform4iv,l,a,!0)},set1i:function(l,a){return this.setUniform1(this.gl.uniform1i,l,a)},set2i:function(l,a,o){return this.setUniform2(this.gl.uniform2i,l,a,o)},set3i:function(l,a,o,c){return this.setUniform3(this.gl.uniform3i,l,a,o,c)},set4i:function(l,a,o,c,h){return this.setUniform4(this.gl.uniform4i,l,a,o,c,h)},setMatrix2fv:function(l,a,o){return this.setUniform2(this.gl.uniformMatrix2fv,l,a,o,!0)},setMatrix3fv:function(l,a,o){return this.setUniform2(this.gl.uniformMatrix3fv,l,a,o,!0)},setMatrix4fv:function(l,a,o){return this.setUniform2(this.gl.uniformMatrix4fv,l,a,o,!0)},createProgram:function(l,a){l===void 0&&(l=this.vertSrc),a===void 0&&(a=this.fragSrc);var o=this.gl;return this.program&&o.deleteProgram(this.program),this.vertSrc=l,this.fragSrc=a,this.program=this.renderer.createProgram(l,a),this.createUniforms(),this.rebind()},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});s.exports=u},71402:s=>{var g={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};s.exports=g},55478:(s,g,e)=>{var n=e(71402),p=e(98611),f={PipelineManager:e(35217),Pipelines:e(62253),RenderTarget:e(37410),Utils:e(75512),WebGLPipeline:e(44775),WebGLRenderer:e(11857),WebGLShader:e(71305)};f=p(!1,f,n),s.exports=f},5583:(s,g,e)=>{var n=e(56694),p=e(72632),f=e(91679),u=e(89053),l=e(71402),a=e(44775),o=new n({Extends:a,initialize:function(h){h.fragShader=p(h,"fragShader",f),h.vertShader=p(h,"vertShader",u),h.batchSize=p(h,"batchSize",1),h.vertices=p(h,"vertices",[-1,1,-1,-7,7,1]),h.attributes=p(h,"attributes",[{name:"inPosition",size:2,type:l.FLOAT}]),a.call(this,h)},boot:function(){a.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(c,h){a.prototype.resize.call(this,c,h),this.set2f("uResolution",c,h)},beginMask:function(c,h,d){this.renderer.beginBitmapMask(c,d)},endMask:function(c,h,d){var v=this.gl,m=this.renderer,y=c.bitmapMask;y&&v&&(m.drawBitmapMask(y,h,this),d&&this.set2f("uResolution",d.width,d.height),this.set1i("uInvertMaskAlpha",c.invertAlpha),v.drawArrays(this.topology,0,3),d&&this.set2f("uResolution",this.width,this.height),v.bindTexture(v.TEXTURE_2D,null))}});s.exports=o},81828:(s,g,e)=>{var n=e(56694),p=e(58136),f=e(47406),u=e(72632),l=e(87228),a=e(92462),o=e(75512),c=new n({Extends:l,initialize:function(d){d.shaders=[o.setGlowQuality(a.FXGlowFrag,d.game),a.FXShadowFrag,a.FXPixelateFrag,a.FXVignetteFrag,a.FXShineFrag,a.FXBlurLowFrag,a.FXBlurMedFrag,a.FXBlurHighFrag,a.FXGradientFrag,a.FXBloomFrag,a.ColorMatrixFrag,a.FXCircleFrag,a.FXBarrelFrag,a.FXDisplacementFrag,a.FXWipeFrag,a.FXBokehFrag],l.call(this,d);var v=this.game;this.glow=new p.Glow(v),this.shadow=new p.Shadow(v),this.pixelate=new p.Pixelate(v),this.vignette=new p.Vignette(v),this.shine=new p.Shine(v),this.gradient=new p.Gradient(v),this.circle=new p.Circle(v),this.barrel=new p.Barrel(v),this.wipe=new p.Wipe(v),this.bokeh=new p.Bokeh(v);var m=[];m[f.GLOW]=this.onGlow,m[f.SHADOW]=this.onShadow,m[f.PIXELATE]=this.onPixelate,m[f.VIGNETTE]=this.onVignette,m[f.SHINE]=this.onShine,m[f.BLUR]=this.onBlur,m[f.GRADIENT]=this.onGradient,m[f.BLOOM]=this.onBloom,m[f.COLOR_MATRIX]=this.onColorMatrix,m[f.CIRCLE]=this.onCircle,m[f.BARREL]=this.onBarrel,m[f.DISPLACEMENT]=this.onDisplacement,m[f.WIPE]=this.onWipe,m[f.BOKEH]=this.onBokeh,this.fxHandlers=m,this.source,this.target,this.swap},onDraw:function(h,d,v){this.source=h,this.target=d,this.swap=v;var m=h.width,y=h.height,C=this.tempSprite,T=this.fxHandlers;if(C&&C.preFX)for(var P=C.preFX.list,S=0;S<P.length;S++){var M=P[S];M.active&&T[M.type].call(this,M,m,y)}this.drawToGame(this.source)},runDraw:function(){var h=this.source,d=this.target;this.copy(h,d),this.source=d,this.target=h},onGlow:function(h,d,v){var m=this.shaders[f.GLOW];this.setShader(m),this.glow.onPreRender(h,m,d,v),this.runDraw()},onShadow:function(h){var d=this.shaders[f.SHADOW];this.setShader(d),this.shadow.onPreRender(h,d),this.runDraw()},onPixelate:function(h,d,v){var m=this.shaders[f.PIXELATE];this.setShader(m),this.pixelate.onPreRender(h,m,d,v),this.runDraw()},onVignette:function(h){var d=this.shaders[f.VIGNETTE];this.setShader(d),this.vignette.onPreRender(h,d),this.runDraw()},onShine:function(h,d,v){var m=this.shaders[f.SHINE];this.setShader(m),this.shine.onPreRender(h,m,d,v),this.runDraw()},onBlur:function(h,d,v){var m=u(h,"quality"),y=this.shaders[f.BLUR+m];this.setShader(y),this.set1i("uMainSampler",0),this.set2f("resolution",d,v),this.set1f("strength",u(h,"strength")),this.set3fv("color",u(h,"glcolor"));for(var C=u(h,"x"),T=u(h,"y"),P=u(h,"steps"),S=0;S<P;S++)this.set2f("offset",C,0),this.runDraw(),this.set2f("offset",0,T),this.runDraw()},onGradient:function(h){var d=this.shaders[f.GRADIENT];this.setShader(d),this.gradient.onPreRender(h,d),this.runDraw()},onBloom:function(h,d,v){var m=this.shaders[f.BLOOM];this.copySprite(this.source,this.swap),this.setShader(m),this.set1i("uMainSampler",0),this.set1f("strength",u(h,"blurStrength")),this.set3fv("color",u(h,"glcolor"));for(var y=2/d*u(h,"offsetX"),C=2/v*u(h,"offsetY"),T=u(h,"steps"),P=0;P<T;P++)this.set2f("offset",y,0),this.runDraw(),this.set2f("offset",0,C),this.runDraw();this.blendFrames(this.swap,this.source,this.target,u(h,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(h){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",h.getData()),this.set1f("uAlpha",h.alpha),this.runDraw()},onCircle:function(h,d,v){var m=this.shaders[f.CIRCLE];this.setShader(m),this.circle.onPreRender(h,m,d,v),this.runDraw()},onBarrel:function(h){var d=this.shaders[f.BARREL];this.setShader(d),this.barrel.onPreRender(h,d),this.runDraw()},onDisplacement:function(h){this.setShader(this.shaders[f.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",h.x,h.y),this.bindTexture(h.glTexture,1),this.runDraw()},onWipe:function(h){var d=this.shaders[f.WIPE];this.setShader(d),this.wipe.onPreRender(h,d),this.runDraw()},onBokeh:function(h,d,v){var m=this.shaders[f.BOKEH];this.setShader(m),this.bokeh.onPreRender(h,m,d,v),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,l.prototype.destroy.call(this),this}});s.exports=c},66901:(s,g,e)=>{var n=e(56694),p=e(72632),f=e(65045),u=e(77310),l=e(69360),a=e(93736),o=e(44775),c=new n({Extends:u,initialize:function(d){var v=p(d,"fragShader",f);d.fragShader=v.replace("%LIGHT_COUNT%",d.game.renderer.config.maxLights),u.call(this,d),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new a,this._tempMatrix=new l,this._tempMatrix2=new l},boot:function(){o.prototype.boot.call(this);var h=this.gl,d=h.createTexture();h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,d),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,1,1,0,h.RGBA,h.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:d}},onRender:function(h,d){var v=h.sys.lights;if(this.lightsActive=!1,!(!v||!v.active)){var m=v.getLights(d),y=m.length;this.lightsActive=!0;var C,T=this.renderer,P=T.height,S=d.matrix,M=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",d.x,d.y,d.rotation,d.zoom),this.set3f("uAmbientLightColor",v.ambientColor.r,v.ambientColor.g,v.ambientColor.b),this.set1i("uLightCount",y),C=0;C<y;C++){var E=m[C].light,A=E.color,R="uLights["+C+"].";S.transformPoint(E.x,E.y,M),this.set2f(R+"position",M.x-d.scrollX*E.scrollFactorX*d.zoom,P-(M.y-d.scrollY*E.scrollFactorY*d.zoom)),this.set3f(R+"color",A.r,A.g,A.b),this.set1f(R+"intensity",E.intensity),this.set1f(R+"radius",E.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(h){if(h!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var d=this.inverseRotationMatrix;if(h){var v=-h,m=Math.cos(v),y=Math.sin(v);d[1]=y,d[3]=-y,d[0]=d[4]=m}else d[0]=d[4]=1,d[1]=d[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,d),this.currentNormalMapRotation=h}},setTexture2D:function(h,d){var v=this.renderer;h===void 0&&(h=v.whiteTexture);var m=this.getNormalMap(d);this.isNewNormalMap(h,m)&&(this.flush(),this.createBatch(h),this.addTextureToBatch(m),this.currentNormalMap=m);var y=0;if(d&&d.parentContainer){var C=d.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);y=C.rotationNormalized}else d&&(y=d.rotation);return this.setNormalMapRotation(y),0},setGameObject:function(h,d){d===void 0&&(d=h.frame);var v=d.glTexture,m=this.getNormalMap(h);if(this.isNewNormalMap(v,m)&&(this.flush(),this.createBatch(v),this.addTextureToBatch(m),this.currentNormalMap=m),h.parentContainer){var y=h.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(y.rotationNormalized)}else this.setNormalMapRotation(h.rotation);return 0},isNewNormalMap:function(h,d){return this.currentTexture!==h||this.currentNormalMap!==d},getNormalMap:function(h){var d;return h?h.displayTexture?d=h.displayTexture.dataSource[h.displayFrame.sourceIndex]:h.texture?d=h.texture.dataSource[h.frame.sourceIndex]:h.tileset&&(Array.isArray(h.tileset)?d=h.tileset[0].image.dataSource[0]:d=h.tileset.image.dataSource[0]):d=this.defaultNormalMap,d||(d=this.defaultNormalMap),d.glTexture},batchSprite:function(h,d,v){this.lightsActive&&u.prototype.batchSprite.call(this,h,d,v)},batchTexture:function(h,d,v,m,y,C,T,P,S,M,E,A,R,w,O,F,b,I,N,z,U,W,D,V,L,B,G,Y,X,k,H,K){this.lightsActive&&u.prototype.batchTexture.call(this,h,d,v,m,y,C,T,P,S,M,E,A,R,w,O,F,b,I,N,z,U,W,D,V,L,B,G,Y,X,k,H,K)},batchTextureFrame:function(h,d,v,m,y,C,T){this.lightsActive&&u.prototype.batchTextureFrame.call(this,h,d,v,m,y,C,T)}});s.exports=c},71264:(s,g,e)=>{var n=e(56694),p=e(72632),f=e(77310),u=e(85060),l=e(18166),a=e(71402),o=e(44775),c=new n({Extends:f,initialize:function(d){d.fragShader=p(d,"fragShader",u),d.vertShader=p(d,"vertShader",l),d.attributes=p(d,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:a.UNSIGNED_BYTE,normalized:!0}]),d.forceZero=!0,f.call(this,d)},boot:function(){o.prototype.boot.call(this),this.set1i("uMainSampler",0)}});s.exports=c},77310:(s,g,e)=>{var n=e(56694),p=e(11117),f=e(72632),u=e(53787),l=e(15968),a=e(69360),o=e(75512),c=e(71402),h=e(44775),d=new n({Extends:h,initialize:function(m){var y=m.game.renderer,C=f(m,"fragShader",u);m.fragShader=o.parseFragmentShaderMaxTextures(C,y.maxTextures),m.vertShader=f(m,"vertShader",l),m.attributes=f(m,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:c.UNSIGNED_BYTE,normalized:!0}]),h.call(this,m),this._tempMatrix1=new a,this._tempMatrix2=new a,this._tempMatrix3=new a,this.calcMatrix=new a,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){h.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(v,m,y){this.manager.set(this,v);var C=this._tempMatrix1,T=this._tempMatrix2,P=this._tempMatrix3,S=v.frame,M=S.glTexture,E=S.u0,A=S.v0,R=S.u1,w=S.v1,O=S.x,F=S.y,b=S.cutWidth,I=S.cutHeight,N=S.customPivot,z=v.displayOriginX,U=v.displayOriginY,W=-z+O,D=-U+F;if(v.isCropped){var V=v._crop;(V.flipX!==v.flipX||V.flipY!==v.flipY)&&S.updateCropUVs(V,v.flipX,v.flipY),E=V.u0,A=V.v0,R=V.u1,w=V.v1,b=V.width,I=V.height,O=V.x,F=V.y,W=-z+O,D=-U+F}var L=1,B=1;v.flipX&&(N||(W+=-S.realWidth+z*2),L=-1),(v.flipY||S.source.isGLTexture&&!M.flipY)&&(N||(D+=-S.realHeight+U*2),B=-1);var G=v.x,Y=v.y;T.applyITRS(G,Y,v.rotation,v.scaleX*L,v.scaleY*B),C.copyFrom(m.matrix),y?(C.multiplyWithOffset(y,-m.scrollX*v.scrollFactorX,-m.scrollY*v.scrollFactorY),T.e=G,T.f=Y):(T.e-=m.scrollX*v.scrollFactorX,T.f-=m.scrollY*v.scrollFactorY),C.multiply(T,P);var X=P.setQuad(W,D,W+b,D+I,m.roundPixels),k=o.getTintAppendFloatAlpha,H=m.alpha,K=k(v.tintTopLeft,H*v._alphaTL),j=k(v.tintTopRight,H*v._alphaTR),$=k(v.tintBottomLeft,H*v._alphaBL),Q=k(v.tintBottomRight,H*v._alphaBR);this.shouldFlush(6)&&this.flush();var _=this.setGameObject(v,S);this.manager.preBatch(v),this.batchQuad(v,X[0],X[1],X[2],X[3],X[4],X[5],X[6],X[7],E,A,R,w,K,j,$,Q,v.tintFill,M,_),this.manager.postBatch(v)},batchTexture:function(v,m,y,C,T,P,S,M,E,A,R,w,O,F,b,I,N,z,U,W,D,V,L,B,G,Y,X,k,H,K,j,$){this.manager.set(this,v);var Q=this._tempMatrix1,_=this._tempMatrix2,q=this._tempMatrix3,et=z/y+X,at=U/C+k,ht=(z+W)/y+X,ot=(U+D)/C+k,tt=S,rt=M,it=-I,xt=-N;if(v.isCropped){var vt=v._crop,Bt=vt.width,Rt=vt.height;tt=Bt,rt=Rt,S=Bt,M=Rt,z=vt.x,U=vt.y;var St=z,yt=U;w&&(St=W-vt.x-Bt),O&&(yt=D-vt.y-Rt),et=St/y+X,at=yt/C+k,ht=(St+Bt)/y+X,ot=(yt+Rt)/C+k,it=-I+z,xt=-N+U}O=O^(!j&&m.isRenderTexture?1:0),w&&(tt*=-1,it+=S),O&&(rt*=-1,xt+=M),_.applyITRS(T,P,R,E,A),Q.copyFrom(H.matrix),K?(Q.multiplyWithOffset(K,-H.scrollX*F,-H.scrollY*b),_.e=T,_.f=P):(_.e-=H.scrollX*F,_.f-=H.scrollY*b),Q.multiply(_,q);var Ot=q.setQuad(it,xt,it+tt,xt+rt,H.roundPixels);$===void 0&&($=this.setTexture2D(m)),v&&this.manager.preBatch(v),this.batchQuad(v,Ot[0],Ot[1],Ot[2],Ot[3],Ot[4],Ot[5],Ot[6],Ot[7],et,at,ht,ot,V,L,B,G,Y,m,$),v&&this.manager.postBatch(v)},batchTextureFrame:function(v,m,y,C,T,P,S){this.manager.set(this);var M=this._tempMatrix1.copyFrom(P),E=this._tempMatrix2;S?M.multiply(S,E):E=M;var A=E.setQuad(m,y,m+v.width,y+v.height,!1),R=this.setTexture2D(v.source.glTexture);C=o.getTintAppendFloatAlpha(C,T),this.batchQuad(null,A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],v.u0,v.v0,v.u1,v.v1,C,C,C,C,0,v.glTexture,R)},batchFillRect:function(v,m,y,C,T,P){this.renderer.pipelines.set(this);var S=this.calcMatrix;P&&P.multiply(T,S);var M=S.setQuad(v,m,v+y,m+C,!1),E=this.fillTint;this.batchQuad(null,M[0],M[1],M[2],M[3],M[4],M[5],M[6],M[7],0,0,1,1,E.TL,E.TR,E.BL,E.BR,2)},batchFillTriangle:function(v,m,y,C,T,P,S,M){this.renderer.pipelines.set(this);var E=this.calcMatrix;M&&M.multiply(S,E);var A=E.getX(v,m),R=E.getY(v,m),w=E.getX(y,C),O=E.getY(y,C),F=E.getX(T,P),b=E.getY(T,P),I=this.fillTint;this.batchTri(null,A,R,w,O,F,b,0,0,1,1,I.TL,I.TR,I.BL,2)},batchStrokeTriangle:function(v,m,y,C,T,P,S,M,E){var A=this.tempTriangle;A[0].x=v,A[0].y=m,A[0].width=S,A[1].x=y,A[1].y=C,A[1].width=S,A[2].x=T,A[2].y=P,A[2].width=S,A[3].x=v,A[3].y=m,A[3].width=S,this.batchStrokePath(A,S,!1,M,E)},batchFillPath:function(v,m,y){this.renderer.pipelines.set(this);var C=this.calcMatrix;y&&y.multiply(m,C);for(var T=v.length,P=this.polygonCache,S,M,E=this.fillTint.TL,A=this.fillTint.TR,R=this.fillTint.BL,w=0;w<T;++w)M=v[w],P.push(M.x,M.y);S=p(P),T=S.length;for(var O=0;O<T;O+=3){var F=S[O+0]*2,b=S[O+1]*2,I=S[O+2]*2,N=P[F+0],z=P[F+1],U=P[b+0],W=P[b+1],D=P[I+0],V=P[I+1],L=C.getX(N,z),B=C.getY(N,z),G=C.getX(U,W),Y=C.getY(U,W),X=C.getX(D,V),k=C.getY(D,V);this.batchTri(null,L,B,G,Y,X,k,0,0,1,1,E,A,R,2)}P.length=0},batchStrokePath:function(v,m,y,C,T){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var P=v.length-1,S=0;S<P;S++){var M=v[S],E=v[S+1];this.batchLine(M.x,M.y,E.x,E.y,M.width/2,E.width/2,m,S,!y&&S===P-1,C,T)}},batchLine:function(v,m,y,C,T,P,S,M,E,A,R){this.renderer.pipelines.set(this);var w=this.calcMatrix;R&&R.multiply(A,w);var O=y-v,F=C-m,b=Math.sqrt(O*O+F*F);if(b!==0){var I=T*(C-m)/b,N=T*(v-y)/b,z=P*(C-m)/b,U=P*(v-y)/b,W=y-z,D=C-U,V=v-I,L=m-N,B=y+z,G=C+U,Y=v+I,X=m+N,k=w.getX(W,D),H=w.getY(W,D),K=w.getX(V,L),j=w.getY(V,L),$=w.getX(B,G),Q=w.getY(B,G),_=w.getX(Y,X),q=w.getY(Y,X),et=this.strokeTint,at=et.TL,ht=et.TR,ot=et.BL,tt=et.BR;if(this.batchQuad(null,_,q,K,j,k,H,$,Q,0,0,1,1,at,ht,ot,tt,2),!(S<=2)){var rt=this.prevQuad,it=this.firstQuad;M>0&&rt[4]?this.batchQuad(null,_,q,K,j,rt[0],rt[1],rt[2],rt[3],0,0,1,1,at,ht,ot,tt,2):(it[0]=_,it[1]=q,it[2]=K,it[3]=j,it[4]=1),E&&it[4]?this.batchQuad(null,k,H,$,Q,it[0],it[1],it[2],it[3],0,0,1,1,at,ht,ot,tt,2):(rt[0]=k,rt[1]=H,rt[2]=$,rt[3]=Q,rt[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,h.prototype.destroy.call(this),this}});s.exports=d},10919:(s,g,e)=>{var n=e(56694),p=e(72632),f=e(83327),u=e(54677),l=e(44775),a=new n({Extends:l,initialize:function(c){c.vertShader=p(c,"vertShader",u),c.fragShader=p(c,"fragShader",f),c.attributes=p(c,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),l.call(this,c)},onRender:function(o,c){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",c.zoom)},batchPointLight:function(o,c,h,d,v,m,y,C,T,P,S,M){var E=o.color,A=o.intensity,R=o.radius,w=o.attenuation,O=E.r*A,F=E.g*A,b=E.b*A,I=c.alpha*o.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(h,d,S,M,R,w,O,F,b,I),this.batchLightVert(v,m,S,M,R,w,O,F,b,I),this.batchLightVert(y,C,S,M,R,w,O,F,b,I),this.batchLightVert(h,d,S,M,R,w,O,F,b,I),this.batchLightVert(y,C,S,M,R,w,O,F,b,I),this.batchLightVert(T,P,S,M,R,w,O,F,b,I),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(o,c,h,d,v,m,y,C,T,P){var S=this.vertexViewF32,M=this.vertexCount*this.currentShader.vertexComponentCount-1;S[++M]=o,S[++M]=c,S[++M]=h,S[++M]=d,S[++M]=v,S[++M]=m,S[++M]=y,S[++M]=C,S[++M]=T,S[++M]=P,this.vertexCount++}});s.exports=a},80486:(s,g,e)=>{var n=e(56694),p=e(65246),f=e(72632),u=e(12569),l=e(99365),a=e(44775),o=new n({Extends:a,initialize:function(h){h.renderTarget=f(h,"renderTarget",1),h.fragShader=f(h,"fragShader",u),h.vertShader=f(h,"vertShader",l),h.attributes=f(h,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),h.batchSize=1,h.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],a.call(this,h),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new p,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){a.prototype.boot.call(this);var c=this.manager.UTILITY_PIPELINE;this.fullFrame1=c.fullFrame1,this.fullFrame2=c.fullFrame2,this.halfFrame1=c.halfFrame1,this.halfFrame2=c.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(c){this.bindAndDraw(c)},getController:function(c){return c!==void 0?c:this.controller?this.controller:this},copySprite:function(c,h,d){d===void 0&&(d=!1);var v=this.gl;v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,c.texture);var m=v.getParameter(v.FRAMEBUFFER_BINDING);v.bindFramebuffer(v.FRAMEBUFFER,h.framebuffer),v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,h.texture,0),v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT),v.bufferData(v.ARRAY_BUFFER,this.vertexData,v.STATIC_DRAW),v.drawArrays(v.TRIANGLES,0,6),d&&(v.bindTexture(v.TEXTURE_2D,null),v.bindFramebuffer(v.FRAMEBUFFER,m))},copyFrame:function(c,h,d,v,m){this.manager.copyFrame(c,h,d,v,m)},copyToGame:function(c){this.manager.copyToGame(c)},drawFrame:function(c,h,d){this.manager.drawFrame(c,h,d,this.colorMatrix)},blendFrames:function(c,h,d,v,m){this.manager.blendFrames(c,h,d,v,m)},blendFramesAdditive:function(c,h,d,v,m){this.manager.blendFramesAdditive(c,h,d,v,m)},clearFrame:function(c,h){this.manager.clearFrame(c,h)},blitFrame:function(c,h,d,v,m,y){this.manager.blitFrame(c,h,d,v,m,y)},copyFrameRect:function(c,h,d,v,m,y,C,T){this.manager.copyFrameRect(c,h,d,v,m,y,C,T)},bindAndDraw:function(c,h,d,v,m){d===void 0&&(d=!0),v===void 0&&(v=!0);var y=this.gl,C=this.renderer;this.bind(m),this.set1i("uMainSampler",0),h?(y.viewport(0,0,h.width,h.height),y.bindFramebuffer(y.FRAMEBUFFER,h.framebuffer),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,h.texture,0),d&&(v?y.clearColor(0,0,0,0):y.clearColor(0,0,0,1),y.clear(y.COLOR_BUFFER_BIT))):(C.popFramebuffer(!1,!1),C.currentFramebuffer||y.viewport(0,0,C.width,C.height)),C.restoreStencilMask(),y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,c.texture),y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.STATIC_DRAW),y.drawArrays(y.TRIANGLES,0,6),h&&(y.bindTexture(y.TEXTURE_2D,null),y.bindFramebuffer(y.FRAMEBUFFER,C.currentFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,a.prototype.destroy.call(this),this}});s.exports=o},87228:(s,g,e)=>{var n=e(95723),p=e(79993),f=e(56694),u=e(37486),l=e(72632),a=e(77310),o=e(12569),c=e(74118),h=e(37410),d=e(85060),v=e(18166),m=e(44775),y=new f({Extends:a,initialize:function(T){var P=l(T,"fragShader",o),S=l(T,"vertShader",v),M=l(T,"drawShader",o),E=[{name:"DrawSprite",fragShader:d,vertShader:v},{name:"CopySprite",fragShader:P,vertShader:S},{name:"DrawGame",fragShader:M,vertShader:v},{name:"ColorMatrix",fragShader:u}],A=l(T,"shaders",[]);T.shaders=E.concat(A),T.vertShader||(T.vertShader=S),T.batchSize=1,a.call(this,T),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new c,this.targetBounds=new c,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){m.prototype.boot.call(this);var C=this.shaders,T=this.renderer;this.drawSpriteShader=C[0],this.copyShader=C[1],this.gameShader=C[2],this.colorMatrixShader=C[3],this.fsTarget=new h(T,T.width,T.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var P=new ArrayBuffer(168);this.quadVertexData=P,this.quadVertexViewF32=new Float32Array(P),this.quadVertexBuffer=T.createVertexBuffer(P,this.gl.STATIC_DRAW),this.onResize(T.width,T.height),this.currentShader=this.copyShader},onResize:function(C,T){var P=this.quadVertexViewF32;P[1]=T,P[22]=T,P[14]=C,P[28]=C,P[35]=C,P[36]=T},batchQuad:function(C,T,P,S,M,E,A,R,w,O,F,b,I,N,z,U,W,D,V){var L=Math.min(T,S,E,R),B=Math.min(P,M,A,w),G=Math.max(T,S,E,R),Y=Math.max(P,M,A,w),X=G-L,k=Y-B,H=this.spriteBounds.setTo(L,B,X,k),K=C?C.preFX.padding:0,j=X+K*2,$=k+K*2,Q=Math.abs(Math.max(j,$)),_=this.manager.getRenderTarget(Q),q=this.targetBounds.setTo(0,0,_.width,_.height);p(q,H.centerX,H.centerY),this.tempSprite=C;var et=this.gl,at=this.renderer;at.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.flipProjectionMatrix(!0),C&&(this.onDrawSprite(C,_),C.preFX.onFX(this));var ht=this.fsTarget;return this.flush(),et.viewport(0,0,at.width,at.height),et.bindFramebuffer(et.FRAMEBUFFER,ht.framebuffer),et.framebufferTexture2D(et.FRAMEBUFFER,et.COLOR_ATTACHMENT0,et.TEXTURE_2D,ht.texture,0),et.clearColor(0,0,0,0),et.clear(et.COLOR_BUFFER_BIT),this.setTexture2D(V),this.batchVert(T,P,O,F,0,D,N),this.batchVert(S,M,O,I,0,D,U),this.batchVert(E,A,b,I,0,D,W),this.batchVert(T,P,O,F,0,D,N),this.batchVert(E,A,b,I,0,D,W),this.batchVert(R,w,b,F,0,D,z),this.flush(),this.flipProjectionMatrix(!1),et.activeTexture(et.TEXTURE0),et.bindTexture(et.TEXTURE_2D,_.texture),et.copyTexSubImage2D(et.TEXTURE_2D,0,0,0,q.x,q.y,q.width,q.height),et.bindFramebuffer(et.FRAMEBUFFER,null),et.bindTexture(et.TEXTURE_2D,null),this.onBatch(C),this.currentShader=this.copyShader,this.onDraw(_,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(C,T,P,S,M,E,A){P===void 0&&(P=!0),S===void 0&&(S=!0),M===void 0&&(M=!1),A===void 0&&(A=this.copyShader);var R=this.gl,w=this.tempSprite;E&&(A=this.colorMatrixShader),this.currentShader=A;var O=this.setVertexBuffer(this.quadVertexBuffer);if(A.bind(O,!1),this.set1i("uMainSampler",0),w.preFX.onFXCopy(this),this.onCopySprite(C,T,w),E&&(this.set1fv("uColorMatrix",E.getData()),this.set1f("uAlpha",E.alpha)),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,C.texture),C.height>T.height)R.viewport(0,0,C.width,C.height),this.setTargetUVs(C,T);else{var F=T.height-C.height;R.viewport(0,F,C.width,C.height),this.resetUVs()}if(R.bindFramebuffer(R.FRAMEBUFFER,T.framebuffer),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,T.texture,0),P&&(R.clearColor(0,0,0,Number(!S)),R.clear(R.COLOR_BUFFER_BIT)),M){var b=this.renderer.currentBlendMode;this.renderer.setBlendMode(n.ERASE)}R.bufferData(R.ARRAY_BUFFER,this.quadVertexData,R.STATIC_DRAW),R.drawArrays(R.TRIANGLES,0,6),M&&this.renderer.setBlendMode(b),R.bindFramebuffer(R.FRAMEBUFFER,null)},copy:function(C,T){var P=this.gl;this.set1i("uMainSampler",0),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,C.texture),P.viewport(0,0,C.width,C.height),this.setUVs(0,0,0,1,1,1,1,0),P.bindFramebuffer(P.FRAMEBUFFER,T.framebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,T.texture,0),P.clearColor(0,0,0,0),P.clear(P.COLOR_BUFFER_BIT),P.bufferData(P.ARRAY_BUFFER,this.quadVertexData,P.STATIC_DRAW),P.drawArrays(P.TRIANGLES,0,6),P.bindFramebuffer(P.FRAMEBUFFER,null)},blendFrames:function(C,T,P,S,M){this.manager.blendFrames(C,T,P,S,M)},blendFramesAdditive:function(C,T,P,S,M){this.manager.blendFramesAdditive(C,T,P,S,M)},drawToGame:function(C){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(C)},copyToGame:function(C){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(C)},bindAndDraw:function(C){var T=this.gl,P=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(C.texture);var S=this._tempMatrix1.loadIdentity(),M=this.targetBounds.x,E=this.targetBounds.y,A=M+C.width,R=E+C.height,w=S.getX(M,E),O=S.getX(M,R),F=S.getX(A,R),b=S.getX(A,E),I=S.getY(M,E),N=S.getY(M,R),z=S.getY(A,R),U=S.getY(A,E),W=16777215;this.batchVert(w,I,0,0,0,0,W),this.batchVert(O,N,0,1,0,0,W),this.batchVert(F,z,1,1,0,0,W),this.batchVert(w,I,0,0,0,0,W),this.batchVert(F,z,1,1,0,0,W),this.batchVert(b,U,1,0,0,0,W),P.restoreFramebuffer(!1,!0),P.currentFramebuffer||T.viewport(0,0,P.width,P.height),P.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(C){this.drawToGame(C)},setUVs:function(C,T,P,S,M,E,A,R){var w=this.quadVertexViewF32;w[2]=C,w[3]=T,w[9]=P,w[10]=S,w[16]=M,w[17]=E,w[23]=C,w[24]=T,w[30]=M,w[31]=E,w[37]=A,w[38]=R},setTargetUVs:function(C,T){var P=T.height/C.height;P>.5?P=.5-(P-.5):P=.5+(.5-P),this.setUVs(0,P,0,1+P,1,1+P,1,P)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.gl.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,a.prototype.destroy.call(this),this}});s.exports=y},21213:(s,g,e)=>{var n=e(56694),p=e(72632),f=e(77310),u=new n({Extends:f,initialize:function(a){a.topology=5,a.batchSize=p(a,"batchSize",256),f.call(this,a)}});s.exports=u},51212:(s,g,e)=>{var n=e(56694),p=e(72632),f=e(77310),u=e(85060),l=e(18166),a=e(44775),o=new n({Extends:f,initialize:function(h){h.fragShader=p(h,"fragShader",u),h.vertShader=p(h,"vertShader",l),h.forceZero=!0,f.call(this,h)},boot:function(){a.prototype.boot.call(this),this.set1i("uMainSampler",0)}});s.exports=o},60848:(s,g,e)=>{var n=e(2529),p=e(95723),f=e(56694),u=e(65246),l=e(37486),a=e(79060),o=e(72632),c=e(98921),h=e(99365),d=e(44775),v=new f({Extends:d,initialize:function(y){y.renderTarget=o(y,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),y.vertShader=o(y,"vertShader",h),y.shaders=o(y,"shaders",[{name:"Copy",fragShader:a},{name:"AddBlend",fragShader:n},{name:"LinearBlend",fragShader:c},{name:"ColorMatrix",fragShader:l}]),y.attributes=o(y,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),y.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],y.batchSize=1,d.call(this,y),this.colorMatrix=new u,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){d.prototype.boot.call(this);var m=this.shaders,y=this.renderTargets;this.copyShader=m[0],this.addShader=m[1],this.linearShader=m[2],this.colorMatrixShader=m[3],this.fullFrame1=y[0],this.fullFrame2=y[1],this.halfFrame1=y[2],this.halfFrame2=y[3]},copyFrame:function(m,y,C,T,P){C===void 0&&(C=1),T===void 0&&(T=!0),P===void 0&&(P=!0);var S=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",C),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,m.texture),y?(S.viewport(0,0,y.width,y.height),S.bindFramebuffer(S.FRAMEBUFFER,y.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,y.texture,0)):S.viewport(0,0,m.width,m.height),T&&(P?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT)),S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null)},blitFrame:function(m,y,C,T,P,S,M){C===void 0&&(C=1),T===void 0&&(T=!0),P===void 0&&(P=!0),S===void 0&&(S=!1),M===void 0&&(M=!1);var E=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",C),E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,m.texture),m.height>y.height)E.viewport(0,0,m.width,m.height),this.setTargetUVs(m,y);else{var A=y.height-m.height;E.viewport(0,A,m.width,m.height)}if(E.bindFramebuffer(E.FRAMEBUFFER,y.framebuffer),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,y.texture,0),T&&(P?E.clearColor(0,0,0,0):E.clearColor(0,0,0,1),E.clear(E.COLOR_BUFFER_BIT)),S){var R=this.renderer.currentBlendMode;this.renderer.setBlendMode(p.ERASE)}M&&this.flipY(),E.bufferData(E.ARRAY_BUFFER,this.vertexData,E.STATIC_DRAW),E.drawArrays(E.TRIANGLES,0,6),S&&this.renderer.setBlendMode(R),E.bindFramebuffer(E.FRAMEBUFFER,null),E.bindTexture(E.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(m,y,C,T,P,S,M,E){M===void 0&&(M=!0),E===void 0&&(E=!0);var A=this.gl;A.bindFramebuffer(A.FRAMEBUFFER,m.framebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,m.texture,0),M&&(E?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT)),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,y.texture),A.copyTexSubImage2D(A.TEXTURE_2D,0,0,0,C,T,P,S),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null)},copyToGame:function(m){var y=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,m.texture),y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.STATIC_DRAW),y.drawArrays(y.TRIANGLES,0,6)},drawFrame:function(m,y,C,T){C===void 0&&(C=!0),T===void 0&&(T=this.colorMatrix);var P=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",T.getData()),this.set1f("uAlpha",T.alpha),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,m.texture),y?(P.viewport(0,0,y.width,y.height),P.bindFramebuffer(P.FRAMEBUFFER,y.framebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,y.texture,0)):P.viewport(0,0,m.width,m.height),C?P.clearColor(0,0,0,0):P.clearColor(0,0,0,1),P.clear(P.COLOR_BUFFER_BIT),P.bufferData(P.ARRAY_BUFFER,this.vertexData,P.STATIC_DRAW),P.drawArrays(P.TRIANGLES,0,6),P.bindFramebuffer(P.FRAMEBUFFER,null),P.bindTexture(P.TEXTURE_2D,null)},blendFrames:function(m,y,C,T,P,S){T===void 0&&(T=1),P===void 0&&(P=!0),S===void 0&&(S=this.linearShader);var M=this.gl;this.setShader(S),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",T),M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,m.texture),M.activeTexture(M.TEXTURE1),M.bindTexture(M.TEXTURE_2D,y.texture),C?(M.bindFramebuffer(M.FRAMEBUFFER,C.framebuffer),M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,C.texture,0),M.viewport(0,0,C.width,C.height)):M.viewport(0,0,m.width,m.height),P?M.clearColor(0,0,0,0):M.clearColor(0,0,0,1),M.clear(M.COLOR_BUFFER_BIT),M.bufferData(M.ARRAY_BUFFER,this.vertexData,M.STATIC_DRAW),M.drawArrays(M.TRIANGLES,0,6),M.bindFramebuffer(M.FRAMEBUFFER,null),M.bindTexture(M.TEXTURE_2D,null)},blendFramesAdditive:function(m,y,C,T,P){this.blendFrames(m,y,C,T,P,this.addShader)},clearFrame:function(m,y){y===void 0&&(y=!0);var C=this.gl;C.viewport(0,0,m.width,m.height),C.bindFramebuffer(C.FRAMEBUFFER,m.framebuffer),y?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT);var T=this.renderer.currentFramebuffer;C.bindFramebuffer(C.FRAMEBUFFER,T)},setUVs:function(m,y,C,T,P,S,M,E){var A=this.vertexViewF32;A[2]=m,A[3]=y,A[6]=C,A[7]=T,A[10]=P,A[11]=S,A[14]=m,A[15]=y,A[18]=P,A[19]=S,A[22]=M,A[23]=E},setTargetUVs:function(m,y){var C=y.height/m.height;C>.5?C=.5-(C-.5):C=.5+(.5-C),this.setUVs(0,C,0,1+C,1,1+C,1,C)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});s.exports=v},65641:s=>{var g={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};s.exports=g},68726:s=>{s.exports="pipelineafterflush"},67186:s=>{s.exports="pipelinebeforeflush"},22709:s=>{s.exports="pipelinebind"},74469:s=>{s.exports="pipelineboot"},93953:s=>{s.exports="pipelinedestroy"},51687:s=>{s.exports="pipelinerebind"},25034:s=>{s.exports="pipelineresize"},18970:(s,g,e)=>{s.exports={AFTER_FLUSH:e(68726),BEFORE_FLUSH:e(67186),BIND:e(22709),BOOT:e(74469),DESTROY:e(93953),REBIND:e(51687),RESIZE:e(25034)}},32469:(s,g,e)=>{var n=e(56694),p=e(87751),f=e(80486),u=new n({Extends:f,initialize:function(a){f.call(this,{game:a,fragShader:p}),this.amount=1},onPreRender:function(l,a){l=this.getController(l),this.set1f("amount",l.amount,a)}});s.exports=u},2134:(s,g,e)=>{var n=e(56694),p=e(88222),f=e(80486),u=new n({Extends:f,initialize:function(a){f.call(this,{game:a,fragShader:p}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(l){l=this.getController(l),this.set1f("strength",l.blurStrength),this.set3fv("color",l.glcolor)},onDraw:function(l){var a=this.getController(),o=this.fullFrame1,c=this.fullFrame2;this.copyFrame(l,c);for(var h=2/l.width*a.offsetX,d=2/l.height*a.offsetY,v=0;v<a.steps;v++)this.set2f("offset",h,0),this.copySprite(l,o),this.set2f("offset",0,d),this.copySprite(o,l);this.blendFrames(c,l,o,a.strength),this.copyToGame(o)}});s.exports=u},63377:(s,g,e)=>{var n=e(56694),p=e(35491),f=e(75568),u=e(44481),l=e(80486),a=new n({Extends:l,initialize:function(c){l.call(this,{game:c,shaders:[{name:"Gaussian5",fragShader:p},{name:"Gaussian9",fragShader:f},{name:"Gaussian13",fragShader:u}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(o){var c=this.getController(),h=this.gl,d=this.fullFrame1,v=h.getParameter(h.FRAMEBUFFER_BINDING);this.bind(this.activeShader),h.activeTexture(h.TEXTURE0),h.viewport(0,0,o.width,o.height),this.set1i("uMainSampler",0),this.set2f("resolution",o.width,o.height),this.set1f("strength",c.strength),this.set3fv("color",c.glcolor);for(var m=0;m<c.steps;m++)this.set2f("offset",c.x,0),this.copySprite(o,d),this.set2f("offset",0,c.y),this.copySprite(d,o);h.bindFramebuffer(h.FRAMEBUFFER,v),h.bindTexture(h.TEXTURE_2D,null),this.copyToGame(o)}});s.exports=a},49745:(s,g,e)=>{var n=e(56694),p=e(69960),f=e(80486),u=new n({Extends:f,initialize:function(a){f.call(this,{game:a,fragShader:p}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(l,a,o,c){l=this.getController(l),this.set1f("radius",l.radius,a),this.set1f("amount",l.amount,a),this.set1f("contrast",l.contrast,a),this.set1f("strength",l.strength,a),this.set2f("blur",l.blurX,l.blurY,a),this.setBoolean("isTiltShift",l.isTiltShift,a),o&&c&&this.set2f("resolution",o,c,a)},onDraw:function(l){this.set2f("resolution",l.width,l.height),this.bindAndDraw(l)}});s.exports=u},4323:(s,g,e)=>{var n=e(56694),p=e(33754),f=e(80486),u=new n({Extends:f,initialize:function(a){f.call(this,{game:a,fragShader:p}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(l,a,o,c){l=this.getController(l),this.set1f("scale",l.scale,a),this.set1f("feather",l.feather,a),this.set1f("thickness",l.thickness,a),this.set3fv("color",l.glcolor,a),this.set4fv("backgroundColor",l.glcolor2,a),o&&c&&this.set2f("resolution",o,c,a)},onDraw:function(l){this.set2f("resolution",l.width,l.height),this.bindAndDraw(l)}});s.exports=u},92066:(s,g,e)=>{var n=e(56694),p=e(80486),f=new n({Extends:p,initialize:function(l){p.call(this,{game:l})},onDraw:function(u){var l=this.fullFrame1;this.controller?this.manager.drawFrame(u,l,!0,this.controller):this.drawFrame(u,l),this.copyToGame(l)}});s.exports=f},89581:(s,g,e)=>{var n=e(56694),p=e(35668),f=e(80486),u=new n({Extends:f,initialize:function(a){f.call(this,{game:a,fragShader:p}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(l){var a=this.game.textures.getFrame(l);a&&(this.glTexture=a.glTexture)},onDraw:function(l){var a=this.getController(),o=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",a.x,a.y),this.bindTexture(a.glTexture,1),this.copySprite(l,o),this.copyToGame(o)}});s.exports=u},55084:(s,g,e)=>{var n=e(56694),p=e(72632),f=e(69675),u=e(80486),l=e(75512),a=new n({Extends:u,initialize:function(c,h){var d=p(h,"quality",.1),v=p(h,"distance",10);u.call(this,{game:c,fragShader:l.setGlowQuality(f,c,d,v)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(o,c,h,d){o=this.getController(o),this.set1f("outerStrength",o.outerStrength,c),this.set1f("innerStrength",o.innerStrength,c),this.set4fv("glowColor",o.glcolor,c),this.setBoolean("knockout",o.knockout,c),h&&d&&this.set2f("resolution",h,d,c)},onDraw:function(o){this.set2f("resolution",o.width,o.height),this.bindAndDraw(o)}});s.exports=a},41653:(s,g,e)=>{var n=e(56694),p=e(90993),f=e(80486),u=new n({Extends:f,initialize:function(a){f.call(this,{game:a,fragShader:p}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(l,a){l=this.getController(l),this.set1f("alpha",l.alpha,a),this.set1i("size",l.size,a),this.set3fv("color1",l.glcolor1,a),this.set3fv("color2",l.glcolor2,a),this.set2f("positionFrom",l.fromX,l.fromY,a),this.set2f("positionTo",l.toX,l.toY,a)}});s.exports=u},73416:(s,g,e)=>{var n=e(56694),p=e(37945),f=e(80486),u=new n({Extends:f,initialize:function(a){f.call(this,{game:a,fragShader:p}),this.amount=1},onPreRender:function(l,a,o,c){l=this.getController(l),this.set1f("amount",l.amount,a),o&&c&&this.set2f("resolution",o,c,a)},onDraw:function(l){this.set2f("resolution",l.width,l.height),this.bindAndDraw(l)}});s.exports=u},58049:(s,g,e)=>{var n=e(56694),p=e(85718),f=e(80486),u=new n({Extends:f,initialize:function(a){f.call(this,{game:a,fragShader:p}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(l,a){l=this.getController(l);var o=l.samples;this.set1i("samples",o,a),this.set1f("intensity",l.intensity,a),this.set1f("decay",l.decay,a),this.set1f("power",l.power/o,a),this.set2f("lightPosition",l.x,l.y,a),this.set4fv("color",l.glcolor,a)}});s.exports=u},18026:(s,g,e)=>{var n=e(56694),p=e(13740),f=e(80486),u=new n({Extends:f,initialize:function(a){f.call(this,{game:a,fragShader:p}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(l,a,o,c){l=this.getController(l),this.setTime("time",a),this.set1f("speed",l.speed,a),this.set1f("lineWidth",l.lineWidth,a),this.set1f("gradient",l.gradient,a),this.setBoolean("reveal",l.reveal,a),o&&c&&this.set2f("resolution",o,c,a)},onDraw:function(l){this.set2f("resolution",l.width,l.height),this.bindAndDraw(l)}});s.exports=u},72381:(s,g,e)=>{var n=e(56694),p=e(80617),f=e(80486),u=new n({Extends:f,initialize:function(a){f.call(this,{game:a,fragShader:p}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(l,a){l=this.getController(l),this.set1f("radius",l.radius,a),this.set1f("strength",l.strength,a),this.set2f("position",l.x,l.y,a)}});s.exports=u},80542:(s,g,e)=>{var n=e(56694),p=e(62879),f=e(80486),u=new n({Extends:f,initialize:function(a){f.call(this,{game:a,fragShader:p}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(l,a){l=this.getController(l);var o=l.progress,c=l.wipeWidth,h=l.direction,d=l.axis;this.set4f("config",o,c,h,d,a),this.setBoolean("reveal",l.reveal,a)}});s.exports=u},58136:(s,g,e)=>{var n={Barrel:e(32469),Bloom:e(2134),Blur:e(63377),Bokeh:e(49745),Circle:e(4323),ColorMatrix:e(92066),Displacement:e(89581),Glow:e(55084),Gradient:e(41653),Pixelate:e(73416),Shadow:e(58049),Shine:e(18026),Vignette:e(72381),Wipe:e(80542)};s.exports=n},62253:(s,g,e)=>{var n=e(65641),p=e(98611),f={FX:e(58136),BitmapMaskPipeline:e(5583),Events:e(18970),FXPipeline:e(81828),LightPipeline:e(66901),MobilePipeline:e(71264),MultiPipeline:e(77310),PointLightPipeline:e(10919),PostFXPipeline:e(80486),PreFXPipeline:e(87228),RopePipeline:e(21213),SinglePipeline:e(51212),UtilityPipeline:e(60848)};f=p(!1,f,n),s.exports=f},2529:s=>{s.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)},91679:s=>{s.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)},89053:s=>{s.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)},37486:s=>{s.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)},79060:s=>{s.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)},87751:s=>{s.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)},88222:s=>{s.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)},44481:s=>{s.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},35491:s=>{s.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},75568:s=>{s.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},69960:s=>{s.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)},33754:s=>{s.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)},35668:s=>{s.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)},69675:s=>{s.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)},90993:s=>{s.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)},37945:s=>{s.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)},85718:s=>{s.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)},13740:s=>{s.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)},80617:s=>{s.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)},62879:s=>{s.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)},65045:s=>{s.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)},98921:s=>{s.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)},25005:s=>{s.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)},94914:s=>{s.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)},11263:s=>{s.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},51852:s=>{s.exports=["#define SHADER_NAME PHASER_MOBILE_VS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},53787:s=>{s.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},15968:s=>{s.exports=["#define SHADER_NAME PHASER_MULTI_VS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},83327:s=>{s.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)},54677:s=>{s.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)},12569:s=>{s.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)},99365:s=>{s.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)},85060:s=>{s.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},18166:s=>{s.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},92462:(s,g,e)=>{s.exports={AddBlendFrag:e(2529),BitmapMaskFrag:e(91679),BitmapMaskVert:e(89053),ColorMatrixFrag:e(37486),CopyFrag:e(79060),FXBarrelFrag:e(87751),FXBloomFrag:e(88222),FXBlurHighFrag:e(44481),FXBlurLowFrag:e(35491),FXBlurMedFrag:e(75568),FXBokehFrag:e(69960),FXCircleFrag:e(33754),FXDisplacementFrag:e(35668),FXGlowFrag:e(69675),FXGradientFrag:e(90993),FXPixelateFrag:e(37945),FXShadowFrag:e(85718),FXShineFrag:e(13740),FXVignetteFrag:e(80617),FXWipeFrag:e(62879),LightFrag:e(65045),LinearBlendFrag:e(98921),MeshFrag:e(25005),MeshVert:e(94914),MobileFrag:e(11263),MobileVert:e(51852),MultiFrag:e(53787),MultiVert:e(15968),PointLightFrag:e(83327),PointLightVert:e(54677),PostFXFrag:e(12569),QuadVert:e(99365),SingleFrag:e(85060),SingleVert:e(18166)}},756:(s,g,e)=>{var n=e(55301),p=e(56694),f=e(6659),u=e(40444),l=e(97081),a=e(74181),o=e(2893),c=e(9229),h=e(72283),d=e(74118),v=e(90881),m=e(84314),y=e(93736),C=e(47751),T=new p({Extends:f,initialize:function(S){f.call(this),this.game=S,this.canvas,this.canvasBounds=new d,this.parent=null,this.parentIsWindow=!1,this.parentSize=new v,this.gameSize=new v,this.baseSize=new v,this.displaySize=new v,this.scaleMode=n.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new y(1,1),this.autoRound=!1,this.autoCenter=n.CENTER.NO_CENTER,this.orientation=n.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:h,windowResize:h,fullScreenChange:h,fullScreenError:h}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(l.BOOT,this.boot,this)},boot:function(){var P=this.game;this.canvas=P.canvas,this.fullscreen=P.device.fullscreen,this.scaleMode!==n.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===n.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),P.events.on(l.PRE_STEP,this.step,this),P.events.once(l.READY,this.refresh,this),P.events.once(l.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(P){this.getParent(P),this.getParentBounds();var S=P.width,M=P.height,E=P.scaleMode,A=P.zoom,R=P.autoRound;if(typeof S=="string"){var w=this.parentSize.width;w===0&&(w=window.innerWidth);var O=parseInt(S,10)/100;S=Math.floor(w*O)}if(typeof M=="string"){var F=this.parentSize.height;F===0&&(F=window.innerHeight);var b=parseInt(M,10)/100;M=Math.floor(F*b)}this.scaleMode=E,this.autoRound=R,this.autoCenter=P.autoCenter,this.resizeInterval=P.resizeInterval,R&&(S=Math.floor(S),M=Math.floor(M)),this.gameSize.setSize(S,M),A===n.ZOOM.MAX_ZOOM&&(A=this.getMaxZoom()),this.zoom=A,A!==1&&(this._resetZoom=!0),this.baseSize.setSize(S,M),R&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),P.minWidth>0&&this.displaySize.setMin(P.minWidth*A,P.minHeight*A),P.maxWidth>0&&this.displaySize.setMax(P.maxWidth*A,P.maxHeight*A),this.displaySize.setSize(S,M),this.orientation=c(S,M)},getParent:function(P){var S=P.parent;if(S!==null){if(this.parent=o(S),this.parentIsWindow=this.parent===document.body,P.expandParent&&P.scaleMode!==n.SCALE_MODE.NONE){var M=this.parent.getBoundingClientRect();(this.parentIsWindow||M.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",M=this.parent.getBoundingClientRect(),!this.parentIsWindow&&M.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}P.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=o(P.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var P=this.parentSize,S=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(S.height=a(!0));var M=S.width,E=S.height;if(P.width!==M||P.height!==E)return P.setSize(M,E),!0;if(this.canvas){var A=this.canvasBounds,R=this.canvas.getBoundingClientRect();if(R.x!==A.x||R.y!==A.y)return!0}return!1},lockOrientation:function(P){var S=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return S?S.call(screen,P):!1},setParentSize:function(P,S){return this.parentSize.setSize(P,S),this.refresh()},setGameSize:function(P,S){var M=this.autoRound;M&&(P=Math.floor(P),S=Math.floor(S));var E=this.width,A=this.height;return this.gameSize.resize(P,S),this.baseSize.resize(P,S),M&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(P/S),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(E,A)},resize:function(P,S){var M=this.zoom,E=this.autoRound;E&&(P=Math.floor(P),S=Math.floor(S));var A=this.width,R=this.height;this.gameSize.resize(P,S),this.baseSize.resize(P,S),E&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(P*M,S*M),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var w=this.canvas.style,O=P*M,F=S*M;return E&&(O=Math.floor(O),F=Math.floor(F)),(O!==P||F!==S)&&(w.width=O+"px",w.height=F+"px"),this.refresh(A,R)},setZoom:function(P){return this.zoom=P,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(P,S){P===void 0&&(P=this.width),S===void 0&&(S=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var M=this.game.domContainer;if(M){this.baseSize.setCSS(M);var E=this.canvas.style,A=M.style;A.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",A.marginLeft=E.marginLeft,A.marginTop=E.marginTop}return this.emit(u.RESIZE,this.gameSize,this.baseSize,this.displaySize,P,S),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var P=c(this.width,this.height);P!==this.orientation&&(this.orientation=P,this.emit(u.ORIENTATION_CHANGE,P))}},updateScale:function(){var P=this.canvas.style,S=this.gameSize.width,M=this.gameSize.height,E,A,R=this.zoom,w=this.autoRound;this.scaleMode===n.SCALE_MODE.NONE?(this.displaySize.setSize(S*R,M*R),E=this.displaySize.width,A=this.displaySize.height,w&&(E=Math.floor(E),A=Math.floor(A)),this._resetZoom&&(P.width=E+"px",P.height=A+"px",this._resetZoom=!1)):this.scaleMode===n.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),E=this.displaySize.width,A=this.displaySize.height,w&&(E=Math.floor(E),A=Math.floor(A)),this.canvas.width=E,this.canvas.height=A):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),E=this.displaySize.width,A=this.displaySize.height,w&&(E=Math.floor(E),A=Math.floor(A)),P.width=E+"px",P.height=A+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var P=m(this.parentSize.width,this.gameSize.width,0,!0),S=m(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(P,S),1)},updateCenter:function(){var P=this.autoCenter;if(P!==n.CENTER.NO_CENTER){var S=this.canvas,M=S.style,E=S.getBoundingClientRect(),A=E.width,R=E.height,w=Math.floor((this.parentSize.width-A)/2),O=Math.floor((this.parentSize.height-R)/2);P===n.CENTER.CENTER_HORIZONTALLY?O=0:P===n.CENTER.CENTER_VERTICALLY&&(w=0),M.marginLeft=w+"px",M.marginTop=O+"px"}},updateBounds:function(){var P=this.canvasBounds,S=this.canvas.getBoundingClientRect();P.x=S.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),P.y=S.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),P.width=S.width,P.height=S.height},transformX:function(P){return(P-this.canvasBounds.left)*this.displayScale.x},transformY:function(P){return(P-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(P){P===void 0&&(P={navigationUI:"hide"});var S=this.fullscreen;if(!S.available){this.emit(u.FULLSCREEN_UNSUPPORTED);return}if(!S.active){var M=this.getFullscreenTarget();S.keyboard?M[S.request](Element.ALLOW_KEYBOARD_INPUT):M[S.request](P)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(u.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(P){this.removeFullscreenTarget(),this.emit(u.FULLSCREEN_FAILED,P)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var P=document.createElement("div");P.style.margin="0",P.style.padding="0",P.style.width="100%",P.style.height="100%",this.fullscreenTarget=P,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var S=this.canvas.parentNode;S.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var P=this.fullscreenTarget;if(P&&P.parentNode){var S=P.parentNode;S.insertBefore(this.canvas,P),S.removeChild(P)}}},stopFullscreen:function(){var P=this.fullscreen;if(!P.available)return this.emit(u.FULLSCREEN_UNSUPPORTED),!1;P.active&&document[P.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(u.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(P){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(P)},startListeners:function(){var P=this,S=this.domlisteners;if(S.orientationChange=function(){P.updateBounds(),P._checkOrientation=!0,P.dirty=!0},S.windowResize=function(){P.updateBounds(),P.dirty=!0},window.addEventListener("orientationchange",S.orientationChange,!1),window.addEventListener("resize",S.windowResize,!1),this.fullscreen.available){S.fullScreenChange=function(E){return P.onFullScreenChange(E)},S.fullScreenError=function(E){return P.onFullScreenError(E)};var M=["webkit","moz",""];M.forEach(function(E){document.addEventListener(E+"fullscreenchange",S.fullScreenChange,!1),document.addEventListener(E+"fullscreenerror",S.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",S.fullScreenChange,!1),document.addEventListener("MSFullscreenError",S.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(P,S){P instanceof C||(S=P,P=void 0),S===void 0&&(S=new d);var M=this.baseSize,E=this.parentSize,A=this.canvasBounds,R=this.displayScale,w=A.x>=0?0:-(A.x*R.x),O=A.y>=0?0:-(A.y*R.y),F;E.width>=A.width?F=M.width:F=M.width-(A.width-E.width)*R.x;var b;return E.height>=A.height?b=M.height:b=M.height-(A.height-E.height)*R.y,S.setTo(w,O,F,b),P&&(S.width/=P.zoomX,S.height/=P.zoomY,S.centerX=P.centerX+P.scrollX,S.centerY=P.centerY+P.scrollY),S},step:function(P,S){!this.parent||(this._lastCheck+=S,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var P=this.domlisteners;window.removeEventListener("orientationchange",P.orientationChange,!1),window.removeEventListener("resize",P.windowResize,!1);var S=["webkit","moz",""];S.forEach(function(M){document.removeEventListener(M+"fullscreenchange",P.fullScreenChange,!1),document.removeEventListener(M+"fullscreenerror",P.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",P.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",P.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===n.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===n.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});s.exports=T},35098:s=>{s.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},53539:s=>{s.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},12637:s=>{s.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},10217:s=>{s.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},55301:(s,g,e)=>{var n={CENTER:e(35098),ORIENTATION:e(53539),SCALE_MODE:e(12637),ZOOM:e(10217)};s.exports=n},82085:s=>{s.exports="enterfullscreen"},11826:s=>{s.exports="fullscreenfailed"},56691:s=>{s.exports="fullscreenunsupported"},34739:s=>{s.exports="leavefullscreen"},26681:s=>{s.exports="orientationchange"},11428:s=>{s.exports="resize"},40444:(s,g,e)=>{s.exports={ENTER_FULLSCREEN:e(82085),FULLSCREEN_FAILED:e(11826),FULLSCREEN_UNSUPPORTED:e(56691),LEAVE_FULLSCREEN:e(34739),ORIENTATION_CHANGE:e(26681),RESIZE:e(11428)}},86754:(s,g,e)=>{var n=e(98611),p=e(55301),f={Center:e(35098),Events:e(40444),Orientation:e(53539),ScaleManager:e(756),ScaleModes:e(12637),Zoom:e(10217)};f=n(!1,f,p.CENTER),f=n(!1,f,p.ORIENTATION),f=n(!1,f,p.SCALE_MODE),f=n(!1,f,p.ZOOM),s.exports=f},47736:(s,g,e)=>{var n=e(72632),p=e(40587),f=function(u){var l=u.game.config.defaultPhysicsSystem,a=n(u.settings,"physics",!1);if(!(!l&&!a)){var o=[];if(l&&o.push(p(l+"Physics")),a)for(var c in a)c=p(c.concat("Physics")),o.indexOf(c)===-1&&o.push(c);return o}};s.exports=f},91088:(s,g,e)=>{var n=e(72632),p=function(f){var u=f.plugins.getDefaultScenePlugins(),l=n(f.settings,"plugins",!1);return Array.isArray(l)?l:u||[]};s.exports=p},90415:s=>{var g={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};s.exports=g},87157:(s,g,e)=>{var n=e(56694),p=e(63946),f=new n({initialize:function(l){this.sys=new p(this,l),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});s.exports=f},13553:(s,g,e)=>{var n=e(56694),p=e(92980),f=e(7599),u=e(97081),l=e(10850),a=e(683),o=e(72283),c=e(87157),h=e(63946),d=new n({initialize:function(m,y){if(this.game=m,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,y){Array.isArray(y)||(y=[y]);for(var C=0;C<y.length;C++)this._pending.push({key:"default",scene:y[C],autoStart:C===0,data:{}})}m.events.once(u.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new c);var v,m,y,C;for(v=0;v<this._pending.length;v++){m=this._pending[v],y=m.key,C=m.scene;var T;C instanceof c?T=this.createSceneFromInstance(y,C):typeof C=="object"?T=this.createSceneFromObject(y,C):typeof C=="function"&&(T=this.createSceneFromFunction(y,C)),y=T.sys.settings.key,this.keys[y]=T,this.scenes.push(T),this._data[y]&&(T.sys.settings.data=this._data[y].data,this._data[y].autoStart&&(m.autoStart=!0)),(m.autoStart||T.sys.settings.active)&&this._start.push(y)}for(this._pending.length=0,this._data={},this.isBooted=!0,v=0;v<this._start.length;v++)m=this._start[v],this.start(m);this._start.length=0}},processQueue:function(){var v=this._pending.length,m=this._queue.length;if(!(v===0&&m===0)){var y,C;if(v){for(y=0;y<v;y++)C=this._pending[y],this.add(C.key,C.scene,C.autoStart,C.data);for(y=0;y<this._start.length;y++)C=this._start[y],this.start(C);this._start.length=0,this._pending.length=0}for(y=0;y<this._queue.length;y++)C=this._queue[y],this[C.op](C.keyA,C.keyB);this._queue.length=0}},add:function(v,m,y,C){if(y===void 0&&(y=!1),C===void 0&&(C={}),this.isProcessing||!this.isBooted)return this._pending.push({key:v,scene:m,autoStart:y,data:C}),this.isBooted||(this._data[v]={data:C}),null;v=this.getKey(v,m);var T;return m instanceof c?T=this.createSceneFromInstance(v,m):typeof m=="object"?(m.key=v,T=this.createSceneFromObject(v,m)):typeof m=="function"&&(T=this.createSceneFromFunction(v,m)),T.sys.settings.data=C,v=T.sys.settings.key,this.keys[v]=T,this.scenes.push(T),(y||T.sys.settings.active)&&(this._pending.length?this._start.push(v):this.start(v)),T},remove:function(v){if(this.isProcessing)this._queue.push({op:"remove",keyA:v,keyB:null});else{var m=this.getScene(v);if(!m||m.sys.isTransitioning())return this;var y=this.scenes.indexOf(m),C=m.sys.settings.key;y>-1&&(delete this.keys[C],this.scenes.splice(y,1),this._start.indexOf(C)>-1&&(y=this._start.indexOf(C),this._start.splice(y,1)),m.sys.destroy())}return this},bootScene:function(v){var m=v.sys,y=m.settings;m.sceneUpdate=o,v.init&&(v.init.call(v,y.data),y.status=p.INIT,y.isTransition&&m.events.emit(f.TRANSITION_INIT,y.transitionFrom,y.transitionDuration));var C;m.load&&(C=m.load,C.reset()),C&&v.preload?(v.preload.call(v),y.status=p.LOADING,C.once(a.COMPLETE,this.loadComplete,this),C.start()):this.create(v)},loadComplete:function(v){this.game.sound&&this.game.sound.onBlurPausedSounds&&this.game.sound.unlock(),this.create(v.scene)},payloadComplete:function(v){this.bootScene(v.scene)},update:function(v,m){this.processQueue(),this.isProcessing=!0;for(var y=this.scenes.length-1;y>=0;y--){var C=this.scenes[y].sys;C.settings.status>p.START&&C.settings.status<=p.RUNNING&&C.step(v,m),C.scenePlugin._target&&C.scenePlugin.step(v,m)}},render:function(v){for(var m=0;m<this.scenes.length;m++){var y=this.scenes[m].sys;y.settings.visible&&y.settings.status>=p.LOADING&&y.settings.status<p.SLEEPING&&y.render(v)}this.isProcessing=!1},create:function(v){var m=v.sys,y=m.settings;v.create&&(y.status=p.CREATING,v.create.call(v,y.data),y.status===p.DESTROYED)||(y.isTransition&&m.events.emit(f.TRANSITION_START,y.transitionFrom,y.transitionDuration),v.update&&(m.sceneUpdate=v.update),y.status=p.RUNNING,m.events.emit(f.CREATE,v))},createSceneFromFunction:function(v,m){var y=new m;if(y instanceof c){var C=y.sys.settings.key;if(C!==""&&(v=C),this.keys.hasOwnProperty(v))throw new Error("Cannot add a Scene with duplicate key: "+v);return this.createSceneFromInstance(v,y)}else return y.sys=new h(y),y.sys.settings.key=v,y.sys.init(this.game),y},createSceneFromInstance:function(v,m){var y=m.sys.settings.key;return y===""&&(m.sys.settings.key=v),m.sys.init(this.game),m},createSceneFromObject:function(v,m){var y=new c(m),C=y.sys.settings.key;C!==""?v=C:y.sys.settings.key=v,y.sys.init(this.game);for(var T=["init","preload","create","update","render"],P=0;P<T.length;P++){var S=l(m,T[P],null);S&&(y[T[P]]=S)}if(m.hasOwnProperty("extend")){for(var M in m.extend)if(!!m.extend.hasOwnProperty(M)){var E=m.extend[M];M==="data"&&y.hasOwnProperty("data")&&typeof E=="object"?y.data.merge(E):M!=="sys"&&(y[M]=E)}}return y},getKey:function(v,m){if(v||(v="default"),typeof m=="function")return v;if(m instanceof c?v=m.sys.settings.key:typeof m=="object"&&m.hasOwnProperty("key")&&(v=m.key),this.keys.hasOwnProperty(v))throw new Error("Cannot add a Scene with duplicate key: "+v);return v},getScenes:function(v,m){v===void 0&&(v=!0),m===void 0&&(m=!1);for(var y=[],C=this.scenes,T=0;T<C.length;T++){var P=C[T];P&&(!v||v&&P.sys.isActive())&&y.push(P)}return m?y.reverse():y},getScene:function(v){if(typeof v=="string"){if(this.keys[v])return this.keys[v]}else for(var m=0;m<this.scenes.length;m++)if(v===this.scenes[m])return v;return null},isActive:function(v){var m=this.getScene(v);return m?m.sys.isActive():null},isPaused:function(v){var m=this.getScene(v);return m?m.sys.isPaused():null},isVisible:function(v){var m=this.getScene(v);return m?m.sys.isVisible():null},isSleeping:function(v){var m=this.getScene(v);return m?m.sys.isSleeping():null},pause:function(v,m){var y=this.getScene(v);return y&&y.sys.pause(m),this},resume:function(v,m){var y=this.getScene(v);return y&&y.sys.resume(m),this},sleep:function(v,m){var y=this.getScene(v);return y&&!y.sys.isTransitioning()&&y.sys.sleep(m),this},wake:function(v,m){var y=this.getScene(v);return y&&y.sys.wake(m),this},run:function(v,m){var y=this.getScene(v);if(!y){for(var C=0;C<this._pending.length;C++)if(this._pending[C].key===v){this.queueOp("start",v,m);break}return this}y.sys.isSleeping()?y.sys.wake(m):y.sys.isPaused()?y.sys.resume(m):this.start(v,m)},start:function(v,m){if(!this.isBooted)return this._data[v]={autoStart:!0,data:m},this;var y=this.getScene(v);if(!y)return console.warn("Scene not found for key: "+v),this;var C=y.sys,T=C.settings.status;if(T>=p.START&&T<=p.CREATING)return this;if(T>=p.RUNNING&&T<=p.SLEEPING)C.shutdown(),C.sceneUpdate=o,C.start(m);else{C.sceneUpdate=o,C.start(m);var P;if(C.load&&(P=C.load),P&&C.settings.hasOwnProperty("pack")&&(P.reset(),P.addPack({payload:C.settings.pack})))return C.settings.status=p.LOADING,P.once(a.COMPLETE,this.payloadComplete,this),P.start(),this}return this.bootScene(y),this},stop:function(v,m){var y=this.getScene(v);if(y&&!y.sys.isTransitioning()&&y.sys.settings.status!==p.SHUTDOWN){var C=y.sys.load;C&&(C.off(a.COMPLETE,this.loadComplete,this),C.off(a.COMPLETE,this.payloadComplete,this)),y.sys.shutdown(m)}return this},switch:function(v,m){var y=this.getScene(v),C=this.getScene(m);return y&&C&&y!==C&&(this.sleep(v),this.isSleeping(m)?this.wake(m):this.start(m)),this},getAt:function(v){return this.scenes[v]},getIndex:function(v){var m=this.getScene(v);return this.scenes.indexOf(m)},bringToTop:function(v){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:v,keyB:null});else{var m=this.getIndex(v);if(m!==-1&&m<this.scenes.length){var y=this.getScene(v);this.scenes.splice(m,1),this.scenes.push(y)}}return this},sendToBack:function(v){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:v,keyB:null});else{var m=this.getIndex(v);if(m!==-1&&m>0){var y=this.getScene(v);this.scenes.splice(m,1),this.scenes.unshift(y)}}return this},moveDown:function(v){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:v,keyB:null});else{var m=this.getIndex(v);if(m>0){var y=m-1,C=this.getScene(v),T=this.getAt(y);this.scenes[m]=T,this.scenes[y]=C}}return this},moveUp:function(v){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:v,keyB:null});else{var m=this.getIndex(v);if(m<this.scenes.length-1){var y=m+1,C=this.getScene(v),T=this.getAt(y);this.scenes[m]=T,this.scenes[y]=C}}return this},moveAbove:function(v,m){if(v===m)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:v,keyB:m});else{var y=this.getIndex(v),C=this.getIndex(m);if(y!==-1&&C!==-1&&C<y){var T=this.getAt(C);this.scenes.splice(C,1),this.scenes.splice(y+(C>y),0,T)}}return this},moveBelow:function(v,m){if(v===m)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:v,keyB:m});else{var y=this.getIndex(v),C=this.getIndex(m);if(y!==-1&&C!==-1&&C>y){var T=this.getAt(C);this.scenes.splice(C,1),y===0?this.scenes.unshift(T):this.scenes.splice(y-(C<y),0,T)}}return this},queueOp:function(v,m,y){return this._queue.push({op:v,keyA:m,keyB:y}),this},swapPosition:function(v,m){if(v===m)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:v,keyB:m});else{var y=this.getIndex(v),C=this.getIndex(m);if(y!==C&&y!==-1&&C!==-1){var T=this.getAt(y);this.scenes[y]=this.scenes[C],this.scenes[C]=T}}return this},dump:function(){for(var v=[],m=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],y=0;y<this.scenes.length;y++){var C=this.scenes[y].sys,T=C.settings.visible&&(C.settings.status===p.RUNNING||C.settings.status===p.PAUSED)?"[*] ":"[-] ";T+=C.settings.key+" ("+m[C.settings.status]+")",v.push(T)}console.log(v.join(`
`))},destroy:function(){for(var v=0;v<this.scenes.length;v++){var m=this.scenes[v].sys;m.destroy()}this.systemScene.sys.destroy(),this.update=o,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});s.exports=d},64051:(s,g,e)=>{var n=e(82897),p=e(56694),f=e(7599),u=e(72632),l=e(91963),a=new p({initialize:function(c){this.scene=c,this.systems=c.sys,this.settings=c.sys.settings,this.key=c.sys.settings.key,this.manager=c.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,c.sys.events.once(f.BOOT,this.boot,this),c.sys.events.on(f.START,this.pluginStart,this)},boot:function(){this.systems.events.once(f.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(f.SHUTDOWN,this.shutdown,this)},start:function(o,c){return o===void 0&&(o=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",o,c),this},restart:function(o){var c=this.key;return this.manager.queueOp("stop",c),this.manager.queueOp("start",c,o),this},transition:function(o){o===void 0&&(o={});var c=u(o,"target",!1),h=this.manager.getScene(c);if(!c||!this.checkValidTransition(h))return!1;var d=u(o,"duration",1e3);this._elapsed=0,this._target=h,this._duration=d,this._willSleep=u(o,"sleep",!1),this._willRemove=u(o,"remove",!1);var v=u(o,"onUpdate",null);v&&(this._onUpdate=v,this._onUpdateScope=u(o,"onUpdateScope",this.scene));var m=u(o,"allowInput",!1);this.settings.transitionAllowInput=m;var y=h.sys.settings;y.isTransition=!0,y.transitionFrom=this.scene,y.transitionDuration=d,y.transitionAllowInput=m,u(o,"moveAbove",!1)?this.manager.moveAbove(this.key,c):u(o,"moveBelow",!1)&&this.manager.moveBelow(this.key,c),h.sys.isSleeping()?h.sys.wake(u(o,"data")):this.manager.start(c,u(o,"data"));var C=u(o,"onStart",null),T=u(o,"onStartScope",this.scene);return C&&C.call(T,this.scene,h,d),this.systems.events.emit(f.TRANSITION_OUT,h,d),!0},checkValidTransition:function(o){return!(!o||o.sys.isActive()||o.sys.isTransitioning()||o===this.scene||this.systems.isTransitioning())},step:function(o,c){this._elapsed+=c,this.transitionProgress=n(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var o=this._target.sys,c=this._target.sys.settings;o.events.emit(f.TRANSITION_COMPLETE,this.scene),c.isTransition=!1,c.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(o,c,h,d){return this.manager.add(o,c,h,d)},launch:function(o,c){return o&&o!==this.key&&this.manager.queueOp("start",o,c),this},run:function(o,c){return o&&o!==this.key&&this.manager.queueOp("run",o,c),this},pause:function(o,c){return o===void 0&&(o=this.key),this.manager.queueOp("pause",o,c),this},resume:function(o,c){return o===void 0&&(o=this.key),this.manager.queueOp("resume",o,c),this},sleep:function(o,c){return o===void 0&&(o=this.key),this.manager.queueOp("sleep",o,c),this},wake:function(o,c){return o===void 0&&(o=this.key),this.manager.queueOp("wake",o,c),this},switch:function(o){return o!==this.key&&this.manager.queueOp("switch",this.key,o),this},stop:function(o,c){return o===void 0&&(o=this.key),this.manager.queueOp("stop",o,c),this},setActive:function(o,c,h){c===void 0&&(c=this.key);var d=this.manager.getScene(c);return d&&d.sys.setActive(o,h),this},setVisible:function(o,c){c===void 0&&(c=this.key);var h=this.manager.getScene(c);return h&&h.sys.setVisible(o),this},isSleeping:function(o){return o===void 0&&(o=this.key),this.manager.isSleeping(o)},isActive:function(o){return o===void 0&&(o=this.key),this.manager.isActive(o)},isPaused:function(o){return o===void 0&&(o=this.key),this.manager.isPaused(o)},isVisible:function(o){return o===void 0&&(o=this.key),this.manager.isVisible(o)},swapPosition:function(o,c){return c===void 0&&(c=this.key),o!==c&&this.manager.swapPosition(o,c),this},moveAbove:function(o,c){return c===void 0&&(c=this.key),o!==c&&this.manager.moveAbove(o,c),this},moveBelow:function(o,c){return c===void 0&&(c=this.key),o!==c&&this.manager.moveBelow(o,c),this},remove:function(o){return o===void 0&&(o=this.key),this.manager.remove(o),this},moveUp:function(o){return o===void 0&&(o=this.key),this.manager.moveUp(o),this},moveDown:function(o){return o===void 0&&(o=this.key),this.manager.moveDown(o),this},bringToTop:function(o){return o===void 0&&(o=this.key),this.manager.bringToTop(o),this},sendToBack:function(o){return o===void 0&&(o=this.key),this.manager.sendToBack(o),this},get:function(o){return this.manager.getScene(o)},getStatus:function(o){var c=this.manager.getScene(o);if(c)return c.sys.getStatus()},getIndex:function(o){return o===void 0&&(o=this.key),this.manager.getIndex(o)},shutdown:function(){var o=this.systems.events;o.off(f.SHUTDOWN,this.shutdown,this),o.off(f.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(f.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});l.register("ScenePlugin",a,"scenePlugin"),s.exports=a},36765:(s,g,e)=>{var n=e(92980),p=e(10850),f=e(30657),u=e(90415),l={create:function(a){return typeof a=="string"?a={key:a}:a===void 0&&(a={}),{status:n.PENDING,key:p(a,"key",""),active:p(a,"active",!1),visible:p(a,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:p(a,"pack",!1),cameras:p(a,"cameras",null),map:p(a,"map",f(u,p(a,"mapAdd",{}))),physics:p(a,"physics",{}),loader:p(a,"loader",{}),plugins:p(a,"plugins",!1),input:p(a,"input",{})}}};s.exports=l},63946:(s,g,e)=>{var n=e(56694),p=e(92980),f=e(18360),u=e(7599),l=e(47736),a=e(91088),o=e(72283),c=e(36765),h=new n({initialize:function(v,m){this.scene=v,this.game,this.renderer,this.config=m,this.settings=c.create(m),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=o},init:function(d){this.settings.status=p.INIT,this.sceneUpdate=o,this.game=d,this.renderer=d.renderer,this.canvas=d.canvas,this.context=d.context;var v=d.plugins;this.plugins=v,v.addToScene(this,f.Global,[f.CoreScene,a(this),l(this)]),this.events.emit(u.BOOT,this),this.settings.isBooted=!0},step:function(d,v){var m=this.events;m.emit(u.PRE_UPDATE,d,v),m.emit(u.UPDATE,d,v),this.sceneUpdate.call(this.scene,d,v),m.emit(u.POST_UPDATE,d,v)},render:function(d){var v=this.displayList;v.depthSort(),this.events.emit(u.PRE_RENDER,d),this.cameras.render(d,v),this.events.emit(u.RENDER,d)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(d){var v=this.settings,m=this.getStatus();return m!==p.CREATING&&m!==p.RUNNING?console.warn("Cannot pause non-running Scene",v.key):this.settings.active&&(v.status=p.PAUSED,v.active=!1,this.events.emit(u.PAUSE,this,d)),this},resume:function(d){var v=this.events,m=this.settings;return this.settings.active||(m.status=p.RUNNING,m.active=!0,v.emit(u.RESUME,this,d)),this},sleep:function(d){var v=this.settings,m=this.getStatus();return m!==p.CREATING&&m!==p.RUNNING?console.warn("Cannot sleep non-running Scene",v.key):(v.status=p.SLEEPING,v.active=!1,v.visible=!1,this.events.emit(u.SLEEP,this,d)),this},wake:function(d){var v=this.events,m=this.settings;return m.status=p.RUNNING,m.active=!0,m.visible=!0,v.emit(u.WAKE,this,d),m.isTransition&&v.emit(u.TRANSITION_WAKE,m.transitionFrom,m.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var d=this.settings.status;return d>p.PENDING&&d<=p.RUNNING},isSleeping:function(){return this.settings.status===p.SLEEPING},isActive:function(){return this.settings.status===p.RUNNING},isPaused:function(){return this.settings.status===p.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(d){return this.settings.visible=d,this},setActive:function(d,v){return d?this.resume(v):this.pause(v)},start:function(d){var v=this.events,m=this.settings;d&&(m.data=d),m.status=p.START,m.active=!0,m.visible=!0,v.emit(u.START,this),v.emit(u.READY,this,d)},shutdown:function(d){var v=this.events,m=this.settings;v.off(u.TRANSITION_INIT),v.off(u.TRANSITION_START),v.off(u.TRANSITION_COMPLETE),v.off(u.TRANSITION_OUT),m.status=p.SHUTDOWN,m.active=!1,m.visible=!1,v.emit(u.SHUTDOWN,this,d)},destroy:function(){var d=this.events,v=this.settings;v.status=p.DESTROYED,v.active=!1,v.visible=!1,d.emit(u.DESTROY,this),d.removeAllListeners();for(var m=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],y=0;y<m.length;y++)this[m[y]]=null}});s.exports=h},92980:s=>{var g={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};s.exports=g},31803:s=>{s.exports="addedtoscene"},94817:s=>{s.exports="boot"},28977:s=>{s.exports="create"},91959:s=>{s.exports="destroy"},363:s=>{s.exports="pause"},15643:s=>{s.exports="postupdate"},17058:s=>{s.exports="prerender"},77125:s=>{s.exports="preupdate"},76018:s=>{s.exports="ready"},28620:s=>{s.exports="removedfromscene"},41538:s=>{s.exports="render"},34268:s=>{s.exports="resume"},2342:s=>{s.exports="shutdown"},96541:s=>{s.exports="sleep"},74244:s=>{s.exports="start"},17046:s=>{s.exports="transitioncomplete"},13637:s=>{s.exports="transitioninit"},14733:s=>{s.exports="transitionout"},33899:s=>{s.exports="transitionstart"},52418:s=>{s.exports="transitionwake"},31735:s=>{s.exports="update"},8470:s=>{s.exports="wake"},7599:(s,g,e)=>{s.exports={ADDED_TO_SCENE:e(31803),BOOT:e(94817),CREATE:e(28977),DESTROY:e(91959),PAUSE:e(363),POST_UPDATE:e(15643),PRE_RENDER:e(17058),PRE_UPDATE:e(77125),READY:e(76018),REMOVED_FROM_SCENE:e(28620),RENDER:e(41538),RESUME:e(34268),SHUTDOWN:e(2342),SLEEP:e(96541),START:e(74244),TRANSITION_COMPLETE:e(17046),TRANSITION_INIT:e(13637),TRANSITION_OUT:e(14733),TRANSITION_START:e(33899),TRANSITION_WAKE:e(52418),UPDATE:e(31735),WAKE:e(8470)}},20436:(s,g,e)=>{var n=e(92980),p=e(98611),f={Events:e(7599),GetPhysicsPlugins:e(47736),GetScenePlugins:e(91088),SceneManager:e(13553),ScenePlugin:e(64051),Settings:e(36765),Systems:e(63946)};f=p(!1,f,n),s.exports=f},25798:(s,g,e)=>{var n=e(56694),p=e(6659),f=e(76038),u=e(98611),l=e(72283),a=new n({Extends:p,initialize:function(c,h,d){p.call(this),this.manager=c,this.key=h,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=u(this.config,d),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(o){return!o||!o.name||typeof o.name!="string"?!1:this.markers[o.name]?(console.error("addMarker "+o.name+" already exists in Sound"),!1):(o=u(!0,{name:"",start:0,duration:this.totalDuration-(o.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},o),this.markers[o.name]=o,!0)},updateMarker:function(o){return!o||!o.name||typeof o.name!="string"?!1:this.markers[o.name]?(this.markers[o.name]=u(!0,this.markers[o.name],o),!0):(console.warn("Audio Marker: "+o.name+" missing in Sound: "+this.key),!1)},removeMarker:function(o){var c=this.markers[o];return c?(this.markers[o]=null,c):null},play:function(o,c){if(o===void 0&&(o=""),typeof o=="object"&&(c=o,o=""),typeof o!="string")return!1;if(!o)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[o])return console.warn("Marker: "+o+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[o],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=u(this.currentConfig,c),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:l,calculateRate:function(){var o=1.0005777895065548,c=this.currentConfig.detune+this.manager.detune,h=Math.pow(o,c);this.totalRate=this.currentConfig.rate*this.manager.rate*h},destroy:function(){this.pendingRemove||(this.emit(f.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});s.exports=a},12486:(s,g,e)=>{var n=e(56694),p=e(32742),f=e(6659),u=e(76038),l=e(97081),a=e(71608),o=e(51463),c=e(72283),h=e(93736),d=new n({Extends:f,initialize:function(m){f.call(this),this.game=m,this.jsonCache=m.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new h,m.events.on(l.BLUR,this.onGameBlur,this),m.events.on(l.FOCUS,this.onGameFocus,this),m.events.on(l.PRE_STEP,this.update,this),m.events.once(l.DESTROY,this.destroy,this)},add:c,addAudioSprite:function(v,m){m===void 0&&(m={});var y=this.add(v,m);y.spritemap=this.jsonCache.get(v).spritemap;for(var C in y.spritemap)if(!!y.spritemap.hasOwnProperty(C)){var T=p(m),P=y.spritemap[C];T.loop=P.hasOwnProperty("loop")?P.loop:!1,y.addMarker({name:C,start:P.start,duration:P.end-P.start,config:T})}return y},get:function(v){return o(this.sounds,"key",v)},getAll:function(v){return v?a(this.sounds,"key",v):a(this.sounds)},getAllPlaying:function(){return a(this.sounds,"isPlaying",!0)},play:function(v,m){var y=this.add(v);return y.once(u.COMPLETE,y.destroy,y),m?m.name?(y.addMarker(m),y.play(m.name)):y.play(m):y.play()},playAudioSprite:function(v,m,y){var C=this.addAudioSprite(v);return C.once(u.COMPLETE,C.destroy,C),C.play(m,y)},remove:function(v){var m=this.sounds.indexOf(v);return m!==-1?(v.destroy(),this.sounds.splice(m,1),!0):!1},removeAll:function(){this.sounds.forEach(function(v){v.destroy()}),this.sounds.length=0},removeByKey:function(v){for(var m=0,y=this.sounds.length-1;y>=0;y--){var C=this.sounds[y];C.key===v&&(C.destroy(),this.sounds.splice(y,1),m++)}return m},pauseAll:function(){this.forEachActiveSound(function(v){v.pause()}),this.emit(u.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(v){v.resume()}),this.emit(u.RESUME_ALL,this)},setListenerPosition:c,stopAll:function(){this.forEachActiveSound(function(v){v.stop()}),this.emit(u.STOP_ALL,this)},stopByKey:function(v){var m=0;return this.getAll(v).forEach(function(y){y.stop()&&m++}),m},unlock:c,onBlur:c,onFocus:c,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(v,m){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(u.UNLOCKED,this));for(var y=this.sounds.length-1;y>=0;y--)this.sounds[y].pendingRemove&&this.sounds.splice(y,1);this.sounds.forEach(function(C){C.update(v,m)})},destroy:function(){this.game.events.off(l.BLUR,this.onGameBlur,this),this.game.events.off(l.FOCUS,this.onGameFocus,this),this.game.events.off(l.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(v,m){var y=this;this.sounds.forEach(function(C,T){C&&!C.pendingRemove&&v.call(m||y,C,T,y.sounds)})},setRate:function(v){return this.rate=v,this},rate:{get:function(){return this._rate},set:function(v){this._rate=v,this.forEachActiveSound(function(m){m.calculateRate()}),this.emit(u.GLOBAL_RATE,this,v)}},setDetune:function(v){return this.detune=v,this},detune:{get:function(){return this._detune},set:function(v){this._detune=v,this.forEachActiveSound(function(m){m.calculateRate()}),this.emit(u.GLOBAL_DETUNE,this,v)}}});s.exports=d},84191:(s,g,e)=>{var n=e(27622),p=e(17546),f=e(55491),u={create:function(l){var a=l.config.audio,o=l.device.audio;return a.noAudio||!o.webAudio&&!o.audioData?new p(l):o.webAudio&&!a.disableWebAudio?new f(l):new n(l)}};s.exports=u},77578:s=>{s.exports="complete"},19679:s=>{s.exports="decodedall"},56951:s=>{s.exports="decoded"},16436:s=>{s.exports="destroy"},55154:s=>{s.exports="detune"},57818:s=>{s.exports="detune"},57890:s=>{s.exports="mute"},83022:s=>{s.exports="rate"},99170:s=>{s.exports="volume"},64289:s=>{s.exports="looped"},67214:s=>{s.exports="loop"},53128:s=>{s.exports="mute"},73078:s=>{s.exports="pan"},76763:s=>{s.exports="pauseall"},88426:s=>{s.exports="pause"},13765:s=>{s.exports="play"},80291:s=>{s.exports="rate"},11124:s=>{s.exports="resumeall"},55382:s=>{s.exports="resume"},71157:s=>{s.exports="seek"},31776:s=>{s.exports="stopall"},39450:s=>{s.exports="stop"},21939:s=>{s.exports="unlocked"},33019:s=>{s.exports="volume"},76038:(s,g,e)=>{s.exports={COMPLETE:e(77578),DECODED:e(56951),DECODED_ALL:e(19679),DESTROY:e(16436),DETUNE:e(55154),GLOBAL_DETUNE:e(57818),GLOBAL_MUTE:e(57890),GLOBAL_RATE:e(83022),GLOBAL_VOLUME:e(99170),LOOP:e(67214),LOOPED:e(64289),MUTE:e(53128),PAN:e(73078),PAUSE_ALL:e(76763),PAUSE:e(88426),PLAY:e(13765),RATE:e(80291),RESUME_ALL:e(11124),RESUME:e(55382),SEEK:e(71157),STOP_ALL:e(31776),STOP:e(39450),UNLOCKED:e(21939),VOLUME:e(33019)}},34350:(s,g,e)=>{var n=e(25798),p=e(56694),f=e(76038),u=e(82897),l=new p({Extends:n,initialize:function(o,c,h){if(h===void 0&&(h={}),this.tags=o.game.cache.audio.get(c),!this.tags)throw new Error('No cached audio asset with key "'+c);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,n.call(this,o,c,h)},play:function(a,o){return this.manager.isLocked(this,"play",[a,o])||!n.prototype.play.call(this,a,o)||!this.pickAndPlayAudioTag()?!1:(this.emit(f.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!n.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(f.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!n.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(f.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!n.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(f.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var a=this.currentConfig.seek,o=this.currentConfig.delay,c=(this.currentMarker?this.currentMarker.start:0)+a;return this.previousTime=c,this.audio.currentTime=c,this.applyConfig(),o===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+o*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var a=0;a<this.tags.length;a++){var o=this.tags[a];if(o.dataset.used==="false")return o.dataset.used="true",this.audio=o,!0}if(!this.manager.override)return!1;var c=[];this.manager.forEachActiveSound(function(d){d.key===this.key&&d.audio&&c.push(d)},this),c.sort(function(d,v){return d.loop===v.loop?v.seek/v.duration-d.seek/d.duration:d.loop?1:-1});var h=c[0];return this.audio=h.audio,h.reset(),h.audio=null,h.startTime=0,h.previousTime=0,!0},playCatchPromise:function(){var a=this.audio.play();a&&a.catch(function(o){console.warn(o)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){n.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(a){if(!!this.isPlaying){if(this.startTime>0){this.startTime<a-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,a-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var o=this.currentMarker?this.currentMarker.start:0,c=o+this.duration,h=this.audio.currentTime;if(this.currentConfig.loop)h>=c-this.manager.loopEndOffset?(this.audio.currentTime=o+Math.max(0,h-c),h=this.audio.currentTime):h<o&&(this.audio.currentTime+=o,h=this.audio.currentTime),h<this.previousTime&&this.emit(f.LOOPED,this);else if(h>=c){this.reset(),this.stopAndReleaseAudioTag(),this.emit(f.COMPLETE,this);return}this.previousTime=h}},destroy:function(){n.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=u(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){n.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(a){this.currentConfig.mute=a,!this.manager.isLocked(this,"mute",a)&&(this.updateMute(),this.emit(f.MUTE,this,a))}},setMute:function(a){return this.mute=a,this},volume:{get:function(){return this.currentConfig.volume},set:function(a){this.currentConfig.volume=a,!this.manager.isLocked(this,"volume",a)&&(this.updateVolume(),this.emit(f.VOLUME,this,a))}},setVolume:function(a){return this.volume=a,this},rate:{get:function(){return this.currentConfig.rate},set:function(a){this.currentConfig.rate=a,!this.manager.isLocked(this,f.RATE,a)&&(this.calculateRate(),this.emit(f.RATE,this,a))}},setRate:function(a){return this.rate=a,this},detune:{get:function(){return this.currentConfig.detune},set:function(a){this.currentConfig.detune=a,!this.manager.isLocked(this,f.DETUNE,a)&&(this.calculateRate(),this.emit(f.DETUNE,this,a))}},setDetune:function(a){return this.detune=a,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(a){this.manager.isLocked(this,"seek",a)||this.startTime>0||(this.isPlaying||this.isPaused)&&(a=Math.min(Math.max(0,a),this.duration),this.isPlaying?(this.previousTime=a,this.audio.currentTime=a):this.isPaused&&(this.currentConfig.seek=a),this.emit(f.SEEK,this,a))}},setSeek:function(a){return this.seek=a,this},loop:{get:function(){return this.currentConfig.loop},set:function(a){this.currentConfig.loop=a,!this.manager.isLocked(this,"loop",a)&&(this.audio&&(this.audio.loop=a),this.emit(f.LOOP,this,a))}},setLoop:function(a){return this.loop=a,this},pan:{get:function(){return this.currentConfig.pan},set:function(a){this.currentConfig.pan=a,this.emit(f.PAN,this,a)}},setPan:function(a){return this.pan=a,this}});s.exports=l},27622:(s,g,e)=>{var n=e(12486),p=e(56694),f=e(76038),u=e(34350),l=new p({Extends:n,initialize:function(o){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,n.call(this,o)},add:function(a,o){var c=new u(this,a,o);return this.sounds.push(c),c},unlock:function(){this.locked=!1;var a=this;if(this.game.cache.audio.entries.each(function(d,v){for(var m=0;m<v.length;m++)if(v[m].dataset.locked==="true")return a.locked=!0,!1;return!0}),!!this.locked){var o=!1,c=function(){o=!0},h=function(){if(o){o=!1;return}document.body.removeEventListener("touchmove",c),document.body.removeEventListener("touchend",h);var d=[];if(a.game.cache.audio.entries.each(function(m,y){for(var C=0;C<y.length;C++){var T=y[C];T.dataset.locked==="true"&&d.push(T)}return!0}),d.length!==0){var v=d[d.length-1];v.oncanplaythrough=function(){v.oncanplaythrough=null,d.forEach(function(m){m.dataset.locked="false"}),a.unlocked=!0},d.forEach(function(m){m.load()})}};this.once(f.UNLOCKED,function(){for(this.forEachActiveSound(function(v){v.currentMarker===null&&v.duration===0&&(v.duration=v.tags[0].duration),v.totalDuration=v.tags[0].duration});this.lockedActionsQueue.length;){var d=this.lockedActionsQueue.shift();d.sound[d.prop].apply?d.sound[d.prop].apply(d.sound,d.value||[]):d.sound[d.prop]=d.value}},this),document.body.addEventListener("touchmove",c,!1),document.body.addEventListener("touchend",h,!1)}},onBlur:function(){this.forEachActiveSound(function(a){a.isPlaying&&(this.onBlurPausedSounds.push(a),a.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(a){a.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){n.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(a,o,c){return a.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:a,prop:o,value:c}),!0):!1},setMute:function(a){return this.mute=a,this},mute:{get:function(){return this._mute},set:function(a){this._mute=a,this.forEachActiveSound(function(o){o.updateMute()}),this.emit(f.GLOBAL_MUTE,this,a)}},setVolume:function(a){return this.volume=a,this},volume:{get:function(){return this._volume},set:function(a){this._volume=a,this.forEachActiveSound(function(o){o.updateVolume()}),this.emit(f.GLOBAL_VOLUME,this,a)}}});s.exports=l},56751:(s,g,e)=>{s.exports={SoundManagerCreator:e(84191),Events:e(76038),BaseSound:e(25798),BaseSoundManager:e(12486),WebAudioSound:e(96008),WebAudioSoundManager:e(55491),HTML5AudioSound:e(34350),HTML5AudioSoundManager:e(27622),NoAudioSound:e(38662),NoAudioSoundManager:e(17546)}},38662:(s,g,e)=>{var n=e(25798),p=e(56694),f=e(6659),u=e(98611),l=e(72283),a=function(){return!1},o=function(){return null},c=function(){return this},h=new p({Extends:f,initialize:function(v,m,y){y===void 0&&(y={}),f.call(this),this.manager=v,this.key=m,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=u({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},y),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:a,updateMarker:a,removeMarker:o,play:a,pause:a,resume:a,stop:a,setMute:c,setVolume:c,setRate:c,setDetune:c,setSeek:c,setLoop:c,setPan:c,applyConfig:o,resetConfig:o,update:l,calculateRate:o,destroy:function(){n.prototype.destroy.call(this)}});s.exports=h},17546:(s,g,e)=>{var n=e(12486),p=e(56694),f=e(6659),u=e(38662),l=e(72283),a=new p({Extends:f,initialize:function(c){f.call(this),this.game=c,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(o,c){var h=new u(this,o,c);return this.sounds.push(h),h},addAudioSprite:function(o,c){var h=this.add(o,c);return h.spritemap={},h},get:function(o){return n.prototype.get.call(this,o)},getAll:function(o){return n.prototype.getAll.call(this,o)},play:function(o,c){return!1},playAudioSprite:function(o,c,h){return!1},remove:function(o){return n.prototype.remove.call(this,o)},removeAll:function(){return n.prototype.removeAll.call(this)},removeByKey:function(o){return n.prototype.removeByKey.call(this,o)},stopByKey:function(o){return n.prototype.stopByKey.call(this,o)},onBlur:l,onFocus:l,onGameBlur:l,onGameFocus:l,pauseAll:l,resumeAll:l,stopAll:l,update:l,setRate:l,setDetune:l,setMute:l,setVolume:l,unlock:l,forEachActiveSound:function(o,c){n.prototype.forEachActiveSound.call(this,o,c)},destroy:function(){n.prototype.destroy.call(this)}});s.exports=a},96008:(s,g,e)=>{var n=e(25798),p=e(56694),f=e(76038),u=e(72632),l=new p({Extends:n,initialize:function(o,c,h){if(h===void 0&&(h={}),this.audioBuffer=o.game.cache.audio.get(c),!this.audioBuffer)throw new Error('Audio key "'+c+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=o.context.createGain(),this.volumeNode=o.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),o.context.createPanner&&(this.spatialNode=o.context.createPanner(),this.volumeNode.connect(this.spatialNode)),o.context.createStereoPanner?(this.pannerNode=o.context.createStereoPanner(),o.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(o.destination)):o.context.createPanner?this.spatialNode.connect(o.destination):this.volumeNode.connect(o.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,n.call(this,o,c,h)},play:function(a,o){return n.prototype.play.call(this,a,o)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(f.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!n.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(f.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!n.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(f.RESUME,this),!0)},stop:function(){return n.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(f.STOP,this),!0):!1},createAndStartBufferSource:function(){var a=this.currentConfig.seek,o=this.currentConfig.delay,c=this.manager.context.currentTime+o,h=(this.currentMarker?this.currentMarker.start:0)+a,d=this.duration-a;this.playTime=c-a,this.startTime=c,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,c),Math.max(0,h),Math.max(0,d)),this.resetConfig()},createAndStartLoopBufferSource:function(){var a=this.getLoopTime(),o=this.currentMarker?this.currentMarker.start:0,c=this.duration;this.loopTime=a,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,a),Math.max(0,o),Math.max(0,c))},createBufferSource:function(){var a=this,o=this.manager.context.createBufferSource();return o.buffer=this.audioBuffer,o.connect(this.muteNode),o.onended=function(c){c.target===a.source&&(a.currentConfig.loop?a.hasLooped=!0:a.hasEnded=!0)},o},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var a=this.currentConfig.source;if(a&&this.manager.context.createPanner){var o=this.spatialNode;o.panningModel=u(a,"panningModel","equalpower"),o.distanceModel=u(a,"distanceModel","inverse"),o.orientationX.value=u(a,"orientationX",0),o.orientationY.value=u(a,"orientationY",0),o.orientationZ.value=u(a,"orientationZ",-1),o.refDistance=u(a,"refDistance",1),o.maxDistance=u(a,"maxDistance",1e4),o.rolloffFactor=u(a,"rolloffFactor",1),o.coneInnerAngle=u(a,"coneInnerAngle",360),o.coneOuterAngle=u(a,"coneOuterAngle",0),o.coneOuterGain=u(a,"coneOuterGain",0),this.spatialSource=u(a,"follow",null),this.spatialSource||(o.positionX.value=u(a,"x",0),o.positionY.value=u(a,"y",0),o.positionZ.value=u(a,"z",0))}n.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(a){this.spatialNode&&(this.spatialNode.positionX.value=a)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(a){this.spatialNode&&(this.spatialNode.positionY.value=a)}},update:function(){if(this.isPlaying&&this.spatialSource){var a=u(this.spatialSource,"x",null),o=u(this.spatialSource,"y",null);a&&a!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=a),o&&o!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=o)}this.hasEnded?(this.hasEnded=!1,n.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(f.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(f.LOOPED,this))},destroy:function(){this.pendingRemove||(n.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){n.prototype.calculateRate.call(this);var a=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,a),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,a)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var a=0,o=0;o<this.rateUpdates.length;o++){var c=0;o<this.rateUpdates.length-1?c=this.rateUpdates[o+1].time:c=this.manager.context.currentTime-this.playTime,a+=(c-this.rateUpdates[o].time)*this.rateUpdates[o].rate}return a},getLoopTime:function(){for(var a=0,o=0;o<this.rateUpdates.length-1;o++)a+=(this.rateUpdates[o+1].time-this.rateUpdates[o].time)*this.rateUpdates[o].rate;var c=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+c.time+(this.duration-a)/c.rate},rate:{get:function(){return this.currentConfig.rate},set:function(a){this.currentConfig.rate=a,this.calculateRate(),this.emit(f.RATE,this,a)}},setRate:function(a){return this.rate=a,this},detune:{get:function(){return this.currentConfig.detune},set:function(a){this.currentConfig.detune=a,this.calculateRate(),this.emit(f.DETUNE,this,a)}},setDetune:function(a){return this.detune=a,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(a){this.currentConfig.mute=a,this.muteNode.gain.setValueAtTime(a?0:1,0),this.emit(f.MUTE,this,a)}},setMute:function(a){return this.mute=a,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(a){this.currentConfig.volume=a,this.volumeNode.gain.setValueAtTime(a,0),this.emit(f.VOLUME,this,a)}},setVolume:function(a){return this.volume=a,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(a){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(a=Math.min(Math.max(0,a),this.duration),this.currentConfig.seek=a,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(f.SEEK,this,a))}},setSeek:function(a){return this.seek=a,this},loop:{get:function(){return this.currentConfig.loop},set:function(a){this.currentConfig.loop=a,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),a&&this.createAndStartLoopBufferSource()),this.emit(f.LOOP,this,a)}},setLoop:function(a){return this.loop=a,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(a){this.currentConfig.pan=a,this.pannerNode&&this.pannerNode.pan.setValueAtTime(a,this.manager.context.currentTime),this.emit(f.PAN,this,a)}},setPan:function(a){return this.pan=a,this}});s.exports=l},55491:(s,g,e)=>{var n=e(82329),p=e(12486),f=e(56694),u=e(76038),l=e(97081),a=e(96008),o=e(72632),c=new f({Extends:p,initialize:function(d){this.context=this.createAudioContext(d),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),p.call(this,d),this.locked&&d.isBooted?this.unlock():d.events.once(l.BOOT,this.unlock,this)},createAudioContext:function(h){var d=h.config.audio;if(d.context)return d.context.resume(),d.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(h){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=h,this.masterMuteNode=h.createGain(),this.masterVolumeNode=h.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(h.destination),this.destination=this.masterMuteNode,this},add:function(h,d){var v=new a(this,h,d);return this.sounds.push(v),v},decodeAudio:function(h,d){var v;Array.isArray(h)?v=h:v=[{key:h,data:d}];for(var m=this.game.cache.audio,y=v.length,C=0;C<v.length;C++){var T=v[C],P=T.key,S=T.data;typeof S=="string"&&(S=n(S));var M=function(A,R){m.add(A,R),this.emit(u.DECODED,A),y--,y===0&&this.emit(u.DECODED_ALL)}.bind(this,P),E=function(A,R){console.error("Error decoding audio: "+A+" - ",R?R.message:""),y--,y===0&&this.emit(u.DECODED_ALL)}.bind(this,P);this.context.decodeAudioData(S,M,E)}},setListenerPosition:function(h,d){return h===void 0&&(h=this.game.scale.width/2),d===void 0&&(d=this.game.scale.height/2),this.listenerPosition.set(h,d),this},unlock:function(){var h=this,d=document.body,v=function m(){if(h.context&&d){var y=d.removeEventListener;h.context.resume().then(function(){y("touchstart",m),y("touchend",m),y("click",m),y("keydown",m),h.unlocked=!0},function(){y("touchstart",m),y("touchend",m),y("click",m),y("keydown",m)})}};d&&(d.addEventListener("touchstart",v,!1),d.addEventListener("touchend",v,!1),d.addEventListener("click",v,!1),d.addEventListener("keydown",v,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var h=this.context;h&&!this.locked&&(h.state==="suspended"||h.state==="interrupted")&&h.resume()},update:function(h,d){var v=this.context.listener;if(v&&v.positionX!==void 0){var m=o(this.listenerPosition,"x",null),y=o(this.listenerPosition,"y",null);m&&m!==this._spatialx&&(this._spatialx=v.positionX.value=m),y&&y!==this._spatialy&&(this._spatialy=v.positionY.value=y)}p.prototype.update.call(this,h,d),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var h=this;this.context.close().then(function(){h.context=null})}p.prototype.destroy.call(this)},setMute:function(h){return this.mute=h,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(h){this.masterMuteNode.gain.setValueAtTime(h?0:1,0),this.emit(u.GLOBAL_MUTE,this,h)}},setVolume:function(h){return this.volume=h,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(h){this.masterVolumeNode.gain.setValueAtTime(h,0),this.emit(u.GLOBAL_VOLUME,this,h)}}});s.exports=c},71207:(s,g,e)=>{var n=e(59959),p=e(56694),f=e(72283),u=e(17922),l=new p({initialize:function(o){this.parent=o,this.list=[],this.position=0,this.addCallback=f,this.removeCallback=f,this._sortKey=""},add:function(a,o){return o?n.Add(this.list,a):n.Add(this.list,a,0,this.addCallback,this)},addAt:function(a,o,c){return c?n.AddAt(this.list,a,o):n.AddAt(this.list,a,o,0,this.addCallback,this)},getAt:function(a){return this.list[a]},getIndex:function(a){return this.list.indexOf(a)},sort:function(a,o){return a?(o===void 0&&(o=function(c,h){return c[a]-h[a]}),u(this.list,o),this):this},getByName:function(a){return n.GetFirst(this.list,"name",a)},getRandom:function(a,o){return n.GetRandom(this.list,a,o)},getFirst:function(a,o,c,h){return n.GetFirst(this.list,a,o,c,h)},getAll:function(a,o,c,h){return n.GetAll(this.list,a,o,c,h)},count:function(a,o){return n.CountAllMatching(this.list,a,o)},swap:function(a,o){n.Swap(this.list,a,o)},moveTo:function(a,o){return n.MoveTo(this.list,a,o)},moveAbove:function(a,o){return n.MoveAbove(this.list,a,o)},moveBelow:function(a,o){return n.MoveBelow(this.list,a,o)},remove:function(a,o){return o?n.Remove(this.list,a):n.Remove(this.list,a,this.removeCallback,this)},removeAt:function(a,o){return o?n.RemoveAt(this.list,a):n.RemoveAt(this.list,a,this.removeCallback,this)},removeBetween:function(a,o,c){return c?n.RemoveBetween(this.list,a,o):n.RemoveBetween(this.list,a,o,this.removeCallback,this)},removeAll:function(a){for(var o=this.list.length;o--;)this.remove(this.list[o],a);return this},bringToTop:function(a){return n.BringToTop(this.list,a)},sendToBack:function(a){return n.SendToBack(this.list,a)},moveUp:function(a){return n.MoveUp(this.list,a),a},moveDown:function(a){return n.MoveDown(this.list,a),a},reverse:function(){return this.list.reverse(),this},shuffle:function(){return n.Shuffle(this.list),this},replace:function(a,o){return n.Replace(this.list,a,o)},exists:function(a){return this.list.indexOf(a)>-1},setAll:function(a,o,c,h){return n.SetAll(this.list,a,o,c,h),this},each:function(a,o){for(var c=[null],h=2;h<arguments.length;h++)c.push(arguments[h]);for(h=0;h<this.list.length;h++)c[0]=this.list[h],a.apply(o,c)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});s.exports=l},33885:(s,g,e)=>{var n=e(56694),p=new n({initialize:function(u){if(this.entries={},this.size=0,Array.isArray(u))for(var l=0;l<u.length;l++)this.set(u[l][0],u[l][1])},set:function(f,u){return this.has(f)||this.size++,this.entries[f]=u,this},get:function(f){if(this.has(f))return this.entries[f]},getArray:function(){var f=[],u=this.entries;for(var l in u)f.push(u[l]);return f},has:function(f){return this.entries.hasOwnProperty(f)},delete:function(f){return this.has(f)&&(delete this.entries[f],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(f){delete this.entries[f]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var f=[],u=this.entries;for(var l in u)f.push(u[l]);return f},dump:function(){var f=this.entries;console.group("Map");for(var u in f)console.log(u,f[u]);console.groupEnd()},each:function(f){var u=this.entries;for(var l in u)if(f(l,u[l])===!1)break;return this},contains:function(f){var u=this.entries;for(var l in u)if(u[l]===f)return!0;return!1},merge:function(f,u){u===void 0&&(u=!1);var l=this.entries,a=f.entries;for(var o in a)l.hasOwnProperty(o)&&u?l[o]=a[o]:this.set(o,a[o]);return this}});s.exports=p},74623:(s,g,e)=>{var n=e(56694),p=e(6659),f=e(36716),u=new n({Extends:p,initialize:function(){p.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(l){return this._active.indexOf(l)>-1},isPending:function(l){return this._toProcess>0&&this._pending.indexOf(l)>-1},isDestroying:function(l){return this._destroy.indexOf(l)>-1},add:function(l){return this.checkQueue&&this.isActive()&&!this.isDestroying()||this.isPending()||(this._pending.push(l),this._toProcess++),l},remove:function(l){if(this.isPending(l)){var a=this._pending,o=a.indexOf(l);o!==-1&&a.splice(o,1)}else this.isActive(l)&&(this._destroy.push(l),this._toProcess++);return l},removeAll:function(){for(var l=this._active,a=this._destroy,o=l.length;o--;)a.push(l[o]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var l=this._destroy,a=this._active,o,c;for(o=0;o<l.length;o++){c=l[o];var h=a.indexOf(c);h!==-1&&(a.splice(h,1),this.emit(f.PROCESS_QUEUE_REMOVE,c))}for(l.length=0,l=this._pending,o=0;o<l.length;o++)c=l[o],(!this.checkQueue||this.checkQueue&&a.indexOf(c)===-1)&&(a.push(c),this.emit(f.PROCESS_QUEUE_ADD,c));return l.length=0,this._toProcess=0,a},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});s.exports=u},68687:(s,g,e)=>{var n=e(53466);function p(S){var M=[".left",".top",".right",".bottom"];if(!(this instanceof p))return new p(S,M);this._maxEntries=Math.max(4,S||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}p.prototype={all:function(){return this._all(this.data,[])},search:function(S){var M=this.data,E=[],A=this.toBBox;if(!C(S,M))return E;for(var R=[],w,O,F,b;M;){for(w=0,O=M.children.length;w<O;w++)F=M.children[w],b=M.leaf?A(F):F,C(S,b)&&(M.leaf?E.push(F):y(S,b)?this._all(F,E):R.push(F));M=R.pop()}return E},collides:function(S){var M=this.data,E=this.toBBox;if(!C(S,M))return!1;for(var A=[],R,w,O,F;M;){for(R=0,w=M.children.length;R<w;R++)if(O=M.children[R],F=M.leaf?E(O):O,C(S,F)){if(M.leaf||y(S,F))return!0;A.push(O)}M=A.pop()}return!1},load:function(S){if(!(S&&S.length))return this;if(S.length<this._minEntries){for(var M=0,E=S.length;M<E;M++)this.insert(S[M]);return this}var A=this._build(S.slice(),0,S.length-1,0);if(!this.data.children.length)this.data=A;else if(this.data.height===A.height)this._splitRoot(this.data,A);else{if(this.data.height<A.height){var R=this.data;this.data=A,A=R}this._insert(A,this.data.height-A.height-1,!0)}return this},insert:function(S){return S&&this._insert(S,this.data.height-1),this},clear:function(){return this.data=T([]),this},remove:function(S,M){if(!S)return this;for(var E=this.data,A=this.toBBox(S),R=[],w=[],O,F,b,I;E||R.length;){if(E||(E=R.pop(),F=R[R.length-1],O=w.pop(),I=!0),E.leaf&&(b=f(S,E.children,M),b!==-1))return E.children.splice(b,1),R.push(E),this._condense(R),this;!I&&!E.leaf&&y(E,A)?(R.push(E),w.push(O),O=0,F=E,E=E.children[0]):F?(O++,E=F.children[O],I=!1):E=null}return this},toBBox:function(S){return S},compareMinX:o,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(S){return this.data=S,this},_all:function(S,M){for(var E=[];S;)S.leaf?M.push.apply(M,S.children):E.push.apply(E,S.children),S=E.pop();return M},_build:function(S,M,E,A){var R=E-M+1,w=this._maxEntries,O;if(R<=w)return O=T(S.slice(M,E+1)),u(O,this.toBBox),O;A||(A=Math.ceil(Math.log(R)/Math.log(w)),w=Math.ceil(R/Math.pow(w,A-1))),O=T([]),O.leaf=!1,O.height=A;var F=Math.ceil(R/w),b=F*Math.ceil(Math.sqrt(w)),I,N,z,U;for(P(S,M,E,b,this.compareMinX),I=M;I<=E;I+=b)for(z=Math.min(I+b-1,E),P(S,I,z,F,this.compareMinY),N=I;N<=z;N+=F)U=Math.min(N+F-1,z),O.children.push(this._build(S,N,U,A-1));return u(O,this.toBBox),O},_chooseSubtree:function(S,M,E,A){for(var R,w,O,F,b,I,N,z;A.push(M),!(M.leaf||A.length-1===E);){for(N=z=1/0,R=0,w=M.children.length;R<w;R++)O=M.children[R],b=h(O),I=v(S,O)-b,I<z?(z=I,N=b<N?b:N,F=O):I===z&&b<N&&(N=b,F=O);M=F||M.children[0]}return M},_insert:function(S,M,E){var A=this.toBBox,R=E?S:A(S),w=[],O=this._chooseSubtree(R,this.data,M,w);for(O.children.push(S),a(O,R);M>=0&&w[M].children.length>this._maxEntries;)this._split(w,M),M--;this._adjustParentBBoxes(R,w,M)},_split:function(S,M){var E=S[M],A=E.children.length,R=this._minEntries;this._chooseSplitAxis(E,R,A);var w=this._chooseSplitIndex(E,R,A),O=T(E.children.splice(w,E.children.length-w));O.height=E.height,O.leaf=E.leaf,u(E,this.toBBox),u(O,this.toBBox),M?S[M-1].children.push(O):this._splitRoot(E,O)},_splitRoot:function(S,M){this.data=T([S,M]),this.data.height=S.height+1,this.data.leaf=!1,u(this.data,this.toBBox)},_chooseSplitIndex:function(S,M,E){var A,R,w,O,F,b,I,N;for(b=I=1/0,A=M;A<=E-M;A++)R=l(S,0,A,this.toBBox),w=l(S,A,E,this.toBBox),O=m(R,w),F=h(R)+h(w),O<b?(b=O,N=A,I=F<I?F:I):O===b&&F<I&&(I=F,N=A);return N},_chooseSplitAxis:function(S,M,E){var A=S.leaf?this.compareMinX:o,R=S.leaf?this.compareMinY:c,w=this._allDistMargin(S,M,E,A),O=this._allDistMargin(S,M,E,R);w<O&&S.children.sort(A)},_allDistMargin:function(S,M,E,A){S.children.sort(A);var R=this.toBBox,w=l(S,0,M,R),O=l(S,E-M,E,R),F=d(w)+d(O),b,I;for(b=M;b<E-M;b++)I=S.children[b],a(w,S.leaf?R(I):I),F+=d(w);for(b=E-M-1;b>=M;b--)I=S.children[b],a(O,S.leaf?R(I):I),F+=d(O);return F},_adjustParentBBoxes:function(S,M,E){for(var A=E;A>=0;A--)a(M[A],S)},_condense:function(S){for(var M=S.length-1,E;M>=0;M--)S[M].children.length===0?M>0?(E=S[M-1].children,E.splice(E.indexOf(S[M]),1)):this.clear():u(S[M],this.toBBox)},compareMinX:function(S,M){return S.left-M.left},compareMinY:function(S,M){return S.top-M.top},toBBox:function(S){return{minX:S.left,minY:S.top,maxX:S.right,maxY:S.bottom}}};function f(S,M,E){if(!E)return M.indexOf(S);for(var A=0;A<M.length;A++)if(E(S,M[A]))return A;return-1}function u(S,M){l(S,0,S.children.length,M,S)}function l(S,M,E,A,R){R||(R=T(null)),R.minX=1/0,R.minY=1/0,R.maxX=-1/0,R.maxY=-1/0;for(var w=M,O;w<E;w++)O=S.children[w],a(R,S.leaf?A(O):O);return R}function a(S,M){return S.minX=Math.min(S.minX,M.minX),S.minY=Math.min(S.minY,M.minY),S.maxX=Math.max(S.maxX,M.maxX),S.maxY=Math.max(S.maxY,M.maxY),S}function o(S,M){return S.minX-M.minX}function c(S,M){return S.minY-M.minY}function h(S){return(S.maxX-S.minX)*(S.maxY-S.minY)}function d(S){return S.maxX-S.minX+(S.maxY-S.minY)}function v(S,M){return(Math.max(M.maxX,S.maxX)-Math.min(M.minX,S.minX))*(Math.max(M.maxY,S.maxY)-Math.min(M.minY,S.minY))}function m(S,M){var E=Math.max(S.minX,M.minX),A=Math.max(S.minY,M.minY),R=Math.min(S.maxX,M.maxX),w=Math.min(S.maxY,M.maxY);return Math.max(0,R-E)*Math.max(0,w-A)}function y(S,M){return S.minX<=M.minX&&S.minY<=M.minY&&M.maxX<=S.maxX&&M.maxY<=S.maxY}function C(S,M){return M.minX<=S.maxX&&M.minY<=S.maxY&&M.maxX>=S.minX&&M.maxY>=S.minY}function T(S){return{children:S,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function P(S,M,E,A,R){for(var w=[M,E],O;w.length;)E=w.pop(),M=w.pop(),!(E-M<=A)&&(O=M+Math.ceil((E-M)/A/2)*A,n(S,O,M,E,R),w.push(M,O,O,E))}s.exports=p},58403:(s,g,e)=>{var n=e(56694),p=new n({initialize:function(u){if(this.entries=[],Array.isArray(u))for(var l=0;l<u.length;l++)this.set(u[l])},set:function(f){return this.entries.indexOf(f)===-1&&this.entries.push(f),this},get:function(f,u){for(var l=0;l<this.entries.length;l++){var a=this.entries[l];if(a[f]===u)return a}},getArray:function(){return this.entries.slice(0)},delete:function(f){var u=this.entries.indexOf(f);return u>-1&&this.entries.splice(u,1),this},dump:function(){console.group("Set");for(var f=0;f<this.entries.length;f++){var u=this.entries[f];console.log(u)}console.groupEnd()},each:function(f,u){var l,a=this.entries.slice(),o=a.length;if(u)for(l=0;l<o&&f.call(u,a[l],l)!==!1;l++);else for(l=0;l<o&&f(a[l],l)!==!1;l++);return this},iterate:function(f,u){var l,a=this.entries.length;if(u)for(l=0;l<a&&f.call(u,this.entries[l],l)!==!1;l++);else for(l=0;l<a&&f(this.entries[l],l)!==!1;l++);return this},iterateLocal:function(f){var u,l=[];for(u=1;u<arguments.length;u++)l.push(arguments[u]);var a=this.entries.length;for(u=0;u<a;u++){var o=this.entries[u];o[f].apply(o,l)}return this},clear:function(){return this.entries.length=0,this},contains:function(f){return this.entries.indexOf(f)>-1},union:function(f){var u=new p;return f.entries.forEach(function(l){u.set(l)}),this.entries.forEach(function(l){u.set(l)}),u},intersect:function(f){var u=new p;return this.entries.forEach(function(l){f.contains(l)&&u.set(l)}),u},difference:function(f){var u=new p;return this.entries.forEach(function(l){f.contains(l)||u.set(l)}),u},size:{get:function(){return this.entries.length},set:function(f){return f<this.entries.length?this.entries.length=f:this.entries.length}}});s.exports=p},90881:(s,g,e)=>{var n=e(82897),p=e(56694),f=e(84314),u=e(93736),l=new p({initialize:function(o,c,h,d){o===void 0&&(o=0),c===void 0&&(c=o),h===void 0&&(h=0),d===void 0&&(d=null),this._width=o,this._height=c,this._parent=d,this.aspectMode=h,this.aspectRatio=c===0?1:o/c,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new u},setAspectMode:function(a){return a===void 0&&(a=0),this.aspectMode=a,this.setSize(this._width,this._height)},setSnap:function(a,o){return a===void 0&&(a=0),o===void 0&&(o=a),this.snapTo.set(a,o),this.setSize(this._width,this._height)},setParent:function(a){return this._parent=a,this.setSize(this._width,this._height)},setMin:function(a,o){return a===void 0&&(a=0),o===void 0&&(o=a),this.minWidth=n(a,0,this.maxWidth),this.minHeight=n(o,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(a,o){return a===void 0&&(a=Number.MAX_VALUE),o===void 0&&(o=a),this.maxWidth=n(a,this.minWidth,Number.MAX_VALUE),this.maxHeight=n(o,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(a,o){switch(a===void 0&&(a=0),o===void 0&&(o=a),this.aspectMode){case l.NONE:this._width=this.getNewWidth(f(a,this.snapTo.x)),this._height=this.getNewHeight(f(o,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case l.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(f(a,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case l.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(f(o,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case l.FIT:this.constrain(a,o,!0);break;case l.ENVELOP:this.constrain(a,o,!1);break}return this},setAspectRatio:function(a){return this.aspectRatio=a,this.setSize(this._width,this._height)},resize:function(a,o){return this._width=this.getNewWidth(f(a,this.snapTo.x)),this._height=this.getNewHeight(f(o,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(a,o){return o===void 0&&(o=!0),a=n(a,this.minWidth,this.maxWidth),o&&this._parent&&a>this._parent.width&&(a=Math.max(this.minWidth,this._parent.width)),a},getNewHeight:function(a,o){return o===void 0&&(o=!0),a=n(a,this.minHeight,this.maxHeight),o&&this._parent&&a>this._parent.height&&(a=Math.max(this.minHeight,this._parent.height)),a},constrain:function(a,o,c){a===void 0&&(a=0),o===void 0&&(o=a),c===void 0&&(c=!0),a=this.getNewWidth(a),o=this.getNewHeight(o);var h=this.snapTo,d=o===0?1:a/o;return c&&this.aspectRatio>d||!c&&this.aspectRatio<d?(a=f(a,h.x),o=a/this.aspectRatio,h.y>0&&(o=f(o,h.y),a=o*this.aspectRatio)):(c&&this.aspectRatio<d||!c&&this.aspectRatio>d)&&(o=f(o,h.y),a=o*this.aspectRatio,h.x>0&&(a=f(a,h.x),o=a*(1/this.aspectRatio))),this._width=a,this._height=o,this},fitTo:function(a,o){return this.constrain(a,o,!0)},envelop:function(a,o){return this.constrain(a,o,!1)},setWidth:function(a){return this.setSize(a,this._height)},setHeight:function(a){return this.setSize(this._width,a)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(a){a&&a.style&&(a.style.width=this._width+"px",a.style.height=this._height+"px")},copy:function(a){return a.setAspectMode(this.aspectMode),a.aspectRatio=this.aspectRatio,a.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(a){this.setSize(a,this._height)}},height:{get:function(){return this._height},set:function(a){this.setSize(this._width,a)}}});l.NONE=0,l.WIDTH_CONTROLS_HEIGHT=1,l.HEIGHT_CONTROLS_WIDTH=2,l.FIT=3,l.ENVELOP=4,s.exports=l},94160:s=>{s.exports="add"},95393:s=>{s.exports="remove"},36716:(s,g,e)=>{s.exports={PROCESS_QUEUE_ADD:e(94160),PROCESS_QUEUE_REMOVE:e(95393)}},20010:(s,g,e)=>{s.exports={Events:e(36716),List:e(71207),Map:e(33885),ProcessQueue:e(74623),RTree:e(68687),Set:e(58403),Size:e(90881)}},17487:(s,g,e)=>{var n=e(56694),p=e(82897),f=e(27119),u=e(86459),l=e(28621),a=e(31673),o=new n({Extends:a,initialize:function(h,d,v,m,y){a.call(this,h,d,v,m,y),this.add("__BASE",0,0,0,m,y),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=m,this.height=y,this.imageData=this.context.getImageData(0,0,m,y),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===u.WEBGL&&this.refresh(),this},draw:function(c,h,d,v){return v===void 0&&(v=!0),this.context.drawImage(d,c,h),v&&this.update(),this},drawFrame:function(c,h,d,v,m){d===void 0&&(d=0),v===void 0&&(v=0),m===void 0&&(m=!0);var y=this.manager.getFrame(c,h);if(y){var C=y.canvasData,T=y.cutWidth,P=y.cutHeight,S=y.source.resolution;this.context.drawImage(y.source.image,C.x,C.y,T,P,d,v,T/S,P/S),m&&this.update()}return this},setPixel:function(c,h,d,v,m,y){y===void 0&&(y=255),c=Math.abs(Math.floor(c)),h=Math.abs(Math.floor(h));var C=this.getIndex(c,h);if(C>-1){var T=this.context.getImageData(c,h,1,1);T.data[0]=d,T.data[1]=v,T.data[2]=m,T.data[3]=y,this.context.putImageData(T,c,h)}return this},putData:function(c,h,d,v,m,y,C){return v===void 0&&(v=0),m===void 0&&(m=0),y===void 0&&(y=c.width),C===void 0&&(C=c.height),this.context.putImageData(c,h,d,v,m,y,C),this},getData:function(c,h,d,v){c=p(Math.floor(c),0,this.width-1),h=p(Math.floor(h),0,this.height-1),d=p(d,1,this.width-c),v=p(v,1,this.height-h);var m=this.context.getImageData(c,h,d,v);return m},getPixel:function(c,h,d){d||(d=new f);var v=this.getIndex(c,h);if(v>-1){var m=this.data,y=m[v+0],C=m[v+1],T=m[v+2],P=m[v+3];d.setTo(y,C,T,P)}return d},getPixels:function(c,h,d,v){c===void 0&&(c=0),h===void 0&&(h=0),d===void 0&&(d=this.width),v===void 0&&(v=d),c=Math.abs(Math.round(c)),h=Math.abs(Math.round(h));for(var m=p(c,0,this.width),y=p(c+d,0,this.width),C=p(h,0,this.height),T=p(h+v,0,this.height),P=new f,S=[],M=C;M<T;M++){for(var E=[],A=m;A<y;A++)P=this.getPixel(A,M,P),E.push({x:A,y:M,color:P.color,alpha:P.alphaGL});S.push(E)}return S},getIndex:function(c,h){return c=Math.abs(Math.round(c)),h=Math.abs(Math.round(h)),c<this.width&&h<this.height?(c+h*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(c,h,d,v,m){return c===void 0&&(c=0),h===void 0&&(h=0),d===void 0&&(d=this.width),v===void 0&&(v=this.height),m===void 0&&(m=!0),this.context.clearRect(c,h,d,v),m&&this.update(),this},setSize:function(c,h){return h===void 0&&(h=c),(c!==this.width||h!==this.height)&&(this.canvas.width=c,this.canvas.height=h,this._source.width=c,this._source.height=h,this._source.isPowerOf2=l(c,h),this.frames.__BASE.setSize(c,h,0,0),this.width=c,this.height=h,this.refresh()),this},destroy:function(){a.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});s.exports=o},845:(s,g,e)=>{var n=e(95723),p=e(51052),f=e(61068),u=e(56694),l=e(86459),a=e(82047),o=e(72632),c=e(65641),h=e(37410),d=e(31673),v=e(75512),m=new u({Extends:d,initialize:function(C,T,P,S){P===void 0&&(P=256),S===void 0&&(S=256),this.type="DynamicTexture";var M=C.game.renderer,E=M&&M.type===l.CANVAS,A=E?f.create2D(this,P,S):[this];d.call(this,C,T,A,P,S),this.add("__BASE",0,0,0,P,S),this.renderer=M,this.isDrawing=!1,this.canvas=E?A:null,this.context=E?A.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new p(0,0,P,S).setScene(C.game.scene.systemScene,!1),this.renderTarget=E?null:new h(M,P,S,1,0,!1,!0,!0,!1),this.pipeline=E?null:M.pipelines.get(c.SINGLE_PIPELINE),this.setSize(P,S)},setSize:function(y,C){C===void 0&&(C=y);var T=this.get(),P=T.source;if(y!==this.width||C!==this.height){this.canvas&&(this.canvas.width=y,this.canvas.height=C);var S=this.renderTarget;S&&(S.resize(y,C),T.glTexture=S.texture,P.isRenderTexture=!0,P.isGLTexture=!0,P.glTexture=S.texture,P.glTexture.flipY=!0),this.camera.setSize(y,C),P.width=y,P.height=C,T.setSize(y,C),this.width=y,this.height=C}else{var M=this.getSourceImage();T.cutX+y>M.width&&(y=M.width-T.cutX),T.cutY+C>M.height&&(C=M.height-T.cutY),T.setSize(y,C,T.cutX,T.cutY)}return this},setIsSpriteTexture:function(y){return this.isSpriteTexture=y,this},fill:function(y,C,T,P,S,M){var E=this.camera,A=this.renderer;C===void 0&&(C=1),T===void 0&&(T=0),P===void 0&&(P=0),S===void 0&&(S=this.width),M===void 0&&(M=this.height);var R=y>>16&255,w=y>>8&255,O=y&255,F=this.renderTarget;if(E.preRender(),F){F.bind(!0);var b=this.pipeline.manager.set(this.pipeline),I=A.width/F.width,N=A.height/F.height;b.drawFillRect(T*I,P*N,S*I,M*N,v.getTintFromFloats(O/255,w/255,R/255,1),C),F.unbind(!0)}else{var z=this.context;A.setContext(z),z.globalCompositeOperation="source-over",z.fillStyle="rgba("+R+","+w+","+O+","+C+")",z.fillRect(T,P,S,M),A.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var y=this.context,C=this.renderTarget;C?C.clear():y&&(y.save(),y.setTransform(1,0,0,1,0,0),y.clearRect(0,0,this.width,this.height),y.restore()),this.dirty=!1}return this},stamp:function(y,C,T,P,S){T===void 0&&(T=0),P===void 0&&(P=0);var M=o(S,"alpha",1),E=o(S,"tint",16777215),A=o(S,"angle",0),R=o(S,"rotation",0),w=o(S,"scale",1),O=o(S,"scaleX",w),F=o(S,"scaleY",w),b=o(S,"originX",.5),I=o(S,"originY",.5),N=o(S,"blendMode",0),z=o(S,"erase",!1),U=o(S,"skipBatch",!1),W=this.manager.resetStamp(M,E);return W.setAngle(0),A!==0?W.setAngle(A):R!==0&&W.setRotation(R),W.setScale(O,F),W.setTexture(y,C),W.setOrigin(b,I),W.setBlendMode(N),z&&(this._eraseMode=!0),U?this.batchGameObject(W,T,P):this.draw(W,T,P),z&&(this._eraseMode=!1),this},erase:function(y,C,T){return this._eraseMode=!0,this.draw(y,C,T),this._eraseMode=!1,this},draw:function(y,C,T,P,S){return this.beginDraw(),this.batchDraw(y,C,T,P,S),this.endDraw(),this},drawFrame:function(y,C,T,P,S,M){return this.beginDraw(),this.batchDrawFrame(y,C,T,P,S,M),this.endDraw(),this},repeat:function(y,C,T,P,S,M,E,A,R){if(T===void 0&&(T=0),P===void 0&&(P=0),S===void 0&&(S=this.width),M===void 0&&(M=this.height),E===void 0&&(E=1),A===void 0&&(A=16777215),R===void 0&&(R=!1),y instanceof a?C=y:C=this.manager.getFrame(y,C),!C)return this;var w=this.manager.resetStamp(E,A);w.setFrame(C),w.setOrigin(0);var O=C.width,F=C.height;S=Math.floor(S),M=Math.floor(M);var b=Math.ceil(S/O),I=Math.ceil(M/F),N=b*O-S,z=I*F-M;N>0&&(N=O-N),z>0&&(z=F-z),T<0&&(b+=Math.ceil(Math.abs(T)/O)),P<0&&(I+=Math.ceil(Math.abs(P)/F));var U=T,W=P,D=!1,V=this.manager.stampCrop.setTo(0,0,O,F);R||this.beginDraw();for(var L=0;L<I;L++){if(W+F<0){W+=F;continue}for(var B=0;B<b;B++){if(D=!1,U+O<0){U+=O;continue}else U<0&&(D=!0,V.width=O+U,V.x=O-V.width);W<0&&(D=!0,V.height=F+W,V.y=F-V.height),N>0&&B===b-1&&(D=!0,V.width=N),z>0&&L===I-1&&(D=!0,V.height=z),D&&w.setCrop(V),this.batchGameObject(w,U,W),w.isCropped=!1,V.setTo(0,0,O,F),U+=O}U=T,W+=F}return R||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var y=this.camera,C=this.renderer,T=this.renderTarget;y.preRender(),T?C.beginCapture(T.width,T.height):C.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(y,C,T,P,S){return Array.isArray(y)||(y=[y]),this.batchList(y,C,T,P,S),this},batchDrawFrame:function(y,C,T,P,S,M){T===void 0&&(T=0),P===void 0&&(P=0),S===void 0&&(S=1),M===void 0&&(M=16777215);var E=this.manager.getFrame(y,C);return E&&(this.renderTarget?this.pipeline.batchTextureFrame(E,T,P,M,S,this.camera.matrix,null):this.batchTextureFrame(E,T,P,S,M)),this},endDraw:function(y){if(y===void 0&&(y=this._eraseMode),this.isDrawing){var C=this.renderer,T=this.renderTarget;if(T){var P=C.endCapture(),S=C.pipelines.setUtility();S.blitFrame(P,T,1,!1,!1,y,this.isSpriteTexture),C.resetScissor(),C.resetViewport()}else C.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(y,C,T,P,S){var M=y.length;if(M!==0)for(var E=0;E<M;E++){var A=y[E];!A||A===this||(A.renderWebGL||A.renderCanvas?this.batchGameObject(A,C,T):A.isParent||A.list?this.batchGroup(A.getChildren(),C,T):typeof A=="string"?this.batchTextureFrameKey(A,null,C,T,P,S):A instanceof a?this.batchTextureFrame(A,C,T,P,S):Array.isArray(A)&&this.batchList(A,C,T,P,S))}},batchGroup:function(y,C,T){C===void 0&&(C=0),T===void 0&&(T=0);for(var P=0;P<y.length;P++){var S=y[P];S.willRender(this.camera)&&this.batchGameObject(S,S.x+C,S.y+T)}},batchGameObject:function(y,C,T){C===void 0&&(C=y.x),T===void 0&&(T=y.y);var P=y.x,S=y.y,M=this.camera,E=this.renderer,A=this._eraseMode,R=y.mask;if(y.setPosition(C,T),this.canvas){if(A){var w=y.blendMode;y.blendMode=n.ERASE}R&&R.preRenderCanvas(E,y,M),y.renderCanvas(E,y,M,null),R&&R.postRenderCanvas(E,y,M),A&&(y.blendMode=w)}else E&&(R&&R.preRenderWebGL(E,y,M),A||E.setBlendMode(y.blendMode),y.renderWebGL(E,y,M),R&&R.postRenderWebGL(E,M,this.renderTarget));y.setPosition(P,S)},batchTextureFrameKey:function(y,C,T,P,S,M){var E=this.manager.getFrame(y,C);E&&this.batchTextureFrame(E,T,P,S,M)},batchTextureFrame:function(y,C,T,P,S){C===void 0&&(C=0),T===void 0&&(T=0),P===void 0&&(P=1),S===void 0&&(S=16777215);var M=this.camera.matrix,E=this.renderTarget;if(E)this.pipeline.batchTextureFrame(y,C,T,S,P,M,null);else{var A=this.context,R=y.canvasData,w=y.source.image;A.save(),A.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",A.globalAlpha=P,M.setToContext(A),R.width>0&&R.height>0&&A.drawImage(w,R.x,R.y,R.width,R.height,C,T,R.width,R.height),A.restore()}},snapshotArea:function(y,C,T,P,S,M,E){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,S,!1,y,C,T,P,M,E):this.renderer.snapshotCanvas(this.canvas,S,!1,y,C,T,P,M,E),this},snapshot:function(y,C,T){return this.snapshotArea(0,0,this.width,this.height,y,C,T)},snapshotPixel:function(y,C,T){return this.snapshotArea(y,C,1,1,T,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(y,C,T,P){var S=this.manager.resetStamp();S.setTexture(this),S.setOrigin(0),S.renderWebGL(y,S,T,P)},renderCanvas:function(){},preDestroy:function(){f.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.stamp.destroy(),this.canvas=null,this.context=null,this.renderer=null,this.scene=null}});s.exports=m},82047:(s,g,e)=>{var n=e(56694),p=e(82897),f=e(98611),u=new n({initialize:function(a,o,c,h,d,v,m){this.texture=a,this.name=o,this.source=a.source[c],this.sourceIndex=c,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(v,m,h,d)},setSize:function(l,a,o,c){o===void 0&&(o=0),c===void 0&&(c=0),this.cutX=o,this.cutY=c,this.cutWidth=l,this.cutHeight=a,this.width=l,this.height=a,this.halfWidth=Math.floor(l*.5),this.halfHeight=Math.floor(a*.5),this.centerX=Math.floor(l/2),this.centerY=Math.floor(a/2);var h=this.data,d=h.cut;d.x=o,d.y=c,d.w=l,d.h=a,d.r=o+l,d.b=c+a,h.sourceSize.w=l,h.sourceSize.h=a,h.spriteSourceSize.w=l,h.spriteSourceSize.h=a,h.radius=.5*Math.sqrt(l*l+a*a);var v=h.drawImage;return v.x=o,v.y=c,v.width=l,v.height=a,this.updateUVs()},setTrim:function(l,a,o,c,h,d){var v=this.data,m=v.spriteSourceSize;return v.trim=!0,v.sourceSize.w=l,v.sourceSize.h=a,m.x=o,m.y=c,m.w=h,m.h=d,m.r=o+h,m.b=c+d,this.x=o,this.y=c,this.width=h,this.height=d,this.halfWidth=h*.5,this.halfHeight=d*.5,this.centerX=Math.floor(h/2),this.centerY=Math.floor(d/2),this.updateUVs()},setCropUVs:function(l,a,o,c,h,d,v){var m=this.cutX,y=this.cutY,C=this.cutWidth,T=this.cutHeight,P=this.realWidth,S=this.realHeight;a=p(a,0,P),o=p(o,0,S),c=p(c,0,P-a),h=p(h,0,S-o);var M=m+a,E=y+o,A=c,R=h,w=this.data;if(w.trim){var O=w.spriteSourceSize;c=p(c,0,C-a),h=p(h,0,T-o);var F=a+c,b=o+h,I=!(O.r<a||O.b<o||O.x>F||O.y>b);if(I){var N=Math.max(O.x,a),z=Math.max(O.y,o),U=Math.min(O.r,F)-N,W=Math.min(O.b,b)-z;A=U,R=W,d?M=m+(C-(N-O.x)-U):M=m+(N-O.x),v?E=y+(T-(z-O.y)-W):E=y+(z-O.y),a=N,o=z,c=U,h=W}else M=0,E=0,A=0,R=0}else d&&(M=m+(C-a-c)),v&&(E=y+(T-o-h));var D=this.source.width,V=this.source.height;return l.u0=Math.max(0,M/D),l.v0=Math.max(0,E/V),l.u1=Math.min(1,(M+A)/D),l.v1=Math.min(1,(E+R)/V),l.x=a,l.y=o,l.cx=M,l.cy=E,l.cw=A,l.ch=R,l.width=c,l.height=h,l.flipX=d,l.flipY=v,l},updateCropUVs:function(l,a,o){return this.setCropUVs(l,l.x,l.y,l.width,l.height,a,o)},setUVs:function(l,a,o,c,h,d){var v=this.data.drawImage;return v.width=l,v.height=a,this.u0=o,this.v0=c,this.u1=h,this.v1=d,this},updateUVs:function(){var l=this.cutX,a=this.cutY,o=this.cutWidth,c=this.cutHeight,h=this.data.drawImage;h.width=o,h.height=c;var d=this.source.width,v=this.source.height;return this.u0=l/d,this.v0=a/v,this.u1=(l+o)/d,this.v1=(a+c)/v,this},updateUVsInverted:function(){var l=this.source.width,a=this.source.height;return this.u0=(this.cutX+this.cutHeight)/l,this.v0=this.cutY/a,this.u1=this.cutX/l,this.v1=(this.cutY+this.cutWidth)/a,this},clone:function(){var l=new u(this.texture,this.name,this.sourceIndex);return l.cutX=this.cutX,l.cutY=this.cutY,l.cutWidth=this.cutWidth,l.cutHeight=this.cutHeight,l.x=this.x,l.y=this.y,l.width=this.width,l.height=this.height,l.halfWidth=this.halfWidth,l.halfHeight=this.halfHeight,l.centerX=this.centerX,l.centerY=this.centerY,l.rotated=this.rotated,l.data=f(!0,l.data,this.data),l.updateUVs(),l},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});s.exports=u},31673:(s,g,e)=>{var n=e(56694),p=e(82047),f=e(32547),u='Texture "%s" has no frame "%s"',l=new n({initialize:function(o,c,h,d,v){Array.isArray(h)||(h=[h]),this.manager=o,this.key=c,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var m=0;m<h.length;m++)this.source.push(new f(this,h[m],d,v))},add:function(a,o,c,h,d,v){if(this.has(a))return null;var m=new p(this,a,o,c,h,d,v);return this.frames[a]=m,this.firstFrame==="__BASE"&&(this.firstFrame=a),this.frameTotal++,m},remove:function(a){if(this.has(a)){var o=this.get(a);return o.destroy(),delete this.frames[a],!0}return!1},has:function(a){return this.frames.hasOwnProperty(a)},get:function(a){a||(a=this.firstFrame);var o=this.frames[a];return o||(console.warn(u,this.key,a),o=this.frames[this.firstFrame]),o},getTextureSourceIndex:function(a){for(var o=0;o<this.source.length;o++)if(this.source[o]===a)return o;return-1},getFramesFromTextureSource:function(a,o){o===void 0&&(o=!1);var c=[];for(var h in this.frames)if(!(h==="__BASE"&&!o)){var d=this.frames[h];d.sourceIndex===a&&c.push(d)}return c},getFrameNames:function(a){a===void 0&&(a=!1);var o=Object.keys(this.frames);if(!a){var c=o.indexOf("__BASE");c!==-1&&o.splice(c,1)}return o},getSourceImage:function(a){(a==null||this.frameTotal===1)&&(a="__BASE");var o=this.frames[a];return o?o.source.image:(console.warn(u,this.key,a),this.frames.__BASE.source.image)},getDataSourceImage:function(a){(a==null||this.frameTotal===1)&&(a="__BASE");var o=this.frames[a],c;return o?c=o.sourceIndex:(console.warn(u,this.key,a),c=this.frames.__BASE.sourceIndex),this.dataSource[c].image},setDataSource:function(a){Array.isArray(a)||(a=[a]);for(var o=0;o<a.length;o++){var c=this.source[o];this.dataSource.push(new f(this,a[o],c.width,c.height))}},setFilter:function(a){var o;for(o=0;o<this.source.length;o++)this.source[o].setFilter(a);for(o=0;o<this.dataSource.length;o++)this.dataSource[o].setFilter(a)},destroy:function(){var a,o=this.source,c=this.dataSource;for(a=0;a<o.length;a++)o[a]&&o[a].destroy();for(a=0;a<c.length;a++)c[a]&&c[a].destroy();for(var h in this.frames){var d=this.frames[h];d&&d.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});s.exports=l},6237:(s,g,e)=>{var n=e(61068),p=e(17487),f=e(56694),u=e(27119),l=e(86459),a=e(845),o=e(6659),c=e(38203),h=e(82047),d=e(97081),v=e(52780),m=e(10850),y=e(1539),C=e(42911),T=e(69150),P=e(74118),S=e(31673),M=new f({Extends:o,initialize:function(A){o.call(this),this.game=A,this.name="TextureManager",this.list={},this._tempCanvas=n.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new P,this.silentWarnings=!1,A.events.once(d.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(c.LOAD,this.updatePending,this),this.on(c.ERROR,this.updatePending,this);var E=this.game.config;this.addBase64("__DEFAULT",E.defaultImage),this.addBase64("__MISSING",E.missingImage),this.addBase64("__WHITE",E.whiteImage),this.game.events.once(d.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(c.LOAD),this.off(c.ERROR),this.emit(c.READY),this.stamp=new y(this.game.scene.systemScene).setOrigin(0))},checkKey:function(E){return this.exists(E)?(this.silentWarnings||console.error("Texture key already in use: "+E),!1):!0},remove:function(E){if(typeof E=="string")if(this.exists(E))E=this.get(E);else return this.silentWarnings||console.warn("No texture found matching key: "+E),this;return this.list.hasOwnProperty(E.key)&&(E.destroy(),this.emit(c.REMOVE,E.key),this.emit(c.REMOVE_KEY+E.key)),this},removeKey:function(E){return this.list.hasOwnProperty(E)&&delete this.list[E],this},addBase64:function(E,A){if(this.checkKey(E)){var R=this,w=new Image;w.onerror=function(){R.emit(c.ERROR,E)},w.onload=function(){var O=R.create(E,w);T.Image(O,0),R.emit(c.ADD,E,O),R.emit(c.ADD_KEY+E,O),R.emit(c.LOAD,E,O)},w.src=A}return this},getBase64:function(E,A,R,w){R===void 0&&(R="image/png"),w===void 0&&(w=.92);var O="",F=this.getFrame(E,A);if(F&&(F.source.isRenderTexture||F.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(F){var b=F.canvasData,I=n.create2D(this,b.width,b.height),N=I.getContext("2d",{willReadFrequently:!0});b.width>0&&b.height>0&&N.drawImage(F.source.image,b.x,b.y,b.width,b.height,0,0,b.width,b.height),O=I.toDataURL(R,w),n.remove(I)}return O},addImage:function(E,A,R){var w=null;return this.checkKey(E)&&(w=this.create(E,A),T.Image(w,0),R&&w.setDataSource(R),this.emit(c.ADD,E,w),this.emit(c.ADD_KEY+E,w)),w},addGLTexture:function(E,A,R,w){var O=null;return this.checkKey(E)&&(R===void 0&&(R=A.width),w===void 0&&(w=A.height),O=this.create(E,A,R,w),O.add("__BASE",0,0,0,R,w),this.emit(c.ADD,E,O),this.emit(c.ADD_KEY+E,O)),O},addCompressedTexture:function(E,A,R){var w=null;if(this.checkKey(E)){if(w=this.create(E,A),w.add("__BASE",0,0,0,A.width,A.height),R)if(Array.isArray(R))for(var O=0;O<R.length;O++)T.JSONHash(w,O,R[O]);else T.JSONHash(w,0,R);this.emit(c.ADD,E,w),this.emit(c.ADD_KEY+E,w)}return w},addRenderTexture:function(E,A){var R=null;return this.checkKey(E)&&(R=this.create(E,A),R.add("__BASE",0,0,0,A.width,A.height),this.emit(c.ADD,E,R),this.emit(c.ADD_KEY+E,R)),R},generate:function(E,A){if(this.checkKey(E)){var R=n.create(this,1,1);return A.canvas=R,v(A),this.addCanvas(E,R)}else return null},createCanvas:function(E,A,R){if(A===void 0&&(A=256),R===void 0&&(R=256),this.checkKey(E)){var w=n.create(this,A,R,l.CANVAS,!0);return this.addCanvas(E,w)}return null},addCanvas:function(E,A,R){R===void 0&&(R=!1);var w=null;return R?w=new p(this,E,A,A.width,A.height):this.checkKey(E)&&(w=new p(this,E,A,A.width,A.height),this.list[E]=w,this.emit(c.ADD,E,w),this.emit(c.ADD_KEY+E,w)),w},addDynamicTexture:function(E,A,R){var w=null;return typeof E=="string"&&!this.exists(E)?w=new a(this,E,A,R):(w=E,E=w.key),this.checkKey(E)?(this.list[E]=w,this.emit(c.ADD,E,w),this.emit(c.ADD_KEY+E,w)):w=null,w},addAtlas:function(E,A,R,w){return Array.isArray(R.textures)||Array.isArray(R.frames)?this.addAtlasJSONArray(E,A,R,w):this.addAtlasJSONHash(E,A,R,w)},addAtlasJSONArray:function(E,A,R,w){var O=null;if(A instanceof S?(E=O.key,O=A):this.checkKey(E)&&(O=this.create(E,A)),O){if(Array.isArray(R))for(var F=R.length===1,b=0;b<O.source.length;b++){var I=F?R[0]:R[b];T.JSONArray(O,b,I)}else T.JSONArray(O,0,R);w&&O.setDataSource(w),this.emit(c.ADD,E,O),this.emit(c.ADD_KEY+E,O)}return O},addAtlasJSONHash:function(E,A,R,w){var O=null;if(A instanceof S?(E=O.key,O=A):this.checkKey(E)&&(O=this.create(E,A)),O){if(Array.isArray(R))for(var F=0;F<R.length;F++)T.JSONHash(O,F,R[F]);else T.JSONHash(O,0,R);w&&O.setDataSource(w),this.emit(c.ADD,E,O),this.emit(c.ADD_KEY+E,O)}return O},addAtlasXML:function(E,A,R,w){var O=null;return A instanceof S?(E=O.key,O=A):this.checkKey(E)&&(O=this.create(E,A)),O&&(T.AtlasXML(O,0,R),w&&O.setDataSource(w),this.emit(c.ADD,E,O),this.emit(c.ADD_KEY+E,O)),O},addUnityAtlas:function(E,A,R,w){var O=null;return A instanceof S?(E=O.key,O=A):this.checkKey(E)&&(O=this.create(E,A)),O&&(T.UnityYAML(O,0,R),w&&O.setDataSource(w),this.emit(c.ADD,E,O),this.emit(c.ADD_KEY+E,O)),O},addSpriteSheet:function(E,A,R,w){var O=null;if(A instanceof S?(E=O.key,O=A):this.checkKey(E)&&(O=this.create(E,A)),O){var F=O.source[0].width,b=O.source[0].height;T.SpriteSheet(O,0,0,0,F,b,R),w&&O.setDataSource(w),this.emit(c.ADD,E,O),this.emit(c.ADD_KEY+E,O)}return O},addSpriteSheetFromAtlas:function(E,A){if(!this.checkKey(E))return null;var R=m(A,"atlas",null),w=m(A,"frame",null);if(!(!R||!w)){var O=this.get(R),F=O.get(w);if(F){var b=this.create(E,F.source.image);return F.trimmed?T.SpriteSheetFromAtlas(b,F,A):T.SpriteSheet(b,0,F.cutX,F.cutY,F.cutWidth,F.cutHeight,A),this.emit(c.ADD,E,b),this.emit(c.ADD_KEY+E,b),b}}},create:function(E,A,R,w){var O=null;return this.checkKey(E)&&(O=new S(this,E,A,R,w),this.list[E]=O),O},exists:function(E){return this.list.hasOwnProperty(E)},get:function(E){return E===void 0&&(E="__DEFAULT"),this.list[E]?this.list[E]:E instanceof S?E:E instanceof h?E.texture:this.list.__MISSING},cloneFrame:function(E,A){if(this.list[E])return this.list[E].get(A).clone()},getFrame:function(E,A){if(this.list[E])return this.list[E].get(A)},parseFrame:function(E){if(E){if(typeof E=="string")return this.getFrame(E);if(Array.isArray(E)&&E.length===2)return this.getFrame(E[0],E[1]);if(C(E))return this.getFrame(E.key,E.frame);if(E instanceof S)return E.get();if(E instanceof h)return E}else return},getTextureKeys:function(){var E=[];for(var A in this.list)A!=="__DEFAULT"&&A!=="__MISSING"&&A!=="__WHITE"&&E.push(A);return E},getPixel:function(E,A,R,w){var O=this.getFrame(R,w);if(O){E-=O.x,A-=O.y;var F=O.data.cut;if(E+=F.x,A+=F.y,E>=F.x&&E<F.r&&A>=F.y&&A<F.b){var b=this._tempContext;b.clearRect(0,0,1,1),b.drawImage(O.source.image,E,A,1,1,0,0,1,1);var I=b.getImageData(0,0,1,1);return new u(I.data[0],I.data[1],I.data[2],I.data[3])}}return null},getPixelAlpha:function(E,A,R,w){var O=this.getFrame(R,w);if(O){E-=O.x,A-=O.y;var F=O.data.cut;if(E+=F.x,A+=F.y,E>=F.x&&E<F.r&&A>=F.y&&A<F.b){var b=this._tempContext;b.clearRect(0,0,1,1),b.drawImage(O.source.image,E,A,1,1,0,0,1,1);var I=b.getImageData(0,0,1,1);return I.data[3]}}return null},setTexture:function(E,A,R){return this.list[A]&&(E.texture=this.list[A],E.frame=E.texture.get(R)),E},renameTexture:function(E,A){var R=this.get(E);return R&&E!==A?(R.key=A,this.list[A]=R,delete this.list[E],!0):!1},each:function(E,A){for(var R=[null],w=1;w<arguments.length;w++)R.push(arguments[w]);for(var O in this.list)R[0]=this.list[O],E.apply(A,R)},resetStamp:function(E,A){E===void 0&&(E=1),A===void 0&&(A=16777215);var R=this.stamp;return R.setCrop(),R.setPosition(0),R.setAngle(0),R.setScale(1),R.setAlpha(E),R.setTint(A),R},destroy:function(){for(var E in this.list)this.list[E].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,n.remove(this._tempCanvas)}});s.exports=M},32547:(s,g,e)=>{var n=e(61068),p=e(56694),f=e(28621),u=e(27394),l=new p({initialize:function(o,c,h,d,v){v===void 0&&(v=!1);var m=o.manager.game;this.renderer=m.renderer,this.texture=o,this.source=c,this.image=c.compressed?null:c,this.compressionAlgorithm=c.compressed?c.format:null,this.resolution=1,this.width=h||c.naturalWidth||c.videoWidth||c.width||0,this.height=d||c.naturalHeight||c.videoHeight||c.height||0,this.scaleMode=u.DEFAULT,this.isCanvas=c instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&c instanceof HTMLVideoElement,this.isRenderTexture=c.type==="RenderTexture"||c.type==="DynamicTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&c instanceof WebGLTexture,this.isPowerOf2=f(this.width,this.height),this.glTexture=null,this.flipY=v,this.init(m)},init:function(a){var o=this.renderer;if(o){var c=this.source;if(o.gl){var h=this.image,d=this.flipY,v=this.width,m=this.height,y=this.scaleMode;this.isCanvas?this.glTexture=o.createCanvasTexture(h,!1,d):this.isVideo?this.glTexture=o.createVideoTexture(h,!1,d):this.isRenderTexture?this.glTexture=o.createTextureFromSource(null,v,m,y):this.isGLTexture?this.glTexture=c:this.compressionAlgorithm?this.glTexture=o.createTextureFromSource(c):this.glTexture=o.createTextureFromSource(h,v,m,y)}else this.isRenderTexture&&(this.image=c.canvas)}a.config.antialias||this.setFilter(1)},setFilter:function(a){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,a),this.scaleMode=a},setFlipY:function(a){return a===void 0&&(a=!0),this.flipY=a,this},update:function(){var a=this.renderer,o=this.image,c=this.flipY,h=a.gl;h&&this.isCanvas?this.glTexture=a.updateCanvasTexture(o,this.glTexture,c):h&&this.isVideo&&(this.glTexture=a.updateVideoTexture(o,this.glTexture,c))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&n.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});s.exports=l},65154:s=>{var g={LINEAR:0,NEAREST:1};s.exports=g},49644:s=>{s.exports="addtexture"},29569:s=>{s.exports="addtexture-"},60079:s=>{s.exports="onerror"},72665:s=>{s.exports="onload"},93006:s=>{s.exports="ready"},69018:s=>{s.exports="removetexture"},85549:s=>{s.exports="removetexture-"},38203:(s,g,e)=>{s.exports={ADD:e(49644),ADD_KEY:e(29569),ERROR:e(60079),LOAD:e(72665),READY:e(93006),REMOVE:e(69018),REMOVE_KEY:e(85549)}},87499:(s,g,e)=>{var n=e(98611),p=e(65154),f={CanvasTexture:e(17487),DynamicTexture:e(845),Events:e(38203),FilterMode:p,Frame:e(82047),Parsers:e(69150),Texture:e(31673),TextureManager:e(6237),TextureSource:e(32547)};f=n(!1,f,p),s.exports=f},35082:s=>{var g=function(e,n,p){if(!p.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var f=e.source[n];e.add("__BASE",n,0,0,f.width,f.height);for(var u=p.getElementsByTagName("SubTexture"),l,a=0;a<u.length;a++){var o=u[a].attributes,c=o.name.value,h=parseInt(o.x.value,10),d=parseInt(o.y.value,10),v=parseInt(o.width.value,10),m=parseInt(o.height.value,10);if(l=e.add(c,n,h,d,v,m),o.frameX){var y=Math.abs(parseInt(o.frameX.value,10)),C=Math.abs(parseInt(o.frameY.value,10)),T=parseInt(o.frameWidth.value,10),P=parseInt(o.frameHeight.value,10);l.setTrim(v,m,y,C,T,P)}}return e};s.exports=g},83332:s=>{var g=function(e,n){var p=e.source[n];return e.add("__BASE",n,0,0,p.width,p.height),e};s.exports=g},21560:s=>{var g=function(e,n){var p=e.source[n];return e.add("__BASE",n,0,0,p.width,p.height),e};s.exports=g},64423:(s,g,e)=>{var n=e(32742),p=function(f,u,l){if(!l.frames&&!l.textures){console.warn("Invalid Texture Atlas JSON Array");return}var a=f.source[u];f.add("__BASE",u,0,0,a.width,a.height);for(var o=Array.isArray(l.textures)?l.textures[u].frames:l.frames,c,h=0;h<o.length;h++){var d=o[h];if(c=f.add(d.filename,u,d.frame.x,d.frame.y,d.frame.w,d.frame.h),!c){console.warn("Invalid atlas json, frame already exists: "+d.filename);continue}d.trimmed&&c.setTrim(d.sourceSize.w,d.sourceSize.h,d.spriteSourceSize.x,d.spriteSourceSize.y,d.spriteSourceSize.w,d.spriteSourceSize.h),d.rotated&&(c.rotated=!0,c.updateUVsInverted());var v=d.anchor||d.pivot;v&&(c.customPivot=!0,c.pivotX=v.x,c.pivotY=v.y),c.customData=n(d)}for(var m in l)m!=="frames"&&(Array.isArray(l[m])?f.customData[m]=l[m].slice(0):f.customData[m]=l[m]);return f};s.exports=p},17264:(s,g,e)=>{var n=e(32742),p=function(f,u,l){if(!l.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var a=f.source[u];f.add("__BASE",u,0,0,a.width,a.height);var o=l.frames,c;for(var h in o)if(!!o.hasOwnProperty(h)){var d=o[h];if(c=f.add(h,u,d.frame.x,d.frame.y,d.frame.w,d.frame.h),!c){console.warn("Invalid atlas json, frame already exists: "+h);continue}d.trimmed&&c.setTrim(d.sourceSize.w,d.sourceSize.h,d.spriteSourceSize.x,d.spriteSourceSize.y,d.spriteSourceSize.w,d.spriteSourceSize.h),d.rotated&&(c.rotated=!0,c.updateUVsInverted());var v=d.anchor||d.pivot;v&&(c.customPivot=!0,c.pivotX=v.x,c.pivotY=v.y),c.customData=n(d)}for(var m in l)m!=="frames"&&(Array.isArray(l[m])?f.customData[m]=l[m].slice(0):f.customData[m]=l[m]);return f};s.exports=p},67409:s=>{var g=function(e){var n=[171,75,84,88,32,49,49,187,13,10,26,10],p,f=new Uint8Array(e,0,12);for(p=0;p<f.length;p++)if(f[p]!==n[p]){console.warn("KTXParser - Invalid file format");return}var u=Uint32Array.BYTES_PER_ELEMENT,l=new DataView(e,12,13*u),a=l.getUint32(0,!0)===67305985,o=l.getUint32(1*u,a);if(o!==0){console.warn("KTXParser - Only compressed formats supported");return}var c=l.getUint32(4*u,a),h=l.getUint32(6*u,a),d=l.getUint32(7*u,a),v=Math.max(1,l.getUint32(11*u,a)),m=l.getUint32(12*u,a),y=new Array(v),C=12+13*4+m,T=h,P=d;for(p=0;p<v;p++){var S=new Int32Array(e,C,1)[0];C+=4,y[p]={data:new Uint8Array(e,C,S),width:T,height:P},T=Math.max(1,T>>1),P=Math.max(1,P>>1),C+=S}return{mipmaps:y,width:h,height:d,internalFormat:c,compressed:!0,generateMipmap:!1}};s.exports=g},24904:s=>{function g(E,A,R,w,O,F,b){return b===void 0&&(b=16),Math.floor((E+R)/O)*Math.floor((A+w)/F)*b}function e(E,A){return E=Math.max(E,16),A=Math.max(A,8),E*A/4}function n(E,A){return E=Math.max(E,8),A=Math.max(A,8),E*A/2}function p(E,A){return g(E,A,3,3,4,4,8)}function f(E,A){return g(E,A,3,3,4,4)}function u(E,A){return g(E,A,4,3,5,4)}function l(E,A){return g(E,A,4,4,5,5)}function a(E,A){return g(E,A,5,4,6,5)}function o(E,A){return g(E,A,5,5,6,6)}function c(E,A){return g(E,A,7,4,8,5)}function h(E,A){return g(E,A,7,5,8,6)}function d(E,A){return g(E,A,7,7,8,8)}function v(E,A){return g(E,A,9,4,10,5)}function m(E,A){return g(E,A,9,5,10,6)}function y(E,A){return g(E,A,9,7,10,8)}function C(E,A){return g(E,A,9,9,10,10)}function T(E,A){return g(E,A,11,9,12,10)}function P(E,A){return g(E,A,11,11,12,12)}var S={0:{sizeFunc:e,glFormat:35841},1:{sizeFunc:e,glFormat:35843},2:{sizeFunc:n,glFormat:35840},3:{sizeFunc:n,glFormat:35842},6:{sizeFunc:p,glFormat:36196},7:{sizeFunc:p,glFormat:33776},8:{sizeFunc:f,glFormat:33777},9:{sizeFunc:f,glFormat:33778},11:{sizeFunc:f,glFormat:33779},22:{sizeFunc:p,glFormat:37492},23:{sizeFunc:f,glFormat:37496},24:{sizeFunc:p,glFormat:37494},25:{sizeFunc:p,glFormat:37488},26:{sizeFunc:f,glFormat:37490},27:{sizeFunc:f,glFormat:37808},28:{sizeFunc:u,glFormat:37809},29:{sizeFunc:l,glFormat:37810},30:{sizeFunc:a,glFormat:37811},31:{sizeFunc:o,glFormat:37812},32:{sizeFunc:c,glFormat:37813},33:{sizeFunc:h,glFormat:37814},34:{sizeFunc:d,glFormat:37815},35:{sizeFunc:v,glFormat:37816},36:{sizeFunc:m,glFormat:37817},37:{sizeFunc:y,glFormat:37818},38:{sizeFunc:C,glFormat:37819},39:{sizeFunc:T,glFormat:37820},40:{sizeFunc:P,glFormat:37821}},M=function(E){for(var A=new Uint32Array(E,0,13),R=A[2],w=S[R].glFormat,O=S[R].sizeFunc,F=A[11],b=A[7],I=A[6],N=52+A[12],z=new Uint8Array(E,N),U=new Array(F),W=0,D=b,V=I,L=0;L<F;L++){var B=O(D,V);U[L]={data:new Uint8Array(z.buffer,z.byteOffset+W,B),width:D,height:V},D=Math.max(1,D>>1),V=Math.max(1,V>>1),W+=B}return{mipmaps:U,width:b,height:I,internalFormat:w,compressed:!0,generateMipmap:!1}};s.exports=M},6143:(s,g,e)=>{var n=e(72632),p=function(f,u,l,a,o,c,h){var d=n(h,"frameWidth",null),v=n(h,"frameHeight",d);if(d===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var m=f.source[u];f.add("__BASE",u,0,0,m.width,m.height);var y=n(h,"startFrame",0),C=n(h,"endFrame",-1),T=n(h,"margin",0),P=n(h,"spacing",0),S=Math.floor((o-T+P)/(d+P)),M=Math.floor((c-T+P)/(v+P)),E=S*M;E===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",f.key),(y>E||y<-E)&&(y=0),y<0&&(y=E+y),(C===-1||C>E||C<y)&&(C=E);for(var A=T,R=T,w=0,O=0,F=0,b=0;b<E;b++){w=0,O=0;var I=A+d,N=R+v;I>o&&(w=I-o),N>c&&(O=N-c),b>=y&&b<=C&&(f.add(F,u,l+A,a+R,d-w,v-O),F++),A+=d+P,A+d>o&&(A=T,R+=v+P)}return f};s.exports=p},20030:(s,g,e)=>{var n=e(72632),p=function(f,u,l){var a=n(l,"frameWidth",null),o=n(l,"frameHeight",a);if(!a)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var c=f.source[0];f.add("__BASE",0,0,0,c.width,c.height);var h=n(l,"startFrame",0),d=n(l,"endFrame",-1),v=n(l,"margin",0),m=n(l,"spacing",0),y=u.cutX,C=u.cutY,T=u.cutWidth,P=u.cutHeight,S=u.realWidth,M=u.realHeight,E=Math.floor((S-v+m)/(a+m)),A=Math.floor((M-v+m)/(o+m)),R=E*A,w=u.x,O=a-w,F=a-(S-T-w),b=u.y,I=o-b,N=o-(M-P-b);(h>R||h<-R)&&(h=0),h<0&&(h=R+h),d!==-1&&(R=h+(d+1));for(var z,U=v,W=v,D=0,V=0,L=0;L<A;L++){for(var B=L===0,G=L===A-1,Y=0;Y<E;Y++){var X=Y===0,k=Y===E-1;if(z=f.add(D,V,y+U,C+W,a,o),X||B||k||G){var H=X?w:0,K=B?b:0,j=0,$=0;X&&(j+=a-O),k&&(j+=a-F),B&&($+=o-I),G&&($+=o-N);var Q=a-j,_=o-$;z.cutWidth=Q,z.cutHeight=_,z.setTrim(a,o,H,K,Q,_)}U+=m,X?U+=O:k?U+=F:U+=a,D++}U=v,W+=m,B?W+=I:G?W+=N:W+=o}return f};s.exports=p},89187:s=>{var g=0,e=function(p,f,u,l){var a=g-l.y-l.height;p.add(u,f,l.x,a,l.width,l.height)},n=function(p,f,u){var l=p.source[f];p.add("__BASE",f,0,0,l.width,l.height),g=l.height;for(var a=u.split(`
`),o=/^[ ]*(- )*(\w+)+[: ]+(.*)/,c="",h="",d={x:0,y:0,width:0,height:0},v=0;v<a.length;v++){var m=a[v].match(o);if(!!m){var y=m[1]==="- ",C=m[2],T=m[3];if(y&&(h!==c&&(e(p,f,h,d),c=h),d={x:0,y:0,width:0,height:0}),C==="name"){h=T;continue}switch(C){case"x":case"y":case"width":case"height":d[C]=parseInt(T,10);break}}}return h!==c&&e(p,f,h,d),p};s.exports=n},69150:(s,g,e)=>{s.exports={AtlasXML:e(35082),Canvas:e(83332),Image:e(21560),JSONArray:e(64423),JSONHash:e(17264),KTXParser:e(67409),PVRParser:e(24904),SpriteSheet:e(6143),SpriteSheetFromAtlas:e(20030),UnityYAML:e(89187)}},93560:s=>{s.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},97042:(s,g,e)=>{var n=e(56694),p=new n({initialize:function(u,l,a,o,c,h,d){(a===void 0||a<=0)&&(a=32),(o===void 0||o<=0)&&(o=32),c===void 0&&(c=0),h===void 0&&(h=0),this.name=u,this.firstgid=l|0,this.imageWidth=a|0,this.imageHeight=o|0,this.imageMargin=c|0,this.imageSpacing=h|0,this.properties=d||{},this.images=[],this.total=0},containsImageIndex:function(f){return f>=this.firstgid&&f<this.firstgid+this.total},addImage:function(f,u){return this.images.push({gid:f,image:u}),this.total++,this}});s.exports=p},46422:(s,g,e)=>{var n=e(56694),p=new n({initialize:function(u){if(this.gids=[],u!==void 0)for(var l=0;l<u.length;++l)for(var a=u[l],o=0;o<a.total;++o)this.gids[a.firstgid+o]=a;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(f){this.gids=f?this._gids:void 0}},getTypeIncludingTile:function(f){if(f.type!==void 0&&f.type!=="")return f.type;if(!(!this.gids||f.gid===void 0)){var u=this.gids[f.gid];if(!!u){var l=u.getTileData(f.gid);if(!!l)return l.type}}},setTextureAndFrame:function(f,u,l,a){if(u===null&&this.gids&&a.gid!==void 0){var o=this.gids[a.gid];o&&(u===null&&o.image!==void 0&&(u=o.image.key),l===null&&(l=a.gid-o.firstgid),f.scene.textures.getFrame(u,l)||(u=null,l=null))}f.setTexture(u,l)},setPropertiesFromTiledObject:function(f,u){if(this.gids!==void 0&&u.gid!==void 0){var l=this.gids[u.gid];l!==void 0&&this.setFromJSON(f,l.getTileProperties(u.gid))}this.setFromJSON(f,u.properties)},setFromJSON:function(f,u){if(!!u){if(Array.isArray(u)){u.forEach(function(a){f.setData(a.name,a.value)});return}for(var l in u)f[l]!==void 0?f[l]=u[l]:f.setData(l,u[l])}}});s.exports=p},15043:(s,g,e)=>{var n=e(93560),p=e(16586),f=e(90715),u=e(89797),l=function(a,o,c,h,d,v,m,y){c===void 0&&(c=32),h===void 0&&(h=32),d===void 0&&(d=10),v===void 0&&(v=10),y===void 0&&(y=!1);var C=null;if(Array.isArray(m)){var T=o!==void 0?o:"map";C=f(T,n.ARRAY_2D,m,c,h,y)}else if(o!==void 0){var P=a.cache.tilemap.get(o);P?C=f(o,P.format,P.data,c,h,y):console.warn("No map data found for key "+o)}return C===null&&(C=new p({tileWidth:c,tileHeight:h,width:d,height:v})),new u(a,C)};s.exports=l},29633:(s,g,e)=>{var n=e(56694),p=e(64937),f=e(12920),u=e(28699),l=e(66658),a=new n({Mixins:[p.Alpha,p.Flip,p.Visible],initialize:function(c,h,d,v,m,y,C,T){this.layer=c,this.index=h,this.x=d,this.y=v,this.width=m,this.height=y,this.right,this.bottom,this.baseWidth=C!==void 0?C:m,this.baseHeight=T!==void 0?T:y,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(o,c){return!(o<this.pixelX||c<this.pixelY||o>this.right||c>this.bottom)},copy:function(o){return this.index=o.index,this.alpha=o.alpha,this.properties=u(o.properties),this.visible=o.visible,this.setFlip(o.flipX,o.flipY),this.tint=o.tint,this.rotation=o.rotation,this.collideUp=o.collideUp,this.collideDown=o.collideDown,this.collideLeft=o.collideLeft,this.collideRight=o.collideRight,this.collisionCallback=o.collisionCallback,this.collisionCallbackContext=o.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(o){var c=this.tilemapLayer;if(c){var h=c.tileToWorldXY(this.x,this.y,void 0,o);return h.x}return this.x*this.baseWidth},getRight:function(o){var c=this.tilemapLayer;return c?this.getLeft(o)+this.width*c.scaleX:this.getLeft(o)+this.width},getTop:function(o){var c=this.tilemapLayer;if(c){var h=c.tileToWorldXY(this.x,this.y,void 0,o);return h.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(o){var c=this.tilemapLayer;return c?this.getTop(o)+this.height*c.scaleY:this.getTop(o)+this.height},getBounds:function(o,c){return c===void 0&&(c=new l),c.x=this.getLeft(o),c.y=this.getTop(o),c.width=this.getRight(o)-c.x,c.height=this.getBottom(o)-c.y,c},getCenterX:function(o){return(this.getLeft(o)+this.getRight(o))/2},getCenterY:function(o){return(this.getTop(o)+this.getBottom(o))/2},intersects:function(o,c,h,d){return!(h<=this.pixelX||d<=this.pixelY||o>=this.right||c>=this.bottom)},isInteresting:function(o,c){return o&&c?this.canCollide||this.hasInterestingFace:o?this.collides:c?this.hasInterestingFace:!1},resetCollision:function(o){if(o===void 0&&(o=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,o){var c=this.tilemapLayer;c&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(o,c,h,d,v){if(c===void 0&&(c=o),h===void 0&&(h=o),d===void 0&&(d=o),v===void 0&&(v=!0),this.collideLeft=o,this.collideRight=c,this.collideUp=h,this.collideDown=d,this.faceLeft=o,this.faceRight=c,this.faceTop=h,this.faceBottom=d,v){var m=this.tilemapLayer;m&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(o,c){return o===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=o,this.collisionCallbackContext=c),this},setSize:function(o,c,h,d){return o!==void 0&&(this.width=o),c!==void 0&&(this.height=c),h!==void 0&&(this.baseWidth=h),d!==void 0&&(this.baseHeight=d),this.updatePixelXY(),this},updatePixelXY:function(){var o=this.layer.orientation;if(o===f.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(o===f.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(o===f.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(o===f.HEXAGONAL){var c=this.layer.staggerAxis,h=this.layer.staggerIndex,d=this.layer.hexSideLength,v,m;c==="y"?(m=(this.baseHeight-d)/2+d,h==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*m):c==="x"&&(v=(this.baseWidth-d)/2+d,this.pixelX=this.x*v,h==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var o=this.layer.tilemapLayer;if(o){var c=o.gidMap[this.index];if(c)return c}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var o=this.tilemapLayer;return o?o.tilemap:null}}});s.exports=a},89797:(s,g,e)=>{var n=e(14556),p=e(56694),f=e(75606),u=e(93560),l=e(72632),a=e(94990),o=e(46422),c=e(12920),h=e(52257),d=e(72677),v=e(13747),m=e(29633),y=e(5047),C=e(87177),T=e(47975),P=new p({initialize:function(M,E){this.scene=M,this.tileWidth=E.tileWidth,this.tileHeight=E.tileHeight,this.width=E.width,this.height=E.height,this.orientation=E.orientation,this.renderOrder=E.renderOrder,this.format=E.format,this.version=E.version,this.properties=E.properties,this.widthInPixels=E.widthInPixels,this.heightInPixels=E.heightInPixels,this.imageCollections=E.imageCollections,this.images=E.images,this.layers=E.layers,this.tiles=E.tiles,this.tilesets=E.tilesets,this.objects=E.objects,this.currentLayerIndex=0,this.hexSideLength=E.hexSideLength;var A=this.orientation;this._convert={WorldToTileXY:y.GetWorldToTileXYFunction(A),WorldToTileX:y.GetWorldToTileXFunction(A),WorldToTileY:y.GetWorldToTileYFunction(A),TileToWorldXY:y.GetTileToWorldXYFunction(A),TileToWorldX:y.GetTileToWorldXFunction(A),TileToWorldY:y.GetTileToWorldYFunction(A),GetTileCorners:y.GetTileCornersFunction(A)}},setRenderOrder:function(S){var M=["right-down","left-down","right-up","left-up"];return typeof S=="number"&&(S=M[S]),M.indexOf(S)>-1&&(this.renderOrder=S),this},addTilesetImage:function(S,M,E,A,R,w,O,F){if(S===void 0)return null;if(M==null&&(M=S),!this.scene.sys.textures.exists(M))return console.warn("Invalid Tileset Image: "+M),null;var b=this.scene.sys.textures.get(M),I=this.getTilesetIndex(S);if(I===null&&this.format===u.TILED_JSON)return console.warn("No data found for Tileset: "+S),null;var N=this.tilesets[I];return N?(N.setTileSize(E,A),N.setSpacing(R,w),N.setImage(b),N):(E===void 0&&(E=this.tileWidth),A===void 0&&(A=this.tileHeight),R===void 0&&(R=0),w===void 0&&(w=0),O===void 0&&(O=0),F===void 0&&(F={x:0,y:0}),N=new T(S,O,E,A,R,w,void 0,void 0,F),N.setImage(b),this.tilesets.push(N),this.tiles=n(this),N)},copy:function(S,M,E,A,R,w,O,F){return F=this.getLayer(F),F!==null?(y.Copy(S,M,E,A,R,w,O,F),this):null},createBlankLayer:function(S,M,E,A,R,w,O,F){E===void 0&&(E=0),A===void 0&&(A=0),R===void 0&&(R=this.width),w===void 0&&(w=this.height),O===void 0&&(O=this.tileWidth),F===void 0&&(F=this.tileHeight);var b=this.getLayerIndex(S);if(b!==null)return console.warn("Invalid Tilemap Layer ID: "+S),null;for(var I=new a({name:S,tileWidth:O,tileHeight:F,width:R,height:w,orientation:this.orientation}),N,z=0;z<w;z++){N=[];for(var U=0;U<R;U++)N.push(new m(I,-1,U,z,O,F,this.tileWidth,this.tileHeight));I.data.push(N)}this.layers.push(I),this.currentLayerIndex=this.layers.length-1;var W=new C(this.scene,this,this.currentLayerIndex,M,E,A);return W.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(W),W},createLayer:function(S,M,E,A){var R=this.getLayerIndex(S);if(R===null)return console.warn("Invalid Tilemap Layer ID: "+S),typeof S=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var w=this.layers[R];if(w.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+S),null;this.currentLayerIndex=R,E===void 0&&(E=w.x),A===void 0&&(A=w.y);var O=new C(this.scene,this,R,M,E,A);return O.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(O),O},createFromObjects:function(S,M,E){E===void 0&&(E=!0);var A=[],R=this.getObjectLayer(S);if(!R)return console.warn("createFromObjects: Invalid objectLayerName given: "+S),A;var w=new o(E?this.tilesets:void 0);Array.isArray(M)||(M=[M]);for(var O=R.objects,F=0;F<M.length;F++){var b=M[F],I=l(b,"id",null),N=l(b,"gid",null),z=l(b,"name",null),U=l(b,"type",null);w.enabled=!l(b,"ignoreTileset",null);for(var W,D=[],V=0;V<O.length;V++)W=O[V],(I===null&&N===null&&z===null&&U===null||I!==null&&W.id===I||N!==null&&W.gid===N||z!==null&&W.name===z||U!==null&&w.getTypeIncludingTile(W)===U)&&D.push(W);for(var L=l(b,"classType",v),B=l(b,"scene",this.scene),G=l(b,"container",null),Y=l(b,"key",null),X=l(b,"frame",null),k=0;k<D.length;k++){W=D[k];var H=new L(B);if(H.setName(W.name),H.setPosition(W.x,W.y),w.setTextureAndFrame(H,Y,X,W),W.width&&(H.displayWidth=W.width),W.height&&(H.displayHeight=W.height),this.orientation===c.ISOMETRIC){var K=this.tileWidth/this.tileHeight,j={x:H.x-H.y,y:(H.x+H.y)/K};H.x=j.x,H.y=j.y}var $={x:H.originX*W.width,y:(H.originY-(W.gid?1:0))*W.height};if(W.rotation){var Q=f(W.rotation);h($,Q),H.rotation=Q}H.x+=$.x,H.y+=$.y,(W.flippedHorizontal!==void 0||W.flippedVertical!==void 0)&&H.setFlip(W.flippedHorizontal,W.flippedVertical),W.visible||(H.visible=!1),w.setPropertiesFromTiledObject(H,W),G?G.add(H):B.add.existing(H),A.push(H)}}return A},createFromTiles:function(S,M,E,A,R,w){return w=this.getLayer(w),w===null?null:y.CreateFromTiles(S,M,E,A,R,w)},fill:function(S,M,E,A,R,w,O){return w===void 0&&(w=!0),O=this.getLayer(O),O===null?null:(y.Fill(S,M,E,A,R,w,O),this)},filterObjects:function(S,M,E){if(typeof S=="string"){var A=S;if(S=this.getObjectLayer(S),!S)return console.warn("No object layer found with the name: "+A),null}return S.objects.filter(M,E)},filterTiles:function(S,M,E,A,R,w,O,F){return F=this.getLayer(F),F===null?null:y.FilterTiles(S,M,E,A,R,w,O,F)},findByIndex:function(S,M,E,A){return A=this.getLayer(A),A===null?null:y.FindByIndex(S,M,E,A)},findObject:function(S,M,E){if(typeof S=="string"){var A=S;if(S=this.getObjectLayer(S),!S)return console.warn("No object layer found with the name: "+A),null}return S.objects.find(M,E)||null},findTile:function(S,M,E,A,R,w,O,F){return F=this.getLayer(F),F===null?null:y.FindTile(S,M,E,A,R,w,O,F)},forEachTile:function(S,M,E,A,R,w,O,F){return F=this.getLayer(F),F===null?null:(y.ForEachTile(S,M,E,A,R,w,O,F),this)},getImageIndex:function(S){return this.getIndex(this.images,S)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(S){return S.name})},getIndex:function(S,M){for(var E=0;E<S.length;E++)if(S[E].name===M)return E;return null},getLayer:function(S){var M=this.getLayerIndex(S);return M!==null?this.layers[M]:null},getObjectLayer:function(S){var M=this.getIndex(this.objects,S);return M!==null?this.objects[M]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(S){return S.name})},getLayerIndex:function(S){return S===void 0?this.currentLayerIndex:typeof S=="string"?this.getLayerIndexByName(S):typeof S=="number"&&S<this.layers.length?S:S instanceof C&&S.tilemap===this?S.layerIndex:null},getLayerIndexByName:function(S){return this.getIndex(this.layers,S)},getTileAt:function(S,M,E,A){return A=this.getLayer(A),A===null?null:y.GetTileAt(S,M,E,A)},getTileAtWorldXY:function(S,M,E,A,R){return R=this.getLayer(R),R===null?null:y.GetTileAtWorldXY(S,M,E,A,R)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(S){return S.name})},getTilesWithin:function(S,M,E,A,R,w){return w=this.getLayer(w),w===null?null:y.GetTilesWithin(S,M,E,A,R,w)},getTilesWithinShape:function(S,M,E,A){return A=this.getLayer(A),A===null?null:y.GetTilesWithinShape(S,M,E,A)},getTilesWithinWorldXY:function(S,M,E,A,R,w,O){return O=this.getLayer(O),O===null?null:y.GetTilesWithinWorldXY(S,M,E,A,R,w,O)},getTileset:function(S){var M=this.getIndex(this.tilesets,S);return M!==null?this.tilesets[M]:null},getTilesetIndex:function(S){return this.getIndex(this.tilesets,S)},hasTileAt:function(S,M,E){return E=this.getLayer(E),E===null?null:y.HasTileAt(S,M,E)},hasTileAtWorldXY:function(S,M,E,A){return A=this.getLayer(A),A===null?null:y.HasTileAtWorldXY(S,M,E,A)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(S){this.setLayer(S)}},putTileAt:function(S,M,E,A,R){return A===void 0&&(A=!0),R=this.getLayer(R),R===null?null:y.PutTileAt(S,M,E,A,R)},putTileAtWorldXY:function(S,M,E,A,R,w){return A===void 0&&(A=!0),w=this.getLayer(w),w===null?null:y.PutTileAtWorldXY(S,M,E,A,R,w)},putTilesAt:function(S,M,E,A,R){return A===void 0&&(A=!0),R=this.getLayer(R),R===null?null:(y.PutTilesAt(S,M,E,A,R),this)},randomize:function(S,M,E,A,R,w){return w=this.getLayer(w),w===null?null:(y.Randomize(S,M,E,A,R,w),this)},calculateFacesAt:function(S,M,E){return E=this.getLayer(E),E===null?null:(y.CalculateFacesAt(S,M,E),this)},calculateFacesWithin:function(S,M,E,A,R){return R=this.getLayer(R),R===null?null:(y.CalculateFacesWithin(S,M,E,A,R),this)},removeLayer:function(S){var M=this.getLayerIndex(S);if(M!==null){d(this.layers,M);for(var E=M;E<this.layers.length;E++)this.layers[E].tilemapLayer&&this.layers[E].tilemapLayer.layerIndex--;return this.currentLayerIndex===M&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(S){var M=this.getLayerIndex(S);return M!==null?(S=this.layers[M],S.tilemapLayer.destroy(),d(this.layers,M),this.currentLayerIndex===M&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var S=this.layers,M=0;M<S.length;M++)S[M].tilemapLayer&&S[M].tilemapLayer.destroy(!1);return S.length=0,this.currentLayerIndex=0,this},removeTile:function(S,M,E){M===void 0&&(M=-1),E===void 0&&(E=!0);var A=[];Array.isArray(S)||(S=[S]);for(var R=0;R<S.length;R++){var w=S[R];A.push(this.removeTileAt(w.x,w.y,!0,E,w.tilemapLayer)),M>-1&&this.putTileAt(M,w.x,w.y,E,w.tilemapLayer)}return A},removeTileAt:function(S,M,E,A,R){return E===void 0&&(E=!0),A===void 0&&(A=!0),R=this.getLayer(R),R===null?null:y.RemoveTileAt(S,M,E,A,R)},removeTileAtWorldXY:function(S,M,E,A,R,w){return E===void 0&&(E=!0),A===void 0&&(A=!0),w=this.getLayer(w),w===null?null:y.RemoveTileAtWorldXY(S,M,E,A,R,w)},renderDebug:function(S,M,E){return E=this.getLayer(E),E===null?null:(this.orientation===c.ORTHOGONAL&&y.RenderDebug(S,M,E),this)},renderDebugFull:function(S,M){for(var E=this.layers,A=0;A<E.length;A++)y.RenderDebug(S,M,E[A]);return this},replaceByIndex:function(S,M,E,A,R,w,O){return O=this.getLayer(O),O===null?null:(y.ReplaceByIndex(S,M,E,A,R,w,O),this)},setCollision:function(S,M,E,A,R){return M===void 0&&(M=!0),E===void 0&&(E=!0),R===void 0&&(R=!0),A=this.getLayer(A),A===null?null:(y.SetCollision(S,M,E,A,R),this)},setCollisionBetween:function(S,M,E,A,R){return E===void 0&&(E=!0),A===void 0&&(A=!0),R=this.getLayer(R),R===null?null:(y.SetCollisionBetween(S,M,E,A,R),this)},setCollisionByProperty:function(S,M,E,A){return M===void 0&&(M=!0),E===void 0&&(E=!0),A=this.getLayer(A),A===null?null:(y.SetCollisionByProperty(S,M,E,A),this)},setCollisionByExclusion:function(S,M,E,A){return M===void 0&&(M=!0),E===void 0&&(E=!0),A=this.getLayer(A),A===null?null:(y.SetCollisionByExclusion(S,M,E,A),this)},setCollisionFromCollisionGroup:function(S,M,E){return S===void 0&&(S=!0),M===void 0&&(M=!0),E=this.getLayer(E),E===null?null:(y.SetCollisionFromCollisionGroup(S,M,E),this)},setTileIndexCallback:function(S,M,E,A){return A=this.getLayer(A),A===null?null:(y.SetTileIndexCallback(S,M,E,A),this)},setTileLocationCallback:function(S,M,E,A,R,w,O){return O=this.getLayer(O),O===null?null:(y.SetTileLocationCallback(S,M,E,A,R,w,O),this)},setLayer:function(S){var M=this.getLayerIndex(S);return M!==null&&(this.currentLayerIndex=M),this},setBaseTileSize:function(S,M){this.tileWidth=S,this.tileHeight=M,this.widthInPixels=this.width*S,this.heightInPixels=this.height*M;for(var E=0;E<this.layers.length;E++){this.layers[E].baseTileWidth=S,this.layers[E].baseTileHeight=M;for(var A=this.layers[E].data,R=this.layers[E].width,w=this.layers[E].height,O=0;O<w;O++)for(var F=0;F<R;F++){var b=A[O][F];b!==null&&b.setSize(void 0,void 0,S,M)}}return this},setLayerTileSize:function(S,M,E){if(E=this.getLayer(E),E===null)return this;E.tileWidth=S,E.tileHeight=M;for(var A=E.data,R=E.width,w=E.height,O=0;O<w;O++)for(var F=0;F<R;F++){var b=A[O][F];b!==null&&b.setSize(S,M)}return this},shuffle:function(S,M,E,A,R){return R=this.getLayer(R),R===null?null:(y.Shuffle(S,M,E,A,R),this)},swapByIndex:function(S,M,E,A,R,w,O){return O=this.getLayer(O),O===null?null:(y.SwapByIndex(S,M,E,A,R,w,O),this)},tileToWorldX:function(S,M,E){return E=this.getLayer(E),E===null?null:this._convert.TileToWorldX(S,M,E)},tileToWorldY:function(S,M,E){return E=this.getLayer(E),E===null?null:this._convert.TileToWorldY(S,M,E)},tileToWorldXY:function(S,M,E,A,R){return R=this.getLayer(R),R===null?null:this._convert.TileToWorldXY(S,M,E,A,R)},getTileCorners:function(S,M,E,A){return A=this.getLayer(A),A===null?null:this._convert.GetTileCorners(S,M,E,A)},weightedRandomize:function(S,M,E,A,R,w){return w=this.getLayer(w),w===null?null:(y.WeightedRandomize(M,E,A,R,S,w),this)},worldToTileX:function(S,M,E,A){return A=this.getLayer(A),A===null?null:this._convert.WorldToTileX(S,M,E,A)},worldToTileY:function(S,M,E,A){return A=this.getLayer(A),A===null?null:this._convert.WorldToTileY(S,M,E,A)},worldToTileXY:function(S,M,E,A,R,w){return w=this.getLayer(w),w===null?null:this._convert.WorldToTileXY(S,M,E,A,R,w)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});s.exports=P},4843:(s,g,e)=>{var n=e(99325),p=e(15043);n.register("tilemap",function(f){var u=f!==void 0?f:{};return p(this.scene,u.key,u.tileWidth,u.tileHeight,u.width,u.height,u.data,u.insertNull)})},37940:(s,g,e)=>{var n=e(61286),p=e(15043);n.register("tilemap",function(f,u,l,a,o,c,h){return f===null&&(f=void 0),u===null&&(u=void 0),l===null&&(l=void 0),a===null&&(a=void 0),o===null&&(o=void 0),p(this.scene,f,u,l,a,o,c,h)})},87177:(s,g,e)=>{var n=e(56694),p=e(64937),f=e(89980),u=e(5047),l=e(96193),a=e(93736),o=new n({Extends:f,Mixins:[p.Alpha,p.BlendMode,p.ComputedSize,p.Depth,p.Flip,p.GetBounds,p.Mask,p.Origin,p.Pipeline,p.PostPipeline,p.Transform,p.Visible,p.ScrollFactor,l],initialize:function(h,d,v,m,y,C){f.call(this,h,"TilemapLayer"),this.isTilemap=!0,this.tilemap=d,this.layerIndex=v,this.layer=d.layers[v],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=u.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new a,this.setTilesets(m),this.setAlpha(this.layer.alpha),this.setPosition(y,C),this.setOrigin(0,0),this.setSize(d.tileWidth*this.layer.width,d.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(c){var h=[],d=[],v=this.tilemap;Array.isArray(c)||(c=[c]);for(var m=0;m<c.length;m++){var y=c[m];if(typeof y=="string"&&(y=v.getTileset(y)),y){d.push(y);for(var C=y.firstgid,T=0;T<y.total;T++)h[C+T]=y}}this.gidMap=h,this.tileset=d},setRenderOrder:function(c){var h=["right-down","left-down","right-up","left-up"];return typeof c=="string"&&(c=h.indexOf(c)),c>=0&&c<4&&(this._renderOrder=c),this},calculateFacesAt:function(c,h){return u.CalculateFacesAt(c,h,this.layer),this},calculateFacesWithin:function(c,h,d,v){return u.CalculateFacesWithin(c,h,d,v,this.layer),this},createFromTiles:function(c,h,d,v,m){return u.CreateFromTiles(c,h,d,v,m,this.layer)},cull:function(c){return this.cullCallback(this.layer,c,this.culledTiles,this._renderOrder)},copy:function(c,h,d,v,m,y,C){return u.Copy(c,h,d,v,m,y,C,this.layer),this},fill:function(c,h,d,v,m,y){return u.Fill(c,h,d,v,m,y,this.layer),this},filterTiles:function(c,h,d,v,m,y,C){return u.FilterTiles(c,h,d,v,m,y,C,this.layer)},findByIndex:function(c,h,d){return u.FindByIndex(c,h,d,this.layer)},findTile:function(c,h,d,v,m,y,C){return u.FindTile(c,h,d,v,m,y,C,this.layer)},forEachTile:function(c,h,d,v,m,y,C){return u.ForEachTile(c,h,d,v,m,y,C,this.layer),this},setTint:function(c,h,d,v,m,y){c===void 0&&(c=16777215);var C=function(T){T.tint=c};return this.forEachTile(C,this,h,d,v,m,y)},getTileAt:function(c,h,d){return u.GetTileAt(c,h,d,this.layer)},getTileAtWorldXY:function(c,h,d,v){return u.GetTileAtWorldXY(c,h,d,v,this.layer)},getIsoTileAtWorldXY:function(c,h,d,v,m){d===void 0&&(d=!0);var y=this.tempVec;return u.IsometricWorldToTileXY(c,h,!0,y,m,this.layer,d),this.getTileAt(y.x,y.y,v)},getTilesWithin:function(c,h,d,v,m){return u.GetTilesWithin(c,h,d,v,m,this.layer)},getTilesWithinShape:function(c,h,d){return u.GetTilesWithinShape(c,h,d,this.layer)},getTilesWithinWorldXY:function(c,h,d,v,m,y){return u.GetTilesWithinWorldXY(c,h,d,v,m,y,this.layer)},hasTileAt:function(c,h){return u.HasTileAt(c,h,this.layer)},hasTileAtWorldXY:function(c,h,d){return u.HasTileAtWorldXY(c,h,d,this.layer)},putTileAt:function(c,h,d,v){return u.PutTileAt(c,h,d,v,this.layer)},putTileAtWorldXY:function(c,h,d,v,m){return u.PutTileAtWorldXY(c,h,d,v,m,this.layer)},putTilesAt:function(c,h,d,v){return u.PutTilesAt(c,h,d,v,this.layer),this},randomize:function(c,h,d,v,m){return u.Randomize(c,h,d,v,m,this.layer),this},removeTileAt:function(c,h,d,v){return u.RemoveTileAt(c,h,d,v,this.layer)},removeTileAtWorldXY:function(c,h,d,v,m){return u.RemoveTileAtWorldXY(c,h,d,v,m,this.layer)},renderDebug:function(c,h){return u.RenderDebug(c,h,this.layer),this},replaceByIndex:function(c,h,d,v,m,y){return u.ReplaceByIndex(c,h,d,v,m,y,this.layer),this},setSkipCull:function(c){return c===void 0&&(c=!0),this.skipCull=c,this},setCullPadding:function(c,h){return c===void 0&&(c=1),h===void 0&&(h=1),this.cullPaddingX=c,this.cullPaddingY=h,this},setCollision:function(c,h,d,v){return u.SetCollision(c,h,d,this.layer,v),this},setCollisionBetween:function(c,h,d,v){return u.SetCollisionBetween(c,h,d,v,this.layer),this},setCollisionByProperty:function(c,h,d){return u.SetCollisionByProperty(c,h,d,this.layer),this},setCollisionByExclusion:function(c,h,d){return u.SetCollisionByExclusion(c,h,d,this.layer),this},setCollisionFromCollisionGroup:function(c,h){return u.SetCollisionFromCollisionGroup(c,h,this.layer),this},setTileIndexCallback:function(c,h,d){return u.SetTileIndexCallback(c,h,d,this.layer),this},setTileLocationCallback:function(c,h,d,v,m,y){return u.SetTileLocationCallback(c,h,d,v,m,y,this.layer),this},shuffle:function(c,h,d,v){return u.Shuffle(c,h,d,v,this.layer),this},swapByIndex:function(c,h,d,v,m,y){return u.SwapByIndex(c,h,d,v,m,y,this.layer),this},tileToWorldX:function(c,h){return this.tilemap.tileToWorldX(c,h,this)},tileToWorldY:function(c,h){return this.tilemap.tileToWorldY(c,h,this)},tileToWorldXY:function(c,h,d,v){return this.tilemap.tileToWorldXY(c,h,d,v,this)},getTileCorners:function(c,h,d){return this.tilemap.getTileCorners(c,h,d,this)},weightedRandomize:function(c,h,d,v,m){return u.WeightedRandomize(h,d,v,m,c,this.layer),this},worldToTileX:function(c,h,d){return this.tilemap.worldToTileX(c,h,d,this)},worldToTileY:function(c,h,d){return this.tilemap.worldToTileY(c,h,d,this)},worldToTileXY:function(c,h,d,v,m){return this.tilemap.worldToTileXY(c,h,d,v,m,this)},destroy:function(c){c===void 0&&(c=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),c&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],f.prototype.destroy.call(this))}});s.exports=o},17394:(s,g,e)=>{var n=e(69360),p=new n,f=new n,u=new n,l=function(a,o,c,h){var d=o.cull(c),v=d.length,m=c.alpha*o.alpha;if(!(v===0||m<=0)){var y=p,C=f,T=u;C.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY),y.copyFrom(c.matrix);var P=a.currentContext,S=o.gidMap;P.save(),h?(y.multiplyWithOffset(h,-c.scrollX*o.scrollFactorX,-c.scrollY*o.scrollFactorY),C.e=o.x,C.f=o.y,y.multiply(C,T),T.copyToContext(P)):(C.e-=c.scrollX*o.scrollFactorX,C.f-=c.scrollY*o.scrollFactorY,C.copyToContext(P)),(!a.antialias||o.scaleX>1||o.scaleY>1)&&(P.imageSmoothingEnabled=!1);for(var M=0;M<v;M++){var E=d[M],A=S[E.index];if(!!A){var R=A.image.getSourceImage(),w=A.getTileTextureCoordinates(E.index),O=A.tileWidth,F=A.tileHeight;if(!(w===null||O===0||F===0)){var b=O*.5,I=F*.5;w.x+=A.tileOffset.x,w.y+=A.tileOffset.y,P.save(),P.translate(E.pixelX+b,E.pixelY+I),E.rotation!==0&&P.rotate(E.rotation),(E.flipX||E.flipY)&&P.scale(E.flipX?-1:1,E.flipY?-1:1),P.globalAlpha=m*E.alpha,P.drawImage(R,w.x,w.y,O,F,-b,-I,O,F),P.restore()}}}P.restore()}};s.exports=l},96193:(s,g,e)=>{var n=e(72283),p=n,f=n;p=e(51395),f=e(17394),s.exports={renderWebGL:p,renderCanvas:f}},51395:(s,g,e)=>{var n=e(75512),p=function(f,u,l){var a=u.cull(l),o=a.length,c=l.alpha*u.alpha;if(!(o===0||c<=0)){var h=u.gidMap,d=f.pipelines.set(u.pipeline,u),v=n.getTintAppendFloatAlpha,m=u.scrollFactorX,y=u.scrollFactorY,C=u.x,T=u.y,P=u.scaleX,S=u.scaleY;f.pipelines.preBatch(u);for(var M=0;M<o;M++){var E=a[M],A=h[E.index];if(!!A){var R=A.getTileTextureCoordinates(E.index);if(R!==null){var w=A.glTexture,O=d.setTexture2D(w,u),F=A.tileWidth,b=A.tileHeight,I=R.x,N=R.y,z=A.tileWidth*.5,U=A.tileHeight*.5,W=A.tileOffset.x,D=A.tileOffset.y,V=v(E.tint,c*E.alpha);d.batchTexture(u,w,w.width,w.height,C+E.pixelX*P+(z*P-W),T+E.pixelY*S+(U*S-D),E.width,E.height,P,S,E.rotation,E.flipX,E.flipY,m,y,z,U,I,N,F,b,V,V,V,V,!1,0,0,l,null,!0,O)}}}f.pipelines.postBatch(u)}};s.exports=p},47975:(s,g,e)=>{var n=e(56694),p=e(93736),f=new n({initialize:function(l,a,o,c,h,d,v,m,y){(o===void 0||o<=0)&&(o=32),(c===void 0||c<=0)&&(c=32),h===void 0&&(h=0),d===void 0&&(d=0),v===void 0&&(v={}),m===void 0&&(m={}),this.name=l,this.firstgid=a,this.tileWidth=o,this.tileHeight=c,this.tileMargin=h,this.tileSpacing=d,this.tileProperties=v,this.tileData=m,this.tileOffset=new p,y!==void 0&&this.tileOffset.set(y.x,y.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(u){return this.containsTileIndex(u)?this.tileProperties[u-this.firstgid]:null},getTileData:function(u){return this.containsTileIndex(u)?this.tileData[u-this.firstgid]:null},getTileCollisionGroup:function(u){var l=this.getTileData(u);return l&&l.objectgroup?l.objectgroup:null},containsTileIndex:function(u){return u>=this.firstgid&&u<this.firstgid+this.total},getTileTextureCoordinates:function(u){return this.containsTileIndex(u)?this.texCoordinates[u-this.firstgid]:null},setImage:function(u){return this.image=u,this.glTexture=u.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(u,l){return u!==void 0&&(this.tileWidth=u),l!==void 0&&(this.tileHeight=l),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(u,l){return u!==void 0&&(this.tileMargin=u),l!==void 0&&(this.tileSpacing=l),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(u,l){var a=(l-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),o=(u-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(a%1!==0||o%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),a=Math.floor(a),o=Math.floor(o),this.rows=a,this.columns=o,this.total=a*o,this.texCoordinates.length=0;for(var c=this.tileMargin,h=this.tileMargin,d=0;d<this.rows;d++){for(var v=0;v<this.columns;v++)this.texCoordinates.push({x:c,y:h}),c+=this.tileWidth+this.tileSpacing;c=this.tileMargin,h+=this.tileHeight+this.tileSpacing}return this}});s.exports=f},92839:(s,g,e)=>{var n=e(15494),p=function(f,u,l){var a=n(f,u,!0,l),o=n(f,u-1,!0,l),c=n(f,u+1,!0,l),h=n(f-1,u,!0,l),d=n(f+1,u,!0,l),v=a&&a.collides;return v&&(a.faceTop=!0,a.faceBottom=!0,a.faceLeft=!0,a.faceRight=!0),o&&o.collides&&(v&&(a.faceTop=!1),o.faceBottom=!v),c&&c.collides&&(v&&(a.faceBottom=!1),c.faceTop=!v),h&&h.collides&&(v&&(a.faceLeft=!1),h.faceRight=!v),d&&d.collides&&(v&&(a.faceRight=!1),d.faceLeft=!v),a&&!a.collides&&a.resetFaces(),a};s.exports=p},60386:(s,g,e)=>{var n=e(15494),p=e(50811),f=function(u,l,a,o,c){for(var h=null,d=null,v=null,m=null,y=p(u,l,a,o,null,c),C=0;C<y.length;C++){var T=y[C];T&&(T.collides?(h=n(T.x,T.y-1,!0,c),d=n(T.x,T.y+1,!0,c),v=n(T.x-1,T.y,!0,c),m=n(T.x+1,T.y,!0,c),T.faceTop=!(h&&h.collides),T.faceBottom=!(d&&d.collides),T.faceLeft=!(v&&v.collides),T.faceRight=!(m&&m.collides)):T.resetFaces())}};s.exports=f},13125:(s,g,e)=>{var n=e(93736),p=new n,f=function(u,l,a,o){var c=a.tilemapLayer,h=c.cullPaddingX,d=c.cullPaddingY,v=c.tilemap.tileToWorldXY(u,l,p,o,c);return v.x>o.worldView.x+c.scaleX*a.tileWidth*(-h-.5)&&v.x<o.worldView.right+c.scaleX*a.tileWidth*(h-.5)&&v.y>o.worldView.y+c.scaleY*a.tileHeight*(-d-1)&&v.y<o.worldView.bottom+c.scaleY*a.tileHeight*(d-.5)};s.exports=f},17347:(s,g,e)=>{var n=e(60386),p=e(50811),f=e(62839),u=e(29633),l=function(a,o,c,h,d,v,m,y){m===void 0&&(m=!0);var C=p(a,o,c,h,null,y),T=[];C.forEach(function(w){var O=new u(w.layer,w.index,w.x,w.y,w.width,w.height,w.baseWidth,w.baseHeight);O.copy(w),T.push(O)});for(var P=d-a,S=v-o,M=0;M<T.length;M++){var E=T[M],A=E.x+P,R=E.y+S;f(A,R,y)&&y.data[R][A]&&(E.x=A,E.y=R,E.updatePixelXY(),y.data[R][A]=E)}m&&n(d-1,v-1,c+2,h+2,y),C.length=0,T.length=0};s.exports=l},93604:(s,g,e)=>{var n=e(50811),p=e(51202),f=function(u,l,a,o,c,h){a||(a={}),Array.isArray(u)||(u=[u]);var d=h.tilemapLayer;o||(o=d.scene),c||(c=o.cameras.main);var v=n(0,0,h.width,h.height,null,h),m=[],y;for(y=0;y<v.length;y++){var C=v[y];if(u.indexOf(C.index)!==-1){var T=d.tileToWorldXY(C.x,C.y,void 0,c,h);a.x=T.x,a.y=T.y,m.push(o.make.sprite(a))}}if(typeof l=="number")for(y=0;y<u.length;y++)p(u[y],l,0,0,h.width,h.height,h);else if(Array.isArray(l))for(y=0;y<u.length;y++)p(u[y],l[y],0,0,h.width,h.height,h);return m};s.exports=f},71586:(s,g,e)=>{var n=e(74118),p=e(82127),f=e(84314),u=new n,l=function(a,o){var c=a.tilemapLayer.tilemap,h=a.tilemapLayer,d=Math.floor(c.tileWidth*h.scaleX),v=Math.floor(c.tileHeight*h.scaleY),m=f(o.worldView.x-h.x,d,0,!0)-h.cullPaddingX,y=p(o.worldView.right-h.x,d,0,!0)+h.cullPaddingX,C=f(o.worldView.y-h.y,v,0,!0)-h.cullPaddingY,T=p(o.worldView.bottom-h.y,v,0,!0)+h.cullPaddingY;return u.setTo(m,C,y-m,T-C)};s.exports=l},381:(s,g,e)=>{var n=e(71586),p=e(6987),f=function(u,l,a,o){a===void 0&&(a=[]),o===void 0&&(o=0),a.length=0;var c=u.tilemapLayer,h=n(u,l);return(c.skipCull||c.scrollFactorX!==1||c.scrollFactorY!==1)&&(h.left=0,h.right=u.width,h.top=0,h.bottom=u.height),p(u,h,o,a),a};s.exports=f},97734:(s,g,e)=>{var n=e(50811),p=e(60386),f=e(68234),u=function(l,a,o,c,h,d,v){for(var m=v.collideIndexes.indexOf(l)!==-1,y=n(a,o,c,h,null,v),C=0;C<y.length;C++)y[C].index=l,f(y[C],m);d&&p(a-1,o-1,c+2,h+2,v)};s.exports=u},63555:(s,g,e)=>{var n=e(50811),p=function(f,u,l,a,o,c,h,d){var v=n(l,a,o,c,h,d);return v.filter(f,u)};s.exports=p},37982:s=>{var g=function(e,n,p,f){n===void 0&&(n=0),p===void 0&&(p=!1);var u=0,l,a,o;if(p){for(a=f.height-1;a>=0;a--)for(l=f.width-1;l>=0;l--)if(o=f.data[a][l],o&&o.index===e){if(u===n)return o;u+=1}}else for(a=0;a<f.height;a++)for(l=0;l<f.width;l++)if(o=f.data[a][l],o&&o.index===e){if(u===n)return o;u+=1}return null};s.exports=g},48297:(s,g,e)=>{var n=e(50811),p=function(f,u,l,a,o,c,h,d){var v=n(l,a,o,c,h,d);return v.find(f,u)||null};s.exports=p},80916:(s,g,e)=>{var n=e(50811),p=function(f,u,l,a,o,c,h,d){var v=n(l,a,o,c,h,d);v.forEach(f,u)};s.exports=p},31493:(s,g,e)=>{var n=e(12920),p=e(381),f=e(37524),u=e(20887),l=e(72283),a=e(19242),o=function(c){return c===n.ORTHOGONAL?p:c===n.HEXAGONAL?f:c===n.STAGGERED?a:c===n.ISOMETRIC?u:l};s.exports=o},15494:(s,g,e)=>{var n=e(62839),p=function(f,u,l,a){if(l===void 0&&(l=!1),n(f,u,a)){var o=a.data[u][f]||null;return o?o.index===-1?l?o:null:o:null}else return null};s.exports=p},24640:(s,g,e)=>{var n=e(15494),p=e(93736),f=new p,u=function(l,a,o,c,h){return h.tilemapLayer.worldToTileXY(l,a,!0,f,c),n(f.x,f.y,o,h)};s.exports=u},48495:(s,g,e)=>{var n=e(93736),p=function(f,u,l,a){var o=a.baseTileWidth,c=a.baseTileHeight,h=a.tilemapLayer,d=0,v=0;h&&(l||(l=h.scene.cameras.main),d=h.x+l.scrollX*(1-h.scrollFactorX),v=h.y+l.scrollY*(1-h.scrollFactorY),o*=h.scaleX,c*=h.scaleY);var m=d+f*o,y=v+u*c;return[new n(m,y),new n(m+o,y),new n(m+o,y+c),new n(m,y+c)]};s.exports=p},7160:(s,g,e)=>{var n=e(12920),p=e(63634),f=e(72283),u=e(48495),l=function(a){return a===n.ORTHOGONAL?u:a===n.ISOMETRIC?f:a===n.HEXAGONAL?p:(a===n.STAGGERED,f)};s.exports=l},16884:(s,g,e)=>{var n=e(12920),p=e(72283),f=e(44150),u=function(l){return l===n.ORTHOGONAL?f:p};s.exports=u},68182:(s,g,e)=>{var n=e(12920),p=e(21715),f=e(21808),u=e(72283),l=e(33388),a=e(46836),o=function(c){return c===n.ORTHOGONAL?a:c===n.ISOMETRIC?f:c===n.HEXAGONAL?p:c===n.STAGGERED?l:u};s.exports=o},3752:(s,g,e)=>{var n=e(12920),p=e(72283),f=e(84132),u=e(42477),l=function(a){return a===n.ORTHOGONAL?u:a===n.STAGGERED?f:p};s.exports=l},50811:(s,g,e)=>{var n=e(72632),p=function(f,u,l,a,o,c){f===void 0&&(f=0),u===void 0&&(u=0),l===void 0&&(l=c.width),a===void 0&&(a=c.height),o||(o={});var h=n(o,"isNotEmpty",!1),d=n(o,"isColliding",!1),v=n(o,"hasInterestingFace",!1);f<0&&(l+=f,f=0),u<0&&(a+=u,u=0),f+l>c.width&&(l=Math.max(c.width-f,0)),u+a>c.height&&(a=Math.max(c.height-u,0));for(var m=[],y=u;y<u+a;y++)for(var C=f;C<f+l;C++){var T=c.data[y][C];if(T!==null){if(h&&T.index===-1||d&&!T.collides||v&&!T.hasInterestingFace)continue;m.push(T)}}return m};s.exports=p},31674:(s,g,e)=>{var n=e(84068),p=e(50811),f=e(7563),u=e(72283),l=e(93736),a=function(v,m){return f.RectangleToTriangle(m,v)},o=new l,c=new l,h=new l,d=function(v,m,y,C){if(v===void 0)return[];var T=u;v instanceof n.Circle?T=f.CircleToRectangle:v instanceof n.Rectangle?T=f.RectangleToRectangle:v instanceof n.Triangle?T=a:v instanceof n.Line&&(T=f.LineToRectangle),C.tilemapLayer.worldToTileXY(v.left,v.top,!0,c,y);var P=c.x,S=c.y;C.tilemapLayer.worldToTileXY(v.right,v.bottom,!1,h,y);var M=Math.ceil(h.x),E=Math.ceil(h.y),A=Math.max(M-P,1),R=Math.max(E-S,1),w=p(P,S,A,R,m,C),O=C.tileWidth,F=C.tileHeight;C.tilemapLayer&&(O*=C.tilemapLayer.scaleX,F*=C.tilemapLayer.scaleY);for(var b=[],I=new n.Rectangle(0,0,O,F),N=0;N<w.length;N++){var z=w[N];C.tilemapLayer.tileToWorldXY(z.x,z.y,o,y),I.x=o.x,I.y=o.y,T(v,I)&&b.push(z)}return b};s.exports=d},44662:(s,g,e)=>{var n=e(50811),p=e(93736),f=new p,u=new p,l=function(a,o,c,h,d,v,m){var y=m.tilemapLayer.tilemap._convert.WorldToTileXY;y(a,o,!0,f,v,m);var C=f.x,T=f.y;y(a+c,o+h,!1,u,v,m);var P=Math.ceil(u.x),S=Math.ceil(u.y);return n(C,T,P-C,S-T,d,m)};s.exports=l},29296:(s,g,e)=>{var n=e(12920),p=e(10618),f=e(806),u=function(l){return l===n.ORTHOGONAL?f:p};s.exports=u},32688:(s,g,e)=>{var n=e(12920),p=e(11516),f=e(18750),u=e(72283),l=e(90562),a=e(45676),o=function(c){return c===n.ORTHOGONAL?a:c===n.ISOMETRIC?f:c===n.HEXAGONAL?p:c===n.STAGGERED?l:u};s.exports=o},74326:(s,g,e)=>{var n=e(12920),p=e(10618),f=e(3689),u=e(70520),l=function(a){return a===n.ORTHOGONAL?u:a===n.STAGGERED?f:p};s.exports=l},46598:(s,g,e)=>{var n=e(62839),p=function(f,u,l){if(n(f,u,l)){var a=l.data[u][f];return a!==null&&a.index>-1}else return!1};s.exports=p},28654:(s,g,e)=>{var n=e(46598),p=e(93736),f=new p,u=function(l,a,o,c){c.tilemapLayer.worldToTileXY(l,a,!0,f,o);var h=f.x,d=f.y;return n(h,d,c)};s.exports=u},6358:(s,g,e)=>{var n=e(82127),p=e(84314),f=function(u,l){var a=u.tilemapLayer.tilemap,o=u.tilemapLayer,c=Math.floor(a.tileWidth*o.scaleX),h=Math.floor(a.tileHeight*o.scaleY),d=u.hexSideLength,v,m,y,C;if(this.staggerAxis==="y"){var T=(h-d)/2+d;v=p(l.worldView.x-o.x,c,0,!0)-o.cullPaddingX,m=n(l.worldView.right-o.x,c,0,!0)+o.cullPaddingX,y=p(l.worldView.y-o.y,T,0,!0)-o.cullPaddingY,C=n(l.worldView.bottom-o.y,T,0,!0)+o.cullPaddingY}else{var P=(c-d)/2+d;v=p(l.worldView.x-o.x,P,0,!0)-o.cullPaddingX,m=n(l.worldView.right-o.x,P,0,!0)+o.cullPaddingX,y=p(l.worldView.y-o.y,h,0,!0)-o.cullPaddingY,C=n(l.worldView.bottom-o.y,h,0,!0)+o.cullPaddingY}return{left:v,right:m,top:y,bottom:C}};s.exports=f},37524:(s,g,e)=>{var n=e(6358),p=e(6987),f=function(u,l,a,o){a===void 0&&(a=[]),o===void 0&&(o=0),a.length=0;var c=u.tilemapLayer,h=n(u,l);return c.skipCull&&c.scrollFactorX===1&&c.scrollFactorY===1&&(h.left=0,h.right=u.width,h.top=0,h.bottom=u.height),p(u,h,o,a),a};s.exports=f},63634:(s,g,e)=>{var n=e(21715),p=e(93736),f=new p,u=function(l,a,o,c){var h=c.baseTileWidth,d=c.baseTileHeight,v=c.tilemapLayer;v&&(h*=v.scaleX,d*=v.scaleY);var m=n(l,a,f,o,c),y=[],C=.5773502691896257,T,P;this.staggerAxis==="y"?(T=C*h,P=d/2):(T=h/2,P=C*d);for(var S=0;S<6;S++){var M=2*Math.PI*(.5-S)/6;y.push(new p(m.x+T*Math.cos(M),m.y+P*Math.sin(M)))}return y};s.exports=u},21715:(s,g,e)=>{var n=e(93736),p=function(f,u,l,a,o){l||(l=new n);var c=o.baseTileWidth,h=o.baseTileHeight,d=o.tilemapLayer,v=0,m=0;d&&(a||(a=d.scene.cameras.main),v=d.x+a.scrollX*(1-d.scrollFactorX),m=d.y+a.scrollY*(1-d.scrollFactorY),c*=d.scaleX,h*=d.scaleY);var y=c/2,C=h/2,T,P;return this.staggerAxis==="y"?(T=v+c*f+c,P=m+1.5*u*C+C,u%2===0&&(this.staggerIndex==="odd"?T-=y:T+=y)):this.staggerAxis==="x"&&this.staggerIndex==="odd"&&(T=v+1.5*f*y+y,P=m+h*f+h,f%2===0&&(this.staggerIndex==="odd"?P-=C:P+=C)),l.set(T,P)};s.exports=p},11516:(s,g,e)=>{var n=e(93736),p=function(f,u,l,a,o,c){a||(a=new n);var h=c.baseTileWidth,d=c.baseTileHeight,v=c.tilemapLayer;v&&(o||(o=v.scene.cameras.main),f=f-(v.x+o.scrollX*(1-v.scrollFactorX)),u=u-(v.y+o.scrollY*(1-v.scrollFactorY)),h*=v.scaleX,d*=v.scaleY);var m=.5773502691896257,y=-.3333333333333333,C=0,T=.6666666666666666,P=h/2,S=d/2,M,E,A,R,w;c.staggerAxis==="y"?(M=(f-P)/(m*h),E=(u-S)/S,A=m*M+y*E,R=C*M+T*E):(M=(f-P)/P,E=(u-S)/(m*d),A=y*M+m*E,R=T*M+C*E),w=-A-R;var O=Math.round(A),F=Math.round(R),b=Math.round(w),I=Math.abs(O-A),N=Math.abs(F-R),z=Math.abs(b-w);I>N&&I>z?O=-F-b:N>z&&(F=-O-b);var U,W=F;return c.staggerIndex==="odd"?U=W%2===0?F/2+O:F/2+O-.5:U=W%2===0?F/2+O:F/2+O+.5,a.set(U,W)};s.exports=p},62839:s=>{var g=function(e,n,p){return e>=0&&e<p.width&&n>=0&&n<p.height};s.exports=g},20887:(s,g,e)=>{var n=e(13125),p=function(f,u,l,a){l===void 0&&(l=[]),a===void 0&&(a=0),l.length=0;var o=f.tilemapLayer,c=f.data,h=f.width,d=f.height,v=o.skipCull,m=0,y=h,C=0,T=d,P,S,M;if(a===0){for(S=C;S<T;S++)for(P=m;P<y;P++)if(v||n(P,S,f,u)){if(M=c[S][P],!M||M.index===-1||!M.visible||M.alpha===0)continue;l.push(M)}}else if(a===1){for(S=C;S<T;S++)for(P=y;P>=m;P--)if(v||n(P,S,f,u)){if(M=c[S][P],!M||M.index===-1||!M.visible||M.alpha===0)continue;l.push(M)}}else if(a===2){for(S=T;S>=C;S--)for(P=m;P<y;P++)if(v||n(P,S,f,u)){if(M=c[S][P],!M||M.index===-1||!M.visible||M.alpha===0)continue;l.push(M)}}else if(a===3){for(S=T;S>=C;S--)for(P=y;P>=m;P--)if(v||n(P,S,f,u)){if(M=c[S][P],!M||M.index===-1||!M.visible||M.alpha===0)continue;l.push(M)}}return o.tilesDrawn=l.length,o.tilesTotal=h*d,l};s.exports=p},21808:(s,g,e)=>{var n=e(93736),p=function(f,u,l,a,o){l||(l=new n);var c=o.baseTileWidth,h=o.baseTileHeight,d=o.tilemapLayer,v=0,m=0;d&&(a||(a=d.scene.cameras.main),v=d.x+a.scrollX*(1-d.scrollFactorX),c*=d.scaleX,m=d.y+a.scrollY*(1-d.scrollFactorY),h*=d.scaleY);var y=v+(f-u)*(c/2),C=m+(f+u)*(h/2);return l.set(y,C)};s.exports=p},18750:(s,g,e)=>{var n=e(93736),p=function(f,u,l,a,o,c,h){a||(a=new n);var d=c.baseTileWidth,v=c.baseTileHeight,m=c.tilemapLayer;m&&(o||(o=m.scene.cameras.main),u=u-(m.y+o.scrollY*(1-m.scrollFactorY)),v*=m.scaleY,f=f-(m.x+o.scrollX*(1-m.scrollFactorX)),d*=m.scaleX);var y=d/2,C=v/2;f=f-y,h||(u=u-v);var T=.5*(f/y+u/C),P=.5*(-f/y+u/C);return l&&(T=Math.floor(T),P=Math.floor(P)),a.set(T,P)};s.exports=p},29003:(s,g,e)=>{var n=e(29633),p=e(62839),f=e(92839),u=e(68234),l=function(a,o,c,h,d){if(h===void 0&&(h=!0),!p(o,c,d))return null;var v,m=d.data[c][o],y=m&&m.collides;a instanceof n?(d.data[c][o]===null&&(d.data[c][o]=new n(d,a.index,o,c,d.tileWidth,d.tileHeight)),d.data[c][o].copy(a)):(v=a,d.data[c][o]===null?d.data[c][o]=new n(d,v,o,c,d.tileWidth,d.tileHeight):d.data[c][o].index=v);var C=d.data[c][o],T=d.collideIndexes.indexOf(C.index)!==-1;if(v=a instanceof n?a.index:a,v===-1)C.width=d.tileWidth,C.height=d.tileHeight;else{var P=d.tilemapLayer.tilemap.tiles,S=P[v][2],M=d.tilemapLayer.tileset[S];C.width=M.tileWidth,C.height=M.tileHeight}return u(C,T),h&&y!==C.collides&&f(o,c,d),C};s.exports=l},48565:(s,g,e)=>{var n=e(29003),p=e(93736),f=new p,u=function(l,a,o,c,h,d){return d.tilemapLayer.worldToTileXY(a,o,!0,f,h,d),n(l,f.x,f.y,c,d)};s.exports=u},56547:(s,g,e)=>{var n=e(60386),p=e(29003),f=function(u,l,a,o,c){if(o===void 0&&(o=!0),!Array.isArray(u))return null;Array.isArray(u[0])||(u=[u]);for(var h=u.length,d=u[0].length,v=0;v<h;v++)for(var m=0;m<d;m++){var y=u[v][m];p(y,l+m,a+v,!1,c)}o&&n(l-1,a-1,d+2,h+2,c)};s.exports=f},91180:(s,g,e)=>{var n=e(50811),p=e(72861),f=function(u,l,a,o,c,h){var d,v=n(u,l,a,o,{},h);if(!c)for(c=[],d=0;d<v.length;d++)c.indexOf(v[d].index)===-1&&c.push(v[d].index);for(d=0;d<v.length;d++)v[d].index=p(c)};s.exports=f},929:(s,g,e)=>{var n=e(29633),p=e(62839),f=e(92839),u=function(l,a,o,c,h){if(o===void 0&&(o=!0),c===void 0&&(c=!0),!p(l,a,h))return null;var d=h.data[a][l];if(d)h.data[a][l]=o?null:new n(h,-1,l,a,h.tileWidth,h.tileHeight);else return null;return c&&d&&d.collides&&f(l,a,h),d};s.exports=u},17384:(s,g,e)=>{var n=e(929),p=e(93736),f=new p,u=function(l,a,o,c,h,d){return d.tilemapLayer.worldToTileXY(l,a,!0,f,h,d),n(f.x,f.y,o,c,d)};s.exports=u},93763:(s,g,e)=>{var n=e(50811),p=e(95509),f=new p(105,210,231,150),u=new p(243,134,48,200),l=new p(40,39,37,150),a=function(o,c,h){c===void 0&&(c={});var d=c.tileColor!==void 0?c.tileColor:f,v=c.collidingTileColor!==void 0?c.collidingTileColor:u,m=c.faceColor!==void 0?c.faceColor:l,y=n(0,0,h.width,h.height,null,h);o.translateCanvas(h.tilemapLayer.x,h.tilemapLayer.y),o.scaleCanvas(h.tilemapLayer.scaleX,h.tilemapLayer.scaleY);for(var C=0;C<y.length;C++){var T=y[C],P=T.width,S=T.height,M=T.pixelX,E=T.pixelY,A=T.collides?v:d;A!==null&&(o.fillStyle(A.color,A.alpha/255),o.fillRect(M,E,P,S)),M+=1,E+=1,P-=2,S-=2,m!==null&&(o.lineStyle(1,m.color,m.alpha/255),T.faceTop&&o.lineBetween(M,E,M+P,E),T.faceRight&&o.lineBetween(M+P,E,M+P,E+S),T.faceBottom&&o.lineBetween(M,E+S,M+P,E+S),T.faceLeft&&o.lineBetween(M,E,M,E+S))}};s.exports=a},51202:(s,g,e)=>{var n=e(50811),p=function(f,u,l,a,o,c,h){for(var d=n(l,a,o,c,null,h),v=0;v<d.length;v++)d[v]&&d[v].index===f&&(d[v].index=u)};s.exports=p},6987:s=>{var g=function(e,n,p,f){var u=e.data,l=e.width,a=e.height,o=e.tilemapLayer,c=Math.max(0,n.left),h=Math.min(l,n.right),d=Math.max(0,n.top),v=Math.min(a,n.bottom),m,y,C;if(p===0)for(y=d;y<v;y++)for(m=c;u[y]&&m<h;m++)C=u[y][m],!(!C||C.index===-1||!C.visible||C.alpha===0)&&f.push(C);else if(p===1)for(y=d;y<v;y++)for(m=h;u[y]&&m>=c;m--)C=u[y][m],!(!C||C.index===-1||!C.visible||C.alpha===0)&&f.push(C);else if(p===2)for(y=v;y>=d;y--)for(m=c;u[y]&&m<h;m++)C=u[y][m],!(!C||C.index===-1||!C.visible||C.alpha===0)&&f.push(C);else if(p===3)for(y=v;y>=d;y--)for(m=h;u[y]&&m>=c;m--)C=u[y][m],!(!C||C.index===-1||!C.visible||C.alpha===0)&&f.push(C);return o.tilesDrawn=f.length,o.tilesTotal=l*a,f};s.exports=g},51710:(s,g,e)=>{var n=e(68234),p=e(60386),f=e(91181),u=function(l,a,o,c,h){a===void 0&&(a=!0),o===void 0&&(o=!0),h===void 0&&(h=!0),Array.isArray(l)||(l=[l]);for(var d=0;d<l.length;d++)f(l[d],a,c);if(h)for(var v=0;v<c.height;v++)for(var m=0;m<c.width;m++){var y=c.data[v][m];y&&l.indexOf(y.index)!==-1&&n(y,a)}o&&p(0,0,c.width,c.height,c)};s.exports=u},15216:(s,g,e)=>{var n=e(68234),p=e(60386),f=e(91181),u=function(l,a,o,c,h,d){if(o===void 0&&(o=!0),c===void 0&&(c=!0),d===void 0&&(d=!0),!(l>a)){for(var v=l;v<=a;v++)f(v,o,h);if(d)for(var m=0;m<h.height;m++)for(var y=0;y<h.width;y++){var C=h.data[m][y];C&&C.index>=l&&C.index<=a&&n(C,o)}c&&p(0,0,h.width,h.height,h)}};s.exports=u},33158:(s,g,e)=>{var n=e(68234),p=e(60386),f=e(91181),u=function(l,a,o,c){a===void 0&&(a=!0),o===void 0&&(o=!0),Array.isArray(l)||(l=[l]);for(var h=0;h<c.height;h++)for(var d=0;d<c.width;d++){var v=c.data[h][d];v&&l.indexOf(v.index)===-1&&(n(v,a),f(v.index,a,c))}o&&p(0,0,c.width,c.height,c)};s.exports=u},4180:(s,g,e)=>{var n=e(68234),p=e(60386),f=e(19256),u=function(l,a,o,c){a===void 0&&(a=!0),o===void 0&&(o=!0);for(var h=0;h<c.height;h++)for(var d=0;d<c.width;d++){var v=c.data[h][d];if(!!v){for(var m in l)if(!!f(v.properties,m)){var y=l[m];Array.isArray(y)||(y=[y]);for(var C=0;C<y.length;C++)v.properties[m]===y[C]&&n(v,a)}}}o&&p(0,0,c.width,c.height,c)};s.exports=u},18625:(s,g,e)=>{var n=e(68234),p=e(60386),f=function(u,l,a){u===void 0&&(u=!0),l===void 0&&(l=!0);for(var o=0;o<a.height;o++)for(var c=0;c<a.width;c++){var h=a.data[o][c];if(!!h){var d=h.getCollisionGroup();d&&d.objects&&d.objects.length>0&&n(h,u)}}l&&p(0,0,a.width,a.height,a)};s.exports=f},91181:s=>{var g=function(e,n,p){var f=p.collideIndexes.indexOf(e);n&&f===-1?p.collideIndexes.push(e):!n&&f!==-1&&p.collideIndexes.splice(f,1)};s.exports=g},68234:s=>{var g=function(e,n){n?e.setCollision(!0,!0,!0,!0,!1):e.resetCollision(!1)};s.exports=g},11628:s=>{var g=function(e,n,p,f){if(typeof e=="number")f.callbacks[e]=n!==null?{callback:n,callbackContext:p}:void 0;else for(var u=0,l=e.length;u<l;u++)f.callbacks[e[u]]=n!==null?{callback:n,callbackContext:p}:void 0};s.exports=g},72732:(s,g,e)=>{var n=e(50811),p=function(f,u,l,a,o,c,h){for(var d=n(f,u,l,a,null,h),v=0;v<d.length;v++)d[v].setCollisionCallback(o,c)};s.exports=p},34397:(s,g,e)=>{var n=e(50811),p=e(18592),f=function(u,l,a,o,c){var h=n(u,l,a,o,null,c),d=h.map(function(m){return m.index});p(d);for(var v=0;v<h.length;v++)h[v].index=d[v]};s.exports=f},53945:(s,g,e)=>{var n=e(82127),p=e(84314),f=function(u,l){var a=u.tilemapLayer.tilemap,o=u.tilemapLayer,c=Math.floor(a.tileWidth*o.scaleX),h=Math.floor(a.tileHeight*o.scaleY),d=p(l.worldView.x-o.x,c,0,!0)-o.cullPaddingX,v=n(l.worldView.right-o.x,c,0,!0)+o.cullPaddingX,m=p(l.worldView.y-o.y,h/2,0,!0)-o.cullPaddingY,y=n(l.worldView.bottom-o.y,h/2,0,!0)+o.cullPaddingY;return{left:d,right:v,top:m,bottom:y}};s.exports=f},19242:(s,g,e)=>{var n=e(53945),p=e(6987),f=function(u,l,a,o){a===void 0&&(a=[]),o===void 0&&(o=0),a.length=0;var c=u.tilemapLayer,h=n(u,l);return c.skipCull&&c.scrollFactorX===1&&c.scrollFactorY===1&&(h.left=0,h.right=u.width,h.top=0,h.bottom=u.height),p(u,h,o,a),a};s.exports=f},33388:(s,g,e)=>{var n=e(93736),p=function(f,u,l,a,o){l||(l=new n);var c=o.baseTileWidth,h=o.baseTileHeight,d=o.tilemapLayer,v=0,m=0;d&&(a||(a=d.scene.cameras.main),v=d.x+a.scrollX*(1-d.scrollFactorX),c*=d.scaleX,m=d.y+a.scrollY*(1-d.scrollFactorY),h*=d.scaleY);var y=v+f*c+u%2*(c/2),C=m+u*(h/2);return l.set(y,C)};s.exports=p},84132:s=>{var g=function(e,n,p){var f=p.baseTileHeight,u=p.tilemapLayer,l=0;return u&&(n===void 0&&(n=u.scene.cameras.main),l=u.y+n.scrollY*(1-u.scrollFactorY),f*=u.scaleY),l+e*(f/2)+f};s.exports=g},90562:(s,g,e)=>{var n=e(93736),p=function(f,u,l,a,o,c){a||(a=new n);var h=c.baseTileWidth,d=c.baseTileHeight,v=c.tilemapLayer;v&&(o||(o=v.scene.cameras.main),u=u-(v.y+o.scrollY*(1-v.scrollFactorY)),d*=v.scaleY,f=f-(v.x+o.scrollX*(1-v.scrollFactorX)),h*=v.scaleX);var m=l?Math.floor(u/(d/2)):u/(d/2),y=l?Math.floor((f+m%2*.5*h)/h):(f+m%2*.5*h)/h;return a.set(y,m)};s.exports=p},3689:s=>{var g=function(e,n,p,f){var u=f.baseTileHeight,l=f.tilemapLayer;return l&&(p||(p=l.scene.cameras.main),e=e-(l.y+p.scrollY*(1-l.scrollFactorY)),u*=l.scaleY),n?Math.floor(e/(u/2)):e/(u/2)};s.exports=g},55217:(s,g,e)=>{var n=e(50811),p=function(f,u,l,a,o,c,h){for(var d=n(l,a,o,c,null,h),v=0;v<d.length;v++)d[v]&&(d[v].index===f?d[v].index=u:d[v].index===u&&(d[v].index=f))};s.exports=p},44150:s=>{var g=function(e,n,p){var f=p.baseTileWidth,u=p.tilemapLayer,l=0;return u&&(n||(n=u.scene.cameras.main),l=u.x+n.scrollX*(1-u.scrollFactorX),f*=u.scaleX),l+e*f};s.exports=g},46836:(s,g,e)=>{var n=e(44150),p=e(42477),f=e(93736),u=function(l,a,o,c,h){return o||(o=new f(0,0)),o.x=n(l,c,h),o.y=p(a,c,h),o};s.exports=u},42477:s=>{var g=function(e,n,p){var f=p.baseTileHeight,u=p.tilemapLayer,l=0;return u&&(n||(n=u.scene.cameras.main),l=u.y+n.scrollY*(1-u.scrollFactorY),f*=u.scaleY),l+e*f};s.exports=g},39677:(s,g,e)=>{var n=e(50811),p=function(f,u,l,a,o,c){if(!!o){var h,d=n(f,u,l,a,null,c),v=0;for(h=0;h<o.length;h++)v+=o[h].weight;if(!(v<=0))for(h=0;h<d.length;h++){for(var m=Math.random()*v,y=0,C=-1,T=0;T<o.length;T++)if(y+=o[T].weight,m<=y){var P=o[T].index;C=Array.isArray(P)?P[Math.floor(Math.random()*P.length)]:P;break}d[h].index=C}}};s.exports=p},806:(s,g,e)=>{var n=e(45676),p=e(93736),f=new p,u=function(l,a,o,c){return n(l,0,a,f,o,c),f.x};s.exports=u},45676:(s,g,e)=>{var n=e(93736),p=function(f,u,l,a,o,c){l===void 0&&(l=!0),a||(a=new n);var h=c.baseTileWidth,d=c.baseTileHeight,v=c.tilemapLayer;v&&(o||(o=v.scene.cameras.main),f=f-(v.x+o.scrollX*(1-v.scrollFactorX)),u=u-(v.y+o.scrollY*(1-v.scrollFactorY)),h*=v.scaleX,d*=v.scaleY);var m=f/h,y=u/d;return l&&(m=Math.floor(m),y=Math.floor(y)),a.set(m,y)};s.exports=p},70520:(s,g,e)=>{var n=e(45676),p=e(93736),f=new p,u=function(l,a,o,c){return n(0,l,a,f,o,c),f.y};s.exports=u},5047:(s,g,e)=>{s.exports={CalculateFacesAt:e(92839),CalculateFacesWithin:e(60386),CheckIsoBounds:e(13125),Copy:e(17347),CreateFromTiles:e(93604),CullBounds:e(71586),CullTiles:e(381),Fill:e(97734),FilterTiles:e(63555),FindByIndex:e(37982),FindTile:e(48297),ForEachTile:e(80916),GetCullTilesFunction:e(31493),GetTileAt:e(15494),GetTileAtWorldXY:e(24640),GetTileCorners:e(48495),GetTileCornersFunction:e(7160),GetTilesWithin:e(50811),GetTilesWithinShape:e(31674),GetTilesWithinWorldXY:e(44662),GetTileToWorldXFunction:e(16884),GetTileToWorldXYFunction:e(68182),GetTileToWorldYFunction:e(3752),GetWorldToTileXFunction:e(29296),GetWorldToTileXYFunction:e(32688),GetWorldToTileYFunction:e(74326),HasTileAt:e(46598),HasTileAtWorldXY:e(28654),HexagonalCullBounds:e(6358),HexagonalCullTiles:e(37524),HexagonalGetTileCorners:e(63634),HexagonalTileToWorldXY:e(21715),HexagonalWorldToTileXY:e(11516),IsInLayerBounds:e(62839),IsometricCullTiles:e(20887),IsometricTileToWorldXY:e(21808),IsometricWorldToTileXY:e(18750),PutTileAt:e(29003),PutTileAtWorldXY:e(48565),PutTilesAt:e(56547),Randomize:e(91180),RemoveTileAt:e(929),RemoveTileAtWorldXY:e(17384),RenderDebug:e(93763),ReplaceByIndex:e(51202),RunCull:e(6987),SetCollision:e(51710),SetCollisionBetween:e(15216),SetCollisionByExclusion:e(33158),SetCollisionByProperty:e(4180),SetCollisionFromCollisionGroup:e(18625),SetLayerCollisionIndex:e(91181),SetTileCollision:e(68234),SetTileIndexCallback:e(11628),SetTileLocationCallback:e(72732),Shuffle:e(34397),StaggeredCullBounds:e(53945),StaggeredCullTiles:e(19242),StaggeredTileToWorldXY:e(33388),StaggeredTileToWorldY:e(84132),StaggeredWorldToTileXY:e(90562),StaggeredWorldToTileY:e(3689),SwapByIndex:e(55217),TileToWorldX:e(44150),TileToWorldXY:e(46836),TileToWorldY:e(42477),WeightedRandomize:e(39677),WorldToTileX:e(806),WorldToTileXY:e(45676),WorldToTileY:e(70520)}},12920:s=>{s.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},84758:(s,g,e)=>{var n={ORIENTATION:e(12920)};s.exports=n},52678:(s,g,e)=>{var n=e(98611),p=e(84758),f={Components:e(5047),Parsers:e(34124),Formats:e(93560),ImageCollection:e(97042),ParseToTilemap:e(15043),Tile:e(29633),Tilemap:e(89797),TilemapCreator:e(4843),TilemapFactory:e(37940),Tileset:e(47975),TilemapLayer:e(87177),Orientation:e(12920),LayerData:e(94990),MapData:e(16586),ObjectLayer:e(15256)};f=n(!1,f,p.ORIENTATION),s.exports=f},94990:(s,g,e)=>{var n=e(56694),p=e(12920),f=e(72632),u=new n({initialize:function(a){a===void 0&&(a={}),this.name=f(a,"name","layer"),this.x=f(a,"x",0),this.y=f(a,"y",0),this.width=f(a,"width",0),this.height=f(a,"height",0),this.tileWidth=f(a,"tileWidth",0),this.tileHeight=f(a,"tileHeight",0),this.baseTileWidth=f(a,"baseTileWidth",this.tileWidth),this.baseTileHeight=f(a,"baseTileHeight",this.tileHeight),this.orientation=f(a,"orientation",p.ORTHOGONAL),this.widthInPixels=f(a,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=f(a,"heightInPixels",this.height*this.baseTileHeight),this.alpha=f(a,"alpha",1),this.visible=f(a,"visible",!0),this.properties=f(a,"properties",[]),this.indexes=f(a,"indexes",[]),this.collideIndexes=f(a,"collideIndexes",[]),this.callbacks=f(a,"callbacks",[]),this.bodies=f(a,"bodies",[]),this.data=f(a,"data",[]),this.tilemapLayer=f(a,"tilemapLayer",null),this.hexSideLength=f(a,"hexSideLength",0),this.staggerAxis=f(a,"staggerAxis","y"),this.staggerIndex=f(a,"staggerIndex","odd")}});s.exports=u},16586:(s,g,e)=>{var n=e(56694),p=e(12920),f=e(72632),u=new n({initialize:function(a){a===void 0&&(a={}),this.name=f(a,"name","map"),this.width=f(a,"width",0),this.height=f(a,"height",0),this.infinite=f(a,"infinite",!1),this.tileWidth=f(a,"tileWidth",0),this.tileHeight=f(a,"tileHeight",0),this.widthInPixels=f(a,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=f(a,"heightInPixels",this.height*this.tileHeight),this.format=f(a,"format",null),this.orientation=f(a,"orientation",p.ORTHOGONAL),this.renderOrder=f(a,"renderOrder","right-down"),this.version=f(a,"version","1"),this.properties=f(a,"properties",{}),this.layers=f(a,"layers",[]),this.images=f(a,"images",[]),this.objects=f(a,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=f(a,"collision",{}),this.tilesets=f(a,"tilesets",[]),this.imageCollections=f(a,"imageCollections",[]),this.tiles=f(a,"tiles",[]),this.hexSideLength=f(a,"hexSideLength",0),this.staggerAxis=f(a,"staggerAxis","y"),this.staggerIndex=f(a,"staggerIndex","odd")}});s.exports=u},15256:(s,g,e)=>{var n=e(56694),p=e(72632),f=new n({initialize:function(l){l===void 0&&(l={}),this.name=p(l,"name","object layer"),this.opacity=p(l,"opacity",1),this.properties=p(l,"properties",{}),this.propertyTypes=p(l,"propertytypes",{}),this.type=p(l,"type","objectgroup"),this.visible=p(l,"visible",!0),this.objects=p(l,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});s.exports=f},21394:(s,g,e)=>{var n=e(12920),p=function(f){return f=f.toLowerCase(),f==="isometric"?n.ISOMETRIC:f==="staggered"?n.STAGGERED:f==="hexagonal"?n.HEXAGONAL:n.ORTHOGONAL};s.exports=p},90715:(s,g,e)=>{var n=e(93560),p=e(84346),f=e(96097),u=e(2378),l=e(44909),a=function(o,c,h,d,v,m){var y;switch(c){case n.ARRAY_2D:y=p(o,h,d,v,m);break;case n.CSV:y=f(o,h,d,v,m);break;case n.TILED_JSON:y=u(o,h,m);break;case n.WELTMEISTER:y=l(o,h,m);break;default:console.warn("Unrecognized tilemap data format: "+c),y=null}return y};s.exports=a},84346:(s,g,e)=>{var n=e(93560),p=e(94990),f=e(16586),u=e(29633),l=function(a,o,c,h,d){for(var v=new p({tileWidth:c,tileHeight:h}),m=new f({name:a,tileWidth:c,tileHeight:h,format:n.ARRAY_2D,layers:[v]}),y=[],C=o.length,T=0,P=0;P<o.length;P++){y[P]=[];for(var S=o[P],M=0;M<S.length;M++){var E=parseInt(S[M],10);isNaN(E)||E===-1?y[P][M]=d?null:new u(v,-1,M,P,c,h):y[P][M]=new u(v,E,M,P,c,h)}T===0&&(T=S.length)}return m.width=v.width=T,m.height=v.height=C,m.widthInPixels=v.widthInPixels=T*c,m.heightInPixels=v.heightInPixels=C*h,v.data=y,m};s.exports=l},96097:(s,g,e)=>{var n=e(93560),p=e(84346),f=function(u,l,a,o,c){var h=l.trim().split(`
`).map(function(v){return v.split(",")}),d=p(u,h,a,o,c);return d.format=n.CSV,d};s.exports=f},30951:(s,g,e)=>{var n=e(94990),p=e(29633),f=function(u,l){for(var a=[],o=0;o<u.layer.length;o++){for(var c=u.layer[o],h=new n({name:c.name,width:c.width,height:c.height,tileWidth:c.tilesize,tileHeight:c.tilesize,visible:c.visible===1}),d=[],v=[],m=0;m<c.data.length;m++){for(var y=0;y<c.data[m].length;y++){var C=c.data[m][y]-1,T;C>-1?T=new p(h,C,y,m,c.tilesize,c.tilesize):T=l?null:new p(h,-1,y,m,c.tilesize,c.tilesize),d.push(T)}v.push(d),d=[]}h.data=v,a.push(h)}return a};s.exports=f},47488:(s,g,e)=>{var n=e(47975),p=function(f){for(var u=[],l=[],a=0;a<f.layer.length;a++){var o=f.layer[a],c=o.tilesetName;c!==""&&l.indexOf(c)===-1&&(l.push(c),u.push(new n(c,0,o.tilesize,o.tilesize,0,0)))}return u};s.exports=p},44909:(s,g,e)=>{var n=e(93560),p=e(16586),f=e(30951),u=e(47488),l=function(a,o,c){if(o.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+a),null;for(var h=0,d=0,v=0;v<o.layer.length;v++)o.layer[v].width>h&&(h=o.layer[v].width),o.layer[v].height>d&&(d=o.layer[v].height);var m=new p({width:h,height:d,name:a,tileWidth:o.layer[0].tilesize,tileHeight:o.layer[0].tilesize,format:n.WELTMEISTER});return m.layers=f(o,c),m.tilesets=u(o),m};s.exports=l},24507:(s,g,e)=>{s.exports={ParseTileLayers:e(30951),ParseTilesets:e(47488),ParseWeltmeister:e(44909)}},34124:(s,g,e)=>{s.exports={FromOrientationString:e(21394),Parse:e(90715),Parse2DArray:e(84346),ParseCSV:e(96097),Impact:e(24507),Tiled:e(50044)}},48646:(s,g,e)=>{var n=e(98611),p=function(f){for(var u,l,a,o,c,h=0;h<f.layers.length;h++){u=f.layers[h],o=null;for(var d=0;d<u.data.length;d++){c=u.data[d];for(var v=0;v<c.length;v++)l=c[v],!(l===null||l.index<0)&&(a=f.tiles[l.index][2],o=f.tilesets[a],l.width=o.tileWidth,l.height=o.tileHeight,o.tileProperties&&o.tileProperties[l.index-o.firstgid]&&(l.properties=n(l.properties,o.tileProperties[l.index-o.firstgid])))}}};s.exports=p},43908:s=>{var g=function(e){for(var n=window.atob(e),p=n.length,f=new Array(p/4),u=0;u<p;u+=4)f[u/4]=(n.charCodeAt(u)|n.charCodeAt(u+1)<<8|n.charCodeAt(u+2)<<16|n.charCodeAt(u+3)<<24)>>>0;return f};s.exports=g},14556:(s,g,e)=>{var n=e(47975),p=function(f){var u,l,a=[];for(u=0;u<f.imageCollections.length;u++)for(var o=f.imageCollections[u],c=o.images,h=0;h<c.length;h++){var d=c[h];l=new n(d.image,d.gid,o.imageWidth,o.imageHeight,0,0),l.updateTileData(o.imageWidth,o.imageHeight),f.tilesets.push(l)}for(u=0;u<f.tilesets.length;u++){l=f.tilesets[u];for(var v=l.tileMargin,m=l.tileMargin,y=0,C=0,T=0,P=l.firstgid;P<l.firstgid+l.total&&(a[P]=[v,m,u],v+=l.tileWidth+l.tileSpacing,y++,!(y===l.total||(C++,C===l.columns&&(v=l.tileMargin,m+=l.tileHeight+l.tileSpacing,C=0,T++,T===l.rows))));P++);}return a};s.exports=p},92044:(s,g,e)=>{var n=e(72632),p=function(f,u,l){if(!u)return{i:0,layers:f.layers,name:"",opacity:1,visible:!0,x:0,y:0};var a=u.x+n(u,"startx",0)*f.tilewidth+n(u,"offsetx",0),o=u.y+n(u,"starty",0)*f.tileheight+n(u,"offsety",0);return{i:0,layers:u.layers,name:l.name+u.name+"/",opacity:l.opacity*u.opacity,visible:l.visible&&u.visible,x:l.x+a,y:l.y+o}};s.exports=p},8847:s=>{var g=2147483648,e=1073741824,n=536870912,p=function(f){var u=Boolean(f&g),l=Boolean(f&e),a=Boolean(f&n);f=f&~(g|e|n);var o=0,c=!1;return u&&l&&a?(o=Math.PI/2,c=!0):u&&l&&!a?(o=Math.PI,c=!1):u&&!l&&a?(o=Math.PI/2,c=!1):u&&!l&&!a?(o=0,c=!0):!u&&l&&a?(o=3*Math.PI/2,c=!1):!u&&l&&!a?(o=Math.PI,c=!0):!u&&!l&&a?(o=3*Math.PI/2,c=!0):!u&&!l&&!a&&(o=0,c=!1),{gid:f,flippedHorizontal:u,flippedVertical:l,flippedAntiDiagonal:a,rotation:o,flipped:c}};s.exports=p},78339:(s,g,e)=>{var n=e(72632),p=e(92044),f=function(u){for(var l=[],a=[],o=p(u);o.i<o.layers.length||a.length>0;){if(o.i>=o.layers.length){if(a.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}o=a.pop();continue}var c=o.layers[o.i];if(o.i++,c.type!=="imagelayer"){if(c.type==="group"){var h=p(u,c,o);a.push(o),o=h}continue}var d=n(c,"offsetx",0)+n(c,"startx",0),v=n(c,"offsety",0)+n(c,"starty",0);l.push({name:o.name+c.name,image:c.image,x:o.x+d+c.x,y:o.y+v+c.y,alpha:o.opacity*c.opacity,visible:o.visible&&c.visible,properties:n(c,"properties",{})})}return l};s.exports=f},2378:(s,g,e)=>{var n=e(48646),p=e(14556),f=e(12920),u=e(28699),l=e(93560),a=e(21394),o=e(16586),c=e(78339),h=e(61136),d=e(95925),v=e(93392),m=function(y,C,T){var P=u(C),S=new o({width:P.width,height:P.height,name:y,tileWidth:P.tilewidth,tileHeight:P.tileheight,orientation:a(P.orientation),format:l.TILED_JSON,version:P.version,properties:P.properties,renderOrder:P.renderorder,infinite:P.infinite});S.orientation===f.HEXAGONAL&&(S.hexSideLength=P.hexsidelength,S.staggerAxis=P.staggeraxis,S.staggerIndex=P.staggerindex),S.layers=d(P,T),S.images=c(P);var M=v(P);return S.tilesets=M.tilesets,S.imageCollections=M.imageCollections,S.objects=h(P),S.tiles=p(S),n(S),S};s.exports=m},4281:(s,g,e)=>{var n=e(28820),p=e(8847),f=function(a){return{x:a.x,y:a.y}},u=["id","name","type","rotation","properties","visible","x","y","width","height"],l=function(a,o,c){o===void 0&&(o=0),c===void 0&&(c=0);var h=n(a,u);if(h.x+=o,h.y+=c,a.gid){var d=p(a.gid);h.gid=d.gid,h.flippedHorizontal=d.flippedHorizontal,h.flippedVertical=d.flippedVertical,h.flippedAntiDiagonal=d.flippedAntiDiagonal}else a.polyline?h.polyline=a.polyline.map(f):a.polygon?h.polygon=a.polygon.map(f):a.ellipse?h.ellipse=a.ellipse:a.text?h.text=a.text:a.point?h.point=!0:h.rectangle=!0;return h};s.exports=l},61136:(s,g,e)=>{var n=e(72632),p=e(4281),f=e(15256),u=e(92044),l=function(a){for(var o=[],c=[],h=u(a);h.i<h.layers.length||c.length>0;){if(h.i>=h.layers.length){if(c.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}h=c.pop();continue}var d=h.layers[h.i];if(h.i++,d.opacity*=h.opacity,d.visible=h.visible&&d.visible,d.type!=="objectgroup"){if(d.type==="group"){var v=u(a,d,h);c.push(h),h=v}continue}d.name=h.name+d.name;for(var m=h.x+n(d,"startx",0)+n(d,"offsetx",0),y=h.y+n(d,"starty",0)+n(d,"offsety",0),C=[],T=0;T<d.objects.length;T++){var P=p(d.objects[T],m,y);C.push(P)}var S=new f(d);S.objects=C,o.push(S)}return o};s.exports=l},95925:(s,g,e)=>{var n=e(43908),p=e(12920),f=e(92044),u=e(21394),l=e(72632),a=e(94990),o=e(8847),c=e(29633),h=function(d,v){for(var m=l(d,"infinite",!1),y=[],C=[],T=f(d);T.i<T.layers.length||C.length>0;){if(T.i>=T.layers.length){if(C.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}T=C.pop();continue}var P=T.layers[T.i];if(T.i++,P.type!=="tilelayer"){if(P.type==="group"){var S=f(d,P,T);C.push(T),T=S}continue}if(P.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+P.name+"'");continue}else if(P.encoding&&P.encoding==="base64"){if(P.chunks)for(var M=0;M<P.chunks.length;M++)P.chunks[M].data=n(P.chunks[M].data);P.data&&(P.data=n(P.data)),delete P.encoding}var E,A,R,w,O=[],F=0;if(m){var b=l(P,"startx",0)+P.x,I=l(P,"starty",0)+P.y;E=new a({name:T.name+P.name,x:T.x+l(P,"offsetx",0)+b*d.tilewidth,y:T.y+l(P,"offsety",0)+I*d.tileheight,width:P.width,height:P.height,tileWidth:d.tilewidth,tileHeight:d.tileheight,alpha:T.opacity*P.opacity,visible:T.visible&&P.visible,properties:l(P,"properties",[]),orientation:u(d.orientation)}),E.orientation===p.HEXAGONAL&&(E.hexSideLength=d.hexsidelength,E.staggerAxis=d.staggeraxis,E.staggerIndex=d.staggerindex);for(var N=0;N<P.height;N++){O[N]=[null];for(var z=0;z<P.width;z++)O[N][z]=null}for(N=0,H=P.chunks.length;N<H;N++)for(var U=P.chunks[N],W=U.x-b,D=U.y-I,V=0,L=0,B=U.data.length;L<B;L++){var G=F+W,Y=V+D;A=o(U.data[L]),A.gid>0?(R=new c(E,A.gid,G,Y,d.tilewidth,d.tileheight),R.rotation=A.rotation,R.flipX=A.flipped,O[Y][G]=R):(w=v?null:new c(E,-1,G,Y,d.tilewidth,d.tileheight),O[Y][G]=w),F++,F===U.width&&(V++,F=0)}}else{E=new a({name:T.name+P.name,x:T.x+l(P,"offsetx",0)+P.x,y:T.y+l(P,"offsety",0)+P.y,width:P.width,height:P.height,tileWidth:d.tilewidth,tileHeight:d.tileheight,alpha:T.opacity*P.opacity,visible:T.visible&&P.visible,properties:l(P,"properties",[]),orientation:u(d.orientation)}),E.orientation===p.HEXAGONAL&&(E.hexSideLength=d.hexsidelength,E.staggerAxis=d.staggeraxis,E.staggerIndex=d.staggerindex);for(var X=[],k=0,H=P.data.length;k<H;k++)A=o(P.data[k]),A.gid>0?(R=new c(E,A.gid,F,O.length,d.tilewidth,d.tileheight),R.rotation=A.rotation,R.flipX=A.flipped,X.push(R)):(w=v?null:new c(E,-1,F,O.length,d.tilewidth,d.tileheight),X.push(w)),F++,F===P.width&&(O.push(X),F=0,X=[])}E.data=O,y.push(E)}return y};s.exports=h},93392:(s,g,e)=>{var n=e(47975),p=e(97042),f=e(4281),u=e(39642),l=function(a){for(var o=[],c=[],h=null,d,v=0;v<a.tilesets.length;v++){var m=a.tilesets[v];if(m.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(m.image){var y=new n(m.name,m.firstgid,m.tilewidth,m.tileheight,m.margin,m.spacing,void 0,void 0,m.tileoffset);if(a.version>1){var C=void 0,T=void 0;if(Array.isArray(m.tiles)){C=C||{},T=T||{};for(var P=0;P<m.tiles.length;P++){var S=m.tiles[P];if(S.properties){var M={};S.properties.forEach(function(N){M[N.name]=N.value}),T[S.id]=M}if(S.objectgroup&&((C[S.id]||(C[S.id]={})).objectgroup=S.objectgroup,S.objectgroup.objects)){var E=S.objectgroup.objects.map(function(N){return f(N)});C[S.id].objectgroup.objects=E}S.animation&&((C[S.id]||(C[S.id]={})).animation=S.animation),S.type&&((C[S.id]||(C[S.id]={})).type=S.type)}}Array.isArray(m.wangsets)&&(C=C||{},T=T||{},u(m.wangsets,C)),C&&(y.tileData=C,y.tileProperties=T)}else if(m.tileproperties&&(y.tileProperties=m.tileproperties),m.tiles){y.tileData=m.tiles;for(d in y.tileData){var A=y.tileData[d].objectgroup;if(A&&A.objects){var R=A.objects.map(function(N){return f(N)});y.tileData[d].objectgroup.objects=R}}}y.updateTileData(m.imagewidth,m.imageheight),o.push(y)}else{var w=new p(m.name,m.firstgid,m.tilewidth,m.tileheight,m.margin,m.spacing,m.properties),O=0;for(P=0;P<m.tiles.length;P++){S=m.tiles[P];var F=S.image,b=parseInt(S.id,10),I=m.firstgid+b;w.addImage(I,F),O=Math.max(b,O)}w.maxId=O,c.push(w)}h&&(h.lastgid=m.firstgid-1),h=m}return{tilesets:o,imageCollections:c}};s.exports=l},39642:s=>{var g=function(e,n){for(var p=0;p<e.length;p++){var f=e[p],u=p;if(f.name&&f.name!==""&&(u=f.name),Array.isArray(f.wangtiles)&&f.wangtiles.length>0){var l={},a={},o,c,h;if(Array.isArray(f.edgecolors))for(o=0;o<f.edgecolors.length;o++)h=1+o,c=f.edgecolors[o],c.name!==""&&(l[h]=c.name);if(Array.isArray(f.cornercolors))for(o=0;o<f.cornercolors.length;o++)h=1+o,c=f.cornercolors[o],c.name!==""&&(a[h]=c.name);if(Array.isArray(f.colors))for(o=0;o<f.colors.length;o++)c=f.colors[o],h=1+o,c.name!==""&&(l[h]=a[h]=c.name);for(var d=[l,a,l,a,l,a,l,a],v=0;v<f.wangtiles.length;v++){var m=f.wangtiles[v],y=n[m.tileid]||(n[m.tileid]={});y=y.wangid||(y.wangid={});for(var C=[],T=0;T<Math.min(d.length,m.wangid.length);T++){if(c=m.wangid[T],c===0){C.push(void 0);continue}var P=d[T][c];if(P!==void 0){C.push(P);continue}C.push(c)}y[u]=C}}}};s.exports=g},50044:(s,g,e)=>{s.exports={AssignTileProperties:e(48646),Base64Decode:e(43908),BuildTilesetIndex:e(14556),CreateGroupLayer:e(92044),ParseGID:e(8847),ParseImageLayers:e(78339),ParseJSONTiled:e(2378),ParseObject:e(4281),ParseObjectLayers:e(61136),ParseTileLayers:e(95925),ParseTilesets:e(93392)}},73779:(s,g,e)=>{var n=e(56694),p=e(91963),f=e(7599),u=e(57911),l=e(66458),a=new n({initialize:function(c){this.scene=c,this.systems=c.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],c.sys.events.once(f.BOOT,this.boot,this),c.sys.events.on(f.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(f.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var o=this.systems.events;o.on(f.PRE_UPDATE,this.preUpdate,this),o.on(f.UPDATE,this.update,this),o.once(f.SHUTDOWN,this.shutdown,this)},addEvent:function(o){var c;return o instanceof u?(c=o,this.removeEvent(c),c.elapsed=c.startAt,c.hasDispatched=!1,c.repeatCount=c.repeat===-1||c.loop?999999999999:c.repeat):c=new u(o),this._pendingInsertion.push(c),c},delayedCall:function(o,c,h,d){return this.addEvent({delay:o,callback:c,args:h,callbackScope:d})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(o){Array.isArray(o)||(o=[o]);for(var c=0;c<o.length;c++){var h=o[c];l(this._pendingRemoval,h),l(this._pendingInsertion,h),l(this._active,h)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var o=this._pendingRemoval.length,c=this._pendingInsertion.length;if(!(o===0&&c===0)){var h,d;for(h=0;h<o;h++){d=this._pendingRemoval[h];var v=this._active.indexOf(d);v>-1&&this._active.splice(v,1),d.destroy()}for(h=0;h<c;h++)d=this._pendingInsertion[h],this._active.push(d);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(o,c){if(this.now=o,!this.paused){c*=this.timeScale;for(var h=0;h<this._active.length;h++){var d=this._active[h];if(!d.paused&&(d.elapsed+=c*d.timeScale,d.elapsed>=d.delay)){var v=d.elapsed-d.delay;if(d.elapsed=d.delay,!d.hasDispatched&&d.callback&&(d.hasDispatched=!0,d.callback.apply(d.callbackScope,d.args)),d.repeatCount>0){if(d.repeatCount--,v>=d.delay)for(;v>=d.delay&&d.repeatCount>0;)d.callback&&d.callback.apply(d.callbackScope,d.args),v-=d.delay,d.repeatCount--;d.elapsed=v,d.hasDispatched=!1}else d.hasDispatched&&this._pendingRemoval.push(d)}}}},shutdown:function(){var o;for(o=0;o<this._pendingInsertion.length;o++)this._pendingInsertion[o].destroy();for(o=0;o<this._active.length;o++)this._active[o].destroy();for(o=0;o<this._pendingRemoval.length;o++)this._pendingRemoval[o].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var c=this.systems.events;c.off(f.PRE_UPDATE,this.preUpdate,this),c.off(f.UPDATE,this.update,this),c.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(f.START,this.start,this),this.scene=null,this.systems=null}});p.register("Clock",a,"time"),s.exports=a},20517:(s,g,e)=>{var n=e(56694),p=e(6659),f=e(61286),u=e(72632),l=e(7599),a=new n({Extends:p,initialize:function(c,h){p.call(this),this.scene=c,this.systems=c.sys,this.elapsed=0,this.paused=!0,this.complete=!1,this.totalComplete=0,this.events=[];var d=this.systems.events;d.on(l.PRE_UPDATE,this.preUpdate,this),d.on(l.UPDATE,this.update,this),d.once(l.SHUTDOWN,this.destroy,this),h&&this.add(h)},preUpdate:function(o,c){this.paused||(this.elapsed+=c)},update:function(){if(!this.paused){var o,c=this.events,h=!1,d=this.systems,v;for(o=0;o<c.length;o++){var m=c[o];if(!m.complete&&m.time<=this.elapsed){if(m.complete=!0,this.totalComplete++,m.once&&(h=!0),m.set&&m.target)for(var y in m.set)m.target[y]=m.set[y];m.tween&&d.tweens.add(m.tween),m.sound&&(typeof m.sound=="string"?d.sound.play(m.sound):d.sound.play(m.sound.key,m.sound.config)),v=m.target?m.target:this,m.event&&this.emit(m.event,v),m.run&&m.run.call(v),m.stop&&this.stop()}}if(h)for(o=0;o<c.length;o++)c[o].complete&&c[o].once&&(c.splice(o,1),o--);this.totalComplete>=c.length&&(this.complete=!0)}},play:function(o){return o===void 0&&(o=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,o&&this.reset(),this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(){this.elapsed=0;for(var o=0;o<this.events.length;o++)this.events[o].complete=!1;return this.play(!1)},add:function(o){Array.isArray(o)||(o=[o]);var c=this.events,h=0;c.length>0&&(h=c[c.length-1].time);for(var d=0;d<o.length;d++){var v=o[d],m=u(v,"at",0),y=u(v,"in",null);y!==null&&(m=this.elapsed+y);var C=u(v,"from",null);C!==null&&(m=h+C),c.push({complete:!1,time:m,run:u(v,"run",null),event:u(v,"event",null),target:u(v,"target",null),set:u(v,"set",null),tween:u(v,"tween",null),sound:u(v,"sound",null),once:u(v,"once",!1),stop:u(v,"stop",!1)}),h=m}return this.complete=!1,this},clear:function(){return this.events=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var o=Math.min(this.totalComplete,this.events.length);return o/this.events.length},destroy:function(){var o=this.systems.events;o.off(l.PRE_UPDATE,this.preUpdate,this),o.off(l.UPDATE,this.update,this),o.off(l.SHUTDOWN,this.destroy,this),this.scene=null,this.systems=null,this.events=[]}});f.register("timeline",function(o){return new a(this.scene,o)}),s.exports=a},57911:(s,g,e)=>{var n=e(56694),p=e(72632),f=new n({initialize:function(l){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(l)},reset:function(u){if(this.delay=p(u,"delay",0),this.repeat=p(u,"repeat",0),this.loop=p(u,"loop",!1),this.callback=p(u,"callback",void 0),this.callbackScope=p(u,"callbackScope",this),this.args=p(u,"args",[]),this.timeScale=p(u,"timeScale",1),this.startAt=p(u,"startAt",0),this.paused=p(u,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay===0&&(this.repeat>0||this.loop))throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var u=this.delay+this.delay*this.repeat,l=this.elapsed+this.delay*(this.repeat-this.repeatCount);return l/u}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(u){u===void 0&&(u=!1),this.elapsed=this.delay,this.hasDispatched=!u,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});s.exports=f},97121:(s,g,e)=>{s.exports={Clock:e(73779),Timeline:e(20517),TimerEvent:e(57911)}},64532:(s,g,e)=>{var n=e(66458),p=e(56694),f=e(5454),u=e(68710),l=e(91963),a=e(7599),o=e(91944),c=e(39366),h=e(68061),d=e(45641),v=e(56034),m=new p({initialize:function(C){this.scene=C,this.events=C.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(a.UPDATE,this.update,this),this.events.once(a.SHUTDOWN,this.shutdown,this)},create:function(y){Array.isArray(y)||(y=[y]);for(var C=[],T=0;T<y.length;T++){var P=y[T];P instanceof c||P instanceof d?C.push(P):Array.isArray(P.tweens)?C.push(v(this,P)):C.push(h(this,P))}return C.length===1?C[0]:C},add:function(y){var C=y,T=this.tweens;return C instanceof c||C instanceof d||(Array.isArray(C.tweens)?C=v(this,C):C=h(this,C)),T.push(C.reset()),C},addMultiple:function(y){for(var C,T=[],P=this.tweens,S=0;S<y.length;S++)C=y[S],C instanceof c||C instanceof d||(Array.isArray(C.tweens)?C=v(this,C):C=h(this,C)),P.push(C.reset()),T.push(C);return T},chain:function(y){var C=v(this,y);return this.tweens.push(C.init()),C},getChainedTweens:function(y){return y.getChainedTweens()},has:function(y){return this.tweens.indexOf(y)>-1},existing:function(y){return this.has(y)||this.tweens.push(y.reset()),this},addCounter:function(y){var C=u(this,y);return this.tweens.push(C.reset()),C},stagger:function(y,C){return o(y,C)},setLagSmooth:function(y,C){return y===void 0&&(y=1/1e-8),C===void 0&&(C=0),this.maxLag=y,this.lagSkip=Math.min(C,this.maxLag),this},setFps:function(y){return y===void 0&&(y=240),this.gap=1e3/y,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(y){var C=Date.now()-this.prevTime;C>this.maxLag&&(this.startTime+=C-this.lagSkip),this.prevTime+=C;var T=this.prevTime-this.startTime,P=T-this.nextTime,S=T-this.time*1e3;return P>0||y?(T/=1e3,this.time=T,this.nextTime+=P+(P>=this.gap?4:this.gap-P)):S=0,S},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(y){y===void 0&&(y=!1);var C=this.getDelta(y);if(!(C<=0)){this.processing=!0;var T,P,S=[],M=this.tweens;for(T=0;T<M.length;T++)P=M[T],P.update(C)&&S.push(P);var E=S.length;if(E&&M.length>0){for(T=0;T<E;T++){P=S[T];var A=M.indexOf(P);A>-1&&(P.isPendingRemove()||P.isDestroyed())&&(M.splice(A,1),P.destroy())}S.length=0}this.processing=!1}},remove:function(y){return this.processing?y.setPendingRemoveState():(n(this.tweens,y),y.setRemovedState()),this},reset:function(y){return this.existing(y),y.seek(),y.setActiveState(),this},makeActive:function(y){return this.existing(y),y.setActiveState(),this},each:function(y,C){var T,P=[null];for(T=1;T<arguments.length;T++)P.push(arguments[T]);return this.tweens.forEach(function(S){P[0]=S,y.apply(C,P)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(y){var C=[],T=this.tweens;Array.isArray(y)?y=f(y):y=[y];for(var P=y.length,S=0;S<T.length;S++)for(var M=T[S],E=0;E<P;E++)!M.isDestroyed()&&M.hasTarget(y[E])&&C.push(M);return C},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(y){return this.timeScale=y,this},isTweening:function(y){for(var C=this.tweens,T,P=0;P<C.length;P++)if(T=C[P],T.isPlaying()&&T.hasTarget(y))return!0;return!1},killAll:function(){for(var y=this.processing?this.getTweens():this.tweens,C=0;C<y.length;C++)y[C].destroy();return this.processing||(y.length=0),this},killTweensOf:function(y){for(var C=this.getTweensOf(y),T=0;T<C.length;T++)C[T].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(a.UPDATE,this.update,this),this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.events=null}});l.register("TweenManager",m,"tweens"),s.exports=m},63130:s=>{var g=function(e,n,p){return e&&e.hasOwnProperty(n)?e[n]:p};s.exports=g},21902:(s,g,e)=>{var n=e(35060),p=e(40587),f=function(u,l){var a=n.Power0;if(typeof u=="string")if(n.hasOwnProperty(u))a=n[u];else{var o="";if(u.indexOf(".")){o=u.substring(u.indexOf(".")+1);var c=o.toLowerCase();c==="in"?o="easeIn":c==="out"?o="easeOut":c==="inout"&&(o="easeInOut")}u=p(u.substring(0,u.indexOf(".")+1)+o),n.hasOwnProperty(u)&&(a=n[u])}else typeof u=="function"&&(a=u);if(!l)return a;var h=l.slice(0);return h.unshift(0),function(d){return h[0]=d,a.apply(this,h)}};s.exports=f},4840:(s,g,e)=>{var n=e(63210),p=e(88332),f=e(47614),u={bezier:n,catmull:p,catmullrom:p,linear:f},l=function(a){if(a===null)return null;var o=u.linear;return typeof a=="string"?u.hasOwnProperty(a)&&(o=u[a]):typeof a=="function"&&(o=a),o};s.exports=l},28348:s=>{var g=function(e,n,p){var f;if(e.hasOwnProperty(n)){var u=typeof e[n];u==="function"?f=function(l,a,o,c,h,d){return e[n](l,a,o,c,h,d)}:f=function(){return e[n]}}else typeof p=="function"?f=p:f=function(){return p};return f};s.exports=g},92407:(s,g,e)=>{var n=e(53709),p=function(f){var u,l=[];if(f.hasOwnProperty("props"))for(u in f.props)u.substring(0,1)!=="_"&&l.push({key:u,value:f.props[u]});else for(u in f)n.indexOf(u)===-1&&u.substring(0,1)!=="_"&&l.push({key:u,value:f[u]});return l};s.exports=p},65868:(s,g,e)=>{var n=e(10850),p=function(f){var u=n(f,"targets",null);return u===null||(typeof u=="function"&&(u=u.call()),Array.isArray(u)||(u=[u])),u};s.exports=p},9744:(s,g,e)=>{var n=e(17489),p=e(61616);function f(c){return!!c.getActive&&typeof c.getActive=="function"}function u(c){return!!c.getStart&&typeof c.getStart=="function"}function l(c){return!!c.getEnd&&typeof c.getEnd=="function"}function a(c){return u(c)||l(c)||f(c)}var o=function(c,h){var d,v=function(U,W,D){return D},m=function(U,W,D){return D},y=null,C=typeof h;if(C==="number")v=function(){return h};else if(Array.isArray(h))m=function(){return h[0]},v=function(){return h[h.length-1]};else if(C==="string"){var T=h.toLowerCase(),P=T.substring(0,6)==="random",S=T.substring(0,3)==="int";if(P||S){var M=T.indexOf("("),E=T.indexOf(")"),A=T.indexOf(",");if(M&&E&&A){var R=parseFloat(T.substring(M+1,A)),w=parseFloat(T.substring(A+1,E));P?v=function(){return p(R,w)}:v=function(){return n(R,w)}}else throw new Error("invalid random() format")}else{T=T[0];var O=parseFloat(h.substr(2));switch(T){case"+":v=function(U,W,D){return D+O};break;case"-":v=function(U,W,D){return D-O};break;case"*":v=function(U,W,D){return D*O};break;case"/":v=function(U,W,D){return D/O};break;default:v=function(){return parseFloat(h)}}}}else if(C==="function")v=h;else if(C==="object")if(a(h))f(h)&&(y=h.getActive),l(h)&&(v=h.getEnd),u(h)&&(m=h.getStart);else if(h.hasOwnProperty("value"))d=o(c,h.value);else{var F=h.hasOwnProperty("to"),b=h.hasOwnProperty("from"),I=h.hasOwnProperty("start");if(F&&(b||I)){if(d=o(c,h.to),I){var N=o(c,h.start);d.getActive=N.getEnd}if(b){var z=o(c,h.from);d.getStart=z.getEnd}}}return d||(d={getActive:y,getEnd:v,getStart:m}),d};s.exports=o},68710:(s,g,e)=>{var n=e(502),p=e(99730),f=e(20494),u=e(63130),l=e(21902),a=e(28348),o=e(10850),c=e(9744),h=e(72066),d=e(39366),v=function(m,y,C){if(y instanceof d)return y.parent=m,y;C===void 0?C=p:C=h(p,C);var T=o(y,"from",0),P=o(y,"to",1),S=[{value:T}],M=o(y,"delay",C.delay),E=o(y,"easeParams",C.easeParams),A=o(y,"ease",C.ease),R=c("value",P),w=new d(m,S),O=w.add(0,"value",R.getEnd,R.getStart,R.getActive,l(o(y,"ease",A),o(y,"easeParams",E)),a(y,"delay",M),o(y,"duration",C.duration),u(y,"yoyo",C.yoyo),o(y,"hold",C.hold),o(y,"repeat",C.repeat),o(y,"repeatDelay",C.repeatDelay),!1,!1);O.start=T,O.current=T,w.completeDelay=f(y,"completeDelay",0),w.loop=Math.round(f(y,"loop",0)),w.loopDelay=Math.round(f(y,"loopDelay",0)),w.paused=u(y,"paused",!1),w.persist=u(y,"persist",!1),w.callbackScope=o(y,"callbackScope",w);for(var F=n.TYPES,b=0;b<F.length;b++){var I=F[b],N=o(y,I,!1);if(N){var z=o(y,I+"Params",[]);w.setCallback(I,N,z)}}return w};s.exports=v},91944:(s,g,e)=>{var n=e(21902),p=e(10850),f=e(83392),u=function(l,a){a===void 0&&(a={});var o,c=p(a,"start",0),h=p(a,"ease",null),d=p(a,"grid",null),v=p(a,"from",0),m=v==="first",y=v==="center",C=v==="last",T=typeof v=="number",P=Array.isArray(l),S=parseFloat(P?l[0]:l),M=P?parseFloat(l[1]):0,E=Math.max(S,M);if(P&&(c+=S),d){var A=d[0],R=d[1],w=0,O=0,F=0,b=0,I=[];C?(w=A-1,O=R-1):T?(w=v%A,O=Math.floor(v/A)):y&&(w=(A-1)/2,O=(R-1)/2);for(var N=f.MIN_SAFE_INTEGER,z=0;z<R;z++){I[z]=[];for(var U=0;U<A;U++){F=w-U,b=O-z;var W=Math.sqrt(F*F+b*b);W>N&&(N=W),I[z][U]=W}}}var D=h?n(h):null;return d?o=function(V,L,B,G){var Y=0,X=G%A,k=Math.floor(G/A);X>=0&&X<A&&k>=0&&k<R&&(Y=I[k][X]);var H;if(P){var K=M-S;D?H=Y/N*K*D(Y/N):H=Y/N*K}else D?H=Y*S*D(Y/N):H=Y*S;return H+c}:o=function(V,L,B,G,Y){Y--;var X;m?X=G:y?X=Math.abs(Y/2-G):C?X=Y-G:T&&(X=Math.abs(v-G));var k;if(P){var H;y?H=(M-S)/Y*(X*2):H=(M-S)/Y*X,D?k=H*D(X/Y):k=H}else D?k=Y*E*D(X/Y):k=X*S;return k+c},o};s.exports=u},68061:(s,g,e)=>{var n=e(502),p=e(99730),f=e(20494),u=e(63130),l=e(21902),a=e(4840),o=e(28348),c=e(92407),h=e(65868),d=e(10850),v=e(9744),m=e(72066),y=e(39366),C=function(T,P,S){if(P instanceof y)return P.parent=T,P;S===void 0?S=p:S=m(p,S);var M=h(P);!M&&S.targets&&(M=S.targets);for(var E=c(P),A=d(P,"delay",S.delay),R=d(P,"duration",S.duration),w=d(P,"easeParams",S.easeParams),O=d(P,"ease",S.ease),F=d(P,"hold",S.hold),b=d(P,"repeat",S.repeat),I=d(P,"repeatDelay",S.repeatDelay),N=u(P,"yoyo",S.yoyo),z=u(P,"flipX",S.flipX),U=u(P,"flipY",S.flipY),W=d(P,"interpolation",S.interpolation),D=function($,Q,_,q){if(_==="texture"){var et=q,at=void 0;Array.isArray(q)?(et=q[0],at=q[1]):q.hasOwnProperty("value")?(et=q.value,Array.isArray(q.value)?(et=q.value[0],at=q.value[1]):typeof q.value=="string"&&(et=q.value)):typeof q=="string"&&(et=q),$.addFrame(Q,et,at,o(q,"delay",A),d(q,"duration",R),d(q,"hold",F),d(q,"repeat",b),d(q,"repeatDelay",I),u(q,"flipX",z),u(q,"flipY",U))}else{var ht=v(_,q),ot=a(d(q,"interpolation",W));$.add(Q,_,ht.getEnd,ht.getStart,ht.getActive,l(d(q,"ease",O),d(q,"easeParams",w)),o(q,"delay",A),d(q,"duration",R),u(q,"yoyo",N),d(q,"hold",F),d(q,"repeat",b),d(q,"repeatDelay",I),u(q,"flipX",z),u(q,"flipY",U),ot,ot?q:null)}},V=new y(T,M),L=0;L<E.length;L++)for(var B=E[L].key,G=E[L].value,Y=0;Y<M.length;Y++)B==="scale"&&!M[Y].hasOwnProperty("scale")?(D(V,Y,"scaleX",G),D(V,Y,"scaleY",G)):D(V,Y,B,G);V.completeDelay=f(P,"completeDelay",0),V.loop=Math.round(f(P,"loop",0)),V.loopDelay=Math.round(f(P,"loopDelay",0)),V.paused=u(P,"paused",!1),V.persist=u(P,"persist",!1),V.callbackScope=d(P,"callbackScope",V);for(var X=n.TYPES,k=0;k<X.length;k++){var H=X[k],K=d(P,H,!1);if(K){var j=d(P,H+"Params",[]);V.setCallback(H,K,j)}}return V};s.exports=C},56034:(s,g,e)=>{var n=e(502),p=e(20494),f=e(63130),u=e(65868),l=e(10850),a=e(68061),o=e(45641),c=function(h,d){if(d instanceof o)return d.parent=h,d;var v=new o(h);v.startDelay=l(d,"delay",0),v.completeDelay=p(d,"completeDelay",0),v.loop=Math.round(p(d,"loop",l(d,"repeat",0))),v.loopDelay=Math.round(p(d,"loopDelay",l(d,"repeatDelay",0))),v.paused=f(d,"paused",!1),v.persist=f(d,"persist",!0),v.callbackScope=l(d,"callbackScope",v);var m,y=n.TYPES;for(m=0;m<y.length;m++){var C=y[m],T=l(d,C,!1);if(T){var P=l(d,C+"Params",[]);v.setCallback(C,T,P)}}var S=l(d,"tweens",null);if(Array.isArray(S)){var M=[],E=u(d),A=void 0;for(E&&(A={targets:E}),m=0;m<S.length;m++)M.push(a(v,S[m],A));v.add(M)}return v};s.exports=c},79619:(s,g,e)=>{s.exports={GetBoolean:e(63130),GetEaseFunction:e(21902),GetInterpolationFunction:e(4840),GetNewValue:e(28348),GetProps:e(92407),GetTargets:e(65868),GetValueOp:e(9744),NumberTweenBuilder:e(68710),StaggerBuilder:e(91944),TweenBuilder:e(68061)}},5570:s=>{s.exports="active"},6383:s=>{s.exports="complete"},72582:s=>{s.exports="loop"},90281:s=>{s.exports="pause"},80803:s=>{s.exports="repeat"},13640:s=>{s.exports="resume"},10472:s=>{s.exports="start"},5379:s=>{s.exports="stop"},43449:s=>{s.exports="update"},61541:s=>{s.exports="yoyo"},54272:(s,g,e)=>{s.exports={TWEEN_ACTIVE:e(5570),TWEEN_COMPLETE:e(6383),TWEEN_LOOP:e(72582),TWEEN_PAUSE:e(90281),TWEEN_RESUME:e(13640),TWEEN_REPEAT:e(80803),TWEEN_START:e(10472),TWEEN_STOP:e(5379),TWEEN_UPDATE:e(43449),TWEEN_YOYO:e(61541)}},75193:(s,g,e)=>{var n={States:e(55303),Builders:e(79619),Events:e(54272),TweenManager:e(64532),Tween:e(39366),TweenData:e(15718),TweenFrameData:e(96490),BaseTween:e(502),TweenChain:e(45641)};s.exports=n},502:(s,g,e)=>{var n=e(56694),p=e(6659),f=e(54272),u=e(55303),l=new n({Extends:p,initialize:function(o){p.call(this),this.parent=o,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=u.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(a){return this.timeScale=a,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(f.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(f.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(f.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(f.TWEEN_COMPLETE,"onComplete")},complete:function(a){return a===void 0&&(a=0),a?(this.setCompleteDelayState(),this.countdown=a):this.onCompleteHandler(),this},completeAfterLoop:function(a){return a===void 0&&(a=0),this.loopCounter>a&&(this.loopCounter=a),this},remove:function(){return this.parent.remove(this),this},stop:function(){return!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(f.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(a){this.countdown-=a,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(f.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(a){return this.countdown-=a,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(f.TWEEN_START,"onStart"),a=0),a},updateCompleteDelay:function(a){this.countdown-=a,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(a,o,c){return c===void 0&&(c=[]),this.callbacks.hasOwnProperty(a)&&(this.callbacks[a]={func:o,params:c}),this},setPendingState:function(){this.state=u.PENDING},setActiveState:function(){this.state=u.ACTIVE},setLoopDelayState:function(){this.state=u.LOOP_DELAY},setCompleteDelayState:function(){this.state=u.COMPLETE_DELAY},setStartDelayState:function(){this.state=u.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=u.PENDING_REMOVE},setRemovedState:function(){this.state=u.REMOVED},setFinishedState:function(){this.state=u.FINISHED},setDestroyedState:function(){this.state=u.DESTROYED},isPending:function(){return this.state===u.PENDING},isActive:function(){return this.state===u.ACTIVE},isLoopDelayed:function(){return this.state===u.LOOP_DELAY},isCompleteDelayed:function(){return this.state===u.COMPLETE_DELAY},isStartDelayed:function(){return this.state===u.START_DELAY},isPendingRemove:function(){return this.state===u.PENDING_REMOVE},isRemoved:function(){return this.state===u.REMOVED},isFinished:function(){return this.state===u.FINISHED},isDestroyed:function(){return this.state===u.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(a){a.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});l.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],s.exports=l},65521:(s,g,e)=>{var n=e(56694),p=e(54272),f=e(55303),u=new n({initialize:function(a,o,c,h,d,v,m,y,C,T){this.tween=a,this.targetIndex=o,this.duration=h,this.totalDuration=0,this.delay=0,this.getDelay=c,this.yoyo=d,this.hold=v,this.repeat=m,this.repeatDelay=y,this.repeatCounter=0,this.flipX=C,this.flipY=T,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(l){l===void 0&&(l=this.current),this.tween.targets[this.targetIndex][this.key]=l},setCreatedState:function(){this.state=f.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=f.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=f.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=f.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=f.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=f.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=f.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=f.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===f.CREATED},isDelayed:function(){return this.state===f.DELAY},isPendingRender:function(){return this.state===f.PENDING_RENDER},isPlayingForward:function(){return this.state===f.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===f.PLAYING_BACKWARD},isHolding:function(){return this.state===f.HOLD_DELAY},isRepeating:function(){return this.state===f.REPEAT_DELAY},isComplete:function(){return this.state===f.COMPLETE},setStateFromEnd:function(l){this.yoyo?this.onRepeat(l,!0,!0):this.repeatCounter>0?this.onRepeat(l,!0,!1):this.setCompleteState()},setStateFromStart:function(l){this.repeatCounter>0?this.onRepeat(l,!1):this.setCompleteState()},reset:function(){var l=this.tween,a=l.totalTargets,o=this.targetIndex,c=l.targets[o],h=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(c,h,0,o,a,l),this.repeatCounter=this.repeat===-1?f.MAX:this.repeat,this.setPendingRenderState();var d=this.duration+this.hold;this.yoyo&&(d+=this.duration);var v=d+this.repeatDelay;this.totalDuration=this.delay+d,this.repeat===-1?(this.totalDuration+=v*f.MAX,l.isInfinite=!0):this.repeat>0&&(this.totalDuration+=v*this.repeat),this.totalDuration>l.duration&&(l.duration=this.totalDuration),this.delay<l.startDelay&&(l.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(l,a,o){var c=this.tween,h=c.totalTargets,d=this.targetIndex,v=c.targets[d],m=this.key,y=m!=="texture";if(this.elapsed=l,this.progress=l/this.duration,this.flipX&&v.toggleFlipX(),this.flipY&&v.toggleFlipY(),y&&(a||o)&&(this.start=this.getStartValue(v,m,this.start,d,h,c)),o){this.setPlayingBackwardState(),this.dispatchEvent(p.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,y&&(this.end=this.getEndValue(v,m,this.start,d,h,c)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-l,y&&(this.current=this.start,v[m]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(p.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});s.exports=u},99730:s=>{var g={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};s.exports=g},53709:s=>{s.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]},39366:(s,g,e)=>{var n=e(502),p=e(56694),f=e(54272),u=e(99325),l=e(61286),a=e(83392),o=e(55303),c=e(15718),h=e(96490),d=new p({Extends:n,initialize:function(m,y){n.call(this,m),this.targets=y,this.totalTargets=y.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0},add:function(v,m,y,C,T,P,S,M,E,A,R,w,O,F,b,I){var N=new c(this,v,m,y,C,T,P,S,M,E,A,R,w,O,F,b,I);return this.totalData=this.data.push(N),N},addFrame:function(v,m,y,C,T,P,S,M,E,A){var R=new h(this,v,m,y,C,T,P,S,M,E,A);return this.totalData=this.data.push(R),R},getValue:function(v){v===void 0&&(v=0);var m=null;return this.data&&(m=this.data[v].current),m},hasTarget:function(v){return this.targets&&this.targets.indexOf(v)!==-1},updateTo:function(v,m,y){if(y===void 0&&(y=!1),v!=="texture")for(var C=0;C<this.totalData;C++){var T=this.data[C];T.key===v&&(T.isPlayingForward()||T.isPlayingBackward())&&(T.end=m,y&&(T.start=T.current))}return this},restart:function(){switch(this.state){case o.REMOVED:case o.FINISHED:this.seek(),this.parent.makeActive(this);break;case o.PENDING:case o.PENDING_REMOVE:this.parent.reset(this);break;case o.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(f.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,n.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(v,m,y){if(v===void 0&&(v=0),m===void 0&&(m=16.6),y===void 0&&(y=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;y||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(f.TWEEN_ACTIVE,"onActive");var C=this.paused;if(this.paused=!1,v>0){for(var T=Math.floor(v/m),P=v-T*m,S=0;S<T;S++)this.update(m);P>0&&this.update(P)}return this.paused=C,this.isSeeking=!1,this},initTweenData:function(v){v===void 0&&(v=!1),this.duration=0,this.startDelay=a.MAX_SAFE_INTEGER;for(var m=this.data,y=0;y<this.totalData;y++)m[y].reset(v);this.duration=Math.max(this.duration,.01);var C=this.duration,T=this.completeDelay,P=this.loopCounter,S=this.loopDelay;P>0?this.totalDuration=C+T+(C+S)*P:this.totalDuration=C+T},reset:function(v){return v===void 0&&(v=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=o.MAX),v||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(f.TWEEN_ACTIVE,"onActive")),this},update:function(v){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.paused||this.isFinished())return!1;if(v*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(v),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(v),!1;this.hasStarted||(this.startDelay-=v,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(f.TWEEN_START,"onStart"),v=0));var m=!1;if(this.isActive())for(var y=this.data,C=0;C<this.totalData;C++)y[C].update(v)&&(m=!0);this.elapsed+=v,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=v,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),m||this.nextState();var T=this.isPendingRemove();return T&&this.persist&&(this.setFinishedState(),T=!1),T},forward:function(v){return this.update(v),this},rewind:function(v){return this.update(-v),this},dispatchEvent:function(v,m){if(!this.isSeeking){this.emit(v,this,this.targets);var y=this.callbacks[m];y&&y.func.apply(this.callbackScope,[this,this.targets].concat(y.params))}},destroy:function(){n.prototype.destroy.call(this),this.targets=null}});l.register("tween",function(v){return this.scene.sys.tweens.add(v)}),u.register("tween",function(v){return this.scene.sys.tweens.create(v)}),s.exports=d},45641:(s,g,e)=>{var n=e(66458),p=e(502),f=e(56694),u=e(54272),l=e(99325),a=e(61286),o=e(55303),c=new f({Extends:p,initialize:function(d){p.call(this,d),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?o.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive"),this},add:function(h){var d=this.parent.create(h);Array.isArray(d)||(d=[d]);for(var v=this.data,m=0;m<d.length;m++){var y=d[m];y.parent=this,v.push(y.reset())}return this.totalData=v.length,this},remove:function(h){return n(this.data,h),h.setRemovedState(),h===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(h){for(var d=this.data,v=0;v<this.totalData;v++)if(d[v].hasTarget(h))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(h){return h.seek(),h.setActiveState(),this},makeActive:function(h){return h.reset(),h.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(u.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var h=this.data,d=this.totalData,v=0;v<d;v++)h[v].reset(!1);this.currentIndex=0,this.currentTween=h[0]},update:function(h){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.isFinished()||this.paused)return!1;h*=this.parent.timeScale,this.isLoopDelayed()?this.updateLoopCountdown(h):this.isCompleteDelayed()?this.updateCompleteDelay(h):this.isStartDelayed()&&(h=this.updateStartCountdown(h));var d=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(h)&&this.nextTween()&&this.nextState(),d=this.isPendingRemove(),d&&this.persist&&(this.setFinishedState(),d=!1)),d},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(h){this.currentIndex=h,this.currentTween=this.data[h],this.currentTween.setActiveState(),this.currentTween.dispatchEvent(u.TWEEN_ACTIVE,"onActive")},dispatchEvent:function(h,d){this.emit(h,this);var v=this.callbacks[d];v&&v.func.apply(this.callbackScope,[this].concat(v.params))},destroy:function(){p.prototype.destroy.call(this),this.currentTween=null}});a.register("tweenchain",function(h){return this.scene.sys.tweens.chain(h)}),l.register("tweenchain",function(h){return this.scene.sys.tweens.create(h)}),s.exports=c},15718:(s,g,e)=>{var n=e(65521),p=e(82897),f=e(56694),u=e(54272),l=new f({Extends:n,initialize:function(o,c,h,d,v,m,y,C,T,P,S,M,E,A,R,w,O){n.call(this,o,c,C,T,P,S,M,E,A,R),this.key=h,this.getActiveValue=m,this.getEndValue=d,this.getStartValue=v,this.ease=y,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=w,this.interpolationData=O},reset:function(a){n.prototype.reset.call(this);var o=this.tween.targets[this.targetIndex],c=this.key;a&&(o[c]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(o[c]=this.getActiveValue(o,c,0))},update:function(a){var o=this.tween,c=o.totalTargets,h=this.targetIndex,d=o.targets[h],v=this.key;if(!d)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=a,this.elapsed<=0&&(this.elapsed=0,a=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(u.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(d,v,d[v],h,c,o),this.end=this.getEndValue(d,v,this.start,h,c,o),this.current=this.start,d[v]=this.start,this.setPlayingForwardState(),!0;var m=this.isPlayingForward(),y=this.isPlayingBackward();if(m||y){var C=this.elapsed,T=this.duration,P=0,S=!1;C+=a,C>=T?(P=C-T,C=T,S=!0):C<0&&(C=0);var M=p(C/T,0,1);if(this.elapsed=C,this.progress=M,this.previous=this.current,S)m?(this.current=this.end,d[v]=this.end,this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(P)):(this.current=this.start,d[v]=this.start,this.setStateFromStart(P));else{m||(M=1-M);var E=this.ease(M);this.interpolation?this.current=this.interpolation(this.interpolationData,E):this.current=this.start+(this.end-this.start)*E,d[v]=this.current}this.dispatchEvent(u.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(a,o){var c=this.tween;if(!c.isSeeking){var h=c.targets[this.targetIndex],d=this.key,v=this.current,m=this.previous;c.emit(a,c,d,h,v,m);var y=c.callbacks[o];y&&y.func.apply(c.callbackScope,[c,h,d,v,m].concat(y.params))}},destroy:function(){n.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});s.exports=l},96490:(s,g,e)=>{var n=e(65521),p=e(82897),f=e(56694),u=e(54272),l=new f({Extends:n,initialize:function(o,c,h,d,v,m,y,C,T,P,S){n.call(this,o,c,v,m,!1,y,C,T,P,S),this.key="texture",this.startTexture=null,this.endTexture=h,this.startFrame=null,this.endFrame=d,this.yoyo=C!==0},reset:function(a){n.prototype.reset.call(this);var o=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=o.texture.key,this.startFrame=o.frame.name),a&&o.setTexture(this.startTexture,this.startFrame)},update:function(a){var o=this.tween,c=this.targetIndex,h=o.targets[c];if(!h)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=a,this.elapsed<=0&&(this.elapsed=0,a=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(u.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&h.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var d=this.isPlayingForward(),v=this.isPlayingBackward();if(d||v){var m=this.elapsed,y=this.duration,C=0,T=!1;m+=a,m>=y?(C=m-y,m=y,T=!0):m<0&&(m=0);var P=p(m/y,0,1);this.elapsed=m,this.progress=P,T&&(d?(h.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(C)):(h.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(C))),this.dispatchEvent(u.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(a,o){var c=this.tween;if(!c.isSeeking){var h=c.targets[this.targetIndex],d=this.key;c.emit(a,c,d,h);var v=c.callbacks[o];v&&v.func.apply(c.callbackScope,[c,h,d].concat(v.params))}},destroy:function(){n.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});s.exports=l},55303:s=>{var g={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};s.exports=g},56694:s=>{function g(l){return!!l.get&&typeof l.get=="function"||!!l.set&&typeof l.set=="function"}function e(l,a,o){var c=o?l[a]:Object.getOwnPropertyDescriptor(l,a);return!o&&c.value&&typeof c.value=="object"&&(c=c.value),c&&g(c)?(typeof c.enumerable=="undefined"&&(c.enumerable=!0),typeof c.configurable=="undefined"&&(c.configurable=!0),c):!1}function n(l,a){var o=Object.getOwnPropertyDescriptor(l,a);return o?(o.value&&typeof o.value=="object"&&(o=o.value),o.configurable===!1):!1}function p(l,a,o,c){for(var h in a)if(!!a.hasOwnProperty(h)){var d=e(a,h,o);if(d!==!1){var v=c||l;if(n(v.prototype,h)){if(u.ignoreFinals)continue;throw new Error("cannot override final property '"+h+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(l.prototype,h,d)}else l.prototype[h]=a[h]}}function f(l,a){if(!!a){Array.isArray(a)||(a=[a]);for(var o=0;o<a.length;o++)p(l,a[o].prototype||a[o])}}function u(l){l||(l={});var a,o;if(l.initialize){if(typeof l.initialize!="function")throw new Error("initialize must be a function");a=l.initialize,delete l.initialize}else if(l.Extends){var c=l.Extends;a=function(){c.apply(this,arguments)}}else a=function(){};l.Extends?(a.prototype=Object.create(l.Extends.prototype),a.prototype.constructor=a,o=l.Extends,delete l.Extends):a.prototype.constructor=a;var h=null;return l.Mixins&&(h=l.Mixins,delete l.Mixins),f(a,h),p(a,l,!0,o),a}u.extend=p,u.mixin=f,u.ignoreFinals=!1,s.exports=u},72283:s=>{var g=function(){};s.exports=g},10618:s=>{var g=function(){return null};s.exports=g},78991:s=>{var g=function(e,n,p,f,u){if(u===void 0&&(u=e),p>0){var l=p-e.length;if(l<=0)return null}if(!Array.isArray(n))return e.indexOf(n)===-1?(e.push(n),f&&f.call(u,n),n):null;for(var a=n.length-1;a>=0;)e.indexOf(n[a])!==-1&&n.splice(a,1),a--;if(a=n.length,a===0)return null;p>0&&a>l&&(n.splice(l),a=l);for(var o=0;o<a;o++){var c=n[o];e.push(c),f&&f.call(u,c)}return n};s.exports=g},48522:s=>{var g=function(e,n,p,f,u,l){if(p===void 0&&(p=0),l===void 0&&(l=e),f>0){var a=f-e.length;if(a<=0)return null}if(!Array.isArray(n))return e.indexOf(n)===-1?(e.splice(p,0,n),u&&u.call(l,n),n):null;for(var o=n.length-1;o>=0;)e.indexOf(n[o])!==-1&&n.pop(),o--;if(o=n.length,o===0)return null;f>0&&o>a&&(n.splice(a),o=a);for(var c=o-1;c>=0;c--){var h=n[c];e.splice(p,0,h),u&&u.call(l,h)}return n};s.exports=g},58742:s=>{var g=function(e,n){var p=e.indexOf(n);return p!==-1&&p<e.length&&(e.splice(p,1),e.push(n)),n};s.exports=g},30164:(s,g,e)=>{var n=e(45838),p=function(f,u,l,a,o){a===void 0&&(a=0),o===void 0&&(o=f.length);var c=0;if(n(f,a,o))for(var h=a;h<o;h++){var d=f[h];d[u]===l&&c++}return c};s.exports=p},36337:s=>{var g=function(e,n,p){var f,u=[null];for(f=3;f<arguments.length;f++)u.push(arguments[f]);for(f=0;f<e.length;f++)u[0]=e[f],n.apply(p,u);return e};s.exports=g},46208:(s,g,e)=>{var n=e(45838),p=function(f,u,l,a,o){if(a===void 0&&(a=0),o===void 0&&(o=f.length),n(f,a,o)){var c,h=[null];for(c=5;c<arguments.length;c++)h.push(arguments[c]);for(c=a;c<o;c++)h[0]=f[c],u.apply(l,h)}return f};s.exports=p},2406:s=>{var g=function(e,n,p){if(n.length){if(n.length===1)return n[0]}else return NaN;var f=1,u,l;if(p){if(e<n[0][p])return n[0];for(;n[f][p]<e;)f++}else for(;n[f]<e;)f++;return f>n.length&&(f=n.length),p?(u=n[f-1][p],l=n[f][p],l-e<=e-u?n[f]:n[f-1]):(u=n[f-1],l=n[f],l-e<=e-u?l:u)};s.exports=g},5454:s=>{var g=function(e,n){n===void 0&&(n=[]);for(var p=0;p<e.length;p++)Array.isArray(e[p])?g(e[p],n):n.push(e[p]);return n};s.exports=g},71608:(s,g,e)=>{var n=e(45838),p=function(f,u,l,a,o){a===void 0&&(a=0),o===void 0&&(o=f.length);var c=[];if(n(f,a,o))for(var h=a;h<o;h++){var d=f[h];(!u||u&&l===void 0&&d.hasOwnProperty(u)||u&&l!==void 0&&d[u]===l)&&c.push(d)}return c};s.exports=p},51463:(s,g,e)=>{var n=e(45838),p=function(f,u,l,a,o){if(a===void 0&&(a=0),o===void 0&&(o=f.length),n(f,a,o))for(var c=a;c<o;c++){var h=f[c];if(!u||u&&l===void 0&&h.hasOwnProperty(u)||u&&l!==void 0&&h[u]===l)return h}return null};s.exports=p},72861:s=>{var g=function(e,n,p){n===void 0&&(n=0),p===void 0&&(p=e.length);var f=n+Math.floor(Math.random()*p);return e[f]===void 0?null:e[f]};s.exports=g},24218:s=>{var g=function(e,n,p){if(n===p)return e;var f=e.indexOf(n),u=e.indexOf(p);if(f<0||u<0)throw new Error("Supplied items must be elements of the same array");return f>u||(e.splice(f,1),u===e.length-1?e.push(n):e.splice(u,0,n)),e};s.exports=g},58258:s=>{var g=function(e,n,p){if(n===p)return e;var f=e.indexOf(n),u=e.indexOf(p);if(f<0||u<0)throw new Error("Supplied items must be elements of the same array");return f<u||(e.splice(f,1),u===0?e.unshift(n):e.splice(u,0,n)),e};s.exports=g},51172:s=>{var g=function(e,n){var p=e.indexOf(n);if(p>0){var f=e[p-1],u=e.indexOf(f);e[p]=f,e[u]=n}return e};s.exports=g},68396:s=>{var g=function(e,n,p){var f=e.indexOf(n);if(f===-1||p<0||p>=e.length)throw new Error("Supplied index out of bounds");return f!==p&&(e.splice(f,1),e.splice(p,0,n)),n};s.exports=g},27555:s=>{var g=function(e,n){var p=e.indexOf(n);if(p!==-1&&p<e.length-1){var f=e[p+1],u=e.indexOf(f);e[p]=f,e[u]=n}return e};s.exports=g},13401:s=>{var g=function(e,n,p,f){var u=[],l,a=!1;if((p||f)&&(a=!0,p||(p=""),f||(f="")),n<e)for(l=e;l>=n;l--)a?u.push(p+l.toString()+f):u.push(l);else for(l=e;l<=n;l++)a?u.push(p+l.toString()+f):u.push(l);return u};s.exports=g},89955:(s,g,e)=>{var n=e(67233),p=function(f,u,l){f===void 0&&(f=0),u===void 0&&(u=null),l===void 0&&(l=1),u===null&&(u=f,f=0);for(var a=[],o=Math.max(n((u-f)/(l||1)),0),c=0;c<o;c++)a.push(f),f+=l;return a};s.exports=p},53466:s=>{function g(p,f,u){var l=p[f];p[f]=p[u],p[u]=l}function e(p,f){return p<f?-1:p>f?1:0}var n=function(p,f,u,l,a){for(u===void 0&&(u=0),l===void 0&&(l=p.length-1),a===void 0&&(a=e);l>u;){if(l-u>600){var o=l-u+1,c=f-u+1,h=Math.log(o),d=.5*Math.exp(2*h/3),v=.5*Math.sqrt(h*d*(o-d)/o)*(c-o/2<0?-1:1),m=Math.max(u,Math.floor(f-c*d/o+v)),y=Math.min(l,Math.floor(f+(o-c)*d/o+v));n(p,f,m,y,a)}var C=p[f],T=u,P=l;for(g(p,u,f),a(p[l],C)>0&&g(p,u,l);T<P;){for(g(p,T,P),T++,P--;a(p[T],C)<0;)T++;for(;a(p[P],C)>0;)P--}a(p[u],C)===0?g(p,u,P):(P++,g(p,P,l)),P<=f&&(u=P+1),f<=P&&(l=P-1)}};s.exports=n},75757:(s,g,e)=>{var n=e(10850),p=e(18592),f=function(l,a,o){for(var c=[],h=0;h<l.length;h++)for(var d=0;d<a.length;d++)for(var v=0;v<o;v++)c.push({a:l[h],b:a[d]});return c},u=function(l,a,o){var c=n(o,"max",0),h=n(o,"qty",1),d=n(o,"random",!1),v=n(o,"randomB",!1),m=n(o,"repeat",0),y=n(o,"yoyo",!1),C=[];if(v&&p(a),m===-1)if(c===0)m=0;else{var T=l.length*a.length*h;y&&(T*=2),m=Math.ceil(c/T)}for(var P=0;P<=m;P++){var S=f(l,a,h);d&&p(S),C=C.concat(S),y&&(S.reverse(),C=C.concat(S))}return c&&C.splice(c),C};s.exports=u},66458:(s,g,e)=>{var n=e(72677),p=function(f,u,l,a){a===void 0&&(a=f);var o;if(!Array.isArray(u))return o=f.indexOf(u),o!==-1?(n(f,o),l&&l.call(a,u),u):null;for(var c=u.length-1,h=[];c>=0;){var d=u[c];o=f.indexOf(d),o!==-1&&(n(f,o),h.push(d),l&&l.call(a,d)),c--}return h};s.exports=p},8324:(s,g,e)=>{var n=e(72677),p=function(f,u,l,a){if(a===void 0&&(a=f),u<0||u>f.length-1)throw new Error("Index out of bounds");var o=n(f,u);return l&&l.call(a,o),o};s.exports=p},47427:(s,g,e)=>{var n=e(45838),p=function(f,u,l,a,o){if(u===void 0&&(u=0),l===void 0&&(l=f.length),o===void 0&&(o=f),n(f,u,l)){var c=l-u,h=f.splice(u,c);if(a)for(var d=0;d<h.length;d++){var v=h[d];a.call(o,v)}return h}else return[]};s.exports=p},50147:(s,g,e)=>{var n=e(72677),p=function(f,u,l){u===void 0&&(u=0),l===void 0&&(l=f.length);var a=u+Math.floor(Math.random()*l);return n(f,a)};s.exports=p},80402:s=>{var g=function(e,n,p){var f=e.indexOf(n),u=e.indexOf(p);return f!==-1&&u===-1?(e[f]=p,!0):!1};s.exports=g},77640:s=>{var g=function(e,n){n===void 0&&(n=1);for(var p=null,f=0;f<n;f++)p=e.shift(),e.push(p);return p};s.exports=g},38487:s=>{var g=function(e,n){n===void 0&&(n=1);for(var p=null,f=0;f<n;f++)p=e.pop(),e.unshift(p);return p};s.exports=g},45838:s=>{var g=function(e,n,p,f){var u=e.length;if(n<0||n>u||n>=p||p>u){if(f)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};s.exports=g},27847:s=>{var g=function(e,n){var p=e.indexOf(n);return p!==-1&&p>0&&(e.splice(p,1),e.unshift(n)),n};s.exports=g},6034:(s,g,e)=>{var n=e(45838),p=function(f,u,l,a,o){if(a===void 0&&(a=0),o===void 0&&(o=f.length),n(f,a,o))for(var c=a;c<o;c++){var h=f[c];h.hasOwnProperty(u)&&(h[u]=l)}return f};s.exports=p},18592:s=>{var g=function(e){for(var n=e.length-1;n>0;n--){var p=Math.floor(Math.random()*(n+1)),f=e[n];e[n]=e[p],e[p]=f}return e};s.exports=g},28834:s=>{var g=function(e){var n=/\D/g;return e.sort(function(p,f){return parseInt(p.replace(n,""),10)-parseInt(f.replace(n,""),10)}),e};s.exports=g},72677:s=>{var g=function(e,n){if(!(n>=e.length)){for(var p=e.length-1,f=e[n],u=n;u<p;u++)e[u]=e[u+1];return e.length=p,f}};s.exports=g},17922:(s,g,e)=>{var n=e(77290);function p(a,o){return String(a).localeCompare(o)}function f(a,o){var c=a.length;if(c<=1)return a;for(var h=new Array(c),d=1;d<c;d*=2){u(a,o,d,h);var v=a;a=h,h=v}return a}function u(a,o,c,h){var d=a.length,v=0,m=c*2,y,C,T,P,S;for(y=0;y<d;y+=m)for(C=y+c,T=C+c,C>d&&(C=d),T>d&&(T=d),P=y,S=C;;)if(P<C&&S<T)o(a[P],a[S])<=0?h[v++]=a[P++]:h[v++]=a[S++];else if(P<C)h[v++]=a[P++];else if(S<T)h[v++]=a[S++];else break}var l=function(a,o){if(o===void 0&&(o=p),!a||a.length<2)return a;if(n.features.stableSort)return a.sort(o);var c=f(a,o);return c!==a&&u(c,null,a.length,a),a};s.exports=l},96928:s=>{var g=function(e,n,p){if(n===p)return e;var f=e.indexOf(n),u=e.indexOf(p);if(f<0||u<0)throw new Error("Supplied items must be elements of the same array");return e[f]=p,e[u]=n,e};s.exports=g},59959:(s,g,e)=>{s.exports={Matrix:e(13515),Add:e(78991),AddAt:e(48522),BringToTop:e(58742),CountAllMatching:e(30164),Each:e(36337),EachInRange:e(46208),FindClosestInSorted:e(2406),Flatten:e(5454),GetAll:e(71608),GetFirst:e(51463),GetRandom:e(72861),MoveDown:e(51172),MoveTo:e(68396),MoveUp:e(27555),MoveAbove:e(24218),MoveBelow:e(58258),NumberArray:e(13401),NumberArrayStep:e(89955),QuickSelect:e(53466),Range:e(75757),Remove:e(66458),RemoveAt:e(8324),RemoveBetween:e(47427),RemoveRandomElement:e(50147),Replace:e(80402),RotateLeft:e(77640),RotateRight:e(38487),SafeRange:e(45838),SendToBack:e(27847),SetAll:e(6034),Shuffle:e(18592),SortByDigits:e(28834),SpliceOne:e(72677),StableSort:e(17922),Swap:e(96928)}},97494:s=>{var g=function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))return!1;for(var n=e[0].length,p=1;p<e.length;p++)if(e[p].length!==n)return!1;return!0};s.exports=g},68428:(s,g,e)=>{var n=e(76400),p=e(97494),f=function(u){var l="";if(!p(u))return l;for(var a=0;a<u.length;a++){for(var o=0;o<u[a].length;o++){var c=u[a][o].toString();c!=="undefined"?l+=n(c,2):l+="?",o<u[a].length-1&&(l+=" |")}if(a<u.length-1){l+=`
`;for(var h=0;h<u[a].length;h++)l+="---",h<u[a].length-1&&(l+="+");l+=`
`}}return l};s.exports=f},59521:s=>{var g=function(e){return e.reverse()};s.exports=g},51995:s=>{var g=function(e){for(var n=0;n<e.length;n++)e[n].reverse();return e};s.exports=g},89011:(s,g,e)=>{var n=e(63515),p=function(f){return n(f,180)};s.exports=p},42549:(s,g,e)=>{var n=e(63515),p=function(f){return n(f,90)};s.exports=p},63515:(s,g,e)=>{var n=e(97494),p=e(78581),f=function(u,l){if(l===void 0&&(l=90),!n(u))return null;if(typeof l!="string"&&(l=(l%360+360)%360),l===90||l===-270||l==="rotateLeft")u=p(u),u.reverse();else if(l===-90||l===270||l==="rotateRight")u.reverse(),u=p(u);else if(Math.abs(l)===180||l==="rotate180"){for(var a=0;a<u.length;a++)u[a].reverse();u.reverse()}return u};s.exports=f},14305:(s,g,e)=>{var n=e(63515),p=function(f){return n(f,-90)};s.exports=p},27365:(s,g,e)=>{var n=e(77640),p=e(38487),f=function(u,l,a){if(l===void 0&&(l=0),a===void 0&&(a=0),a!==0&&(a<0?n(u,Math.abs(a)):p(u,a)),l!==0)for(var o=0;o<u.length;o++){var c=u[o];l<0?n(c,Math.abs(l)):p(c,l)}return u};s.exports=f},78581:s=>{var g=function(e){for(var n=e.length,p=e[0].length,f=new Array(p),u=0;u<p;u++){f[u]=new Array(n);for(var l=n-1;l>-1;l--)f[u][l]=e[l][u]}return f};s.exports=g},13515:(s,g,e)=>{s.exports={CheckMatrix:e(97494),MatrixToString:e(68428),ReverseColumns:e(59521),ReverseRows:e(51995),Rotate180:e(89011),RotateLeft:e(42549),RotateMatrix:e(63515),RotateRight:e(14305),Translate:e(27365),TransposeMatrix:e(78581)}},40581:s=>{var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=function(n,p){for(var f=new Uint8Array(n),u=f.length,l=p?"data:"+p+";base64,":"",a=0;a<u;a+=3)l+=g[f[a]>>2],l+=g[(f[a]&3)<<4|f[a+1]>>4],l+=g[(f[a+1]&15)<<2|f[a+2]>>6],l+=g[f[a+2]&63];return u%3===2?l=l.substring(0,l.length-1)+"=":u%3===1&&(l=l.substring(0,l.length-2)+"=="),l};s.exports=e},82329:s=>{for(var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),n=0;n<g.length;n++)e[g.charCodeAt(n)]=n;var p=function(f){f=f.substr(f.indexOf(",")+1);var u=f.length,l=u*.75,a=0,o,c,h,d;f[u-1]==="="&&(l--,f[u-2]==="="&&l--);for(var v=new ArrayBuffer(l),m=new Uint8Array(v),y=0;y<u;y+=4)o=e[f.charCodeAt(y)],c=e[f.charCodeAt(y+1)],h=e[f.charCodeAt(y+2)],d=e[f.charCodeAt(y+3)],m[a++]=o<<2|c>>4,m[a++]=(c&15)<<4|h>>2,m[a++]=(h&3)<<6|d&63;return v};s.exports=p},78417:(s,g,e)=>{s.exports={ArrayBufferToBase64:e(40581),Base64ToArrayBuffer:e(82329)}},22178:(s,g,e)=>{s.exports={Array:e(59959),Base64:e(78417),Objects:e(64615),String:e(50379),NOOP:e(72283),NULL:e(10618)}},32742:s=>{var g=function(e){var n={};for(var p in e)Array.isArray(e[p])?n[p]=e[p].slice(0):n[p]=e[p];return n};s.exports=g},28699:s=>{var g=function(e){var n,p,f;if(typeof e!="object"||e===null)return e;n=Array.isArray(e)?[]:{};for(f in e)p=e[f],n[f]=g(p);return n};s.exports=g},98611:(s,g,e)=>{var n=e(42911),p=function(){var f,u,l,a,o,c,h=arguments[0]||{},d=1,v=arguments.length,m=!1;for(typeof h=="boolean"&&(m=h,h=arguments[1]||{},d=2),v===d&&(h=this,--d);d<v;d++)if((f=arguments[d])!=null)for(u in f)l=h[u],a=f[u],h!==a&&(m&&a&&(n(a)||(o=Array.isArray(a)))?(o?(o=!1,c=l&&Array.isArray(l)?l:[]):c=l&&n(l)?l:{},h[u]=p(m,c,a)):a!==void 0&&(h[u]=a));return h};s.exports=p},20494:(s,g,e)=>{var n=e(5923),p=e(10850),f=function(u,l,a){var o=p(u,l,null);if(o===null)return a;if(Array.isArray(o))return n.RND.pick(o);if(typeof o=="object"){if(o.hasOwnProperty("randInt"))return n.RND.integerInRange(o.randInt[0],o.randInt[1]);if(o.hasOwnProperty("randFloat"))return n.RND.realInRange(o.randFloat[0],o.randFloat[1])}else if(typeof o=="function")return o(l);return o};s.exports=f},72632:s=>{var g=function(e,n,p){var f=typeof e;return!e||f==="number"||f==="string"?p:e.hasOwnProperty(n)&&e[n]!==void 0?e[n]:p};s.exports=g},94324:(s,g,e)=>{var n=e(10850),p=e(82897),f=function(u,l,a,o,c){c===void 0&&(c=a);var h=n(u,l,c);return p(h,a,o)};s.exports=f},10850:s=>{var g=function(e,n,p,f){if(!e&&!f||typeof e=="number")return p;if(e&&e.hasOwnProperty(n))return e[n];if(f&&f.hasOwnProperty(n))return f[n];if(n.indexOf(".")!==-1){for(var u=n.split("."),l=e,a=f,o=p,c=p,h=!0,d=!0,v=0;v<u.length;v++)l&&l.hasOwnProperty(u[v])?(o=l[u[v]],l=l[u[v]]):h=!1,a&&a.hasOwnProperty(u[v])?(c=a[u[v]],a=a[u[v]]):d=!1;return h?o:d?c:p}else return p};s.exports=g},87701:s=>{var g=function(e,n){for(var p=0;p<n.length;p++)if(!e.hasOwnProperty(n[p]))return!1;return!0};s.exports=g},53523:s=>{var g=function(e,n){for(var p=0;p<n.length;p++)if(e.hasOwnProperty(n[p]))return!0;return!1};s.exports=g},19256:s=>{var g=function(e,n){return e.hasOwnProperty(n)};s.exports=g},42911:s=>{var g=function(e){if(!e||typeof e!="object"||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}return!0};s.exports=g},30657:(s,g,e)=>{var n=e(32742),p=function(f,u){var l=n(f);for(var a in u)l.hasOwnProperty(a)||(l[a]=u[a]);return l};s.exports=p},72066:(s,g,e)=>{var n=e(32742),p=function(f,u){var l=n(f);for(var a in u)l.hasOwnProperty(a)&&(l[a]=u[a]);return l};s.exports=p},28820:(s,g,e)=>{var n=e(19256),p=function(f,u){for(var l={},a=0;a<u.length;a++){var o=u[a];n(f,o)&&(l[o]=f[o])}return l};s.exports=p},22440:s=>{var g=function(e,n,p){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(n))return e[n]=p,!0;if(n.indexOf(".")!==-1){for(var f=n.split("."),u=e,l=e,a=0;a<f.length;a++)if(u.hasOwnProperty(f[a]))l=u,u=u[f[a]];else return!1;return l[f[f.length-1]]=p,!0}return!1};s.exports=g},64615:(s,g,e)=>{s.exports={Clone:e(32742),DeepCopy:e(28699),Extend:e(98611),GetAdvancedValue:e(20494),GetFastValue:e(72632),GetMinMaxValue:e(94324),GetValue:e(10850),HasAll:e(87701),HasAny:e(53523),HasValue:e(19256),IsPlainObject:e(42911),Merge:e(30657),MergeRight:e(72066),Pick:e(28820),SetValue:e(22440)}},69429:s=>{var g=function(e,n){return e.replace(/%([0-9]+)/g,function(p,f){return n[Number(f)-1]})};s.exports=g},76400:s=>{var g=function(e,n,p,f){n===void 0&&(n=0),p===void 0&&(p=" "),f===void 0&&(f=3),e=e.toString();var u=0;if(n+1>=e.length)switch(f){case 1:e=new Array(n+1-e.length).join(p)+e;break;case 3:var l=Math.ceil((u=n-e.length)/2),a=u-l;e=new Array(a+1).join(p)+e+new Array(l+1).join(p);break;default:e=e+new Array(n+1-e.length).join(p);break}return e};s.exports=g},76872:s=>{var g=function(e,n){return n===0?e.slice(1):e.slice(0,n-1)+e.slice(n)};s.exports=g},8051:s=>{var g=function(e){return e.split("").reverse().join("")};s.exports=g},76583:s=>{var g=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=Math.random()*16|0,p=e==="x"?n:n&3|8;return p.toString(16)})};s.exports=g},40587:s=>{var g=function(e){return e&&e[0].toUpperCase()+e.slice(1)};s.exports=g},50379:(s,g,e)=>{s.exports={Format:e(69429),Pad:e(76400),RemoveAt:e(76872),Reverse:e(8051),UppercaseFirst:e(40587),UUID:e(76583)}}},t={};function r(s){var g=t[s];if(g!==void 0)return g.exports;var e=t[s]={exports:{}};return i[s](e,e.exports,r),e.exports}r.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(s){if(typeof window=="object")return window}}();var x=r(92491);return x})())});var t9=Rx((lc,Px)=>{(function(i,t){typeof lc=="object"&&typeof Px=="object"?Px.exports=t():typeof define=="function"&&define.amd?define([],t):typeof lc=="object"?lc["AnimatedTiles.min"]=t():i["AnimatedTiles.min"]=t()})(window,function(){return r={},i.m=t=[function(x,s,g){"use strict";var e=function(f,u,l){return u&&n(f.prototype,u),l&&n(f,l),f};function n(f,u){for(var l=0;l<u.length;l++){var a=u[l];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(f,a.key,a)}}var p=function(f){var u=l;if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);function l(a,o){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");return o=function(c,h){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!h||typeof h!="object"&&typeof h!="function"?c:h}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,a,o)),o.map=null,o.animatedTiles=[],o.rate=1,o.active=!1,o.activeLayer=[],o.followTimeScale=!0,a.sys.settings.isBooted||a.sys.events.once("boot",o.boot,o),o}return u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(u,f):u.__proto__=f),e(l,[{key:"boot",value:function(){var a=this.systems.events;a.on("postupdate",this.postUpdate,this),a.on("shutdown",this.shutdown,this),a.on("destroy",this.destroy,this)}},{key:"init",value:function(a){var o={map:a,animatedTiles:this.getAnimatedTiles(a),active:!0,rate:1,activeLayer:[]};a.layers.forEach(function(){return o.activeLayer.push(!0)}),this.animatedTiles.push(o),this.animatedTiles.length===1&&(this.active=!0)}},{key:"setRate",value:function(a){var o,c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;c===null?h===null?this.rate=a:this.animatedTiles[h].rate=a:(o=function(d){d.forEach(function(v){v.index===c&&(v.rate=a)})},h===null?this.animatedTiles.forEach(function(d){o(d.animatedTiles)}):o(this.animatedTiles[h].animatedTiles))}},{key:"resetRates",value:function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null;a===null?(this.rate=1,this.animatedTiles.forEach(function(o){o.rate=1,o.animatedTiles.forEach(function(c){c.rate=1})})):(this.animatedTiles[a].rate=1,this.animatedTiles[a].animatedTiles.forEach(function(o){o.rate=1}))}},{key:"resume",value:function(){var a=this,o=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null,c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,c=c===null?this:this.animatedTiles[c];o===null?c.active=!0:(c.activeLayer[o]=!0,c.animatedTiles.forEach(function(h){a.updateLayer(h,h.tiles[o])}))}},{key:"pause",value:function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null,o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,o=o===null?this:this.animatedTiles[o];a===null?o.active=!1:o.activeLayer[a]=!1}},{key:"postUpdate",value:function(a,o){var c,h=this;this.active&&(c=o*this.rate*(this.followTimeScale?this.scene.time.timeScale:1),this.animatedTiles.forEach(function(d){var v;d.active&&(v=c*d.rate,d.animatedTiles.forEach(function(m){var y,C;m.next-=v*m.rate,m.next<0&&(C=m.currentFrame,y=m.frames[C].tileid,(C=C+1)>m.frames.length-1&&(C=0),m.next=m.frames[C].duration,m.currentFrame=C,m.tiles.forEach(function(T,P){d.activeLayer[P]&&h.updateLayer(m,T,y)}))}))}))}},{key:"updateLayer",value:function(a,o){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:-1,h=[],d=a.frames[a.currentFrame].tileid;o.forEach(function(v){-1<c&&(v===null||v.index!==c)?h.push(v):v.index=d}),h.forEach(function(v){v=o.indexOf(v),-1<v?o.splice(v,1):console.error("This shouldn't happen. Not at all. Blame Phaser Animated Tiles plugin. You'll be fine though.")})}},{key:"shutdown",value:function(){this.animatedTiles.length=0}},{key:"destroy",value:function(){this.shutdown(),this.scene=void 0}},{key:"getAnimatedTiles",value:function(a){var o=this,c=[];return a.tilesets.forEach(function(h){var d=h.tileData;Object.keys(d).forEach(function(v){var m;v=parseInt(v),d[v].hasOwnProperty("animation")&&(m={index:v+h.firstgid,frames:[],currentFrame:0,tiles:[],rate:1},d[v].animation.forEach(function(y){y={duration:y.duration,tileid:y.tileid+h.firstgid},m.frames.push(y)}),m.next=m.frames[0].duration,m.currentFrame=m.frames.findIndex(function(y){return y.tileid===v+h.firstgid}),a.layers.forEach(function(y){var C;y.tilemapLayer&&y.tilemapLayer.type&&y.tilemapLayer.type==="StaticTilemapLayer"?m.tiles.push([]):(C=[],y.data.forEach(function(T){T.forEach(function(P){P&&P.index-h.firstgid===v&&C.push(P)})}),m.tiles.push(C))}),c.push(m))})}),a.layers.forEach(function(h,d){o.activeLayer[d]=!0}),c}},{key:"putTileAt",value:function(a,o,c,h){}},{key:"updateAnimatedTiles",value:function(){var a=null,a=[];this.animatedTiles.forEach(function(o){a.push(o)}),a.forEach(function(o){o.animatedTiles.forEach(function(c){c.tiles.forEach(function(h,d){var v=o.map.layers[d];if(!v.type||v.type!=="StaticTilemapLayer")for(var m=0;m<10;m++)for(var y=0;y<10;y++){var C=o.map.layers[d].data[m][y];C.index==c.index&&(h.indexOf(C)===-1&&h.push(C),C.index=c.frames[c.currentFrame].tileid)}})})})}}]),l}(Phaser.Plugins.ScenePlugin);p.register=function(f){f.register("AnimatedTiles",p,"animatedTiles")},x.exports=p}],i.c=r,i.d=function(x,s,g){i.o(x,s)||Object.defineProperty(x,s,{enumerable:!0,get:g})},i.r=function(x){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(x,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(x,"__esModule",{value:!0})},i.t=function(x,s){if(1&s&&(x=i(x)),8&s||4&s&&typeof x=="object"&&x&&x.__esModule)return x;var g=Object.create(null);if(i.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:x}),2&s&&typeof x!="string")for(var e in x)i.d(g,e,function(n){return x[n]}.bind(null,e));return g},i.n=function(x){var s=x&&x.__esModule?function(){return x.default}:function(){return x};return i.d(s,"a",s),s},i.o=function(x,s){return Object.prototype.hasOwnProperty.call(x,s)},i.p="",i(i.s=0);function i(x){if(r[x])return r[x].exports;var s=r[x]={i:x,l:!1,exports:{}};return t[x].call(s.exports,s,s.exports,i),s.l=!0,s.exports}var t,r})});var r9=Ox(Lx());var xrt=Phaser.Display.Color.HexStringToColor("#00B8DE").color,d9=Phaser.Display.Color.HexStringToColor("#D40F7D").color,ka=class extends Phaser.Scene{constructor(){super("bootScene")}init(){}preload(){this.load.bitmapFont("galaxy","./assets/fonts/galaxy8.png","./assets/fonts/galaxy8.xml"),this.load.image("logo","./assets/graphics/backgrounds/background.png"),this.load.image("bg","./assets/graphics/backgrounds/bgBootScene.png"),this.load.image("progressBar","./assets/graphics/progress-bar.png"),this.load.image("whitePixel","./assets/graphics/whitePixel.png")}create(){this.scale.setParentSize(window.innerWidth,window.innerHeight),this.add.image(0,0,"bg").setOrigin(0,0).setDisplaySize(256,238),this.sys.game.device.os.desktop?(console.log("desktop"),this.playButton=this.rexUI.add.buttons({x:256/2,y:2.2*238/4,orientation:"x",buttons:[this.createButton().setOrigin(.5,.5)],space:{left:0,right:0,top:0,bottom:0,item:6}}).setOrigin(.5,.5).layout().setInteractive({useHandCursor:!0}).on("pointerup",()=>this.scene.run("loadScene")).on("pointerover",()=>this.playButton.setScale(1.1)).on("pointerout",()=>this.playButton.setScale(1))):(console.log("mobile"),this.add.text(256/2,2.3*238/4,"Lancez depuis votre PC",{backgroundColor:"white",color:"#D40F7D"}).setOrigin(.5,.5))}createButton(){return this.rexUI.add.label({x:256/2,y:256/2,width:60,height:20,background:this.rexUI.add.roundRectangle(0,0,100,30,10,d9),text:this.add.text(0,0,"PLAY",{fontSize:18}),align:"center",space:{left:0,right:0}})}};var Eh=class extends Phaser.GameObjects.Sprite{constructor(r){super(r.scene,r.x,r.y,r.texture,r.frame);this.scene.add.existing(this),this.scene.physics.world.enable(this),this.body.setCollideWorldBounds(!0,0,0,!0).setBounce(0,0).setAllowGravity(!1).setFriction(0,0)}preUpdate(r,x){var f;super.preUpdate(r,x);let{left:s,right:g,up:e,down:n,space:p}=this.scene.cursors;if(this.scene.textBox.visible===!0||((f=this.scene.answersGrid)==null?void 0:f.visible)===!0){this.body.setVelocity(0);return}s.isDown?(this.body.setVelocityX(-70),!this.anims.isPlaying&&this.anims.play("left",!1)):g.isDown?(this.body.setVelocityX(70),!this.anims.isPlaying&&this.anims.play("right",!1)):this.body.setVelocityX(0),e.isDown?(this.body.setVelocityY(-70),!this.anims.isPlaying&&this.anims.play("back",!1)):n.isDown?(this.body.setVelocityY(70),!this.anims.isPlaying&&this.anims.play("front",!1)):this.body.setVelocityY(0)}};var dc=5125166,cc=8085079;var Ha=class extends Phaser.Scene{constructor(){super({key:"gameScene",active:!1,visible:!1});this.charactersSeen=0;this.score=0;this.soundEnabled=!0}init(r){}create(){return wx(this,null,function*(){var s;this.cursors=this.input.keyboard.createCursorKeys(),this.map=this.make.tilemap({key:"map1",tileWidth:16,tileHeight:16}),this.getData(),this.createLayer(),this.createPlayer(),this.createAnimation();let r=["front","back","left","right"];this.anims.on("animationupdate",g=>{r.includes(g.key)&&this.sound.play("walk")}),this.createBoards(),this.createCharacters(),this.createTextBox(),this.createMinimap(),this.animatedTiles.init(this.map),this.sound.add("typing").setVolume(.3),(s=this.input.keyboard)==null||s.on("keydown-SPACE",()=>{var g;if(this.textBox.visible===!0){if(this.textBox.isTyping===!0){this.textBox.stop(!0);return}if(this.textBox.isLastPage){this.textBox.setActive(!1).setVisible(!1),this.textBoxName.setVisible(!1),(g=this.answersGrid)==null||g.setVisible(!0);return}this.textBox.typeNextPage(),this.sound.play("typing")}}),this.colliderLayer.setCollisionByProperty({collides:!0}),this.topLayer.setCollisionByProperty({fences:!0,coins:!1}),this.zoningLayer.setCollisionByProperty({claviere:!0,croupillac:!0,meuh:!0}),this.percentageComplete=this.add.bitmapText(256-25,10,"galaxy","0%",8).setDepth(1e3).setVisible(!0).setScrollFactor(0,0),this.characters.forEach(g=>{let e=!1;this.physics.add.collider(this.player,g,(n,p)=>{var l;e||(this.charactersSeen+=1,console.log(this.charactersSeen)),e=!0;let u=p.data.values;console.log(u.id),this.textBox.visible===!1&&(this.textBox.setVisible(!0).start(u.text,50),this.createNameTextBox(u),this.sound.play("typing"),(l=u.choices)!=null&&l.length&&this.createGridButtons(u))})}),this.boards.forEach(g=>{this.physics.add.collider(this.player,g,(e,n)=>{let f=n.data.values;console.log(f.id),this.textBox.visible===!1&&(this.textBox.setVisible(!0).start(f.text,50),this.sound.play("typing"))})}),this.textBox.on("pageend",()=>{this.sound.stopByKey("typing")}),this.physics.add.collider(this.player,this.colliderLayer),this.fences.forEach(g=>this.physics.add.collider(this.player,g)),this.coinsNumber=this.add.bitmapText(10,25,"galaxy","0",8).setDepth(1e3).setVisible(!0).setScrollFactor(0,0),this.physics.add.overlap(this.player,this.topLayer,(g,e)=>{let n=e;n.alpha!=0&&n.properties.coins&&(this.sound.add("coinSound",{loop:!1}).setVolume(.3),this.sound.play("coinSound"),n.alpha=0,this.score+=1)}),this.textZone=this.add.text(256/2,10,"").setScrollFactor(0,0).setDepth(1e3).setOrigin(.5),this.physics.add.overlap(this.player,this.zoningLayer,(g,e)=>{let n=e;n.properties.claviere?this.textZone.setText("CAMPUS CLAVI\xC8RES"):n.properties.croupillac?this.textZone.setText("CAMPUS CROUPILLAC"):n.properties.meuh?this.textZone.setText("MAISON DES \xC9L\xC8VES"):this.textZone.setText("")});let x=this.add.image(15,13,"soundOnImage").setScrollFactor(0,0).setInteractive().setDepth(1e4).setScale(.08).on("pointerdown",()=>{this.toggleSound(),x.setTexture(this.soundEnabled?"soundOnImage":"noSoundImage")});this.physics.world.setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels).setBoundsCollision(!0,!0,!0,!0),this.cameras.main.setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels)})}update(r,x){var s;!this.player||(this.minimap.scrollX=Phaser.Math.Clamp(this.player.x,0,3e3),this.minimap.scrollY=Phaser.Math.Clamp(this.player.y,0,2e3),this.minimap.setVisible(!(this.textBox.visible||((s=this.answersGrid)==null?void 0:s.visible))),this.percentageComplete.setText(`${Math.round(100*this.charactersSeen/this.characters.length)}%`),this.coinsNumber.setText(this.score))}getData(){this.jsondataPerso=this.cache.json.get("jsondataPersonnages"),this.jsondataInfo=this.cache.json.get("jsondataInformations")}createPlayer(){this.player=new Eh({scene:this,x:256/2,y:238/2,texture:"playerSprite"}),console.log(this.player),this.player.setDisplaySize(16,16),this.cameras.main.startFollow(this.player),this.player.setPosition(1425,1205),this.player.depth=100}createAnimation(){this.anims.create({key:"front",frameRate:7,frames:this.anims.generateFrameNumbers("playerSprite",{start:0,end:2}),repeat:0}),this.anims.create({key:"left",frameRate:7,frames:this.anims.generateFrameNumbers("playerSprite",{start:3,end:5}),repeat:0}),this.anims.create({key:"right",frameRate:7,frames:this.anims.generateFrameNumbers("playerSprite",{start:6,end:8}),repeat:0}),this.anims.create({key:"back",frameRate:7,frames:this.anims.generateFrameNumbers("playerSprite",{start:9,end:11}),repeat:0}),this.playerSprite=this.add.sprite(256,238,"playerSprite"),this.playerSprite.play("front")}createCharacters(){this.characters=this.jsondataPerso.personnages.map(r=>{let x=this.physics.add.staticSprite(r.positionX,r.positionY,r.name).setDisplaySize(16,16);return x.depth=100,x.setData(r),x})}createBoards(){this.boards=this.jsondataInfo.informations.map(r=>{let x=this.physics.add.staticSprite(r.positionX,r.positionY,r.board).setDisplaySize(16,16);return x.depth=100,x.setData(r),x})}createMinimap(){this.minimap=this.cameras.add(256-100,238-70,100,70).setZoom(.15).setName("mini"),this.minimap.setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels),this.minimap.setBackgroundColor("rgb(0,100,0)"),this.minimap.scrollX=50,this.minimap.scrollY=35}createButton(r){return this.rexUI.add.label({orientation:"x",background:this.rexUI.add.roundRectangle(0,0,0,0,10,cc).setStrokeStyle(2,dc),text:this.rexUI.wrapExpandText(this.add.text(0,0,r,{fontSize:"9px",align:"center"})),expandTextWidth:!0,space:{left:3,right:3,text:0}})}createGridButtons(r){let x=r.choices.map(g=>this.createButton(g.title)),s=Array.from({length:Math.ceil(x.length/2)},(g,e)=>[x[e*2],x[e*2+1]].filter(n=>n));this.answersGrid=this.rexUI.add.gridButtons({x:256/2,y:238-238/5,width:256,height:238/3,buttons:s,space:{top:0,bottom:0,row:3,column:2}}).layout().setDepth(2e3).setScrollFactor(0,0).setVisible(!1),this.answersGrid.on("button.click",(g,e)=>{var n;(n=this.answersGrid)==null||n.setVisible(!1),this.textBox.setVisible(!0).start(r.choices[e].text,50)}),this.answersGrid.add(this.add.image(256-10,238-15-238/3,"cross").setTint(2493956).setAngle(45).setDepth(2010).setScrollFactor(0,0).setInteractive().on("pointerup",()=>{var g;(g=this.answersGrid)==null||g.destroy(),this.answersGrid=null}))}createTextBox(){this.textBox=this.rexUI.add.textBox({x:25,y:165,width:210,height:55,orientation:0,background:this.rexUI.add.roundRectangle(0,0,2,2,20,dc).setStrokeStyle(1,cc),text:this.rexUI.add.BBCodeText(0,0,"",{fixedWidth:190,fixedHeight:45,fontSize:"11px",wrap:{mode:"word",width:180},maxLines:3}).setResolution(1),space:{left:10,right:10,top:10,bottom:10,text:5}}).setOrigin(0).setDepth(1e3).layout().setVisible(!1).setScrollFactor(0,0),this.textBox.setInteractive(),this.textBox.add(this.add.text(256/3-5,238-19,"espace pour passer",{font:"galaxy",fontSize:8}).setDepth(1010).setVisible(!0).setScrollFactor(0,0).setResolution(1))}createNameTextBox(r){this.textBoxName&&this.textBoxName.destroy(),this.textBoxName=this.rexUI.add.textBox({x:35,y:155,height:2,orientation:0,background:this.rexUI.add.roundRectangle(0,0,2,2,10,cc).setStrokeStyle(1,dc),text:this.rexUI.add.BBCodeText(0,0,r.speakerRole,{fontSize:"8px",maxLines:1}).setResolution(1),space:{left:5,right:5,top:2,bottom:2,text:2}}).setOrigin(0).setDepth(1001).layout().setVisible(!0).setScrollFactor(0,0)}toggleSound(){this.soundEnabled=!this.soundEnabled,this.soundEnabled?this.sound.resumeAll():this.sound.pauseAll()}createLayer(){this.map.tilesets.forEach((p,f)=>{this.map.addTilesetImage(this.map.tilesets[f].name,this.map.tilesets[f].name,16,16,1,2)});let r=this.map.createLayer("collider","colliderTileset",0,0);if(r===null)throw new Error("no layer named collider ");this.colliderLayer=r,this.colliderLayer.alpha=0;let x=this.map.createLayer("zoning","colliderTileset",0,0);if(x===null)throw new Error("no layer named zoning");this.zoningLayer=x,this.zoningLayer.alpha=0;let s=this.map.createLayer("buildings",["city1","city4"],0,0);if(s===null)throw new Error("no layer named platform ");this.buildingsLayer=s,this.buildingsLayer.alpha=1,this.buildingsLayer.depth=10;let g=this.map.createLayer("topLayer",["city1","city4","coins"],0,0);if(g===null)throw new Error("no layer named platform ");this.topLayer=g,this.topLayer.alpha=1,this.topLayer.depth=90,this.fences=this.map.createFromObjects("fencesLayer",[{name:"fences"}]),this.fences.forEach(p=>this.physics.add.existing(p,!0));let e=this.map.createLayer("floors",["city1","city4"],0,0);if(e===null)throw new Error("no layer named floors ");this.floorsLayer=e,this.floorsLayer.alpha=1,this.floorsLayer.depth=5;let n=this.map.createLayer("background","city4",0,0);if(n===null)throw new Error("no layer named background ");this.backgroundLayer=n,this.backgroundLayer.alpha=1,this.backgroundLayer.depth=1}};var Art=Phaser.Display.Color.HexStringToColor("#00B8DE").color,v9=Phaser.Display.Color.HexStringToColor("#D40F7D").color,Ka=class extends Phaser.Scene{constructor(){super({key:"loadScene",active:!1,visible:!1,pack:{files:[{key:"logo",type:"image"},{key:"progressBar",type:"image"}]}})}preload(){this.showCover(),this.showProgressBar(),this.load.image("coins","./assets/graphics/tilesets/coins_extruded.png"),this.load.image("city1","./assets/graphics/tilesets/city1_extruded.png"),this.load.image("city4","./assets/graphics/tilesets/city4_extruded.png"),this.load.image("colliderTileset","./assets/graphics/tilesets/colliderTileset_extruded.png"),this.load.tilemapTiledJSON("map1","./assets/maps/map1.json"),this.load.json("jsondataPersonnages","http://127.0.0.1:8000/personnages"),this.load.json("jsondataInformations","http://127.0.0.1:8000/informations"),this.load.image("casque_face","./assets/graphics/personnages/casque_face.png"),this.load.image("chauve_face","./assets/graphics/personnages/chauve_face.png"),this.load.image("brunette_face","./assets/graphics/personnages/brunette_face.png"),this.load.image("garcon_face","./assets/graphics/personnages/garcon_face.png"),this.load.image("fille_face","./assets/graphics/personnages/fille_face.png"),this.load.image("papy_face","./assets/graphics/personnages/papy_face.png"),this.load.image("casque_droite","./assets/graphics/personnages/casque_droite.png"),this.load.image("chauve_droite","./assets/graphics/personnages/chauve_droite.png"),this.load.image("brunette_droite","./assets/graphics/personnages/brunette_droite.png"),this.load.image("garcon_droite","./assets/graphics/personnages/garcon_droite.png"),this.load.image("fille_droite","./assets/graphics/personnages/fille_droite.png"),this.load.image("papy_droite","./assets/graphics/personnages/papy_droite.png"),this.load.image("casque_gauche","./assets/graphics/personnages/casque_gauche.png"),this.load.image("chauve_gauche","./assets/graphics/personnages/chauve_gauche.png"),this.load.image("brunette_gauche","./assets/graphics/personnages/brunette_gauche.png"),this.load.image("garcon_gauche","./assets/graphics/personnages/garcon_gauche.png"),this.load.image("fille_gauche","./assets/graphics/personnages/fille_gauche.png"),this.load.image("papy_gauche","./assets/graphics/personnages/papy_gauche.png"),this.load.image("small_board","./assets/graphics/information_boards/small_board.png"),this.load.image("big_board","./assets/graphics/information_boards/big_board.png"),this.load.audio("audio","./assets/sounds/LudumDare38-Track1.wav"),this.load.audio("coinSound","./assets/sounds/confirm_style_2_002.wav"),this.load.audio("walk","./assets/sounds/Forest1.wav"),this.load.audio("typing","./assets/sounds/quick-mechanical-keyboard-14391.mp3"),this.load.spritesheet("playerSprite","./assets/graphics/playerSprite.png",{frameWidth:16,frameHeight:16}),this.load.image("soundOnImage","./assets/graphics/SoundOn.png"),this.load.image("noSoundImage","./assets/graphics/no-sound.png"),this.load.image("cross","./assets/graphics/cross.png")}create(){}shutdown(){this.load.removeAllListeners(Phaser.Loader.Events.PROGRESS),this.load.removeAllListeners(Phaser.Loader.Events.COMPLETE)}showCover(){this.add.image(256/2,238/5*4+8,"whitePixel").setDisplaySize(242,18)}showProgressBar(){let{width:t,height:r}=this.textures.get("progressBar").get(),x=this.add.sprite(256/2,238/5*4,"progressBar").setOrigin(.5,0),s=this.add.bitmapText(256/2,238/5*4-10,"galaxy","loading:",8,1).setOrigin(.5,.5).setName("loadingpercentage").setAlpha(1).setTintFill(v9);this.load.on(Phaser.Loader.Events.PROGRESS,g=>{s.text=`loading: ${Math.round(g*100)}%`,x.setCrop(0,0,Math.ceil(g*t),r)}).on(Phaser.Loader.Events.COMPLETE,()=>{this.scene.stop("bootScene"),this.scene.start("gameScene")})}};var ja=class{constructor(t){this.scene=t,this.displayList=t.sys.displayList,this.updateList=t.sys.updateList,t.events.once("destroy",this.destroy,this)}destroy(){this.scene=null,this.displayList=null,this.updateList=null}static register(t,r){ja.prototype[t]=r}},J=ja;var m9=function(i){return i===void 0&&(i=g9),this.getFrameNameCallback=i,this},g9=function(i,t,r){return r==="__BASE"?`${i},${t}`:`${r}_${i},${t}`},bx=m9;var x9=function(i){if(typeof i!="object"||i.nodeType||i===i.window)return!1;try{if(i.constructor&&!{}.hasOwnProperty.call(i.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},Dx=x9;var Ix=function(i){var t,r,x;if(i==null||typeof i!="object")return i;if(t=Array.isArray(i)?[]:{},Dx(i))for(x in i)r=i[x],t[x]=Ix(r);else t=i;return t},wt=Ix;var y9=function(i,t,r,x){Array.isArray(t)&&(x=r,r=t,t=void 0),t===void 0&&(t="__BASE"),r=wt(r),x=wt(x),this.textureKey=i,this.baseFrameName=t,this.columns.data=r,this.columns.count=r?r.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=x,this.rows.count=x?x.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var s=this.scene.sys.textures.get(i);if(!s)return this.clear(),this;if(!r||!x)return this.clear(),this;for(var g=s.get(t),e=g.width,n=0,p=0,f=r.length;p<f;p++)r[p]===void 0?n++:typeof r[p]=="number"?e-=r[p]:e-=r[p].width;for(var u=e/n,l=g.height,a=0,p=0,f=x.length;p<f;p++)x[p]===void 0?a++:typeof x[p]=="number"?l-=x[p]:l-=x[p].width;for(var o=l/a,c,h,d,v,m,y=0,C=0,T=0,P=x.length;T<P;T++){x[T]===void 0&&(x[T]=o),typeof x[T]=="number"&&(x[T]={height:x[T],stretch:T%2}),c=x[T],d=c.height,this.rows.stretch+=c.stretch|0,this.rows.minHeight+=c.stretch>0?0:d,y=0;for(var p=0,S=r.length;p<S;p++){if(r[p]===void 0&&(r[p]=u),typeof r[p]=="number"&&(r[p]={width:r[p],stretch:p%2}),h=r[p],v=h.width,T===0&&(this.columns.stretch+=h.stretch|0,this.columns.minWidth+=h.stretch>0?0:v),v>=1&&d>=1){m=this.getFrameNameCallback(p,T,t);var M=typeof m;(M==="string"||M==="number")&&s.add(m,0,y+g.cutX,C+g.cutY,v,d)}y+=v}C+=d}return this.updateTexture(),this},Bx=y9;var C9=function(){if(this.clear(),this.textureKey===void 0)return this;var i=this.scene.sys.textures.get(this.textureKey);if(!i)return this;var t=this.columns.minWidth*this.maxFixedPartScaleX,r=this.rows.minHeight*this.maxFixedPartScaleY,x=this.width-t,s=this.height-r,g=x>=0?this.maxFixedPartScaleX:this.width/t,e=s>=0?this.maxFixedPartScaleY:this.height/r;if(this.preserveRatio){var n=Math.min(g,e);if(g>n){var p=(g-n)*t;x>=0?x+=p:x=p,g=n}if(e>n){var f=(e-n)*r;s>=0?s+=f:s=f,e=n}}this.columns.scale=g,this.rows.scale=e;var u;x>0?u=this.columns.stretch>0?x/this.columns.stretch:0:u=0;var l;s>0?l=this.rows.stretch>0?s/this.rows.stretch:0:l=0;var a,o,c,h,d,v=0,m=0,y;this._beginDraw();for(var C=0,T=this.rows.count;C<T;C++){c=this.rows.data[C],d=c.stretch===0?c.height*e:l*c.stretch,v=0;for(var P=0,S=this.columns.count;P<S;P++)o=this.columns.data[P],h=o.stretch===0?o.width*g:u*o.stretch,a=this.getFrameNameCallback(P,C,this.baseFrameName),i.has(a)&&h>0&&d>0&&(c.stretch===0&&o.stretch===0||this.getStretchMode(P,C)===0?y=0:y=1,y===0?this._drawImage(this.textureKey,a,v,m,h,d):this._drawTileSprite(this.textureKey,a,v,m,h,d)),v+=h;m+=d}this._endDraw()},Gx=C9;var T9=Phaser.Utils.Objects.IsPlainObject,Nx=Phaser.Utils.Objects.GetValue,S9=function(i){return T9(i)?(this.stretchMode.edge=pc(Nx(i,"edge",0)),this.stretchMode.internal=pc(Nx(i,"internal",0))):(i=pc(i),this.stretchMode.edge=i,this.stretchMode.internal=i),this},pc=function(i){return typeof i=="string"&&(i=P9[i]),i},P9={scale:0,repeat:1},Vx=S9;var E9=function(i,t){return i===0||i===this.columns.count-1||t===0||t===this.rows.count-1},zx=E9;var M9=function(i,t){return zx.call(this,i,t)?this.stretchMode.edge:this.stretchMode.internal},Yx=M9;var A9=function(i){return i==null&&(i=!0),this.preserveRatio=i,this},Ux=A9;var R9=function(i,t){return t===void 0&&(t=i),this.maxFixedPartScaleX=i,this.maxFixedPartScaleY=t,this},Xx=R9;var O9=function(){},Gt=O9;var Wx={_beginDraw:Gt,_drawImage:Gt,_drawTileSprite:Gt,_endDraw:Gt,setGetFrameNameCallback:bx,setBaseTexture:Bx,updateTexture:Gx,setStretchMode:Vx,getStretchMode:Yx,setPreserveRatio:Ux,setMaxFixedPartScale:Xx};var Za=Phaser.Utils.Objects.IsPlainObject,Et=Phaser.Utils.Objects.GetValue,w9=function(i,t){class r extends i{constructor(s,g,e,n,p,f,u,l,a,o){Za(g)?(o=g,g=Et(o,"x",0),e=Et(o,"y",0),n=Et(o,"width",1),p=Et(o,"height",1),f=Et(o,"key",void 0),u=Et(o,"baseFrame",void 0),l=Et(o,"columns",void 0),a=Et(o,"rows",void 0)):Za(n)?(o=n,n=Et(o,"width",1),p=Et(o,"height",1),f=Et(o,"key",void 0),u=Et(o,"baseFrame",void 0),l=Et(o,"columns",void 0),a=Et(o,"rows",void 0)):Za(f)?(o=f,f=Et(o,"key",void 0),u=Et(o,"baseFrame",void 0),l=Et(o,"columns",void 0),a=Et(o,"rows",void 0)):Za(u)?(o=u,u=Et(o,"baseFrame",void 0),l=Et(o,"columns",void 0),a=Et(o,"rows",void 0)):Array.isArray(u)?(o=a,a=l,l=u,u=Et(o,"baseFrame",void 0)):Za(l)&&(o=l,l=Et(o,"columns",void 0),a=Et(o,"rows",void 0)),super(s),this.type=t,this.setPosition(g,e).setSize(n,p).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(Et(o,"getFrameNameCallback",void 0)),this.setStretchMode(Et(o,"stretchMode",0)),this.setPreserveRatio(Et(o,"preserveRatio",!0));var c=Et(o,"maxFixedPartScale",1),h=Et(o,"maxFixedPartScaleX",c),d=Et(o,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(h,d),this.setBaseTexture(f,u,l,a)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(s,g){return this.width===s&&this.height===g?this:(super.resize?super.resize(s,g):super.setSize(s,g),this.updateTexture(),this)}}return Object.assign(r.prototype,Wx),r},Mh=w9;var L9=Phaser.Game,F9=function(i){return i instanceof L9},vc=F9;var b9=Phaser.Scene,D9=function(i){return i instanceof b9},Ri=D9;var I9=function(i){if(i==null||typeof i!="object")return null;if(vc(i))return i;if(vc(i.game))return i.game;if(Ri(i))return i.sys.game;if(Ri(i.scene))return i.scene.sys.game},li=I9;var B9=Phaser.GameObjects,Nr=void 0,G9=function(i,t){if(Nr||(Nr={},li(i).events.once("destroy",function(){for(var x in Nr)Nr[x].destroy();Nr=void 0})),!Nr.hasOwnProperty(t)){var r=li(i).scene.systemScene,i=new B9[t](r);i.setOrigin(0),Nr[t]=i}return Nr[t]},Ah=G9;var N9=function(i,t,r,x,s,g){var e=Ah(this,"Image").setTexture(i,t).setDisplaySize(s,g);this.batchDraw(e,r,x)},kx=N9;var V9=function(i,t,r,x,s,g){var e=Ah(this,"TileSprite").setTexture(i,t).setSize(s,g);this.batchDraw(e,r,x)},Hx=V9;var mc=Phaser.GameObjects.RenderTexture,Rh=class extends Mh(mc,"rexNinePatch"){},z9={_beginDraw:mc.prototype.beginDraw,_endDraw:mc.prototype.endDraw,_drawImage:kx,_drawTileSprite:Hx};Object.assign(Rh.prototype,z9);var Kx=Rh;var jx=Kx;var Ja=jx;var Zx=function(i){return i==null||i===""||i.length===0},Y9=function(i,t,r){var x=i;if(!Zx(t)){typeof t=="string"&&(t=t.split("."));for(var s,g=0,e=t.length;g<e;g++){if(s=t[g],x[s]==null||typeof x[s]!="object"){var n;g===e-1?r===void 0?n={}:n=r:n={},x[s]=n}x=x[s]}}return x},U9=function(i,t,r,x){if(x===void 0&&(x="."),typeof i=="object"){if(Zx(t)){if(r==null)return;typeof r=="object"&&(i=r)}else{typeof t=="string"&&(t=t.split(x));var s=t.pop(),g=Y9(i,t);g[s]=r}return i}},Z=U9;J.register("ninePatch",function(i,t,r,x,s,g,e,n){var p=new Ja(this.scene,i,t,r,x,s,g,e,n);return this.scene.add.existing(p),p});Z(window,"RexPlugins.UI.NinePatch",Ja);var X9=Phaser.GameObjects.GetCalcMatrix,W9=function(i,t,r,x){var s=t.getRenderList();if(s.length!==0){r.addToRenderList(t);var g=i.pipelines.set(t.pipeline),e=t.frame.glTexture,n=g.setGameObject(t),p=r.roundPixels,f=X9(t,r,x),u=g.calcMatrix.copyFrom(f.calc),l=t._displayOriginX,a=t._displayOriginY,o=r.alpha*t.alpha;i.pipelines.preBatch(t);for(var c=0,h=s.length;c<h;c++)s[c].webglRender(g,u,o,l,a,e,n,p);i.pipelines.postBatch(t)}},Jx=W9;var k9=Phaser.Renderer.Canvas.SetTransform,H9=function(i,t,r,x){var s=i.currentContext,g=t.getRenderList();if(!(g.length===0||!k9(i,s,t,r,x))){r.addToRenderList(t);var e=r.roundPixels,n=-t._displayOriginX,p=-t._displayOriginY;s.translate(n,p);for(var f=0,u=g.length;f<u;f++)g[f].canvasRender(s,n,p,e);s.restore()}},$x=H9;var Qx={renderWebGL:Jx,renderCanvas:$x};var K9=function(i,t){return this.texture=this.scene.sys.textures.get(i),this.frame=this.texture.get(t),this},qx=K9;var j9=function(i,t){if(this.width===i&&this.height===t)return this;this.width=i,this.height=t,this.updateDisplayOrigin();var r=this.input;return r&&!r.customHitArea&&(r.hitArea.width=i,r.hitArea.height=t),this},gc=j9;var Z9=function(i){return this.lastAppendedChildren.length=0,Array.isArray(i)?(this.children.add(i),this.lastAppendedChildren.push(...i)):(this.children.add(i),this.lastAppendedChildren.push(i)),this},_x=Z9;var J9=Phaser.Utils.Array.Remove,$9=function(i){return this.poolManager&&this.poolManager.free(i),J9(this.children.list,i),this.lastAppendedChildren.length=0,this.dirty=!0,this},ty=$9;var Q9=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},xc=Q9;var q9=function(){return this.lastAppendedChildren},ey=q9;var _9=function(){return this.children.list},iy=_9;var ry={setTint(i){return this.tint=i,this.tintFill=!1,this},setTintFill(i){return this.tint=i,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}};var sy={setTexture:qx,resize:gc,setSize:gc,addChild:_x,removeChild:ty,removeChildren:xc,clear:xc,getLastAppendedChildren:ey,getChildren:iy};Object.assign(sy,ry);var ny=sy;var yc=class{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}},ay=yc;var pe=ay;var t4=Phaser.Utils.Objects.GetValue,e4={},Cc=class{constructor(t){this.pools=t4(t,"pools",e4)}destroy(){this.pools=void 0}free(t){if(!this.pools)return this;var r=t.type;return this.pools.hasOwnProperty(r)||(this.pools[r]=new pe),this.pools[r].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var r=0,x=t.length;r<x;r++)this.free(t[r]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}},oy=Cc;var i4=Phaser.GameObjects.GameObject,r4=Phaser.Utils.Objects.IsPlainObject,$a=Phaser.Utils.Objects.GetValue,s4=Phaser.Structs.List,n4=Phaser.Utils.Array.StableSort,Oh=class extends i4{constructor(t,r,x,s,g,e){r4(r)&&(e=r,r=$a(e,"x",0),x=$a(e,"y",0),s=$a(e,"texture"),g=$a(e,"frame")),r===void 0&&(r=0),x===void 0&&(x=0),super(t,"rexBlitter"),this.children=new s4,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var n=$a(e,"reuseBob",!0);this.poolManager=n?new oy(e):void 0,this.setTexture(s,g).setPosition(r,x).setOrigin(0,0).clearTint().initPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var t=!1,r=this.children.list,x=0,s=r.length;x<s;x++){var g=r[x];a4(g)&&(this.renderList.push(g),t||(t=g.depth!==0))}t&&n4(this.renderList,o4),this.displayListDirty=!1}return this.renderList}},a4=function(i){return i.active&&i.visible&&i.alpha>0},o4=function(i,t){return i._depth-t._depth},Oi=Phaser.GameObjects.Components;Phaser.Class.mixin(Oh,[Oi.Alpha,Oi.BlendMode,Oi.ComputedSize,Oi.Depth,Oi.GetBounds,Oi.Mask,Oi.Origin,Oi.Pipeline,Oi.ScrollFactor,Oi.Transform,Oi.Visible,Qx,ny]);var hy=Oh;var wh="image";var h4=function(i,t,r){if(!i||typeof i=="number")return r;if(i.hasOwnProperty(t))return i[t];if(t.indexOf(".")!==-1){for(var x=t.split("."),s=i,g=r,e=0;e<x.length;e++)if(s.hasOwnProperty(x[e]))g=s[x[e]],s=s[x[e]];else{g=r;break}return g}else return r},Pt=h4;var l4=function(i){if(typeof i!="object"||i===null)return i;if(Array.isArray(i))i.length=0;else for(var t in i)delete i[t];return i},we=l4;var Vr={enableData(){return this.data===void 0&&(this.data={}),this},setData(i,t){if(this.enableData(),arguments.length===1){var r=i;for(i in r)this.data[i]=r[i]}else this.data[i]=t;return this},getData(i,t){return this.enableData(),i===void 0?this.data:Pt(this.data,i,t)},incData(i,t,r){return r===void 0&&(r=0),this.enableData(),this.setData(i,this.getData(i,r)+t),this},mulData(i,t,r){return r===void 0&&(r=0),this.enableData(),this.setData(i,this.getData(i,r)*t),this},clearData(){return this.data&&we(this.data),this}};var Lh=class{constructor(t,r){this.type=r,this.data=void 0,this.setParent(t).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(t){return this.parent=t,this}setDisplayListDirty(t){return t&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(t){this.setDisplayListDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}};Object.assign(Lh.prototype,Vr);var ly=Lh;var u4=Phaser.Math.DegToRad,f4=Phaser.Math.RadToDeg,an=Phaser.Utils.Objects.GetValue,Tc=class extends ly{get visible(){return this._visible}set visible(t){this.setDisplayListDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDisplayListDirty(!!this._alpha!=!!t),this._alpha=t}setAlpha(t){return this.alpha=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setPosition(t,r){return this.x=t,this.y=r,this}setRotation(t){return this.rotation=t,this}get angle(){return f4(this.rotation)}set angle(t){this.rotation=u4(t)}setAngle(t){return this.angle=t,this}setScaleX(t){return this.scaleX=t,this}get width(){return this._width}set width(t){this._width=t}setWidth(t,r){return r===void 0&&(r=!1),this.width=t,r&&(this.scaleY=this.scaleX),this}setScaleY(t){return this.scaleY=t,this}setScale(t,r){return r===void 0&&(r=t),this.scaleX=t,this.scaleY=r,this}get height(){return this._height}set height(t){this._height=t}setHeight(t,r){return r===void 0&&(r=!1),this.height=t,r&&(this.scaleX=this.scaleY),this}setScale(t,r){return r===void 0&&(r=t),this.scaleX=t,this.scaleY=r,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(t){this.scaleX=t/this._width}setDisplayWidth(t,r){return r===void 0&&(r=!1),this.displayWidth=t,r&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(t){this.scaleY=t/this._height}setDisplayHeight(t,r){return r===void 0&&(r=!1),this.displayHeight=t,r&&(this.scaleX=this.scaleY),this}setOriginX(t){return this.originX=t,this._displayOriginX=this.width*t,this}setOriginY(t){return this.originY=t,this._displayOriginY=this.height*t,this}setOrigin(t,r){return r===void 0&&(r=t),this.setOriginX(t).setOriginY(r),this}get depth(){return this._depth}set depth(t){this.setDisplayListDirty(this._depth!=t),this._depth=t}setDepth(t){return t===void 0&&(t=0),this.depth=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var r=an(t,"width",void 0),x=an(t,"height",void 0),s=an(t,"scale",void 0),g=an(t,"scaleX",s),e=an(t,"scaleY",s);r!==void 0?x===void 0&&e===void 0?this.setWidth(r,!0):this.setWidth(r):g!==void 0?this.setScaleX(g):t.hasOwnProperty("displayWidth")&&this.setDisplayWidth(t.displayWidth),x!==void 0?r===void 0&&g===void 0?this.setHeight(x,!0):this.setHeight(x):e!==void 0?this.setScaleY(e):t.hasOwnProperty("displayHeight")&&this.setDisplayHeight(t.displayHeight);var n=an(t,"origin",void 0);return n!==void 0?this.setOrigin(n):(t.hasOwnProperty("originX")&&this.setOriginX(t.originX),t.hasOwnProperty("originY")&&this.setOriginY(t.originY)),t.hasOwnProperty("depth")&&this.setDepth(t.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(t,r,x,s,g,e,n,p){}canvasRender(t,r,x,s){}},uy=Tc;var d4=Phaser.GameObjects.Components.TransformMatrix,c4=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha,Fh=new d4,p4=function(i,t,r,x,s,g,e,n){var p=this._width,f=this._height,u=p*this.originX,l=f*this.originY,a=this.x-x,o=this.y-s,c=1,h=1;this.flipX&&(a+=p-u*2,c=-1),this.flipY&&(o+=f-l*2,h=-1),Fh.applyITRS(a,o,this.rotation,this.scaleX*c,this.scaleY*h),t.multiply(Fh,Fh);var d=-u,v=-l,m=d+p,y=v+f,C=Fh.setQuad(d,v,m,y,n),T=this.frame.u0,P=this.frame.v0,S=this.frame.u1,M=this.frame.v1,E=c4(this.tint,this.alpha*r);i.batchQuad(this.parent,C[0],C[1],C[2],C[3],C[4],C[5],C[6],C[7],T,P,S,M,E,E,E,E,this.tintFill,g,e)},fy=p4;var v4=function(i,t,r,x){i.save();var s=this._width,g=this._height,e=s*this.originX,n=g*this.originY,p=this.x-e,f=this.y-n,u=1,l=1;this.flipX&&(p+=s,u=-1),this.flipY&&(f+=g,l=-1),x&&(p=Math.round(p),f=Math.round(f)),i.translate(p,f),i.rotate(this.rotation),i.scale(this.scaleX*u,this.scaleY*l);var a=this.frame;i.drawImage(a.source.image,a.cutX,a.cutY,s,g,0,0,s,g),i.restore()},dy=v4;var m4=Phaser.Utils.Objects.IsPlainObject,bh=class extends uy{constructor(t,r){super(t,wh),this.setFrame(r)}get width(){return this._width}set width(t){}get height(){return this._height}set height(t){}setFrame(t){return arguments.length>0&&!m4(t)&&(t=this.parent.texture.get(t)),this.frame=t,this._width=t?t.width:0,this._height=t?t.height:0,this}setFlipX(t){return t===void 0&&(t=!0),this.flipX=t,this}setFlipY(t){return t===void 0&&(t=!0),this.flipY=t,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return this._tint===void 0?this.parent.tint:this._tint}set tint(t){this._tint=t}setTint(t){return this.tint=t,this.tintFill=!1,this}setTintFill(t){return this.tint=t,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return this._tintFill===void 0?this.parent.tintFill:this._tintFill}set tintFill(t){this._tintFill=t}reset(){return super.reset(),this.resetFlip().resetTint().setFrame(),this}modifyPorperties(t){return t?(t.hasOwnProperty("width")&&(t.displayWidth=t.width,delete t.width),t.hasOwnProperty("height")&&(t.displayHeight=t.height,delete t.height),t.hasOwnProperty("frame")&&this.setFrame(t.frame),super.modifyPorperties(t),t.hasOwnProperty("flipX")&&this.setFlipX(t.flipX),t.hasOwnProperty("flipY")&&this.setFlipY(t.flipY),t.hasOwnProperty("tint")&&this.setTint(t.tint),t.hasOwnProperty("tintFill")&&this.setTintFill(t.tintFill),this):this}},g4={webglRender:fy,canvasRender:dy};Object.assign(bh.prototype,g4);var cy=bh;var x4=function(i,t){typeof t=="string"&&(t={frame:t});var r=i.poolManager?i.poolManager.allocate(wh):null;return r===null?r=new cy(i):r.setParent(i).setActive(),r.modifyPorperties(t),i.addChild(r),r},Dh=x4;var y4=function(i,t,r,x,s,g){Dh(this,{frame:t,x:r,y:x,width:s,height:g})},py=y4;var C4=function(i,t,r,x,s,g){var e=this.texture.get(t),n=e.width,p=e.height,f=Math.floor(s/n),u=Math.floor(g/p);r+=(s-f*n)/2,x+=(g-u*p)/2;for(var l=0;l<f;l++)for(var a=0;a<u;a++)Dh(this,{frame:t,x:r+l*n,y:x+a*p})},vy=C4;var my={_drawImage:py,_drawTileSprite:vy};var Ih=class extends Mh(hy,"rexNinePatch2"){setBaseTexture(t,r,x,s){return this.setTexture(t,r),super.setBaseTexture(t,r,x,s),this}};Object.assign(Ih.prototype,my);var gy=Ih;var xy=gy;var Qa=xy;J.register("ninePatch2",function(i,t,r,x,s,g,e,n){var p=new Qa(this.scene,i,t,r,x,s,g,e,n);return this.scene.add.existing(p),p});Z(window,"RexPlugins.UI.NinePatch2",Qa);var zr=Phaser.Utils.Objects.GetValue,Sc=class{constructor(t,r,x,s,g){t===void 0&&(t=0),r===void 0&&(r=t),x===void 0&&(x=0),s===void 0&&(s=0),g===void 0&&(g=0),this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,r,x,s,g)}setTo(t,r,x,s,g){return this.setPosition(t,r),this.setRadius(g),this.setSize(x,s),this}setPosition(t,r){return this.x=t,this.y=r,this}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setSize(t,r){return this.width=t,this.height=r,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){t==null&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){t==null&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var r,x;typeof t=="number"?(r=t,x=t):(r=zr(t,"x",0),x=zr(t,"y",0));var s=this.cornerRadius;s.tl=Bh(zr(t,"tl",void 0),r,x),s.tr=Bh(zr(t,"tr",void 0),r,x),s.bl=Bh(zr(t,"bl",void 0),r,x),s.br=Bh(zr(t,"br",void 0),r,x)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){Gh(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){Gh(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){Gh(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){Gh(this.cornerRadius.br,t)}},Bh=function(i,t,r){return i===void 0?i={x:t,y:r}:typeof i=="number"&&(i={x:i,y:i}),yy(i),i},Gh=function(i,t){typeof t=="number"?(i.x=t,i.y=t):(i.x=zr(t,"x",0),i.y=zr(t,"y",0)),yy(i)},yy=function(i){i.convex=i.x>=0||i.y>=0,i.x=Math.abs(i.x),i.y=Math.abs(i.y)},Nh=Sc;var T4=function(i,t,r){var x=r.length;if(x>=2){var s=r[x-2],g=r[x-1];if(i===s&&t===g)return r}return r.push(i,t),r},ze=T4;var Cy=Phaser.Math.DegToRad,S4=function(i,t,r,x,s,g,e,n,p){e&&g>s?g-=360:!e&&g<s&&(g+=360);var f=g-s,u=Cy(f)/n;s=Cy(s);for(var l=0;l<=n;l++){var a=s+u*l,o=i+r*Math.cos(a),c=t+x*Math.sin(a);ze(o,c,p)}return p},zt=S4;var P4=Phaser.Renderer.WebGL.Utils,E4=function(i,t,r,x,s,g){for(var e=P4.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*x),n=r.pathData,p=r.pathIndexes,f=0;f<p.length;f+=3){var u=p[f]*2,l=p[f+1]*2,a=p[f+2]*2,o=n[u+0]-s,c=n[u+1]-g,h=n[l+0]-s,d=n[l+1]-g,v=n[a+0]-s,m=n[a+1]-g,y=t.getX(o,c),C=t.getY(o,c),T=t.getX(h,d),P=t.getY(h,d),S=t.getX(v,m),M=t.getY(v,m);i.batchTri(r,y,C,T,P,S,M,0,0,1,1,e,e,e,2)}},Vh=E4;var M4=Phaser.Renderer.WebGL.Utils,A4=function(i,t,r,x,s){var g=i.strokeTint,e=M4.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*r);g.TL=e,g.TR=e,g.BL=e,g.BR=e;var n=t.pathData,p=n.length-1,f=t.lineWidth,u=f/2,l=n[0]-x,a=n[1]-s;t.closePath||(p-=2);for(var o=2;o<p;o+=2){var c=n[o]-x,h=n[o+1]-s;i.batchLine(l,a,c,h,u,u,f,o-2,t.closePath?o===p-1:!1),l=c,a=h}},Yr=A4;var R4=Phaser.GameObjects.GetCalcMatrix,O4=function(i,t,r,x){t.dirty&&(t.updateData(),t.dirty=!1),r.addToRenderList(t);var s=i.pipelines.set(t.pipeline),g=R4(t,r,x),e=s.calcMatrix.copyFrom(g.calc),n=t._displayOriginX,p=t._displayOriginY,f=r.alpha*t.alpha;i.pipelines.preBatch(t),t.isFilled&&Vh(s,e,t,f,n,p),t.isStroked&&Yr(s,t,f,n,p),i.pipelines.postBatch(t)},Ty=O4;var w4=function(i,t,r,x){var s=r||t.fillColor,g=x||t.fillAlpha,e=(s&16711680)>>>16,n=(s&65280)>>>8,p=s&255;i.fillStyle="rgba("+e+","+n+","+p+","+g+")"},Xi=w4;var L4=function(i,t,r,x){var s=r||t.strokeColor,g=x||t.strokeAlpha,e=(s&16711680)>>>16,n=(s&65280)>>>8,p=s&255;i.strokeStyle="rgba("+e+","+n+","+p+","+g+")",i.lineWidth=t.lineWidth},Wi=L4;var F4=Phaser.Renderer.Canvas.SetTransform,b4=function(i,t,r,x){t.dirty&&(t.updateData(),t.dirty=!1),r.addToRenderList(t);var s=i.currentContext;if(F4(i,s,t,r,x)){var g=t._displayOriginX,e=t._displayOriginY,n=t.pathData,p=n.length-1,f=n[0]-g,u=n[1]-e;s.beginPath(),s.moveTo(f,u),t.closePath||(p-=2);for(var l=2;l<p;l+=2){var a=n[l]-g,o=n[l+1]-e;s.lineTo(a,o)}s.closePath(),t.isFilled&&(Xi(s,t),s.fill()),t.isStroked&&(Wi(s,t),s.stroke()),s.restore()}},Sy=b4;var Py={renderWebGL:Ty,renderCanvas:Sy};var D4=Phaser.GameObjects.Shape,I4=Phaser.Utils.Objects.IsPlainObject,Ey=Phaser.Utils.Objects.GetValue,B4=Phaser.Geom.Polygon.Earcut,Yh=class extends D4{constructor(t,r,x,s,g,e,n,p){var f,u,l,a;if(I4(r)){var o=r;r=o.x,x=o.y,s=o.width,g=o.height,e=o.radius,n=o.color,p=o.alpha,f=o.strokeColor,u=o.strokeAlpha,l=o.strokeWidth,a=o.shape}r===void 0&&(r=0),x===void 0&&(x=0),s===void 0&&(s=1),g===void 0&&(g=s),e===void 0&&(e=0),a===void 0&&(a=0);var c=new Nh;if(super(t,"rexRoundRectangleShape",c),this.setShapeType(a),this.shapeType===0){var h=Ey(e,"radius",e);c.setTo(0,0,s,g,h)}else{var h={x:s/2,y:g/2};c.setTo(0,0,s,g,h)}var d=Ey(e,"iteration",void 0);this.setIteration(d),this.setPosition(r,x),this.setFillStyle(n,p),f!==void 0&&l===void 0&&(l=2),this.setStrokeStyle(l,f,u),this.updateDisplayOrigin(),this.dirty=!0}get fillColor(){return this._fillColor}set fillColor(t){this._fillColor=t,this.isFilled=t!=null&&this._fillAlpha>0}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this._fillAlpha=t,this.isFilled=t>0&&this._fillColor!=null}setFillStyle(t,r){return r===void 0&&(r=1),this.fillColor=t,this.fillAlpha=r,this}get strokeColor(){return this._strokeColor}set strokeColor(t){this._strokeColor=t,this.isStroked=t!=null&&this._lineWidth>0}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth=t,this.isStroked=t>0&&this._strokeColor!=null}setStrokeStyle(t,r,x){return x===void 0&&(x=1),this.lineWidth=t,this.strokeColor=r,this.strokeAlpha=x,this}updateData(){var t=this.geom,r=this.pathData;r.length=0;var x=t.width,s=t.height,g=t.cornerRadius,e,n=this.iteration+1;if(e=g.tl,zh(e))if(e.convex){var p=e.x,f=e.y;zt(p,f,e.x,e.y,180,270,!1,n,r)}else{var p=0,f=0;zt(p,f,e.x,e.y,90,0,!0,n,r)}else ze(0,0,r);if(e=g.tr,zh(e))if(e.convex){var p=x-e.x,f=e.y;zt(p,f,e.x,e.y,270,360,!1,n,r)}else{var p=x,f=0;zt(p,f,e.x,e.y,180,90,!0,n,r)}else ze(x,0,r);if(e=g.br,zh(e))if(e.convex){var p=x-e.x,f=s-e.y;zt(p,f,e.x,e.y,0,90,!1,n,r)}else{var p=x,f=s;zt(p,f,e.x,e.y,270,180,!0,n,r)}else ze(x,s,r);if(e=g.bl,zh(e))if(e.convex){var p=e.x,f=s-e.y;zt(p,f,e.x,e.y,90,180,!1,n,r)}else{var p=0,f=s;zt(p,f,e.x,e.y,360,270,!0,n,r)}else ze(0,s,r);return r.push(r[0],r[1]),this.pathIndexes=B4(r),this}setShapeType(t){return typeof t=="string"&&(t=G4[t]),this.shapeType=t,this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,r){if(r===void 0&&(r=t),this.geom.width===t&&this.geom.height===r)return this;this.geom.setSize(t,r),this.shapeType===1&&this.setRadius({x:t/2,y:r/2}),this.updateDisplayOrigin(),this.dirty=!0;var x=this.input;return x&&!x.customHitArea&&(x.hitArea.width=t,x.hitArea.height=r),this}resize(t,r){return this.setSize(t,r),this}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(t){this.geom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(t){this.geom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(t){this.geom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(t){this.geom.radiusBR=t,this.dirty=!0}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setRadiusTL(t){return t===void 0&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return t===void 0&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return t===void 0&&(t=0),this.radiusBL=t,this}setRadiusBR(t){return t===void 0&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}get iteration(){return this._iteration}set iteration(t){if(this._iteration===void 0){this._iteration=t;return}this._iteration!==t&&(this._iteration=t,this.dirty=!0)}setIteration(t){return t===void 0&&(t=6),this.iteration=t,this}},zh=function(i){return i.x>0&&i.y>0},G4={rectangle:0,circle:1};Object.assign(Yh.prototype,Py);var My=Yh;var Ay=My;var Le=Ay;J.register("roundRectangle",function(i,t,r,x,s,g,e){var n=new Le(this.scene,i,t,r,x,s,g,e);return this.scene.add.existing(n),n});Z(window,"RexPlugins.UI.RoundRectangle",Le);var N4=function(i,t,r,x){if(r===void 0&&(r="."),x===void 0&&(x={}),!i)return x;if(t in i)return Object.assign(x,i[t]);t+=r;for(var s in i)!s.startsWith(t)||(x[s.replace(t,"")]=i[s]);return x},qa=N4;var V4=function(i,t,r){var x=qa(i,t);if(r)for(var s in x)r.hasOwnProperty(s)&&(x[r[s]]=x[s],delete x[s]);return x},Uh=V4;var z4=function(i,t,r){if(r===void 0&&(r={}),Array.isArray(t))for(var x,s=0,g=t.length;s<g;s++)x=t[s],r[x]=i[x];else for(var x in t)r[x]=i[x];return r},on=z4;var Y4=function(i,t){for(var r in i)if(!(r in t)||i[r]!==t[r])return!1;for(var r in t)if(!(r in i))return!1;return!0},hn=Y4;var ln=function(i,t){if(!!t){var r=on(i,t);if(!hn(r,t))return i.modifyStyle(t),r}},Ry={setActiveState(i){return i===void 0&&(i=!0),this.activeState===i?this:(this.activeState=i,i?this.activeStyleSave=ln(this,this.activeStyle):(ln(this,this.activeStyleSave),this.activeStyleSave=void 0),this)},setHoverState(i){return i===void 0&&(i=!0),this.hoverState===i?this:(this.hoverState=i,i?this.hoverStyleSave=ln(this,this.hoverStyle):(ln(this,this.hoverStyleSave),this.hoverStyleSave=void 0),this)},setDisableState(i){return i===void 0&&(i=!0),this.disableState===i?this:(this.disableState=i,i?this.disableStyleSave=ln(this,this.disableStyle):(ln(this,this.disableStyleSave),this.disableStyleSave=void 0),this)}};var Xh=class extends Le{constructor(t,r){r===void 0&&(r={}),super(t,r),this.activeStyle=Uh(r,"active",Pc),this.hoverStyle=Uh(r,"hover",Pc),this.disableStyle=Uh(r,"disable",Pc)}modifyStyle(t){for(var r in t)this[r]=t[r];return this}},Pc={color:"fillColor",alpha:"fillAlpha",strokeWidth:"lineWidth"};Object.assign(Xh.prototype,Ry);var _a=Xh;J.register("statesRoundRectangle",function(i){var t=new _a(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.StatesRoundRectangle",_a);var U4=Phaser.Renderer.WebGL.Utils,X4=function(i,t,r,x){if(t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)){r.addToRenderList(t);var s=t.frame,g=s.width,e=s.height,n=U4.getTintAppendFloatAlpha,p=i.pipelines.set(t.pipeline,t),f=p.setTexture2D(s.glTexture,t);i.pipelines.preBatch(t),p.batchTexture(t,s.glTexture,g,e,t.x,t.y,g/t.resolution,e/t.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,g,e,n(t.tintTopLeft,r.alpha*t._alphaTL),n(t.tintTopRight,r.alpha*t._alphaTR),n(t.tintBottomLeft,r.alpha*t._alphaBL),n(t.tintBottomRight,r.alpha*t._alphaBR),t.tintFill,0,0,r,x,!1,f),i.pipelines.postBatch(t)}},Oy=X4;var W4=function(i,t,r,x){t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)&&(r.addToRenderList(t),i.batchSprite(t,t.frame,r,x))},wy=W4;var Ly={renderWebGL:Oy,renderCanvas:wy};var k4=Phaser.Display.Color,Fy={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(i){return this.context.fillStyle=i,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},drawFrame(i,t,r,x,s,g,e,n,p,f){var u=this.scene.sys.textures.getFrame(i,t);if(!u)return this;var l=u.cutWidth,a=u.cutHeight;r===void 0&&(r=0),x===void 0&&(x=0),s===void 0&&(s=l),g===void 0&&(g=a),e===void 0&&(e=0),n===void 0&&(n=0),p===void 0&&(p=l),f===void 0&&(f=a);var o=u.cutX+e,c=u.cutY+n;return this.context.drawImage(u.source.image,o,c,p,f,r,x,s,g),this.dirty=!0,this},getDataURL(i,t){return this.canvas.toDataURL(i,t)},getPixel(i,t,r){r===void 0&&(r=new k4);var x=this.context.getImageData(i,t,1,1);return r.setTo(x.data[0],x.data[1],x.data[2],x.data[3]),r},setPixel(i,t,r,x,s,g){if(typeof r!="number"){var e=r;r=e.red,x=e.green,s=e.blue,g=e.alpha}g===void 0&&(g=r!==0||x!==0||s!==0?255:0);var n=this.context.createImageData(1,1);return n.data[0]=r,n.data[1]=x,n.data[2]=s,n.data[3]=g,this.context.putImageData(n,i,t),this.dirty=!0,this}};var H4=function(i,t,r,x,s,g,e){var n=i.sys.textures,p=i.renderer;x===void 0&&(x=0),s===void 0&&(s=0),g===void 0&&(g=t.width),e===void 0&&(e=t.height);var f;n.exists(r)?f=n.get(r):f=n.createCanvas(r,g,e);var u=f.getSourceImage();u.width!==g&&(u.width=g),u.height!==e&&(u.height=e);var l=u.getContext("2d",{willReadFrequently:!0});l.clearRect(0,0,g,e),l.drawImage(t,x,s,g,e),p.gl&&f&&p.canvasToTexture(u,f.source[0].glTexture,!0,0)},Wh=H4;var by={updateTexture(i,t){i&&(t?i.call(t,this.canvas,this.context):i(this.canvas,this.context)),(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!1;var r=this.input;return r&&!r.customHitArea&&(r.hitArea.width=this.width,r.hitArea.height=this.height),this},generateTexture(i,t,r,x,s){var g=this.canvas;return x===void 0?x=g.width:x*=this.resolution,s===void 0?s=g.height:s*=this.resolution,Wh(this.scene,g,i,t,r,x,s),this},loadTexture(i,t){var r=this.scene.sys.textures.getFrame(i,t);return r?(this.width!==r.cutWidth||this.height!==r.cutHeight?this.setSize(r.cutWidth,r.cutHeight):this.clear(),this.drawFrame(i,t),this.dirty=!0,this):this}};var Dy=Phaser.Display.Canvas.CanvasPool,K4=Phaser.GameObjects.GameObject,kh=class extends K4{constructor(t,r,x,s,g){r===void 0&&(r=0),x===void 0&&(x=0),s===void 0&&(s=1),g===void 0&&(g=1),super(t,"rexCanvas"),this.renderer=t.sys.game.renderer,this.resolution=1,this._width=s,this._height=g,s=Math.max(Math.ceil(s*this.resolution),1),g=Math.max(Math.ceil(g*this.resolution),1),this.canvas=Dy.create(this,s,g),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.dirty=!1,this.setPosition(r,x),this.setOrigin(.5,.5),this.initPipeline(),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0}preDestroy(){Dy.remove(this.canvas),this.texture.destroy(),this.canvas=null,this.context=null}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setCanvasSize(t,r){return this._width===t&&this._height===r?this:(this._width=t,this._height=r,this.updateDisplayOrigin(),t=Math.max(Math.ceil(t*this.resolution),1),r=Math.max(Math.ceil(r*this.resolution),1),this.canvas.width=t,this.canvas.height=r,this.frame.setSize(t,r),this.dirty=!0,this)}setSize(t,r){return this.setCanvasSize(t,r),this}get displayWidth(){return this.scaleX*this._width}set displayWidth(t){this.scaleX=t/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(t){this.scaleY=t/this._height}setDisplaySize(t,r){return this.displayWidth=t,this.displayHeight=r,this}getCanvas(t){return t||(this.dirty=!0),this.canvas}getContext(t){return t||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(t,r){return this.setSize(t,r),this}},qe=Phaser.GameObjects.Components;Phaser.Class.mixin(kh,[qe.Alpha,qe.BlendMode,qe.Crop,qe.Depth,qe.Flip,qe.GetBounds,qe.Mask,qe.Origin,qe.Pipeline,qe.ScrollFactor,qe.Tint,qe.Transform,qe.Visible,Ly,Fy,by]);var Ye=kh;var j4=Phaser.Utils.String.Pad,Z4=function(i,t,r){if(i==null)return i;switch(typeof i){case"string":return i;case"number":return`#${j4(Math.floor(i).toString(16),6,"0",1)}`;case"function":return i(t,r);case"object":return i.hasOwnProperty("r")?i.hasOwnProperty("a")?`rgba(${i.r},${i.g},${i.b},${i.a})`:`rgb(${i.r},${i.g},${i.b})`:i.hasOwnProperty("h")?i.hasOwnProperty("a")?`hsla(${i.h},${i.s},${i.l},${i.a})`:`hsl(${i.h},${i.s},${i.l})`:i;default:return i}},ct=Z4;var Iy=Phaser.Math.DegToRad,J4=function(i,t,r,x,s,g,e){var n=new Nh(t,r,x,s,g),p=n.minWidth,f=n.minHeight,u=x>=p?1:x/p,l=s>=f?1:s/f,a=n.cornerRadius,o,c,h,d,v;i.save(),i.beginPath(),i.translate(t,r),o=a.tl,Kh(o)?(c=o.x*u,h=o.y*l,Hh(o)?(d=c,v=h,Ur(i,d,v,c,h,180,270,!1,e)):(d=0,v=0,Ur(i,d,v,c,h,90,0,!0,e))):i.lineTo(0,0),o=a.tr,Kh(o)?(c=o.x*u,h=o.y*l,Hh(o)?(d=x-c,v=h,Ur(i,d,v,c,h,270,360,!1,e)):(d=x,v=0,Ur(i,d,v,c,h,180,90,!0,e))):i.lineTo(x,0),o=a.br,Kh(o)?(c=o.x*u,h=o.y*l,Hh(o)?(d=x-c,v=s-h,Ur(i,d,v,c,h,0,90,!1,e)):(d=x,v=s,Ur(i,d,v,c,h,270,180,!0,e))):i.lineTo(x,s),o=a.bl,Kh(o)?(c=o.x*u,h=o.y*l,Hh(o)?(d=c,v=s-h,Ur(i,d,v,c,h,90,180,!1,e)):(d=0,v=s,Ur(i,d,v,c,h,360,270,!0,e))):i.lineTo(0,s),i.closePath(),i.restore()},Hh=function(i){return!i.hasOwnProperty("convex")||i.convex},Kh=function(i){return i.x>0&&i.y>0},Ur=function(i,t,r,x,s,g,e,n,p){if(n&&e>g?e-=360:!n&&e<g&&(e+=360),g=Iy(g),e=Iy(e),p==null)i.ellipse(t,r,x,s,0,g,e,n);else{p+=1;for(var f,u,l,a=(e-g)/p,o=0;o<=p;o++)l=g+a*o,f=t+x*Math.cos(l),u=r+s*Math.sin(l),i.lineTo(f,u)}},jh=J4;var $4=function(i,t,r,x,s,g,e,n,p,f,u,l,a){if(jh(t,r,x,s,g,e,a),n!=null){if(u!=null){var o;l?o=t.createLinearGradient(0,0,s,0):o=t.createLinearGradient(0,0,0,g),o.addColorStop(0,n),o.addColorStop(1,u),n=o}t.fillStyle=n,t.fill()}p!=null&&f>0&&(t.strokeStyle=p,t.lineWidth=f,t.stroke())},By=$4;var Q4=function(i,t,r,x,s,g,e,n){if(!(t==null&&r==null)){var p=i.canvas.width,f=i.canvas.height;r==null&&(x=0);var u=x/2;p=Math.max(1,p-x),f=Math.max(1,f-x),By(i.canvas,i.context,u,u,p,f,s,t,r,x,g,e,n)}},un=Q4;var q4=function(){un(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)},Gy=q4;var Ny=Phaser.Utils.Objects.GetValue,Ec=class extends Ye{constructor(t,r,x,s,g,e,n,p,f,u,l){r===void 0&&(r=0),x===void 0&&(x=0),s===void 0&&(s=1),g===void 0&&(g=s),e===void 0&&(e=0),super(t,r,x,s,g),this.type="rexRoundRectangleCanvas";var a=Ny(e,"radius",e),o=Ny(e,"iteration",void 0);this.setRadius(a),this.setIteration(o),this.setFillStyle(n,u,l),this.setStrokeStyle(p,f)}get radius(){return this._radius}set radius(t){this.dirty|=this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this}get iteration(){return this._iteration}set iteration(t){this.dirty|=this._iteration!=t,this._iteration=t}setIteration(t){return this.iteration=t,this}get fillStyle(){return this._fillStyle}set fillStyle(t){t=ct(t,this.canvas,this.context),this.dirty|=this._fillStyle!=t,this._fillStyle=t}get fillColor2(){return this._fillColor2}set fillColor2(t){t=ct(t,this.canvas,this.context),this.dirty|=this._fillColor2!=t,this._fillColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setFillStyle(t,r,x){return x===void 0&&(x=!0),this.fillStyle=t,this.fillColor2=r,this.isHorizontalGradient=x,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){t=ct(t,this.canvas,this.context),this.dirty|=this._strokeStyle!=t,this._strokeStyle=t}get lineWidth(){return this._lineWidth}set lineWidth(t){this.dirty|=this._lineWidth!=t,this._lineWidth=t}setStrokeStyle(t,r){return this.strokeStyle=t,this.lineWidth=r,this}updateTexture(){return this.clear(),Gy.call(this),super.updateTexture(),this}},Vy=Ec;var zy=Vy;var Mc=zy;J.register("roundRectangleCanvas",function(i,t,r,x,s,g,e,n,p,f){var u=new Mc(this.scene,i,t,r,x,s,g,e,n,p,f);return this.scene.add.existing(u),u});Z(window,"RexPlugins.UI.RoundRectangleCanvas",Mc);var _4=Phaser.Renderer.WebGL.Utils,tG=function(i,t,r,x){if(!(t.width===0||t.height===0)){r.addToRenderList(t);var s=t.frame,g=s.width,e=s.height,n=_4.getTintAppendFloatAlpha,p=i.pipelines.set(t.pipeline,t),f=p.setTexture2D(s.glTexture,t);i.pipelines.preBatch(t),p.batchTexture(t,s.glTexture,g,e,t.x,t.y,g/t.style.resolution,e/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,g,e,n(t.tintTopLeft,r.alpha*t._alphaTL),n(t.tintTopRight,r.alpha*t._alphaTR),n(t.tintBottomLeft,r.alpha*t._alphaBL),n(t.tintBottomRight,r.alpha*t._alphaBR),t.tintFill,0,0,r,x,!1,f),i.pipelines.postBatch(t)}},Yy=tG;var eG=function(i,t,r,x){t.width===0||t.height===0||(r.addToRenderList(t),i.batchSprite(t,t.frame,r,x))},Uy=eG;var Xy={renderWebGL:Yy,renderCanvas:Uy};var Ac=Phaser.Display.Canvas.CanvasPool,iG=function(i,t,r){r===void 0&&(r={});var x=Ac.create(this),s=x.getContext("2d",{willReadFrequently:!0});i.syncFont(x,s);var g=s.measureText(t),e=Math.ceil(g.width*i.baselineX),n=e,p=2*n;if(n=n*i.baselineY|0,x.width=e,x.height=p,s.fillStyle="#f00",s.fillRect(0,0,e,p),s.font=i._font,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(i.testString,0,n),r.left=0,e===0||p===0||!s.getImageData(0,0,e,p))return Ac.remove(x),r;for(var f=s.getImageData(0,0,e,p).data,u=!1,l=0;l<e;l++){for(var a=0;a<p;a++){var o=(a*e+l)*4;if(f[o]!==255){r.left=l,u=!0;break}}if(u)break}return Ac.remove(x),r},Wy=iG;var rG=Phaser.GameObjects.GameObject,Zh=class extends rG{setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setTestString(t){return this.style.setTestString(t)}setFixedSize(t,r){return this.style.setFixedSize(t,r)}setBackgroundColor(t,r,x){return this.style.setBackgroundColor(t,r,x)}setBackgroundStrokeColor(t,r){return this.style.setBackgroundStrokeColor(t,r)}setBackgroundCornerRadius(t,r){return this.style.setBackgroundCornerRadius(t,r)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,r){return this.style.setStroke(t,r)}setShadow(t,r,x,s,g,e){return this.style.setShadow(t,r,x,s,g,e)}setShadowOffset(t,r){return this.style.setShadowOffset(t,r)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setWordWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}setLineSpacing(t){return this.style.setLineSpacing(t)}set lineSpacing(t){this.setLineSpacing(t)}get lineSpacing(){return this.style.lineSpacing}setXOffset(t){return this.style.setXOffset(t)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,r){return this.style.setTextMetrics(t,r)}measureTextMargins(t,r){return Wy(this.style,t,r)}},Ue=Phaser.GameObjects.Components;Phaser.Class.mixin(Zh,[Ue.Alpha,Ue.BlendMode,Ue.ComputedSize,Ue.Crop,Ue.Depth,Ue.Flip,Ue.GetBounds,Ue.Mask,Ue.Origin,Ue.Pipeline,Ue.ScrollFactor,Ue.Tint,Ue.Transform,Ue.Visible,Xy]);var ky=Zh;var sG={backgroundColor:["backgroundColor",null,ct],backgroundColor2:["backgroundColor2",null,ct],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,ct],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",ct],stroke:["stroke","#fff",ct],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",ct],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",ct],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|M\xC3\u2030qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]},Hy=sG;var Jh=Phaser.Display.Canvas.CanvasPool,nG=function(i){var t=Jh.create(this),r=t.getContext("2d",{willReadFrequently:!0});i.syncFont(t,r);var x=r.measureText(i.testString);if("actualBoundingBoxAscent"in x){var s=x.actualBoundingBoxAscent,g=x.actualBoundingBoxDescent,f={ascent:s,descent:g,fontSize:s+g};return Jh.remove(t),f}var e=Math.ceil(x.width*i.baselineX),n=e,p=2*n;n=n*i.baselineY|0,t.width=e,t.height=p,r.fillStyle="#f00",r.fillRect(0,0,e,p),r.font=i._font,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(i.testString,0,n);var f={ascent:0,descent:0,fontSize:0};if(!r.getImageData(0,0,e,p))return f.ascent=n,f.descent=n+6,f.fontSize=f.ascent+f.descent,Jh.remove(t),f;var u=r.getImageData(0,0,e,p).data,l=u.length,a=e*4,o,c,h=0,d=!1;for(o=0;o<n;o++){for(c=0;c<a;c+=4)if(u[h+c]!==255){d=!0;break}if(!d)h+=a;else break}for(f.ascent=n-o,h=l-a,d=!1,o=p;o>n;o--){for(c=0;c<a;c+=4)if(u[h+c]!==255){d=!0;break}if(!d)h-=a;else break}return f.descent=o-n,f.fontSize=f.ascent+f.descent,Jh.remove(t),f},Rc=nG;var aG={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/},Ft=aG;var oG=Phaser.Utils.Objects.GetAdvancedValue,_e=Phaser.Utils.Objects.GetValue,Oc=class{constructor(t,r,x){this.parent=t,x===void 0&&(x=Hy),this.propertyMap=x,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(r,!1,!0)}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==Ft.NO_WRAP&&this.wrapWidth===0}setStyle(t,r,x){if(r===void 0&&(r=!0),x===void 0&&(x=!1),t&&t.hasOwnProperty("wrap")){var s=t.wrap;if(s.hasOwnProperty("mode")){var g=s.mode;typeof g=="string"&&(s.mode=Ky[g])}else s.hasOwnProperty("width")&&(s.mode=1)}t&&t.rtl&&x&&!t.hasOwnProperty("halign")&&(t.halign="right"),t&&t.hasOwnProperty("fontSize")&&typeof t.fontSize=="number"&&(t.fontSize=t.fontSize.toString()+"px");var e=this.propertyMap;for(var n in e){var p=e[n],f=p[0],u=x?p[1]:this[n],l=p[2];if(n==="wrapCallback"||n==="wrapCallbackScope")this[n]=_e(t,f,u);else{var a=oG(t,f,u);l&&(a=l(a)),this[n]=a}}var o=_e(t,"font",null);o===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=o;var c=_e(t,"fill",null);c!==null&&(this.color=ct(c));var h=_e(t,"metrics",!1);return h?this.metrics={ascent:_e(h,"ascent",0),descent:_e(h,"descent",0),fontSize:_e(h,"fontSize",0)}:(r||!this.metrics)&&(this.metrics=Rc(this)),r?this.parent.updateText():this.parent}syncFont(t,r){r.font=this._font}syncStyle(t,r){r.textBaseline="alphabetic",r.fillStyle=this.color,r.strokeStyle=this.stroke,r.lineWidth=this.strokeThickness,r.lineCap="round",r.lineJoin="round"}syncShadow(t,r){r?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}update(t){return t&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=Rc(this)),this.parent.updateText(t)}buildFont(){var t=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return t!==this._font&&(this._font=t),this}setFont(t){return typeof t=="string"?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=_e(t,"fontFamily","Courier"),this.fontSize=_e(t,"fontSize","16px"),this.fontStyle=_e(t,"fontStyle","")),this.update(!0)}setFontFamily(t){return this.fontFamily=t,this.update(!0)}setFontStyle(t){return this.fontStyle=t,this.update(!0)}setFontSize(t){return typeof t=="number"&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}setTestString(t){return this.testString=t,this.update(!0)}setFixedSize(t,r){return this.fixedWidth=t,this.fixedHeight=r,t&&(this.parent.width=t),r&&(this.parent.height=r),this.update(this.isWrapFitMode)}setResolution(t){return this.resolution=t,this.update(!1)}setLineSpacing(t){return this.lineSpacing=t,this.update(!1)}setXOffset(t){return this.xOffset=t,this.update(!1)}setBackgroundColor(t,r,x){return x===void 0&&(x=!0),this.backgroundColor=ct(t,this.parent.canvas,this.parent.context),this.backgroundColor2=ct(r,this.parent.canvas,this.parent.context),this.backgroundHorizontalGradient=x,this.update(!1)}setBackgroundStrokeColor(t,r){return this.backgroundStrokeColor=ct(t,this.parent.canvas,this.parent.context),this.backgroundStrokeLineWidth=r,this.update(!1)}setBackgroundCornerRadius(t,r){return this.backgroundCornerRadius=t,this.backgroundCornerIteration=r,this.update(!1)}setFill(t){return this.color=ct(t,this.parent.canvas,this.parent.context),this.update(!1)}setColor(t){return this.color=ct(t,this.parent.canvas,this.parent.context),this.update(!1)}setStroke(t,r){return t===void 0?this.strokeThickness=0:(r===void 0&&(r=this.strokeThickness),this.stroke=ct(t,this.parent.canvas,this.parent.context),this.strokeThickness=r),this.update(!0)}setShadow(t,r,x,s,g,e){return t===void 0&&(t=0),r===void 0&&(r=0),x===void 0&&(x="#000"),s===void 0&&(s=0),g===void 0&&(g=!1),e===void 0&&(e=!0),this.shadowOffsetX=t,this.shadowOffsetY=r,this.shadowColor=ct(x,this.parent.canvas,this.parent.context),this.shadowBlur=s,this.shadowStroke=g,this.shadowFill=e,this.update(!1)}setShadowOffset(t,r){return t===void 0&&(t=0),r===void 0&&(r=t),this.shadowOffsetX=t,this.shadowOffsetY=r,this.update(!1)}setShadowColor(t){return t===void 0&&(t="#000"),this.shadowColor=ct(t,this.parent.canvas,this.parent.context),this.update(!1)}setShadowBlur(t){return t===void 0&&(t=0),this.shadowBlur=t,this.update(!1)}setShadowStroke(t){return this.shadowStroke=t,this.update(!1)}setShadowFill(t){return this.shadowFill=t,this.update(!1)}setUnderline(t,r,x){return t===void 0&&(t="#000"),r===void 0&&(r=0),x===void 0&&(x=0),this.underlineColor=ct(t,this.parent.canvas,this.parent.context),this.underlineThickness=r,this.underlineOffset=x,this.update(!1)}setUnderlineColor(t){return t===void 0&&(t="#000"),this.underlineColor=ct(t,this.parent.canvas,this.parent.context),this.update(!1)}setUnderlineThickness(t){return t===void 0&&(t=0),this.underlineThickness=t,this.update(!1)}setUnderlineOffset(t){return t===void 0&&(t=0),this.underlineOffset=t,this.update(!1)}setWrapMode(t){return typeof t=="string"&&(t=Ky[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}setWrapWidth(t){return this.wrapWidth=t,this.update(!1)}setAlign(t,r){return t===void 0&&(t="left"),r===void 0&&(r="top"),this.halign=t,this.valign=r,this.update(!1)}setHAlign(t){return t===void 0&&(t="left"),this.halign=t,this.update(!1)}setVAlign(t){return t===void 0&&(t="top"),this.valign=t,this.update(!1)}setMaxLines(t){return t===void 0&&(t=0),this.maxLines=t,this.update(!1)}getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}setTextMetrics(t,r){return this.metrics.ascent=t.ascent,this.metrics.descent=t.descent,this.metrics.fontSize=t.fontSize,r&&(typeof r=="string"?(this.fontFamily=r,this.fontSize="",this.fontStyle=""):(this.fontFamily=_e(r,"fontFamily",this.fontFamily),this.fontSize=_e(r,"fontSize",this.fontSize),this.fontStyle=_e(r,"fontStyle",this.fontStyle))),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var t={},r=this.propertyMap;for(var x in r)t[x]=this[x];return t.metrics=this.getTextMetrics(),t}destroy(){this.parent=void 0}},Ky={none:Ft.NO_WRAP,word:Ft.WORD_WRAP,char:Ft.CHAR_WRAP,character:Ft.CHAR_WRAP},fn=Oc;var jy={draw(i,t,r,x){var s=this.penManager;this.hitAreaManager.clear();var g=this.context;g.save();var e=this.defaultStyle;this.clear(),un(this,e.backgroundColor,e.backgroundStrokeColor,e.backgroundStrokeLineWidth,e.backgroundCornerRadius,e.backgroundColor2,e.backgroundHorizontalGradient,e.backgroundCornerIteration),i+=this.startXOffset,t+=this.startYOffset;var n=e.halign,p=e.valign,f,u=e.lineHeight,l=s.lines,a=l.length,o=e.maxLines,c,h,d;o>0&&a>o?(c=o,p==="center"?h=Math.floor((a-c)/2):p==="bottom"?h=a-c:h=0):(c=a,h=0),d=h+c;var v,m,y=this.rtl,C=y?this.parent.width:void 0;p==="center"?m=Math.max((x-c*u)/2,0):p==="bottom"?m=Math.max(x-c*u-2,0):m=0,m+=t;for(var T=h;T<d;T++)if(f=s.getLineWidth(T),f!==0){for(var P=l[T],S=P.length,M=n,E=0;E<S;E++){var A=P[E].prop.align;if(A!==void 0){M=A;break}}M==="center"?v=(r-f)/2:M==="right"?v=y?0:r-f:v=y?r-f:0,v+=i;for(var E=0;E<S;E++)this.drawPen(P[E],v,m,C)}g.restore()},drawPen(i,t,r,x){t+=i.x,r+=i.y+(i.prop.y||0),x!==void 0&&(t=x-t);var s=this.canvas,g=this.context;g.save();var e=this.parser.propToContextStyle(this.defaultStyle,i.prop);if(e.buildFont(),e.syncFont(s,g),e.syncStyle(s,g),e.underlineThickness>0&&i.width>0&&this.drawUnderline(t,r,i.width,e),i.isTextPen&&this.drawText(t,r,i.text,e),i.isImagePen&&this.drawImage(t,r,i.prop.img,e),g.restore(),i.hasAreaMarker&&i.width>0){var n,p=i.prop.area;if(p)n={key:p};else{var f=i.prop.url;n={key:`url:${f}`,url:f}}this.hitAreaManager.add(t,r-this.startYOffset,i.width,this.defaultStyle.lineHeight,n)}},clear(){var i=this.canvas;this.context.clearRect(0,0,i.width,i.height)},drawUnderline(i,t,r,x){t+=x.underlineOffset-x.underlineThickness/2,this.autoRound&&(i=Math.round(i),t=Math.round(t));var s=this.context,g=s.lineCap;s.lineCap="butt",s.strokeStyle=x.underlineColor,s.lineWidth=x.underlineThickness,s.beginPath(),s.moveTo(i,t),s.lineTo(i+r,t),s.stroke(),s.lineCap=g},drawText(i,t,r,x){this.autoRound&&(i=Math.round(i),t=Math.round(t));var s=this.context;x.stroke&&x.stroke!=="none"&&x.strokeThickness>0&&(x.syncShadow(s,x.shadowStroke),s.strokeText(r,i,t)),x.color&&x.color!=="none"&&(x.syncShadow(s,x.shadowFill),s.fillText(r,i,t))},drawImage(i,t,r,x){t-=this.startYOffset,this.parent.imageManager.draw(r,this.context,i,t,this.autoRound)}};var As=Phaser.Utils.Objects.GetValue,hG=Ft.NO_NEWLINE,Zy=Ft.RAW_NEWLINE,wc=class{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=As(t,"text",""),this.x=As(t,"x",0),this.y=As(t,"y",0),this.width=As(t,"width",0);var r=As(t,"prop",null);r===null&&(r={}),this.prop=r,this.newLineMode=As(t,"newLineMode",0),this.startIndex=As(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===Zy&&(t+=`
`),t}get wrapText(){var t=this.text;return this.newLineMode!==hG&&(t+=`
`),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===Zy&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area||!!this.prop.url}},Jy=wc;var lG=function(i,t){var r=Array.isArray(i);if(t===void 0?t=r?[]:{}:we(t),r){t.length=i.length;for(var x=0,s=i.length;x<s;x++)t[x]=i[x]}else for(var g in i)t[g]=i[g];return t},ui=lG;var $y=Phaser.Utils.Objects.GetFastValue,Qy=Ft.NO_NEWLINE,uG=Ft.WRAPPED_NEWLINE,to=class{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.tagToText=$y(t,"tagToText",Gt),this.tagToTextScope=$y(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,r=this.lines.length;t<r;t++)this.lines[t].length=0;this.pensPool.pushMultiple(this.pens),this.linesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,r,x,s,g,e){var n=this.pensPool.pop();return n==null&&(n=new Jy),Rs.text=t,Rs.x=r,Rs.y=x,Rs.width=s,Rs.prop=g,Rs.newLineMode=e,n.resetFromJSON(Rs),this.addPen(n),this}addImagePen(t,r,x,s){return this.addTextPen("",t,r,x,s,Qy),this}addNewLinePen(){var t=this.lastPen,r=t?t.lastX:0,x=t?t.y:0,s=t?ui(t.prop):null;return this.addTextPen("",r,x,0,s,uG),this}addPen(t){var r=this.lastPen;r==null?t.startIndex=0:t.startIndex=r.endIndex,this.pens.push(t);var x=this.lastLine;x==null&&(x=this.linesPool.pop()||[],this.lines.push(x)),x.push(t),t.newLineMode!==Qy&&(x=this.linesPool.pop()||[],this.lines.push(x)),this.maxLinesWidth=void 0}clone(t){t==null&&(t=new to),t.clear();for(var r=0,x=this.lines.length;r<x;r++)for(var s=this.lines[r],g=0,e=s.length;g<e;g++){var n=s[g];t.addPen(n.text,n.x,n.y,n.width,ui(n.prop),n.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var r=this.lines[t];return r&&r[0]?r[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var r,x=!1,s;for(r=t;r>=0&&(s=this.lines[r],x=s!=null&&s.length>0,!x);r--);if(!x)return 0;var g=s[s.length-1];return g.endIndex}getLineWidth(t){var r=this.lines[t];if(!r)return 0;var x=r[r.length-1];if(x==null)return 0;var s=x.lastX;return s}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var t,r=0,x=0,s=this.lines.length;x<s;x++)t=this.getLineWidth(x),t>r&&(r=t);return this.maxLinesWidth=r,r}getLineWidths(){for(var t=[],r=0,x=this.lines.length;r<x;r++)t.push(this.getLineWidth(r));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",r=this.pens,x=0,s=r.length;x<s;x++)t+=r[x].plainText;return t}get rawTextLength(){for(var t=0,r=this.pens,x=0,s=this.pens.length;x<s;x++)t+=r[x].rawTextLength;return t}getSliceTagText(t,r,x){if(t===void 0&&(t=0),r===void 0){var s=this.lastPen;if(s==null)return"";r=s.endIndex}x===void 0&&(x=!1);for(var g="",e,n,p,f,u,l,a,o,c=0,h=this.pens.length;c<h&&(n=this.pens[c],u=n.endIndex,!(!(u<=t)&&(n=this.pens[c],p=x?n.wrapText:n.plainText,a=n.prop,f=n.startIndex,l=f>=t&&u<=r,l||(p=p.substring(t-f,r-f)),this.tagToTextScope?g+=this.tagToText.call(this.tagToTextScope,p,a,o):g+=this.tagToText(p,a,o),o=a,u>=r)));c++);return g}get length(){return this.lines.length}set length(t){this.clear()}},Rs={},qy=to;var fG=Phaser.Geom.Rectangle,_y=new pe,Lc=class{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){for(var t=0,r=this.hitAreas.length;t<r;t++)we(this.hitAreas[t].data);return _y.pushMultiple(this.hitAreas),this}add(t,r,x,s,g){var e=_y.pop();return e===null?e=new fG(t,r,x,s):e.setTo(t,r,x,s),e.data=g,this.hitAreas.push(e),this}getFirst(t,r){for(var x=0,s=this.hitAreas.length;x<s;x++){var g=this.hitAreas[x];if(g.contains(t,r))return g}return null}getByKey(t){for(var r=0,x=this.hitAreas.length;r<x;r++){var s=this.hitAreas[r];if(s.data.key===t)return s}return null}drawBounds(t,r,x){r===void 0&&(r=16777215),x&&t.save().scaleCanvas(x.scaleX,x.scaleY).rotateCanvas(x.rotation).translateCanvas(x.x,x.y);for(var s=0,g=this.hitAreas.length;s<g;s++){var e=this.hitAreas[s];t.lineStyle(1,r).strokeRect(e.x,e.y,e.width,e.height)}return x&&t.restore(),this}},tC=Lc;var dG=function(){this.parent.on("pointerdown",cG,this).on("pointerup",pG,this).on("pointermove",Fc,this).on("pointerover",Fc,this).on("pointerout",function(i,t){Fc.call(this,i,null,null,t)},this)},cG=function(i,t,r,x){var s=this.hitAreaManager.getFirst(t,r);if(s!==null){var g=s.data.key;dn.call(this,"areadown",g,i,t,r,x),s.data.isDown=!0}},pG=function(i,t,r,x){var s=this.hitAreaManager.getFirst(t,r);if(s!==null){var g=s.data,e=g.key;if(dn.call(this,"areaup",e,i,t,r,x),g.isDown){dn.call(this,"areaclick",e,i,t,r,x);var n=g.url;n&&window.open(n,"_blank")}g.isDown=!1}},Fc=function(i,t,r,x){if(t===null){this.lastHitAreaKey!==null&&(dn.call(this,"areaout",this.lastHitAreaKey,i,t,r,x),this.hitAreaManager.getByKey(this.lastHitAreaKey).isDown=!1,this.lastHitAreaKey=null);return}var s=this.hitAreaManager.getFirst(t,r),g=s?s.data.key:null;if(this.lastHitAreaKey!==g){if(this.lastHitAreaKey!==null){dn.call(this,"areaout",this.lastHitAreaKey,i,t,r,x);var e=this.hitAreaManager.getByKey(this.lastHitAreaKey);this.urlTagCursorStyle&&!!e.data.url&&(this.scene.input.manager.canvas.style.cursor=""),e.isDown=!1}g!==null&&(dn.call(this,"areaover",g,i,t,r,x),this.urlTagCursorStyle&&!!s.data.url&&(this.scene.input.manager.canvas.style.cursor=this.urlTagCursorStyle)),this.lastHitAreaKey=g}},dn=function(i,t,r,x,s,g){this.parent.emit(`${i}-${t}`,r,x,s,g),this.parent.emit(i,t,r,x,s,g)},eC=dG;var vG=Ft.NO_NEWLINE,mG=Ft.RAW_NEWLINE,bc=Ft.WRAPPED_NEWLINE,iC=Ft.NO_WRAP,gG=Ft.WORD_WRAP,xG=Ft.CHAR_WRAP,yG=Ft.SPLITREGEXP,rC=function(i,t,r,x,s,g){x<=0&&(r=iC);var e=[];if(!i||!i.length)return e;for(var n=r===iC,p=r===gG,f=i.split(yG),u,l,a,o=0,c=f.length;o<c;o++){if(u=f[o],a=o===c-1?vG:mG,n){var h=t(u);e.push(g.getLine(u,h,a));continue}if(l=o===0?x-s:x,u.length<=100){var h=t(u);if(h<=l){e.push(g.getLine(u,h,a));continue}}var d,v;p?(d=u.split(" "),v=d[d.length-1]==="",v&&(d.length-=1)):d=u;for(var m,y,C,T="",P=0,S,M=p?t(" "):void 0,E=0,A=d.length;E<A;E++){if(m=d[E],y=t(m),C=E===A-1,p&&(!C||v)&&(m+=" ",y+=M),p&&y>x){T!==""?e.push(g.getLine(T,P,bc)):E===0&&s>0&&e.push(g.getLine("",0,bc)),e.push(...rC(m,t,xG,x,0,g));var R=e.pop();T=R.text,P=R.width,g.freeLine(R),T===" "&&(T="",P=0);continue}S=P+y,S>l?(e.push(g.getLine(T,P,bc)),T=m,P=y,l=x):(T+=m,P=S),C&&e.push(g.getLine(T,P,a))}}return e},sC=rC;var Dc=Phaser.Utils.Objects.GetValue,CG=Ft.NO_WRAP,TG=Ft.NO_NEWLINE,$h=class{constructor(t){this.parent=t.parent,this.scene=this.parent.scene,this.context=Dc(t,"context",null),this.canvas=this.context.canvas,this.parser=Dc(t,"parser",null),this.defaultStyle=Dc(t,"style",null),this.autoRound=!0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.wrapTextLinesPool=t.wrapTextLinesPool,this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new tC,this.lastHitAreaKey=null,this.urlTagCursorStyle=null;var r=this.context;this.getTextWidth=function(x){return r.measureText(x).width}}destroy(){this.parent=void 0,this.scene=void 0,this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0),this.pensPool=void 0,this.linesPool=void 0,this.wrapTextLinesPool=void 0}updatePenManager(t,r,x,s,g){if(g===void 0&&(g=this.penManager),g.clear(),t==="")return g;var e=this.parent.style;if(e.isWrapFitMode){var n=this.parent.padding;x=e.fixedWidth-n.left-n.right}for(var p=this.canvas,f=this.context,u=function(b){return f.measureText(b).width},l=0,a=0,o=e.wrapCallback,c=e.wrapCallbackScope,h=!0,d,v,m,y=this.parser.splitText(t),C,T,P=this.wrapTextLinesPool,S=0,M=y.length;S<M;S++)if(C=this.parser.tagTextToProp(y[S],v),d=C.plainText,v=C.prop,v.img){var E=this.imageManager.getOuterWidth(v.img);x>0&&r!==CG&&x<l+E&&(g.addNewLinePen(),a+=s,l=0),g.addImagePen(l,a,E,ui(v)),l+=E}else if(d!==""){if(f.save(),m=this.parser.propToContextStyle(this.defaultStyle,v),m.buildFont(),m.syncFont(p,f),m.syncStyle(p,f),!o)T=sC(d,u,r,x,l,P);else{T=o.call(c,d,u,x,l),typeof T=="string"&&(T=T.split(`
`));for(var w,A=0,R=T.length;A<R;A++)w=T[A],typeof w=="string"?T[A]=P.getLine(w,u(w),A<R-1?2:0):h=!1}for(var w,A=0,R=T.length;A<R;A++)w=T[A],g.addTextPen(w.text,l,a,w.width,ui(v),w.newLineMode),w.newLineMode!==TG?(l=0,a+=s):l+=w.width;h&&P.freeLines(T),T=null,f.restore()}for(var S=0,M=this.lines.length;S<M;S++){var O=this.lines[S],F=O[O.length-1];F&&(F.width+=this.parser.getStrokeThinkness(this.defaultStyle,F.prop))}return g}get startXOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.xOffset}get startYOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var t=this.penManager.linesCount,r=this.defaultStyle.maxLines;return r>0&&t>r&&(t=r),t}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var t=this.desplayLinesCount,r=this.defaultStyle.lineHeight*t;return t>0&&(r-=this.defaultStyle.lineSpacing),r}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new qy({pensPool:this.pensPool,linesPool:this.linesPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,r,x){var s;if(t==null)s=this.penManager.plainText;else{var g,e=this.parser.splitText(t,1);s="";for(var n=0,p=e.length;n<p;n++)s+=e[n]}return(r!=null||x!=null)&&(r==null&&(r=0),x==null&&(x=s.length),s=s.substring(r,x)),s}getPenManager(t,r){if(t===void 0)return this.copyPenManager(r,this.penManager);r===void 0&&(r=this.newPenManager());var x=this.defaultStyle;return this.updatePenManager(t,x.wrapMode,x.wrapWidth,x.lineHeight,r),r}getText(t,r,x,s){if(t==null)return this.penManager.getSliceTagText(r,x,s);var g=this.tmpPenManager,e=this.defaultStyle;return this.updatePenManager(t,e.wrapMode,e.wrapWidth,e.lineHeight,g),g.getSliceTagText(r,x,s)}copyPenManager(t,r){return r===void 0&&(r=this.penManager),r.copy(t)}getTextWidth(t){return t===void 0&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return t===void 0&&(t=this.penManager),t.lastPen}},SG={setInteractive:eC};Object.assign($h.prototype,jy,SG);var nC=$h;var Ic=class extends pe{freeLine(t){if(!!t)return this.push(t),this}freeLines(t){if(!!t)return this.pushMultiple(t),this}getLine(t,r,x){var s=this.pop();return s===null&&(s={}),s.text=t,s.width=r,s.newLineMode=x,s}},Bc=Ic;var PG=Phaser.Utils.Objects.IsPlainObject,eo=Phaser.Utils.Objects.GetValue,EG=function(i,t){PG(i)?(t=i,i=t.key):t===void 0&&(t={key:i}),t.hasOwnProperty("key")||(t.key=i);var r=t.key,x=t.frame,s=t.width,g=t.height;if(s===void 0||g===void 0){var e=this.textureManager.getFrame(r,x),n=e?e.cutWidth:0,p=e?e.cutHeight:0;s===void 0&&g===void 0?(s=n,g=p):s===void 0?s=n*(g/p):g===void 0&&(g=p*(s/n))}this.images[i]={key:r,frame:x,width:s,height:g,y:eo(t,"y",0),left:eo(t,"left",0),right:eo(t,"right",0),originX:eo(t,"originX",0),originY:eo(t,"originY",0)}},Qh=EG;var MG=function(i,t,r,x,s){var g=this.get(i),e=this.textureManager.getFrame(g.key,g.frame),n=g.width,p=g.height;r+=g.left-g.originX*n,x+=g.y-g.originY*p,s&&(r=Math.round(r),x=Math.round(x)),t.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,r,x,n,p)},aC=MG;var qh=class{constructor(t){this.textureManager=t.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,r){if(typeof t=="string")Qh.call(this,t,r);else if(Array.isArray(t))for(var x=t,s=0,g=x.length;s<g;s++)Qh.call(this,x[s]);else{var x=t;for(var t in x)Qh.call(this,t,x[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var r=this.get(t);return r?r.width+r.left+r.right:0}getFrame(t){var r=this.get(t);return r?this.textureManager.getFrame(r.key,r.frame):void 0}hasTexture(t){return!!this.getFrame(t)}},AG={draw:aC};Object.assign(qh.prototype,AG);var _h=qh;var RG=Phaser.Utils.Objects.IsPlainObject,OG=Phaser.DOM.AddToDOM,oC=Phaser.Display.Canvas.CanvasPool,wG=Phaser.GameObjects.GameObject,Xe=Phaser.Utils.Objects.GetValue,LG=Phaser.DOM.RemoveFromDOM,FG=Ft.SPLITREGEXP,cn=null,Gc=null,Nc=null,Vc=class extends ky{constructor(t,r,x,s,g,e,n){if(RG(r)){var p=r;r=Xe(p,"x",0),x=Xe(p,"y",0),s=Xe(p,"text",""),g=Xe(p,"style")}if(r===void 0&&(r=0),x===void 0&&(x=0),super(t,e),this.renderer=t.sys.game.renderer,this.setPosition(r,x),this.setOrigin(0,0),this.initPipeline(),this.canvas=oC.create(this),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this._imageManager=void 0,g){if(g.hasOwnProperty("align")){var f=g.align;delete g.align,g.halign=f}g.hasOwnProperty("stroke")&&!g.hasOwnProperty("strokeThickness")&&(g.strokeThickness=1)}this.style=new fn(this,g);var u=Xe(g,"images",void 0);u&&this.addImage(u),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null);var l=Xe(g,"sharedPool",!0),a,o,c;l?(cn||(cn={},Gc=new pe,Nc=new Bc,this.scene.game.events.once("destroy",function(){cn=null,Gc=null,Nc=null})),cn.hasOwnProperty(e)||(cn[e]=new pe),a=cn[e],o=Gc,c=Nc):(a=new pe,o=new pe,c=new Bc),this.canvasText=new nC({parent:this,context:this.context,parser:n,style:this.style,pensPool:a,linesPool:o,wrapTextLinesPool:c}),this.parser=n,this.initRTL(),g&&g.padding&&this.setPadding(g.padding),this.setText(s),this.setUrlTagCursorStyle(Xe(g,"urlTagCursorStyle","pointer")),Xe(g,"interactive",!1)&&this.setInteractive()}preDestroy(){this.style.rtl&&LG(this.canvas),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),oC.remove(this.canvas),this.texture.destroy()}set text(t){this.setText(t)}get text(){return this._text}initRTL(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",OG(this.canvas,this.scene.sys.canvas),this.originX=1)}setText(t){return t==null?t="":Array.isArray(t)?t=t.join(`
`):t=t.toString(),t===this._text?this:(this._text=t,this.updateText(),this)}appendText(t){return t==null?this:(Array.isArray(t)&&(t=t.join(`
`)),this.setText(this.text+t.toString()),this)}setPadding(t,r,x,s){if(typeof t=="object"){var g=t,e=Xe(g,"x",null);e!==null?(t=e,x=e):(t=Xe(g,"left",0),x=Xe(g,"right",t));var n=Xe(g,"y",null);n!==null?(r=n,s=n):(r=Xe(g,"top",0),s=Xe(g,"bottom",r))}else t===void 0&&(t=0),r===void 0&&(r=t),x===void 0&&(x=t),s===void 0&&(s=r);return this.padding.left=t,this.padding.top=r,this.padding.right=x,this.padding.bottom=s,this.updateText(!1)}updateText(t){t===void 0&&(t=!0);var r=this.canvasText,x=this.style;t&&r.updatePenManager(this._text,x.wrapMode,x.wrapWidth,x.lineHeight);var s=this.padding,g,e,n=Math.ceil(r.linesWidth);x.fixedWidth===0?(this.width=n+s.left+s.right,g=n):(this.width=x.fixedWidth,g=this.width-s.left-s.right,g<n&&(g=n)),x.fixedHeight===0?(this.height=r.linesHeight+s.top+s.bottom,e=r.linesHeight):(this.height=x.fixedHeight,e=this.height-s.top-s.bottom,e<r.linesHeight&&(e=r.linesHeight));var p=this.width,f=this.height;this.updateDisplayOrigin();var u=x.resolution;p*=u,f*=u,p=Math.max(Math.ceil(p),1),f=Math.max(Math.ceil(f),1);var l=this.canvas,a=this.context;l.width!==p||l.height!==f?(l.width=p,l.height=f,this.frame.setSize(p,f)):a.clearRect(0,0,p,f),a.save(),a.scale(u,u);var o=this.style.rtl?s.right:s.left,c=s.top;r.draw(o,c,g,e),a.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(l,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var h=this.input;return h&&!h.customHitArea&&(h.hitArea.width=this.width,h.hitArea.height=this.height),this}toJSON(){var t=Components.ToJSON(this),r={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=r,t}setInteractive(t,r,x){var s=!!this.input;return wG.prototype.setInteractive.call(this,t,r,x),s||this.canvasText.setInteractive(),this}setUrlTagCursorStyle(t){return this.urlTagCursorStyle=t,this}get urlTagCursorStyle(){return this.canvasText.urlTagCursorStyle}set urlTagCursorStyle(t){this.canvasText.urlTagCursorStyle=t}getWrappedText(t,r,x){return t=this.canvasText.getText(t,r,x,!0),t.split(FG)}getPlainText(t,r,x){return this.canvasText.getPlainText(t,r,x)}getText(t,r,x,s){return s===void 0&&(s=!1),this.canvasText.getText(t,r,x,s)}getSubString(t,r,x){return this.getText(t,r,x)}copyPenManager(t){return this.canvasText.copyPenManager(t)}getPenManager(t,r){return this.canvasText.getPenManager(t,r)}setSize(t,r){return this.setFixedSize(t,r)}resize(t,r){return this.setFixedSize(t,r)}get imageManager(){return this._imageManager||(this._imageManager=new _h(this.scene)),this._imageManager}addImage(t,r){return this.imageManager.add(t,r),this}drawAreaBounds(t,r){return this.canvasText.hitAreaManager.drawBounds(t,r,this),this}generateTexture(t,r,x,s,g){var e=this.canvas;return s===void 0?s=e.width:s*=this.resolution,g===void 0?g=e.height:g*=this.resolution,Wh(this.scene,e,t,r,x,s,g),this}},tl=Vc;var ve=function(i,t){return t===void 0?`\\[${i}\\]`:`\\[${i}=(${t})\\]`},Fe=function(i){return`\\[/${i}\\]`},zc="[-.0-9]+",Yc="[a-z]+|#[0-9abcdef]+",el="[^\\]]+",hC="esc",lC=ve(hC),uC=Fe(hC),fC="raw",dC=ve(fC),cC=Fe(fC),pC="b",vC=ve(pC),mC=Fe(pC),gC="i",xC=ve(gC),yC=Fe(gC),CC="weight",TC=ve(CC,zc),SC=Fe(CC),PC="size",EC=ve(PC,zc),MC=Fe(PC),AC="color",RC=ve(AC,Yc),OC=Fe(AC),Uc="u",wC=ve(Uc),LC=ve(Uc,Yc),FC=Fe(Uc),bC="shadow",DC=ve(bC),IC=Fe(bC),Xc="stroke",BC=ve(Xc),GC=ve(Xc,Yc),NC=Fe(Xc),VC="y",zC=ve(VC,zc),YC=Fe(VC),UC="img",XC=ve(UC,el),WC=Fe(UC),kC="area",HC=ve(kC,el),KC=Fe(kC),jC="url",ZC=ve(jC,el),JC=Fe(jC),$C="align",QC=ve($C,el),qC=Fe($C),il=new RegExp(lC,"i"),io=new RegExp(uC,"i"),rl=new RegExp(dC,"i"),ro=new RegExp(cC,"i"),_C=new RegExp(vC,"i"),tT=new RegExp(mC,"i"),eT=new RegExp(xC,"i"),iT=new RegExp(yC,"i"),Wc=new RegExp(TC,"i"),rT=new RegExp(SC,"i"),kc=new RegExp(EC,"i"),sT=new RegExp(MC,"i"),Hc=new RegExp(RC,"i"),nT=new RegExp(OC,"i"),aT=new RegExp(wC,"i"),Kc=new RegExp(LC,"i"),oT=new RegExp(FC,"i"),hT=new RegExp(DC,"i"),lT=new RegExp(IC,"i"),uT=new RegExp(BC,"i"),jc=new RegExp(GC,"i"),fT=new RegExp(NC,"i"),Zc=new RegExp(zC,"i"),dT=new RegExp(YC,"i"),Jc=new RegExp(XC,"i"),cT=new RegExp(WC,"i"),$c=new RegExp(HC,"i"),pT=new RegExp(KC,"i"),Qc=new RegExp(ZC,"i"),vT=new RegExp(JC,"i"),qc=new RegExp(QC,"i"),mT=new RegExp(qC,"i"),_c=new RegExp([dC,cC,lC,uC,vC,mC,xC,yC,TC,SC,EC,MC,RC,OC,wC,LC,FC,DC,IC,BC,GC,NC,zC,YC,XC,WC,HC,KC,ZC,JC,QC,qC].join("|"),"ig");var bG=function(i,t){for(var r=[],x=0,s=!1,g=!1;;){var e=_c.exec(i);if(!e)break;var n=e[0];if(g)if(io.test(n))g=!1;else continue;else if(s)if(ro.test(n))s=!1;else continue;else il.test(n)?g=!0:rl.test(n)&&(s=!0);var p=_c.lastIndex,f=p-n.length;if(x<f){var u=i.substring(x,f);r.push(u)}t===void 0&&r.push(n),x=p}var l=i.length;return x<l&&r.push(i.substring(x,l)),r},gT=bG;var he=!1,le=!0,DG={plainText:null,prevProp:null},IG=function(i,t){t==null&&(t={});var r="";if(t.img&&Ct(t,he,"img"),t.esc)io.test(i)?Ct(t,he,"esc"):r=i;else if(t.raw)ro.test(i)?Ct(t,he,"raw"):r=i;else if(il.test(i))Ct(t,le,"esc",!0);else if(io.test(i))Ct(t,he,"esc");else if(rl.test(i))Ct(t,le,"raw",!0);else if(ro.test(i))Ct(t,he,"raw");else if(_C.test(i))Ct(t,le,"b",!0);else if(tT.test(i))Ct(t,he,"b");else if(eT.test(i))Ct(t,le,"i",!0);else if(iT.test(i))Ct(t,he,"i");else if(Wc.test(i)){var x=i.match(Wc);Ct(t,le,"weight",x[1])}else if(rT.test(i))Ct(t,he,"weight");else if(kc.test(i)){var x=i.match(kc);Ct(t,le,"size",`${x[1]}px`)}else if(sT.test(i))Ct(t,he,"size");else if(Hc.test(i)){var x=i.match(Hc);Ct(t,le,"color",x[1])}else if(nT.test(i))Ct(t,he,"color");else if(aT.test(i))Ct(t,le,"u",!0);else if(Kc.test(i)){var x=i.match(Kc);Ct(t,le,"u",x[1])}else if(oT.test(i))Ct(t,he,"u");else if(hT.test(i))Ct(t,le,"shadow",!0);else if(lT.test(i))Ct(t,he,"shadow");else if(uT.test(i))Ct(t,le,"stroke",!0);else if(jc.test(i)){var x=i.match(jc);Ct(t,le,"stroke",x[1])}else if(fT.test(i))Ct(t,he,"stroke");else if(Zc.test(i)){var x=i.match(Zc);Ct(t,le,"y",parseFloat(x[1]))}else if(dT.test(i))Ct(t,he,"y");else if(Jc.test(i)){var x=i.match(Jc);Ct(t,le,"img",x[1])}else if(cT.test(i))Ct(t,he,"img");else if($c.test(i)){var x=i.match($c);Ct(t,le,"area",x[1])}else if(pT.test(i))Ct(t,he,"area");else if(Qc.test(i)){var x=i.match(Qc);Ct(t,le,"url",x[1])}else if(vT.test(i))Ct(t,he,"url");else if(qc.test(i)){var x=i.match(qc);Ct(t,le,"align",x[1])}else mT.test(i)?Ct(t,he,"align"):r=i;var s=DG;return s.plainText=r,s.prop=t,s},Ct=function(i,t,r,x){return t===le?i[r]=x:i.hasOwnProperty(r)&&delete i[r],i},xT=IG;var BG=function(i,t){var r=NG;if(t.hasOwnProperty("img"))r.image=t.img;else{if(r.image=null,t.hasOwnProperty("family")?r.fontFamily=t.family:r.fontFamily=i.fontFamily,t.hasOwnProperty("size")){var x=t.size;typeof x=="number"&&(x=`${x}px`),r.fontSize=x}else r.fontSize=i.fontSize;r.fontStyle=GG(t),t.hasOwnProperty("color")?r.color=t.color:r.color=i.color,t.hasOwnProperty("stroke")?t.stroke===!0?(r.stroke=i.stroke,r.strokeThickness=i.strokeThickness):(r.stroke=t.stroke,r.strokeThickness=i.strokeThickness):(r.stroke=i.stroke,r.strokeThickness=0)}return t.hasOwnProperty("shadow")?t.shadow===!0?(r.shadowColor=i.shadowColor,r.shadowOffsetX=i.shadowOffsetX,r.shadowOffsetY=i.shadowOffsetY,r.shadowBlur=i.shadowBlur,r.shadowStroke=!0,r.shadowFill=!0):(r.shadowColor=t.shadow,r.shadowOffsetX=i.shadowOffsetX,r.shadowOffsetY=i.shadowOffsetY,r.shadowBlur=i.shadowBlur,r.shadowStroke=!0,r.shadowFill=!0):(r.shadowColor="#000",r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowBlur=0,r.shadowStroke=!1,r.shadowFill=!1),t.hasOwnProperty("u")?t.u===!0?(r.underlineColor=i.underlineColor,r.underlineThickness=i.underlineThickness,r.underlineOffset=i.underlineOffset):(r.underlineColor=t.u,r.underlineThickness=i.underlineThickness,r.underlineOffset=i.underlineOffset):(r.underlineColor="#000",r.underlineThickness=0,r.underlineOffset=0),r},GG=function(i){var t=i.b,r=i.weight,x=i.i;return t||r||x?x?t?"bold italic":r?`${r} italic`:"italic":t?"bold":r.toString():""},NG=new fn,yT=BG;var VG=function(i,t,r){r==null&&(r=zG);var x=[];for(var s in r)t.hasOwnProperty(s)||x.push(`[/${s}]`);for(var s in t){var g=t[s];if(r[s]!==g)switch(s){case"size":x.push(`[size=${g.replace("px","")}]`);break;case"color":case"weight":case"stroke":case"y":case"img":case"area":case"url":case"align":x.push(`[${s}=${g}]`);break;case"u":g===!0?x.push("[u]"):x.push(`[u=${g}]`);break;default:x.push(`[${s}]`);break}}return x.push(i),x.join("")},zG={},CT=VG;var sl=class{getStrokeThinkness(t,r){var x;return r.hasOwnProperty("stroke")?x=t.strokeThickness:x=0,x}},YG={splitText:gT,tagTextToProp:xT,propToContextStyle:yT,propToTagText:CT};Object.assign(sl.prototype,YG);var TT=sl;var tp=class extends tl{constructor(t,r,x,s,g){var e=new TT(g);super(t,r,x,s,g,"rexBBCodeText",e)}},ST=tp;var PT=ST;var Os=PT;J.register("BBCodeText",function(i,t,r,x){var s=new Os(this.scene,i,t,r,x);return this.scene.add.existing(s),s});Z(window,"RexPlugins.UI.BBCodeText",Os);var UG={plainText:null,prevProp:null},XG=new fn,ip=class{constructor(t){t===void 0&&(t={}),this.tags=t}addTag(t,r){this.tags[t]=r}getTag(t){return this.tags[t]}splitText(t,r){for(var x=[],s=0;;){var g=ep.exec(t);if(!g)break;var e=g[0],n=ep.lastIndex-e.length;if(s<n&&x.push(t.substring(s,n)),r===void 0)x.push(e);else if(r===1){if(MT.test(e)){var p=e.match(AT);x.push(p[2])}else if(RT.test(e)){var p=e.match(OT);x.push(p[2])}}s=ep.lastIndex}var f=t.length;return s<f&&x.push(t.substring(s,f)),x}tagTextToProp(t,r){var x,s;if(MT.test(t)){var g=t.match(AT);if(g!=null){var e=g[1],n=this.tags;n.hasOwnProperty(e)?s=n[e]:s={},s._class=e,x=g[2]}}else if(RT.test(t)){var g=t.match(OT);if(g!=null){var p=g[1];s=WG(p),s._style=p,x=g[2]}}x==null&&(x=t),s==null&&(s={});var f=UG;return f.plainText=x,f.prop=s,f}propToContextStyle(t,r){var x=XG;if(r.hasOwnProperty("img"))x.image=r.img;else{if(x.image=null,r.hasOwnProperty("family")||r.hasOwnProperty("fontFamily")||r.hasOwnProperty("font-family")){var s=r.hasOwnProperty("family")?r.family:r.hasOwnProperty("fontFamily")?r.fontFamily:r["font-family"];x.fontFamily=s}else x.fontFamily=t.fontFamily;if(r.hasOwnProperty("size")||r.hasOwnProperty("fontSize")||r.hasOwnProperty("font-size")){var g=r.hasOwnProperty("size")?r.size:r.hasOwnProperty("fontSize")?r.fontSize:r["font-size"];typeof g=="number"&&(g=`${g}px`),x.fontSize=g}else x.fontSize=t.fontSize;if(r.hasOwnProperty("style")||r.hasOwnProperty("fontStyle")||r.hasOwnProperty("font-style")){var e=r.hasOwnProperty("style")?r.style:r.hasOwnProperty("fontStyle")?r.fontStyle:r["font-style"];x.fontStyle=e}else x.fontStyle=t.fontStyle;if(r.hasOwnProperty("color")||r.hasOwnProperty("font-color")){var n=r.hasOwnProperty("color")?r.color:r["font-color"];x.color=n}else x.color=t.color;if(r.hasOwnProperty("stroke")){var p=r.stroke;x.stroke=p.hasOwnProperty("color")?p.color:t.stroke,x.strokeThickness=p.hasOwnProperty("thickness")?p.thickness:t.strokeThickness}else x.stroke=t.stroke,x.strokeThickness=t.strokeThickness}if(r.hasOwnProperty("shadow")){var f=r.shadow;x.shadowColor=f.hasOwnProperty("color")?f.color:t.shadowColor,x.shadowOffsetX=f.hasOwnProperty("offsetX")?f.offsetX:t.shadowOffsetX,x.shadowOffsetY=f.hasOwnProperty("offsetY")?f.offsetY:t.shadowOffsetY,x.shadowBlur=f.hasOwnProperty("blur")?f.blur:t.shadowBlur,x.shadowStroke=!0,x.shadowFill=!0}else x.shadowColor=t.shadowColor,x.shadowOffsetX=t.shadowOffsetX,x.shadowOffsetY=t.shadowOffsetY,x.shadowBlur=t.shadowBlur,x.shadowStroke=t.shadowStroke,x.shadowFill=t.shadowFill;if(r.hasOwnProperty("u")||r.hasOwnProperty("underline")){var u=r.hasOwnProperty("u")?r.u:r.underline;x.underlineColor=u.hasOwnProperty("color")?u.color:t.underlineColor,x.underlineThickness=u.hasOwnProperty("thickness")?u.thickness:t.underlineThickness,x.underlineOffset=u.hasOwnProperty("offset")?u.offset:t.underlineOffset}else x.underlineColor=t.underlineColor,x.underlineThickness=t.underlineThickness,x.underlineOffset=t.underlineOffset;return x}getStrokeThinkness(t,r){var x;if(r.hasOwnProperty("stroke")){var s=r.stroke;x=s.hasOwnProperty("thickness")?s.thickness:t.strokeThickness}else x=t.strokeThickness;return x}propToTagText(t,r,x){return r.hasOwnProperty("_class")?t===""&&this.isTextTag(r._class)?"":`<class='${r._class}'>${t}</class>`:r.hasOwnProperty("_style")?`<style='${r._style}'>${t}</style>`:t}destroy(){this.tags=void 0}isTextTag(t){var r=this.tags[t];return r?r.img==null:!1}},WG=function(i){i=i.split(";");for(var t={},r,x,s,g=0,e=i.length;g<e;g++)if(r=i[g].split(":"),x=r[0],s=r[1],!(ET(x)||ET(s))){switch(x){case"stroke":var n=s.split(" "),u=n.length;s={},u>=1&&(s.color=n[0]),u>=2&&(s.thickness=parseInt(n[1].replace("px","")));break;case"shadow":var p=s.split(" "),u=p.length;s={},u>=1&&(s.color=p[0]),u>=2&&(s.offsetX=parseInt(p[1].replace("px",""))),u>=3&&(s.offsetY=parseInt(p[2].replace("px",""))),u>=4&&(s.blur=parseInt(p[3].replace("px","")));break;case"u":case"underline":var f=s.split(" "),u=f.length;s={},u>=1&&(s.color=f[0]),u>=2&&(s.thickness=parseInt(f[1].replace("px",""))),u>=3&&(s.offset=parseInt(f[2].replace("px","")));break;case"y":s=parseFloat(s);break}t[x]=s}return t},ET=function(i){return i=i.replace(kG,""),i.length===0},ep=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,MT=/<\s*class=/i,AT=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,RT=/<\s*style=/i,OT=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,kG=/^\s+|\s+$/,wT=ip;var HG=Phaser.Utils.Objects.GetValue,rp=class extends tl{constructor(t,r,x,s,g){var e=HG(g,"tags",void 0),n=new wT(e);super(t,r,x,s,g,"rexTagText",n)}addTag(t,r){return this.parser.addTag(t,r),this.updateText(!0)}addTags(t){for(var r in t)this.parser.addTag(r,t[r]);return this.updateText(!0)}getTag(t){return this.parser.getTag(t)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}},LT=rp;var FT=LT;var sp=FT;J.register("tagText",function(i,t,r,x){var s=new sp(this.scene,i,t,r,x);return this.scene.add.existing(s),s});Z(window,"RexPlugins.UI.TagText",sp);var nl=Phaser.Utils.Objects.GetValue,pn=function(i,t){return t===void 0?i:i[t]},ti=function(i,t,r){i===void 0&&(i={}),t===void 0&&(t=0);var x=typeof t;return x==="string"?i[t]=r:x==="number"?(i.left=t,i.right=t,i.top=t,i.bottom=t):(i.left=nl(t,"left",0),i.right=nl(t,"right",0),i.top=nl(t,"top",0),i.bottom=nl(t,"bottom",0)),i};var al=class{constructor(t,r){this.setParent(t),this.type=r,this.renderable=!1,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(t){return this.parent=t,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(t){return t&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(t){this.setDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}onFree(){this.reset().setParent()}reset(){return this}render(){}contains(t,r){return!1}};Object.assign(al.prototype,Vr);var ol=al;var bT={renderContent(){},render(){if(!this.willRender)return this;var i=this.context;if(i.save(),i.globalAlpha=this.alpha,this.toLocalPosition){var t=this.drawX,r=this.drawY;this.autoRound&&(t=Math.round(t),r=Math.round(r)),i.translate(t,r),i.scale(this.scaleX,this.scaleY),i.rotate(this.rotation)}return this.drawBelowCallback&&this.drawBelowCallback(this),this.renderContent(),this.drawAboveCallback&&this.drawAboveCallback(this),i.restore(),this}};var KG=Phaser.Math.RotateAround,jG=function(i,t,r,x){return x===void 0?x={}:x===!0&&(np===void 0&&(np={}),x=np),x.x=(i-r.drawX)/r.scaleX,x.y=(t-r.drawY)/r.scaleY,r.rotation!==0&&KG(x,0,0,-r.rotation),x},np,DT=jG;var ZG=Phaser.Geom.Rectangle,JG=function(i,t){if(this.width===0||this.height===0)return!1;var r=DT(i,t,this,!0);return $G(this).contains(r.x,r.y)},$G=function(i){hl===void 0&&(hl=new ZG);var t=i.drawTLX,r=i.drawTLY;return hl.setTo(t,r,i.drawTRX-t,i.drawBLY-r),hl},hl,IT=JG;var QG=Phaser.Math.RotateAround,qG=function(i,t,r,x){return x===void 0?x={}:x===!0&&(ap===void 0&&(ap={}),x=ap),x.x=t,x.y=r,i.rotation!==0&&QG(x,0,0,i.rotation),x.x=x.x*i.scaleX+i.drawX,x.y=x.y*i.scaleY+i.drawY,x},ap,ll=qG;var BT=Phaser.GameObjects.Components.TransformMatrix,_G=function(i,t,r,x){x===void 0?x={}:x===!0&&(x=t8);var s=t-i.width*i.originX,g=r-i.height*i.originY;return so===void 0&&(so=new BT,GT=new BT),i.parentContainer?i.getWorldTransformMatrix(so,GT):so.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),so.transformPoint(s,g,x),x},so,GT,t8={},NT=_G;var e8=function(i,t,r,x,s){var g=ll(t,r,x,!0),e=NT(i,g.x,g.y,s);return e},VT=e8;var i8=function(i,t,r,x,s){typeof r!="number"&&(s=r,r=0,x=0);var g=t.drawCenterX+r,e=t.drawCenterY+x;return VT(i,t,g,e,s)},ul=i8;var r8=function(i,t,r){return ul(this.parent,this,i,t,r)},zT=r8;var YT={contains:IT,getWorldPosition:zT};Object.assign(YT,bT);var UT=YT;var s8=Phaser.Math.DegToRad,n8=Phaser.Math.RadToDeg,fl=Phaser.Utils.Objects.GetValue,dl=class extends ol{constructor(t,r){super(t,r),this.renderable=!0,this.toLocalPosition=!0,this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(t){this.setDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDirty(this._alpha!=t),this._alpha=t}setAlpha(t){return this.alpha=t,this}get x(){return this._x}set x(t){this.setDirty(this._x!=t),this._x=t}setX(t){return this.x=t,this}get y(){return this._y}set y(t){this.setDirty(this._y!=t),this._y=t}setY(t){return this.y=t,this}setPosition(t,r){return this.x=t,this.y=r,this}setInitialPosition(t,r){return this.x0=t,this.y0=r,this}get rotation(){return this._rotation}set rotation(t){this.setDirty(this._rotation!=t),this._rotation=t}setRotation(t){return this.rotation=t,this}get angle(){return n8(this._rotation)}set angle(t){this.rotation=s8(t)}setAngle(t){return this.angle=t,this}get scaleX(){return this._scaleX}set scaleX(t){this.setDirty(this._scaleX!==t),this._scaleX=t}setScaleX(t){return this.scaleX=t,this}get width(){return 0}set width(t){}setWidth(t,r){return r===void 0&&(r=!1),this.width=t,r&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(t){this.setDirty(this._leftSpace!==t),this._leftSpace=t}setLeftSpace(t){return this.leftSpace=t,this}get rightSpace(){return this._rightSpace}set rightSpace(t){this.setDirty(this._rightSpace!==t),this._rightSpace=t}setRightSpace(t){return this.rightSpace=t,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(t){this.setDirty(this._scaleY!==t),this._scaleY=t}setScaleY(t){return this.scaleY=t,this}get height(){return 0}set height(t){}setHeight(t,r){return r===void 0&&(r=!1),this.height=t,r&&(this.scaleX=this.scaleY),this}setScale(t,r){return r===void 0&&(r=t),this.scaleX=t,this.scaleY=r,this}setOrigin(t){return this.originX=t,this}setAlign(t){return this.align=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var r=fl(t,"width",void 0),x=fl(t,"height",void 0),s=fl(t,"scaleX",void 0),g=fl(t,"scaleY",void 0);return r!==void 0?x===void 0&&g===void 0?this.setWidth(r,!0):this.setWidth(r):s!==void 0&&this.setScaleX(s),x!==void 0?r===void 0&&s===void 0?this.setHeight(x,!0):this.setHeight(x):g!==void 0&&this.setScaleY(g),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),this}setDrawBelowCallback(t){return this.drawBelowCallback=t,this}setDrawAboveCallback(t){return this.drawAboveCallback=t,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}get willRender(){return this.visible&&this.alpha>0}get drawX(){return this.x+this.leftSpace+this.offsetX-this.originX*this.width}get drawY(){return this.y+this.offsetY}get drawTLX(){return 0}get drawTLY(){return 0}get drawBLX(){return 0}get drawBLY(){return 0}get drawTRX(){return 0}get drawTRY(){return 0}get drawBRX(){return 0}get drawBRY(){return 0}get drawCenterX(){return(this.drawTRX+this.drawTLX)/2}get drawCenterY(){return(this.drawBLY+this.drawTLY)/2}};Object.assign(dl.prototype,UT);var fi=dl;var a8=function(i,t,r){return t.hasOwnProperty(i)?t[i]:r[i]},ki=a8;var ws=Phaser.Utils.Objects.GetValue,op=class extends fi{constructor(t,r){super(t,"background"),this.setColor(ws(r,"color",null),ws(r,"color2",null),ws(r,"horizontalGradient",!0)),this.setStroke(ws(r,"stroke",null),ws(r,"strokeThickness",2)),this.setCornerRadius(ws(r,"cornerRadius",0),ws(r,"cornerIteration",null))}set color(t){t=ct(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=ct(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,r,x){return x===void 0&&(x=!0),this.color=t,this.color2=r,this.horizontalGradient=x,this}set stroke(t){t=ct(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,r){return t!=null&&r===void 0&&(r=2),this.stroke=t,this.strokeThickness=r,this}set cornerRadius(t){this.setDirty(this._cornerRadius!=t),this._cornerRadius=t}get cornerRadius(){return this._cornerRadius}set cornerIteration(t){this.setDirty(this._cornerIteration!=t),this._cornerIteration=t}get cornerIteration(){return this._cornerIteration}modifyStyle(t){return t.hasOwnProperty("color")&&this.setColor(t.color,ki("color2",t,this),ki("horizontalGradient",t,this)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,ki("strokeThickness",t,this)),t.hasOwnProperty("cornerRadius")&&this.setCornerRadius(t.cornerRadius,ki("cornerIteration",t,this)),this}modifyPorperties(t){return super.modifyPorperties(t),this.modifyStyle(t),this}setCornerRadius(t,r){return this.cornerRadius=t,this.cornerIteration=r,this}renderContent(){un(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}},XT=op;var Xr=Phaser.Utils.Objects.GetValue,hp=class extends fi{constructor(t,r){super(t,"innerbounds"),this.setColor(Xr(r,"color",null),Xr(r,"color2",null),Xr(r,"horizontalGradient",!0)),this.setStroke(Xr(r,"stroke",null),Xr(r,"strokeThickness",2))}set color(t){t=ct(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=ct(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,r,x){return x===void 0&&(x=!0),this.color=t,this.color2=r,this.horizontalGradient=x,this}set stroke(t){t=ct(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,r){return t!=null&&r===void 0&&(r=2),this.stroke=t,this.strokeThickness=r,this}modifyPorperties(t){super.modifyPorperties(t),t.hasOwnProperty("color")&&this.setColor(t.color,Xr(t,"color2",null),Xr(t,"horizontalGradient",!0)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,Xr(t,"strokeThickness",2))}renderContent(){var t=this.parent.padding,r=t.left,x=t.top,s=this.parent.width-t.left-t.right,g=this.parent.height-t.top-t.bottom,e=this.context;if(this.color!=null){var n;if(this.color2!=null){var p;this.horizontalGradient?p=e.createLinearGradient(0,0,s,0):p=e.createLinearGradient(0,0,0,g),p.addColorStop(0,this.color),p.addColorStop(1,this.color2),n=p}else n=this.color;e.fillStyle=n,e.fillRect(r,x,s,g)}this.stroke!=null&&this.strokeThickness>0&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.strokeRect(r,x,s,g))}},WT=hp;var te=Phaser.Utils.Objects.GetValue,no=class{constructor(t,r){this.parent=t,this.set(r)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,leftSpace:this.leftSpace,rightSpace:this.rightSpace,backgroundHeight:this.backgroundHeight,backgroundBottomY:this.backgroundBottomY,align:this.align}}set(t){return this.setBold(te(t,"bold",!1)),this.setItalic(te(t,"italic",!1)),this.setFontSize(te(t,"fontSize","16px")),this.setFontFamily(te(t,"fontFamily","Courier")),this.setColor(te(t,"color","#fff")),this.setStrokeStyle(te(t,"stroke",null),te(t,"strokeThickness",0)),this.setShadow(te(t,"shadowColor",null),te(t,"shadowOffsetX",0),te(t,"shadowOffsetY",0),te(t,"shadowBlur",0)),this.setOffset(te(t,"offsetX",0),te(t,"offsetY",0)),this.setSpace(te(t,"leftSpace",0),te(t,"rightSpace",0)),this.setAlign(te(t,"align",void 0)),this.setBackgroundColor(te(t,"backgroundColor",null)),this.setBackgroundHeight(te(t,"backgroundHeight",void 0)),this.setBackgroundBottomY(te(t,"backgroundBottomY",void 0)),this}modify(t){return t.hasOwnProperty("bold")&&this.setBold(t.bold),t.hasOwnProperty("italic")&&this.setItalic(t.italic),t.hasOwnProperty("fontSize")&&this.setFontSize(t.fontSize),t.hasOwnProperty("fontFamily")&&this.setFontFamily(t.fontFamily),t.hasOwnProperty("color")&&this.setColor(t.color),(t.hasOwnProperty("stroke")||t.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(ki("stroke",t,this),ki("strokeThickness",t,this)),t.hasOwnProperty("shadowColor")&&this.setShadowColor(t.shadowColor),(t.hasOwnProperty("shadowOffsetX")||t.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(ki("shadowOffsetX",t,this),ki("shadowOffsetY",t,this)),t.hasOwnProperty("shadowBlur")&&this.setShadowBlur(t.shaodwBlur),t.hasOwnProperty("offsetX")&&this.setOffsetX(t.offsetX),t.hasOwnProperty("offsetY")&&this.setOffsetY(t.offsetY),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),t.hasOwnProperty("backgroundColor")&&this.setBackgroundColor(t.backgroundColor),t.hasOwnProperty("backgroundHeight")&&this.setBackgroundHeight(t.backgroundHeight),t.hasOwnProperty("backgroundBottomY")&&this.setBackgroundBottomY(t.backgroundBottomY),this}setUpdateTextFlag(){return this.parent&&(this.parent.updateTextFlag=!0),this}clone(){return new no(null,this.toJSON())}copyFrom(t){return this.set(t.toJSON()),this}copyTo(t){return t.set(this.toJSON()),this}setBold(t){return t===void 0&&(t=!0),this.bold=t,this.setUpdateTextFlag(),this}setItalic(t){return t===void 0&&(t=!0),this.italic=t,this.setUpdateTextFlag(),this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(t){return typeof t=="number"&&(t=`${t}px`),this.fontSize=t,this.setUpdateTextFlag(),this}setFontFamily(t){return this.fontFamily=t,this.setUpdateTextFlag(),this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(t){return this.color=ct(t),this}get hasFill(){return this.color!=null}setStrokeStyle(t,r){return this.stroke=ct(t),r!==void 0&&(this.strokeThickness=r),this}setStrokeThickness(t){return this.strokeThickness=t,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(t){return this.shadowColor=ct(t),this}setShadowOffset(t,r){return t===void 0&&(t=0),r===void 0&&(r=0),this.shadowOffsetX=t,this.shadowOffsetY=r,this}setShadowBlur(t){return t===void 0&&(t=0),this.shaodwBlur=t,this}setShadow(t,r,x,s){return this.setShadowColor(t).setShadowOffset(r,x).setShadowBlur(s),this}setBackgroundColor(t){return this.backgroundColor=ct(t),this}get hasBackgroundColor(){return this.backgroundColor!=null}setBackgroundHeight(t){return this.backgroundHeight=t,this}setBackgroundBottomY(t){return this.backgroundBottomY=t,this}setOffsetX(t){return t===void 0&&(t=0),this.offsetX=t,this}setOffsetY(t){return t===void 0&&(t=0),this.offsetY=t,this}setOffset(t,r){return this.setOffsetX(t).setOffsetY(r),this}setLeftSpace(t){return t===void 0&&(t=0),this.leftSpace=t,this}setRightSpace(t){return t===void 0&&(t=0),this.rightSpace=t,this}setSpace(t,r){return this.setLeftSpace(t).setRightSpace(r),this}setAlign(t){return this.align=t,this}syncFont(t){return t.font=this.font,this}syncStyle(t){t.textBaseline="alphabetic";var r=this.hasFill,x=this.hasStroke;return t.fillStyle=r?this.color:"#000",t.strokeStyle=x?this.stroke:"#000",t.lineWidth=x?this.strokeThickness:0,t.lineCap="round",t.lineJoin="round",this}syncShadow(t){t.shadowColor!=null?(t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur):(t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0)}getTextMetrics(t,r){return this.syncFont(t).syncStyle(t),t.measureText(r)}},cl=no;var o8=function(i,t){i===void 0&&(i=0),t===void 0&&(t=0);var r=this.fixedWidth!==i||this.fixedHeight!==t;return r?(this.fixedWidth=i,this.fixedHeight=t,this.dirty=!0,this.setCanvasSize(i>0?i:this.width,t>0?t:this.height),this):this},kT=o8;var h8=function(i,t){var r=this.padding,x=r.left,s=r.right,g=r.top,e=r.bottom;return ti(r,i,t),this.dirty=this.dirty||x!=r.left||s!=r.right||g!=r.top||e!=r.bottom,this},HT=h8;var l8=function(i){return pn(this.padding,i)},KT=l8;var u8=function(i){return this.textStyle.modify(i),this},jT=u8;var f8=function(i){return this.defaultTextStyle.modify(i),this},ZT=f8;var d8=function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},JT=d8;var c8=function(i){return this.testString=i,this},$T=c8;var p8=Phaser.Utils.Array.Remove,v8=function(i){return this.poolManager.free(i),p8(this.children,i),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},QT=v8;var m8=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},qT=m8;var g8=Phaser.Utils.Array.Remove,x8=function(i){return g8(this.children,i),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},_T=x8;var y8=function(){return this.setText(),this},tS=y8;var C8=function(i,t){var r=Array.isArray(i);return t===void 0||t===this.children.length?r?this.children.push(...i):this.children.push(i):r?this.children.splice(t,0,...i):this.children.splice(t,0,i),this.lastAppendedChildren.length=0,r?this.lastAppendedChildren.push(...i):this.lastAppendedChildren.push(i),this},pl=C8;var di="text",vl="image",ml="drawer",gl="space",ao="command",xl=function(i){return i.type===di&&i.text===`
`},yl=function(i){return i.type===di&&i.text==="\f"},eS=function(i){return i.type===di&&i.text===" "},wi=function(i){return i.type===di},iS=function(i){return i.type===ao};var lp=class extends fi{constructor(t,r,x){super(t,di),this.updateTextFlag=!1,this.style=new cl(this,x),this.setText(r)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(t){this.style&&(this.style.offsetX=t)}get offsetY(){return this.style.offsetY}set offsetY(t){this.style&&(this.style.offsetY=t)}get leftSpace(){return this.style.leftSpace*this.scaleX}set leftSpace(t){this.style&&(this.style.leftSpace=t),super.leftSpace=t}get rightSpace(){return this.style.rightSpace*this.scaleX}set rightSpace(t){this.style&&(this.style.rightSpace=t),super.rightSpace=t}get align(){return this.style.align}set align(t){this.style&&(this.style.align=t)}modifyStyle(t){return this.setDirty(!0),this.style.modify(t),this.updateTextFlag&&this.updateTextSize(),this}modifyPorperties(t){return t?(this.modifyStyle(t),super.modifyPorperties(t),this):this}setText(t){return this.setDirty(this.text!=t),this.text=t,this.updateTextSize(),this}updateTextSize(){var t=this.text;if(t===`
`||t==="\f"||t==="")this.textWidth=0,this.textHeight=0,this.ascent=0,this.descent=0;else{var r=this.style.getTextMetrics(this.context,this.text);this.textWidth=r.width;var x,s;"actualBoundingBoxAscent"in r?(x=r.actualBoundingBoxAscent,s=r.actualBoundingBoxDescent):(x=0,s=0),this.textHeight=x+s,this.ascent=x,this.descent=s}return this.updateTextFlag=!1,this}get width(){return this.textWidth*this.scaleX}set width(t){this.textWidth>0?this.scaleX=t/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(t){this.textHeight>0?this.scaleY=t/this.textHeight:this.scaleY=1}get willRender(){var t=this.text;return t===`
`||t==="\f"?!1:super.willRender}renderContent(){var t=this.context,r=this.style;if(r.hasBackgroundColor){t.fillStyle=r.backgroundColor;var x=this.drawTLX,s=this.drawTRX-x,g=r.backgroundBottomY;g==null&&(g=this.drawBLY);var e=r.backgroundHeight;e==null&&(e=g-this.drawTLY);var n=g-e;t.fillRect(x,n,s,e)}var p=r.hasFill,f=r.hasStroke;!p&&!f||(r.syncFont(t).syncStyle(t),f&&(r.syncShadow(t),t.strokeText(this.text,0,0)),p&&(r.syncShadow(t),t.fillText(this.text,0,0)))}get drawTLX(){return-this.leftSpace}get drawTLY(){return-this.ascent}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.descent}get drawTRX(){return this.textWidth+this.rightSpace}get drawTRY(){return-this.ascent}get drawBRX(){return this.textWidth+this.rightSpace}get drawBRY(){return this.descent}},Cl=lp;var T8=function(i,t){t&&this.textStyle.modify(t);var r=this.poolManager.allocate(di);return r===null?r=new Cl(this,i,this.textStyle):r.setParent(this).setActive().modifyStyle(this.textStyle).setText(i),r},rS=T8;var S8=function(i,t){t&&this.textStyle.modify(t);for(var r=[],x=0,s=i.length;x<s;x++){var g=i.charAt(x),e=this.poolManager.allocate(di);e===null?e=new Cl(this,g,this.textStyle):e.setParent(this).setActive().modifyStyle(this.textStyle).setText(g),r.push(e)}return r},sS=S8;var P8=function(i,t){var r=this.createCharChildren(i,t);return this.addChild(r),this},Hi=P8;var E8=function(i,t){return i===void 0&&(i=""),this.removeChildren(),Hi.call(this,i,t),this.dirty=!0,this},nS=E8;var M8=function(i,t,r){var x=this.createCharChildren(t,r);return i=this.getCharChildIndex(i,!0),this.addChild(x,i),this},aS=M8;var A8=function(i,t){t===void 0&&(t=1);for(var r=0;r<t;r++){var x=this.getCharChildIndex(i,!0);if(x===void 0)break;this.removeChild(this.children[x])}return this},oS=A8;var R8=function(i){var t="";return this.forEachCharChild(function(r){t+=r.text},void 0,i),t},hS=R8;var up=class extends fi{constructor(t,r,x){super(t,vl),this.setTexture(r,x)}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(t){}get key(){return this._key}set key(t){this.setDirty(this._key!=t),this._key=t}get frame(){return this._frame}set frame(t){this.setDirty(this._frame!=t),this._frame=t}setTexture(t,r){return this.key=t,this.frame=r,this.frameObj=this.scene.sys.textures.getFrame(t,r),this}get width(){return this.frameWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=t/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=t/this.frameHeight}setHeight(t,r){return r===void 0&&(r=!1),this.height=t,r&&(this.scaleX=this.scaleY),this}renderContent(){var t=this.context,r=this.frameObj,x=this.frameWidth,s=this.frameHeight;t.drawImage(r.source.image,r.cutX,r.cutY,x,s,0,0,x,s)}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.frameHeight}get drawTRX(){return this.frameWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.frameWidth+this.rightSpace}get drawBRY(){return this.frameHeight}},lS=up;var O8=function(i,t,r){var x=this.poolManager.allocate(vl);return x===null?x=new lS(this,i,t):x.setParent(this).setActive().setTexture(i,t),x.modifyPorperties(r),x},uS=O8;var w8=function(i,t,r){var x=this.createImageChild(i,t,r);return this.addChild(x),this},Tl=w8;var fp=class extends fi{constructor(t,r,x,s){super(t,ml),this.setRenderCallback(r),this.setDrawerSize(x,s)}setRenderCallback(t){return t?this.renderContent=t.bind(this):delete this.renderContent,this}setDrawerSize(t,r){return t===!0?(this.toLocalPosition=!1,t=void 0,r=void 0):this.toLocalPosition=!0,t===void 0&&(t=0),r===void 0&&(r=t),this.drawerWidth=t,this.drawerHeight=r,this}onFree(){super.onFree(),this.setRenderCallback()}get width(){return this.drawerWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=this.drawerWidth>0?t/this.drawerWidth:1}get height(){return this.drawerHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=this.drawerHeight>0?t/this.drawerHeight:1}get offsetY(){return-this.height}set offsetY(t){}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.drawerHeight}get drawTRX(){return this.drawerWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.drawerWidth+this.rightSpace}get drawBRY(){return this.drawerHeight}},fS=fp;var L8=function(i,t,r){var x=this.poolManager.allocate(ml);return x===null?x=new fS(this,i,t,r):x.setParent(this).setActive().setRenderCallback(i).setDrawerSize(t,r),x},dS=L8;var F8=function(i,t,r){var x=this.createDrawerChild(i,t,r);return this.addChild(x),this},cS=F8;var dp=class extends fi{constructor(t,r){super(t,gl),this.setSpaceWidth(r)}get width(){return this.spaceWidth*this.scaleX}set width(t){this.spaceWidth>0?this.scaleX=t/this.spaceWidth:this.scaleX=1}setSpaceWidth(t){return this.spaceWidth=t,this}},pS=dp;var b8=function(i){var t=this.poolManager.allocate(gl);return t===null?t=new pS(this,i):t.setParent(this).setActive().setSpaceWidth(i),t},vS=b8;var D8=function(i){var t=this.createSpaceChild(i);return this.addChild(t),this},Sl=D8;var cp=class extends ol{constructor(t,r,x,s,g){super(t,ao),this.setName(r).setParameter(s).setCallback(x,g)}setName(t){return this.name=t,this}setParameter(t){return this.param=t,this}setCallback(t,r){return this.callback=t,this.scope=r,this}exec(){var t;return this.scope?t=this.callback.call(this.scope,this.param,this.name):t=this.callback(this.param,this.name),t}onFree(){super.onFree(),this.setName().setCallback().setParameter()}},mS=cp;var I8=function(i,t,r,x){var s=this.poolManager.allocate(ao);return s===null?s=new mS(this,i,t,r,x):s.setParent(this).setActive().setName(i).setCallback(t,x).setParameter(r),s},gS=I8;var B8=function(i,t,r,x){var s=this.createCommandChild(i,t,r,x);return this.addChild(s),this},st=B8;var G8=function(i){return i===void 0?i={}:typeof i=="object"&&(i=wt(i)),this.wrapConfig=i,this},xS=G8;var N8=function(i,t,r,x){x===void 0&&(x={word:[],width:0}),x.word.length=0;for(var s=i.length,g=t,e=x.word,n=0;g<s;){var p=i[g];if(!p.renderable){e.push(p),g++;continue}var f=p.type===di?p.text:null;if(f!==null&&f!==" "&&f!==`
`&&f!=="\f")e.push(p),n+=p.outerWidth,g++;else{g===t&&(e.push(p),n+=p.outerWidth);break}if(r)break}return x.width=n,x},yS=N8;var V8=function(i){for(var t=0,r=i.length;t<r;t++){var x=i[t];if(x.align!==void 0)return x.align}},Pl=V8;var z8=function(i,t,r){if(!(t===0&&r===0))for(var x=0,s=i.length;x<s;x++){var g=i[x];!g.renderable||(g.x+=t,g.y+=r)}},El=z8;var Y8=function(i,t,r){var x=i.hAlign,s=i.vAlign,g,e,n=i.linesHeight;switch(s){case 1:case"center":e=(r-n)/2;break;case 2:case"bottom":e=r-n;break;default:e=0;break}for(var p=i.lines,f=0,u=p.length;f<u;f++){var l=p[f],a=l.width,o=l.children,c=Pl(o);switch(c===void 0&&(c=x),c){case 1:case"center":g=(t-a)/2;break;case 2:case"right":g=t-a;break;default:g=0;break}El(o,g,e)}},CS=Y8;var U8=function(){var i=this.defaultTextStyle.getTextMetrics(this.context,this.testString),t,r;return"actualBoundingBoxAscent"in i?(t=i.actualBoundingBoxAscent,r=i.actualBoundingBoxDescent):(t=0,r=0),Ml.ascent=t,Ml.descent=r,Ml.height=t+r,Ml},Ml={},pp=U8;var ei=Phaser.Utils.Objects.GetValue,X8=function(i){var t=ei(i,"start",0);ti(this.wrapPadding,ei(i,"padding",0));var r=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,x=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,s=ei(i,"lineHeight"),g=ei(i,"ascent",s),e;if(s===void 0){var n=ei(i,"useDefaultTextHeight",!1);if(e=ei(i,"maxLines",0),this.fixedHeight>0&&!n){var k=this.fixedHeight-r;if(e>0)s=k/e;else{var p=pp.call(this);s=p.height,g=p.ascent,e=Math.floor((k-g)/s)}}else{var p=pp.call(this);s=p.height,g=p.ascent}}else if(this.fixedHeight>0){if(e=ei(i,"maxLines"),e===void 0){var k=this.fixedHeight-r;e=Math.floor(k/s)}}else e=ei(i,"maxLines",0);g===void 0&&(g=s);var f=e===0,u=ei(i,"wrapWidth",void 0);u===void 0&&(this.fixedWidth>0?u=this.fixedWidth-x:u=1/0);for(var l=ei(i,"letterSpacing",0),a=ei(i,"hAlign",0),o=ei(i,"vAlign",0),c=ei(i,"charWrap",!1),h={callback:"runWordWrap",start:t,isLastPage:!1,padding:this.wrapPadding,ascent:g,lineHeight:s,maxLines:e,wrapWidth:u,letterSpacing:l,hAlign:a,vAlign:o,charWrap:c,children:[],lines:[],maxLineWidth:0,linesHeight:0},d=this.children,v=0,m=d.length;v<m;v++)d[v].setActive(!1);u+=l;for(var y=this.padding.left+this.wrapPadding.left,C=this.padding.top+this.wrapPadding.top+g,T=y,P=C,S=u,M=t,E=d.length,A=h.children,R=h.lines,w=[],O=0,F=0,b;M<E;){b=yS(d,M,c,b);var I=b.word,N=I.length,z=b.width+N*l;M+=N;var U=xl(I[0]),W=yl(I[0]),D=U||W;if(S<z||D){if(D){var V=I[0];V.setActive().setPosition(T,P),A.push(V),w.push(V)}T=y,P+=s,S=u,R.push({children:w,width:O}),F=Math.max(F,O),O=0,w=[];var L=W||!f&&R.length===e;if(L)break;if(D)continue}S-=z,O+=z;for(var v=0,m=I.length;v<m;v++){var B=I[v];B.setActive(),A.push(B),w.push(B),B.renderable&&(B.setPosition(T,P),T+=B.outerWidth+l)}}w.length>0&&(R.push({children:w,width:O}),F=Math.max(F,O)),h.start+=A.length,h.isLastPage=h.start===E,h.maxLineWidth=F,h.linesHeight=R.length*s;var G=this.fixedWidth>0?this.fixedWidth:h.maxLineWidth+x,Y=this.fixedHeight>0?this.fixedHeight:h.linesHeight+r,X=G-x,k=Y-r;CS(h,X,k),this.setCanvasSize(G,Y);for(var v=0,m=A.length;v<m;v++){var B=A[v];!B.renderable||(B.x0=B.x,B.y0=B.y)}return h},TS=X8;var W8=Phaser.Utils.Objects.Merge,k8=function(i){return i===void 0&&(i={}),TS.call(this,W8(i,this.wrapConfig))},SS=k8;var H8=function(i,t,r){var x=i.hAlign,s=i.vAlign,g,e,n=i.rtl,p=i.lines,f=i.lineWidth,u=i.linesWidth;switch(x){case 1:case"center":g=(t-u)/2;break;case 2:case"right":g=t-u;break;default:g=0;break}n&&(g+=f);for(var l=0,a=p.length;l<a;l++){var o=p[n?a-l-1:l],c=o.children,h=o.height,d=Pl(c);switch(d===void 0&&(d=s),d){case 1:case"center":e=(r-h)/2;break;case 2:case"bottom":e=r-h;break;default:e=0;break}El(c,g,e),g+=f}},PS=H8;var ii=Phaser.Utils.Objects.GetValue,K8=function(i){var t=ii(i,"start",0);ti(this.wrapPadding,ii(i,"padding",0));var r=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,x=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,s=ii(i,"lineWidth",void 0),g;if(s===void 0)if(g=ii(i,"maxLines",0),this.fixedWidth>0){var V=this.fixedWidth-x;s=V/g}else s=0;else if(this.fixedWidth>0){if(g=ii(i,"maxLines",void 0),g===void 0){var V=this.fixedWidth-x;g=Math.floor(V/s)+1}}else g=ii(i,"maxLines",0);var e=g===0,n=ii(i,"fixedChildHeight",void 0);if(n===void 0){var p=ii(i,"charPerLine",void 0);if(p!==void 0){var L=this.fixedHeight-r;n=Math.floor(L/p)}}var f=ii(i,"wrapHeight",void 0);f===void 0&&(this.fixedHeight>0?f=this.fixedHeight-r:f=1/0);for(var u=ii(i,"letterSpacing",0),l=ii(i,"rtl",!0),a=ii(i,"hAlign",l?2:0),o=ii(i,"vAlign",0),c={callback:"runVerticalWrap",start:t,isLastPage:!1,padding:this.wrapPadding,lineWidth:s,maxLines:g,fixedChildHeight:n,wrapHeight:f,letterSpacing:u,hAlign:a,vAlign:o,rtl:l,children:[],lines:[],maxLineHeight:0,linesWidth:0},h=this.children,d=0,v=h.length;d<v;d++)h[d].setActive(!1);f+=u;for(var m=this.padding.left+this.wrapPadding.left,y=this.padding.top+this.wrapPadding.top,C=m,T=y,P=f,S=t,M=h.length,E=c.children,A=c.lines,R=[],w=0,O=0;S<M;){var F=h[S];if(S++,!F.renderable){F.setActive(),E.push(F),R.push(F);continue}var b=(n!==void 0?n:F.height)+u,I=xl(F),N=yl(F),z=I||N;if(P<b||z){I&&(F.setActive().setPosition(C,T).setOrigin(.5),E.push(F),R.push(F)),C=m,T=y,P=f,A.push({children:R,height:w}),O=Math.max(O,w),w=0,R=[];var U=N||!e&&A.length===g;if(U)break;if(z)continue}P-=b,w+=b,F.setActive().setPosition(C,T).setOrigin(.5),E.push(F),R.push(F),T+=b}R.length>0&&(A.push({children:R,height:w}),O=Math.max(O,w)),c.start+=E.length,c.isLastPage=c.start===M,c.maxLineHeight=O,c.linesWidth=A.length*s;var W=this.fixedWidth>0?this.fixedWidth:c.linesWidth+x,D=this.fixedHeight>0?this.fixedHeight:c.maxLineHeight+r,V=W-x,L=D-r;PS(c,V,L),this.setCanvasSize(W,D);for(var d=0,v=E.length;d<v;d++){var F=E[d];!F.renderable||(F.x0=F.x,F.y0=F.y)}return c},ES=K8;var j8=Phaser.Utils.Objects.Merge,Z8=function(i){return i===void 0&&(i={}),ES.call(this,j8(i,this.wrapConfig))},MS=Z8;var AS=Phaser.Utils.Objects.GetValue,J8=function(i){var t=AS(this.wrapConfig,"callback");return t||(t=AS(i,"callback",this.runWordWrap)),typeof t=="string"&&(t=this[t]),t.call(this,i)},RS=J8;var OS={setVAlign(i){return this.wrapConfig.vAlign=i,this},setHAlign(i){return this.wrapConfig.hAlign=i,this}};var $8=function(){this.clear(),this.setCanvasSize(this.width,this.height),this.background.active&&this.background.render();for(var i,t=0,r=this.children.length;t<r;t++)i=this.children[t],i.active&&i.render();this.innerBounds.active&&this.innerBounds.render()},wS=$8;var Q8=function(i,t,r){r===void 0&&(r=!0);for(var x=this.children,s=0,g=0,e=x.length;g<e;g++){var n=x[g];if(!(r&&!n.active)){var p;if(t?p=i.call(this,n,s,x):p=i(n,s,x),s++,p)break}}return this},LS=Q8;var q8=function(i,t,r){r===void 0&&(r=!0);for(var x=this.children,s=0,g=0,e=x.length;g<e;g++){var n=x[g];if(!(r&&!n.active)&&n.renderable&&!n.removed){var p;if(t?p=i.call(this,n,s,x):p=i(n,s,x),s++,p)break}}return this},FS=q8;var _8=function(i,t,r){r===void 0&&(r=!0);for(var x=this.children,s=0,g=0,e=x.length;g<e;g++){var n=x[g];if(!(r&&!n.active)&&wi(n)&&!n.removed){var p;if(t?p=i.call(this,n,s,x):p=i(n,s,x),s++,p)break}}return this},bS=_8;var t7=function(){return this.children},DS=t7;var e7=Phaser.Utils.Array.GetAll,i7=function(){return e7(this.children,"active",!0)},IS=i7;var r7=function(i,t){return t===void 0&&(t=[]),this.forEachCharChild(function(r){t.push(r)},void 0,i),t},BS=r7;var s7=function(){return this.lastAppendedChildren},GS=s7;var n7=function(i,t,r,x){typeof t!="number"&&(x=t,t=0,r=0);var s=i.drawCenterX+t,g=i.drawCenterY+r;return ll(i,s,g,x)},NS=n7;var a7=Phaser.Math.Distance.BetweenPointsSquared,o7=function(i,t){var r={x:i,y:t},x=1/0,s=null;return this.forEachRenderableChild(function(g){var e=a7(r,NS(g,!0));x>e&&(x=e,s=g)}),s},VS=o7;var h7=function(i,t,r,x){return typeof i=="number"&&(i=this.getCharChild(i,!0)),ul(this,i,t,r,x)},zS=h7;var l7=function(){for(var i=this.children,t=0,r=0,x=0,s=i.length;x<s;x++){var g=i[x];if(!(!g.renderable||!g.active||!g.visible)){var e=g.x0!==void 0?g.x0:g.x,n=g.y0!==void 0?g.y0:g.y;t=Math.max(t,e),r=Math.max(r,n)}}var p=t+this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,f=r+this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom;return(this.width!==p||this.height!==f)&&(this.dirty=!0,this.setCanvasSize(p,f)),this},YS=l7;var u7=function(i,t){t===void 0&&(t=!0);for(var r=this.children,x=0,s=r.length;x<s;x++){var g=r[x];if(!(t&&!g.active)&&wi(g)&&!g.removed){if(i===0)return x;i--}}},US=u7;var f7=function(i,t){t===void 0&&(t=!0);for(var r=this.children,x=0,s=r.length;x<s;x++){var g=r[x];if(!(t&&!g.active)&&wi(g)&&!g.removed){if(i===0)return g;i--}}},XS=f7;var d7=function(i,t){if(typeof i!="number"&&(i=this.children.indexOf(i),i<0))return null;t===void 0&&(t=!0);var r=this.children;i>=r.length&&(i=r.length);for(var x=0,s=0;s<i;s++){var g=r[s];t&&!g.active||wi(g)&&!g.removed&&x++}return x},WS=d7;var c7=function(i){return i===void 0&&(i=!0),this.childrenInteractiveEnable!==i&&(this.lastOverChild=null),this.childrenInteractiveEnable=i,this},kS=c7;var p7=function(x,t,r){for(var x=x,s=0,g=x.length;s<g;s++){var e=x[s];if(!(!e.active||!e.renderable)&&e.contains(t,r))return e}return null},Al=p7;var v7=function(){return this.on("pointerdown",m7,this).on("pointerdown",g7,this).on("pointermove",vp,this).on("pointerover",vp,this).on("pointerout",function(i,t){vp.call(this,i,null,null,t)},this),this},m7=function(i,t,r,x){if(!!this.childrenInteractiveEnable){var s=Al(this.children,t,r);!s||this.emit("child.pointerdown",s,i,t,r,x)}},g7=function(i,t,r,x){if(!!this.childrenInteractiveEnable){var s=Al(this.children,t,r);!s||this.emit("child.pointerup",s,i,t,r,x)}},vp=function(i,t,r,x){if(!!this.childrenInteractiveEnable){if(t===null){this.lastOverChild!==null&&(this.emit("child.pointerout",this.lastOverChild,i,t,r,x),this.lastOverChild=null);return}var s=Al(this.children,t,r);s!==this.lastOverChild&&(this.lastOverChild!==null&&this.emit("child.pointerout",this.lastOverChild,i,t,r,x),s!==null&&this.emit("child.pointerover",s,i,t,r,x),this.lastOverChild=s)}},HS=v7;var x7=Phaser.GameObjects.GameObject,y7=function(i,t,r){var x=!!this.input;return x7.prototype.setInteractive.call(this,i,t,r),x||HS.call(this),this},KS=y7;var C7=Phaser.Utils.Array.BringToTop,T7=Phaser.Utils.Array.SendToBack,S7=Phaser.Utils.Array.MoveUp,P7=Phaser.Utils.Array.MoveDown,E7=Phaser.Utils.Array.MoveAbove,M7=Phaser.Utils.Array.MoveBelow,jS={moveChildToFist(i){return T7(this.children,i),this},moveChildToLast(i){return C7(this.children,i),this},movechildUp(i){return S7(this.children,i),this},movechildDown(i){return P7(this.children,i),this},movechildAbove(i,t){return E7(this.children,i,t),this},movechildBelow(i,t){return M7(this.children,i,t),this}};var ZS={setBackgroundColor(i,t,r){return this.background.setColor(i,t,r),this},setBackgroundStroke(i,t){return this.background.setStroke(i,t),this},setBackgroundCornerRadius(i,t){return this.background.setCornerRadius(i,t),this}};var JS={setInnerBoundsColor(i,t,r){return this.innerBounds.setColor(i,t,r),this},setInnerBoundsStroke(i,t){return this.innerBounds.setStroke(i,t),this}};var $S={setFixedSize:kT,setPadding:HT,getPadding:KT,modifyTextStyle:jT,modifyDefaultTextStyle:ZT,resetTextStyle:JT,setTestString:$T,removeChild:QT,removeChildren:qT,popChild:_T,clearContent:tS,addChild:pl,createCharChild:rS,createCharChildren:sS,setText:nS,appendText:Hi,insertText:aS,removeText:oS,getText:hS,createImageChild:uS,appendImage:Tl,createDrawerChild:dS,appendDrawer:cS,createSpaceChild:vS,appendSpace:Sl,createCommandChild:gS,appendCommand:st,setWrapConfig:xS,runWordWrap:SS,runVerticalWrap:MS,runWrap:RS,renderContent:wS,forEachChild:LS,forEachRenderableChild:FS,forEachCharChild:bS,getChildren:DS,getActiveChildren:IS,getCharChildren:BS,getLastAppendedChildren:GS,getNearestChild:VS,getCharWorldPosition:zS,setToMinSize:YS,getCharChildIndex:US,getCharChild:XS,getCharIndex:WS,setChildrenInteractiveEnable:kS,setInteractive:KS};Object.assign($S,jS,ZS,JS,OS);var QS=$S;var A7=Phaser.Utils.Objects.GetFastValue,R7={},mp=class{constructor(t){this.pools=A7(t,"pools",R7)}free(t){if(!this.pools)return this;var r=t.type;return this.pools.hasOwnProperty(r)||(this.pools[r]=new pe),this.pools[r].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var r=0,x=t.length;r<x;r++)this.free(t[r]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}},qS=mp;var _S=Phaser.Utils.Objects.IsPlainObject,We=Phaser.Utils.Objects.GetValue,Rl=class extends Ye{constructor(t,r,x,s,g,e){_S(r)?(e=r,r=We(e,"x",0),x=We(e,"y",0),s=We(e,"width",0),g=We(e,"height",0)):_S(s)&&(e=s,s=We(e,"width",0),g=We(e,"height",0));var n=s===0?1:s,p=g===0?1:g;super(t,r,x,n,p),this.type="rexDynamicText",this.autoRound=!0,this.padding=ti(),this.wrapPadding=ti();var f=We(e,"style",void 0);this.defaultTextStyle=new cl(null,f),this.textStyle=this.defaultTextStyle.clone(),this.setTestString(We(e,"testString","|M\xC9qgy")),this.background=new XT(this,We(e,"background",void 0)),this.innerBounds=new WT(this,We(e,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.lastOverChild=null,this.poolManager=new qS(e),this.setFixedSize(s,g),this.setPadding(We(e,"padding",0)),this.setWrapConfig(We(e,"wrap",void 0)),this.setChildrenInteractiveEnable(We(e,"childrenInteractive",!1));var u=We(e,"text",void 0);u&&this.setText(u)}updateTexture(){return this.renderContent(),super.updateTexture(),this}get text(){return this.getText(!0)}set text(t){this.setText(t)}setSize(t,r){return this.setFixedSize(t,r),this}};Object.assign(Rl.prototype,QS);var vn=Rl;var t1=vn;var oo=t1;J.register("dynamicText",function(i,t,r,x,s){var g=new oo(this.scene,i,t,r,x,s);return this.scene.add.existing(g),g});Z(window,"RexPlugins.UI.DynamicText",oo);var O7=function(i){return Ri(i)?i.sys.sound:i.sound},e1=O7;var ci={setEventEmitter(i,t){return t===void 0&&(t=Phaser.Events.EventEmitter),this._privateEE=i===!0||i===void 0,this._eventEmitter=this._privateEE?new t:i,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(i){return this._eventEmitter&&i&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}};var w7=function(i){return i==null||typeof i!="object"?null:Ri(i)?i:i.scene&&Ri(i.scene)?i.scene:i.parent&&i.parent.scene&&Ri(i.parent.scene)?i.parent.scene:null},Ol=w7;var L7=Phaser.Utils.Objects.GetValue,wl=class{constructor(t,r){this.setParent(t),this.isShutdown=!1,this.setEventEmitter(L7(r,"eventEmitter",!0)),this.parent&&(this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.once("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))}shutdown(t){this.isShutdown||(this.parent&&(this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.off("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this)),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.game=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onEnvDestroy(){this.destroy(!0)}onParentDestroy(t,r){this.destroy(r)}setParent(t){return this.parent=t,this.scene=Ol(t),this.game=li(t),this}};Object.assign(wl.prototype,ci);var Tt=wl;var F7=Phaser.Utils.Objects.GetValue,gp=class extends Tt{constructor(t,r){super(t,r),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(F7(r,"tickingMode",1))}boot(){this.tickingMode===2&&!this.tickingState&&this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){typeof t=="string"&&(t=b7[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,this.tickingMode===1&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}},b7={no:0,lazy:1,always:2},Wr=gp;var D7=Phaser.Utils.Objects.GetValue,xp=class extends Wr{constructor(t,r){super(t,r);var x=this.scene?"update":"step";this.tickEventName=D7(r,"tickEventName",x),this.isSceneTicker=!I7(this.tickEventName)}startTicking(){super.startTicking(),this.isSceneTicker?this.scene.sys.events.on(this.tickEventName,this.update,this):this.game.events.on(this.tickEventName,this.update,this)}stopTicking(){super.stopTicking(),this.isSceneTicker&&this.scene?this.scene.sys.events.off(this.tickEventName,this.update,this):this.game&&this.game.events.off(this.tickEventName,this.update,this)}},I7=function(i){return i==="step"||i==="poststep"},i1=xp;var Tr=Phaser.Utils.Objects.GetValue,r1=Phaser.Math.Clamp,yp=class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.state=Tr(t,"state",ho),this.timeScale=Tr(t,"timeScale",1),this.delay=Tr(t,"delay",0),this.repeat=Tr(t,"repeat",0),this.repeatCounter=Tr(t,"repeatCounter",0),this.repeatDelay=Tr(t,"repeatDelay",0),this.duration=Tr(t,"duration",0),this.nowTime=Tr(t,"nowTime",0),this.justRestart=Tr(t,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,repeatDelay:this.repeatDelay,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(t){return this.timeScale=t,this}setDelay(t){return t===void 0&&(t=0),this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatInfinity(){return this.repeat=-1,this}setRepeatDelay(t){return this.repeatDelay=t,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?mn:lo,this.repeatCounter=0,this}stop(){return this.state=ho,this}update(t,r){this.state===ho||this.state===Ll||r===0||this.timeScale===0||(this.nowTime+=r*this.timeScale,this.justRestart=!1,this.nowTime>=this.duration?this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration,this.repeatDelay>0&&(this.nowTime-=this.repeatDelay,this.state=s1)):(this.nowTime=this.duration,this.state=Ll):this.nowTime>=0&&(this.state=mn))}get t(){var t;switch(this.state){case ho:case lo:case s1:t=0;break;case mn:t=this.nowTime/this.duration;break;case Ll:t=1;break}return r1(t,0,1)}set t(t){t=r1(t,-1,1),t<0?(this.state=lo,this.nowTime=-this.delay*t):(this.state=mn,this.nowTime=this.duration*t,t===1&&this.repeat!==0&&this.repeatCounter++)}setT(t){return this.t=t,this}get isIdle(){return this.state===ho}get isDelay(){return this.state===lo}get isCountDown(){return this.state===mn}get isRunning(){return this.state===lo||this.state===mn}get isDone(){return this.state===Ll}get isOddIteration(){return(this.repeatCounter&1)===1}get isEvenIteration(){return(this.repeatCounter&1)===0}},ho=0,lo=1,mn=2,s1=3,Ll=-1,Fl=yp;var Cp=class extends i1{constructor(t,r){super(t,r),this.timer=new Fl}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}},n1=Cp;var uo=Phaser.Utils.Objects.GetValue,a1=Phaser.Utils.Objects.GetAdvancedValue,B7=Phaser.Tweens.Builders.GetEaseFunction,Tp=class extends n1{resetFromJSON(t){return this.timer.resetFromJSON(uo(t,"timer")),this.setEnable(uo(t,"enable",!0)),this.setTarget(uo(t,"target",this.parent)),this.setDelay(a1(t,"delay",0)),this.setDuration(a1(t,"duration",1e3)),this.setEase(uo(t,"ease","Linear")),this.setRepeat(uo(t,"repeat",0)),this}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setTarget(t){return t===void 0&&(t=this.parent),this.target=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return t===void 0&&(t="Linear"),this.ease=t,this.easeFn=B7(t),this}start(){return this.timer.isRunning?this:(super.start(),this)}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(t){return t===void 0&&(t=!1),super.stop(),t&&(this.timer.setT(1),this.updateGameObject(this.target,this.timer),this.complete()),this}update(t,r){if(!this.isRunning||!this.enable||!this.parent.active)return this;var x=this.target,s=this.timer;return s.update(t,r),s.isDelay||this.updateGameObject(x,s),this.emit("update",x,this),s.isDone&&this.complete(),this}updateGameObject(t,r){}},be=Tp;var G7=Phaser.Sound.BaseSound,N7=function(i){return i instanceof G7},gn=N7;var o1=Phaser.Utils.Objects.GetValue,h1=Phaser.Utils.Objects.GetAdvancedValue,V7=Phaser.Math.Linear,Sp=class extends be{constructor(t,r,x){gn(t)&&(x=r,r=t,t=void 0),r.active=!0,r.scene=t,r.game=r.manager.game,super(r,x),this.volume={},this.resetFromJSON(x)}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(o1(t,"mode",0)),this.setEnable(o1(t,"enable",!0)),this.setVolumeRange(h1(t,"volume.start",this.parent.volume),h1(t,"volume.end",0)),this}setMode(t){return typeof t=="string"&&(t=z7[t]),this.mode=t,this}setVolumeRange(t,r){return this.volume.start=t,this.volume.end=r,this}start(){return this.timer.isRunning?this:(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start(),this)}updateGameObject(t,r){t.volume=V7(this.volume.start,this.volume.end,r.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.destroy();break}return this}},z7={stop:1,destroy:2},bl=Sp;var Y7=function(i,t,r,x,s){gn(i)&&(s=x,x=r,r=t,t=i,i=void 0),x===void 0&&(x=1),s===void 0&&(s=0);var g={mode:0,volume:{start:s,end:x},duration:r};typeof t=="string"&&(t=i.sys.sound.add(t));var e;return t.hasOwnProperty("_fade")?(e=t._fade,e.stop().resetFromJSON(g)):(e=new bl(i,t,g),t._fade=e),e.start(),t.isPlaying||t.setVolume(s).play(),t},kr=Y7;var U7=function(i,t,r,x){gn(i)&&(x=r,r=t,t=i,i=void 0),x===void 0&&(x=!0);var s={mode:x?2:1,volume:{start:t.volume,end:0},duration:r},g;return t.hasOwnProperty("_fade")?(g=t._fade,g.stop().resetFromJSON(s)):(g=new bl(i,t,s),t._fade=g),g.start(),t.isPlaying||t.play(),t},Ki=U7;var l1={setBackgroundMusicLoopValue(i){return this.backgroundMusicLoopValue=i,this},setBackgroundMusicFadeTime(i){return this.backgroundMusicFadeTime=i,this},getBackgroundMusic(){return this.backgroundMusic},setCurrentBackgroundMusic(i){return this.backgroundMusic=i,i&&(i.setLoop(this.backgroundMusicLoopValue),i.once("complete",function(){this.backgroundMusic===i&&(this.backgroundMusic.destroy(),this.backgroundMusic=void 0)},this).once("destroy",function(){this.backgroundMusic===i&&(this.backgroundMusic=void 0)},this),i.isPlaying||i.play()),this},playBackgroundMusic(i){return this.backgroundMusic&&this.backgroundMusic.key===i?this:(this.stopBackgroundMusic(),this.setCurrentBackgroundMusic(this.sound.add(i)),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this)},pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this},resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this},stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this},fadeInBackgroundMusic(i){return this.backgroundMusic&&kr(this.backgroundMusic,i,this.backgroundMusicVolume,0),this},fadeOutBackgroundMusic(i,t){return this.backgroundMusic&&Ki(this.backgroundMusic,i,t),this},crossFadeBackgroundMusic(i,t){var r=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(t,!0).playBackgroundMusic(i).fadeInBackgroundMusic(t),this.backgroundMusicFadeTime=r,this},setBackgroundMusicVolume(i){return this.backgroundMusicVolume=i,this}};var u1={setBackgroundMusic2LoopValue(i){return this.backgroundMusic2LoopValue=i,this},setBackgroundMusic2FadeTime(i){return this.backgroundMusic2FadeTime=i,this},getBackgroundMusic2(){return this.backgroundMusic2},setCurrentBackgroundMusic2(i){return this.backgroundMusic2=i,i&&(i.setLoop(this.backgroundMusic2LoopValue),i.once("complete",function(){this.backgroundMusic2===i&&(this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)},this).once("destroy",function(){this.backgroundMusic2===i&&(this.backgroundMusic2=void 0)},this),i.isPlaying||i.play()),this},playBackgroundMusic2(i){return this.backgroundMusic2&&this.backgroundMusic2.key===i?this:(this.stopBackgroundMusic2(),this.setCurrentBackgroundMusic2(this.sound.add(i)),this.backgroundMusic2FadeTime>0&&this.fadeInBackgroundMusic2(this.backgroundMusic2FadeTime),this)},pauseBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.pause(),this},resumeBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.resume(),this},stopBackgroundMusic2(){return this.backgroundMusic2&&(this.backgroundMusic2FadeTime>0?this.fadeOutBackgroundMusic2(this.backgroundMusic2FadeTime,!0):(this.backgroundMusic2.stop(),this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)),this},fadeInBackgroundMusic2(i){return this.backgroundMusic2&&kr(this.backgroundMusic2,i,this.backgroundMusic2Volume,0),this},fadeOutBackgroundMusic2(i,t){return this.backgroundMusic2&&Ki(this.backgroundMusic2,i,t),this},crossFadeBackgroundMusic2(i,t){var r=this.backgroundMusic2FadeTime;return this.backgroundMusic2FadeTime=0,this.fadeOutBackgroundMusic2(t,!0).playBackgroundMusic2(i).fadeInBackgroundMusic2(t),this.backgroundMusic2FadeTime=r,this},setBackgroundMusic2Volume(i){return this.backgroundMusic2Volume=i,this}};var f1=Phaser.Utils.Array.Remove,d1={getSoundEffects(){return this.soundEffects},getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]},playSoundEffect(i){var t=this.sound.add(i);return t.setVolume(this.soundEffectsVolume),this.soundEffects.push(t),t.once("complete",function(){t.destroy(),this.sound&&f1(this.soundEffects,t)},this).once("destroy",function(){!this.sound||f1(this.soundEffects,t)},this).play(),this},fadeInSoundEffect(i){var t=this.getLastSoundEffect();return t&&kr(t,i,this.soundEffectsVolume,0),this},fadeOutSoundEffect(i,t){var r=this.getLastSoundEffect();return r&&Ki(r,i,t),this},fadeOutAllSoundEffects(i,t){for(var r=this.soundEffects.length-1;r>=0;r--)Ki(this.soundEffects[r],i,t);return this},setSoundEffectVolume(i,t){if(t===void 0&&(t=!1),t){var r=this.getLastSoundEffect();r&&r.setVolume(i)}else this.soundEffectsVolume=i;return this}};var c1=Phaser.Utils.Array.Remove,p1={getSoundEffects2(){return this.soundEffects2},getLastSoundEffect2(){return this.soundEffects2[this.soundEffects2.length-1]},playSoundEffect2(i){var t=this.sound.add(i);return t.setVolume(this.soundEffects2Volume),this.soundEffects2.push(t),t.once("complete",function(){t.destroy(),this.sound&&c1(this.soundEffects2,t)},this).once("destroy",function(){!this.sound||c1(this.soundEffects2,t)},this).play(),this},fadeInSoundEffect2(i){var t=this.getLastSoundEffect2();return t&&kr(t,i,this.soundEffects2Volume,0),this},fadeOutSoundEffect2(i,t){var r=this.getLastSoundEffect2();return r&&Ki(r,i,t),this},fadeOutAllSoundEffects2(i,t){for(var r=this.soundEffects2.length-1;r>=0;r--)Ki(this.soundEffects2[r],i,t);return this},setSoundEffect2Volume(i,t){if(t===void 0&&(t=!1),t){var r=this.getLastSoundEffect2();r&&r.setVolume(i)}else this.soundEffects2Volume=i;return this}};var v1={};Object.assign(v1,l1,u1,d1,p1);var m1=v1;var ji=Phaser.Utils.Objects.GetValue,Dl=class{constructor(t,r){this.sound=e1(t),this.backgroundMusic=void 0,this._backgroundMusicVolume=ji(r,"bgm.volume",1),this.setBackgroundMusicLoopValue(ji(r,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(ji(r,"bgm.fade",500)),this.backgroundMusic2=void 0,this._backgroundMusic2Volume=ji(r,"bgm2.volume",1),this.setBackgroundMusic2LoopValue(ji(r,"bgm2.loop",!0)),this.setBackgroundMusic2FadeTime(ji(r,"bgm2.fade",500)),this.soundEffects=[],this._soundEffectsVolume=ji(r,"soundEffect.volume",1),this.soundEffects2=[],this._soundEffects2Volume=ji(r,"soundEffect2.volume",1);var x=ji(r,"bgm.initial",void 0);x&&this.setCurrentBackgroundMusic(x);var s=ji(r,"bgm2.initial",void 0);s&&this.setCurrentBackgroundMusic2(s)}destroy(){if(this.backgroundMusic&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.backgroundMusic2&&this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0,this.soundEffects.length)for(var t=this.soundEffects.length-1;t>=0;t--)this.soundEffects[t].destroy();if(this.soundEffects.length=0,this.soundEffects2.length)for(var t=this.soundEffects2.length-1;t>=0;t--)this.soundEffects2[t].destroy();return this.soundEffects2.length=0,this.sound=void 0,this}get backgroundMusicVolume(){return this._backgroundMusicVolume}set backgroundMusicVolume(t){this._backgroundMusicVolume=t,this.backgroundMusic&&this.backgroundMusic.setVolume(t)}get backgroundMusic2Volume(){return this._backgroundMusic2Volume}set backgroundMusic2Volume(t){this._backgroundMusic2Volume=t,this.backgroundMusic2&&this.backgroundMusic2.setVolume(t)}get soundEffectsVolume(){return this._soundEffectsVolume}set soundEffectsVolume(t){this._soundEffectsVolume=t;for(var r=this.soundEffects,x=0,s=r.length;x<s;x++)r[x].setVolume(t)}};Object.assign(Dl.prototype,m1);var g1=Dl;var Pp=Phaser.Utils.Objects.GetValue,Ep=class extends Wr{constructor(t,r){super(t,r),this.resetFromJSON(r),this.boot()}resetFromJSON(t){return this.isRunning=Pp(t,"isRunning",!1),this.timeScale=Pp(t,"timeScale",1),this.now=Pp(t,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(t){return t===void 0&&(t=0),this.delta=0,this.now=t,super.start(),this}seek(t){return this.now=t,this}setTimeScale(t){return this.timeScale=t,this}tick(t){return t*=this.timeScale,this.now+=t,this.delta=t,this.emit("update",this.now,this.delta),this}},x1=Ep;var Mp=class extends x1{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(t,r){return!this.isRunning||this.timeScale===0?this:(this.tick(r),this)}},Il=Mp;var X7=function(i,t){return t===void 0&&(t=.5),i<=t?i=i/t:i=1-(i-t)/(1-t),i},y1=X7;var C1=Phaser.Math.Clamp,Ap=class{constructor(t,r){this.setTimeline(t).reset(r)}setTimeline(t){return this.timeline=t,this}setName(t){return this.name=t,this}setCallbacks(t,r,x,s){return this.target=t,this.onStart=r,this.onProgress=x,this.onComplete=s,this}setDuration(t,r){return r===void 0&&(r=!1),this.duration=t,this.remainder=t,this.t=0,this.yoyo=r,this}setPaused(t){return this.isPaused=t,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(t){return this.removed=t,this}remove(){return this.removed=!0,this}seek(t){return this.remainder=this.duration*(1-t),this}reset(t){return this.setName(t.name).setDuration(t.duration,t.yoyo).setCallbacks(t.target,t.onStart,t.onProgress,t.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var t=1-this.remainder/this.duration;return t=C1(t,0,1),this.yoyo&&(t=y1(t)),t}setProgress(t){t=C1(t,0,1),this.remainder=this.duration*(1-t)}runCallback(t){!t||t(this.target,this.t,this)}update(t,r){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=r,this.t=this.getProgress(),this.runCallback(this.onProgress);var x=this.remainder<=0;return x&&this.runCallback(this.onComplete),x}},T1=Ap;var Rp=class extends pe{allocate(){return this.pop()}free(t){t.onFree(),this.push(t)}freeMultiple(t){for(var r=0,x=t.length;r<x;r++)this.free(t[r]);return this}},S1=Rp;var W7=Phaser.Utils.Objects.GetValue,k7=new S1,Op=class extends Il{constructor(t,r){super(t,r),this.addedTimers=[],this.timers=[],this.timerPool=W7(r,"pool",k7)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(t){var r=this.timerPool.allocate();return r?r.setTimeline(this).reset(t):r=new T1(this,t),this.addedTimers.push(r),r.runCallback(r.onStart),this.isRunning||this.start(),r}delayCall(t,r,x,s){var g=this.addTimer({duration:t,onComplete:function(e,n,p){x===void 0&&(x=[]),x.push(p),r.apply(s,x)}});return g}getTimers(t){for(var r=[],x=[this.addedTimers,this.timers],s=0,g=x.length;s<g;s++)for(var e=x[s],n=0,p=e.length;n<p;n++){var f=e[n];f.name===t&&r.push(f)}return r}update(t,r){if(super.update(t,r),!!this.isRunning){this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var x=[],s=0,g=this.timers.length;s<g;s++){var e=this.timers[s],n=e.update(this.now,this.delta);n?this.timerPool.free(e):x.push(e)}this.timers=x,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}}},P1=Op;var H7=Phaser.Utils.Objects.GetValue,K7=function(i,t){var r=H7(t,"sounds");return r!==!1&&(this.soundManager=new g1(i,r)),this.gameObjectManagers={},this.timeline=new P1(this),this.managersScene=i,this},E1=K7;var j7=function(i){this.timeline.timeScale=i;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].setTimeScale(i);return this},M1=j7;var Z7=function(){return this.timeline.timeScale},A1=Z7;var J7=function(i){this.soundManager&&this.soundManager.destroy(),this.soundManager=void 0;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].destroy(i),delete this.gameObjectManagers[t];this.timeline&&this.timeline.destroy(),this.timeline=void 0,this.managersScene=void 0},R1=J7;var O1={hasProperty(i){var t=this.gameObject;if(t.hasOwnProperty(i))return!0;var r=t[i];return r!==void 0},getProperty(i){return this.gameObject[i]},setProperty(i,t){return this.gameObject[i]=t,this},easeProperty(i,t,r,x,s,g,e){var n=this.tweens,p=n[i];p&&p.remove();var f=this.gameObject,u={targets:f,duration:r,ease:x,repeat:s,yoyo:g,onComplete:function(){n[i].remove(),n[i]=null,e&&e(f,i)},onCompleteScope:this};return u[i]=t,p=this.scene.tweens.add(u),p.timeScale=this.timeScale,n[i]=p,this}};var w1={hasMethod(i){return typeof this.gameObject[i]=="function"},call(i,...t){if(!this.hasMethod(i))return this;var r=this.gameObject;return r[i].apply(r,t),this}};var L1={hasData(i){var t=this.gameObject;return t.data?t.data.has(i):!1},getData(i){return this.gameObject.getData(i)},setData(i,t){return this.gameObject.setData(i,t),this}};var Bl=class{constructor(t,r,x){this.GOManager=t,this.tweens={},this.setGO(r,x)}get scene(){return this.GOManager.scene}get timeScale(){return this.GOManager.timeScale}destroy(){this.freeGO(),this.GOManager=void 0}freeTweens(){var t=this.tweens,r;for(var x in t)r=t[x],r&&r.remove(),t[x]=null;return this}freeGO(){return this.freeTweens(),this.gameObject.destroy(),this.gameObject=void 0,this}setGO(t,r){return t.setName(r),this.gameObject=t,this.name=r,this.freeTweens(),this}setTimeScale(t){var r=this.tweens;for(var x in r){var s=r[x];s&&(s.timeScale=t)}return this}};Object.assign(Bl.prototype,O1,w1,L1);var Gl=Bl;var $7=function(i){for(var t in i)return!1;return!0},xn=$7;var Q7={tint:0,alpha:1},F1={setGOFadeMode(i){return typeof i=="string"&&(i=Q7[i]),this.fadeMode=i,this},setGOFadeTime(i){return this.fadeTime=i,this},hasTintFadeEffect(i){return(this.fadeMode===void 0||this.fadeMode===0)&&this.fadeTime>0&&i.setTint!==void 0},hasAlphaFadeEffect(i){return(this.fadeMode===void 0||this.fadeMode===1)&&this.fadeTime>0&&i.setAlpha!==void 0},fadeBob(i,t,r,x){var s=i.gameObject;return this.hasTintFadeEffect(s)?(t!==void 0&&i.setProperty("tintGray",255*t),i.easeProperty("tintGray",Math.floor(255*r),this.fadeTime,"Linear",0,!1,x)):this.hasAlphaFadeEffect(s)?(t!==void 0&&i.setProperty("alpha",t),i.easeProperty("alpha",r,this.fadeTime,"Linear",0,!1,x)):x&&x(s),this}};var Hr=function(i){return i>>16&255},Kr=function(i){return i>>8&255},jr=function(i){return i&255};var b1=function(i,t){return(t&255)<<16|i&65535},D1=function(i,t){return(t&255)<<8|i&16711935},I1=function(i,t){return t&255|i&16776960},B1=function(i,t,r,x){return(t&255)<<16|(r&255)<<8|x&255};var q7=function(i,t){if(i.hasOwnProperty("tintR"))return i;t===void 0&&(t=16777215);var r=Hr(t),x=Kr(t),s=jr(t);return Object.defineProperty(i,"tint",{get:function(){return t},set:function(g){g=Math.floor(g)&16777215,i.setTint&&i.setTint(g),t!==g&&(t=g,r=Hr(t),x=Kr(t),s=jr(t))}}),Object.defineProperty(i,"tintR",{get:function(){return r},set:function(g){g=Math.floor(g)&255,r!==g&&(r=g,i.tint=b1(t,g))}}),Object.defineProperty(i,"tintG",{get:function(){return x},set:function(g){g=Math.floor(g)&255,x!==g&&(x=g,i.tint=D1(t,g))}}),Object.defineProperty(i,"tintB",{get:function(){return s},set:function(g){g=Math.floor(g)&255,s!==g&&(s=g,i.tint=I1(t,g))}}),Object.defineProperty(i,"tintGray",{get:function(){return Math.floor((r+x+s)/3)},set:function(g){g=Math.floor(g)&255,(r!==g||x!==g||s!==g)&&(r=g,x=g,s=g,i.tint=B1(t,g,g,g))}}),i.tint=t,i},G1=q7;var _7=Phaser.Events.EventEmitter,tN=function(i){if(i.events)return i;var t=new _7,r=i.x;Object.defineProperty(i,"x",{get:function(){return r},set:function(e){r!==e&&(r=e,t.emit("update",i))}});var x=i.y;Object.defineProperty(i,"y",{get:function(){return x},set:function(e){x!==e&&(x=e,t.emit("update",i))}});var s=i.width;Object.defineProperty(i,"width",{get:function(){return s},set:function(e){s!==e&&(s=e,t.emit("update",i))}});var g=i.height;return Object.defineProperty(i,"height",{get:function(){return g},set:function(e){g!==e&&(g=e,t.emit("update",i))}}),i.events=t,i},N1=tN;var eN=function(i,t,r,x,s,g){return g===void 0?g={}:g===!0&&(g=iN),typeof r!="number"&&(r=0,x=0),g.x=s.x+s.width*i+r,g.y=s.y+s.height*t+x,g},iN={},V1=eN;var rN=function(i,t,r,x,s,g,e){if(i.hasOwnProperty("vp"))return i;typeof r=="function"&&(e=r,r=void 0),typeof s=="function"&&(e=s,s=void 0),r===void 0&&(r=.5),x===void 0&&(x=.5),s===void 0&&(s=0),g===void 0&&(g=0),e===void 0&&(e=V1),N1(t);var n=t.events;i.vp=t;var p=function(){e(r,x,s,g,t,i)};n.on("update",p),i.once("destroy",function(){n.off("update",p),i.vp=void 0}),Object.defineProperty(i,"vpx",{get:function(){return r},set:function(f){r!==f&&(r=f,p())}}),Object.defineProperty(i,"vpy",{get:function(){return x},set:function(f){x!==f&&(x=f,p())}}),Object.defineProperty(i,"vpxOffset",{get:function(){return s},set:function(f){s!==f&&(s=f,p())}}),Object.defineProperty(i,"vpyOffset",{get:function(){return g},set:function(f){g!==f&&(g=f,p())}}),p()},z1=rN;var sN=Phaser.Utils.Array.Remove,Y1={has(i){return this.bobs.hasOwnProperty(i)},exists(i){return this.bobs.hasOwnProperty(i)},get(i){return this.bobs[i]},getGO(i){var t=this.get(i);return t?t.gameObject:null},addGO(i,t){this.remove(i,!0),this.hasTintFadeEffect(t)&&G1(t),this.viewportCoordinateEnable&&z1(t,this.viewport),t.once("destroy",function(){sN(this.removedGOs,t),this.isEmpty&&this.emit("empty")},this);var r=new this.BobClass(this,t,i);return this.bobs[i]=r,this},add(i,...t){var r=this.createGameObjectCallback,x=this.createGameObjectScope,s=r.call(x,this.scene,...t);this.addGO(i,s);var g=this.get(i);return this.fadeBob(g,0,1),this},forEachGO(i,t){for(var r in this.bobs){var x=this.bobs[r].gameObject,s;if(t?s=i.call(t,x,r,this):s=i(x,r,this),s)break}return this}};var U1={remove(i,t){if(!this.has(i))return this;var r=this.get(i);return delete this.bobs[i],this.removedGOs.push(r.gameObject),t?r.destroy():this.fadeBob(r,void 0,0,function(){r.destroy()}),this},removeAll(){var i=this.bobs;for(var t in i)this.remove(t);return this},clear(i){i===void 0&&(i=!0);var t=this.bobs;for(var r in t)i&&t[r].destroy(),delete t[r];return this.removedGOs.length=0,this}};var X1={hasProperty(i,t){return this.has(i)?this.get(i).hasProperty(t):!1},getProperty(i,t){if(!!this.has(i))return this.get(i).getProperty(t)},isNumberProperty(i,t){var r=this.getProperty(i,t);return typeof r=="number"},setProperty(i,t,r){return this.has(i)?(this.symbols&&typeof r=="string"&&this.isNumberProperty(i,t)&&(r in this.symbols?r=this.symbols[r]:console.warn(`Can't find symbol ${r}`)),this.get(i).setProperty(t,r),this):this},easeProperty(i,t,r,x,s,g,e,n){return this.has(i)?(x===void 0&&(x=1e3),s===void 0&&(s="Linear"),g===void 0&&(g=0),e===void 0&&(e=!1),this.symbols&&typeof r=="string"&&this.isNumberProperty(i,t)&&(r in this.symbols?r=this.symbols[r]:console.warn(`Can't find symbol ${r}`)),this.get(i).easeProperty(t,r,x,s,g,e,n),this):this},hasTweenTask(i,t){if(!this.has(i))return!1;var r=this.get(i).tweens;return r.hasOwnProperty(t)},getTweenTask(i,t){if(!this.has(i))return null;var r=this.get(i).tweens,x=r[t];return x||null}};var W1={hasMethod(i,t){return this.has(i)?this.get(i).hasMethod(t):!1},call(i,t,...r){return this.has(i)?(this.get(i).call(t,...r),this):this}};var k1={hasData(i,t){return this.has(i)?this.get(i).hasData(t):!1},getData(i,t){if(!!this.has(i))return this.get(i).getData(t)},setData(i,t,r){return this.has(i)?(this.get(i).setData(t,r),this):this}};var mt=function(i){return i.displayWidth!==void 0?i.displayWidth:i.width},dt=function(i){return i.displayHeight!==void 0?i.displayHeight:i.height};var H1=Phaser.Geom.Rectangle,Zr=Phaser.Math.Vector2,nN=Phaser.Math.RotateAround,yn=function(i,t){if(t===void 0?t=new H1:t===!0&&(wp===void 0&&(wp=new H1),t=wp),i.getBounds)return i.getBounds(t);var r,x,s,g,e,n,p,f;if(i.parentContainer){var u=i.parentContainer.getBoundsTransformMatrix();Nl(i,t),u.transformPoint(t.x,t.y,t),r=t.x,x=t.y,Vl(i,t),u.transformPoint(t.x,t.y,t),s=t.x,g=t.y,zl(i,t),u.transformPoint(t.x,t.y,t),e=t.x,n=t.y,Yl(i,t),u.transformPoint(t.x,t.y,t),p=t.x,f=t.y}else Nl(i,t),r=t.x,x=t.y,Vl(i,t),s=t.x,g=t.y,zl(i,t),e=t.x,n=t.y,Yl(i,t),p=t.x,f=t.y;return t.x=Math.min(r,s,e,p),t.y=Math.min(x,g,n,f),t.width=Math.max(r,s,e,p)-t.x,t.height=Math.max(x,g,n,f)-t.y,t},wp=void 0,Nl=function(i,t,r){return t===void 0?t=new Zr:t===!0&&(pi===void 0&&(pi=new Zr),t=pi),i.getTopLeft?i.getTopLeft(t):(t.x=i.x-mt(i)*i.originX,t.y=i.y-dt(i)*i.originY,Ul(i,t,r))},Vl=function(i,t,r){return t===void 0?t=new Zr:t===!0&&(pi===void 0&&(pi=new Zr),t=pi),i.getTopRight?i.getTopRight(t):(t.x=i.x-mt(i)*i.originX+mt(i),t.y=i.y-dt(i)*i.originY,Ul(i,t,r))},zl=function(i,t,r){return t===void 0?t=new Zr:t===!0&&(pi===void 0&&(pi=new Zr),t=pi),i.getBottomLeft?i.getBottomLeft(t):(t.x=i.x-mt(i)*i.originX,t.y=i.y-dt(i)*i.originY+dt(i),Ul(i,t,r))},Yl=function(i,t,r){return t===void 0?t=new Zr:t===!0&&(pi===void 0&&(pi=new Zr),t=pi),i.getBottomRight?i.getBottomRight(t):(t.x=i.x-mt(i)*i.originX+mt(i),t.y=i.y-dt(i)*i.originY+dt(i),Ul(i,t,r))},pi=void 0,Ul=function(i,t,r){if(r===void 0&&(r=!1),i.rotation!==0&&nN(t,i.x,i.y,i.rotation),r&&i.parentContainer){var x=i.parentContainer.getBoundsTransformMatrix();x.transformPoint(t.x,t.y,t)}return t};var fo=Phaser.Utils.Objects.GetValue,aN=function(i,t,r){var x,s,g,e,n;if(typeof r=="number"?x=r:(x=fo(r,"color"),s=fo(r,"lineWidth"),g=fo(r,"fillColor"),e=fo(r,"fillAlpha",1),n=fo(r,"padding",0)),Array.isArray(i))for(var p=0,f=i.length;p<f;p++)K1(i[p],t,x,s,g,e,n);else K1(i,t,x,s,g,e,n)},K1=function(i,t,r,x,s,g,e){var n=i.getBounds||i.width!==void 0&&i.height!==void 0;if(!!n){r===void 0&&(r=16777215),x===void 0&&(x=1),s===void 0&&(s=null),g===void 0&&(g=1),e===void 0&&(e=0);var p=Nl(i,Cn[0]);p.x-=e,p.y-=e;var f=Vl(i,Cn[1]);f.x+=e,f.y-=e;var u=Yl(i,Cn[2]);u.x+=e,u.y+=e;var l=zl(i,Cn[3]);l.x-=e,l.y+=e,s!==null&&t.fillStyle(s,g).fillPoints(Cn,!0,!0),r!==null&&t.lineStyle(x,r).strokePoints(Cn,!0,!0)}},Cn=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],Xl=aN;var oN=function(i,t){return this.forEachGO(function(r){r.drawBounds?r.drawBounds(i,t):Xl(r,i,t)}),this},j1=oN;var Z1={drawGameObjectsBounds:j1};Object.assign(Z1,F1,Y1,U1,X1,W1,k1);var J1=Z1;var hN=Phaser.Cameras.Scene2D.BaseCamera,lN=function(i){return i instanceof hN},$1=lN;var Q1=Phaser.Geom.Rectangle,uN=function(i,t,r){$1(t)||(r=t,t=void 0),r===void 0?r=new Q1:r===!0&&(r=fN);var x=i.sys.scale,s=x.baseSize,g=x.parentSize,e=x.canvasBounds,n=x.displayScale,p=e.x>=0?0:-(e.x*n.x),f=e.y>=0?0:-(e.y*n.y),u;g.width>=e.width?u=s.width:u=s.width-(e.width-g.width)*n.x;var l;return g.height>=e.height?l=s.height:l=s.height-(e.height-g.height)*n.y,r.setTo(p,f,u,l),t&&(r.width/=t.zoomX,r.height/=t.zoomY,r.centerX=t.centerX+t.scrollX,r.centerY=t.centerY+t.scrollY),r},fN=new Q1,vi=uN;var Li=Phaser.Utils.Objects.GetValue,Wl=class{constructor(t,r){this.scene=t,this.BobClass=Li(r,"BobClass",Gl),this.setCreateGameObjectCallback(Li(r,"createGameObject"),Li(r,"createGameObjectScope")),this.setEventEmitter(Li(r,"eventEmitter",void 0));var x=Li(r,"fade",500);typeof x=="number"?(this.setGOFadeMode(),this.setGOFadeTime(x)):(this.setGOFadeMode(Li(x,"mode")),this.setGOFadeTime(Li(x,"time",500)));var s=Li(r,"viewportCoordinate",!1);s!==!1?(this.setViewportCoordinateEnable(Li(r,"enable",!0)),this.setViewport(Li(s,"viewport"))):this.setViewportCoordinateEnable(!1),this.setSymbols(Li(r,"symbols")),this.bobs={},this.removedGOs=[],this._timeScale=1}destroy(t){this.clear(!t),this.createGameObjectCallback=void 0,this.viewport=void 0,this.scene=void 0}set timeScale(t){if(this._timeScale!==t){this._timeScale=t;var r=this.bobs;for(var x in r)r[x].setTimeScale(t)}}get timeScale(){return this._timeScale}setTimeScale(t){return this.timeScale=t,this}setCreateGameObjectCallback(t,r){return this.createGameObjectCallback=t,this.createGameObjectScope=r,this}setViewportCoordinateEnable(t){return t===void 0&&(t=!0),this.viewportCoordinateEnable=t,this}setViewport(t){return t===void 0&&(t=vi(this.scene,this.scene.cameras.main)),this.viewport=t,this}setSymbols(t){return this.symbols=t,this}get isEmpty(){return xn(this.bobs)&&this.removedGOs.length===0}};Object.assign(Wl.prototype,ci,J1);var kl=Wl;var Hl={addGameObjectManager(i,t){i===void 0&&(i={}),t===void 0&&(t=kl),i.createGameObjectScope||(i.createGameObjectScope=this);var r=new t(this.managersScene,i);return this.gameObjectManagers[i.name]=r,this},getGameObjectManager(i){return this.gameObjectManagers[i]},getGameObjectManagerNames(){var i=[];for(var t in this.gameObjectManagers)i.push(t);return i}};var q1={createGameObject(i,t,...r){return this.getGameObjectManager(i).add(t,...r),this},destroyGameObject(i,t){var r=this.getGameObjectManager(i);return t===void 0?r.removeAll():r.remove(t),this},callGameObjectMethod(i,t,r,...x){return this.getGameObjectManager(i).call(t,r,...x),this},setGameObjectProperty(i,t,r,x){return this.getGameObjectManager(i).setProperty(t,r,x),this},easeGameObjectProperty(i,t,r,x,s,g,e,n){return this.getGameObjectManager(i).easeProperty(t,r,x,s,g,e,n),this},getGameObject(i,t,r){var x=this.getGameObjectManager(i);if(typeof t=="string")return x.getGO(t);var s=t;s===void 0&&(s=x.bobs),r===void 0&&(r={});for(t in s)r[t]=x.getGO(t);return r},addGameObject(i,t,r){var x=this.getGameObjectManager(i);if(typeof t=="string")x.addGO(t,r);else{var s=t;for(t in s)x.addGO(t,s[t])}return this},drawGameObjectsBounds(i,t,r){i instanceof Phaser.GameObjects.Graphics&&(r=t,t=i,i=void 0),i===void 0&&(i=this.getGameObjectManagerNames()),Array.isArray(i)||(i=[i]);for(var x=0,s=i.length;x<s;x++)this.getGameObjectManager(i[x]).drawGameObjectsBounds(t,r);return this}};var dN=function(i){class t extends i{}var r={initManagers:E1,setTimeScale:M1,getTimeScale:A1,destroyManagers:R1};return Object.assign(t.prototype,r,Hl,q1),t},_1=dN;var cN=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,pN=/^0x[0-9A-F]+$/i,vN=function(i){return typeof i!="string"||(i===""?i=null:cN.test(i)?i=parseFloat(i):pN.test(i)?i=parseInt(i,16):i==="false"?i=!1:i==="true"&&(i=!0)),i},Kl=vN;var mN=function(i){return i.replace(gN,"\\$&").replace(xN,"\\x2d")},gN=/[|\\{}()[\]^$+*?.]/g,xN=/-/g,Tn=mN;var jl=class{constructor(t){this.setEventEmitter(Pt(t,"eventEmitter",void 0)),this.setValueConverter(Pt(t,"valueConvert",!0)),this.setLoopEnable(Pt(t,"loop",!1)),this.setMultipleLinesTagEnable(Pt(t,"multipleLinesTag",!1));var r=Pt(t,"delimiters","<>");this.setDelimiters(r[0],r[1]),this.setTranslateTagNameCallback(Pt(t,"translateTagNameCallback")),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.justCompleted=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setMultipleLinesTagEnable(t){return t===void 0&&(t=!0),this.multipleLinesTagEnable=t,this}setDelimiters(t,r){r===void 0&&(r=t[1],t=t[0]),this.delimiterLeft=t,this.delimiterRight=r,t=Tn(this.delimiterLeft),r=Tn(this.delimiterRight);var x=this.multipleLinesTagEnable?"gs":"gi";return this.reSplit=RegExp(`${t}(.+?)${r}`,x),this}setTranslateTagNameCallback(t){return this.translateTagNameCallback=t,this}setValueConverter(t){return t===!0?t=Kl:t||(t=yN),this.valueConverter=t,this}setLoopEnable(t){return t===void 0&&(t=!0),this.loopEnable=t,this}setSource(t){return this.source=t,this}resetIndex(t){return t===void 0&&(t=0),this.progressIndex=t,this.reSplit.lastIndex=t,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this.justCompleted=!1,this.isRunning=!1,this}start(t){return this.setSource(t).restart(),this}restart(){this.resetIndex().next()}next(){if(this.isPaused&&this.onResume(),this.isRunning)return this;if(this.isRunning=!0,this.justCompleted)return this.isRunning=!1,this;this.reSplit.lastIndex===0&&this.onStart();var t=this.source,r=t.length;for(this.reSplit.lastIndex=this.progressIndex;;){var x=this.reSplit.exec(t);if(!x){if(this.progressIndex<r&&(this.onContent(t.substring(this.progressIndex,r)),this.isPaused)){this.progressIndex=r;break}this.onComplete(),this.isRunning=!1;return}var s=this.reSplit.lastIndex,g=s-x[0].length;if(this.progressIndex<g&&(this.onContent(t.substring(this.progressIndex,g)),this.isPaused)){this.progressIndex=g;break}if(this.onTag(x[1]),this.progressIndex=s,this.isPaused)break}return this.isRunning=!1,this}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}pauseUntilEvent(t,r){return this.isPaused?this:(this.pause(),t.once(r,function(){this.next()},this),this)}onContent(t){this.skipEventFlag=!1,this.emit("content",t),this.lastContent=t}onTag(t){}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.justCompleted=!0,this.emit("complete",this),this.loopEnable&&this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}},yN=function(i){return i};Object.assign(jl.prototype,ci);var tP=jl;var CN=function(i,t){if(i==null)return[];for(var r=i.split(","),x=0,s=r.length;x<s;x++)r[x]=t(r[x]);return r},eP=CN;var Lp=class extends tP{constructor(t){t===void 0&&(t={}),t.hasOwnProperty("multipleLinesTag")||(t.multipleLinesTag=!1),super(t),this.setTagExpression(Pt(t,"regex.tag",void 0)),this.setValueExpression(Pt(t,"regex.value",void 0));var r=Pt(t,"delimiters","<>");this.setDelimiters(r[0],r[1])}setTagExpression(t){return t||(t=Zl),this.tagExpression=t,this}setValueExpression(t){return t||(t=Zl),this.valueExpression=t,this}setDelimiters(t,r){super.setDelimiters(t,r);var x=`(${this.tagExpression})(=(${this.valueExpression}))?`;if(this.reTag=RegExp(x,"i"),this.tagExpression!==Zl||this.valueExpression!==Zl){var s=`${this.tagExpression}(=${this.valueExpression})?`,g=`/${this.tagExpression}`;t=Tn(this.delimiterLeft),r=Tn(this.delimiterRight);var e=this.multipleLinesTagEnable?"gs":"gi";this.reSplit=RegExp(`${t}((${s})|(${g}))${r}`,e)}return this}onTag(t){var r=t.match(this.reTag),x=r[1],s=x.charAt(0)==="/";if(s&&(x=x.substring(1,x.length)),this.translateTagNameCallback&&(x=this.translateTagNameCallback(x)),this.skipEventFlag=!1,s)this.emit(`-${x}`),this.skipEventFlag||this.emit("-",x),this.lastTagEnd=x;else{var g=eP(r[3],this.valueConverter);this.emit(`+${x}`,...g),this.skipEventFlag||this.emit("+",x,...g),this.lastTagStart=x}}},Zl="[^=]+",iP=Lp;var rP=iP;var TN=function(i,t,r){var x="color",s;t.on("start",function(){s=i.textStyle.color}).on(`+${x}`,function(g){i.textStyle.setColor(g),t.skipEvent()}).on(`-${x}`,function(){i.textStyle.setColor(s),t.skipEvent()}).on("complete",function(){i.textStyle.setColor(s)})},sP=TN;var SN=function(i,t,r){var x="stroke",s;t.on("start",function(){s=i.textStyle.stroke,i.textStyle.setStrokeStyle(null)}).on(`+${x}`,function(g){g===void 0&&(g=s),i.textStyle.setStrokeStyle(g),t.skipEvent()}).on(`-${x}`,function(){i.textStyle.setStrokeStyle(null),t.skipEvent()}).on("complete",function(){i.textStyle.setStrokeStyle(s)})},nP=SN;var PN=function(i,t,r){var x="b";t.on("start",function(){i.textStyle.setBold(!1)}).on(`+${x}`,function(){i.textStyle.setBold(!0),t.skipEvent()}).on(`-${x}`,function(){i.textStyle.setBold(!1),t.skipEvent()})},aP=PN;var EN=function(i,t,r){var x="i";t.on("start",function(){i.textStyle.setItalic(!1)}).on(`+${x}`,function(){i.textStyle.setItalic(!0),t.skipEvent()}).on(`-${x}`,function(){i.textStyle.setItalic(!1),t.skipEvent()})},oP=EN;var MN=function(i,t,r){var x="size",s;t.on("start",function(){s=i.textStyle.fontSize}).on(`+${x}`,function(g){i.textStyle.setFontSize(g),t.skipEvent()}).on(`-${x}`,function(){i.textStyle.setFontSize(s),t.skipEvent()}).on("complete",function(){i.textStyle.setFontSize(s)})},hP=MN;var AN=function(i,t,r){var x="y",s;t.on("start",function(){s=i.textStyle.offsetY,i.textStyle.setOffsetY(0)}).on(`+${x}`,function(g){g===void 0&&(g=s),i.textStyle.setOffsetY(g),t.skipEvent()}).on(`-${x}`,function(){i.textStyle.setOffsetY(0),t.skipEvent()}).on("complete",function(){i.textStyle.setOffsetY(0)})},lP=AN;var RN=function(i,t,r){var x="x",s;t.on("start",function(){s=i.textStyle.offsetY,i.textStyle.setOffsetX(0)}).on(`+${x}`,function(g){g===void 0&&(g=s),i.textStyle.setOffsetX(g),t.skipEvent()}).on(`-${x}`,function(){i.textStyle.setOffsetX(0),t.skipEvent()}).on("complete",function(){i.textStyle.setOffsetX(0)})},uP=RN;var ON=function(i,t,r){var x="left",s;t.on("start",function(){s=i.textStyle.leftSpace,i.textStyle.setLeftSpace(0)}).on(`+${x}`,function(g){g===void 0&&(g=s),i.textStyle.setLeftSpace(g),t.skipEvent()}).on(`-${x}`,function(){i.textStyle.setLeftSpace(0),t.skipEvent()}).on("complete",function(){i.textStyle.setLeftSpace(0)})},fP=ON;var wN=function(i,t,r){var x="right",s;t.on("start",function(){s=i.textStyle.rightSpace,i.textStyle.setRightSpace(0)}).on(`+${x}`,function(g){g===void 0&&(g=s),i.textStyle.setRightSpace(g),t.skipEvent()}).on(`-${x}`,function(){i.textStyle.setRightSpace(0),t.skipEvent()}).on("complete",function(){i.textStyle.setRightSpace(0)})},dP=wN;var LN=function(i,t,r){var x="shadow",s;t.on("start",function(){s=i.textStyle.shadowColor,i.textStyle.setShadowColor(null)}).on(`+${x}`,function(g){g===void 0&&(g=s),i.textStyle.setShadowColor(g),t.skipEvent()}).on(`-${x}`,function(){i.textStyle.setShadowColor(null),t.skipEvent()}).on("complete",function(){i.textStyle.setShadowColor(s)})},cP=LN;var FN=function(i,t,r){var x="align";t.on(`+${x}`,function(s){i.textStyle.setAlign(s),t.skipEvent()}).on(`-${x}`,function(){i.textStyle.setAlign(),t.skipEvent()}).on("complete",function(){i.textStyle.setAlign()})},pP=FN;var bN=function(i,t,r){var x="img";t.on(`+${x}`,function(s){var g=i.imageManager.get(s);Tl.call(i,g.key,g.frame,{width:g.width,hieght:g.height,leftSpace:g.left,rightSpace:g.right}),t.skipEvent()}).on(`-${x}`,function(){t.skipEvent()})},vP=bN;var DN=function(i,t,r){var x="space";t.on(`+${x}`,function(s){Sl.call(i,s),t.skipEvent()}).on(`-${x}`,function(){t.skipEvent()})},mP=DN;var IN=function(i,t,r){var x="speed";t.on(`+${x}`,function(s){gP(i,s),t.skipEvent()}).on(`-${x}`,function(){gP(i,void 0),t.skipEvent()})},BN=function(i){this.typeWriter.setTypingSpeed(i)},gP=function(i,t){st.call(i,"speed",BN,t,i)},xP=IN;var GN=function(i,t,r){var x="se";t.on(`+${x}`,function(s,g){st.call(i,x,NN,[s,g],i),t.skipEvent()}).on(`-${x}`,function(){t.skipEvent()});var x="se2";t.on(`+${x}`,function(s,g){st.call(i,x,VN,[s,g],i),t.skipEvent()}).on(`-${x}`,function(){t.skipEvent()})},NN=function(i){if(!this.skipSoundEffect){var t=i[0],r=i[1];this.soundManager.playSoundEffect(t),r&&this.soundManager.fadeInSoundEffect(r)}},VN=function(i){if(!this.skipSoundEffect){var t=i[0],r=i[1];this.soundManager.playSoundEffect2(t),r&&this.soundManager.fadeInSoundEffect2(r)}},yP=GN;var zN=function(i,t,r){var x="se.fadein";t.on(`+${x}`,function(s){st.call(i,x,YN,s,i),t.skipEvent()}).on(`-${x}`,function(){t.skipEvent()});var x="se2.fadein";t.on(`+${x}`,function(s){st.call(i,x,UN,s,i),t.skipEvent()}).on(`-${x}`,function(){t.skipEvent()})},YN=function(i){this.soundManager.fadeInSoundEffect(i)},UN=function(i){this.soundManager.fadeInSoundEffect2(i)},CP=zN;var XN=function(i,t,r){var x="se.fadeout";t.on(`+${x}`,function(s,g){g=g==="stop",st.call(i,x,WN,[s,g],i),t.skipEvent()}).on(`-${x}`,function(){t.skipEvent()});var x="se2.fadeout";t.on(`+${x}`,function(s,g){g=g==="stop",st.call(i,x,kN,[s,g],i),t.skipEvent()}).on(`-${x}`,function(){t.skipEvent()})},WN=function(i){this.soundManager.fadeOutSoundEffect(...i)},kN=function(i){this.soundManager.fadeOutSoundEffect2(...i)},TP=XN;var HN=function(i,t,r){var x="se.volume";t.on(`+${x}`,function(s){st.call(i,x,KN,s,i),t.skipEvent()}).on(`-${x}`,function(){t.skipEvent()});var x="se2.volume";t.on(`+${x}`,function(s){st.call(i,x,jN,s,i),t.skipEvent()}).on(`-${x}`,function(){t.skipEvent()})},KN=function(i){this.soundManager.setSoundEffectVolume(i,!0)},jN=function(i){this.soundManager.setSoundEffectVolume2(i,!0)},SP=HN;var ZN=function(i,t,r){var x="bgm";t.on(`+${x}`,function(s,g){st.call(i,x,JN,[s,g],i),t.skipEvent()}).on(`-${x}`,function(){st.call(i,"bgm.stop",$N,void 0,i),t.skipEvent()});var x="bgm2";t.on(`+${x}`,function(s,g){st.call(i,x,QN,[s,g],i),t.skipEvent()}).on(`-${x}`,function(){st.call(i,"bgm2.stop",qN,void 0,i),t.skipEvent()})},JN=function(i){var t=i[0],r=i[1];this.soundManager.playBackgroundMusic(t),r&&this.soundManager.fadeInBackgroundMusic(r)},$N=function(){this.soundManager.stopBackgroundMusic()},QN=function(i){var t=i[0],r=i[1];this.soundManager.playBackgroundMusic2(t),r&&this.soundManager.fadeInBackgroundMusic2(r)},qN=function(){this.soundManager.stopBackgroundMusic2()},PP=ZN;var _N=function(i,t,r){var x="bgm.fadein";t.on(`+${x}`,function(s){st.call(i,x,tV,s,i),t.skipEvent()}).on(`-${x}`,function(){t.skipEvent()});var x="bgm2.fadein";t.on(`+${x}`,function(s){st.call(i,x,eV,s,i),t.skipEvent()}).on(`-${x}`,function(){t.skipEvent()})},tV=function(i){this.soundManager.fadeInBackgroundMusic(i)},eV=function(i){this.soundManager.fadeInBackgroundMusic2(i)},EP=_N;var iV=function(i,t,r){var x="bgm.fadeout";t.on(`+${x}`,function(s,g){g=g==="stop",st.call(i,x,rV,[s,g],i),t.skipEvent()}).on(`-${x}`,function(){t.skipEvent()});var x="bgm2.fadeout";t.on(`+${x}`,function(s,g){g=g==="stop",st.call(i,x,sV,[s,g],i),t.skipEvent()}).on(`-${x}`,function(){t.skipEvent()})},rV=function(i){this.soundManager.fadeOutBackgroundMusic(...i)},sV=function(i){this.soundManager.fadeOutBackgroundMusic2(...i)},MP=iV;var nV=function(i,t,r){var x="bgm.cross";t.on(`+${x}`,function(s,g){st.call(i,x,aV,[s,g],i),t.skipEvent()}).on(`-${x}`,function(){t.skipEvent()});var x="bgm2.cross";t.on(`+${x}`,function(s,g){st.call(i,x,oV,[s,g],i),t.skipEvent()}).on(`-${x}`,function(){t.skipEvent()})},aV=function(i){this.soundManager.crossFadeBackgroundMusic(...i)},oV=function(i){this.soundManager.crossFadeBackgroundMusic2(...i)},AP=nV;var hV=function(i,t,r){var x="bgm.pause";t.on(`+${x}`,function(){st.call(i,x,lV,void 0,i),t.skipEvent()}).on(`-${x}`,function(){st.call(i,"bgm.resume",uV,void 0,i),t.skipEvent()});var x="bgm2.pause";t.on(`+${x}`,function(){st.call(i,x,fV,void 0,i),t.skipEvent()}).on(`-${x}`,function(){st.call(i,"bgm2.resume",dV,void 0,i),t.skipEvent()})},lV=function(){this.soundManager.pauseBackgroundMusic()},uV=function(){this.soundManager.resumeBackgroundMusic()},fV=function(){this.soundManager.pauseBackgroundMusic2()},dV=function(){this.soundManager.resumeBackgroundMusic2()},RP=hV;var cV=function(i,t,r){var x="camera.fadein";t.on(`+${x}`,function(s,g,e,n){st.call(i,x,pV,[s,g,e,n],i),t.skipEvent()})},pV=function(i){this.targetCamera.fadeIn(...i)},OP=cV;var vV=function(i,t,r){var x="camera.fadeout";t.on(`+${x}`,function(s,g,e,n){st.call(i,x,mV,[s,g,e,n],i),t.skipEvent()})},mV=function(i){this.targetCamera.fadeOut(...i)},wP=vV;var gV=function(i,t,r){var x="camera.shake";t.on(`+${x}`,function(s,g){st.call(i,x,xV,[s,g],i),t.skipEvent()})},xV=function(i){this.targetCamera.shake(...i)},LP=gV;var yV=function(i,t,r){var x="camera.flash";t.on(`+${x}`,function(s,g,e,n){st.call(i,x,CV,[s,g,e,n],i),t.skipEvent()})},CV=function(i){this.targetCamera.flash(...i)},FP=yV;var TV=function(i,t,r){var x="camera.zoom";t.on(`+${x}`,function(s){st.call(i,x,SV,s,i),t.skipEvent()}).on(`+${x}.to`,function(s,g,e){st.call(i,"camera.zoom.to",PV,[s,g,e],i),t.skipEvent()})},SV=function(i){this.targetCamera.setZoom(i)},PV=function(i){this.targetCamera.zoomTo(...i)},bP=TV;var DP=Phaser.Math.DegToRad,EV=function(i,t,r){var x="camera.rotate";t.on(`+${x}`,function(s){s=DP(s),st.call(i,x,MV,s,i),t.skipEvent()}).on(`+${x}.to`,function(s,g,e){s=DP(s),st.call(i,"camera.rotate.to",AV,[s,g,e],i),t.skipEvent()})},MV=function(i){this.targetCamera.setRotation(i)},AV=function(i){var t=i[0],r=i[1],x=i[2];this.targetCamera.rotateTo(t,!1,r,x)},IP=EV;var RV=function(i,t,r){var x="camera.scroll";t.on(`+${x}`,function(s,g){st.call(i,x,OV,[s,g],i),t.skipEvent()}).on(`+${x}.to`,function(s,g,e,n){st.call(i,"camera.scroll.to",wV,[s,g,e,n],i),t.skipEvent()})},OV=function(i){this.targetCamera.setScroll(...i)},wV=function(i){var t=i[0],r=i[1],x=i[2],s=i[3],g=this.targetCamera,e=g.scrollX,n=g.scrollY;g.setScroll(t,r),t+=g.centerX,r+=g.centerY,g.setScroll(e,n),g.pan(t,r,x,s)},BP=RV;var LV=function(i,t,r){var x="wait",s="click";t.on(`+${x}`,function(g){GP(i,g),t.skipEvent()}).on(`-${x}`,function(){t.skipEvent()}).on(`+${s}`,function(){GP(i,"click"),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},FV=function(i){this.typeWriter.wait(i)},GP=function(i,t){st.call(i,"wait",FV,t,i)},NP=LV;var bV=function(i,t,r){var x="r";t.on(`+${x}`,function(){Hi.call(i,`
`),t.skipEvent()}).on(`-${x}`,function(){t.skipEvent()})},VP=bV;var DV=function(i,t,r){for(var x=["pagebreak","pb"],s=0,g=x.length;s<g;s++){var e=x[s];t.on(`+${e}`,function(){Hi.call(i,"\f"),t.skipEvent()}).on(`-${e}`,function(){t.skipEvent()})}},zP=DV;var IV=function(i,t,r){var x="content.off";t.on(`+${x}`,function(){t.setContentOutputEnable(!1),t.skipEvent()})},YP=IV;var BV=function(i,t,r){var x="content.on";t.on(`+${x}`,function(){t.setContentOutputEnable(),t.skipEvent()})},UP=BV;var GV=function(i,t,r){t.on("content",function(x){if(t.contentOutputEnable)Hi.call(i,x);else{var s=`+${t.lastTagStart}`;i.emit(`parser.${s}#content`,t,x)}})},XP=GV;var NV=function(i,t,r){t.on("start",function(){i.emit("parser.start",t)}).on("+",function(x,...s){if(!t.skipEventFlag){var g=`+${x}`,e=s;i.emit(`parser.${g}`,t,...s,e),WP(i,g,e)}}).on("-",function(x){if(!t.skipEventFlag){var s=`-${x}`,g=[];i.emit(`parser.${s}`,t,g),WP(i,s,g)}}).on("complete",function(){i.emit("parser.complete",t)})},VV=function(i,t){var r=`tag.${t}`;i==null?this.emit(r):this.emit(r,...i)},WP=function(i,t,r){st.call(i,t,VV,r,i)},kP=NV;var HP=[sP,nP,aP,oP,hP,cP,pP,lP,uP,fP,dP,vP,mP,xP,yP,CP,TP,SP,PP,EP,MP,AP,RP,OP,wP,LP,FP,bP,IP,BP,NP,VP,zP,YP,UP,XP,kP],zV=function(i,t,r){for(var x=0,s=HP.length;x<s;x++)HP[x](i,t,r)},KP=zV;var YV=function(i,t){for(var r=i.commentLineStart,x=t.split(`
`),s=0,g=x.length;s<g;s++){var e=x[s];e===""||(e.trim().length===0||r&&e.startsWith(r))&&(x[s]="")}return x.join("")},jP=YV;var UV=Phaser.Utils.Objects.GetValue,Fp=class extends rP{constructor(t,r){r===void 0&&(r={}),r.hasOwnProperty("delimiters")||(r.delimiters="[]"),super(r),KP(t,this,r),this.setCommentLineStartSymbol(UV(r,"comment","//")),this.setContentOutputEnable()}setCommentLineStartSymbol(t){return this.commentLineStart=t,this}setContentOutputEnable(t){return t===void 0&&(t=!0),this.contentOutputEnable=t,this}start(t){return super.start(jP(this,t)),this}},ZP=Fp;var JP={setDefaultTypingSpeed(i){return this.defaultSpeed=i,this},setTypingSpeed(i){return i===void 0&&(i=this.defaultSpeed),this.speed=i,this}};var co="page.fadeout",XV=function(){if(!this.fadeOutPageCallback||!this.children)return this.emit(co),this;var i=this.children.filter(function(x){return x.renderable}),t=this.fadeOutPageCallback(i,this.fadeOutPageDuration);if(!t)this.emit(co);else if(t.once)t.once("complete",function(){this.emit(co)},this);else if(t.then){var r=this;t.then(function(){r.emit(co)})}else this.emit(co);return this},$P=XV;var Jr=function(i,t){return new Promise(function(r,x){i.once(t,function(){r()})})},At=function(i){return Jr(i,"complete")};var WV=function(i){return this.children=i,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(i),this.typing(),At(this)},QP=WV;var qP="delay",Jl="anim";var _P=function(i){i===void 0&&(i=0);var t=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var r=this.getNextChild();if(!r){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(r.renderable){var x=this.animationConfig;if(x.duration>0){var s=this.timeline.addTimer({name:Jl,target:r,duration:x.duration,yoyo:x.yoyo,onStart:x.onStart,onProgress:x.onProgress,onComplete:x.onComplete});this.skipTypingAnimation&&s.seek(1)}else x.onStart&&x.onStart(r,0);this.minSizeEnable&&this.textPlayer.setToMinSize(),this.textPlayer.emit("typing",r);var g=this.nextChild;if(g&&!(this.skipSpaceEnable&&eS(g))){if(t+=this.speed+i,i=0,t>0){this.typingTimer=this.timeline.addTimer({name:qP,target:this,duration:t,onComplete:function(e,n,p){e.typingTimer=void 0,_P.call(e,p.remainder)}});break}}}else iS(r)&&r.exec()}this.minSizeEnable&&this.textPlayer.setToMinSize(),this.inTypingProcessLoop=!1},tE=_P;var kV=function(){return this.timeline.pause(),this},eE=kV;var HV=function(){return this.timeline.resume(),this},iE=HV;var KV=function(){return this.isTypingPaused?this:(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0),this)},rE=KV;var jV=function(i){return this.isTypingPaused?(i===void 0&&(i=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=i):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(i)),this):this},sE=jV;var ue="_remove.wait",$l="_remove.play",bp=[ue,$l];var ZV=function(i,t,r,x,s){return function(){i.emit(ue,s),t.apply(x,r)}},Te=ZV;var JV=function(i,t,r,x,s){var g=Te(i,r,x,s,"custom"),e=t?`wait.${t}`:"wait";i.emit(e,g)},Dp=JV;var $V=function(i,t,r,x,s){var g=Te(i,r,x,s,"time"),e;i.once(ue,function(){e&&(e.remove(),e=void 0)}),e=i.timeline.delayCall(t,g),i.emit("wait.time",t)},nE=$V;var QV=function(i,t,r,x){var s=i.clickEE;if(!!s){var g=Te(i,t,r,x,"click");i.once(ue,function(){s.off("pointerdown",g,i)}),s.once("pointerdown",g,i),i.emit("wait.click")}},aE=QV;var qV=function(i,t,r,x,s){var g=Te(i,r,x,s,"music");t&&(i.once(ue,function(){t.off("complete",g,i)}),t.once("complete",g,i)),i.emit("wait.music",t),t||g()},po=qV;var oE=function(i){switch(i){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},hE=function(i,t,r,x,s){var g=Te(i,r,x,s,`camera.${t}`),e=i.targetCamera,n,p;switch(t){case"camera.fadein":n=e.fadeEffect,p="camerafadeincomplete";break;case"camera.fadeout":n=e.fadeEffect,p="camerafadeoutcomplete";break;case"camera.flash":n=e.flashEffect,p="cameraflashcomplete";break;case"camera.shake":n=e.shakeEffect,p="camerashakecomplete";break;case"camera.zoom":n=e.zoomEffect,p="camerazoomcomplete";break;case"camera.rotate":n=e.rotateToEffect,p="camerarotatecomplete";break;case"camera.scroll":n=e.panEffect,p="camerapancomplete";break}n.isRunning?(i.once(ue,function(f){e.off(p,g,i)}),e.once(p,g,i),i.emit("wait.camera",t)):(i.emit("wait.camera",t),g())};var _V=function(i,t,r,x,s){var g=Te(i,r,x,s,"keydown"),e=`keydown-${t.toUpperCase()}`,n=i.scene.input.keyboard;i.once(ue,function(){n.off(e,g,i)}),n.once(e,g,i),i.emit("wait.keydown",t)},lE=_V;var uE=function(i,t){var r=t.split(".");return i.gameObjectManagers.hasOwnProperty(r[0])},fE=function(i,t,r,x,s){var g=Te(i,r,x,s),e=t.split("."),n=e[0],p=i.getGameObjectManager(n),f=`wait.${n}`;switch(e.length){case 1:p.isEmpty?(i.emit(f),g()):(i.once(ue,function(T){p.off("empty",g,i)}),p.once("empty",g,i),i.emit(f));return;case 2:var a=e[1];if(!p.has(a))i.emit(f,a),g();else{var u=p.get(a),l=u.gameObject;i.once(ue,function(){l.off("destroy",g,i)}),l.once("destroy",g,i),i.emit(f,a)}return;case 3:var a=e[1],o=e[2],c=p.getProperty(a,o);if(typeof c=="number"){var h=p.getTweenTask(a,o);h?(i.once(ue,function(){h.off("complete",g,i)}),h.once("complete",g,i),i.emit(f,a,o)):(i.emit(f,a,o),g());return}var d=o,v=d.startsWith("!");if(v&&(d=d.substring(1)),p.hasData(a,d)){var l=p.getGO(a),m=l.getData(d),y=!v;if(m===y)i.emit(f,a,o),g();else{var C=`changedata-${d}`,r=function(S,M,E){M=!!M,M===y&&g.call(i)};i.once(ue,function(){l.off(C,r)}),l.on(C,r),i.emit(f,a,o)}return}}};var tz=Phaser.Input.Keyboard.KeyCodes,ez=function(i,t,r,x,s){typeof t=="string"&&t.length>1&&t.indexOf("|")!==-1?t=t.split("|"):t=[t];for(var g=0,e=t.length;g<e;g++){var n=t[g];if(n==null||n==="wait")Dp(i,void 0,r,x,s);else if(typeof n=="number"||!isNaN(n))nE(i,parseFloat(n),r,x,s);else if(n==="click")aE(i,r,x,s);else if(n==="se"){var p=i.soundManager.getLastSoundEffect();po(i,p,r,x,s)}else if(n==="se2"){var p=i.soundManager.getLastSoundEffect2();po(i,p,r,x,s)}else if(n==="bgm"){var p=i.soundManager.getBackgroundMusic();po(i,p,r,x,s)}else if(n==="bgm2"){var p=i.soundManager.getBackgroundMusic2();po(i,p,r,x,s)}else tz.hasOwnProperty(n.toUpperCase())?lE(i,n,r,x,s):oE(n)?hE(i,n,r,x,s):uE(i,n)?fE(i,n,r,x,s):Dp(i,n,r,x,s)}},Ql=ez;var iz=function(i){return this.ignoreWait?this:(this.pauseTyping(),Ql(this.textPlayer,i,this.resumeTyping,[],this),this)},dE=iz;var rz=function(i){return i===void 0&&(i=!0),this.ignoreWait=i,this},cE=rz;var sz=function(i){return i===void 0&&(i=!0),this.skipSpaceEnable=i,this},pE=sz;var nz=function(i){if(i===void 0&&(i=!0),this.skipTypingAnimation=i,i)for(var t=this.timeline.getTimers(Jl),r=0,x=t.length;r<x;r++)t[r].seek(1);return this},vE=nz;var az=function(i){if(i===void 0&&(i=!0),this.skipSoundEffect=i,i){var t=this.textPlayer._soundManager;t&&t.fadeOutAllSoundEffects(100,!0)}return this},mE=az;var oz=function(){return this.typingTimer&&this.typingTimer.seek(1),this},gE=oz;var xE={fadeOutPage:$P,start:QP,typing:tE,pause:eE,resume:iE,pauseTyping:rE,resumeTyping:sE,wait:dE,setIgnoreWait:cE,setSkipSpaceEnable:pE,setSkipTypingAnimation:vE,setSkipSoundEffect:mE,skipCurrentTypingDelay:gE};Object.assign(xE,JP);var yE=xE;var Sn=Phaser.Utils.Objects.GetValue,ql=class{constructor(t,r){this.setEventEmitter(),this.textPlayer=t,this.isPageTyping=!1,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(Sn(r,"onTypingStart",lz)),this.setDefaultTypingSpeed(Sn(r,"speed",250)),this.setTypingSpeed(),this.setSkipSpaceEnable(Sn(r,"skipSpace",!1)),this.setAnimationConfig(Sn(r,"animation",void 0)),this.setMinSizeEnable(Sn(r,"minSizeEnable",!1)),this.setFadeOutPageCallback(Sn(r,"fadeOutPage"))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}get timeline(){return this.textPlayer.timeline}setTypingStartCallback(t){return this.onTypeStart=t,this}setAnimationConfig(t){return t||(t={}),t.hasOwnProperty("duration")||(t.duration=0),t.hasOwnProperty("onStart")||(t.onStart=hz),this.animationConfig=t,this}setFadeOutPageCallback(t){return this.fadeOutPageCallback=t,this}setMinSizeEnable(t){return t===void 0&&(t=!0),this.minSizeEnable=t,this}getNextChild(){var t=this.nextChild;return this.index=Math.min(this.index+1,this.children.length),this._nextChild=void 0,t}get nextChild(){return this._nextChild||(this._nextChild=this.children[this.index]),this._nextChild}},hz=function(i){i.setVisible&&i.setVisible()},lz=function(i){for(var t=0,r=i.length;t<r;t++){var x=i[t];x.setVisible&&x.setVisible(!1)}};Object.assign(ql.prototype,ci,yE);var CE=ql;var Ip=class extends Gl{playAnimation(t){return this.gameObject.anims.timeScale=this.timeScale,this.gameObject.play(t),this}stopAnimation(){return this.gameObject.stop(),this}chainAnimation(t){return this.gameObject.chain(t),this}pauseAnimation(){return this.gameObject.anims.pause(),this}setTimeScale(t){return super.setTimeScale(t),this.gameObject.anims&&(this.gameObject.anims.timeScale=t),this}},TE=Ip;var SE={playAnimation(i,t){return this.has(i)||this.add(i),this.get(i).playAnimation(t),this},stopAnimation(i){return this.has(i)?(this.get(i).stopAnimation(),this):this},chainAnimation(i,t){return this.has(i)?(this.get(i).chainAnimation(t),this):this},pauseAnimation(i){return this.has(i)?(this.get(i).pauseAnimation(),this):this}};var PE={};Object.assign(PE,SE);var EE=PE;var _l=class extends kl{constructor(t,r){r===void 0&&(r={}),r.BobClass=TE,super(t,r)}setCreateGameObjectCallback(t,r){return!t||t==="sprite"?t=uz:t==="image"&&(t=fz),super.setCreateGameObjectCallback(t,r),this}},uz=function(i,t,r){return typeof r!="string"&&typeof r!="number"&&(r=void 0),i.add.sprite(0,0,t,r)},fz=function(i,t,r){return typeof r!="string"&&typeof r!="number"&&(r=void 0),i.add.image(0,0,t,r)};Object.assign(_l.prototype,EE);var ME=_l;var AE=function(i,t){return i.length===3&&i[0]===t&&i[2]==="play"},dz=function(i,t){return i.length===3&&i[0]===t&&i[2]==="stop"},cz=function(i,t,r){var x=r.name;t.on("+",function(s,...g){if(!t.skipEventFlag){var e=s.split("."),n;if(AE(e,x))n=e[1];else return;st.call(i,`${x}.play`,pz,[x,n,g],i),t.skipEvent()}}).on("+",function(s){if(!t.skipEventFlag){var g=s.split("."),e;if(dz(g,x))e=g[1];else return;st.call(i,`${x}.stop`,RE,[x,e],i),t.skipEvent()}}).on("-",function(s){if(!t.skipEventFlag){var g=s.split("."),e;if(AE(g,x))e=g[1];else return;st.call(i,`${x}.stop`,RE,[x,e],i),t.skipEvent()}})},pz=function(i){var t,r,x;[t,r,x]=i;var s=x.shift(),g=this.getGameObjectManager(t);g.playAnimation(r,s),x.length>0&&g.chainAnimation(r,x)},RE=function(i){var t,r;[t,...r]=i;var x=this.getGameObjectManager(t);x.stopAnimation(...r)},OE=cz;var vz=function(i,t){return i.length===3&&i[0]===t&&i[2]==="pause"},mz=function(i,t,r){var x=r.name;t.on("+",function(s){if(!t.skipEventFlag){var g=s.split("."),e;if(vz(g,x))e=g[1];else return;st.call(i,`${x}.pause`,gz,[x,e],i),t.skipEvent()}})},gz=function(i){var t,r;[t,...r]=i;var x=this.getGameObjectManager(t);x.pauseAnimation(...r)},wE=mz;var xz=function(i,t){return i.length===3&&i[0]===t&&i[2]==="chain"},yz=function(i,t,r){var x=r.name;t.on("+",function(s){if(!t.skipEventFlag){var g=s.split("."),e;if(xz(g,x))e=g[1];else return;var n=Array.prototype.slice.call(arguments,1);st.call(i,`${x}.chain`,Cz,[x,e,n],i),t.skipEvent()}})},Cz=function(i){var t,r;[t,...r]=i;var x=this.getGameObjectManager(t);x.chainAnimation(...r)},LE=yz;var Tz=[OE,wE,LE],Sz=function(i){i===void 0&&(i={}),i.name="sprite",i.parseCallbacks=Tz,this.addGameObjectManager(i,ME)},FE=Sz;var bE=function(i,t){return i.length===2&&i[0]===t},Pz=function(i,t,r){var x=r.name;t.on("+",function(s,...g){if(!t.skipEventFlag){var e=s.split("."),n;if(bE(e,x))n=e[1];else return;st.call(i,`${x}.add`,Ez,[x,n,...g],i),t.skipEvent()}}).on("-",function(s){if(!t.skipEventFlag){var g=s.split("."),e;if(bE(g,x))e=g[1];else return;st.call(i,`${x}.remove`,Mz,[x,e],i),t.skipEvent()}})},Ez=function(i){var t,r;[t,...r]=i;var x=this.getGameObjectManager(t);x.add(...r)},Mz=function(i){var t,r;[t,...r]=i;var x=this.getGameObjectManager(t);x.remove(...r)},DE=Pz;var Az=function(i,t,r){var x=r.name;t.on("-",function(s){t.skipEventFlag||s===x&&(st.call(i,`${x}.removeall`,Rz,x,i),t.skipEvent())})},Rz=function(i){var t=this.getGameObjectManager(i);t.removeAll()},IE=Az;var Oz=function(i,t){return i.length===3&&i[0]===t},wz=function(i,t,r){var x=r.name;t.on("+",function(s,...g){if(!t.skipEventFlag){var e=s.split("."),n,p;if(Oz(e,x))n=e[1],p=e[2];else return;st.call(i,`${x}.call`,Lz,[x,n,p,...g],i),t.skipEvent()}})},Lz=function(i){var t,r,x,s;[t,r,x,...s]=i;var g=`${t}.${x}`;if(this.emit(g,r,...s),!(this.listenerCount(g)>0)){var e=this.getGameObjectManager(t);e.hasMethod(r,x)?e.call(r,x,...s):e.setProperty(r,x,s[0])}},BE=wz;var Fz={to:!0,yoyo:!0,from:!0,toLeft:!0,toRight:!0,toUp:!0,toDown:!0,yoyoLeft:!0,yoyoRight:!0,yoyoUp:!0,yoyoDown:!0,fromLeft:!0,fromRight:!0,fromUp:!0,fromDown:!0},bz=function(i,t){return i.length===4&&i[0]===t&&Fz[i[3]]},Dz=function(i,t,r){var x=r.name,s=i.getGameObjectManager(x);t.on("+",function(g,e,n,p,f){if(!t.skipEventFlag){var u=g.split("."),l,a,o;if(bz(u,x))l=u[1],a=u[2],o=u[3];else return;typeof p=="number"&&(f=p,p=void 0),st.call(i,`${x}.ease`,Iz,[x,l,a,e,n,p,f,o],i),t.skipEvent()}})},Iz=function(i){var t,r,x,s,g,e,n,p;[t,r,x,s,g,e,n,p]=i;var f=this.getGameObjectManager(t),u=f.getProperty(r,x);if(typeof u=="number"){p.endsWith("Left")||p.endsWith("Up")?p.startsWith("to")||p.startsWith("yoyo")?s=u-s:p.startsWith("from")&&(f.setProperty(r,x,u-s),s=u):p.endsWith("Right")||p.endsWith("Down")?p.startsWith("to")||p.startsWith("yoyo")?s=u+s:p.startsWith("from")&&(f.setProperty(r,x,u+s),s=u):p==="from"&&(f.setProperty(r,x,s),s=u);var l=p.startsWith("yoyo");f.easeProperty(r,x,s,g,e,n,l)}},GE=Dz;var NE=[DE,IE,BE,GE],Bz=Hl.addGameObjectManager,VE={addGameObjectManager(i,t){i===void 0&&(i={});var r=i.name;r||console.warn("Parameter 'name' is required in TextPlayer.addGameObjectManager(config) method"),Bz.call(this,i,t);var x=i.parseCallbacks;x?x=[...x,...NE]:x=NE;for(var s=0,g=x.length;s<g;s++)x[s](this,this.parser,i);return this}};var Gz=function(i){return this.clickTarget=i,i?Ri(i)?this.clickEE=i.input:this.clickEE=i.setInteractive():this.clickEE=null,this},zE=Gz;var Nz=function(i){return this.targetCamera=i,this},YE=Nz;var Vz=function(i){var t=this;i?typeof i=="function"?this.nextPageInput=function(r,x,s){var g=Te(t,r,x,s);i.call(t,g)}:this.nextPageInput=function(r,x,s){Ql(t,i,r,x,s)}:this.nextPageInput=null},UE=Vz;var zz=function(i,t){return this.imageManager.add(i,t),this},XE=zz;var WE={play(i){return this.isPlaying?this:(this.removeChildren(),this.parser.start(i),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage(),this)},playPromise(i){var t=At(this);return this.play(i),t}};var Hxt=Phaser.Utils.Objects.GetValue,Bp=function(){return!this.isPlaying||this.isPageTyping?this:(this.typeWriter.once("page.fadeout",Yz,this).fadeOutPage(),this)},Yz=function(){var i=this.runWrap(this.lastWrapResult);this.lastWrapResult=i,this.emit("page.start");var t=function(){this.emit($l),i.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.ignoreNextPageInput?Bp.call(this):this.nextPageInput&&this.nextPageInput(Bp,[],this))};this.once($l,function(){this.typeWriter.off("complete",t,this)}),this.typeWriter.once("complete",t,this).start(i.children)},kE=Bp;var HE={pause(){return this.timeline.pause(),this},pauseTyping(){return this.typeWriter.pauseTyping(),this}};var KE={resume(){return this.timeline.resume(),this},resumeTyping(i){return this.typeWriter.resumeTyping(i),this}};var Uz=function(i){return this.typeWriter.wait(i),this},jE=Uz;var ZE={setDefaultTypingSpeed(i){return this.defaultTypingSpeed=i,this},setTypingSpeed(i){return this.typingSpeed=i,this}};var Xz=function(i){return this.typeWriter.setIgnoreWait(i),this},JE=Xz;var Wz=function(i){return i===void 0&&(i=!0),this.ignoreNextPageInput=i,this},$E=Wz;var kz=function(){if(!this.isPlaying||!this.isPageTyping)return this;var i=this.typeWriter.speed,t=this.typeWriter.ignoreWait,r=this.typeWriter.skipTypingAnimation,x=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setTypingSpeed(i).setIgnoreWait(t).setSkipTypingAnimation(r).setSkipSoundEffect(x)},this).setTypingSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this},QE=kz;var qE={getSprite(i){return this.getGameObject("sprite",i)},addSprite(i,t){return this.addGameObject("sprite",i,t),this}};var _E={setContentOutputEnable(i){return this.parser.setContentOutputEnable(i),this},setContentCallback(i,t){return this.contentCallback=i,this.contentCallbackScope=t,this}};var t2={setClickTarget:zE,setTargetCamera:YE,setNextPageInput:UE,addImage:XE,typingNextPage:kE,wait:jE,setIgnoreWait:JE,setIgnoreNextPageInput:$E,showPage:QE};Object.assign(t2,VE,WE,HE,KE,ZE,qE,_E);var e2=t2;var Hz=function(i){for(var t=0,r=bp.length;t<r;t++)i.emit(bp[t])},i2=Hz;var r2=Phaser.Utils.Objects.IsPlainObject,$r=Phaser.Utils.Objects.GetValue,tu=class extends _1(vn){constructor(t,r,x,s,g,e){r2(r)?e=r:r2(s)&&(e=s),e===void 0&&(e={});var n=e.text;delete e.text,super(t,r,x,s,g,e),this.type="rexTextPlayer",this.parser=new ZP(this,$r(e,"parser",void 0)),this.typeWriter=new CE(this,$r(e,"typing",void 0)),this._imageManager=void 0;var p=$r(e,"images",void 0);p&&this.addImage(p),this.setTargetCamera($r(e,"camera",this.scene.sys.cameras.main)),this.initManagers(t,e);var f=$r(e,"sprites");f!==!1&&f!==null&&FE.call(this,f),this.setIgnoreNextPageInput($r(e,"ignoreNextPageInput",!1)),this.setClickTarget($r(e,"clickTarget",this)),this.setNextPageInput($r(e,"nextPageInput",null)),this.isPlaying=!1,n&&this.play(n)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new _h(this.scene)),this._imageManager}get spriteManager(){return this.getGameObjectManager("sprite")}destroy(t){!this.scene||(i2(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(t),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(t),this._imageManager=void 0,this.targetCamera=void 0,this.clickEE=void 0,this.destroyManagers(t),super.destroy(t))}get isPageTyping(){return this.typeWriter.isPageTyping}set defaultTypingSpeed(t){this.typeWriter.setDefaultTypingSpeed(t)}get defaultTypingSpeed(){return this.typeWriter.defaultTypingSpeed}set typingSpeed(t){this.typeWriter.setTypingSpeed(t)}get typingSpeed(){return this.typeWriter.speed}set timeScale(t){this.setTimeScale(t)}get timeScale(){return this.getTimeScale()}};Object.assign(tu.prototype,e2);var s2=tu;var n2=s2;var Gp=n2;J.register("textPlayer",function(i,t,r,x,s){var g=new Gp(this.scene,i,t,r,x,s);return this.scene.add.existing(g),g});Z(window,"RexPlugins.UI.TextPlayer",Gp);var eu={maxLength:["maxLength",void 0],minLength:["minLength",void 0],readOnly:["readOnly",!1]},iu={direction:["direction",void 0]};var Np=function(i,t,r){if(typeof r=="string")i.hasOwnProperty(r)&&(t[r]=i[r]);else{var x=r;if(Array.isArray(x))for(var s=0,g=x.length;s<g;s++)Np(i,t,x[s]);else for(var r in x)Np(i,t,r)}},Qr=Np;var Kz=function(i){i===void 0&&(i={});var t={};return Qr(i,t,"inputType"),Qr(i,t,"type"),Qr(i,t,"style"),Qr(i,t,iu),Qr(i,t,eu),t},a2=Kz;var jz=function(i,t,r,x){if(t)return!(r&&!r(i,t)||!o2(i,t)||x&&!x(i,t));for(var s=i.scene.input.manager,g=s.pointersTotal,e=s.pointers,t,n=0;n<g;n++)if(t=e[n],!(r&&!r(i,t))&&!!o2(i,t)&&!(x&&!x(i,t)))return!0;return!1},o2=function(i,t){for(var r=i.scene,x=r.input.cameras.getCamerasBelowPointer(t),s=r.input.manager,g=[i],e,n=0,p=x.length;n<p;n++)if(e=s.hitTest(t,g,x[n]),e.length>0)return!0;return!1},Pn=jz;var En=void 0,h2=function(i){i!==En&&(En!==void 0&&En.close(),En=i)},l2=function(i){i===En&&(En=void 0)};var Zz=Phaser.Utils.Objects.GetValue,Jz=function(i,t,r){r===void 0&&(r={});var x,s;for(var g in i)x=i[g],s=Zz(t,g,x[1]),s!==void 0&&(r[x[0]]=s);return r},Mn=Jz;var $z=function(i){i.addEventListener("touchstart",An,!1),i.addEventListener("touchmove",An,!1),i.addEventListener("touchend",An,!1),i.addEventListener("mousedown",An,!1),i.addEventListener("mouseup",An,!1),i.addEventListener("mousemove",An,!1)},An=function(i){i.stopPropagation()},ru=$z;var Vp=Phaser.Utils.Objects.GetValue,Qz=function(i,t){var r,x=Vp(t,"inputType",void 0);x===void 0&&(x=Vp(t,"type","text")),x==="textarea"?(r=document.createElement("textarea"),r.style.resize="none"):(r=document.createElement("input"),r.type=x);var s=Vp(t,"style",void 0),g=r.style;Mn(iu,s,g),g.position="absolute",g.opacity=0,g.pointerEvents="none",g.zIndex=0,g.transform="scale(0)",Mn(eu,t,r),ru(r);var e=i.scene.sys.scale,n=e.isFullscreen?e.fullscreenTarget:document.body;return n.appendChild(r),r},u2=Qz;var qz=function(){return this.isOpened?this:this.readOnly?this:(h2(this),this.isOpened=!0,this.node||(this.node=u2(this,this.nodeConfig)),this.setFocus(),this.initText(),this.enterCloseEnable&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.scene.sys.events.on("postupdate",this.updateText,this),this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.parent,this),this.emit("open",this),this)},f2=qz;var _z=function(i){if(!!i){var t=i.parentElement;t&&t.removeChild(i)}},d2=_z;var tY=function(){return this.isOpened?(l2(this),this.setBlur(),this.isOpened=!1,this.updateText(),this.scene.sys.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.parent,this),d2(this.node),this.node=void 0,this.emit("close",this),this):this},c2=tY;var eY={open:f2,close:c2},p2=eY;var qr=Phaser.Utils.Objects.GetValue,su=class extends Tt{constructor(t,r){super(t);var x=qr(r,"inputType",void 0);x===void 0&&(x=qr(r,"type","text")),this.setEnterCloseEnable(qr(r,"enterClose",x!=="textarea"));var s=qr(r,"onOpen",void 0);s||(s=qr(r,"onFocus",void 0)),this.onOpenCallback=s;var g=qr(r,"onClose",void 0);g||(g=qr(r,"onBlur",void 0)),this.onCloseCallback=g,this.onUpdateCallback=qr(r,"onUpdate",void 0),this.isOpened=!1,t.on("pointerdown",function(){this.open()},this).setInteractive(),this.nodeConfig=a2(r),this.node=void 0}destroy(){this.close(),super.destroy()}onClickOutside(t){Pn(this.parent,t)||this.close()}setEnterCloseEnable(t){return t===void 0&&(t=!0),this.enterCloseEnable=t,this}initText(){}updateText(){}get text(){return this.node?this.node.value:""}set text(t){!this.node||(this.node.value=t)}setText(t){return this.text=t,this}get maxLength(){return this.nodeConfig.maxLength}set maxLength(t){this.nodeConfig.maxLength=t,this.node&&(this.node.maxLength=t)}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.nodeConfig.minLength}set minLength(t){this.nodeConfig.minLength=t,this.node&&(this.node.minLength=t)}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){!this.node||(this.node.placeholder=t)}setPlaceholder(t){return this.placeholder=t,this}selectText(t,r){return this.node?(t===void 0?this.node.select():this.node.setSelectionRange(t,r),this):this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node?this.node.selectionStart:0}get selectionEnd(){return this.node?this.node.selectionEnd:0}get selectedText(){if(!this.node)return"";var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node?this.node.selectionStart:0}set cursorPosition(t){!this.node||this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node?this.node.title:""}set tooltip(t){if(!this.node)return this;this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.nodeConfig.readOnly}set readOnly(t){this.nodeConfig.readOnly=t,this.node&&(this.node.readOnly=t)}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node?this.node.spellcheck:""}set spellCheck(t){!this.node||(this.node.spellcheck=t)}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){if(!!this.node)return this.node.style.color}set fontColor(t){!this.node||(this.node.style.color=t)}setFontColor(t){return this.fontColor=t,this}setStyle(t,r){return this.node?(this.node.style[t]=r,this):this}getStyle(t){if(!!this.node)return this.node.style[t]}scrollToBottom(){return this.node?(this.node.scrollTop=this.node.scrollHeight,this):this}setEnabled(t){return this.node?(t===void 0&&(t=!0),this.node.disabled=!t,this):this}setBlur(){return this.node?(this.node.blur(),this):this}setFocus(){return this.node?(this.node.focus(),this):this}get isFocused(){return this.isOpened}};Object.assign(su.prototype,p2);var nu=su;var iY=function(i,t,r){i=i.replace(" ","");var x=r.previousText;if(i===x)return i;if(isNaN(i)){r.emit("nan",i,r),i=x;var s=r.cursorPosition-1;r.setText(i),r.setCursorPosition(s)}else r.previousText=i;return i},au=iY;var rY=function(i){var t=i.parent,r=i.isOpened?i.selectionStart:null,x=i.isOpened?i.selectionEnd:null,s=i.prevSelectionStart,g=i.prevSelectionEnd;if(!(s===r&&g===x)){var e,n;s===null?(e=r,n=x):(e=Math.min(s,r),n=Math.max(g,x));for(var p=e;p<n;p++){var f=s===null?!1:p>=s&&p<g,u=p>=r&&p<x;if(!(f&&u)){var l=t.getCharChild(p);l&&(f?t.emit("cursorout",l,p,t):t.emit("cursorin",l,p,t))}}i.prevSelectionStart=r,i.prevSelectionEnd=x}},v2=rY;var sY=function(i){var t=i.parent,r=t.text,x=i.cursorPosition;if(i.prevCursorPosition!==x){if(i.prevCursorPosition!==null&&i.prevCursorPosition>r.length&&(i.prevCursorPosition=null),i.prevCursorPosition!==null){var s=t.getCharChild(i.prevCursorPosition);s&&t.emit("cursorout",s,i.prevCursorPosition,t)}if(x!=null){var s=t.getCharChild(x);s&&t.emit("cursorin",s,x,t)}t.emit("movecursor",x,i.prevCursorPosition,t),i.prevCursorPosition=x}},m2=sY;var nY=function(i){var t=i.prevSelectionStart;if(t!==null){for(var r=i.prevSelectionEnd,x=i.parent,s=t;s<r;s++){var g=x.getCharChild(s);g&&x.emit("cursorout",g,s,x)}i.prevSelectionStart=null,i.prevSelectionEnd=null}},zp=nY;var aY=function(i){var t=i.prevCursorPosition;if(t!==null){var r=i.parent,x=r.getCharChild(t);x&&r.emit("cursorout",x,t,r),i.prevCursorPosition=null}},Yp=aY;var oY=Phaser.Utils.Objects.GetValue,Up=class extends nu{constructor(t,r){super(t,r),this.setSelectAllWhenFocusEnable(oY(r,"selectAll",!1)),this.cursorMoveStartIndex=null,this.prevCursorPosition=null,this.prevSelectionStart=null,this.prevSelectionEnd=null,this.firstClickAfterOpen=!1,t.on("pointerdown",function(x,s,g,e){var n=t.getNearestChild(s,g),p=t.getCharIndex(n);(!this.selectAllWhenFocus||!this.firstClickAfterOpen)&&this.setCursorPosition(p),this.cursorMoveStartIndex=p,this.firstClickAfterOpen=!1},this).on("pointermove",function(x,s,g,e){if(!!x.isDown){var n=t.getNearestChild(s,g),p=t.getCharIndex(n);this.cursorMoveStartIndex<p?this.selectText(this.cursorMoveStartIndex,p+1):this.selectText(p,this.cursorMoveStartIndex+1)}},this),this.on("open",function(){this.selectAllWhenFocus&&this.selectAll(),this.firstClickAfterOpen=!0,t.emit("open")},this).on("close",function(){t.emit("close")},this)}initText(){var t=this.parent;return this.prevCursorPosition=null,this.setText(t.text),this}updateText(){var t=this.parent,r=this.text;if(this.onUpdateCallback){var x=this.onUpdateCallback(r,t,this);x!=null&&(r=x)}return t.text!==r&&(t.setText(r),t.emit("textchange",r,t,this)),this.isOpened?this.selectionStart!==this.selectionEnd?(Yp(this),v2(this)):(zp(this),m2(this)):(zp(this),Yp(this)),this}setNumberInput(){return this.onUpdateCallback=au,this}setSelectAllWhenFocusEnable(t){return t===void 0&&(t=!0),this.selectAllWhenFocus=t,this}},g2=Up;var hY=Phaser.Utils.Objects.GetValue,lY=["inputType","onOpen","onFocus","onClose","onBlur","onUpdate","enterClose","readOnly","maxLength","minLength","selectAll"],uY=function(i,t){var r=hY(t,"edit");return r===void 0&&(r={}),Qr(t,r,lY),new g2(i,r)},x2=uY;var fY=function(i,t){if(!i||typeof i=="number")return!1;if(i.hasOwnProperty(t))return!0;if(t.indexOf(".")!==-1){for(var r=t.split("."),x=i,s=0;s<r.length;s++)if(x.hasOwnProperty(r[s]))x=x[r[s]];else return!1;return!0}else return!1},ri=fY;var dY=function(i){var t=!i.textArea;if(!ri(i,"wrap.vAlign")){var r=t?"center":"top";Z(i,"wrap.vAlign",r)}if(ri(i,"wrap.charWrap")||Z(i,"wrap.charWrap",!0),!ri(i,"wrap.maxLines")){var r=t?1:void 0;Z(i,"wrap.maxLines",r)}if(ri(i,"wrap.useDefaultTextHeight")||Z(i,"wrap.useDefaultTextHeight",!0),i.edit||(i.edit={}),!ri(i.edit,"inputType")){var r=t?"text":"textarea";Z(i.edit,"inputType",r)}return i},y2=dY;var cY=function(i){xn(i)||this.setCursorStyle(i).on("cursorin",function(t){var r=this.cursorStyle,x=on(t.style,r);hn(r,x)||(t.styleSave=x,t.modifyStyle(r))},this).on("cursorout",function(t){!t.styleSave||(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},C2=cY;var pY=function(i){xn(i)||this.setFocusStyle(i).on("open",function(){var t=this.background,r=this.focusStyle,x=on(t,r);hn(r,x)||(t.styleSave=x,t.modifyStyle(r))},this).on("close",function(){var t=this.background;!t.styleSave||(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},T2=pY;var vY=function(i){var t=i.createCharChild("|");return t.text="",pl.call(i,t),t},S2=vY;function fe(){}fe.prototype={diff(i,t,r={}){let x=r.callback;typeof r=="function"&&(x=r,r={}),this.options=r;let s=this;function g(o){return x?(setTimeout(function(){x(void 0,o)},0),!0):o}i=this.castInput(i),t=this.castInput(t),i=this.removeEmpty(this.tokenize(i)),t=this.removeEmpty(this.tokenize(t));let e=t.length,n=i.length,p=1,f=e+n;r.maxEditLength&&(f=Math.min(f,r.maxEditLength));let u=[{newPos:-1,components:[]}],l=this.extractCommon(u[0],t,i,0);if(u[0].newPos+1>=e&&l+1>=n)return g([{value:this.join(t),count:t.length}]);function a(){for(let o=-1*p;o<=p;o+=2){let c,h=u[o-1],d=u[o+1],v=(d?d.newPos:0)-o;h&&(u[o-1]=void 0);let m=h&&h.newPos+1<e,y=d&&0<=v&&v<n;if(!m&&!y){u[o]=void 0;continue}if(!m||y&&h.newPos<d.newPos?(c=gY(d),s.pushComponent(c.components,void 0,!0)):(c=h,c.newPos++,s.pushComponent(c.components,!0,void 0)),v=s.extractCommon(c,t,i,o),c.newPos+1>=e&&v+1>=n)return g(mY(s,c.components,t,i,s.useLongestToken));u[o]=c}p++}if(x)(function o(){setTimeout(function(){if(p>f)return x();a()||o()},0)})();else for(;p<=f;){let o=a();if(o)return o}},pushComponent(i,t,r){let x=i[i.length-1];x&&x.added===t&&x.removed===r?i[i.length-1]={count:x.count+1,added:t,removed:r}:i.push({count:1,added:t,removed:r})},extractCommon(i,t,r,x){let s=t.length,g=r.length,e=i.newPos,n=e-x,p=0;for(;e+1<s&&n+1<g&&this.equals(t[e+1],r[n+1]);)e++,n++,p++;return p&&i.components.push({count:p}),i.newPos=e,n},equals(i,t){return this.options.comparator?this.options.comparator(i,t):i===t||this.options.ignoreCase&&i.toLowerCase()===t.toLowerCase()},removeEmpty(i){let t=[];for(let r=0;r<i.length;r++)i[r]&&t.push(i[r]);return t},castInput(i){return i},tokenize(i){return i.split("")},join(i){return i.join("")}};function mY(i,t,r,x,s){let g=0,e=t.length,n=0,p=0;for(;g<e;g++){let u=t[g];if(u.removed){if(u.value=i.join(x.slice(p,p+u.count)),p+=u.count,g&&t[g-1].added){let l=t[g-1];t[g-1]=t[g],t[g]=l}}else{if(!u.added&&s){let l=r.slice(n,n+u.count);l=l.map(function(a,o){let c=x[p+o];return c.length>a.length?c:a}),u.value=i.join(l)}else u.value=i.join(r.slice(n,n+u.count));n+=u.count,u.added||(p+=u.count)}}let f=t[e-1];return e>1&&typeof f.value=="string"&&(f.added||f.removed)&&i.equals("",f.value)&&(t[e-2].value+=f.value,t.pop()),t}function gY(i){return{newPos:i.newPos,components:i.components.slice(0)}}var xY=new fe;function Xp(i,t,r){return xY.diff(i,t,r)}var P2=/^[a-zA-Z\u{C0}-\u{FF}\u{D8}-\u{F6}\u{F8}-\u{2C6}\u{2C8}-\u{2D7}\u{2DE}-\u{2FF}\u{1E00}-\u{1EFF}]+$/u,E2=/\S/,M2=new fe;M2.equals=function(i,t){return this.options.ignoreCase&&(i=i.toLowerCase(),t=t.toLowerCase()),i===t||this.options.ignoreWhitespace&&!E2.test(i)&&!E2.test(t)};M2.tokenize=function(i){let t=i.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/);for(let r=0;r<t.length-1;r++)!t[r+1]&&t[r+2]&&P2.test(t[r])&&P2.test(t[r+2])&&(t[r]+=t[r+2],t.splice(r+1,2),r--);return t};var Wp=new fe;Wp.tokenize=function(i){let t=[],r=i.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(let x=0;x<r.length;x++){let s=r[x];x%2&&!this.options.newlineIsToken?t[t.length-1]+=s:(this.options.ignoreWhitespace&&(s=s.trim()),t.push(s))}return t};var CY=new fe;CY.tokenize=function(i){return i.split(/(\S.+?[.!?])(?=\s+|$)/)};var TY=new fe;TY.tokenize=function(i){return i.split(/([{}:;,]|\s+)/)};var SY=Object.prototype.toString,vo=new fe;vo.useLongestToken=!0;vo.tokenize=Wp.tokenize;vo.castInput=function(i){let{undefinedReplacement:t,stringifyReplacer:r=(x,s)=>typeof s=="undefined"?t:s}=this.options;return typeof i=="string"?i:JSON.stringify(ou(i,null,null,r),r,"  ")};vo.equals=function(i,t){return fe.prototype.equals.call(vo,i.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function ou(i,t,r,x,s){t=t||[],r=r||[],x&&(i=x(s,i));let g;for(g=0;g<t.length;g+=1)if(t[g]===i)return r[g];let e;if(SY.call(i)==="[object Array]"){for(t.push(i),e=new Array(i.length),r.push(e),g=0;g<i.length;g+=1)e[g]=ou(i[g],t,r,x,s);return t.pop(),r.pop(),e}if(i&&i.toJSON&&(i=i.toJSON()),typeof i=="object"&&i!==null){t.push(i),e={},r.push(e);let n=[],p;for(p in i)i.hasOwnProperty(p)&&n.push(p);for(n.sort(),g=0;g<n.length;g+=1)p=n[g],e[p]=ou(i[p],t,r,x,p);t.pop(),r.pop()}else e=i;return e}var kp=new fe;kp.tokenize=function(i){return i.slice()};kp.join=kp.removeEmpty=function(i){return i};var MY=Phaser.Utils.Array.Remove,AY=function(i,t){var r=i.text;if(t!==r){if(MY(i.children,i.lastInsertCursor),t==="")i.removeChildren();else for(var x=Xp(r,t),s=0,g=0,e=x.length;g<e;g++){var n=x[g];n.removed?i.removeText(s,n.count):(n.added&&i.insertText(s,n.value),s+=n.count)}i.children.push(i.lastInsertCursor),i.runWordWrap()}},R2=AY;var O2=Phaser.Utils.Objects.IsPlainObject,Hp=class extends vn{constructor(t,r,x,s,g,e){O2(r)?e=r:O2(s)&&(e=s),e===void 0&&(e={}),y2(e);var n=e.text;n&&delete e.text;var p=qa(e.background,"focus"),f=qa(e.style,"cursor");super(t,r,x,s,g,e),this.type="rexCanvasInput",this._text="",this.textEdit=x2(this,e),e.focusStyle&&Object.assign(p,e.focusStyle),T2.call(this,p),e.cursorStyle&&Object.assign(f,e.cursorStyle),C2.call(this,f);var u=e.onAddChar;u&&this.on("addchar",u);var l=e.onCursorOut;l&&this.on("cursorout",l);var a=e.onCursorIn;a&&this.on("cursorin",a);var o=e.onMoveCursor;o&&this.on("movecursor",o),this.setParseTextCallback(e.parseTextCallback),this.lastInsertCursor=S2(this),n?this.setText(n):this.runWordWrap()}addChild(t,r){if(super.addChild(t,r),Array.isArray(t))for(var x=t,s=0,g=x.length;s<g;s++){var t=x[s];wi(t)&&this.emit("addchar",t,r+s,this)}else wi(t)&&this.emit("addchar",t,r,this);return this}get text(){return this._text}set text(t){t==null?t="":t=t.toString(),this._text!==t&&(R2(this,t),this._text=t)}setText(t){return this.text=t,this}appendText(t){return this.setText(this.text+t),this}setSize(t,r){return this.width===t&&this.height===r?this:(super.setSize(t,r),this.runWrap(),this)}get displayText(){return this.text}set displayText(t){this.text=t}setDisplayText(t){return this.displayText=t,this}get inputText(){return this.textEdit.text}set inputText(t){this.textEdit.text=t}setInputText(t){return this.inputText=t,this}setParseTextCallback(t){return t||(t=RY),this.parseTextCallback=t,this}get value(){return this.parseTextCallback(this.text)}set value(t){this.setText(t)}getValue(){return this.value}setValue(t){return this.value=t,this}get readOnly(){return this.textEdit.readOnly}set readOnly(t){this.textEdit.readOnly=t}setReadOnly(t){return this.textEdit.setReadOnly(t),this}open(t){return t&&this.textEdit.once("close",t),this.textEdit.open(),this}close(){return this.textEdit.close(),this}get isOpened(){return this.textEdit.isOpened}setFocusStyle(t){return this.focusStyle=t,this}setCursorStyle(t){return this.cursorStyle=t,this}setNumberInput(){return this.textEdit.setNumberInput(),this.parseTextCallback=Number,this}get maxLength(){return this.textEdit.maxLength}set maxLength(t){this.textEdit.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.textEdit.minLength}set minLength(t){this.textEdit.minLength=t}setMinLength(t){return this.minLength=t,this}},RY=function(i){return i},w2=Hp;var L2=w2;var mo=L2;J.register("canvasInput",function(i,t,r,x,s){var g=new mo(this.scene,i,t,r,x,s);return this.scene.add.existing(g),g});Z(window,"RexPlugins.UI.CanvasInput",mo);var OY=function(i){return li(i).loop.delta},Rn=OY;var F2=Phaser.Utils.Objects.GetValue,wY=Phaser.Math.Wrap,Kp=class extends nu{constructor(t,r){r===void 0&&(r={}),r.onUpdate==="number"&&(r.onUpdate=au),super(t,r),this.setCursor(F2(r,"cursor","|")),this.setCursorFlashDuration(F2(r,"cursorFlashDuration",1e3)),this.cursorFlashTimer=0}initText(){return this.cursorFlashTimer=0,this.prevCursorPosition=void 0,this.setText(this.parent.text),this.setCursorPosition(),this}updateText(){var t=this.parent,r=this.text;if(this.onUpdateCallback){var x=this.onUpdateCallback(r,t,this);x!=null&&(r=x)}if(this.isOpened&&this.hasCursor){var s=this.cursorPosition;r=r.substring(0,s)+this.cursor+r.substring(s),this.prevCursorPosition!==s&&(this.prevCursorPosition=s)}return t.text!==r&&(t.setText(r),this.emit("textchange",r,t,this)),this}setCursor(t){return this._cursor=t,this.hasCursor=t&&t!=="",t}setCursorFlashDuration(t){return this.cursorFlashDuration=t,this}get cursor(){if(!this._isFocused)return this._cursor;var t;this.cursorFlashTimer<this.cursorFlashDuration/2?t=this._cursor:t=" ";var r=this.cursorFlashTimer+Rn(this.scene);return this.cursorFlashTimer=wY(r,0,this.cursorFlashDuration),t}},b2=Kp;var D2=b2;var jp=D2;J.register("hiddenEdit",function(i,t){var r=new jp(i,t);return r});Z(window,"RexPlugins.UI.HiddenEdit",jp);var LY=Phaser.GameObjects.GetCalcMatrix,FY=function(i,t,r,x){t.updateData(),r.addToRenderList(t);var s=i.pipelines.set(t.pipeline),g=LY(t,r,x),e=s.calcMatrix.copyFrom(g.calc),n=t._displayOriginX,p=t._displayOriginY,f=r.alpha*t.alpha;i.pipelines.preBatch(t);for(var u=t.geom,l=0,a=u.length;l<a;l++)u[l].webglRender(s,e,f,n,p);i.pipelines.postBatch(t)},I2=FY;var bY=Phaser.Renderer.Canvas.SetTransform,DY=function(i,t,r,x){t.updateData(),r.addToRenderList(t);var s=i.currentContext;if(bY(i,s,t,r,x)){for(var g=t._displayOriginX,e=t._displayOriginY,n=t.geom,p=0,f=n.length;p<f;p++)n[p].canvasRender(s,g,e);s.restore()}},B2=DY;var G2={renderWebGL:I2,renderCanvas:B2};var IY=Phaser.GameObjects.Shape,BY=Phaser.Utils.Array.Remove,hu=class extends IY{constructor(t,r,x,s,g){r===void 0&&(r=0),x===void 0&&(x=0),s===void 0&&(s=2),g===void 0&&(g=s),super(t,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(r,x),this.setSize(s,g),this.updateDisplayOrigin()}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSize(t,r){this.isSizeChanged=this.isSizeChanged||this._width!==t||this._height!==r,this.dirty=this.dirty||this.isSizeChanged,this._width=t,this._height=r,this.updateDisplayOrigin();var x=this.input;return x&&!x.customHitArea&&(x.hitArea.width=t,x.hitArea.height=r),this}resize(t,r){return this.setSize(t,r),this}get fillColor(){return this._fillColor}set fillColor(t){this.setFillStyle(t,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this.setFillStyle(this._fillColor,t)}setFillStyle(t,r){return r===void 0&&(r=1),this.dirty=this.dirty||this.fillColor!==t||this.fillAlpha!==r,this._fillColor=t,this._fillAlpha=r,this}get lineWidth(){return this._lineWidth}set lineWidth(t){this.setStrokeStyle(t,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(t){this.setStrokeStyle(this._lineWidth,t,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this.setStrokeStyle(this._lineWidth,this._strokeColor,t)}setStrokeStyle(t,r,x){return x===void 0&&(x=1),this.dirty=this.dirty||this.lineWidth!==t||this.strokeColor!==r||this.strokeAlpha!==x,this._lineWidth=t,this._strokeColor=r,this._strokeAlpha=x,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var t=this.geom,r=0,x=t.length;r<x;r++){var s=t[r];s.dirty&&s.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,we(this.shapes),this}getShape(t){return this.shapes[t]}getShapes(){return this.geom}addShape(t){this.geom.push(t);var r=t.name;return r&&(this.shapes[r]=t),this.dirty=!0,this}deleteShape(t){var r=this.getShape(t);return r&&(delete this.shapes[t],BY(this.geom,r)),this}};Object.assign(hu.prototype,G2);var mi=hu;var N2={setBoxFillStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.boxFillColor!==i||this.boxFillAlpha!==t,this.boxFillColor=i,this.boxFillAlpha=t,this},setUncheckedBoxFillStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.uncheckedBoxFillColor!==i||this.uncheckedBoxFillAlpha!==t,this.uncheckedBoxFillColor=i,this.uncheckedBoxFillAlpha=t,this},setBoxStrokeStyle(i,t,r){return r===void 0&&(r=1),this.dirty=this.dirty||this.boxLineWidth!==i||this.boxStrokeColor!==t||this.boxStrokeAlpha!==r,this.boxLineWidth=i,this.boxStrokeColor=t,this.boxStrokeAlpha=r,this},setUncheckedBoxStrokeStyle(i,t,r){return r===void 0&&(r=1),this.dirty=this.dirty||this.uncheckedBoxLineWidth!==i||this.uncheckedBoxStrokeColor!==t||this.uncheckedBoxStrokeAlpha!==r,this.uncheckedBoxLineWidth=i,this.uncheckedBoxStrokeColor=t,this.uncheckedBoxStrokeAlpha=r,this},setCheckerStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.checkerColor!==i||this.checkAlpha!==t,this.checkerColor=i,this.checkAlpha=t,this},setBoxShape(i){return i===void 0&&(i=!1),this.isCircleShape===i?this:(this.isCircleShape=i,this.isSizeChanged=!0,this.dirty=!0,this)}};var V2={setBoxSize(i){return this.dirty=this.dirty||this.boxSize!==i,this.boxSize=i,this},setCheckerSize(i){return this.dirty=this.dirty||this.checkerSize!==i,this.checkerSize=i,this}};var GY=function(i,t){return i==null?this.isFilled=!1:(t===void 0&&(t=1),this.isFilled=!0,this.fillColor=i,this.fillAlpha=t),this},NY=function(i,t,r){return i==null||t==null?this.isStroked=!1:(r===void 0&&(r=1),this.isStroked=!0,this.lineWidth=i,this.strokeColor=t,this.strokeAlpha=r),this},z2={fillStyle:GY,lineStyle:NY};var lu=class{constructor(){this.name=void 0,this.dirty=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(t){return this.name=t,this}reset(){return this.fillStyle().lineStyle(),this}webglRender(t,r,x,s,g){}canvasRender(t,r,x){}updateData(){this.dirty=!1}};Object.assign(lu.prototype,z2,Vr);var On=lu;var VY=Phaser.Geom.Polygon.Earcut,Zp=class extends On{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=VY(this.pathData),super.updateData(),this}webglRender(t,r,x,s,g){this.isFilled&&Vh(t,r,this,x,s,g),this.isStroked&&Yr(t,this,x,s,g)}canvasRender(t,r,x){var s=this.pathData,g=s.length-1,e=s[0]-r,n=s[1]-x;t.beginPath(),t.moveTo(e,n),this.closePath||(g-=2);for(var p=2;p<g;p+=2){var f=s[p]-r,u=s[p+1]-x;t.lineTo(f,u)}this.closePath&&t.closePath(),this.isFilled&&(Xi(t,this),t.fill()),this.isStroked&&(Wi(t,this),t.stroke())}},Zi=Zp;var Y2=Phaser.Math.DegToRad,Jp=class extends Zi{constructor(t,r,x,s,g,e,n,p){t===void 0&&(t=0),r===void 0&&(r=0),x===void 0&&(x=0),s===void 0&&(s=0),g===void 0&&(g=0),e===void 0&&(e=360),n===void 0&&(n=!1),p===void 0&&(p=!1),super(),this.setCenterPosition(t,r),this.setRadius(x,s),this.setAngle(g,e,n),this.setPie(p),this.setIterations(32)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setCenterPosition(t,r){return r===void 0&&(r=t),this.x=t,this.y=r,this}get radiusX(){return this._radiusX}set radiusX(t){this.dirty=this.dirty||this._radiusX!==t,this._radiusX=t}get radiusY(){return this._radiusY}set radiusY(t){this.dirty=this.dirty||this._radiusY!==t,this._radiusY=t}setRadius(t,r){return r===void 0&&(r=t),this.radiusX=t,this.radiusY=r,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!==t,this._startAngle=t}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!==t,this._endAngle=t}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!==t,this._anticlockwise=t}setAngle(t,r,x){return x===void 0&&(x=!1),this.startAngle=t,this.endAngle=r,this.anticlockwise=x,this}get pie(){return this._pie}set pie(t){this.dirty=this.dirty||this._pie!==t,this._pie=t}setPie(t){return t===void 0&&(t=!0),this.pie=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),zt(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(t,r,x){t.beginPath();var s=this.x-r,g=this.y-x,e=Y2(this.startAngle),n=Y2(this.endAngle);this.pie&&(t.moveTo(s,g),t.lineTo(s+Math.cos(e)*this.radiusX,g+Math.sin(e)*this.radiusY)),t.ellipse(s,g,this.radiusX,this.radiusY,0,e,n,this.anticlockwise),this.pie&&t.lineTo(s,g),this.isFilled&&(Xi(t,this),t.fill()),this.isStroked&&(Wi(t,this),t.stroke())}},Sr=Jp;var $p=class extends Sr{constructor(t,r,x){super(t,r,x,x,0,360)}},wn=$p;var Qp=class extends Zi{constructor(t){super(),this.setCurve(t),this.setIterations(32)}get curve(){return this._curve}set curve(t){this.dirty=this.dirty||this._curve!==t,this._curve=t}setCurve(t){return this.curve=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){this.pathData.length=0;for(var t=this.curve.getPoints(this.iterations),r=0,x=t.length;r<x;r++)this.pathData.push(t[r].x,t[r].y);return this.pathData.push(t[0].x,t[0].y),super.updateData(),this}},qp=Qp;var _p=class extends Sr{constructor(t,r,x,s){super(t,r,x,s,0,360)}},tv=_p;var ev=class extends Zi{constructor(t,r,x,s){t===void 0&&(t=0),r===void 0&&(r=0),x===void 0&&(x=0),s===void 0&&(s=0),super(),this.setP0(t,r),this.setP1(x,s)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,r){return this.x0=t,this.y0=r,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,r){return this.x1=t,this.y1=r,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}},iv=ev;var zY=function(i,t,r){return r.length=0,i!=null&&r.push(i,t),r},U2=zY;var X2=Phaser.Math.Interpolation.QuadraticBezier,YY=function(i,t,r,x,s,g){for(var e=g.length,n=g[e-2],p=g[e-1],f=1,u=s-1;f<=u;f++){var l=f/u;g.push(X2(l,n,i,r),X2(l,p,t,x))}return g},W2=YY;var k2=Phaser.Math.Interpolation.CubicBezier,UY=function(i,t,r,x,s,g,e,n){for(var p=n.length,f=n[p-2],u=n[p-1],l=1,a=e-1;l<=a;l++){var o=l/a;n.push(k2(o,f,i,r,s),k2(o,u,t,x,g))}return n},H2=UY;var XY=function(i){var t=i.length;if(t<2)return i;var r=i[t-2],x=i[t-1];return i.push(r),i.push(x),i},uu=XY;var K2={clear(){return this.start(),this},start(){return this.startAt(),this},startAt(i,t){return this.restorePathData(),this.accumulationLengths=void 0,U2(i,t,this.pathData),this.firstPointX=i,this.firstPointY=t,this.lastPointX=i,this.lastPointY=t,this},lineTo(i,t,r){return r===void 0&&(r=!1),r&&(i+=this.lastPointX,t+=this.lastPointY),ze(i,t,this.pathData),this.lastPointX=i,this.lastPointY=t,this},verticalLineTo(i,t){return this.lineTo(i,this.lastPointY,t),this},horizontalLineTo(i,t){return this.lineTo(this.lastPointX,i,t),this},ellipticalArc(i,t,r,x,s,g,e){return e===void 0&&(e=!1),zt(i,t,r,x,s,g,e,this.iterations,this.pathData),this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this},arc(i,t,r,x,s,g){return this.ellipticalArc(i,t,r,r,x,s,g),this},quadraticBezierTo(i,t,r,x){return W2(i,t,r,x,this.iterations,this.pathData),this.lastPointX=r,this.lastPointY=x,this.lastCX=i,this.lastCY=t,this},smoothQuadraticBezierTo(i,t){var r=this.lastPointX*2-this.lastCX,x=this.lastPointY*2-this.lastCY;return this.quadraticBezierTo(r,x,i,t),this},cubicBezierCurveTo(i,t,r,x,s,g){return H2(i,t,r,x,s,g,this.iterations,this.pathData),this.lastPointX=s,this.lastPointY=g,this.lastCX=r,this.lastCY=x,this},smoothCubicBezierCurveTo(i,t,r,x){var s=this.lastPointX*2-this.lastCX,g=this.lastPointY*2-this.lastCY;return this.cubicBezierCurveTo(s,g,i,t,r,x),this},close(){return this.closePath=!0,this},end(){return uu(this.pathData),this}};var WY=Phaser.Math.RotateAround,kY=function(i,t,r,x){for(var s={x:0,y:0},g=0,e=x.length-1;g<e;g+=2)s.x=x[g],s.y=x[g+1],WY(s,i,t,r),x[g]=s.x,x[g+1]=s.y;return x},j2=kY;var HY=function(i,t,r,x,s){for(var g=0,e=s.length-1;g<e;g+=2){var n=s[g]-i,p=s[g+1]-t;n*=r,p*=x,s[g]=n+i,s[g+1]=p+t}return s},Z2=HY;var KY=function(i,t,r){for(var x=0,s=r.length-1;x<s;x+=2)r[x]+=i,r[x+1]+=t;return r},fu=KY;var jY=Phaser.Math.DegToRad,ZY=Phaser.Math.RotateAround,J2={rotateAround(i,t,r){if(this.pathData.length===0)return this;r=jY(r),j2(i,t,r,this.pathData);var x=this.pathData.length;if(this.lastPointX=this.pathData[x-2],this.lastPointY=this.pathData[x-1],this.lastCX!==void 0){var s={x:this.lastCX,y:this.lastCY};ZY(s,i,t,r),this.lastCX=s.x,this.lastCY=s.y}return this},scale(i,t,r,x){if(this.pathData.length===0)return this;if(Z2(i,t,r,x,this.pathData),this.lastPointX=this.pathData[pathDataCnt-2],this.lastPointY=this.pathData[pathDataCnt-1],this.lastCX!==void 0){var s=this.lastCX-i,g=this.lastCY-t;s*=r,g*=x,this.lastCX=s+i,this.lastCY=g+t}return this},offset(i,t){return fu(i,t,this.pathData),this}};var JY=function(i,t,r,x){r===void 0&&(r=0),x===void 0&&(x=t.length),i.length=x-r;for(var s=0,g=i.length;s<g;s++)i[s]=t[s+r];return i},Ln=JY;var $2={savePathData(){return this.pathDataSaved?this:(this.pathDataSave=[...this.pathData],this.pathData.length=0,this.pathDataSaved=!0,this)},restorePathData(){return this.pathDataSaved?(Ln(this.pathData,this.pathDataSave),this.pathDataSave=void 0,this.pathDataSaved=!1,this):this}};var $Y=Phaser.Math.Distance.Between,QY=Phaser.Math.Wrap,qY=Phaser.Math.Linear,Q2=function(i,t,r,x,s){if(x===void 0&&(x=r,r=0),r=q2(r),x=q2(x),r!==x){var g=t[t.length-1],e=g*r,n=g*x;r<x?rv(i,t,e,n,s):(rv(i,t,e,g,s),rv(i,t,0,n,s)),uu(s)}},rv=function(i,t,r,x,s){for(var g=r>0,e=0,n=t.length;e<n;e++){var p=e*2,f=t[e];if(g){if(f<r)continue;if(f==r)g=!1;else{var u=f-t[e-1],l=1-(f-r)/u;s.push(du(i,p-2,p,l)),s.push(du(i,p-1,p+1,l)),g=!1}}if(f<=x){if(s.push(i[p]),s.push(i[p+1]),f===x)break}else{var u=f-t[e-1],l=1-(f-x)/u;s.push(du(i,p-2,p,l)),s.push(du(i,p-1,p+1,l));break}}},du=function(i,t,r,x){var s=i[t],g=i[r];return qY(s,g,x)},q2=function(i){return i===0?0:i%1===0?1:QY(i,0,1)},_2={updateAccumulationLengths(){if(this.accumulationLengths==null)this.accumulationLengths=[];else if(this.accumulationLengths.length===this.pathData.length/2)return this;for(var i=this.accumulationLengths,t=this.pathData,r,x,s,g,e,n=0,p=0,f=t.length;p<f;p+=2)s=t[p],g=t[p+1],e=r===void 0?0:$Y(r,x,s,g),n+=e,i.push(n),r=s,x=g;return this.totalPathLength=n,this},setDisplayPathSegment(i,t){return this.pathDataSaved||(this.updateAccumulationLengths(),this.savePathData()),this.pathData.length=0,Q2(this.pathDataSave,this.accumulationLengths,i,t,this.pathData),this},appendFromPathSegment(i,t,r){return t===void 0?this.pathData.push(...i.pathData):(i.updateAccumulationLengths(),Q2(i.pathData,i.accumulationLengths,t,r,this.pathData)),this.firstPointX=this.pathData[0],this.firstPointY=this.pathData[1],this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this}};var tM={draw(i,t,r){var x=this.toPoints();return t&&i.fillPoints(x,this.closePath,this.closePath),r&&i.strokePoints(x,this.closePath,this.closePath),this}};var _Y=function(i,t){t===void 0&&(t=[]);for(var r=0,x=i.length-1;r<x;r+=2)t.push({x:i[r],y:i[r+1]});return t},eM=_Y;var tU=Phaser.Geom.Polygon,eU=function(i,t){return t===void 0&&(t=new tU),t.setTo(i),t},iM=eU;var cu=class{constructor(t){t===void 0&&(t=[]),this.pathData=t,this.closePath=!1,this.setIterations(32),this.firstPointX=void 0,this.firstPointY=void 0,this.lastPointX=void 0,this.lastPointY=void 0,this.accumulationLengths=void 0}setIterations(t){return this.iterations=t,this}toPoints(){return eM(this.pathData)}toPolygon(t){return iM(this.pathData,t)}};Object.assign(cu.prototype,K2,J2,$2,_2,tM);var rM=cu;var sv=class extends Zi{constructor(){super(),this.builder=new rM(this.pathData)}get iterations(){return this.builder.iterations}set iterations(t){this.dirty=this.dirty||this.builder.iterations!==t,this.builder.setIterations(t)}setIterations(t){return this.iterations=t,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}start(){return this.builder.start(),this.dirty=!0,this}startAt(t,r){return this.builder.startAt(t,r),this.dirty=!0,this}lineTo(t,r,x){return this.builder.lineTo(t,r,x),this.dirty=!0,this}verticalLineTo(t,r){return this.builder.verticalLineTo(t,r),this.dirty=!0,this}horizontalLineTo(t,r){return this.builder.horizontalLineTo(t,r),this.dirty=!0,this}ellipticalArc(t,r,x,s,g,e,n){return this.builder.ellipticalArc(t,r,x,s,g,e,n),this.dirty=!0,this}arc(t,r,x,s,g,e){return this.builder.arc(t,r,x,s,g,e),this.dirty=!0,this}quadraticBezierTo(t,r,x,s){return this.builder.quadraticBezierTo(t,r,x,s),this.dirty=!0,this}smoothQuadraticBezierTo(t,r){return this.builder.smoothQuadraticBezierTo(t,r),this.dirty=!0,this}cubicBezierCurveTo(t,r,x,s,g,e){return this.builder.cubicBezierCurveTo(t,r,x,s,g,e),this.dirty=!0,this}smoothCubicBezierCurveTo(t,r,x,s){return this.builder.smoothCubicBezierCurveTo(t,r,x,s),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(t,r,x){return this.builder.rotateAround(t,r,x),this.dirty=!0,this}scale(t,r,x,s){return this.builder.scale(t,r,x,s),this.dirty=!0,this}offset(t,r){return this.builder.offset(t,r),this.dirty=!0,this}toPolygon(t){return this.builder.toPolygon(t)}appendPathFrom(t,r,x){return this.builder.appendFromPathSegment(t.builder,r,x),this}copyPathFrom(t,r,x){return this.builder.clear().appendFromPathSegment(t.builder,r,x),this}setDisplayPathSegment(t,r){return this.builder.setDisplayPathSegment(t,r),this}},Fi=sv;var iU=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha,nv=class extends On{constructor(t,r,x,s){t===void 0&&(t=0),r===void 0&&(r=0),x===void 0&&(x=0),s===void 0&&(s=x),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(t,r),this.setSize(x,s)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,r){return this.x=t,this.y=r,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,r){return this.width=t,this.height=r,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,r){return this.centerX=t,this.centerY=r,this}updateData(){this.pathData.length=0;var t=this.x,r=t+this.width,x=this.y,s=x+this.height;return this.pathData.push(t,x),this.pathData.push(r,x),this.pathData.push(r,s),this.pathData.push(t,s),this.pathData.push(t,x),super.updateData(),this}webglRender(t,r,x,s,g){if(this.isFilled){var e=t.fillTint,n=iU(this.fillColor,this.fillAlpha*x);e.TL=n,e.TR=n,e.BL=n,e.BR=n,t.batchFillRect(-s+this.x,-g+this.y,this.width,this.height)}this.isStroked&&Yr(t,this,x,s,g)}canvasRender(t,r,x){this.isFilled&&(Xi(t,this),t.fillRect(-r,-x,this.width,this.height)),this.isStroked&&(Wi(t,this),t.beginPath(),t.rect(-r,-x,this.width,this.height),t.stroke())}},av=nv;var pu=Phaser.Utils.Objects.GetValue,ov=class extends Zi{constructor(t,r,x,s,g,e){t===void 0&&(t=0),r===void 0&&(r=0),x===void 0&&(x=0),s===void 0&&(s=x),g===void 0&&(g=0),e===void 0&&(e=6),super(),this.setTopLeftPosition(t,r),this.setSize(x,s),this.setRadius(g),this.setIterations(e),this.closePath=!0}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,r){return this.x=t,this.y=r,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,r){return this.width=t,this.height=r,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,r){return this.centerX=t,this.centerY=r,this}get radiusTL(){return this._radiusTL}set radiusTL(t){var r=t>0;this.dirty=this.dirty||this._radiusTL!==t||this._convexTL!==r,this._convexTL=r,this._radiusTL=Math.abs(t)}get radiusTR(){return this._radiusTR}set radiusTR(t){var r=t>0;this.dirty=this.dirty||this._radiusTR!==t||this._convexTR!==r,this._convexTR=r,this._radiusTR=Math.abs(t)}get radiusBL(){return this._radiusBL}set radiusBL(t){var r=t>0;this.dirty=this.dirty||this._radiusBL!==t||this._convexBL!==r,this._convexBL=r,this._radiusBL=Math.abs(t)}get radiusBR(){return this._radiusBR}set radiusBR(t){var r=t>0;this.dirty=this.dirty||this._radiusBR!==t||this._convexBR!==r,this._convexBR=r,this._radiusBR=Math.abs(t)}get radius(){return Math.max(this.radiusTL,this.radiusTR,this.radiusBL,this.radiusBR)}set radius(t){typeof t=="number"?(this.radiusTL=t,this.radiusTR=t,this.radiusBL=t,this.radiusBR=t):(this.radiusTL=pu(t,"tl",0),this.radiusTR=pu(t,"tr",0),this.radiusBL=pu(t,"bl",0),this.radiusBR=pu(t,"br",0))}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){var t=this.pathData;t.length=0;var r=this.width,x=this.height,s,g=this.iterations+1;if(s=this.radiusTL,s>0)if(this._convexTL){var e=s,n=s;zt(e,n,s,s,180,270,!1,g,t)}else{var e=0,n=0;zt(e,n,s,s,90,0,!0,g,t)}else ze(0,0,t);if(s=this.radiusTR,s>0)if(this._convexTR){var e=r-s,n=s;zt(e,n,s,s,270,360,!1,g,t)}else{var e=r,n=0;zt(e,n,s,s,180,90,!0,g,t)}else ze(r,0,t);if(s=this.radiusBR,s>0)if(this._convexBR){var e=r-s,n=x-s;zt(e,n,s,s,0,90,!1,g,t)}else{var e=r,n=x;zt(e,n,s,s,270,180,!0,g,t)}else ze(r,x,t);if(s=this.radiusBL,s>0)if(this._convexBL){var e=s,n=x-s;zt(e,n,s,s,90,180,!1,g,t)}else{var e=0,n=x;zt(e,n,s,s,360,270,!0,g,t)}else ze(0,x,t);return t.push(t[0],t[1]),fu(this.x,this.y,t),super.updateData(),this}},_r=ov;var rU=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha,hv=class extends On{constructor(t,r,x,s,g,e){t===void 0&&(t=0),r===void 0&&(r=0),x===void 0&&(x=0),s===void 0&&(s=0),g===void 0&&(g=0),e===void 0&&(e=0),super(),this.pathData=[],this.closePath=!0,this.setP0(t,r),this.setP1(x,s),this.setP2(g,e)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,r){return this.x0=t,this.y0=r,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,r){return this.x1=t,this.y1=r,this}get x2(){return this._x2}set x2(t){this.dirty=this.dirty||this._x2!==t,this._x2=t}get y2(){return this._y2}set y2(t){this.dirty=this.dirty||this._y2!==t,this._y2=t}setP2(t,r){return this.dirty=this.dirty||this.x2!==t||this.y2!==r,this.x2=t,this.y2=r,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(t,r,x,s,g){if(this.isFilled){var e=rU(this.fillColor,this.fillAlpha*x),n=this.x0-s,p=this.y0-g,f=this.x1-s,u=this.y1-g,l=this.x2-s,a=this.y2-g,o=r.getX(n,p),c=r.getY(n,p),h=r.getX(f,u),d=r.getY(f,u),v=r.getX(l,a),m=r.getY(l,a);t.batchTri(o,c,h,d,v,m,e,e,e)}this.isStroked&&Yr(t,this,x,s,g)}canvasRender(t,r,x){var s=this.x1-r,g=this.y1-x,e=this.x2-r,n=this.y2-x,p=this.x3-r,f=this.y3-x;t.beginPath(),t.moveTo(s,g),t.lineTo(e,n),t.lineTo(p,f),t.closePath(),this.isFilled&&(Xi(t,this),t.fill()),this.isStroked&&(Wi(t,this),t.stroke())}},lv=hv;var sM={buildShapes(){this.addShape(new _r().setName("box")).addShape(new Fi().setName("checker"))},updateShapes(){var i=this.width/2,t=this.height/2,r=Math.min(i,t),x=r*2,s=i-r,g=t-r,e=this.boxLineWidth,n=Math.max(x/10,2),p=this.getShape("box"),f=this.getShape("checker");if(this.isSizeChanged){var a=x*(1-this.boxSize)/2,u=e/2,l=x*this.boxSize-e;p.setTopLeftPosition(s+u+a,g+u+a).setSize(l,l),this.isCircleShape?p.setRadius(l/2):p.setRadius(0);var a=x*(1-this.checkerSize)/2,o=x*this.checkerSize/4,c=0,h=o*1,d=o*2,v=o*3;f.startAt(h,d).lineTo(d,v).lineTo(v,h).offset(s+a,g+a).end()}this.checked?(p.fillStyle(this.boxFillColor,this.boxFillAlpha).lineStyle(e,this.boxStrokeColor,this.boxStrokeAlpha),f.lineStyle(n,this.checkerColor)):(p.fillStyle(this.uncheckedBoxFillColor,this.uncheckedBoxFillAlpha).lineStyle(e,this.uncheckedBoxStrokeColor,this.uncheckedBoxStrokeAlpha),f.lineStyle()),this.checked&&f.setDisplayPathSegment(this.checkerAnimProgress)}};var ts=Phaser.Utils.Objects.GetValue,sU=Phaser.Math.Linear,uv=class extends be{constructor(t,r){super(t,r),this.resetFromJSON(),this.boot()}start(t){if(this.timer.isRunning)return this;var r=this.target;this.propertyKey=ts(t,"key","value");var x=r[this.propertyKey];return this.fromValue=ts(t,"from",x),this.toValue=ts(t,"to",x),this.setEase(ts(t,"ease",this.ease)),this.setDuration(ts(t,"duration",this.duration)),this.setRepeat(ts(t,"repeat",0)),this.setDelay(ts(t,"delay",0)),this.setRepeatDelay(ts(t,"repeatDelay",0)),this.timer.setDuration(this.duration).setRepeat(this.repeat).setDelay(this.delay).setRepeatDelay(this.repeatDelay),r[this.propertyKey]=this.fromValue,super.start(),this}updateGameObject(t,r){var x=r.t;x=this.easeFn(x),t[this.propertyKey]=sU(this.fromValue,this.toValue,x)}},si=uv;var nM={setCheckerAnimationDuration(i){return i===void 0&&(i=0),this.checkerAnimDuration=i,this},playCheckerAnimation(){return this.checkerAnimProgressTask===void 0&&(this.checkerAnimProgressTask=new si(this,{eventEmitter:null})),this.checkerAnimProgressTask.restart({key:"checkerAnimProgress",from:0,to:1,duration:this.checkerAnimDuration}),this},stopCheckerAnimation(){return this.checkerAnimProgressTask===void 0?this:(this.checkerAnimProgressTask.stop(),this)}};var aM={};Object.assign(aM,N2,V2,sM,nM);var oM=aM;var Yt=Phaser.Utils.Objects.GetValue,hM=Phaser.Utils.Objects.IsPlainObject,fv=23730,nU=16777215,vu=class extends mi{constructor(t,r,x,s,g,e,n){hM(r)?(n=r,r=Yt(n,"x",0),x=Yt(n,"y",0),s=Yt(n,"width",2),g=Yt(n,"height",2),e=Yt(n,"color",fv)):hM(e)&&(n=e,e=Yt(n,"color",fv)),super(t,r,x,s,g),this.type="rexCheckbox",e===void 0&&(e=fv),this.setBoxShape(Yt(n,"circleBox",!1)),this.setBoxFillStyle(e,Yt(n,"boxFillAlpha",1)),this.setUncheckedBoxFillStyle(Yt(n,"uncheckedColor",null),Yt(n,"uncheckedBoxFillAlpha",1)),this.setBoxStrokeStyle(Yt(n,"boxLineWidth",4),Yt(n,"boxStrokeColor",e),Yt(n,"boxStrokeAlpha",1)),this.setUncheckedBoxStrokeStyle(this.boxLineWidth,Yt(n,"uncheckedBoxStrokeColor",this.boxStrokeColor),Yt(n,"uncheckedBoxStrokeAlpha",this.boxStrokeAlpha)),this.setCheckerStyle(Yt(n,"checkerColor",nU),Yt(n,"checkerAlpha",1)),this.setBoxSize(Yt(n,"boxSize",1)),this.setCheckerSize(Yt(n,"checkerSize",1)),this.setCheckerAnimationDuration(Yt(n,"animationDuration",150)),this.buildShapes();var p=Yt(n,"checked");p===void 0&&(p=Yt(n,"value",!1)),this.setValue(p)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,t?this.playCheckerAnimation():this.stopCheckerAnimation(),this.emit("valuechange",t))}setValue(t){return this.value=t,this}toggleValue(){return this.setValue(!this.value),this}get checked(){return this.value}set checked(t){this.value=t}setChecked(t){return t===void 0&&(t=!0),this.setValue(t),this}toggleChecked(){return this.toggleValue(),this}get checkerAnimProgress(){return this._checkerAnimProgress}set checkerAnimProgress(t){this._checkerAnimProgress!==t&&(this._checkerAnimProgress=t,this.dirty=!0)}};Object.assign(vu.prototype,oM);var lM=vu;var go=Phaser.Utils.Objects.GetValue,dv=class extends Tt{constructor(t,r){super(t,r),this._enable=void 0,t.setInteractive(go(r,"inputConfig",void 0)),this.resetFromJSON(r),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(go(t,"enable",!0)),this.setMode(go(t,"mode",1)),this.setClickInterval(go(t,"clickInterval",100)),this.setDragThreshold(go(t,"threshold",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPress,this),t.on("pointerup",this.onRelease,this),t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onMove,this),t.on("pointerover",this.onOver,this),t.on("pointerout",this.onOut,this)}shutdown(t){this.isShutdown||(this.pointer=null,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var r=t?"enable":"disable";this.emit(r,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=aU[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}onPress(t,r,x,s){this.pointer===void 0&&(this.pointer=t,this.mode===0&&this.click(t.downTime,t,s))}onRelease(t,r,x,s){this.pointer===t&&(this.mode===1&&this.click(t.upTime,t,s),this.pointer=void 0)}onPointOut(t,r){this.pointer===t&&this.cancel()}onMove(t,r,x,s){this.pointer===t&&this.dragThreshold!==void 0&&t.getDistance()>=this.dragThreshold&&this.cancel()}click(t,r,x){if(!this.enable)return this;if(t===void 0)return this.emit("click",this,this.parent,r,x),this;this.pointer=void 0;var s=this.lastClickTime;return s!==void 0&&t-s<=this.clickInterval?this:(this.lastClickTime=t,this.emit("click",this,this.parent,r,x),this)}cancel(){return this.pointer=void 0,this}onOver(t,r,x,s){return this.enable?(this.emit("over",this,this.parent,t,s),this):this}onOut(t,r){return this.enable?(this.emit("out",this,this.parent,t,r),this):this}},aU={press:0,pointerdown:0,release:1,pointerup:1},Ji=dv;var uM=Phaser.Utils.Objects.GetValue,cv=class extends lM{constructor(t,r,x,s,g,e,n){super(t,r,x,s,g,e,n),this._click=new Ji(this,uM(n,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(uM(n,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}},fM=cv;var dM=fM;var xo=dM;J.register("checkbox",function(i,t,r,x,s,g){var e=new xo(this.scene,i,t,r,x,s,g);return this.scene.add.existing(e),e});Z(window,"RexPlugins.UI.Checkbox",xo);var cM={setTrackFillStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.trackFillColor!==i||this.trackFillAlpha!==t,this.trackFillColor=i,this.trackFillAlpha=t,this},setFalseValueTrackFillStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.falseValueTrackColor!==i||this.uncheckedTrackFillAlpha!==t,this.falseValueTrackColor=i,this.falseValueTrackFillAlpha=t,this},setThumbStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.thumbColor!==i||this.checkAlpha!==t,this.thumbColor=i,this.thumbAlpha=t,this}};var pM={setTrackSize(i,t){return this.dirty=this.dirty||this.trackWidth!==i||this.trackHeight!==t,this.trackWidth=i,this.trackHeight=t,this},setTrackRadius(i){return this.dirty=this.dirty||this.trackRadius!==i,this.trackRadius=i,this},setThumbSize(i,t){return t===void 0&&(t=i),this.dirty=this.dirty||this.thumbWidth!==i||this.thumbHeight!==t,this.thumbWidth=i,this.thumbHeight=t,this},setThumbRadius(i){return this.dirty=this.dirty||this.thumbRadius!==i,this.thumbRadius=i,this}};var vM={setThumbPosition(i,t){return t===void 0&&(t=1-i),this.thumbLeftX=i,this.thumbRightX=t,this},setRTL(i){return i===void 0&&(i=!0),this.rtl=i,this}};var oU=function(i,t,r){return(t-i)*r+i},mu=oU;var hU=function(i,t,r){var x=mu(Hr(i),Hr(t),r),s=mu(Kr(i),Kr(t),r),g=mu(jr(i),jr(t),r);return(x&255)<<16|(s&255)<<8|g&255},mM=hU;var gM=Phaser.Math.Linear,xM={buildShapes(){this.addShape(new _r().setName("track")).addShape(new _r().setName("thumb"))},updateShapes(){var i=this.width,t=this.height,r=this.value?this.toggleAnimProgress:1-this.toggleAnimProgress,x=this.getShape("track");if(this.isSizeChanged){var s=i*this.trackWidth,g=t*this.trackHeight,e=(i-s)/2,n=(t-g)/2,p=t*this.trackRadius;x.setTopLeftPosition(e,n).setSize(s,g).setRadius(p)}var f=mM(this.falseValueTrackColor,this.trackFillColor,r),u=gM(this.falseValueTrackFillAlpha,this.trackFillAlpha,r);x.fillStyle(f,u);var l=this.getShape("thumb");if(this.isSizeChanged){var a=i*this.thumbWidth,o=t*this.thumbHeight,c=t*this.thumbRadius;l.setSize(a,o).setRadius(c)}var h=gM(this.thumbLeftX,this.thumbRightX,r)*i;this.rtl&&(h=i-h);var d=t/2;l.setCenterPosition(h,d),l.fillStyle(this.thumbColor,this.thumbAlpha)}};var yM={setToggleAnimationDuration(i){return i===void 0&&(i=0),this.toggleAnimDuration=i,this},playToggleAnimation(){return this.toggleAnimProgressTask===void 0&&(this.toggleAnimProgressTask=new si(this,{eventEmitter:null})),this.toggleAnimProgressTask.restart({key:"toggleAnimProgress",from:0,to:1,duration:this.toggleAnimDuration}),this},stopToggleAnimation(){return this.toggleAnimProgressTask===void 0?this:(this.toggleAnimProgressTask.stop(),this)}};var CM={};Object.assign(CM,cM,pM,vM,xM,yM);var TM=CM;var lU=function(i){var t=.3*Hr(i)+.59*Kr(i)+.11*jr(i);return(t&255)<<16|(t&255)<<8|t&255},SM=lU;var Ut=Phaser.Utils.Objects.GetValue,PM=Phaser.Utils.Objects.IsPlainObject,pv=23730,uU=16777215,gu=class extends mi{constructor(t,r,x,s,g,e,n){PM(r)?(n=r,r=Ut(n,"x",0),x=Ut(n,"y",0),s=Ut(n,"width",2),g=Ut(n,"height",2),e=Ut(n,"color",pv)):PM(e)&&(n=e,e=Ut(n,"color",pv)),super(t,r,x,s,g),this.type="rexToggleSwitch",e===void 0&&(e=pv),this.setTrackFillStyle(e,Ut(n,"trackFillAlpha",1)),this.setFalseValueTrackFillStyle(Ut(n,"falseValueTrackColor",SM(e)),Ut(n,"falseValueTrackFillAlpha",1)),this.setThumbStyle(Ut(n,"thumbColor",uU),Ut(n,"thumbAlpha",1)),this.setTrackSize(Ut(n,"trackWidth",.9),Ut(n,"trackHeight",.5)),this.setTrackRadius(Ut(n,"trackRadius",this.trackHeight*.5));var p=Ut(n,"thumbHeight",void 0),f=Ut(n,"thumbWidth",p);f===void 0&&(f=this.trackHeight*.9),this.setThumbSize(f,p),this.setThumbRadius(Ut(n,"thumbRadius",this.thumbHeight*.5)),this.setThumbPosition(Ut(n,"thumbLeft",.3),Ut(n,"thumbRight",void 0)),this.setRTL(Ut(n,"rtl",!1)),this.setToggleAnimationDuration(Ut(n,"animationDuration",150)),this.buildShapes(),this.setValue(Ut(n,"value",!1),0)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,this.playToggleAnimation(),this.emit("valuechange",t))}setValue(t,r){r===void 0&&(r=this.toggleAnimDuration);var x=this.toggleAnimDuration;return this.toggleAnimDuration=r,this.value=t,this.toggleAnimDuration=x,this}toggleValue(t){return this.setValue(!this.value,t),this}get toggleAnimProgress(){return this._toggleAnimProgress}set toggleAnimProgress(t){this._toggleAnimProgress!==t&&(this._toggleAnimProgress=t,this.dirty=!0)}};Object.assign(gu.prototype,TM);var EM=gu;var MM=Phaser.Utils.Objects.GetValue,vv=class extends EM{constructor(t,r,x,s,g,e,n){super(t,r,x,s,g,e,n),this._click=new Ji(this,MM(n,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(MM(n,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}},AM=vv;var RM=AM;var yo=RM;J.register("toggleSwitch",function(i,t,r,x,s,g){var e=new yo(this.scene,i,t,r,x,s,g);return this.scene.add.existing(e),e});Z(window,"RexPlugins.UI.ToggleSwitch",yo);var OM={loadFromURL(i,t){var r=this,x=new Image;return x.onload=function(){r.width!==x.width||r.height!==x.height?r.resize(x.width,x.height):r.clear(),r.context.drawImage(x,0,0),r.updateTexture(),t&&t(),x.onload=null,x.src="",x.remove()},x.src=i,this},loadFromURLPromise(i){var t=this;return new Promise(function(r,x){t.loadFromURL(i,r)})},loadFromFile(i,t){var r=URL.createObjectURL(i);return this.loadFromURL(r,function(){URL.revokeObjectURL(r),t&&t()}),this},loadFromFilePromise(i){var t=this;return new Promise(function(r,x){t.loadFromFile(i,r)})}};var xu=class extends Ye{};Object.assign(xu.prototype,OM);var wM=xu;var LM=wM;var bi=LM;J.register("canvas",function(i,t,r,x){var s=new bi(this.scene,i,t,r,x);return this.scene.add.existing(s),s});Z(window,"RexPlugins.UI.Canvas",bi);var Fn=Phaser.Utils.Objects.GetValue,mv=class extends Ye{constructor(t,r,x,s,g,e){super(t,r,x),this.type="rexCircleMaskImage",this.setTexture(s,g,e)}setTexture(t,r,x){typeof r=="object"&&(x=r,r=void 0),typeof x=="string"&&(x={maskType:x});var s=Fn(x,"maskType",0),g=Fn(x,"backgroundColor",void 0),e=Fn(x,"strokeColor",void 0),n=e!=null?10:0,p=Fn(x,"strokeWidth",n);if(s===void 0?s=0:typeof s=="string"&&(s=fU[s]),this._textureKey=t,this._frameName=r,s===null)return this.loadTexture(t,r),this.dirty=!0,this;var f=this.scene.sys.textures.getFrame(t,r);if(!f)return this;f.cutWidth!==this.width||f.cutHeight!==this.height?this.setCanvasSize(f.cutWidth,f.cutHeight):this.clear();var u=this.canvas,l=this.context,a=u.width,o=u.height;g!=null&&(l.fillStyle=g,l.fillRect(0,0,a,o)),l.save(),l.beginPath();var c=p/2;switch(s){case 1:var y=Math.floor(a/2),C=Math.floor(o/2),h=y-c,d=C-c;l.ellipse(y,C,h,d,0,0,2*Math.PI);break;case 2:var v=Fn(x,"radius",0),m=Fn(x,"iteration",void 0);jh(l,c,c,a-p,o-p,v,m);break;default:var y=Math.floor(a/2),C=Math.floor(o/2),T=Math.min(y,C)-c;l.arc(y,C,T,0,2*Math.PI);break}return e!=null&&(l.strokeStyle=e,l.lineWidth=p,l.stroke()),l.clip(),this.loadTexture(t,r),l.restore(),this.dirty=!0,this}resize(t,r){return this.setDisplaySize(t,r),this}},fU={circle:0,ellipse:1,roundRectangle:2},FM=mv;var bM=FM;var Co=bM;J.register("circleMaskImage",function(i,t,r,x,s){var g=new Co(this.scene,i,t,r,x,s);return this.scene.add.existing(g),g});Z(window,"RexPlugins.UI.CircleMaskImage",Co);var To=Phaser.Utils.Objects.GetValue,gv=class extends Ye{constructor(t,r,x,s,g,e){super(t,r,x),this.type="rexAlphaMaskImage",this.maskFrame=null,this.setTexture(s,g,e)}setTexture(t,r,x){typeof r=="object"&&(x=r,r=void 0),typeof x=="string"&&(x={mask:{key:x}});var s=To(x,"mask.key"),g=To(x,"mask.frame"),e=To(x,"mask.invertAlpha",!1),n=To(x,"mask.scale"),p=To(x,"backgroundColor");if(s){this._maskKey=s,this._maskFrame=g,this._maskScale=n;var f=s?this.scene.sys.textures.get(s):null;this.maskFrame=f?f.get(g):null}this._textureKey=t,this._frameName=r;var u=this.maskFrame;if(u===null)return this.loadTexture(t,r),this.dirty=!0,this;var l=p!=null;this.loadTexture(t,r);var a=this.canvas,o=this.context,c=a.width,h=a.height;o.save(),o.globalCompositeOperation=e?"destination-out":"destination-in";var d,v;this._maskScale!=null?(d=u.cutWidth*this._maskScale,v=u.cutHeight*this._maskScale):(d=c,v=h);var m=(c-d)/2,y=(h-v)/2;return this.drawFrame(this._maskKey,this._maskFrame,m,y,d,v),o.restore(),l&&(o.save(),o.globalCompositeOperation="destination-over",o.fillStyle=p,o.fillRect(0,0,c,h),o.restore()),this.dirty=!0,this}resize(t,r){return this.setDisplaySize(t,r),this}},DM=gv;var IM=DM;var xv=IM;J.register("alphaMaskImage",function(i,t,r,x,s){var g=new xv(this.scene,i,t,r,x,s);return this.scene.add.existing(g),g});Z(window,"RexPlugins.UI.AlphaMaskImage",xv);var dU=Phaser.Math.Linear,BM=Phaser.Math.Percent,GM={setValue(i,t,r){return i==null?this:(t!==void 0&&(i=BM(i,t,r)),this.value=i,this)},addValue(i,t,r){return t!==void 0&&(i=BM(i,t,r)),this.value+=i,this},getValue(i,t){var r=this.value;return i!==void 0&&(r=dU(i,t,r)),r}};var cU=Phaser.Math.Percent,pU=function(i){return this.easeValuePropName=i,this},vU=function(i){return this.easeValueDuration=i,this},mU=function(i){return this.easeFunction=i,this},gU=function(){return this.easeValueTask&&this.easeValueTask.stop(),this},xU=function(i,t,r){return i==null?this:(t!==void 0&&(i=cU(i,t,r)),this.easeValueTask===void 0&&(this.easeValueTask=new si(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:i,duration:this.easeValueDuration,ease:this.easeFunction}),this)},yU=function(i,t,r,x){return r===void 0&&(r=-1),x===void 0&&(x=0),this.easeValueTask===void 0&&(this.easeValueTask=new si(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,from:i,to:t,duration:this.easeValueDuration,ease:this.easeFunction,repeat:r,repeatDelay:x}),this},NM={setEaseValuePropName:pU,setEaseValueDuration:vU,setEaseValueFunction:mU,stopEaseValue:gU,easeValueTo:xU,easeValueRepeat:yU};var So=Phaser.Utils.Objects.GetValue,CU=Phaser.Math.Clamp;function ke(i){class t extends i{bootProgressBase(x){this.eventEmitter=So(x,"eventEmitter",this);var s=So(x,"valuechangeCallback",null);if(s!==null){var g=So(x,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",s,g)}return this.setEaseValuePropName("value").setEaseValueDuration(So(x,"easeValue.duration",0)).setEaseValueFunction(So(x,"easeValue.ease","Linear")),this}get value(){return this._value}set value(x){x=CU(x,0,1);var s=this._value,g=s!=x;this.dirty=this.dirty||g,this._value=x,g&&this.eventEmitter.emit("valuechange",this._value,s,this.eventEmitter)}}return Object.assign(t.prototype,GM,NM),t}var TU=Phaser.Math.RadToDeg,VM={buildShapes(){this.addShape(new wn().setName("track")).addShape(new Sr().setName("bar")).addShape(new wn().setName("center"))},updateShapes(){var i=this.radius,t=this.thickness*this.radius,r=this.radius-t/2,x=this.radius-t,s=this.getShape("track");this.trackColor!=null&&t>0?s.setCenterPosition(i,i).setRadius(r).lineStyle(t,this.trackColor):s.reset();var g=this.getShape("bar");if(this.barColor!=null&&r>0){var e,n,p;if(this.value===1)e=!1,n=0,p=361;else{e=this.anticlockwise,n=TU(this.startAngle);var f=360*(e?1-this.value:this.value);p=f+n}g.setCenterPosition(i,i).setRadius(r).setAngle(n,p,e).lineStyle(t,this.barColor)}else g.reset();var u=this.getShape("center");this.centerColor&&x>0?u.setCenterPosition(i,i).setRadius(x).fillStyle(this.centerColor):u.reset()}};var $i=Phaser.Utils.Objects.GetValue,SU=Phaser.Utils.Objects.IsPlainObject,PU=Phaser.Math.Clamp,EU=Phaser.Math.DegToRad(270),yu=class extends ke(mi){constructor(t,r,x,s,g,e,n){SU(r)&&(n=r,r=$i(n,"x",0),x=$i(n,"y",0),s=$i(n,"radius",1),g=$i(n,"barColor",void 0),e=$i(n,"value",0)),s===void 0&&(s=1);var p=s*2;super(t,r,x,p,p),this.type="rexCircularProgress",this.bootProgressBase(n),this.setRadius(s),this.setTrackColor($i(n,"trackColor",void 0)),this.setBarColor(g),this.setCenterColor($i(n,"centerColor",void 0)),this.setThickness($i(n,"thickness",.2)),this.setStartAngle($i(n,"startAngle",EU)),this.setAnticlockwise($i(n,"anticlockwise",!1)),this.buildShapes(),this.setValue(e)}resize(t,r){return t=Math.floor(Math.min(t,r)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var r=t*2;this.resize(r,r)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=PU(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}setCenterColor(t){return this.centerColor=t,this}};Object.assign(yu.prototype,VM);var zM=yu;var YM=zM;var Po=YM;J.register("circularProgress",function(i,t,r,x,s,g){var e=new Po(this.scene,i,t,r,x,s,g);return this.scene.add.existing(e),e});Z(window,"RexPlugins.UI.CircularProgress",Po);var MU=function(i,t,r,x,s,g,e,n,p,f,u,l){f===void 0&&(f=0),u===void 0&&(u=2*Math.PI),l===void 0&&(l=!1),t.beginPath(),t.ellipse(r,x,s,g,0,f,u,l),e!=null&&(t.fillStyle=e,t.fill()),n!=null&&(t.strokeStyle=n,t.lineWidth=p,t.stroke())},Cu=MU;var AU=function(i,t,r,x,s,g,e,n,p,f,u){p===void 0&&n!=null&&(p=2),f===void 0&&(f="start"),u===void 0&&(u="alphabetic"),t.font=g,t.textAlign=f,t.textBaseline=u,t.fillStyle=e,t.strokeStyle=n,t.lineWidth=p,t.lineCap="round",t.lineJoin="round",n!=null&&n!=="none"&&p>0&&t.strokeText(s,r,x),e!=null&&e!=="none"&&t.fillText(s,r,x)},UM=AU;var RU=function(){var i=this.radius,t=this.thickness*this.radius,r=this.radius-t/2,x=this.radius-t,s=this.canvas,g=this.context;if(this.trackColor&&t>0&&(g.save(),Cu(s,g,i,i,r,r,void 0,this.trackColor,t),g.restore()),this.barColor&&r>0){var e,n,p;if(this.value===1)e=!1,n=0,p=2*Math.PI;else{e=this.anticlockwise,n=this.startAngle;var f=2*Math.PI*(e?1-this.value:this.value);p=f+n}g.save(),Cu(s,g,i,i,r,r,void 0,this.barColor,t,n,p,e),g.restore()}if(this.centerColor&&x>0){var u;this.centerColor2?(u=this.context.createRadialGradient(i,i,0,i,i,x),u.addColorStop(0,this.centerColor),u.addColorStop(1,this.centerColor2)):u=this.centerColor,g.save(),Cu(s,g,i,i,x,x,u),g.restore()}this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(g.save(),UM(s,g,i,i,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),g.restore())},XM=RU;var ee=Phaser.Utils.Objects.GetValue,OU=Phaser.Utils.Objects.IsPlainObject,wU=Phaser.Math.Clamp,LU=Phaser.Math.DegToRad(270),yv=class extends ke(Ye){constructor(t,r,x,s,g,e,n){OU(r)&&(n=r,r=ee(n,"x",0),x=ee(n,"y",0),s=ee(n,"radius",1),g=ee(n,"barColor",void 0),e=ee(n,"value",0));var p=s*2;super(t,r,x,p,p),this.type="rexCircularProgressCanvas",this.bootProgressBase(n),this.setRadius(s),this.setTrackColor(ee(n,"trackColor",void 0)),this.setBarColor(g),this.setCenterColor(ee(n,"centerColor",void 0)),this.setThickness(ee(n,"thickness",.2)),this.setStartAngle(ee(n,"startAngle",LU)),this.setAnticlockwise(ee(n,"anticlockwise",!1)),this.setTextColor(ee(n,"textColor",void 0)),this.setTextStrokeColor(ee(n,"textStrokeColor",void 0),ee(n,"textStrokeThickness",void 0));var f=ee(n,"textFont",void 0);f?this.setTextFont(f):this.setTextFont(ee(n,"textSize","16px"),ee(n,"textFamily","Courier"),ee(n,"textStyle","")),this.setTextFormatCallback(ee(n,"textFormatCallback",void 0),ee(n,"textFormatCallbackScope",void 0)),this.setValue(e)}resize(t,r){return t=Math.floor(Math.min(t,r)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var r=t*2;this.resize(r,r)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){t=ct(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){t=ct(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=wU(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){t=ct(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}get centerColor2(){return this._centerColor2}set centerColor2(t){t=ct(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=t,this._centerColor2=t}setCenterColor(t,r){return this.centerColor=t,this.centerColor2=r,this}get textColor(){return this._textColor}set textColor(t){t=ct(t,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=t,this._textColor=t}setTextColor(t){return this.textColor=t,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(t){t=ct(t,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=t,this._textStrokeColor=t}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(t){this.dirty=this.dirty||this._textStrokeThickness!=t,this._textStrokeThickness=t}setTextStrokeColor(t,r){return r===void 0&&(r=2),this.textStrokeColor=t,this.textStrokeThickness=r,this}get textFont(){return this._textFont}set textFont(t){this.dirty=this.dirty||this._textFont!=t,this._textFont=t}setTextFont(t,r,x){var s;return r===void 0?s=t:s=x+" "+t+" "+r,this.textFont=s,this}setTextFormatCallback(t,r){return this.textFormatCallback=t,this.textFormatCallbackScope=r,this}updateTexture(){return this.clear(),XM.call(this),super.updateTexture(),this}getFormatText(t){t===void 0&&(t=this.value);var r;return this.textFormatCallbackScope?r=this.textFormatCallback(t):r=this.textFormatCallback.call(this.textFormatCallbackScope,t),r}},WM=yv;var kM=WM;var Cv=kM;J.register("circularProgressCanvas",function(i,t,r,x,s,g){var e=new Cv(this.scene,i,t,r,x,s,g);return this.scene.add.existing(e),e});Z(window,"RexPlugins.UI.CircularProgressCanvas",Cv);var FU=function(){var i=this.skewX,t=this.width-Math.abs(i),r=this.height,x=this.getShape("trackFill");x.fillStyle(this.trackColor),x.isFilled&&Tv(x,0,0,t,r,i).close();var s=this.getShape("bar");if(s.fillStyle(this.barColor),s.isFilled){var g,e;this.rtl?(g=t*(1-this.value),e=t):(g=0,e=t*this.value),Tv(s,g,0,e,r,i).close()}var n=this.getShape("trackStroke");n.lineStyle(this.trackStrokeThickness,this.trackStrokeColor),n.isStroked&&Tv(n,0,0,t,r,i).end()},Tv=function(i,t,r,x,s,g){return g>=0?i.startAt(t+g,r).lineTo(x+g,r).lineTo(x,s).lineTo(t,s).lineTo(t+g,r):i.startAt(t,r).lineTo(x,r).lineTo(x-g,s).lineTo(t-g,s).lineTo(t,r),i},HM=FU;var me=Phaser.Utils.Objects.GetValue,Sv=Phaser.Utils.Objects.IsPlainObject,Tu=class extends ke(mi){constructor(t,r,x,s,g,e,n,p){Sv(r)?(p=r,r=me(p,"x",0),x=me(p,"y",0),s=me(p,"width",2),g=me(p,"height",2),e=me(p,"barColor",void 0),n=me(p,"value",0)):Sv(s)?(p=s,s=me(p,"width",2),g=me(p,"height",2),e=me(p,"barColor",void 0),n=me(p,"value",0)):Sv(e)&&(p=e,e=me(p,"barColor",void 0),n=me(p,"value",0)),super(t,r,x,s,g,p),this.type="rexLineProgress",this.bootProgressBase(p),this.addShape(new Fi().setName("trackFill")).addShape(new Fi().setName("bar")).addShape(new Fi().setName("trackStroke")),this.setTrackColor(me(p,"trackColor",void 0)),this.setBarColor(e),this.setTrackStroke(me(p,"trackStrokeThickness",2),me(p,"trackStrokeColor",void 0)),this.setSkewX(me(p,"skewX",0)),this.setRTL(me(p,"rtl",!1)),this.setValue(n)}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,r){return this.trackStrokeThickness=t,this.trackStrokeColor=r,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}},bU={updateShapes:HM};Object.assign(Tu.prototype,bU);var KM=Tu;var jM=KM;var Pv=jM;J.register("lineProgress",function(i,t,r,x,s,g,e){var n=new Pv(this.scene,i,t,r,x,s,g,e);return this.scene.add.existing(n),n});Z(window,"RexPlugins.UI.LineProgress",Pv);var DU=function(i,t){i.save(),i.beginPath();var r=t[0];i.moveTo(r.x,r.y);for(var x=1,s=t.length;x<s;x++)r=t[x],i.lineTo(r.x,r.y);i.closePath(),i.restore()},ZM=DU;var IU=function(i,t,r,x,s,g,e){e===void 0&&(e="round"),ZM(t,r),t.lineJoin=e,x!=null&&(t.fillStyle=x,t.fill()),s!=null&&(t.strokeStyle=s,t.lineWidth=g,t.stroke())},Su=IU;var BU=function(){var i=this.skewX,t=this.width-Math.abs(i),r=this.height,x=this.canvas,s=this.context;(this.trackColor||this.trackStrokeColor)&&JM(0,0,t,r,i,this.trackPoints);var g,e;if(this.barColor&&(this.rtl?(g=t*(1-this.value),e=t):(g=0,e=t*this.value),JM(g,0,e,r,i,this.barPoints)),this.trackColor&&(s.save(),Su(x,s,this.trackPoints,this.trackColor),s.restore()),this.barColor){s.save();var n;if(this.barColor2){var p;if(this.isHorizontalGradient){var f=r/2;p=s.createLinearGradient(g,f,e,f)}else{var u=t/2;p=s.createLinearGradient(u,0,u,r)}p.addColorStop(0,this.rtl?this.barColor:this.barColor2),p.addColorStop(1,this.rtl?this.barColor2:this.barColor),n=p}else n=this.barColor;Su(x,s,this.barPoints,n),s.restore()}this.trackStrokeColor&&this.trackStrokeThickness>0&&(s.save(),Su(x,s,this.trackPoints,void 0,this.trackStrokeColor,this.trackStrokeThickness),s.restore())},JM=function(i,t,r,x,s,g){g===void 0&&(g=[]),g.length=4;for(var e=0;e<4;e++)g[e]||(g[e]={});var n;return s>=0?(n=g[0],n.x=i+s,n.y=t,n=g[1],n.x=r+s,n.y=t,n=g[2],n.x=r,n.y=x,n=g[3],n.x=i,n.y=x):(n=g[0],n.x=i,n.y=t,n=g[1],n.x=r,n.y=t,n=g[2],n.x=r-s,n.y=x,n=g[3],n.x=i-s,n.y=x),g},$M=BU;var ie=Phaser.Utils.Objects.GetValue,Ev=Phaser.Utils.Objects.IsPlainObject,Mv=class extends ke(Ye){constructor(t,r,x,s,g,e,n,p){Ev(r)?(p=r,r=ie(p,"x",0),x=ie(p,"y",0),s=ie(p,"width",2),g=ie(p,"height",2),e=ie(p,"barColor",void 0),n=ie(p,"value",0)):Ev(s)?(p=s,s=ie(p,"width",2),g=ie(p,"height",2),e=ie(p,"barColor",void 0),n=ie(p,"value",0)):Ev(e)&&(p=e,e=ie(p,"barColor",void 0),n=ie(p,"value",0)),super(t,r,x,s,g),this.type="rexLineProgressCanvas",this.trackPoints=[],this.barPoints=[],this.bootProgressBase(p),this.setTrackColor(ie(p,"trackColor",void 0)),this.setBarColor(e,ie(p,"barColor2",void 0),ie(p,"isHorizontalGradient",void 0)),this.setTrackStroke(ie(p,"trackStrokeThickness",2),ie(p,"trackStrokeColor",void 0)),this.setSkewX(ie(p,"skewX",0)),this.setRTL(ie(p,"rtl",!1)),this.setValue(n)}get trackColor(){return this._trackColor}set trackColor(t){t=ct(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){t=ct(t,this.canvas,this.context),this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,r){return this.trackStrokeThickness=t,this.trackStrokeColor=r,this}get barColor(){return this._barColor}set barColor(t){t=ct(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}get barColor2(){return this._barColor2}set barColor2(t){t=ct(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=t,this._barColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setBarColor(t,r,x){return x===void 0&&(x=!0),this.barColor=t,this.barColor2=r,this.isHorizontalGradient=x,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}updateTexture(){return this.clear(),$M.call(this),super.updateTexture(),this}},QM=Mv;var qM=QM;var Eo=qM;J.register("circularProgressCanvas",function(i,t,r,x,s,g,e){var n=new Eo(this.scene,i,t,r,x,s,g,e);return this.scene.add.existing(n),n});Z(window,"RexPlugins.UI.LineProgressCanvas",Eo);var SMt=Phaser.Math.Wrap,bn=Phaser.Math.Linear,GU=function(){var i=this.getShape("triangle"),t=this.padding,r=this.width-t.right,x=0+t.left,s=this.height-t.bottom,g=0+t.top,e=(x+r)/2,n=(g+s)/2,p={0:{a:{x,y:g},b:{x:r,y:n},c:{x,y:s}},1:{a:{x,y:g},b:{x:e,y:s},c:{x:r,y:g}},2:{a:{x:r,y:g},b:{x,y:n},c:{x:r,y:s}},3:{a:{x,y:s},b:{x:e,y:g},c:{x:r,y:s}}},f,u,l,a,o,c;if(this.previousDirection===void 0){var h=p[this.direction],d=h.a,v=h.b,m=h.c;f=d.x,u=d.y,l=v.x,a=v.y,o=m.x,c=m.y}else{var y=p[this.previousDirection],C=p[this.direction],T=this.easeDirectionProgress;f=bn(y.a.x,C.a.x,T),u=bn(y.a.y,C.a.y,T),l=bn(y.b.x,C.b.x,T),a=bn(y.b.y,C.b.y,T),o=bn(y.c.x,C.c.x,T),c=bn(y.c.y,C.c.y,T)}i.startAt(f,u).lineTo(l,a).lineTo(o,c),this.arrowOnly?i.end():i.close()},_M=GU;var NU=Phaser.Math.DegToRad,Pu=NU(120),VU=function(t){var t=this.getShape("triangle"),r=this.width/2,x=this.height/2,s=Math.min(r,x)*this.radius,g=this.verticeRotation;t.startAt(r+s*Math.cos(g+Pu),x+s*Math.sin(g+Pu)).lineTo(r+s*Math.cos(g),x+s*Math.sin(g)).lineTo(r+s*Math.cos(g-Pu),x+s*Math.sin(g-Pu)),this.arrowOnly?t.end():t.close()},tA=VU;var eA={buildShapes(){this.addShape(new Fi().setName("triangle"))},updateShapes(){var i=this.getShape("triangle");this.arrowOnly?i.fillStyle().lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha):i.fillStyle(this.fillColor,this.fillAlpha).lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha),this.shapeMode===0?_M.call(this):tA.call(this)}};var iA={setEaseDuration(i){return i===void 0&&(i=0),this.easeDuration=i,this},playEaseDirectionation(){return this.easeDirectionProgressTask===void 0&&(this.easeDirectionProgressTask=new si(this,{eventEmitter:null})),this.easeDirectionProgressTask.restart({key:"easeDirectionProgress",from:0,to:1,duration:this.easeDuration}),this},stopEaseDirection(){return this.easeDirectionProgressTask===void 0?this:(this.easeDirectionProgressTask.stop(),this)}};var Dn=Phaser.Utils.Objects.GetValue,zU=Phaser.Utils.Objects.IsPlainObject,YU=Phaser.Math.DegToRad,UU=Phaser.Math.RadToDeg,Eu=class extends mi{constructor(t,r,x,s,g,e,n){var p,f,u,l,a,o,c,h;if(zU(r)){var d=r;r=d.x,x=d.y,s=d.width,g=d.height,e=d.color,n=d.alpha,p=d.strokeColor,f=d.strokeAlpha,u=d.strokeWidth,l=d.arrowOnly,a=d.direction,o=d.easeDuration,c=d.padding,h=d.radius}r===void 0&&(r=0),x===void 0&&(x=0),s===void 0&&(s=1),g===void 0&&(g=s),l===void 0&&(l=!1),a===void 0&&(a=0),o===void 0&&(o=0),c===void 0&&(c=0),h===void 0&&(h=void 0),super(t,r,x,s,g),this.type="rexTriangle",this.setFillStyle(e,n),p!==void 0&&u===void 0&&(u=2),this.setStrokeStyle(u,p,f),this.setArrowOnly(l),this.setDirection(a,o),this.setPadding(c),this.setRadius(h),this.buildShapes()}get arrowOnly(){return this._arrowOnly}set arrowOnly(t){this.dirty=this.dirty||this._arrowOnly!=t,this._arrowOnly=t}setArrowOnly(t){return t===void 0&&(t=!0),this.arrowOnly=t,this}get direction(){return this._direction}set direction(t){t=WU(t),this._direction!==t&&(this.easeDuration>0&&this._direction!==void 0?this.previousDirection=this._direction:this.previousDirection=void 0,this._direction=t,this.verticeAngle=t*90,this.dirty=!0,this.previousDirection!==void 0?this.playEaseDirectionation():this.stopEaseDirection())}setDirection(t,r){return r!==void 0&&this.setEaseDuration(r),this.direction=t,this}toggleDirection(t){return this.setDirection(this.direction+2,t),this}get easeDirectionProgress(){return this._easeDirectionProgress}set easeDirectionProgress(t){this._easeDirectionProgress!==t&&(this._easeDirectionProgress=t,this.dirty=!0)}setPadding(t,r,x,s){if(typeof t=="object"){var g=t,e=Dn(g,"x",null);e!==null?(t=e,x=e):(t=Dn(g,"left",0),x=Dn(g,"right",t));var n=Dn(g,"y",null);n!==null?(r=n,s=n):(r=Dn(g,"top",0),s=Dn(g,"bottom",r))}else t===void 0&&(t=0),r===void 0&&(r=t),x===void 0&&(x=t),s===void 0&&(s=r);return this.padding===void 0&&(this.padding={}),this.dirty=this.dirty||this.padding.left!=t||this.padding.top!=r||this.padding.right!=x||this.padding.bottom!=s,this.padding.left=t,this.padding.top=r,this.padding.right=x,this.padding.bottom=s,this.setRadius(),this}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this.shapeMode=t==null?0:1,this}get verticeRotation(){return this._verticeRotation}set verticeRotation(t){this.dirty=this.dirty||this._verticeRotation!=t,this._verticeRotation=t}setVerticeRotation(t){return this.verticeRotation=t,this}get verticeAngle(){return UU(this.verticeRotation)}set verticeAngle(t){this.verticeRotation=YU(t)}setVerticeAngle(t){return this.verticeAngle=t,this}},XU={right:0,down:1,left:2,up:3},WU=function(i){return typeof i=="string"&&(i=XU[i]),i=i%4,i};Object.assign(Eu.prototype,eA,iA);var rA=Eu;var sA=rA;var Mo=sA;J.register("triangle",function(i,t,r,x,s,g){var e=new Mo(this.scene,i,t,r,x,s,g);return this.scene.add.existing(e),e});Z(window,"RexPlugins.UI.Triangle",Mo);var kU=Phaser.GameObjects.Zone,HU=Phaser.Utils.Array.Add,KU=Phaser.Utils.Array.Remove,Mu=class extends kU{constructor(t,r,x,s,g){r===void 0&&(r=0),x===void 0&&(x=0),s===void 0&&(s=1),g===void 0&&(g=1),super(t,r,x,s,g),this.children=[]}destroy(t){if(!!this.scene){if(t)for(var r,x=this.children.length-1;x>=0;x--)r=this.children[x],!r.parentContainer&&!r.displayList&&r.destroy(t);this.clear(!t),super.destroy(t)}}contains(t){return this.children.indexOf(t)!==-1}add(t){var r=this;return HU(this.children,t,0,function(x){x.once("destroy",r.onChildDestroy,r)},this),this}remove(t,r){var x=this;return KU(this.children,t,function(s){s.off("destroy",x.onChildDestroy,x),r&&s.destroy()}),this}onChildDestroy(t,r){this.remove(t,!1)}clear(t){for(var r=this,x,s=0,g=this.children.length;s<g;s++)x=this.children[s],x.off("destroy",r.onChildDestroy,r),t&&x.destroy();return this.children.length=0,this}},nA=Phaser.GameObjects.Components;Phaser.Class.mixin(Mu,[nA.Alpha,nA.Flip]);var Ls=Mu;var re=function(i,t){var r;if(t===void 0)i.hasOwnProperty("rexContainer")&&(r=i.rexContainer.parent);else for(r=re(i);r&&r.name!==t;)r=re(r);return r},Ao=function(i){for(var t=re(i);t;)i=t,t=re(t);return i};var jU=Phaser.Math.DegToRad,ZU=Phaser.Math.RadToDeg,JU=function(i){if(!i.hasOwnProperty("rexContainer")){var t={parent:null,self:null,layer:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,visible:!0,active:!0};Object.defineProperty(t,"angle",{get:function(){return ZU(this.rotation)},set:function(r){this.rotation=jU(r)}}),Object.defineProperty(t,"displayWidth",{get:function(){return i.width*this.scaleX},set:function(r){this.scaleX=r/i.width}}),Object.defineProperty(t,"displayHeight",{get:function(){return i.height*this.scaleY},set:function(r){this.scaleY=r/i.height}}),i.rexContainer=t}return i.rexContainer},gt=JU;var aA={setParent(i,t){t===void 0&&(t=this);var r=gt(i);return t?(r.parent=t,r.self=i):(r.parent=null,r.self=null),this},getParent(i,t){return typeof i=="string"&&(t=i,i=void 0),i===void 0&&(i=this),re(i,t)},getTopmostParent(i){return i===void 0&&(i=this),Ao(i)}};var Ro=Phaser.Utils.Objects.GetValue,oA=Ls.prototype.add,Av=function(i,t){this.setParent(i);var r=gt(i);return hA(r,t),this.resetChildState(i).updateChildVisible(i).updateChildActive(i).updateChildScrollFactor(i).updateChildMask(i),oA.call(this,i),this.addToParentContainer(i),this.addToRenderLayer(i),this},Rv=function(i,t){this.setParent(i);var r=gt(i);return hA(r,t),r.x=i.x,r.y=i.y,r.rotation=i.rotation,r.scaleX=i.scaleX,r.scaleY=i.scaleY,r.alpha=i.alpha,r.visible=i.visible,r.active=i.active,this.updateChildPosition(i).updateChildAlpha(i).updateChildVisible(i).updateChildActive(i).updateChildScrollFactor(i).updateChildMask(i),oA.call(this,i),this.addToRenderLayer(i),this},hA=function(i,t){t===void 0&&(t=!0),typeof t=="boolean"?(i.syncPosition=t,i.syncRotation=t,i.syncScale=t,i.syncAlpha=t,i.syncScrollFactor=t):(i.syncPosition=Ro(t,"syncPosition",!0),i.syncRotation=Ro(t,"syncRotation",!0),i.syncScale=Ro(t,"syncScale",!0),i.syncAlpha=Ro(t,"syncAlpha",!0),i.syncScrollFactor=Ro(t,"syncScrollFactor",!0))},lA={add(i){return Array.isArray(i)?this.addMultiple(i):Av.call(this,i),this},pin(i,t){return Array.isArray(i)?this.addMultiple(i,t):Av.call(this,i,t),this},addMultiple(i){for(var t=0,r=i.length;t<r;t++)Av.call(this,i[t]);return this},addLocal(i){return Array.isArray(i)?this.addMultiple(i):Rv.call(this,i),this},pinLocal(i,t){return Array.isArray(i)?this.addMultiple(i,t):Rv.call(this,i,t),this},addLocalMultiple(i){for(var t=0,r=i.length;t<r;t++)Rv.call(this,i[t]);return this}};var uA=Ls.prototype.remove,$U=Ls.prototype.clear,fA={remove(i,t){return re(i)!==this?this:(this.setParent(i,null),t||this.removeFromRenderLayer(i),uA.call(this,i,t),this)},unpin(i,t){return re(i)!==this?this:(this.setParent(i,null),t||this.removeFromRenderLayer(i),uA.call(this,i,t),this)},clear(i){for(var t=this.children,r=0,x=t.length;r<x;r++){var s=t[r];this.setParent(s,null),i||this.removeFromRenderLayer(s)}return $U.call(this,i),this}};var dA={getLocalState(i){return gt(i)},resetChildState(i){return this.resetChildPositionState(i).resetChildVisibleState(i).resetChildAlphaState(i).resetChildActiveState(i),this},resetChildrenState(i){for(var t=0,r=i.length;t<r;t++)this.resetChildState(i[t]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}};var cA=Phaser.Math.RotateAround,pA={worldToLocal(i){return i.x-=this.x,i.y-=this.y,cA(i,0,0,-this.rotation),i.x/=this.scaleX,i.y/=this.scaleY,i},localToWorld(i){return i.x*=this.scaleX,i.y*=this.scaleY,cA(i,0,0,this.rotation),i.x+=this.x,i.y+=this.y,i}};var QU=function(i,t){return i===t?1:i/t},es=QU;var vA={updateChildPosition(i){i.isRexContainerLite&&(i.syncChildrenEnable=!1);var t=gt(i),r=t.parent;return t.syncPosition&&(i.x=t.x,i.y=t.y,r.localToWorld(i)),t.syncRotation&&(i.rotation=t.rotation+r.rotation),t.syncScale&&(i.scaleX=t.scaleX*r.scaleX,i.scaleY=t.scaleY*r.scaleY),i.isRexContainerLite&&(i.syncChildrenEnable=!0,i.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(i){var t=gt(i),r=t.parent;return t.x=i.x,t.y=i.y,r.worldToLocal(t),t.scaleX=es(i.scaleX,r.scaleX),t.scaleY=es(i.scaleY,r.scaleY),t.rotation=i.rotation-r.rotation,this},setChildPosition(i,t,r){return i.x=t,i.y=r,this.resetChildPositionState(i),this},setChildLocalPosition(i,t,r){var x=gt(i);return x.x=t,x.y=r,this.updateChildPosition(i),this},resetLocalPositionState(){var i=gt(this).parent;return i&&i.resetChildPositionState(this),this}};var qU=Phaser.Math.DegToRad,mA={updateChildRotation(i){var t=gt(i),r=t.parent;return t.syncRotation&&(i.rotation=r.rotation+t.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(i){var t=gt(i),r=t.parent;return t.rotation=i.rotation-r.rotation,this},setChildRotation(i,t){return i.rotation=t,this.resetChildRotationState(i),this},setChildAngle(i,t){return i.angle=t,this.resetChildRotationState(i),this},setChildLocalRotation(i,t){var r=gt(i);return r.rotation=t,this.updateChildRotation(i),this},setChildLocalAngle(i,t){var r=gt(i);return r.rotation=qU(t),this.updateChildRotation(i),this},resetLocalRotationState(){var i=gt(this).parent;return i&&i.resetChildRotationState(this),this}};var gA={updateChildScale(i){var t=gt(i),r=t.parent;return t.syncScale&&(i.scaleX=r.scaleX*t.scaleX,i.scaleY=r.scaleY*t.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(i){var t=gt(i),r=t.parent;return t.scaleX=es(i.scaleX,r.scaleX),t.scaleY=es(i.scaleY,r.scaleY),this},setChildScale(i,t,r){return r===void 0&&(r=t),i.scaleX=t,i.scaleY=r,this.resetChildScaleState(i),this},setChildLocalScale(i,t,r){r===void 0&&(r=t);var x=gt(i);return x.scaleX=t,x.scaleY=r,this.updateChildScale(i),this},setChildDisplaySize(i,t,r){return i.setDisplaySize(t,r),this.resetChildScaleState(i),this},resetLocalScaleState(){var i=gt(this).parent;return i&&i.resetChildScaleState(this),this}};var xA={updateChildVisible(i){var t=gt(i),r=t.parent,x=t.hasOwnProperty("maskVisible")?t.maskVisible:!0;return i.visible=r.visible&&t.visible&&x,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(i){var t=gt(i);return t.hasOwnProperty("maskVisible")&&delete t.maskVisible,t.visible=i.visible,this},setChildVisible(i,t){return this.setChildLocalVisible(i,t),this},setChildLocalVisible(i,t){t===void 0&&(t=!0);var r=gt(i);return r.visible=t,this.updateChildVisible(i),this},setChildMaskVisible(i,t){t===void 0&&(t=!0);var r=gt(i);return r.maskVisible=t,this.updateChildVisible(i),this},resetLocalVisibleState(){var i=gt(this).parent;return i&&i.resetChildVisibleState(this),this}};var yA={updateChildAlpha(i){var t=gt(i),r=t.parent;return t.syncAlpha&&(i.alpha=r.alpha*t.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(i){var t=gt(i),r=t.parent;return t.alpha=es(i.alpha,r.alpha),this},setChildAlpha(i,t){return i.alpha=t,this.resetChildAlphaState(i),this},setChildLocalAlpha(i,t){var r=gt(i);return r.alpha=t,this.updateChildAlpha(i),this},resetLocalAlphaState(){var i=gt(this).parent;return i&&i.resetChildAlphaState(this),this}};var CA={updateChildActive(i){var t=gt(i),r=t.parent;return i.active=r.active&&t.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(i){var t=gt(i);return t.active=i.active,this},setChildActive(i,t){return i.active=t,this.resetChildActiveState(i),this},setChildLocalActive(i,t){t===void 0&&(t=!0);var r=gt(i);return r.active=t,this.updateChildActive(i),this},resetLocalActiveState(){var i=gt(this).parent;return i&&i.resetChildActiveState(this),this}};var TA={updateChildScrollFactor(i){var t=gt(i),r=t.parent;return t.syncScrollFactor&&i.setScrollFactor(r.scrollFactorX,r.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}};var SA={updateChildMask(i){if(this.mask==null)return this;var t=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;return t!==i&&(i.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(i){return this.mask=i,this},clearMask(i){return i===void 0&&(i=!1),this._mask=null,this.children.forEach(function(t){t.clearMask(!1)}),i&&this.mask&&this.mask.destroy(),this}};var _U=function(i,t){if(i.length<=1)return i;t===void 0&&(t=!1);var r=i[0].scene,x=r.sys.displayList;return x.depthSort(),t?i.sort(function(s,g){return x.getIndex(g)-x.getIndex(s)}):i.sort(function(s,g){return x.getIndex(s)-x.getIndex(g)}),i},Pr=_U;var PA={setDepth(i,t){if(this.depth=i,!t&&this.children)for(var r=this.getAllChildren(),x=0,s=r.length;x<s;x++)r[x].depth=i;return this},swapDepth(i){var t=this.depth,r=i.depth;return this.setDepth(r),i.setDepth(t),this},incDepth(i){if(this.depth+=i,this.children)for(var t=this.getAllChildren(),r=0,x=t.length;r<x;r++)t[r].depth+=i;return this},bringToTop(){var i=this.displayList,t=this.getAllChildren([this]);Pr(t,!1);for(var r=0,x=t.length;r<x;r++){var s=t[r];i.exists(s)&&i.bringToTop(s)}return this},moveDepthBelow(i){var t=this.displayList;if(i.displayList!==t)return this;var r=this.getAllChildren([this]);Pr(r,!1);for(var x=0,s=r.length;x<s;x++){var g=r[x];if(t.exists(g)){t.moveBelow(i,g);break}}return this},moveDepthAbove(i){var t=this.displayList;if(i.displayList!==t)return this;var r=this.getAllChildren([this]);Pr(r,!0);for(var x=0,s=r.length;x<s;x++){var g=r[x];if(t.exists(g)){t.moveAbove(i,g);break}}return this}};var Ov=function(i,t){var r=t(i);if(!r&&i.isRexContainerLite)for(var x=i.children,s=0,g=x.length;s<g;s++)Ov(x[s],t)},Au=function(i,t){for(var r=[i];r.length>0;){var x=r.shift(),s=t(x);!s&&x.isRexContainerLite&&r.push(...x.children)}};var Fs=Phaser.Utils.Array,EA={getChildren(i){if(!i)i=this.children;else for(var t=0,r=this.children.length;t<r;t++)i.push(this.children[t]);return i},getAllChildren(i){i===void 0&&(i=[]);var t=this;return Au(t,function(r){r!==t&&i.push(r)}),i},getAllVisibleChildren(i){i===void 0&&(i=[]);var t=this;return Au(t,function(r){if(r!==t){if(!r.visible)return!0;i.push(r)}}),i},bfs(i,t){return t===void 0&&(t=this),Au(t,i),this},dfs(i,t){return t===void 0&&(t=this),Ov(t,i),this},contains(i){var t=re(i);return t?t===this?!0:this.contains(t):!1},getByName(i,t){if(t){for(var r=[this],x,s;r.length;){x=r.shift();for(var g=0,e=x.children.length;g<e;g++){if(s=x.children[g],s.name===i)return s;s.isRexContainerLite&&r.push(s)}}return null}else return Fs.GetFirst(this.children,"name",i)},getRandom(i,t){return Fs.GetRandom(this.children,i,t)},getFirst(i,t,r,x){return Fs.GetFirstElement(this.children,i,t,r,x)},getAll(i,t,r,x){return Fs.GetAll(this.children,i,t,r,x)},count(i,t,r,x){return Fs.CountAllMatching(this.children,i,t,r,x)},swap(i,t){return Fs.Swap(this.children,i,t),this},setAll(i,t,r,x){return Fs.SetAll(this.children,i,t,r,x),this}};var wv=function(i){for(var t=[],r=0,x=i.length;r<x;r++){var s=i[r];!s.hasOwnProperty("rexContainer")||t.push(s.rexContainer)}return t},tX=function(i){for(var t=0,r=i.length;t<r;t++){var x=i[t].scene;if(x)return x}return null},MA=function(i,t,r){if(!r.parent){i.remove();return}var x=r.parent,s=r.self;switch(t){case"x":case"y":x.updateChildPosition(s);break;case"angle":case"rotation":x.updateChildRotation(s);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":x.updateChildScale(s);break;case"alpha":x.updateChildAlpha(s);break;default:x.updateChildPosition(s),x.updateChildRotation(s),x.updateChildScale(s),x.updateChildAlpha(s);break}},AA={tweenChild(i){var t=i.targets;Array.isArray(t)||(t=[t]);var r=this.scene||tX(t);if(!!r){i.targets=wv(t);var x=r.tweens.add(i);return x.on("update",MA),x}},tweenSelf(i){return i.targets=[this],this.tweenChild(i)},createTweenChildConfig(i){var t=i.targets;t&&(Array.isArray(t)||(t=[t]),i.targets=wv(t));var r=i.onUpdate;return i.onUpdate=function(x,s){r&&r(x,s),MA(x,void 0,s)},i},tween(i){var t=this.scene;return i.targets||(i.targets=this),t.tweens.add(i)},timelineChild(i){var t=i.targets;t&&(Array.isArray(t)||(t=[t]),i.targets=wv(t));for(var r=i.tweens,x=0,s=r.length;x<s;x++)r[x]=this.createTweenChildConfig(r[x]);var g=this.scene.tweens.timeline(i);return g}};var RA={addToContainer(i){this._setParentContainerFlag=!0;var t=this.getAllChildren([this]);return Pr(t),i.add(t),this._setParentContainerFlag=!1,this},addToLayer(i){return this.addToContainer(i),this},removeFromContainer(){if(!this.parentContainer)return this;var i=this.getAllChildren([this]).filter(function(t){return!!t.scene});return i.length===0?this:(this._setParentContainerFlag=!0,i.length>1&&(Pr(i),i.reverse()),this.parentContainer.remove(i),this._setParentContainerFlag=!1,this)},getParentContainer(){if(this.parentContainer)return this.parentContainer;for(var i=this.getParent();i;){var t=i.parentContainer;if(t)return t;i=i.getParent()}return null},addToParentContainer(i){if(!i.displayList)return this;var t=this.getParentContainer();return t?(i.isRexContainerLite?i.addToContainer(t):t.add(i),this):this}};var OA={enableLayer(){if(this.privateRenderLayer)return this;var i=this.scene.add.layer();return this.moveDepthBelow(i),this.addToLayer(i),this.privateRenderLayer=i,this},getLayer(){return this.privateRenderLayer||this.enableLayer(),this.privateRenderLayer},getRenderLayer(){if(this.privateRenderLayer)return this.privateRenderLayer;for(var i=this.getParent();i;){var t=i.privateRenderLayer;if(t)return t;i=i.getParent()}return null},addToRenderLayer(i){if(!i.displayList)return this;var t=this.getRenderLayer();if(!t)return this;i.isRexContainerLite?i.addToLayer(t):t.add(i);var r=gt(i);return r.layer=t,this},removeFromRenderLayer(i){var t=gt(i),r=t.layer;return r?(r.remove(i),t.layer=null,this):this}};var wA=Phaser.Geom.Rectangle,eX=Phaser.Geom.Rectangle.Union,iX=function(i,t){t===void 0?t=new wA:t===!0&&(Lv===void 0&&(Lv=new wA),t=Lv),t.setTo(0,0,0,0);for(var r,x=!0,s=0,g=i.length;s<g;s++)if(r=i[s],!!r.getBounds){var e=yn(r,!0);x?(t.setTo(e.x,e.y,e.width,e.height),x=!1):eX(e,t,t)}return t},Lv,LA=iX;var rX=Phaser.GameObjects.GameObject,sX=function(i){return i instanceof rX},Se=sX;var bs=Phaser.Utils.Objects.GetValue,nX=Phaser.Textures.DynamicTexture,aX=Phaser.Utils.String.UUID,oX=function(i){if(!!i){var t=i.gameObjects,r=i.renderTexture,x=bs(i,"x",void 0),s=bs(i,"y",void 0),g=bs(i,"width",void 0),e=bs(i,"height",void 0),n=bs(i,"originX",0),p=bs(i,"originY",0),f=bs(i,"padding",0),u,l;if(g===void 0||e===void 0||x===void 0||s===void 0){var a=LA(t,!0),o=x!==void 0&&s!==void 0;o?(g=Math.max(x-a.left,a.right-x)*2,e=Math.max(s-a.top,a.bottom-s)*2,n=.5,p=.5):(x=a.x,s=a.y,g=a.width,e=a.height,n=0,p=0),u=a.x,l=a.y}else u=x+(0-n)*g,l=s+(0-p)*e;u-=f,l-=f,g+=f*2,e+=f*2;var c=t[0].scene;h&&!r&&(r=new nX(c.sys.textures,aX(),g,e)),r||(r=c.add.renderTexture(0,0,g,e)),r.setPosition&&r.setPosition(x,s),(r.width!==g||r.height!==e)&&r.setSize(g,e),r.setOrigin&&r.setOrigin(n,p),r.camera.setScroll(u,l),t=Pr(ui(t)),r.draw(t);var h=i.saveTexture;if(h)if(Se(r))r.saveTexture(h);else{var d=r,v=d.manager;v.exists(d.key)?v.renameTexture(d.key,key):(d.key=key,v.list[key]=d,v.emit("addtexture",key,d),v.emit(`addtexture-${key}`,d))}return r}},Ds=oX;var FA={snapshot(i){var t=this.scaleX,r=this.scaleY,x=t===1&&r===1;x||this.setScale(1),i===void 0&&(i={}),i.gameObjects=this.getAllVisibleChildren(),i.x=this.x,i.y=this.y,i.originX=this.originX,i.originY=this.originY;var s=Ds(i),g=!!s.scene;return x||(this.setScale(t,r),g&&s.setScale(t,r)),g?s:this}};var bA=Phaser.Utils.Objects.GetValue,hX=function(i,t){var r=bA(t,"drawContainer",!0),x=bA(t,"children");return x===void 0&&(x=this.getAllVisibleChildren([this])),r||(x=x.filter(function(s){return!s.isRexContainerLite})),Xl(x,i,t),this},DA=hX;var lX=Phaser.Math.RotateAround,uX=function(i,t,r){r===void 0&&(r=t);var x={x:(t-i.originX)*i.displayWidth,y:(r-i.originY)*i.displayHeight};return lX(x,0,0,i.rotation),i.originX=t,i.originY=r,i.x=i.x+x.x,i.y=i.y+x.y,i},IA=uX;var fX=function(i,t){this.syncChildrenEnable=!1,IA(this,i,t),this.syncChildrenEnable=!0;for(var r=this.getAllChildren(),x=0,s=r.length;x<s;x++)this.resetChildPositionState(r[x]);return this},BA=fX;var GA={changeOrigin:BA,drawBounds:DA};Object.assign(GA,aA,lA,fA,dA,pA,vA,mA,gA,xA,yA,CA,TA,SA,PA,EA,AA,RA,OA,FA);var NA=GA;var Ru=class extends Ls{constructor(t,r,x,s,g,e){Array.isArray(s)&&(e=s,s=void 0,g=void 0),super(t,r,x,s,g),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,this.privateRenderLayer=void 0,e&&this.add(e)}destroy(t){!this.scene||(this.syncChildrenEnable=!1,super.destroy(t),this.privateRenderLayer&&(this.privateRenderLayer.list.length=0,this.privateRenderLayer.destroy()))}resize(t,r){return this.setSize(t,r),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get scale(){return super.scale}set scale(t){this.scale!==t&&(super.scale=t,this.syncPosition())}get visible(){return super.visible}set visible(t){super.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return super.alpha}set alpha(t){super.alpha!==t&&(super.alpha=t,this.syncAlpha())}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.syncActive())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get list(){return this.children}static GetParent(t){return re(t)}get parentContainer(){return this._parentContainer}set parentContainer(t){if(!this._parentContainer&&!t){this._parentContainer=t;return}if(this.setParentContainerFlag){this._parentContainer=t;return}this._parentContainer&&!t?(this.removeFromContainer(),this._parentContainer=t):t?(this._parentContainer=t,this.addToContainer(t)):this._parentContainer=t}get setParentContainerFlag(){if(this._setParentContainerFlag)return!0;var t=re(this);return t?t.setParentContainerFlag:!1}};Object.assign(Ru.prototype,NA);var Qi=Ru;var VA=Qi;var De=VA;var dX=function(i){return i.hasOwnProperty("rexSizer")||(i.rexSizer={}),i.rexSizer},Is=dX;function zA(i){return i===void 0&&(i=this),Is(i)}var cX=function(i){var t=Is(i);return t.hasOwnProperty("prevState")||(t.prevState={}),t.prevState},YA=cX;var pX=function(i){return i===void 0&&(i=vi(this.scene)),this.left=Math.max(this.left,i.left),this.right=Math.min(this.right,i.right),this.top=Math.max(this.top,i.top),this.bottom=Math.min(this.bottom,i.bottom),this},UA=pX;var He=Phaser.Display.Align,Ou={center:He.CENTER,left:He.LEFT_CENTER,right:He.RIGHT_CENTER,top:He.TOP_CENTER,bottom:He.BOTTOM_CENTER,"left-top":He.TOP_LEFT,"left-center":He.LEFT_CENTER,"left-bottom":He.BOTTOM_LEFT,"center-top":He.TOP_CENTER,"center-center":He.CENTER,"center-bottom":He.BOTTOM_CENTER,"right-top":He.TOP_RIGHT,"right-center":He.RIGHT_CENTER,"right-bottom":He.BOTTOM_RIGHT};var qi=Ou;var XA=new Phaser.GameObjects.Zone({sys:{queueDepthSort:Gt,events:{once:Gt}}},0,0,1,1);XA.setOrigin(0);var Fv=XA;var vX={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},_i=vX;var mX=function(i){var t=dt(i);return i.y+t-t*i.originY},In=mX;var gX=function(i){var t=mt(i);return i.x-t*i.originX+t*.5},Bn=gX;var xX=function(i,t){var r=dt(i);return i.y=t-r+r*i.originY,i},Gn=xX;var yX=function(i,t){var r=mt(i),x=r*i.originX;return i.x=t+x-r*.5,i},Nn=yX;var CX=function(i,t,r,x){return r===void 0&&(r=0),x===void 0&&(x=0),Nn(i,Bn(t)+r),Gn(i,In(t)+x),i},WA=CX;var TX=function(i){var t=mt(i);return i.x-t*i.originX},Vn=TX;var SX=function(i,t){var r=mt(i);return i.x=t+r*i.originX,i},zn=SX;var PX=function(i,t,r,x){return r===void 0&&(r=0),x===void 0&&(x=0),zn(i,Vn(t)-r),Gn(i,In(t)+x),i},kA=PX;var EX=function(i){var t=mt(i);return i.x+t-t*i.originX},Yn=EX;var MX=function(i,t){var r=mt(i);return i.x=t-r+r*i.originX,i},Un=MX;var AX=function(i,t,r,x){return r===void 0&&(r=0),x===void 0&&(x=0),Un(i,Yn(t)+r),Gn(i,In(t)+x),i},HA=AX;var RX=function(i,t){var r=dt(i),x=r*i.originY;return i.y=t+x-r*.5,i},Xn=RX;var OX=function(i,t,r){return Nn(i,t),Xn(i,r)},KA=OX;var wX=function(i){var t=dt(i);return i.y-t*i.originY+t*.5},Wn=wX;var LX=function(i,t,r,x){return r===void 0&&(r=0),x===void 0&&(x=0),KA(i,Bn(t)+r,Wn(t)+x),i},jA=LX;var FX=function(i,t,r,x){return r===void 0&&(r=0),x===void 0&&(x=0),zn(i,Vn(t)-r),Xn(i,Wn(t)+x),i},ZA=FX;var bX=function(i,t,r,x){return r===void 0&&(r=0),x===void 0&&(x=0),Un(i,Yn(t)+r),Xn(i,Wn(t)+x),i},JA=bX;var DX=function(i){var t=dt(i);return i.y-t*i.originY},kn=DX;var IX=function(i,t){var r=dt(i);return i.y=t+r*i.originY,i},Hn=IX;var BX=function(i,t,r,x){return r===void 0&&(r=0),x===void 0&&(x=0),Nn(i,Bn(t)+r),Hn(i,kn(t)-x),i},$A=BX;var GX=function(i,t,r,x){return r===void 0&&(r=0),x===void 0&&(x=0),zn(i,Vn(t)-r),Hn(i,kn(t)-x),i},QA=GX;var NX=function(i,t,r,x){return r===void 0&&(r=0),x===void 0&&(x=0),Un(i,Yn(t)+r),Hn(i,kn(t)-x),i},qA=NX;var tr=[];tr[_i.BOTTOM_CENTER]=WA;tr[_i.BOTTOM_LEFT]=kA;tr[_i.BOTTOM_RIGHT]=HA;tr[_i.CENTER]=jA;tr[_i.LEFT_CENTER]=ZA;tr[_i.RIGHT_CENTER]=JA;tr[_i.TOP_CENTER]=$A;tr[_i.TOP_LEFT]=QA;tr[_i.TOP_RIGHT]=qA;var VX=function(i,t,r,x,s){return tr[r](i,t,x,s)},wu=VX;var zX=function(i,t,r,x,s,g){Fv.setPosition(t,r).setSize(x,s),wu(i,Fv,g)},er=zX;var Kn=Phaser.Utils.Objects.GetValue,YX=Phaser.GameObjects.Group,UX=function(i,t){var r=i.scene,x,s,g,e,n;if(typeof t=="number")x=t;else{x=Kn(t,"color"),s=Kn(t,"lineWidth");var p=Kn(t,"name",!1);p&&(g=Kn(p,"createTextCallback",XX),e=Kn(p,"createTextCallbackScope",void 0),n=Kn(p,"align","left-top"),typeof n=="string"&&(n=qi[n]))}if(x===void 0&&(x=16777215),s===void 0&&(s=1),g&&!i.children){i.children=new YX(r),i.once("destroy",function(h,d){h.children.destroy(!d),h.children=void 0});var f=i.clear.bind(i);i.clear=function(){f(),i.children.clear(!1,!0)}}for(var u=this.getAllShownChildren([this]),l,a,o=0,c=u.length;o<c;o++){if(l=u[o],l.getBounds||l.width!==void 0&&l.height!==void 0)Bs=yn(l,Bs);else continue;x!=null&&i.lineStyle(s,x).strokeRectShape(Bs),l.name&&g&&(e?a=g.call(e,r):a=g(r),a&&(a.setText(l.name),i.children.add(a),er(a,Bs.x,Bs.y,Bs.width,Bs.height,n)))}return this},XX=function(i,t,r){return i.add.text(0,0,"")},Bs=void 0,_A=UX;var Lu=Phaser.Utils.Objects.GetValue,WX=function(i,t){return t===void 0&&(t={}),typeof i=="number"?(t.left=i,t.right=i,t.top=i,t.bottom=i):(t.left=Lu(i,"left",0),t.right=Lu(i,"right",0),t.top=Lu(i,"top",0),t.bottom=Lu(i,"bottom",0)),t},tR=WX;var gi=tR;var kX=De.prototype.add,HX=function(i){return kX.call(this,i),this.sizerEventsEnable&&(i.emit("sizer.add",i,this),this.emit("add",i,this)),this},ir=HX;var eR={addBackground(i,t,r){this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof t=="string"&&(r=t,t=void 0),t===void 0&&(t=0),ir.call(this,i),this.backgroundChildren.push(i);var x=this.getSizerConfig(i);return x.padding=gi(t),r!==void 0&&this.addChildrenMap(r,i),this},isBackground(i){return this.backgroundChildren===void 0?!1:this.backgroundChildren.indexOf(i)!==-1}};var KX=Phaser.Utils.Array.Remove,jX=De.prototype.remove,ZX=function(i,t){return this.isBackground(i)&&KX(this.backgroundChildren,i),jX.call(this,i,t),!t&&this.sizerEventsEnable&&(i.emit("sizer.remove",i,this),this.emit("remove",i,this)),this},rr=ZX;var jn=function(i,t){var r=null;if(t===void 0)i.hasOwnProperty("rexContainer")&&(r=i.rexContainer.parent,r?r.isRexSizer||(r=jn(r)):r=null);else for(r=jn(i);r&&r.name!==t;)r=jn(r);return r},JX=function(i){for(var t=jn(i);t;)i=t,t=jn(t);return i},sr={getParentSizer(i,t){return typeof i=="string"&&(t=i,i=void 0),i===void 0&&(i=this),jn(i,t)},getTopmostSizer(i){return i===void 0&&(i=this),JX(i)}};var $X=Phaser.Utils.Array.Remove,iR={removeFromParentSizer(){var i=sr.getParentSizer(gameObject);return i&&i.remove(this),this},removeBackground(i,t){return this.backgroundChildren===void 0?this:this.getParentSizer(i)!==this?this:($X(this.backgroundChildren,i),rr.call(this,i,t),this)},removeAllBackgrounds(i){if(this.backgroundChildren===void 0)return this;for(var t=this.backgroundChildren.length-1;t>=0;t--)this.remove(this.backgroundChildren[t],i);return this}};var QX=function(i,t){return this.childrenMap[i]=t,this},bv=QX;var qX=function(i){if(typeof i=="object"){var t=i;for(var i in this.childrenMap)if(this.childrenMap[i]===t)return delete this.childrenMap[i],this}return delete this.childrenMap[i],this},rR=qX;var _X=function(i,t){if(typeof i=="string"&&(i=i.split(".")),i.length!==0){var r=i.shift(),x=null;if(r.charAt(0)==="#")r=r.substring(1),x=this.getByName(r,t);else if(r.indexOf("[")===-1)this.childrenMap&&(x=this.childrenMap[r]);else{var s=r.match(tW);if(s!=null&&this.childrenMap){var g=this.childrenMap[s[1]];g&&(x=g[s[2]])}}return i.length===0?x:x&&x.childrenMap?x.getElement(i):null}},tW=/(\S+)\[(\d+)\]/i,sR=_X;var nR={getInnerPadding(i){return pn(this.space,i)},setInnerPadding(i,t){return ti(this.space,i,t),this},getOuterPadding(i){return pn(this.getSizerConfig(this).padding,i)},setOuterPadding(i,t){return ti(this.getSizerConfig(this).padding,i,t),this},getChildOuterPadding(i,t){return typeof i=="string"&&(i=this.getElement(i)),pn(this.getSizerConfig(i).padding,t)},setChildOuterPadding(i,t,r){return typeof i=="string"&&(i=this.getElement(i)),ti(this.getSizerConfig(i).padding,t,r),this}};var eW=function(i){return i===void 0&&(i=Math.max(this.childrenWidth,this.minWidth)),i},Zn=eW;var iW=function(i){var t,r;for(var x in this.sizerChildren)t=this.sizerChildren[x],t&&t.isRexSizer&&!t.ignoreLayout&&(r=this.getExpandedChildWidth(t,i),r=t.resolveWidth(r),t.resolveChildrenWidth(r))},aR=iW;var rW=function(i){var t=Math.max(this.childrenHeight,this.minHeight);return i===void 0?i=t:t>i,i},Jn=rW;var sW=function(i,t){},oR=sW;var nW=function(i){var t;return i.isRexSizer?t=Math.max(i.minWidth,i.childrenWidth):i.minWidth!==void 0?t=i.minWidth:t=mt(i),t},hR=nW;var aW=function(i){var t;return i.isRexSizer?t=Math.max(i.minHeight,i.childrenHeight):i.minHeight!==void 0?t=i.minHeight:t=dt(i),t},lR=aW;var oW=function(i,t){return t},uR=oW;var hW=function(i,t){return t},fR=hW;var lW=function(){return 0},dR=lW;var uW=function(){return 0},cR=uW;var fW=function(i){i===void 0&&(i=[]);for(var t=i.length,r=this.getChildrenSizers(i),x=i.length,s=t;s<x;s++)r[s].getAllChildrenSizers(i);return i},pR=fW;var dW=function(i){return i===void 0&&(i=[]),i},vR=dW;var mR={getShownChildren(i){i===void 0&&(i=[]);for(var t=this.children,r,x=0,s=t.length;x<s;x++)r=t[x],!(r.rexSizer&&r.rexSizer.hidden)&&i.push(r);return i},getAllShownChildren(i){i===void 0&&(i=[]);for(var t=[this];t.length>0;){var r=t.shift();r.rexSizer&&r.rexSizer.hidden||(r!==this&&i.push(r),r.isRexContainerLite&&t.push(...r.children))}return i}};var cW=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var i=this.getChildrenSizers(),t,r=0,x=i.length;r<x;r++)t=i[r],!t.ignoreLayout&&t.preLayout()},nr=cW;var pW=function(){var i=this.scaleX,t=this.scaleY,r=i===1&&t===1;return r||this.setScale(1),this.runLayout(),r||this.setScale(i,t),this},gR=pW;var vW=function(i,t,r){if(this.ignoreLayout)return this;var x=!i;return x&&this.preLayout(),t=this.resolveWidth(t),x&&(this.resolveChildrenWidth(t),this.runWidthWrap(t)),r=this.resolveHeight(r),this.postResolveSize(t,r),this.resize(t,r),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout()},xR=vW;var mW=function(){},yR=mW;var gW=function(i,t,r){return this._anchor&&this._anchor.updatePosition(),this},CR=gW;var xW=function(i){var t,r;for(var x in this.sizerChildren)t=this.sizerChildren[x],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(r=this.getExpandedChildWidth(t,i),t.isRexSizer&&(r=t.resolveWidth(r)),t.runWidthWrap(r));return this},Fu=xW;var Dv=class extends Tt{constructor(t,r){super(t,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(r)}shutdown(t){this.isShutdown||(this.autoAnchor(!1),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(t))}resetFromJSON(t){t===void 0&&(t={});var r,x;t.x!==void 0?(r=null,x=t.x):t.left!==void 0?(r=0,x=t.left):t.right!==void 0?(r=1,x=t.right):t.centerX!==void 0&&(r=.5,x=t.centerX);var s,g;t.y!==void 0?(s=null,g=t.y):t.top!==void 0?(s=0,g=t.top):t.bottom!==void 0?(s=1,g=t.bottom):t.centerY!==void 0&&(s=.5,g=t.centerY);var e,n;x!==void 0&&(x=x.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),e=parseFloat(x[0])/100,n=x[1]===""?0:parseFloat(x[1]));var p,f;g!==void 0&&(g=g.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),p=parseFloat(g[0])/100,f=g[1]===""?0:parseFloat(g[1]));var u=t.width,l,a;u!==void 0&&(u=u.split("%"),l=parseFloat(u[0])/100,a=u[1]===""?0:parseFloat(u[1]));var o=t.height,c,h;o!==void 0&&(o=o.split("%"),c=parseFloat(o[0])/100,h=o[1]===""?0:parseFloat(o[1])),this.setAlign(r,s),this.setPercentage(e,p),this.setOffset(n,f),this.setSizePercentage(l,c),this.setSizePadding(a,h);var d=t.onResizeCallback,v=t.onResizeCallbackScope;d!==void 0&&this.setResizeCallback(d,v);var m=t.onUpdateViewportCallback,y=t.onUpdateViewportCallbackScope;return m!==void 0&&this.setUpdateViewportCallback(m,y),this.autoAnchor(t.enable),this}autoAnchor(t){return t===void 0&&(t=!0),t=!!t,this.autoAnchorEnable===t?this:(t?(this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()):this.scene.sys.scale.off("resize",this.anchor,this),this.autoAnchorEnable=t,this)}setAlign(t,r){return this.alignX=t,this.alignY=r,this}setPercentage(t,r){return this.percentageX=t,this.percentageY=r,this}setOffset(t,r){return this.offsetX=t,this.offsetY=r,this}setSizePercentage(t,r){return this.percentageWidth=t,this.percentageHeight=r,this}setSizePadding(t,r){return this.paddingWidth=t,this.paddingHeight=r,this}setResizeCallback(t,r){return this.onResizeCallback=t,this.onResizeCallbackScope=r,this}setUpdateViewportCallback(t,r){return this.onUpdateViewportCallback=t,this.onUpdateViewportCallbackScope=r,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var t=this.onResizeCallback,r=this.onResizeCallbackScope,x=this.anchorWidth,s=this.anchorHeight;if(!(x===void 0&&s===void 0||!t)){var g=this.parent;x===void 0&&(x=g.width),s===void 0&&(s=g.height),r?t.call(r,x,s,g,this):t(x,s,g,this)}}updatePosition(){var t=this.parent;return this.alignX===null?t.x=this.anchorX:this.alignX!==void 0&&(t.x=this.anchorX+t.displayWidth*(t.originX-this.alignX)),this.alignY===null?t.y=this.anchorY:this.alignY!==void 0&&(t.y=this.anchorY+t.displayHeight*(t.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){var t=this.parent.scene.cameras.main;this.viewport=vi(this.scene,t,this.viewport);var r=this.viewport,x=this.onUpdateViewportCallback,s=this.onUpdateViewportCallbackScope;x&&(s?x.call(s,r,this.parent,this):x(r,this.parent,this))}},TR=Dv;var Oo=TR;var yW=function(i){i===void 0&&(i={});var t=i.hasOwnProperty("width"),r=i.hasOwnProperty("height"),x=i.hasOwnProperty("onResizeCallback");return(t||r)&&!x&&(i.onResizeCallback=function(s,g,e){t&&e.setMinWidth(s),r&&e.setMinHeight(g),e.layout()}),this._anchor===void 0?this._anchor=new Oo(this,i):this._anchor.resetFromJSON(i),this},SR=yW;var CW=Phaser.Utils.Objects.GetValue,$n=Phaser.Utils.Objects.GetAdvancedValue,PR=Phaser.Math.Linear,Iv=class extends be{constructor(t,r){super(t,r),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(r),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(CW(t,"mode",0)),this.setScaleRange($n(t,"start",void 0),$n(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=TW[t]),this.mode=t,this}setScaleRange(t,r){return typeof t=="number"?(this.startX=t,this.startY=t):(this.startX=$n(t,"x",this.parent.scaleX),this.startY=$n(t,"y",this.parent.scaleY)),typeof r=="number"?(this.endX=r,this.endY=r):(this.endX=$n(r,"x",void 0),this.endY=$n(r,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;this.hasScaleX&&(t.scaleX=this.startX),this.hasScaleY&&(t.scaleY=this.startY);var r=this.repeat;return this.mode===2&&r!==-1&&(r=(r+1)*2-1),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(r),super.start(),this}updateGameObject(t,r){var x=r.t;r.isOddIteration&&(x=1-x),x=this.easeFn(x),this.hasScaleX&&(t.scaleX=PR(this.startX,this.endX,x)),this.hasScaleY&&(t.scaleY=PR(this.startY,this.endY,x))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}},TW={stop:0,destroy:1,yoyo:2},Er=Iv;var SW=function(i,t,r,x,s){x===void 0&&(x="Cubic");var g,e;switch(r){case 0:case"x":g={x:0},e={x:i.scaleX};break;case 1:case"y":g={y:0},e={y:i.scaleY};break;default:g=0,e=i.scale;break}var n={mode:0,start:g,end:e,duration:t,ease:x};return s===void 0?s=new Er(i,n):s.resetFromJSON(n),s.restart(),s},ER=SW;var Qn=ER;var PW=function(i,t,r,x,s,g){x===void 0&&(x="Linear"),s instanceof Er&&(g=s,s=void 0),s===void 0&&(s=!0);var e={};switch(e.mode=s?1:0,r){case 0:case"x":e.end={x:0};break;case 1:case"y":e.end={y:0};break;default:e.end=0;break}return e.duration=t,e.ease=x,g===void 0?g=new Er(i,e):g.resetFromJSON(e),g.restart(),g},MR=PW;var bu=MR;var EW=function(i,t,r,x,s,g,e){r===void 0&&(r=1.2),x===void 0&&(x=0),g===void 0&&(g="Cubic");var n,p;switch(s){case 0:case"x":n={x:i.scaleX},p={x:r};break;case 1:case"y":n={y:i.scaleX},p={y:r};break;default:n=i.scaleX,p=r;break}var f={mode:2,start:n,end:p,duration:t/2,ease:g,repeat:x};return e===void 0?e=new Er(i,f):e.resetFromJSON(f),e.restart(),e},AR=EW;var Bv=Phaser.Utils.Objects.IsPlainObject,Gv=function(i,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(i.emit(t.completeEventName,i),t.completeEventName=void 0)}),t.on("update",function(){var r=sr.getParentSizer(i);r&&r.resetChildPositionState(i)})},wo={popUp(i,t,r){if(Bv(i)){var x=i;i=x.duration,t=x.orientation,r=x.ease}var s=this._scaleBehavior===void 0;return this._scaleBehavior=Qn(this,i,t,r,this._scaleBehavior),s&&Gv(this,this._scaleBehavior),this._scaleBehavior.completeEventName="popup.complete",this},popUpPromise(i,t,r){return this.popUp(i,t,r),At(this._scaleBehavior)},scaleDownDestroy(i,t,r,x){if(Bv(i)){var s=i;i=s.duration,t=s.orientation,r=s.ease,x=s.destroy}var g=this._scaleBehavior===void 0;return this._scaleBehavior=bu(this,i,t,r,x,this._scaleBehavior),g&&Gv(this,this._scaleBehavior),this._scaleBehavior.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(i,t,r,x){return this.scaleDownDestroy(i,t,r,x),At(this._scaleBehavior)},scaleDown(i,t,r){return this.scaleDownDestroy(i,t,r,!1),this},scaleDownPromise(i,t,r){return this.scaleDown(i,t,r),At(this._scaleBehavior)},scaleYoyo(i,t,r,x,s){if(Bv(i)){var g=i;i=g.duration,t=g.peakValue,r=g.repeat,x=g.orientation,s=g.ease}var e=this._scaleBehavior===void 0;return this._scaleBehavior=AR(this,i,t,r,x,s,this._scaleBehavior),e&&Gv(this,this._scaleBehavior),this._scaleBehavior.completeEventName="scaleyoyo.complete",this},scaleYoyoPromise(i,t,r,x,s){return this.scaleYoyo(i,t,r,x,s),At(this._scaleBehavior)}};var MW=Phaser.Utils.Objects.GetValue,RR=Phaser.Utils.Objects.GetAdvancedValue,AW=Phaser.Math.Linear,Nv=class extends be{constructor(t,r){super(t,r),this.resetFromJSON(r),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(MW(t,"mode",0)),this.setAlphaRange(RR(t,"start",this.parent.alpha),RR(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=RW[t]),this.mode=t,this}setAlphaRange(t,r){return this.alphaStart=t,this.alphaEnd=r,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return t.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,r){var x=r.t;r.isOddIteration&&(x=1-x),t.alpha=AW(this.alphaStart,this.alphaEnd,x)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}},RW={stop:0,destroy:1,yoyo:2},OR=Nv;var qn=OR;var OW=Phaser.Utils.Objects.IsPlainObject,wW=function(i,t,r,x){var s,g;OW(r)?(s=r.start,g=r.end):g=r,s===void 0&&(s=0),g===void 0&&(g=1);var e={mode:0,start:s,end:g,duration:t};return x===void 0?x=new qn(i,e):x.resetFromJSON(e),x.restart(),x},Mr=wW;var LW=function(i,t,r,x){r instanceof qn&&(x=r,r=void 0),r===void 0&&(r=!0);var s={mode:r?1:0,end:0,duration:t};return x===void 0?x=new qn(i,s):x.resetFromJSON(s),x.restart(),x},Ar=LW;var wR=Phaser.Utils.Objects.IsPlainObject,LR=function(i,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(i.emit(t.completeEventName,i),t.completeEventName=void 0)}),t.on("update",function(){var r=sr.getParentSizer(i);r&&r.resetChildAlphaState(i)})},FR={fadeIn(i,t){if(wR(i)){var r=i;i=r.duration,t=r.alpha}var x=this._fade===void 0;return this._fade=Mr(this,i,t,this._fade),x&&LR(this,this._fade),this._fade.completeEventName="fadein.complete",this},fadeInPromise(i,t){return this.fadeIn(i,t),At(this._fade)},fadeOutDestroy(i,t){if(wR(i)){var r=i;i=r.duration,t=r.destroy}var x=this._fade===void 0;return this._fade=Ar(this,i,t,this._fade),x&&LR(this,this._fade),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(i,t){return this.fadeOutDestroy(i,t),At(this._fade)},fadeOut(i){return this.fadeOutDestroy(i,!1),this},fadeOutPromise(i){return this.fadeOut(i),At(this._fade)}};var FW=Phaser.Utils.Objects.GetValue,_n=Phaser.Utils.Objects.GetAdvancedValue,bR=Phaser.Math.Linear,Vv=class extends be{constructor(t,r){super(t,r),this.resetFromJSON(r),this.boot()}resetFromJSON(t){if(super.resetFromJSON(t),this.setMode(FW(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var r=_n(t,"x",void 0),x=_n(t,"y",void 0);this.setTargetPosition(r,x)}else this.setTargetPosition(t);return this}setMode(t){return typeof t=="string"&&(t=bW[t]),this.mode=t,this}setTargetPosition(t,r){if(typeof t=="number"||typeof r=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=r;else{var x=t;this.startX=_n(x,"startX",void 0),this.startY=_n(x,"startY",void 0),this.endX=_n(x,"endX",void 0),this.endY=_n(x,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,r){var x=r.t;r.isOddIteration&&(x=1-x),x=this.easeFn(x),this.hasMoveX&&(t.x=bR(this.startX,this.endX,x)),this.hasMoveY&&(t.y=bR(this.startY,this.endY,x))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}},bW={stop:0,destroy:1,yoyo:2},is=Vv;var DW=function(i,t){if(typeof i=="number")return i;var r=i[0],x=parseFloat(i.substr(2));switch(r){case"+":return t+x;case"-":return t-x;case"*":return t*x;case"/":return t/x}},ta=DW;var IW=function(i,t,r,x,s,g,e){g instanceof is&&(e=g,g=void 0),g===void 0&&(g=!1);var n={};return n.mode=g?1:0,r!==void 0&&(n.startX=i.x,n.endX=ta(r,i.x)),x!==void 0&&(n.startY=i.y,n.endY=ta(x,i.y)),n.duration=t,n.ease=s===void 0?"Linear":s,e===void 0?e=new is(i,n):e.resetFromJSON(n),e.restart(),e},ea=IW;var BW=function(i,t,r,x,s,g,e){g instanceof is&&(e=g,g=void 0),g===void 0&&(g=!1);var n={};return n.mode=g?1:0,r!==void 0&&(n.startX=ta(r,i.x),n.endX=i.x),x!==void 0&&(n.startY=ta(x,i.y),n.endY=i.y),n.duration=t,n.ease=s===void 0?"Linear":s,e===void 0?e=new is(i,n):e.resetFromJSON(n),e.restart(),e},ia=BW;var DR=Phaser.Utils.Objects.IsPlainObject,IR=Phaser.Math.Distance.Between,BR=function(i,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(i.emit(t.completeEventName,i),t.completeEventName=void 0)}),t.on("update",function(){var r=sr.getParentSizer(i);r&&r.resetChildPositionState(i)})},GR={moveFrom(i,t,r,x,s){if(DR(i)){var g=i;t=g.x,r=g.y,g.hasOwnProperty("speed")?i=IR(t,r,this.x,this.y)*1e3/g.speed:i=g.duration,x=g.ease}var e=this._easeMove===void 0;return this._easeMove=ia(this,i,t,r,x,s,this._easeMove),e&&BR(this,this._easeMove),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(i,t,r,x,s){return this.moveFrom(i,t,r,x,s),At(this._easeMove)},moveFromDestroy(i,t,r,x){return this.moveFrom(i,t,r,x,!0),this},moveFromDestroyPromise(i,t,r,x){return this.moveFromDestroy(i,t,r,x),At(this._easeMove)},moveTo(i,t,r,x,s){if(DR(i)){var g=i;t=g.x,r=g.y,g.hasOwnProperty("speed")?i=IR(t,r,this.x,this.y)*1e3/g.speed:i=g.duration,x=g.ease}var e=this._easeMove===void 0;return this._easeMove=ea(this,i,t,r,x,s,this._easeMove),e&&BR(this,this._easeMove),this._easeMove.completeEventName="moveto.complete",this},moveToPromise(i,t,r,x,s){return this.moveTo(i,t,r,x,s),At(this._easeMove)},moveToDestroy(i,t,r,x){return this.moveTo(i,t,r,x,!0),this},moveToDestroyPromise(i,t,r,x){return this.moveToDestroy(i,t,r,x,!0),At(this._easeMove)},moveStop(i){return this._easeMove?(this._easeMove.stop(i),this):this}};var xi=Phaser.Utils.Objects.GetValue,zv=class extends Wr{constructor(t,r){super(t,r),this.timer=new Fl,this.resetFromJSON(r),this.boot()}resetFromJSON(t){return this.timer.resetFromJSON(xi(t,"timer")),this.setEnable(xi(t,"enable",!0)),this.setMode(xi(t,"mode",1)),this.isRunning=xi(t,"isRunning",!1),this.setMagnitudeMode(xi(t,"magnitudeMode",1)),this.setAxisMode(xi(t,"axis",0)),this.setDuration(xi(t,"duration",500)),this.setMagnitude(xi(t,"magnitude",10)),this.ox=xi(t,"ox",void 0),this.oy=xi(t,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),this.mode===0?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(this.mode===0?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setMode(t){return typeof t=="string"&&(t=GW[t]),this.mode=t,this}setMagnitudeMode(t){return typeof t=="string"&&(t=VW[t]),this.magnitudeMode=t,this}setAxisMode(t){return typeof t=="string"&&(t=NW[t]),this.axisMode=t,this}setDuration(t){return this.duration=t,this}setMagnitude(t){return this.magnitude=t,this}start(t,r){if(typeof t!="number"){var x=t;r=xi(x,"magnitude",void 0),t=xi(x,"duration",void 0)}return r!==void 0&&this.setMagnitude(r),t!==void 0&&this.setDuration(t),this.timer.setDuration(this.duration).start(),super.start(),this}shake(t,r){return this.start(t,r),this}update(t,r){if(!this.isRunning||!this.enable)return this;var x=this.parent;if(!x.active)return this;if(this.timer.update(t,r),this.timer.isDone)this.backToOrigin(),this.complete();else{this.ox===void 0&&(this.ox=x.x,this.oy=x.y);var s=this.magnitude;this.magnitudeMode===1&&(s*=1-this.timer.t);var g=Math.random()*Math.PI*2,e=this.ox+Math.cos(g)*s,n=this.oy+Math.sin(g)*s;switch(this.axisMode){case 1:x.x=e;break;case 2:x.y=n;break;default:x.x=e,x.y=n;break}}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(this.ox===void 0)return this;var t=this.parent;switch(this.axisMode){case 1:t.x=this.ox;break;case 2:t.y=this.oy;break;default:t.x=this.ox,t.y=this.oy;break}return this.ox=void 0,this.oy=void 0,this}},GW={effect:0,behavior:1},NW={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2},VW={constant:0,decay:1},NR=zv;var VR=NR;var Lo=VR;var zW=Phaser.Utils.Objects.IsPlainObject,YW=function(i,t){t.on("complete",function(){i.emit("shake.complete",i)})},zR={shake(i,t,r){if(zW(i)){var x=i;i=x.duration,t=x.magnitude,r=x.magnitudeMode}return this._shake===void 0&&(this._shake=new Lo(this,{mode:0,magnitudeMode:1}),YW(this,this._shake)),i!==void 0&&this._shake.setDuration(i),t!==void 0&&this._shake.setMagnitude(t),r!==void 0&&this._shake.setMagnitudeMode(r),this._shake.shake(),this},shakePromise(i,t){return this.shake(i,t),At(this._shake)}};var YR=Phaser.Utils.Objects.IsPlainObject,Yv=class extends Tt{constructor(t,r){super(t,r),this.parent.setDataEnabled(),this.easeTasks={}}complete(t){this.emit(`complete-${t}`,this.parent,this),this.emit("complete",t,this.parent,this)}getEaseTask(t){var r=this.easeTasks[t];return r===void 0&&(r=new si(this.parent),this.easeTasks[t]=r,r.setTarget(this.parent.data.values).on("complete",function(){this.complete(t)},this)),r}easeTo(t,r,x,s){if(YR(t)){var g=t;t=g.key,r=g.value,x=g.duration,s=g.ease;var e=g.speed;x===void 0&&e!==void 0&&(x=Math.abs(r-this.parent.data.values[t])/e*1e3)}x===void 0&&(x=1e3),s===void 0&&(s="Linear");var n=this.getEaseTask(t);return n.restart({key:t,to:r,duration:x,ease:s}),this}easeFrom(t,r,x,s){if(YR(t)){var g=t;t=g.key,r=g.value,x=g.duration,s=g.ease;var e=g.speed;x===void 0&&e!==void 0&&(x=Math.abs(r-this.parent.data.values[t])/e*1e3)}x===void 0&&(x=1e3),s===void 0&&(s="Linear");var n=this.getEaseTask(t);return n.restart({key:t,from:r,duration:x,ease:s}),this}stopEase(t,r){r===void 0&&(r=!0);var x=this.easeTasks[t];return x&&x.stop(r),this}stopAll(t){t===void 0&&(t=!0);for(var r in this.easeTasks)this.stopEase(r,t);return this}},Uv=Yv;var UW=function(i,t){t.on("complete",function(r){i.emit(`easedata.${r}.complete`,i),i.emit("easedata.complete",r,i)})},UR={easeDataTo(i,t,r,x){return this._easeData||(this._easeData=new Uv(this),UW(this,this._easeData)),this._easeData.easeTo(i,t,r,x),this},easeDataToPromise(i,t,r,x){return this.easeDataTo(i,t,r,x),Jr(this._easeData,`complete-${i}`)},stopEaseData(i,t){return this._easeData?(this._easeData.stopEase(i,t),this):this},stopAllEaseData(i){return this._easeData?(this._easeData.stopAll(i),this):this}};var yi=function(i){XR(i,!1)},Ci=function(i){XR(i,!0)},ra=function(i){if(!i)return!1;var t=Is(i);return!t.hidden},XR=function(i,t){if(!!i){var r=Is(i);r.hidden=t;var x=re(i);x?x.setChildVisible(i,!t):i.setVisible(!t)}};var WR={show(i){return i===void 0&&(i=this),yi(i,!1),this},hide(i){return i===void 0&&(i=this),Ci(i,!0),this},isShow(i){return i===void 0&&(i=this),ra(i)}};var XW=["next","exit","enter"],Du=class{constructor(t){var r=Pt(t,"states",void 0);r&&this.addStates(r);var x=Pt(t,"extend",void 0);if(x)for(var s in x)(!this.hasOwnProperty(s)||this[s]===void 0)&&(this[s]=x[s]);var g=Pt(t,"eventEmitter",void 0),e=Pt(t,"EventEmitterClass",void 0);this.setEventEmitter(g,e),this._stateLock=!1,this.resetFromJSON(t)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(t){this.setEnable(Pt(t,"enable",!0)),this.start(Pt(t,"start",void 0));var r=Pt(t,"init",void 0);return r&&r.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(t){if(!(!this.enable||this._stateLock)&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var r="exit_"+this._prevState,x=this[r];x&&x.call(this),this.emit(r,this)}if(this._stateLock=!1,this._state!=null){var s="enter_"+this._state,g=this[s];g&&g.call(this),this.emit(s,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(t){return this._start=t,this._prevState=void 0,this._state=t,this}goto(t){return t!=null&&(this.state=t),this}next(){var t,r=this["next_"+this.state];return r&&(typeof r=="string"?t=r:t=r.call(this)),this.goto(t),this}get stateProperties(){return XW}addState(t,r){typeof t!="string"&&(r=t,t=r.name);for(var x=this.stateProperties,s=0,g=x.length;s<g;s++){var e=x[s],n=r[e];n&&(this[`${e}_${t}`]=n)}return this}addStates(t){if(Array.isArray(t))for(var r=0,x=t.length;r<x;r++)this.addState(t[r]);else for(var s in t)this.addState(s,t[s]);return this}runMethod(t,r,x,s,g,e){var n=this[t+"_"+this.state];if(!!n){var p=arguments.length;switch(p){case 1:return n.call(this);case 2:return n.call(this,r);case 3:return n.call(this,r,x);case 4:return n.call(this,r,x,s);case 5:return n.call(this,r,x,s,g);case 6:return n.call(this,r,x,s,g,e)}for(var f=new Array(p-1),u=1;u<p;u++)f[u-1]=arguments[u];return n.apply(this,f)}}};Object.assign(Du.prototype,ci);var kR=Du;var WW=function(i,t,r,x,s){s===void 0&&(s=!1);var g=i._events[t];if(!g)return!1;for(var e=0,n=g.length;e<n;e++){var p=g[e];if(p.fn===r&&p.context===x&&p.once===s)return!0}return!1},Iu=WW;var kW=["next","exit","enter","update","preupdate","postupdate"],Xv=class extends kR{shutdown(){this.stopUpdate(),this.stopPreUpdate(),this.stopPostUpdate(),this._scene=void 0,super.shutdown()}resetFromJSON(t){return super.resetFromJSON(t),this._scene=Pt(t,"scene",void 0),this}get stateProperties(){return kW}update(t,r){this.runMethod("update",t,r)}preupdate(t,r){this.runMethod("preupdate",t,r)}postupdate(t,r){this.runMethod("postupdate",t,r)}startUpdate(t){t||(t=this._scene);var r=t.sys.events;return Iu(r,"update",this.update,this)?this:(this._scene=t,r.on("update",this.update,this),this)}stopUpdate(){return this._scene?(this._scene.sys.events.off("update",this.update,this),this):this}startPreUpdate(t){t||(t=this._scene);var r=t.sys.events;return Iu(r,"preupdate",this.preupdate,this)?this:(this._scene=t,r.on("preupdate",this.preupdate,this),this)}stopPreUpdate(){return this._scene?(this._scene.sys.events.off("preupdate",this.preupdate,this),this):this}startPostUpdate(t){t||(t=this._scene);var r=t.sys.events;return Iu(r,"postupdate",this.postupdate,this)?this:(this._scene=t,r.on("postupdate",this.postupdate,this),this)}stopPostUpdate(){return this._scene?(this._scene.sys.events.off("postupdate",this.postupdate,this),this):this}},Bu=Xv;var Pe=Bu;var Wv=class extends Pe{constructor(t,r){super(r),this.parent=t;var x=r.initState||"IDLE";this.start(x)}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var t=this.parent;if(t.transitInTime>0){var r=t.runTransitionInCallback();t.delayCall(r,this.next,this)}else this.next()}exit_TRANS_OPNE(){var t=this.parent;t.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){var t=this.parent;t.onOpen()}exit_OPEN(){var t=this.parent;t.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var t=this.parent;if(t.transitOutTime>0){var r=t.runTransitionOutCallback();t.delayCall(r,this.next,this)}else this.next()}exit_TRANS_CLOSE(){var t=this.parent;t.removeDelayCall()}next_CLOSE(){return"TRANS_OPNE"}enter_CLOSE(){var t=this.parent;t.onClose()}exit_CLOSE(){}canOpen(){return this.state==="IDLE"||this.state==="CLOSE"}canClose(){return this.state==="IDLE"||this.state==="OPEN"}},HR=Wv;var HW=function(i,t,r,x,s){var g=i.scene,e=g.time.delayedCall(t,function(){g.game.events.once("poststep",function(){r.call(x,s)})});return e},KR=HW;var jR={delayCall(i,t,r){return this.delayCallTimer=KR(this,i,t,r),this},removeDelayCall(){return this.delayCallTimer&&(this.delayCallTimer.remove(!1),this.delayCallTimer=void 0),this}};var ZR={setTransitInTime(i){return this.transitInTime=i,this},setTransitOutTime(i){return this.transitOutTime=i,this},setTransitInCallback(i){return i||(i=Gt),this.transitInCallback=i,this},setTransitOutCallback(i){return i||(i=Gt),this.transitOutCallback=i,this}};var JR={runTransitionInCallback(){return this.transitInCallback(this.parent,this.transitInTime),this.transitInTime},onOpen(){},requestOpen(i,t){if(!this._state.canOpen())return this;this.openEventData=arguments.length>0?i:this.parent;var r=this.transitInTime;return t!==void 0&&(this.transitInTime=t),this._state.goto("TRANS_OPNE"),this.transitInTime=r,this}};var $R={runTransitionOutCallback(){return this.transitOutCallback(this.parent,this.transitOutTime),this.transitOutTime},onClose(){this.oneShotMode&&this.parent.destroy()},requestClose(i,t){if(!this._state.canClose)return this;this.closeEventData=arguments.length>0?i:this.parent;var r=this.transitOutTime;return t!==void 0&&(this.transitOutTime=t),this._state.goto("TRANS_CLOSE"),this.transitOutTime=r,this}};var QR={};Object.assign(QR,jR,ZR,JR,$R);var qR=QR;var sa=Phaser.Utils.Objects.GetValue,Gu=class extends Tt{constructor(t,r){super(t,r),this.setTransitInTime(sa(r,"duration.in",200)),this.setTransitOutTime(sa(r,"duration.out",200)),this.setTransitInCallback(sa(r,"transitIn")),this.setTransitOutCallback(sa(r,"transitOut")),this.oneShotMode=sa(r,"destroy",!1),this.delayCallTimer=void 0,this._state=new HR(this,{eventEmitter:!1,initState:sa(r,"initState","IDLE")}),this.openEventData=void 0,this.closeEventData=void 0}get state(){return this._state.state}shutdown(t){this.isShutdown||(this.transitInCallback=void 0,this.transitOutCallback=void 0,this.openEventData=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(t))}};Object.assign(Gu.prototype,qR);var na=Gu;var KW=Phaser.GameObjects.Rectangle,kv=class extends KW{constructor(t,r,x){super(t,0,0,2,2,r,1),this.setAlpha(x),this.setScrollFactor(0),this.boot()}boot(){var t=this.scene;t.sys.events.on("prerender",this.resize,this)}destroy(t){!this.scene||(this.scene.sys.events.off("prerender",this.resize,this),super.destroy(t))}get tint(){return this.fillColor}set tint(t){this.setFillStyle(t,this.fillAlpha)}resize(){var t=this.scene,r=t.sys.scale.gameSize,x=t.sys.cameras.main,s=r.width,g=r.height,e=1/x.zoom,n=s/2,p=g/2,f=s*e,u=g*e;(this.x!==n||this.y!==p)&&this.setPosition(n,p),(this.width!==f||this.height!==u)&&this.setSize(f,u).setOrigin(.5)}},Nu=kv;var Hv=Phaser.Utils.Objects.GetValue,Kv=class extends Tt{constructor(t,r){super(t,{eventEmitter:!1}),this.resetFromJSON(r),this.boot()}resetFromJSON(t){return this.setHitAreaMode(Hv(t,"hitAreaMode",0)),this.setEnable(Hv(t,"enable",!0)),this.setStopMode(Hv(t,"stopAllLevels",!0)),this}boot(){this.parent.on("pointerdown",function(t,r,x,s){this.stopAllLevels&&s.stopPropagation()},this).on("pointerup",function(t,r,x,s){this.stopAllLevels&&s.stopPropagation()},this).on("pointermove",function(t,r,x,s){this.stopAllLevels&&s.stopPropagation()},this).on("pointerover",function(t,r,x,s){this.stopAllLevels&&s.stopPropagation()},this).on("pointerout",function(t,r){this.stopAllLevels&&r.stopPropagation()},this)}setHitAreaMode(t){typeof t=="string"&&(t=jW[t]);var r=this.parent;return r.input&&r.removeInteractive(),t===0?r.setInteractive():r.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(t){return t===void 0&&(t=!0),t?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=t,this}setStopMode(t){return t===void 0&&(t=!0),this.stopAllLevels=t,this}toggleEnable(){return this.setEnable(!this.enable),this}},jW={default:0,fullWindow:1},Vu=Kv;var _R=Phaser.Utils.Objects.GetValue,jv=class extends Nu{constructor(t,r){var x=_R(r,"color",0),s=_R(r,"alpha",.8);super(t,x,s),this.touchEventStop=new Vu(this,{hitAreaMode:1})}},zu=jv;var ZW=function(i,t){var r=i.scene,x=new zu(r,t);return r.add.existing(x),i.isRexContainerLite?(i.moveDepthBelow(x),i.pin(x,{syncPosition:!1,syncRotation:!1,syncScale:!1,syncAlpha:!1,syncScrollFactor:!1})):r.children.moveBelow(x,i),x},tO=ZW;var Fo={popUp(i,t){i._modalScaleSave!==void 0?(i.scaleX=i._modalScaleSave,i.scaleY=i._modalScaleSave):i._modalScaleSave=i.scaleX,Qn(i,t)},scaleDown(i,t){bu(i,t,void 0,void 0,!1)},fadeIn(i,t){i._modalAlphaSave!==void 0?i.alpha=i._modalAlphaSave:i._modalAlphaSave=i.alpha,Mr(i,t)},fadeOut(i,t){Ar(i,t,!1)}};var eO=function(i,t){i._modalAlphaSave!==void 0?i.alpha=i._modalAlphaSave:i._modalAlphaSave=i.alpha,Mr(i,t,i.alpha)},iO=function(i,t){Ar(i,t,!1)};var JW=function(i,t,r,x,s){if(!i||x&&!x(i,t,r))return!1;var g=yn(i,!0);return!(!g.contains(t,r)||s&&!s(i,t,r))},Rr=JW;var ar=Phaser.Utils.Objects.GetValue,Zv=class extends na{constructor(t,r){r===void 0&&(r={}),r.transitIn==null&&(r.transitIn=rs.popUp),r.transitOut==null&&(r.transitOut=rs.scaleDown),r.destroy=ar(r,"destroy",!0),super(t,r);var x=ar(r,"cover");this.cover=x!==!1?tO(t,x):void 0,this.cover&&(this.setCoverTransitInCallback(ar(x,"transitIn",eO)),this.setCoverTransitOutCallback(ar(x,"transitOut",iO)));var s=ar(r,"touchOutsideClose",!1),g=ar(r,"duration.hold",-1),e=ar(r,"timeOutClose",g>=0),n=ar(r,"anyTouchClose",!1),p=ar(r,"manualClose",!1);p&&(s=!1,n=!1,e=!1),n&&(s=!1),e?this.setDisplayTime(g):this.setDisplayTime(-1),n?this.once("open",this.anyTouchClose,this):s&&this.once("open",this.touchOutsideClose,this),ar(r,"openOnStart",!0)&&this.delayCall(0,this.requestOpen,this)}shutdown(t){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.touchCloseCallback,this),this.cover&&!t&&(this.cover.destroy(),this.cover=void 0),super.shutdown(t))}touchOutsideClose(){return this.cover?this.cover.on("pointerup",this.touchCloseCallback,this):this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.touchCloseCallback,this):this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&Rr(this.parent,t.worldX,t.worldY)||this.requestClose()}runTransitionInCallback(){var t=super.runTransitionInCallback(),r=this.cover;return r&&this.coverTransitInCallback&&this.coverTransitInCallback(r,t),t}runTransitionOutCallback(){var t=super.runTransitionOutCallback(),r=this.cover;return r&&this.coverTransitOutCallback&&this.coverTransitOutCallback(r,t),t}onOpen(){var t=this.displayTime;t>=0&&this.delayCall(t,this.requestClose,this),this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.closeEventData),super.onClose()}setDisplayTime(t){return this.displayTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=rs[t]),t){case rs.popUp:t=Fo.popUp;break;case rs.fadeIn:t=Fo.fadeIn;break}return super.setTransitInCallback(t),this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=rs[t]),t){case rs.scaleDown:t=Fo.scaleDown;break;case rs.fadeOut:t=Fo.fadeOut;break}return super.setTransitOutCallback(t),this}setCoverTransitInCallback(t){return this.coverTransitInCallback=t,this}setCoverTransitOutCallback(t){return this.coverTransitOutCallback=t,this}},rs={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1},Yu=Zv;var Gs=function(i,t){var r=new Yu(i,t);return r.on("open",function(){i.emit("modal.open",r)}),r.on("close",function(x){i.emit("modal.close",x,r)}),i.on("modal.requestClose",r.requestClose,r),r},Uu=function(i,t){var r=Gs(i,t);return new Promise(function(x,s){r.once("close",function(g){x(g)})})},aa=function(i,t){i.emit("modal.requestClose",t)};var $W=function(i){return i&&typeof i=="function"},Ie=$W;var oa={modal(i,t){return Ie(i)&&(t=i,i=void 0),this._modalBehavior===void 0&&(this.onCreateModalBehavior&&this.onCreateModalBehavior(this,i),this._modalBehavior=Gs(this,i)),t&&this._modalBehavior.once("close",t),this._modalBehavior.requestOpen(),this},modalPromise(i){var t=this;return new Promise(function(r,x){t.modal(i,r)})},modalClose(i){return aa(this,i),this}};var QW=function(i,t,r,x){if(t)return Rr(i,t.worldX,t.worldY,r,x);for(var s=i.scene.input.manager,g=s.pointersTotal,e=s.pointers,n=0;n<g;n++)if(t=e[n],Rr(i,t.worldX,t.worldY,r,x))return!0;return!1},ss=QW;var qW=function(i,t){return(Se(i)||typeof i=="string")&&(t=i,i=void 0),t===void 0?t=this:typeof t=="string"&&(t=this.getElement(t)),ss(t,i)},rO=qW;var _W=function(i){return Object.prototype.toString.call(i)==="[object Array]"},Wt=_W;var tk=function(i,t,r,x,s){return Rr(i,t,r,ek(x),ik(s))},sO=function(i){var t=i.rexSizer&&i.rexSizer.hidden;return!t},ek=function(i){return i?function(t,r,x){return sO(t)?(i(t,r,x),!0):!1}:sO},ik=function(i){return i},bo=tk;var rk=function(i,t,r,x,s){if(Ie(r)||(s=r,r=void 0,x=void 0),s===void 0&&(this.sizerChildren?s=this.sizerChildren:s=this.children),Wt(s)){for(var g,e=0,n=s.length;e<n;e++)if(g=s[e],bo(g,i,t,r,x))return g}else{var g;for(var p in s)if(g=s[p],bo(g,i,t,r,x))return g}return null},nO=rk;var sk=function(i,t,r){!i||t===void 0&&r===void 0||(i.resize?(t===void 0&&(t=i.width),r===void 0&&(r=i.height),i.resize(t,r)):(t!==void 0&&(i.displayWidth=t),r!==void 0&&(i.displayHeight=r)))},kt=sk;var nk=function(i,t){return t===void 0?t={}:t===!0&&(t=ak),t.x=i.x,t.y=i.y,t.scaleX=i.scaleX,t.scaleY=i.scaleY,t.width=i.width,t.height=i.height,t.displayWidth=i.displayWidth,t.displayHeight=i.displayHeight,t},ak={},aO=nk;var ok=function(i){this.sizerEventsEnable&&(aO(i,this.getChildPrevState(i)),this.layoutedChildren.push(i))},or=ok;var hk=function(i,t,r,x,s,g,e,n){er(i,t,r,x,s,g),e!==void 0&&(i.x+=e),n!==void 0&&(i.y+=n),this.resetChildPositionState(i),this.sizerEventsEnable&&i.emit("sizer.postlayout",i,this)},hr=hk;var lk=Phaser.Display.Align.CENTER,uk=function(){if(this.backgroundChildren!==void 0)for(var i=this.backgroundChildren,t=this.left,r=this.top,x=this.width,s=this.height,g,e,n,p,f,u,l,a=0,o=i.length;a<o;a++)g=i[a],e=g.rexSizer,!e.hidden&&(n=e.padding,or.call(this,g),p=t+n.left,f=r+n.top,u=x-n.left-n.right,l=s-n.top-n.bottom,kt(g,u,l),hr.call(this,g,p,f,u,l,lk))},oO=uk;var fk=function(i,t){var r=typeof i;if(r==="string"){var x=i;if(i=this.getElement(x),!i)return console.error(`Can get element '${x}'`),this}else(i===void 0||r!="object")&&(t=i,i=this);return t===void 0&&(t=!0),i.input&&i.input._dragTopmostSizer?i.input.draggable=t:t&&(i.setInteractive(),i.scene.input.setDraggable(i),i.on("drag",function(s,g,e){var n=this.getTopmostSizer();n.x+=g-i.x,n.y+=e-i.y,n.emit("sizer.drag",s,g,e)},this).on("dragstart",function(s,g,e){var n=this.getTopmostSizer();n.emit("sizer.dragstart",s,g,e)},this).on("dragend",function(s,g,e,n){var p=this.getTopmostSizer();p.emit("sizer.dragend",s,g,e,n)},this),i.input._dragTopmostSizer=!0),this},hO=fk;var lO=Ji;var Ns=lO;var Xu={onClick(i,t,r,x){return i?(typeof i=="function"&&(x=r,r=t,t=i,i=this),i._click===void 0&&(i._click=new Ns(i,x)),i._click.on("click",t,r),this):this},offClick(i,t,r){return typeof i=="function"&&(r=t,t=i,i=this),i._click===void 0?this:(i._click.off("click",t,r),this)},enableClick(i,t){return i&&typeof i!="object"&&(t=i,i=this),i._click===void 0?this:(i._click.setEnable(t),this)},disableClick(i){return i&&typeof i!="object"&&(i=this),i._click===void 0?this:(i._click.setEnable(!1),this)}};var Wu=Phaser.Utils.Objects.GetValue,Jv=class extends Tt{constructor(t,r){super(t,r),this._enable=void 0;var x=Wu(r,"inputConfig",void 0);x&&t.setInteractive(x),this.resetFromJSON(r),this.boot()}resetFromJSON(t){return this.setEnable(Wu(t,"enable",!0)),this.setMode(Wu(t,"mode",1)),this.setClickInterval(Wu(t,"clickInterval",100)),this}boot(){var t=this.parent.scene;t.input.on("pointerdown",this.onPress,this),t.input.on("pointerup",this.onRelease,this)}shutdown(t){if(!this.isShutdown){var r=this.parent.scene;r.input.off("pointerdown",this.onPress,this),r.input.off("pointerup",this.onRelease,this),super.shutdown(t)}}get enable(){return this._enable}set enable(t){if(this._enable!==t){this._enable=t;var r=t?"enable":"disable";this.emit(r,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=dk[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}isPointerInside(t){var r=this.parent,x=r.input?Pn:ss;return x(r,t)}onPress(t){if(this.mode===0){if(!this.parent.willRender(t.camera))return;this.isPointerInside(t)||this.click(t.downTime,t)}}onRelease(t){if(this.mode===1){if(!this.parent.willRender(t.camera))return;this.isPointerInside(t)||this.click(t.upTime,t)}}click(t,r){if(!this.enable)return this;if(t===void 0)return this.emit("clickoutside",this,this.parent,r),this;var x=this.lastClickTime;return x!==void 0&&t-x<=this.clickInterval?this:(this.lastClickTime=t,this.emit("clickoutside",this,this.parent,r),this)}},dk={press:0,pointerdown:0,release:1,pointerup:1},uO=Jv;var fO=uO;var Do=fO;var dO={onClickOutside(i,t,r,x){return i?(typeof i=="function"&&(x=r,r=t,t=i,i=this),i._clickOutside===void 0&&(i._clickOutside=new Do(i,x)),i._clickOutside.on("clickoutside",t,r),this):this},offClickOutside(i,t,r){return typeof i=="function"&&(r=t,t=i,i=this),i._clickOutside===void 0?this:(i._clickOutside.off("clickoutside",t,r),this)},enableClickOutside(i,t){return i&&typeof i!="object"&&(t=i,i=this),i._clickOutside===void 0?this:(i._clickOutside.setEnable(t),this)},disableClickOutside(i){return i&&typeof i!="object"&&(i=this),i._clickOutside===void 0?this:(i._clickOutside.setEnable(!1),this)}};var $v=class extends Bu{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(t){return this.cooldownTime=t,this.cooldownMode=t!==void 0,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(t,r){this.remainderTime-=r,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>r?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}},cO=$v;var Qv=Phaser.Utils.Objects.GetValue,qv=class extends Tt{constructor(t,r){super(t,r),this._enable=void 0,this.cooldown=new cO,this.parent.setInteractive(Qv(r,"inputConfig",void 0)),this.resetFromJSON(r),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.prevIsInTouch=!1,this.isInTouching=!1,this.setEnable(Qv(t,"enable",!0)),this.setCooldown(Qv(t,"cooldown",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPointIn,this),t.on("pointerover",this.onPointIn,this),t.on("pointerup",this.onPointOut,this),t.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||(this.prevIsInTouch=!1,this.isInTouching=!1,this.pointer=void 0),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(t){this.cooldown.setCooldownTime(t)}setCooldown(t){return this.cooldownTime=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(t,r,x){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.isInTouching=!0)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0,this.isInTouching=!1)}preupdate(t,r){this.cooldown.update(t,r),!this.prevIsInTouch&&this.isInTouching&&this.emit("touchstart",this,this.parent),this.isInTouching&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer),this.prevIsInTouch&&!this.isInTouching&&this.emit("touchend",this,this.parent),this.prevIsInTouch=this.isInTouching}},pO=qv;var vO=pO;var Or=vO;var mO={isPointerInBounds(i){return i===void 0?i=this:typeof i=="string"&&(i=this.getElement(i)),i?ss(i):!1},onTouching(i,t,r,x){return i?(typeof i=="function"&&(x=r,r=t,t=i,i=this),i._inTouching===void 0&&(i._inTouching=new Or(i,x)),i._inTouching.on("intouch",t,r),this):this},offTouching(i,t,r){return typeof i=="function"&&(r=t,t=i,i=this),i._inTouching===void 0?this:(i._inTouching.off("intouch",t,r),this)},onTouchingEnd(i,t,r,x){return i?(typeof i=="function"&&(x=r,r=t,t=i,i=this),i._inTouching===void 0&&(i._inTouching=new Or(i,x)),i._inTouching.on("touchend",t,r),this):this},offTouchingEnd(i,t,r){return typeof i=="function"&&(r=t,t=i,i=this),i._inTouching===void 0?this:(i._inTouching.off("touchend",t,r),this)},enableTouching(i,t){return i&&typeof i!="object"&&(t=i,i=this),i._inTouching===void 0?this:(i._inTouching.setEnable(t),this)},disableTouching(i){return i&&typeof i!="object"&&(i=this),i._inTouching===void 0?this:(i._inTouching.setEnable(!1),this)}};var ck=function(i,t,r){for(var x,s=0,g=i.length;s<g;s++)if(x=i[s],!!bo(x,t,r))return x.pointToChild(t,r);return null},ku=ck;var pk=function(i,t,r,x,s,g,e){var n;s===void 0?n=x:n=ku(r,x,s),n&&i.emit(t,n,g,e)},ge=pk;var vk=Phaser.Utils.Objects.GetValue,mk=function(i){var t=vk(i,"down",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerdown",gk,this))},gk=function(i,t,r,x){var s=this._childrenInteractive;ge(s.eventEmitter,`${s.eventNamePrefix}down`,s.targetSizers,i.worldX,i.worldY,i,x)},gO=mk;var xk=Phaser.Utils.Objects.GetValue,yk=function(i){var t=xk(i,"up",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerup",Ck,this))},Ck=function(i,t,r,x){var s=this._childrenInteractive;ge(s.eventEmitter,`${s.eventNamePrefix}up`,s.targetSizers,i.worldX,i.worldY,i,x)},xO=yk;var Tk=Phaser.Utils.Objects.GetValue,Sk=function(i){var t=Tk(i,"over",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointermove",yO,this).on("pointerover",yO,this).on("pointerout",Pk,this))},yO=function(i,t,r,x){var s=this._childrenInteractive,g=ku(s.targetSizers,i.worldX,i.worldY),e=s.lastOverChild;g&&e&&g===e||(s.lastOverChild=g,ge(s.eventEmitter,`${s.eventNamePrefix}out`,s.targetSizers,e,void 0,i,x),ge(s.eventEmitter,`${s.eventNamePrefix}over`,s.targetSizers,g,void 0,i,x))},Pk=function(i,t){var r=this._childrenInteractive,x=r.lastOverChild;r.lastOverChild=null,ge(r.eventEmitter,`${r.eventNamePrefix}out`,r.targetSizers,x,void 0,i,t)},CO=Sk;var Ek=Phaser.Utils.Objects.GetValue,Mk=function(i){var t=Ek(i,"click",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("threshold")||(t.threshold=10);var r=this._childrenInteractive;this._click=new Ji(this,t),this._click.on("click",function(x,s,g,e){ge(r.eventEmitter,`${r.eventNamePrefix}click`,r.targetSizers,g.worldX,g.worldY,g,e)},this)}},TO=Mk;var _v=Phaser.Utils.Objects.GetValue,em=class extends Wr{constructor(t,r){var x=Ol(t);x===t&&(t=void 0),super(x,r),this.gameObject=t,t&&t.setInteractive(_v(r,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(r),this.boot()}resetFromJSON(t){return this.setEnable(_v(t,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds(_v(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=tm,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){!this.scene||(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,r){if(!!this.enable&&this.pointer===void 0){var x=this.bounds?this.bounds.contains(t.x,t.y):!0;!x||this.pointer!==t&&(this.pointer=t,this.lastPointer=t,this.movedState=!1,this.tracerState=SO,this.gameObject===void 0&&(this.isTouchingAnyObject=r.length>0),this.onDragStart())}}onPointerUp(t){if(!!this.enable){var r=this.bounds?this.bounds.contains(t.x,t.y):!0;!r||this.pointer===t&&(this.pointer=void 0,this.movedState=!1,this.tracerState=tm,this.onDragEnd())}}onPointerMove(t){if(!!this.enable&&t.isDown){var r=this.bounds?this.bounds.contains(t.x,t.y):!0,x=this.pointer===t;!x&&r||(x&&!r?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===SO&&this.onDragEnd(),this.pointer=void 0,this.tracerState=tm,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,r){}postUpdate(t,r){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=Ak,this}},tm=0,SO=1,Ak="IDLE",ns=em;var Vs=Phaser.Utils.Objects.GetValue,Rk=Phaser.Math.Distance.Between,im=class extends ns{constructor(t,r){super(t,r);var x=this,s={states:{IDLE:{enter:function(){x.stop(),x.tapsCount=0,x.x=0,x.y=0,x.worldX=0,x.worldY=0},exit:function(){var g=x.lastPointer;x.x=g.x,x.y=g.y,x.worldX=g.worldX,x.worldY=g.worldY}},BEGIN:{enter:function(){x.start(),x.tapsCount=0,x.emit("tappingstart",x,x.gameObject,x.lastPointer)}},RECOGNIZED:{enter:function(){x.start(),x.emit("tap",x,x.gameObject,x.lastPointer),x.emit(`${x.tapsCount}tap`,x,x.gameObject,x.lastPointer)}}},init:function(){this.state=zs},eventEmitter:!1};this.setRecongizedStateObject(new Pe(s))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(Vs(t,"time",250)),this.setTapInterval(Vs(t,"tapInterval",200)),this.setDragThreshold(Vs(t,"threshold",9)),this.setTapOffset(Vs(t,"tapOffset",10));var r=Vs(t,"taps",void 0);return r!==void 0?this.setTaps(r):(this.setMaxTaps(Vs(t,"maxTaps",void 0)),this.setMinTaps(Vs(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case zs:this.state=ha;break;case ha:var t=this.lastPointer,r=Rk(t.upX,t.upY,t.x,t.y);r>this.tapOffset&&(this.state=la,this.state=ha);break;case la:this.state=ha;break}}onDragEnd(){this.state===ha&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=la))}onDrag(){this.state!==zs&&this.pointer.getDistance()>this.dragThreshold&&(this.state=zs)}preUpdate(t,r){if(!(!this.isRunning||!this.enable)&&this.state===ha){var x=this.lastPointer;if(x.isDown){var s=t-x.downTime;s>this.holdTime&&(this.state=zs)}else{var g=t-x.upTime;g>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=la:this.state=zs)}}}postUpdate(t,r){!this.isRunning||!this.enable||this.state===la&&(this.state=zs)}get isTapped(){return this.state===la}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,r){return r===void 0&&(r=t),this.setMinTaps(t).setMaxTaps(r),this}},zs="IDLE",ha="BEGIN",la="RECOGNIZED",rm=im;var PO=Phaser.Utils.Objects.GetValue,nm=class extends ns{constructor(t,r){super(t,r);var x=this,s={states:{IDLE:{enter:function(){x.x=0,x.y=0,x.worldX=0,x.worldY=0},exit:function(){var g=x.lastPointer;x.x=g.x,x.y=g.y,x.worldX=g.worldX,x.worldY=g.worldY}},BEGIN:{enter:function(){x.start()},exit:function(){x.stop()}},RECOGNIZED:{enter:function(){x.emit("pressstart",x,x.gameObject,x.lastPointer)},exit:function(){x.emit("pressend",x,x.gameObject,x.lastPointer)}}},init:function(){this.state=Hu},eventEmitter:!1};this.setRecongizedStateObject(new Pe(s))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(PO(t,"threshold",9)),this.setHoldTime(PO(t,"time",251)),this}onDragStart(){this.state=EO,this.holdTime===0&&(this.state=sm)}onDragEnd(){this.state=Hu}onDrag(){this.state!==Hu&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Hu)}preUpdate(t,r){if(!(!this.isRunning||!this.enable)&&this.state===EO){var x=t-this.pointer.downTime;x>=this.holdTime&&(this.state=sm)}}get isPressed(){return this.state===sm}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}},Hu="IDLE",EO="BEGIN",sm="RECOGNIZED",am=nm;var Ok=Phaser.Utils.Objects.GetValue,om=class extends ns{constructor(t,r){super(t,r);var x=this,s={states:{IDLE:{},BEGIN:{enter:function(){var g=x.pointer;x.startX=g.x,x.startY=g.y,x.startWorldX=g.worldX,x.startWorldY=g.worldY}},RECOGNIZED:{enter:function(){x.emit("panstart",x,x.gameObject,x.lastPointer)},exit:function(){var g=x.lastPointer;x.endX=g.x,x.endY=g.y,x.endWorldX=g.worldX,x.endWorldY=g.worldY,x.emit("panend",x,x.gameObject,x.lastPointer)}}},init:function(){this.state=MO},eventEmitter:!1};this.setRecongizedStateObject(new Pe(s))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Ok(t,"threshold",10)),this}onDragStart(){this.state=AO,this.dragThreshold===0&&(this.state=Ku)}onDragEnd(){this.state=MO}onDrag(){switch(this.state){case AO:this.pointer.getDistance()>=this.dragThreshold&&(this.state=Ku);break;case Ku:var t=this.pointer.position,r=this.pointer.prevPosition;this.dx=t.x-r.x,this.dy=t.y-r.y;var x=this.pointer;this.x=x.x,this.y=x.y,this.worldX=x.worldX,this.worldY=x.worldY,this.emit("pan",this,this.gameObject,this.lastPointer);break}}get isPanned(){return this.state===Ku}setDragThreshold(t){return this.dragThreshold=t,this}},MO="IDLE",AO="BEGIN",Ku="RECOGNIZED",hm=om;var wk=Phaser.Math.Distance.Between,Lk=Phaser.Math.Angle.Between,RO={getDt:function(){var i=Rn(this.scene);return i},getVelocity:function(){var i=this.pointer.position,t=this.pointer.prevPosition,r=wk(t.x,t.y,i.x,i.y),x=r/(this.getDt()*.001);return x},getVelocityX:function(){var i=this.pointer.position,t=this.pointer.prevPosition,r=Math.abs(i.x-t.x),x=r/(this.getDt()*.001);return x},getVelocityY:function(){var i=this.pointer.position,t=this.pointer.prevPosition,r=Math.abs(i.y-t.y),x=r/(this.getDt()*.001);return x},getVelocityAngle:function(){var i=this.pointer.position,t=this.pointer.prevPosition,r=Lk(t.x,t.y,i.x,i.y);return r}};var OO={"up&down":0,"left&right":1,"4dir":2,"8dir":3};var Fk=function(i,t,r){switch(r===void 0?r={}:r===!0&&(r=bk),r.left=!1,r.right=!1,r.up=!1,r.down=!1,i=(i+360)%360,t){case 0:i<180?r.down=!0:r.up=!0;break;case 1:i>90&&i<=270?r.left=!0:r.right=!0;break;case 2:i>45&&i<=135?r.down=!0:i>135&&i<=225?r.left=!0:i>225&&i<=315?r.up=!0:r.right=!0;break;case 3:i>22.5&&i<=67.5?(r.down=!0,r.right=!0):i>67.5&&i<=112.5?r.down=!0:i>112.5&&i<=157.5?(r.down=!0,r.left=!0):i>157.5&&i<=202.5?r.left=!0:i>202.5&&i<=247.5?(r.left=!0,r.up=!0):i>247.5&&i<=292.5?r.up=!0:(i>292.5&&i<=337.5&&(r.up=!0),r.right=!0);break}return r},bk={},wO=Fk;var lm=Phaser.Utils.Objects.GetValue,Dk=Phaser.Math.RadToDeg,ju=class extends ns{constructor(t,r){super(t,r);var x=this,s={states:{IDLE:{enter:function(){x.x=0,x.y=0,x.worldX=0,x.worldY=0},exit:function(){var g=x.lastPointer;x.x=g.x,x.y=g.y,x.worldX=g.worldX,x.worldY=g.worldY}},BEGIN:{enter:function(){x.validDrag=!1}},RECOGNIZED:{enter:function(){x.start(),x.updateDirectionStates(),x.emit("swipe",x,x.gameObject,x.lastPointer)},exit:function(){x.stop(),x.clearDirectionStates()}}},init:function(){this.state=um},eventEmitter:!1};this.setRecongizedStateObject(new Pe(s)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(lm(t,"threshold",10)),this.setVelocityThreshold(lm(t,"velocityThreshold",1e3)),this.setDirectionMode(lm(t,"dir","8dir")),this}onDragStart(){this.state=LO}onDragEnd(){this.state=um}onDrag(){this.state===LO&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=fm))}postUpdate(t,r){!this.isRunning||!this.enable||this.state===fm&&(this.state=um)}get isSwiped(){return this.state===fm}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity();break}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return typeof t=="string"&&(t=OO[t]),this.dirMode=t,this}updateDirectionStates(){var t=Dk(this.getVelocityAngle());return wO(t,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}};Object.assign(ju.prototype,RO);var um="IDLE",LO="BEGIN",fm="RECOGNIZED",dm=ju;var cm=Phaser.Utils.Objects.GetValue,Ik=Phaser.Utils.Array.SpliceOne,Bk=Phaser.Math.Distance.Between,Gk=Phaser.Math.Angle.Between,Ju=class{constructor(t,r){var x=t.input.manager.pointersTotal-1;x<2&&t.input.addPointer(2-x),this.scene=t,this.setEventEmitter(cm(r,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(r),this.boot()}resetFromJSON(t){return this.setEnable(cm(t,"enable",!0)),this.bounds=cm(t,"bounds",void 0),this.tracerState=Zu,this.pointers.length=0,we(this.movedState),this}boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){!this.scene||(this.destroyEventEmitter(),this.pointers.length=0,we(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(!!this.enable&&this.pointers.length!==2){var r=this.bounds?this.bounds.contains(t.x,t.y):!0;if(!!r){var x=this.pointers.indexOf(t);if(x===-1)switch(this.movedState[t.id]=!1,this.pointers.push(t),this.tracerState){case Zu:this.tracerState=Bo,this.onDrag1Start();break;case Bo:this.tracerState=lr,this.onDrag2Start();break}}}}onPointerUp(t){if(!!this.enable){var r=this.bounds?this.bounds.contains(t.x,t.y):!0;if(!!r){var x=this.pointers.indexOf(t);if(x!==-1)switch(delete this.movedState[t.id],Ik(this.pointers,x),this.tracerState){case Bo:this.tracerState=Zu,this.onDrag1End();break;case lr:this.tracerState=Bo,this.onDrag2End(),this.onDrag1Start();break}}}}onPointerMove(t){if(!!this.enable&&t.isDown){var r=this.bounds?this.bounds.contains(t.x,t.y):!0,x=this.pointers.indexOf(t)!==-1;if(!(!x&&r)){if(x&&!r)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case Bo:this.onDrag1();break;case lr:this.onDrag2();break}}}}dragCancel(){return this.tracerState===lr&&this.onDrag2End(),this.pointers.length=0,we(this.movedState),this.tracerState=Zu,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==lr)return 0;var t=this.pointers[0],r=this.pointers[1];return Bk(t.x,t.y,r.x,r.y)}get angleBetween(){if(this.tracerState!==lr)return 0;var t=this.pointers[0],r=this.pointers[1];return Gk(t.x,t.y,r.x,r.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var r=t.position,x=t.prevPosition;Io.x=r.x-x.x,Io.y=r.y-x.y}else Io.x=0,Io.y=0;return Io}get centerX(){if(this.tracerState!==lr)return 0;var t=this.pointers[0].position,r=this.pointers[1].position;return(t.x+r.x)/2}get centerY(){if(this.tracerState!==lr)return 0;var t=this.pointers[0].position,r=this.pointers[1].position;return(t.y+r.y)/2}get prevCenterX(){if(this.tracerState!==lr)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,r=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+r.x)/2}get prevCenterY(){if(this.tracerState!==lr)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,r=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+r.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=Nk,this}};Object.assign(Ju.prototype,ci);var Io={},Zu=0,Bo=1,lr=2,Nk="IDLE",$u=Ju;var Vk=Phaser.Utils.Objects.GetValue,pm=class extends $u{constructor(t,r){super(t,r);var x=this,s={states:{IDLE:{enter:function(){x.prevDistance=void 0,x.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){x.emit("pinchstart",x)},exit:function(){x.emit("pinchend",x)}}},init:function(){this.state=FO},eventEmitter:!1};this.setRecongizedStateObject(new Pe(s))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Vk(t,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=bO,this.dragThreshold===0&&(this.state=Qu)}onDrag2End(){this.state=FO}onDrag2(){switch(this.state){case bO:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=Qu}break;case Qu:var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t;break}}get isPinched(){return this.state===Qu}setDragThreshold(t){return this.dragThreshold=t,this}},FO="IDLE",bO="BEGIN",Qu="RECOGNIZED",vm=pm;var zk=Phaser.Math.RotateAround,Yk=function(i,t,r,x){return zk(i,t,r,x),i.rotation+=x,i},mm=Yk;var Uk=function(i,t,r,x){return x===void 0?x={}:x===!0&&(x=Xk),r.getWorldPoint(i,t,x),x},Xk={},DO=Uk;var Wk=function(i,t){if(!this.isRotation)return this;t===void 0&&(t=this.pointers[0].camera);var r=this.movementCenterX,x=this.movementCenterY,s=DO(this.centerX,this.centerY,t,!0),g=s.x,e=s.y,n=this.rotation;if(Array.isArray(i))for(var p=i,f=0,u=p.length;f<u;f++)i=p[f],i.x+=r,i.y+=x,mm(i,g,e,n);else i.x+=r,i.y+=x,mm(i,g,e,n);return this},IO=Wk;var kk=Phaser.Utils.Objects.GetValue,gm=Phaser.Math.Angle.WrapDegrees,BO=Phaser.Math.Angle.ShortestBetween,xm=Phaser.Math.RadToDeg,Hk=Phaser.Math.DegToRad,_u=class extends $u{constructor(t,r){super(t,r);var x=this,s={states:{IDLE:{enter:function(){x.prevAngle=void 0,x.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){x.emit("rotatestart",x)},exit:function(){x.emit("rotateend",x)}}},init:function(){this.state=GO},eventEmitter:!1};this.setRecongizedStateObject(new Pe(s))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(kk(t,"threshold",0)),this}onDrag2Start(){this.prevAngle=gm(xm(this.angleBetween)),this.state=NO,this.dragThreshold===0&&(this.state=qu)}onDrag2End(){this.state=GO}onDrag2(){switch(this.state){case NO:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=gm(xm(this.angleBetween));this.angle=BO(this.prevAngle,t),this.prevAngle=t,this.state=qu}break;case qu:var t=gm(xm(this.angleBetween));this.angle=BO(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this);break}}get isRotated(){return this.state===qu}get rotation(){return Hk(this.angle)}setDragThreshold(t){return this.dragThreshold=t,this}},Kk={spinObject:IO};Object.assign(_u.prototype,Kk);var GO="IDLE",NO="BEGIN",qu="RECOGNIZED",ym=_u;var Ys=rm;var jk=Phaser.Utils.Objects.GetValue,Zk=function(i){var t=jk(i,"tap",void 0);if(t!==!1){t===!0&&(t=void 0);var r=this._childrenInteractive;this._tap=new Ys(this,t),this._tap.on("tap",function(x,s,g){ge(r.eventEmitter,`${r.eventNamePrefix}${x.tapsCount}tap`,r.targetSizers,x.worldX,x.worldY,g)},this)}},VO=Zk;var Us=am;var Jk=Phaser.Utils.Objects.GetValue,$k=function(i){var t=Jk(i,"press",void 0);if(t!==!1){t===!0&&(t=void 0);var r=this._childrenInteractive;this._press=new Us(this,t),this._press.on("pressstart",function(x,s,g){ge(r.eventEmitter,`${r.eventNamePrefix}pressstart`,r.targetSizers,x.worldX,x.worldY,g)},this).on("pressend",function(x,s,g){ge(r.eventEmitter,`${r.eventNamePrefix}pressend`,r.targetSizers,x.worldX,x.worldY,g)},this)}},zO=$k;var Xs=dm;var Qk=Phaser.Utils.Objects.GetValue,qk=function(i){var t=Qk(i,"swipe",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("dir")||(t.dir="4dir");var r=this._childrenInteractive;this._swipe=new Xs(this,t),this._swipe.on("swipe",function(x,s,g){var e=x.left?"left":x.right?"right":x.up?"up":"down";ge(r.eventEmitter,`${r.eventNamePrefix}swipe${e}`,r.targetSizers,x.worldX,x.worldY,g)},this)}},YO=qk;var Cm=Phaser.Utils.Objects.GetValue,_k=function(i,t){return i.setInteractive(),i._childrenInteractive={targetSizers:Cm(t,"targets",[i]),eventEmitter:Cm(t,"eventEmitter",i),eventNamePrefix:Cm(t,"inputEventPrefix","child.")},gO.call(i,t),xO.call(i,t),CO.call(i,t),TO.call(i,t),VO.call(i,t),zO.call(i,t),YO.call(i,t),i},ua=_k;var tH=function(i){return ua(this,i),this},UO=tH;var eH=function(){for(var i=this.getAllChildren([this]),t=0,r=i.length;t<r;t++){var x=i[t];x.emit.apply(x,arguments)}return this},XO=eH;var WO={getSizerConfig:zA,getChildPrevState:YA,pushIntoBounds:UA,drawBounds:_A,resolveWidth:Zn,resolveChildrenWidth:aR,resolveHeight:Jn,postResolveSize:oR,getChildWidth:hR,getChildHeight:lR,getExpandedChildWidth:uR,getExpandedChildHeight:fR,getChildrenWidth:dR,getChildrenHeight:cR,addChildrenMap:bv,addElement:bv,removeChildrenMap:rR,getElement:sR,getAllChildrenSizers:pR,getChildrenSizers:vR,preLayout:nr,layout:gR,runLayout:xR,layoutChildren:yR,runWidthWrap:Fu,layoutBackgrounds:oO,postLayout:CR,setAnchor:SR,isInTouching:rO,pointToChild:nO,setDraggable:hO,setChildrenInteractive:UO,broadcastEvent:XO};Object.assign(WO,nR,eR,iR,sr,wo,FR,GR,zR,UR,Xu,dO,mO,WR,oa,mR);var kO=WO;var fa=Phaser.Utils.Objects.GetValue,tf=class extends De{constructor(t,r,x,s,g,e){super(t,r,x,1,1),this.isRexSizer=!0,this.setMinSize(s,g),this.setName(fa(e,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap={},this.layoutedChildren=void 0;var n=fa(e,"anchor",void 0);n&&this.setAnchor(n),this.setInnerPadding(fa(e,"space",0));var p=fa(e,"draggable",!1);p&&this.setDraggable(p),this.setSizerEventsEnable(fa(e,"sizerEvents",!1)),this.setDirty(!0),fa(e,"enableLayer",!1)&&this.enableLayer()}destroy(t){if(!!this.scene){if(t)for(var r=this.getAllChildrenSizers([this]),x=0,s=r.length;x<s;x++)r[x].sizerEventsEnable=!1;super.destroy(t),we(this.backgroundChildren),we(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(t,r){return this.setMinWidth(t).setMinHeight(r),this}setMinWidth(t){return t==null&&(t=0),this.minWidth=t,this}setMinHeight(t){return t==null&&(t=0),this.minHeight=t,this}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSizerEventsEnable(t){return t===void 0&&(t=!0),this.sizerEventsEnable=t,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-mt(this)*this.originX}set left(t){this.x+=t-this.left}alignLeft(t){return this.left=t,this}get right(){return this.left+mt(this)}set right(t){this.x+=t-this.right}alignRight(t){return this.right=t,this}get centerX(){return this.left+mt(this)/2}set centerX(t){this.x+=t-this.centerX}alignCenterX(t){return this.centerX=t,this}get top(){return this.y-dt(this)*this.originY}set top(t){this.y+=t-this.top}alignTop(t){return this.top=t,this}get bottom(){return this.top+dt(this)}set bottom(t){this.y+=t-this.bottom}alignBottom(t){return this.bottom=t,this}get centerY(){return this.top+dt(this)/2}set centerY(t){this.y+=t-this.centerY}alignCenterY(t){return this.centerY=t,this}get innerLeft(){return this.left+this.space.left}get innerRight(){return this.right-this.space.right}get innerTop(){return this.top+this.space.top}get innerBottom(){return this.bottom-this.space.bottom}get innerWidth(){return this.width-this.space.left-this.space.right}get innerHeight(){return this.height-this.space.top-this.space.bottom}get minInnerWidth(){var t=this.minWidth-this.space.left-this.space.right;return Math.max(t,0)}get minInnerHeight(){var t=this.minHeight-this.space.top-this.space.bottom;return Math.max(t,0)}};Object.assign(tf.prototype,kO);var Ti=tf;var iH=function(){if(this.rexSizer.hidden)return 0;var i=0,t=this.sizerChildren,r,x,s;for(var g in t)r=t[g],x=r.rexSizer.padding,s=this.getChildWidth(r)+x.left+x.right,i=Math.max(s,i);return i+this.space.left+this.space.right},HO=iH;var rH=function(){if(this.rexSizer.hidden)return 0;var i=0,t=this.sizerChildren,r,x,s;for(var g in t)r=t[g],s=r.isRexSizer?Math.max(r.minHeight,r.childrenHeight):r.minHeight!==void 0?r.minHeight:dt(r),x=r.rexSizer.padding,s+=x.top+x.bottom,i=Math.max(s,i);return i+this.space.top+this.space.bottom},KO=rH;var sH=function(i,t){t===void 0&&(t=this.width);var r,x=i.rexSizer;if(x.expandWidth){var s=t-this.space.left-this.space.right,g=x.padding;r=s-g.left-g.right}return r},jO=sH;var nH=function(i,t){t===void 0&&(t=this.height);var r,x=i.rexSizer;if(x.expandHeight){var s=t-this.space.top-this.space.bottom,g=x.padding;r=s-g.top-g.bottom}return r},ZO=nH;var aH=function(i){i===void 0&&(i=[]);var t=this.sizerChildren,r;for(var x in t)r=t[x],r.isRexSizer&&i.push(r);return i},JO=aH;var oH=function(i,t){i.width<i.childrenWidth&&console.warn(`Layout width error: Parent=${t.constructor.name}, Child=${i.constructor.name}`),i.height<i.childrenHeight&&console.warn(`Layout height error: Parent=${t.constructor.name}, Child=${i.constructor.name}`)},da=oH;var hH=function(){var i,t,r,x=this.innerLeft,s=this.innerTop,g=this.innerWidth,e=this.innerHeight,n,p,f,u,l,a,o=this.sizerChildren;for(var c in o)i=o[c],!i.rexSizer.hidden&&(t=i.rexSizer,r=t.padding,or.call(this,i),i.isRexSizer?(i.runLayout(this,this.getExpandedChildWidth(i),this.getExpandedChildHeight(i)),da(i,this)):(l=void 0,a=void 0,t.expandWidth&&(l=g-r.left-r.right),t.expandHeight&&(a=e-r.top-r.bottom),kt(i,l,a)),n=x+r.left,f=g-r.left-r.right,p=s+r.top,u=e-r.top-r.bottom,hr.call(this,i,n,p,f,u,t.align,t.alignOffsetX,t.alignOffsetY))},$O=hH;var QO=Phaser.Utils.Objects.IsPlainObject,ur=Phaser.Utils.Objects.GetValue,qO=Phaser.Display.Align.CENTER,lH=Phaser.Utils.String.UUID,uH=function(i,t,r,x,s,g,e,n,p){if(ir.call(this,i),QO(t)){var u=t;t=ur(u,"key",void 0),r=ur(u,"align",qO),n=ur(u,"offsetX",0),p=ur(u,"offsetY",0),x=ur(u,"padding",0),s=ur(u,"expand",!0),i.isRexSizer||(g=ur(u,"minWidth",i._minWidth),e=ur(u,"minHeight",i._minHeighted))}var f=t!==void 0;f||(t=lH()),typeof r=="string"&&(r=qi[r]),r===void 0&&(r=qO),n===void 0&&(n=0),p===void 0&&(p=0),x===void 0&&(x=0),s===void 0&&(s=!0),i.isRexSizer||(g===void 0&&(g=i._minWidth),e===void 0&&(e=i._minHeight));var u=this.getSizerConfig(i);return u.align=r,u.alignOffsetX=n,u.alignOffsetY=p,u.padding=gi(x),QO(s)?(u.expandWidth=ur(s,"width",!1),u.expandHeight=ur(s,"height",!1)):(u.expandWidth=s,u.expandHeight=s),i.isRexSizer||(u.expandWidth&&(i.minWidth=g===void 0?mt(i):g),u.expandHeight&&(i.minHeight=e===void 0?dt(i):e)),this.sizerChildren.hasOwnProperty(t)&&this.sizerChildren[t].destroy(),this.sizerChildren[t]=i,f&&this.addChildrenMap(t,i),this},_O={add:uH};var fH=De.prototype.clear,dH=function(i){this.backgroundChildren&&(this.backgroundChildren.length=0);var t=!i&&this.sizerEventsEnable,r;if(t&&(r=this.getChildren([])),fH.call(this,i),t)for(var x,s=0,g=r.length;s<g;s++)x=r[s],x.emit("sizer.remove",x,this),this.emit("remove",x,this);return this},as=dH;var tw={remove(i,t){var r;if(typeof i=="string"){if(r=i,i=this.sizerChildren[r],!i)return this}else{if(this.getParentSizer(i)!==this)return this;r=this.childToKey(i)}return r&&(delete this.sizerChildren[r],this.childrenMap.hasOwnProperty(r)&&delete this.childrenMap[r]),rr.call(this,i,t),this},removeAll(i){for(var t in this.sizerChildren)this.remove(t,i);return this},clear(i){for(var t in this.sizerChildren)delete this.sizerChildren[t],this.childrenMap.hasOwnProperty(t)&&delete this.childrenMap[t];return as.call(this,i),this}};var ew={getChildrenWidth:HO,getChildrenHeight:KO,getExpandedChildWidth:jO,getExpandedChildHeight:ZO,getChildrenSizers:JO,layoutChildren:$O};Object.assign(ew,_O,tw);var iw=ew;var cH=function(i,t){if(Array.isArray(i))return i.indexOf(t);for(var r in i)if(i[r]===t)return r;return null},os=cH;var rw=Phaser.Utils.Objects.IsPlainObject,ca=Phaser.Utils.Objects.GetValue,ef=class extends Ti{constructor(t,r,x,s,g,e){rw(r)?(e=r,r=ca(e,"x",0),x=ca(e,"y",0),s=ca(e,"width",void 0),g=ca(e,"height",void 0)):rw(s)&&(e=s,s=ca(e,"width",void 0),g=ca(e,"height",void 0)),super(t,r,x,s,g,e),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(t){if(typeof t=="string"){var r=t;if(this.sizerChildren.hasOwnPropery(r))return r}else return os(this.sizerChildren,t);return null}};Object.assign(ef.prototype,iw);var Nt=ef;var pH=Phaser.Math.Distance.Between,vH=function(i,t,r){var x=i.width/2;return pH(x,x,t,r)<=x},pa=vH;var mH=Phaser.Math.Angle.Between,gH=Phaser.Math.Angle.Normalize,sw=function(i,t,r){if(!!this.enable&&!!i.isDown){var x=this.sizerChildren.knob;if(!!pa(x,t,r)){var s=x.width/2,g=x.startAngle,e=mH(s,s,t,r),n=x.anticlockwise?g-e:e-g,p=gH(n)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-p)<.1?this.value=p:this.easeValueTo(p)}}},xH=function(){var i=this.sizerChildren.knob;i.on("pointerdown",sw,this).on("pointermove",sw,this).setInteractive()},nw=xH;var aw=Phaser.Math.Angle.Between,yH=Phaser.Math.Angle.Wrap,CH=function(i,t,r){if(!(!this.enable||this.panPointer)){var x=this.sizerChildren.knob;!pa(x,t,r)||ow.call(this,i)}},TH=function(i,t,r){if(!!this.enable&&!!i.isDown){var x=this.sizerChildren.knob;switch(this.panState){case Tm:pa(x,t,r)&&ow.call(this,i);break;case lw:pa(x,t,r)?PH.call(this):hw.call(this);break}}},SH=function(i,t,r){!this.enable||this.panPointer!==i||hw.call(this)},ow=function(i){this.panPointer=i,this.panState=lw},hw=function(){this.panPointer=void 0,this.panState=Tm},PH=function(){var i=this.panPointer.prevPosition,t=this.panPointer.position,r=this.sizerChildren.knob,x=aw(r.x,r.y,i.x,i.y),s=aw(r.x,r.y,t.x,t.y),g=r.anticlockwise?x-s:s-x,e=yH(g)/(Math.PI*2);this.stopEaseValue(),this.value+=e},Tm=0,lw=1,EH=function(){var i=this.sizerChildren.knob;i.on("pointerdown",CH,this).on("pointermove",TH,this).on("pointerup",SH,this).setInteractive(),this.panPointer=void 0,this.panState=Tm},uw=EH;var MH=function(i,t){return this.textFormatCallback=i,this.textFormatCallbackScope=t,this},fw=function(i){i===void 0&&(i=this.value);var t;return this.textFormatCallbackScope?t=this.textFormatCallback(i):t=this.textFormatCallback.call(this.textFormatCallbackScope,i),t},AH=function(i){var t=this.sizerChildren.text;return t&&this.textFormatCallback&&(t.setText(fw.call(this,i)),t.layout&&t.layout()),this},dw={setTextFormatCallback:MH,getFormatText:fw,updateText:AH};var Di=Phaser.Utils.Objects.GetValue,RH=Phaser.Math.Snap.To,rf=class extends ke(Nt){constructor(t,r){r===void 0&&(r={}),super(t,r),this.type="rexKnob",this.bootProgressBase(r);var x=Di(r,"background",void 0),s=Di(r,"text",void 0);x&&this.addBackground(x),s&&(r.textColor=void 0,r.textStrokeColor=void 0,this.setTextFormatCallback(Di(r,"textFormatCallback",void 0),Di(r,"textFormatCallbackScope",void 0)));var g=new Po(t,r);g.setDepth(Di(r,"knobDepth",0)),g._value=-1,t.add.existing(g),this.add(g,"knob"),s&&(this.add(s,"text","center",0,!1),t.children.moveBelow(g,s)),this.addChildrenMap("background",x),this.addChildrenMap("knob",g),this.addChildrenMap("text",s),this.setEnable(Di(r,"enable",void 0)),this.setGap(Di(r,"gap",void 0)),this.setValue(Di(r,"value",0),Di(r,"min",void 0),Di(r,"max",void 0));var e=Di(r,"input",0);switch(typeof e=="string"&&(e=OH[e]),e){case 0:uw.call(this);break;case 1:nw.call(this);break}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this.sizerChildren.knob.value}set value(t){this.gap!==void 0&&(t=RH(t,this.gap));var r=this.value;this.sizerChildren.knob.value=t;var x=this.value;r!==x&&(this.updateText(),this.eventEmitter.emit("valuechange",x,r,this.eventEmitter))}},OH={pan:0,drag:0,click:1,none:-1};Object.assign(rf.prototype,dw);var Go=rf;J.register("knob",function(i){var t=new Go(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Knob",Go);var wH={arc:Sr,circle:wn,curve:qp,ellipse:tv,line:iv,lines:Fi,rectangle:av,roundRectangle:_r,triangle:lv},cw=Phaser.Utils.Objects.GetValue,LH=Phaser.Utils.Objects.IsPlainObject,FH=function(){for(var i=this.getShapes(),t=0,r=i.length;t<r;t++)i[t].lineStyle().fillStyle()},pw={createShape(i,t){var r=wH[i],x=new r;return t&&x.setName(t),x},buildShapes(i){var t=cw(i,"create",void 0);if(LH(t)){var r=t;for(var x in r){var s=r[x];switch(typeof s){case"number":for(var g=0;g<s;g++)this.addShape(this.createShape(x));break;case"string":this.addShape(this.createShape(x,s));break;default:for(var e=s,g=0,n=e.length;g<n;g++)this.addShape(this.createShape(x,e[g]));break}}}else if(Array.isArray(t))for(var r=t,g=0,n=r.length;g<n;g++){var p=r[g];this.addShape(this.createShape(p.type,p.name))}else typeof t=="function"&&t.call(this);this.setUpdateShapesCallback(cw(i,"update"))},setUpdateShapesCallback(i){return i===void 0&&(i=FH),this.dirty=this.dirty||this.updateCallback!==i,this.updateCallback=i,this},updateShapes(){this.updateCallback.call(this)}};var vw=Phaser.GameObjects.Components.TransformMatrix,bH=Phaser.Math.TransformXY,DH=function(i,t,r,x,s){x===void 0&&(x=i.scene.cameras.main),s===void 0?s={}:s===!0&&(s=IH);var g=x.scrollX,e=x.scrollY,n=t+g*i.scrollFactorX-g,p=r+e*i.scrollFactorY-e;return i.parentContainer?(sf===void 0&&(sf=new vw,mw=new vw),i.getWorldTransformMatrix(sf,mw),sf.applyInverse(n,p,s)):bH(n,p,i.x,i.y,i.rotation,i.scaleX,i.scaleY,s),s.x+=i.displayOriginX,s.y+=i.displayOriginY,s},sf,mw,IH={},gw=DH;var No=Phaser.Utils.Objects.GetValue,BH=Phaser.Utils.Objects.IsPlainObject,nf=class extends mi{constructor(t,r,x,s,g,e){BH(r)&&(e=r,r=No(e,"x",0),x=No(e,"y",0),s=No(e,"width",2),g=No(e,"height",2)),super(t,r,x,s,g),this.type=No(e,"type","rexCustomShapes"),this.buildShapes(e)}get centerX(){return this.width/2}get centerY(){return this.height/2}worldToLocalXY(t,r,x,s){return typeof x=="boolean"&&(s=x,x=void 0),gw(this,t,r,x,s)}};Object.assign(nf.prototype,pw);var af=nf;var xw=af;var Sm=xw;J.register("customShapes",function(i,t,r,x,s){var g=new Sm(this.scene,i,t,r,x,s);return this.scene.add.existing(g),g});Z(window,"RexPlugins.UI.CustomShapes",Sm);var Vo=Phaser.Utils.Objects.GetValue,GH=Phaser.Utils.Objects.IsPlainObject,Pm=class extends ke(af){constructor(t,r,x,s,g,e){GH(r)&&(e=r,r=Vo(e,"x",0),x=Vo(e,"y",0),s=Vo(e,"width",2),g=Vo(e,"height",2)),e===void 0&&(e={}),e.type||(e.type="rexCustomProgress"),super(t,r,x,s,g,e),this.bootProgressBase(e),this.setValue(Vo(e,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}},yw=Pm;var Cw=yw;var Em=Cw;J.register("customProgress",function(i,t,r,x,s){var g=new Em(this.scene,i,t,r,x,s);return this.scene.add.existing(g),g});Z(window,"RexPlugins.UI.CustomProgress",Em);var Tw={setTransitionStartCallback(i,t){return this.onStartCallback=i,this.onStartCallbackScope=t,this},setTransitionProgressCallback(i,t){return this.onProgressCallback=i,this.onProgressCallbackScope=t,this},setTransitionCompleteCallback(i,t){return this.onCompleteCallback=i,this.onCompleteCallbackScope=t,this}};var NH=Phaser.Utils.Objects.IsPlainObject,Si=Phaser.Utils.Objects.GetValue,VH={out:0,in:1},Sw={setTransitionDirection(i){return typeof i=="string"&&(i=VH[i]),this.dir=i,this},setDuration(i){return this.duration=i,this},setEaseFunction(i){return this.easeFunction=i,this},setNextTexture(i,t){return this.nextImage.setTexture(i,t),this},transit(i,t){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),NH(i)){var r=i;i=Si(r,"key",void 0),t=Si(r,"frame",void 0),this.setDuration(Si(r,"duration",this.duration)).setEaseFunction(Si(r,"ease",this.easeFunction)).setTransitionDirection(Si(r,"dir",this.dir));var x=Si(r,"mask",void 0);x&&this.setMaskGameObject(x),this.setMaskEnable(x===!0);var s=Si(r,"onStart",void 0),g=Si(r,"onProgress",void 0),e=Si(r,"onComplete",void 0);(s!==void 0||g!==void 0||e!==void 0)&&this.setTransitionStartCallback(s,Si(r,"onStartScope",void 0)).setTransitionProgressCallback(g,Si(r,"onProgressScope",void 0)).setTransitionCompleteCallback(e,Si(r,"onCompleteScope",void 0))}return this.setNextTexture(i,t),this.start(),this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new si(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}};var zH=function(i,t,r,x,s){switch(this.clear().fillStyle(16777215),this.shape){case 1:var g=Math.min(i,t)/2;this.fillCircle(-i*(x-.5),-t*(s-.5),g+r);break;default:this.fillRect(-(i*x)-r,-(t*s)-r,i+2*r,t+2*r);break}},Mm=zH;var YH=Phaser.GameObjects.Graphics,Am=class extends YH{constructor(t,r,x){r===void 0&&(r=0),typeof r=="string"&&(r=UH[r]),x===void 0&&(x=0),super(t.scene),this.parent=t,this.shape=r,this.padding=x,this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}setPosition(t,r){var x=this.parent;return t===void 0&&(t=x.x),r===void 0&&(r=x.y),super.setPosition(t,r),this}resize(t,r,x){var s=this.parent;return t===void 0&&(t=s.width),r===void 0&&(r=s.height),x===void 0&&(x=this.padding),this.width===t&&this.height===r&&this.paddingSave===x?this:(this.width=t,this.height=r,this.originX=s.originX,this.originY=s.originY,this.paddingSave=x,Mm.call(this,t,r,x,s.originX,s.originY),this)}setOrigin(t,r){r===void 0&&(r=t);var x=this.parent;return t===void 0&&(t=x.originX),r===void 0&&(r=x.originY),this.originX===t&&this.originY===r?this:(this.originX=t,this.originY=r,Mm.call(this,this.width,this.height,this.paddingSave,t,r),this)}},UH={rectangle:0,circle:1},zo=Am;var Pw={setMaskGameObject(i){if(!i)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(i===!0&&this.maskGameObject instanceof zo)return this;if(this.maskGameObject===i)return this;this.removeMaskGameObject()}return i===!0&&(i=new zo(this)),this.maskGameObject=i,this.maskGameObject.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(this.maskGameObject),this.childrenMask=this.maskGameObject.createGeometryMask(),this},removeMaskGameObject(){return this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,!0),this.maskGameObject=void 0,this},setImageMaskEnable(i,t,r){return t===void 0&&(t=!0),this.childrenMask||this.setMaskGameObject(!0),t?(i.setMask(this.childrenMask),r&&this.childrenMask.setInvertAlpha()):i.clearMask(),this},setCurrentImageMaskEnable(i,t){return this.setImageMaskEnable(this.currentImage,i,t),this},setNextImageMaskEnable(i,t){return this.setImageMaskEnable(this.nextImage,i,t),this},setCellImagesMaskEnable(i,t){for(var r=this.getCellImages(),x=0,s=r.length;x<s;x++)this.setImageMaskEnable(r[x],i,t);return this},setMaskEnable(i,t){return this.setImageMaskEnable(this.backImage,i,t),this.setImageMaskEnable(this.frontImage,i,t),this.setCellImagesMaskEnable(i,t),this}};var XH=function(i,t){t===void 0&&(t=",");var r;return i==="__BASE"?r=function(x,s){return`${x}${t}${s}`}:r=function(x,s){return`${i}_${x}${t}${s}`},r},Ew=XH;var WH=function(i,t,r,x,s,g){r==null&&(r="__BASE"),g||(g=Ew(r,g));for(var e=i.sys.textures.get(t),n=typeof r=="object"?r:e.get(r),p=n.width,f=n.height,u,l,a,o=p/x,c=f/s,h=0,d=0,v=0;v<s;v++){h=0;for(var m=0;m<x;m++)a=g(m,v),u=h+n.cutX,l=d+n.cutY,e.add(a,0,u,l,o,c),h+=o;d+=c}return{getFrameNameCallback:g,cellWidth:o,cellHeight:c,columns:x,rows:s}},Mw=WH;var wr=Phaser.Utils.Objects.GetValue,kH=Phaser.GameObjects.Image,HH=Phaser.Utils.Objects.IsPlainObject,KH=Phaser.Math.RotateAround,jH=function(i,t,r,x){HH(t)&&(x=t,t=wr(x,"columns",1),r=wr(x,"rows",1));var s=wr(x,"onCreateImage");if(!s){var g=wr(x,"ImageClass",kH);s=function(N,z,U){return new g(N,0,0,z,U)}}for(var e=wr(x,"originX",.5),n=wr(x,"originY",.5),p=wr(x,"add",!0),f=wr(x,"align",p),u=wr(x,"objectPool",void 0),l=i.scene,a=i.texture,o=i.frame,c=Mw(l,a,o,t,r),h=c.getFrameNameCallback,d=i.scaleX,v=i.scaleY,m=i.rotation,y=i.getTopLeft(),C=y.x,T=y.y,P=[],S=c.cellWidth*d,M=c.cellHeight*v,E=0;E<r;E++)for(var A=0;A<t;A++){var R,w=h(A,E);u&&u.length>0?R=u.pop().setTexture(a,w):R=s(l,a,w),p&&l.add.existing(R);var O=C+S*A,F=T+M*E,b=O+e*S,I=F+n*M;f&&(R.setOrigin(e,n).setPosition(b,I).setScale(d,v).setRotation(m),KH(R,C,T,m)),P.push(R)}return P},Aw=jH;var Rw={gridCutImage(i,t,r,x){x===void 0&&(x={}),x.objectPool=this.imagesPool;for(var s=Aw(i,t,r,x),g,e=0,n=s.length;e<n;e++)g=s[e],g.setVisible(!0),this.add(g);return this.cellImages=s,this.setChildLocalVisible(i,!1),s},gridCutCurrentImage(i,t,r){return this.gridCutImage(this.currentImage,i,t,r)},gridCutNextImage(i,t,r){return this.gridCutImage(this.nextImage,i,t,r)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var i=this.cellImages[0].texture,t=this.cellImages,r,x,s=0,g=t.length;s<g;s++)r=t[s],this.setChildLocalAlpha(r,1).setChildLocalScale(r,1).setChildLocalVisible(r,!1),r.clearMask(),x=r.frame.name,r.setTexture(),i.remove(x);return this.imagesPool.push(...t),t.length=0,this}};var of={setFlipX(i){return this.flipX=i,this},setFlipY(i){return this.flipY=i,this},toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY(){return this.flipY=!this.flipY,this},setFlip(i,t){return this.flipX=i,this.flipY=t,this},resetFlip(){return this.flipX=!1,this.flipY=!1,this}};var Ow={};Object.assign(Ow,Tw,Sw,Pw,Rw,of);var ww=Ow;var Lw=function(i,t,r,x){},Fw=function(i,t,r,x){i.setChildLocalAlpha(t,1-x).setChildLocalAlpha(r,x)},bw=function(i,t,r,x){i.setChildLocalAlpha(t,1)};var Dw=Phaser.Utils.Objects.IsPlainObject,de=Phaser.Utils.Objects.GetValue,ZH=Phaser.Math.Clamp,hf=class extends Qi{constructor(t,r,x,s,g,e){Dw(r)?(e=r,r=de(e,"x",0),x=de(e,"y",0),s=de(e,"key",void 0),g=de(e,"frame",void 0)):Dw(g)&&(e=g,g=void 0);var n=de(e,"back",void 0),p=de(e,"front",void 0);n||(n=t.add.image(r,x,s,g)),p||(p=t.add.image(r,x,s,g));var f=de(e,"width",p.width),u=de(e,"height",p.height);super(t,r,x,f,u),this.type="rexTransitionImage",n.setVisible(!1),this.addMultiple([n,p]),this.backImage=n,this.frontImage=p,this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[];var l=de(e,"onStart",void 0),a=de(e,"onProgress",void 0),o=de(e,"onComplete",void 0),c=de(e,"dir",0);l===void 0&&a===void 0&&o===void 0&&(l=Lw,a=Fw,o=bw,c=0),this.setTransitionStartCallback(l,de(e,"onStartScope",void 0)).setTransitionProgressCallback(a,de(e,"onProgressScope",void 0)).setTransitionCompleteCallback(o,de(e,"onCompleteScope",void 0)).setTransitionDirection(c).setDuration(de(e,"duration",1e3)).setEaseFunction(de(e,"ease","Linear"));var h=de(e,"mask",void 0);h&&this.setMaskGameObject(h),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1}destroy(t){!this.scene||(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,super.destroy(t),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.backImage.setFlipX(t),this.frontImage.setFlipX(t))}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.backImage.setFlipY(t),this.frontImage.setFlipY(t))}get t(){return this._t}set t(t){if(t=ZH(t,0,1),this._t!==t){this._t=t;var r=this.currentImage,x=this.nextImage;if(t===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),Rm(this.onStartCallback,this.onStartCallbackScope,this,r,x,t)),Rm(this.onProgressCallback,this.onProgressCallbackScope,this,r,x,t),t===1){Rm(this.onCompleteCallback,this.onCompleteCallbackScope,this,r,x,t);var s=x.texture.key,g=x.frame.name;this.frontImage.setTexture(s,g),this.backImage.setTexture(s,g),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}t===1&&!this.ignoreCompleteEvent&&this.emit("complete")}}setT(t){return this.t=t,this}get isRunning(){return this.easeValueTask?this.easeValueTask.isRunning:!1}setOrigin(t,r){return super.setOrigin(t,r),this.backImage.setOrigin(t,r),this.frontImage.setOrigin(t,r),this.maskGameObject&&this.maskGameObject.setOrigin(t,r),this}setTexture(t,r){return this.frontImage.setTexture(t,r),this.backImage.setTexture(t,r).setVisible(!1),this}},Rm=function(i,t,r,x,s,g){!i||(t?i.call(t,r,x,s,g):i(r,x,s,g))};Object.assign(hf.prototype,ww);var Iw=hf;var Bw=Iw;var Om=Bw;J.register("transitionImage",function(i,t,r,x,s){var g=new Om(this.scene,i,t,r,x,s);return this.scene.add.existing(g),g});Z(window,"RexPlugins.UI.TransitionImage",Om);var JH=function(i,t,r){if(r===void 0?r={}:r===!0&&(r=$H),i.width<=t.width&&i.height<=t.height)return r.width=i.width,r.height=i.height,r;var x=i.width/i.height;r.width=Math.min(i.width,t.width),r.height=Math.min(i.height,t.height);var s=r.width/r.height;return s<x?r.height=r.width/x:s>x&&(r.width=r.height*x),r},$H={},Gw=JH;var Nw=Phaser.Utils.Objects.IsPlainObject,Ws=Phaser.Utils.Objects.GetValue,lf=class extends Qi{constructor(t,r,x,s,g,e){Nw(r)?(e=r,r=Ws(e,"x",0),x=Ws(e,"y",0),s=Ws(e,"key",void 0),g=Ws(e,"frame",void 0)):Nw(g)&&(e=g,g=void 0);var n=Ws(e,"image");n?n.setPosition(r,x).setOrigin(.5):(n=t.add.image(r,x,s,g),s===void 0&&n.setVisible(!1)),super(t,r,x,1,1),this.type="rexImageBox",this.add(n),this.image=n;var p=Ws(e,"width",n.width),f=Ws(e,"height",n.height);this.resize(p,f)}get texture(){return this.image.texture}get frame(){return this.image.frame}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.image.setFlipX(t))}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.image.setFlipY(t))}scaleImage(){var t=this.image,r=Gw(t,{width:this.width,height:this.height},!0);return t.setDisplaySize(r.width,r.height),this.resetChildScaleState(t),this}resize(t,r){return super.resize(t,r),this.scaleImage(),this}setTexture(t,r){var x=this.image;return x.setTexture(t,r),t!==null?(this.setChildVisible(x,!0),this.scaleImage()):this.setChildVisible(x,!1),this}};Object.assign(lf.prototype,of);var Vw=lf;var zw=Vw;var wm=zw;J.register("imageBox",function(i,t,r,x,s){var g=new wm(this.scene,i,t,r,x,s);return this.scene.add.existing(g),g});Z(window,"RexPlugins.UI.ImageBox",wm);var Yw=Nu;var Lm=Yw;J.register("fullWindowRectangle",function(i,t){var r=new Lm(this.scene,i,t);return this.scene.add.existing(r),r});Z(window,"RexPlugins.UI.FullWindowRectangle",Lm);var Fm=zu;J.register("cover",function(i){var t=new Fm(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Cover",Fm);var QH=function(i,t){if(this.scene.sys.scale.autoRound&&(i=Math.floor(i),t=Math.floor(t)),this.width===i&&this.height===t)return this;var r=this.node.style;return r.width=`${i}px`,r.height=`${t}px`,this.updateSize(),this},va=QH;var bm={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"]},Dm={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],outline:["outline","none"],direction:["direction",void 0]},Uw={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",compositionstart:"compositionStart",compositionend:"compositionEnd",compositionupdate:"compositionUpdate",focus:"focus",blur:"blur",select:"select"};var Xw=Phaser.Utils.Objects.GetValue,qH=function(i,t,r,x){var s=Xw(x,"preventDefault",!1),g=Xw(x,"preTest");for(let e in r)t.addEventListener(e,function(n){(!g||g(i,e))&&i.emit(r[e],i,n),s&&n.preventDefault()})},uf=qH;var _H=Phaser.GameObjects.DOMElement,Ww=Phaser.Utils.Objects.IsPlainObject,Lr=Phaser.Utils.Objects.GetValue,ff=class extends _H{constructor(t,r,x,s,g,e){Ww(r)?(e=r,r=Lr(e,"x",0),x=Lr(e,"y",0),s=Lr(e,"width",0),g=Lr(e,"height",0)):Ww(s)&&(e=s,s=Lr(e,"width",0),g=Lr(e,"height",0)),e===void 0&&(e={});var n,p=Lr(e,"type","text");p==="textarea"?(n=document.createElement("textarea"),n.style.resize="none"):(n=document.createElement("input"),n.type=p),Mn(bm,e,n);var f=Lr(e,"style",void 0);f=Mn(Dm,e,f);var u=n.style;for(var l in e)l in bm||l in Dm||l in u&&(f[l]=e[l]);f["box-sizing"]="border-box",super(t,r,x,n,f),this.type="rexInputText",this.resize(s,g),uf(this,n,Uw),ru(n),Lr(e,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get text(){return this.node.value}set text(t){this.node.value=t}setText(t){return this.text=t,this}get maxLength(){return this.node.maxLength}set maxLength(t){this.node.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.node.minLength}set minLength(t){this.node.minLength=t}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node.placeholder=t}setPlaceholder(t){return this.placeholder=t,this}selectText(t,r){return t===void 0?this.node.select():this.node.setSelectionRange(t,r),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node.selectionStart}set cursorPosition(t){this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node.title}set tooltip(t){this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.node.readOnly}set readOnly(t){this.node.readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node.spellcheck}set spellCheck(t){this.node.spellcheck=t}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){return this.node.style.color}set fontColor(t){this.node.style.color=t}setFontColor(t){return this.fontColor=t,this}setStyle(t,r){return this.node.style[t]=r,this}getStyle(t){return this.node.style[t]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(t){return t===void 0&&(t=!0),this.node.disabled=!t,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}},tK={resize:va};Object.assign(ff.prototype,tK);var df=ff;var kw=df;var Im=kw;J.register("inputText",function(i){var t=new Im(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.InputText",Im);var Hw=Phaser.Utils.Objects.GetValue,eK=function(i){var t=document.createElement("input");t.type="file";var r=Hw(i,"accept",""),x=Hw(i,"multiple",!1);return t.setAttribute("accept",r),x?t.setAttribute("multiple",""):t.removeAttribute("multiple"),t},Kw=eK;var iK=function(i,t){return i===void 0&&(i=0),new Promise(function(r,x){setTimeout(function(){r(t)},i)})},cf=iK;var rK=function({game:i,fileInput:t,closeDelay:r}){return Jr(li(i).events,"focus").then(function(){return cf(r)}).then(function(){var x={files:t.files};return Promise.resolve(x)})},pf=rK;var sK=Phaser.Utils.Objects.GetValue,nK=function(i,t){var r=sK(t,"closeDelay",200),x=Kw(t);return x.click(),pf({game:i,fileInput:x,closeDelay:r}).then(function(s){return x.remove(),Promise.resolve(s)})},vf=nK;var aK=function(i){return this.setOrigin(i.originX,i.originY),this.setPosition(i.x,i.y),this.resize(i.displayWidth,i.displayHeight),this},mf=aK;var oK=function(i,t,r){if(r===void 0)switch(t){case"image":case"svg":r="textures";break;case"animation":r="json";break;case"tilemapTiledJSON":case"tilemapCSV":r="tilemap";break;case"glsl":r="shader";break;default:r=t;break}i=li(i);var x;return r==="textures"?x=i.textures:x=i.cache[r],x},jw=oK;var hK=function(i,t,r,x,s,g){if(!(s===null||s===!1))if(Ie(s))s();else{var e=jw(i,r,s);e.exists(x)&&e.remove(x)}var n=i.load;if(g&&n.once(`filecomplete-${r}-${x}`,function(f,u,l){g(l)}),Ie(t))t();else{var p=window.URL.createObjectURL(t);n[r](x,p)}n.start()},Bm=hK;var lK=function(i,t,r,x,s){var g=this.scene;return Bm(g,i,t,r,x,s),this},uK=function(i,t,r,x){var s=this.scene;return new Promise(function(g,e){var n=function(p){g(p)};Bm(s,i,t,r,x,n)})},gf={loadFile:lK,loadFilePromise:uK};var fK=Phaser.GameObjects.DOMElement,Zw=Phaser.Utils.Objects.IsPlainObject,fr=Phaser.Utils.Objects.GetValue,xf=class extends fK{constructor(t,r,x,s,g,e){Zw(r)?(e=r,r=fr(e,"x",0),x=fr(e,"y",0),s=fr(e,"width",0),g=fr(e,"height",0)):Zw(s)&&(e=s,s=fr(e,"width",0),g=fr(e,"height",0));var n=document.createElement("input");n.type="file";var p=n.style;p.display="none";var f=document.createElement("label");f.appendChild(n);var u=fr(e,"style",void 0);super(t,r,x,f,u),this.type="rexFileChooser",this.resetFromJSON(e),this.resize(s,g);var l=this;n.onchange=function(){l.emit("change",l)},this.setCloseDelay(fr(e,"closeDelay",200)),n.onclick=function(){pf({game:t,fileInput:n,closeDelay:l.closeDelay}).then(function(){l.emit("select",l)})}}resetFromJSON(t){return this.setAccept(fr(t,"accept","")),this.setMultiple(fr(t,"multiple",!1)),this}setAccept(t){return t===void 0&&(t=""),this.fileInput.setAttribute("accept",t),this}setMultiple(t){return t===void 0&&(t=!0),t?this.fileInput.setAttribute("multiple",""):this.fileInput.removeAttribute("multiple"),this}setCloseDelay(t){return t===void 0&&(t=200),this.closeDelay=t,this}get fileInput(){return this.node.children[0]}open(){return this.fileInput.click(),this}get files(){return this.fileInput.files}},dK={resize:va,syncTo:mf};Object.assign(xf.prototype,dK,gf);var ks=xf;J.register("fileChooser",function(i){var t=new ks(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.FileChooser",ks);var Jw={setDropEnable(i){return i===void 0&&(i=!0),this.dropEnable=i,this},toggleDropEnable(){return this.dropEnable=!this.dropEnable,this}};var $w={addFilter(i,t){return this.filters||(this.filters={}),this.filters[i]=t,this},addFilters(i){this.filters||(this.filters={});for(var t in i)this.filters[t]=i[t];return this}};var Qw={resize:va,syncTo:mf};Object.assign(Qw,Jw,$w,gf);var qw=Qw;var _w={dragenter:"dragenter",dragleave:"dragleave",dragover:"dragover",drop:"drop"};var cK=Phaser.GameObjects.DOMElement,tL=Phaser.Utils.Objects.IsPlainObject,Fr=Phaser.Utils.Objects.GetValue,yf=class extends cK{constructor(t,r,x,s,g,e){tL(r)?(e=r,r=Fr(e,"x",0),x=Fr(e,"y",0),s=Fr(e,"width",0),g=Fr(e,"height",0)):tL(s)&&(e=s,s=Fr(e,"width",0),g=Fr(e,"height",0)),e===void 0&&(e={});var n=document.createElement("div"),p=Fr(e,"style",void 0);super(t,r,x,n,p),this.type="rexFileDropZone",this.resize(s,g),this._files=[],this.setDropEnable(Fr(e,"dropEnable",!0));var f=Fr(e,"filters");f&&this.addFilters(f),uf(this,n,_w,{preventDefault:!0,preTest(u){return u.dropEnable}}),this.on("drop",function(u,l){this._files=l.dataTransfer.files;var a=this._files;if(a&&this.filters)for(var o in this.filters){for(var c=this.filters[o],h=[],d=0,v=a.length;d<v;d++){var m=a[d];c(m,a)&&h.push(m)}h.length>0&&this.emit(`drop.${o}`,h)}},this)}get files(){return this._files}};Object.assign(yf.prototype,qw);var eL=yf;var iL=eL;var Gm=iL;J.register("fileDropZone",function(i){var t=new Gm(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.FileDropZone",Gm);var pK=function(i){if(!window.Chart){var t=`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/Chart.min.js');`;return console.error(t),this}return this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,vK(this,i)),this},vK=function(i,t){t===void 0&&(t={}),t.options===void 0&&(t.options={});var r=t.options;r.responsive=!1,r.maintainAspectRatio=!1,r.hasOwnProperty("devicePixelRatio")||(r.devicePixelRatio=1);var x=!1;r.animation===void 0?r.animation={}:r.animation===!1&&(x=!0,r.animation={});var s=r.animation;x&&(s.duration=0);var g=s.onProgress;s.onProgress=function(n){g&&g(n),i.needRedraw()};var e=s.onComplete;return s.onComplete=function(n){e&&e(n),i.needRedraw()},t},rL=pK;var mK=function(i){if(this.chart!==void 0)if(typeof i=="string"){for(var t=this.chart.data.datasets,r,x=0,s=t.length;x<s;x++)if(r=t[x],r.label===i)return r}else return this.chart.data.datasets[i]},sL=mK;var gK=function(i,t){var r=this.getChartDataset(i);if(r!==void 0){if(typeof t=="string"){var x=this.chart.data.labels;if(t=x.indexOf(t),t===-1)return}return r.data[t]}},nL=gK;var xK=function(i,t,r){if(this.chart===void 0)return this;var x=this.getChartDataset(i);if(typeof t=="string"){var s=this.chart.data.labels;if(t=s.indexOf(t),t===-1)return this}return x.data[t]=r,this},aL=xK;var yK=function(){return this.chart===void 0?this:(this.chart.update(),this)},oL=yK;var Cf=class extends bi{constructor(t,r,x,s,g,e){super(t,r,x,s,g),this.type="rexChart",this.chart=void 0,e!==void 0&&this.setChart(e)}destroy(t){!this.scene||(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(t))}resize(t,r){if(t===this.width&&r===this.height)return this;if(super.resize(t,r),this.chart){var x=this.chart;x.height=this.canvas.height,x.width=this.canvas.width,x.aspectRatio=x.height?x.width/x.height:null,x.update()}return this}},CK={setChart:rL,getChartDataset:sL,getChartData:nL,setChartData:aL,updateChart:oL};Object.assign(Cf.prototype,CK);var Nm=Cf;J.register("chart",function(i,t,r,x,s){var g=new Nm(this.scene,i,t,r,x,s);return this.scene.add.existing(g),g});Z(window,"RexPlugins.UI.Chart",Nm);J.register("container",function(i,t,r,x,s){var g=new De(this.scene,i,t,r,x,s);return this.scene.add.existing(g),g});Z(window,"RexPlugins.UI.Container",De);var TK=function(i){if(this.rexSizer.hidden)return 0;i===void 0&&(i=!0);var t=0,r=this.sizerChildren,x,s,g;if(this.orientation===0)for(var e=this.space.item,n=!0,p=0,f=r.length;p<f;p++)x=r[p],!x.rexSizer.hidden&&(x.rexSizer.proportion===0||i?g=this.getChildWidth(x):g=0,s=x.rexSizer.padding,g+=s.left+s.right,n?n=!1:g+=e,t+=g);else for(var p=0,f=r.length;p<f;p++)x=r[p],x.hasOwnProperty("rexSizer")&&(x.rexSizer.hidden||(s=x.rexSizer.padding,g=this.getChildWidth(x)+s.left+s.right,t=Math.max(g,t)));return t+this.space.left+this.space.right},hL=TK;var SK=function(i){if(this.rexSizer.hidden)return 0;i===void 0&&(i=!0);var t=0,r=this.sizerChildren,x,s,g;if(this.orientation===0)for(var e=0,n=r.length;e<n;e++)x=r[e],!x.rexSizer.hidden&&(s=x.rexSizer.padding,g=this.getChildHeight(x)+s.top+s.bottom,t=Math.max(g,t));else for(var p=this.space.item,f=!0,e=0,n=r.length;e<n;e++)x=r[e],x.hasOwnProperty("rexSizer")&&(x.rexSizer.hidden||(x.rexSizer.proportion===0||i?g=this.getChildHeight(x):g=0,s=x.rexSizer.padding,g+=s.top+s.bottom,f?f=!1:g+=p,t+=g));return t+this.space.top+this.space.bottom},lL=SK;var PK=function(i,t){t===void 0&&(t=this.width);var r,x=i.rexSizer,s=x.padding;if(this.orientation===0)x.proportion>0&&this.proportionLength>0&&(r=x.proportion*this.proportionLength);else if(x.expand){var g=t-this.space.left-this.space.right;r=g-s.left-s.right}return r},uL=PK;var EK=function(i,t){t===void 0&&(t=this.height);var r,x=i.rexSizer,s=x.padding;if(this.orientation===0){if(x.expand){var g=t-this.space.top-this.space.bottom;r=g-s.top-s.bottom}}else x.proportion>0&&this.proportionLength>0&&(r=x.proportion*this.proportionLength);return r},fL=EK;var MK=function(i){i===void 0&&(i=[]);for(var t=this.sizerChildren,r,x=0,s=t.length;x<s;x++)r=t[x],r.isRexSizer&&i.push(r);return i},dL=MK;var AK=function(){this.hasRatioFitChild=!1;for(var i=this.sizerChildren,t=0,r=i.length;t<r;t++){var x=i[t];x.rexSizer.hidden||!x.rexSizer.fitRatio||(kt(x,1,1),this.hasRatioFitChild=!0)}return this._childrenProportion=void 0,this.proportionLength=void 0,nr.call(this),this},cL=AK;var RK=function(i,t){if(this.hasRatioFitChild){var r,x;this.orientation===0?r=t-this.getInnerPadding("top")-this.getInnerPadding("bottom"):x=i-this.getInnerPadding("left")-this.getInnerPadding("right");for(var s=this.sizerChildren,g,e,n=0,p=s.length;n<p;n++){var f=s[n];if(!f.rexSizer.hidden){var u=f.rexSizer.fitRatio;!u||(this.orientation===0?(e=r-this.getChildOuterPadding(f,"top")-this.getChildOuterPadding(f,"bottom"),g=e*u):(g=r-this.getChildOuterPadding(f,"top")-this.getChildOuterPadding(f,"bottom"),e=g/u),kt(f,g,e),f.isRexSizer&&f.setMinSize(g,e))}}this.proportionLength=void 0,this._childrenWidth=void 0,this.resolveWidth(i,!0)}},pL=RK;var OK=Phaser.Math.Wrap,wK=function(){for(var i=this.sizerChildren,t,r,x,s=this.innerLeft,g=this.innerTop,e=this.innerWidth,n=this.innerHeight,p=s,f=g,u,l,a,o,c,h,d,v=this.startChildIndex,m=0,y=i.length;m<y;m++)v===0?d=m:d=OK(m+v,0,y),this.rtl&&(d=y-d-1),t=i[d],!t.rexSizer.hidden&&(r=t.rexSizer,x=r.padding,or.call(this,t),t.isRexSpace?(c=0,h=0):(c=this.getExpandedChildWidth(t),h=this.getExpandedChildHeight(t)),t.isRexSizer?(t.runLayout(this,c,h),da(t,this)):kt(t,c,h),c===void 0&&(c=mt(t)),h===void 0&&(h=dt(t)),this.orientation===0?(u=p+x.left,r.proportion===0||this.proportionLength===0?a=c:a=r.proportion*this.proportionLength,l=f+x.top,o=n-x.top-x.bottom):(u=p+x.left,a=e-x.left-x.right,l=f+x.top,r.proportion===0||this.proportionLength===0?o=h:o=r.proportion*this.proportionLength),hr.call(this,t,u,l,a,o,r.align),this.orientation===0?p+=a+x.left+x.right+this.space.item:f+=o+x.top+x.bottom+this.space.item)},vL=wK;var LK=function(t){var t=Zn.call(this,t);if(this.proportionLength===void 0&&this.orientation===0){var r=t-this.childrenWidth;r>0?(r=t-this.getChildrenWidth(!1),this.proportionLength=r/this.childrenProportion):(this.proportionLength=0,r<0)}return t},mL=LK;var FK=function(t){var t=Jn.call(this,t);if(this.proportionLength===void 0&&this.orientation===1){var r=t-this.childrenHeight;r>0?(r=t-this.getChildrenHeight(!1),this.proportionLength=r/this.childrenProportion):(this.proportionLength=0,r<0)}return t},gL=FK;var bK=Phaser.GameObjects.Zone,Vm=class extends bK{constructor(t){super(t,0,0,1,1),this.isRexSpace=!0}},Hs=Vm;var DK=function(i,t){var r=this.sizerChildren;if(r.length===0)return-1;for(var x=-1,s=1/0,g=0,e=r.length;g<e;g++){var n=r[g],p;this.orientation===0?p=Math.abs(n.left-i):p=Math.abs(n.top-t),s>p&&(s=p,x=g)}var n=r[r.length-1],p;return this.orientation===0?p=Math.abs(n.right-i):p=Math.abs(n.bottom-t),s>p&&(s=p,x=g+1),x},xL=DK;var CL=Phaser.Utils.Objects.IsPlainObject,br=Phaser.Utils.Objects.GetValue,yL=Phaser.Display.Align.CENTER,IK={min:0,full:-1},zm=function(i,t,r,x,s,g,e,n,p,f){ir.call(this,i);var u=i.isRexSpace,l=typeof t;if(t===null)return this;if(l!=="number"){if(l==="string")t=IK[t];else if(CL(t)){var a=t;t=br(a,"proportion",void 0),r=br(a,"align",yL),x=br(a,"padding",0),s=br(a,"expand",!1),g=br(a,"key",void 0),e=br(a,"index",void 0),i.isRexSizer||(n=br(a,"minWidth",void 0),p=br(a,"minHeight",void 0)),f=br(a,"fitRatio",0)}}typeof r=="string"&&(r=qi[r]),t===void 0&&(t=u?1:0),r===void 0&&(r=yL),x===void 0&&(x=0),s===void 0&&(s=!1),n===void 0&&(u?n=0:i.isRexSizer||(n=i._minWidth)),p===void 0&&(u?p=0:i.isRexSizer||(p=i._minHeight)),f===void 0&&(f=0);var a=this.getSizerConfig(i);return a.proportion=t,a.align=r,a.padding=gi(x),a.expand=s,a.fitRatio=t===0?f:0,e===void 0||e>=this.sizerChildren.length?this.sizerChildren.push(i):this.sizerChildren.splice(e,0,i),i.isRexSizer||(t>0&&(this.orientation===0?i.minWidth=n===void 0?mt(i):n:i.minHeight=p===void 0?dt(i):p),s&&(this.orientation===0?i.minHeight=p:i.minWidth=n)),g!==void 0&&this.addChildrenMap(g,i),this},TL={add:zm,addSpace(i){return this.insertSpace(void 0,i),this},insertSpace(i,t){return t===void 0&&(t=1),zm.call(this,new Hs(this.scene),{proportion:t,minWidth:0,minHeight:0,index:i}),this},insert(i,t,r,x,s,g,e,n){return CL(r)&&(r.index=i),zm.call(this,t,r,x,s,g,e,i,n),this},insertAtPosition(i,t,r,x,s,g,e,n,p){var f=xL.call(this,i,t);return f===-1&&(f=void 0),this.insert(f,r,x,s,g,e,n,p),this}};var BK=Phaser.Utils.Array.Remove,SL={remove(i,t){return this.getParentSizer(i)!==this?this:(BK(this.sizerChildren,i),rr.call(this,i,t),this)},removeAll(i){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],i);return this},clear(i){return this.sizerChildren.length=0,as.call(this,i),this}};var PL={getChildAlign(i){return this.getSizerConfig(i).align},setChildAlign(i,t){return typeof t=="string"&&(t=qi[t]),this.getSizerConfig(i).align=t,this}};var EL={getChildProportion(i){return this.getSizerConfig(i).proportion},setChildProportion(i,t){return this.getSizerConfig(i).proportion=t,this}};var ML={getChildExpand(i){return this.getSizerConfig(i).expand},setChildExpand(i,t){return this.getSizerConfig(i).expand=t,this}};var AL={getChildrenWidth:hL,getChildrenHeight:lL,getExpandedChildWidth:uL,getExpandedChildHeight:fL,getChildrenSizers:dL,preLayout:cL,postResolveSize:pL,layoutChildren:vL,resolveWidth:mL,resolveHeight:gL};Object.assign(AL,TL,SL,PL,EL,ML);var RL=AL;var GK=function(){for(var i=0,t=this.sizerChildren,r,x,s=0,g=t.length;s<g;s++)r=t[s],!r.rexSizer.hidden&&(x=r.rexSizer.proportion,x>0&&(i+=x));return i},OL=GK;var NK={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},VK=function(i){return typeof i=="string"&&(i=NK[i]),i},hs=VK;var Ym=Phaser.Utils.Objects.IsPlainObject,Pi=Phaser.Utils.Objects.GetValue,Tf=class extends Ti{constructor(t,r,x,s,g,e,n){Ym(r)?(n=r,r=Pi(n,"x",0),x=Pi(n,"y",0),s=Pi(n,"width",void 0),g=Pi(n,"height",void 0),e=Pi(n,"orientation",0)):Ym(s)?(n=s,s=Pi(n,"width",void 0),g=Pi(n,"height",void 0),e=Pi(n,"orientation",0)):Ym(e)&&(n=e,e=Pi(n,"orientation",0)),e===void 0&&(e=0),super(t,r,x,s,g,n),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(e),this.setItemSpacing(Pi(n,"space.item",0)),this.setStartChildIndex(Pi(n,"startChildIndex",0)),this.setRTL(Pi(n,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=hs(t),this}setItemSpacing(t){return this.space.item=t,this}setStartChildIndex(t){return this.startChildIndex=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=OL.call(this)),this._childrenProportion}};Object.assign(Tf.prototype,RL);var lt=Tf;J.register("sizer",function(i,t,r,x,s,g){var e=new lt(this.scene,i,t,r,x,s,g);return this.scene.add.existing(e),e});Z(window,"RexPlugins.UI.Sizer",lt);var zK=function(){return Array.prototype.reduce.call(arguments,YK,0)},YK=function(i,t){return i+t},Sf=zK;var UK=function(i){if(this.rexSizer.hidden)return 0;i===void 0&&(i=!0);for(var t=0,r,x=this.sizerChildren,s,g,e,n,p=0;p<this.columnCount;p++){if(n=this.columnProportions[p],r=0,n===0||i){for(var f=0;f<this.rowCount;f++)s=x[f*this.columnCount+p],s&&(s.rexSizer.hidden||(g=s.rexSizer.padding,e=this.getChildWidth(s)+g.left+g.right,r=Math.max(r,e)));t+=r}this.columnWidth[p]=r}var u=this.space,l=Math.max(u.indentLeftOdd,u.indentLeftEven);return t+Sf(u.left,l,...u.column,u.right)},wL=UK;var XK=function(i){if(this.rexSizer.hidden)return 0;i===void 0&&(i=!0);for(var t=0,r,x=this.sizerChildren,s,g,e,n,p=0;p<this.rowCount;p++){if(n=this.rowProportions[p],r=0,n===0||i){for(var f=0;f<this.columnCount;f++)s=x[p*this.columnCount+f],s&&(s.rexSizer.hidden||(e=s.isRexSizer?Math.max(s.minHeight,s.childrenHeight):s.hasOwnProperty("minHeight")?s.minHeight:dt(s),g=s.rexSizer.padding,e+=g.top+g.bottom,r=Math.max(r,e)));t+=r}this.rowHeight[p]=r}var u=this.space,l=Math.max(u.indentTopOdd,u.indentTopEven);return t+Sf(u.top,l,...u.row,u.bottom)},LL=XK;var WK=function(i,t){var r,x=i.rexSizer;if(x.expand){var s=x.padding;r=t-s.left-s.right}return r},FL=WK;var kK=function(i,t){var r,x=i.rexSizer;if(x.expand){var s=x.padding;r=t-s.top-s.bottom}return r},bL=kK;var HK=function(i){i===void 0&&(i=[]);for(var t=this.sizerChildren,r,x=0,s=t.length;x<s;x++)r=t[x],r&&r.isRexSizer&&i.push(r);return i},DL=HK;var KK=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,nr.call(this),this},IL=KK;var jK=function(){for(var i,t,r,x=this.innerLeft,s=this.innerTop,g,e=s,n,p,f,u,l,a,o=this.space.column,c=this.space.row,h=this.space.indentLeftOdd,d=this.space.indentLeftEven,v=this.space.indentTopOdd,m=this.space.indentTopEven,y,C,T,P,S=0;S<this.rowCount;S++){C=this.getRowHeight(S),T=S%2?d:h,g=x+T;for(var M=0;M<this.columnCount;M++){if(y=this.getColumnWidth(M),i=this.getChildAt(M,S),!i||i.rexSizer.hidden){g+=y+o[M];continue}or.call(this,i),l=this.getExpandedChildWidth(i,y),a=this.getExpandedChildHeight(i,C),i.isRexSizer?(i.runLayout(this,l,a),da(i,this)):kt(i,l,a),t=i.rexSizer,r=t.padding,n=g+r.left,f=y-r.left-r.right,P=M%2?m:v,p=e+P+r.top,u=C-r.top-r.bottom,hr.call(this,i,n,p,f,u,t.align),g+=y+o[M]}e+=C+c[S]}},BL=jK;var ZK=function(t){var t=Zn.call(this,t);if(this.proportionWidthLength===void 0){var r=this.totalColumnProportions;if(r>0){var x=t-this.getChildrenWidth(!1);x>=0&&(this.proportionWidthLength=x/r)}else this.proportionWidthLength=0}return t},GL=ZK;var JK=function(t){var t=Jn.call(this,t);if(this.proportionHeightLength===void 0){var r=this.totalRowProportions;if(r>0){var x=t-this.getChildrenHeight(!1);x>=0&&(this.proportionHeightLength=x/r)}else this.proportionHeightLength=0}return t},NL=JK;var $K=function(i){var t,r,x;for(var s in this.sizerChildren)t=this.sizerChildren[s],t&&t.isRexSizer&&!t.ignoreLayout&&(x=this.getColumnWidth(parseInt(s)%this.columnCount),r=this.getExpandedChildWidth(t,x),r=t.resolveWidth(r),t.resolveChildrenWidth(r))},VL=$K;var QK=function(i){var t,r,x;for(var s in this.sizerChildren)t=this.sizerChildren[s],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(x=this.getColumnWidth(parseInt(s)%this.columnCount),r=this.getExpandedChildWidth(t,x),t.isRexSizer&&(r=t.resolveWidth(r)),t.runWidthWrap(r));return this},zL=QK;var qK=Phaser.Utils.Objects.IsPlainObject,ma=Phaser.Utils.Objects.GetValue,YL=Phaser.Display.Align.CENTER,UL=function(i,t,r,x,s){if(typeof i=="number"||typeof t=="number")if(i===void 0){for(var g,e=0;e<x;e++)if(g=t*x+e,!r[g])return g}else if(t===void 0){for(var g,e=0;e<s;e++)if(g=e*x+i,!r[g])return g}else{var g=t*x+i;if(!r[g])return g}else if(t===!0){for(var g,e=0;e<x;e++)for(var n=0;n<s;n++)if(g=n*x+e,!r[g])return g}else for(var e=0,p=r.length;e<p;e++)if(!r[e])return e;return null},_K=function(i,t,r,x,s,g,e){if(ir.call(this,i),qK(t)){var p=t;t=ma(p,"column",void 0),r=ma(p,"row",void 0),x=ma(p,"align",YL),s=ma(p,"padding",0),g=ma(p,"expand",!1),e=ma(p,"key",void 0)}var n=UL(t,r,this.sizerChildren,this.columnCount,this.rowCount);if(n===null){if(typeof t=="number"&&typeof r=="number")return this;r===!0||typeof r=="number"?this.addEmptyColumn():this.addEmptyRow(),n=UL(t,r,this.sizerChildren,this.columnCount,this.rowCount)}typeof x=="string"&&(x=qi[x]),x===void 0&&(x=YL),s===void 0&&(s=0),g===void 0&&(g=!0);var p=this.getSizerConfig(i);return p.align=x,p.padding=gi(s),p.expand=g,this.sizerChildren[n]=i,e!==void 0&&this.addChildrenMap(e,i),this},XL={add:_K};var tj=function(i,t,r,x){r===void 0&&(r=0),x===void 0&&(x=i.length-1);for(var s=r;s<=x;s++)i[s]=t;return i},ls=tj;var WL={remove(i,t){if(this.getParentSizer(i)!==this)return this;var r=this.sizerChildren.indexOf(i);return r!==-1&&(this.sizerChildren[r]=null),rr.call(this,i,t),this},removeAt(i,t,r){var x=this.getChildAt(i,t);return x&&this.remove(x,r),this},removeAll(i){for(var t=this.sizerChildren.length-1;t>=0;t--){var r=this.sizerChildren[t];!r||this.remove(r,i)}return this},clear(i){return ls(this.sizerChildren,null),as.call(this,i),this}};var kL=Phaser.Utils.Objects.GetValue,ej=function(i,t,r,x,s){if(r===void 0&&(r=0),x===void 0&&(x=0),this.columnCount=i,this.rowCount=t,this.gridCount=i*t,this.sizerChildren===void 0?this.sizerChildren=[]:this.removeAll(),this.sizerChildren.length=i*t,ls(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=i,typeof r=="number")ls(this.columnProportions,r);else for(var g=0;g<i;g++)this.columnProportions[g]=r[g]||0;if(this.rowProportions=[],this.rowProportions.length=t,typeof x=="number")ls(this.rowProportions,x);else for(var g=0;g<t;g++)this.rowProportions[g]=x[g]||0;this.columnWidth=[],this.columnWidth.length=i,this.rowHeight=[],this.rowHeight.length=t,this.space.column=[],this.space.column.length=i-1;var e=kL(s,"column",0);if(typeof e=="number")ls(this.space.column,e);else for(var g=0,n=this.space.column.length;g<n;g++)this.space.column[g]=e[g]||0;this.space.row=[],this.space.row.length=t-1;var p=kL(s,"row",0);if(typeof p=="number")ls(this.space.row,p);else for(var g=0,n=this.space.row.length;g<n;g++)this.space.row[g]=p[g]||0;return this},HL=ej;var Um=function(i,t,r){t===void 0&&(t=this.rowProportions[0]||0),r===void 0&&(r=this.space.row[0]||0),this.rowCount+=1,this.gridCount+=this.columnCount;for(var x=[i*this.columnCount,0],s=0;s<this.columnCount;s++)x.push(null);return this.sizerChildren.splice.apply(this.sizerChildren,x),this.rowProportions.push(t),this.rowHeight.length+=1,this.space.row.splice(i,0,r),this},KL=function(i,t){return Um.call(this,this.rowCount,i,t),this};var Xm=function(i,t,r){t===void 0&&(t=this.columnProportions[0]||0),r===void 0&&(r=this.space.column[0]||0),this.columnCount+=1,this.gridCount+=this.rowCount;for(var x=this.rowCount-1;x>=0;x--){var s=x*this.columnCount+i;this.sizerChildren.splice(s,0,null)}return this.columnProportions.push(t),this.columnWidth.length+=1,this.space.column.splice(i,0,r),this},jL=function(i,t){return Xm.call(this,this.columnCount,i,t),this};var ZL={getChildrenWidth:wL,getChildrenHeight:LL,getExpandedChildWidth:FL,getExpandedChildHeight:bL,getChildrenSizers:DL,preLayout:IL,layoutChildren:BL,resolveWidth:GL,resolveHeight:NL,resolveChildrenWidth:VL,runWidthWrap:zL,resetGrid:HL,inseryEmptyRow:Um,addEmptyRow:KL,insertEmptyColumn:Xm,addEmptyColumn:jL};Object.assign(ZL,XL,WL);var JL=ZL;var ij=function(){for(var i=0,t,r=0;r<this.columnCount;r++)t=this.columnProportions[r],t>0&&(i+=t);return i},$L=ij;var rj=function(){for(var i=0,t,r=0;r<this.rowCount;r++)t=this.rowProportions[r],t>0&&(i+=t);return i},QL=rj;var Pf=Phaser.Utils.Objects.IsPlainObject,Lt=Phaser.Utils.Objects.GetValue,Ef=class extends Ti{constructor(t,r,x,s,g,e,n,p,f,u){Pf(r)?(u=r,r=Lt(u,"x",0),x=Lt(u,"y",0),s=Lt(u,"width",void 0),g=Lt(u,"height",void 0),e=Lt(u,"column",u.col||0),n=Lt(u,"row",0),p=Lt(u,"columnProportions",0),f=Lt(u,"rowProportions",0)):Pf(s)?(u=s,s=Lt(u,"width",void 0),g=Lt(u,"height",void 0),e=Lt(u,"column",u.col||0),n=Lt(u,"row",0),p=Lt(u,"columnProportions",0),f=Lt(u,"rowProportions",0)):Pf(e)?(u=e,e=Lt(u,"column",u.col||0),n=Lt(u,"row",0),p=Lt(u,"columnProportions",0),f=Lt(u,"rowProportions",0)):Pf(p)&&(u=p,p=Lt(u,"columnProportions",0),f=Lt(u,"rowProportions",0)),super(t,r,x,s,g,u),this.type="rexGridSizer",this.resetGrid(e,n,p,f,Lt(u,"space",void 0)),this.setIndentLeft(Lt(u,"space.indentLeftOdd",0),Lt(u,"space.indentLeftEven",0)),this.setIndentTop(Lt(u,"space.indentTopOdd",0),Lt(u,"space.indentTopEven",0)),this.addChildrenMap("items",this.sizerChildren);var l=Lt(u,"createCellContainerCallback");if(l)for(var x=0,a=this.rowCount;x<a;x++)for(var r=0,o=this.columnCount;r<o;r++){var c={column:r,row:x},h=l(t,r,x,c);h&&this.add(h,c)}}destroy(t){!this.scene||(super.destroy(t),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0)}setIndentLeft(t,r){return this.space.indentLeftOdd=t,this.space.indentLeftEven=r,this}setIndentTop(t,r){return this.space.indentTopOdd=t,this.space.indentTopEven=r,this}setColumnProportion(t,r){return t>=this.columnProportions.length?this:(this.columnProportions[t]=r,this)}setRowProportion(t,r){return t>=this.rowProportions.length?this:(this.rowProportions[t]=r,this)}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=$L.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=QL.call(this)),this._totalRowProportions}getChildAt(t,r){return this.sizerChildren[r*this.columnCount+t]}childToGridIndex(t,r){if(!t)return null;var x=this.sizerChildren.indexOf(t);return x===-1?null:(r===void 0&&(r={}),r.x=x%this.columnCount,r.y=Math.floor(x/this.columnCount),r)}getColumnWidth(t){var r=this.columnProportions[t],x=r===0?this.columnWidth[t]:r*this.proportionWidthLength;return x}getRowHeight(t){var r=this.rowProportions[t],x=r===0?this.rowHeight[t]:r*this.proportionHeightLength;return x}};Object.assign(Ef.prototype,JL);var Ke=Ef;J.register("gridSizer",function(i,t,r,x,s,g,e,n,p){var f=new Ke(this.scene,i,t,r,x,s,g,e,n,p);return this.scene.add.existing(f),f});Z(window,"RexPlugins.UI.GridSizer",Ke);var sj=function(){return this.rexSizer.hidden?0:this.maxChildWidth+this.space.left+this.space.right},qL=sj;var nj=function(){return this.rexSizer.hidden?0:this.widthWrapResult.height+this.space.top+this.space.bottom},_L=nj;var aj=function(i){i===void 0&&(i=[]);for(var t=this.sizerChildren,r,x=0,s=t.length;x<s;x++)r=t[x],r!==`
`&&r.isRexSizer&&i.push(r);return i},tF=aj;var oj=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,nr.call(this),this},eF=oj;var hj=function(){for(var i=this.innerWidth,t=this.justifyPercentage,r=this.space.item,x=this.space.line,s=this.space.indentLeftOdd,g=this.space.indentLeftEven,e=this.space.indentTopOdd,n=this.space.indentTopEven,p,f,u,l=0,a,o,c=this.innerLeft,h=this.innerTop,d,v,m,y,C=this.widthWrapResult.lines,T,P,S,M,E=h,A=0,R=C.length;A<R;A++){switch(T=C[A],P=T.children,this.rtl&&P.reverse(),a=A%2?g:s,M=c+a,S=i-T.width,this.align){case 0:break;case 1:M+=S;break;case 2:M+=S/2;break;case 3:l=Wm(i,S,t,P.length);break;case 4:l=Wm(i,S,t,P.length),l===0&&(M+=S);break;case 5:l=Wm(i,S,t,P.length),l===0&&(M+=S/2);break}for(var w=!0,O=0,F=P.length;O<F;O++)p=P[O],!p.rexSizer.hidden&&(f=p.rexSizer,u=f.padding,or.call(this,p),d=M+u.left,w?w=!1:d+=r,o=O%2?n:e,v=E+o+u.top,m=mt(p),y=dt(p),M=d+m+u.right+l,hr.call(this,p,d,v,m,y,f.align));E+=T.height+x}},Wm=function(i,t,r,x){return t/i<=r?t/(x-1):0},iF=hj;var lj=function(i,t){t===void 0?t={lines:[],width:0,height:0}:(t.lines.length=0,t.width=0,t.height=0);for(var r=this.sizerChildren,x=this.space.item,s=this.space.line,g=this.space.indentLeftOdd,e=this.space.indentLeftEven,n=this.space.indentTopOdd,p=this.space.indentTopEven,f,u,l,a=0,o,c=t.lines,h=void 0,d,v=0,m=r.length;v<m;v++){if(f=r[v],f===`
`)f=void 0,u=0,d=!0;else{if(f.rexSizer.hidden)continue;f.isRexSizer&&f.layout(),u=uj(f),d=a<u||h===void 0}if(d){h&&(h.width=i-(a+x),t.width=Math.max(t.width,h.width),t.height+=h.height+s),h={children:[],height:0},c.push(h);var o=c.length%2?g:e;a=i-o}a-=u+x,f&&(h.children.push(f),l=fj(f),h.height=Math.max(h.height,l))}return h&&(h.width=i-(a+x),t.width=Math.max(t.width,h.width),t.height+=h.height),t.height+=Math.max(n,p),t},uj=function(i){var t=i.rexSizer.padding;return mt(i)+t.left+t.right},fj=function(i){var t=i.rexSizer.padding;return dt(i)+t.top+t.bottom},rF=lj;var dj=function(i){var t=i-this.space.left-this.space.right;this.widthWrapResult=rF.call(this,t,this.widthWrapResult),Fu.call(this,i)},sF=dj;var nF=Phaser.Math.Distance.Between,cj=function(i,t){var r=this.sizerChildren;if(r.length===0)return-1;for(var x=-1,s=1/0,g=0,e=r.length;g<e;g++){var n=r[g];if(!(Math.abs(n.centerY-t)>n.height/2)){var f=nF(n.left,n.centerY,i,t);s>f&&(s=f,x=g);var p=r[g+1];if(!(p&&p.y===n.y)){var f=nF(n.right,n.centerY,i,t);s>f&&(s=f,x=g+1)}}}return x},aF=cj;var pj=Phaser.Utils.Objects.IsPlainObject,km=Phaser.Utils.Objects.GetValue,vj=Phaser.Display.Align.CENTER,Hm=function(i,t,r,x){if(i===`
`)return this.addNewLine(),this;if(ir.call(this,i),pj(t)){var s=t;t=km(s,"padding",0),r=km(s,"key",void 0),x=km(s,"index",void 0)}t===void 0&&(t=0);var s=this.getSizerConfig(i);return s.align=vj,s.padding=gi(t),x===void 0||x>=this.sizerChildren.length?this.sizerChildren.push(i):this.sizerChildren.splice(x,0,i),r!==void 0&&this.addChildrenMap(r,i),this},oF={add(i,t,r){if(Wt(i))for(var x=i,s=0,g=x.length;s<g;s++)Hm.call(this,x[s],t);else Hm.call(this,i,t,r);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(i,t,r,x){return Hm.call(this,t,r,x,i),this},insertAtPosition(i,t,r,x,s){var g=aF.call(this,i,t);return g===-1&&(g=void 0),this.insert(g,r,x,s),this}};var mj=Phaser.Utils.Array.Remove,hF={remove(i,t){return this.getParentSizer(i)!==this?this:(mj(this.sizerChildren,i),rr.call(this,i,t),this)},removeAll(i){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],i);return this},clear(i){return this.sizerChildren.length=0,as.call(this,i),this}};var lF={getChildrenWidth:qL,getChildrenHeight:_L,getChildrenSizers:tF,preLayout:eF,layoutChildren:iF,runWidthWrap:sF};Object.assign(lF,oF,hF);var uF=lF;var gj=function(i){i===void 0&&(i=this.sizerChildren);for(var t=0,r,x,s=0,g=i.length;s<g;s++)r=i[s],r!==`
`&&(x=this.getChildWidth(r),t=Math.max(x,t));return t},fF=gj;var xj=function(i){i===void 0&&(i=this.sizerChildren);for(var t=0,r,x,s=0,g=i.length;s<g;s++)r=i[s],r!==`
`&&(x=r.isRexSizer?Math.max(r.minHeight,r.childrenHeight):r.hasOwnProperty("minHeight")?r.minHeight:dt(r),t=Math.max(x,t));return t},dF=xj;var cF=Phaser.Utils.Objects.IsPlainObject,Ee=Phaser.Utils.Objects.GetValue,Mf=class extends Ti{constructor(t,r,x,s,g,e){cF(r)?(e=r,r=Ee(e,"x",0),x=Ee(e,"y",0),s=Ee(e,"width",void 0),g=Ee(e,"height",void 0)):cF(s)&&(e=s,s=Ee(e,"width",void 0),g=Ee(e,"height",void 0)),super(t,r,x,s,g,e),this.type="rexFixWidthSizer",this.sizerChildren=[],this.setOrientation(Ee(e,"orientation",0)),this.setItemSpacing(Ee(e,"space.item",0)),this.setLineSpacing(Ee(e,"space.line",0)),this.setIntentLeft(Ee(e,"space.indentLeftOdd",0),Ee(e,"space.indentLeftEven",0)),this.setIntentTop(Ee(e,"space.indentTopOdd",0),Ee(e,"space.indentTopEven",0)),this.setAlign(Ee(e,"align",0)),this.setJustifyPercentage(Ee(e,"justifyPercentage",.25)),this.setRTL(Ee(e,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=hs(t),this}setItemSpacing(t){return this.space.item=t,this}setLineSpacing(t){return this.space.line=t,this}setIntentLeft(t,r){return this.space.indentLeftOdd=t,this.space.indentLeftEven=r,this}setIntentTop(t,r){return this.space.indentTopOdd=t,this.space.indentTopEven=r,this}setAlign(t){return typeof t=="string"&&(t=yj[t]),this.align=t,this}setJustifyPercentage(t){return this.justifyPercentage=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=fF.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=dF.call(this)),this._maxChildHeight}},yj={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(Mf.prototype,uF);var Ei=Mf;J.register("fixWidthSizer",function(i,t,r,x,s){var g=new Ei(this.scene,i,t,r,x,s);return this.scene.add.existing(g),g});Z(window,"RexPlugins.UI.FixWidthSizer",Ei);J.register("overlapSizer",function(i,t,r,x,s){var g=new Nt(this.scene,i,t,r,x,s);return this.scene.add.existing(g),g});Z(window,"RexPlugins.UI.OverlapSizer",Nt);J.register("space",function(){var i=new Hs(this.scene);return i});Z(window,"RexPlugins.UI.Space",Hs);var Cj=function(i,t,r,x){var s=new zo(t,r,x);if(i&&!i.isRexSizer){var g=s.createGeometryMask();i.setMask(g),this.once("destroy",function(){i.setMask(),g.destroy()})}return this.pin(s),s},Be=Cj;var Tj=function(i,t,r){if(!!i){var x=t==null,s=r==null;return x&&s||(x||(i.displayWidth=t),s||(i.displayHeight=r),x&&(i.scaleX=i.scaleY),s&&(i.scaleY=i.scaleX)),i}},Yo=Tj;var Sj=function(i){i===void 0?i={}:typeof i=="string"&&(i={text:i});var t=i.text||"";this.setText(t);var r=this.childrenMap.icon;if(r){i.icon===void 0?this.hide(r):this.show(r);var x=i.iconSize;x&&(this.setChildDisplaySize(r,x,x),this.iconWidth!==void 0&&this.setIconSize(x)),this.setIconTexture(i.icon,i.iconFrame)}var s=this.childrenMap.action;if(s){i.action===void 0?this.hide(s):this.show(s);var g=i.actionSize;g&&(this.setChildDisplaySize(s,g,g),this.actionWidth!==void 0&&this.setActionSize(g)),this.setActionTexture(i.action,i.actionFrame)}return this},pF=Sj;var Pj={resetDisplayContent:pF},vF=Pj;var se=Phaser.Utils.Objects.GetValue,Af=class extends lt{constructor(t,r){super(t,r),this.type="rexLabel";var x=se(r,"background",void 0),s=se(r,"icon",void 0),g=se(r,"iconMask",void 0),e=se(r,"text",void 0),n=se(r,"action",void 0),p=se(r,"actionMask",void 0),f=se(r,"align",void 0);if(x&&this.addBackground(x),(f==="right"||f==="bottom"||f==="center")&&this.addSpace(),s){var u=se(r,"space.icon",0),l;this.orientation===0?(e||n)&&(l={right:u}):(e||n)&&(l={bottom:u});var a=se(r,"squareFitIcon",!1)?1:0;if(this.add(s,{proportion:0,padding:l,fitRatio:a}),g&&(g=Be.call(this,s,s,1)),!a){var o=se(r,"iconSize",void 0);this.setIconSize(se(r,"iconWidth",o),se(r,"iconHeight",o))}}if(e){var c=se(r,"space.text",0),h=se(r,"expandTextWidth",!1),d=se(r,"expandTextHeight",!1),v,l,m;this.orientation===0?(v=h?1:0,n&&(l={right:c}),m=d):(v=d?1:0,n&&(l={bottom:c}),m=h),this.add(e,{proportion:v,expand:m,padding:l})}if(n){var a=se(r,"squareFitAction",!1)?1:0;if(this.add(n,{proportion:0,fitRatio:a}),p&&(p=Be.call(this,n,n,1)),!a){var y=se(r,"actionSize");this.setActionSize(se(r,"actionWidth",y),se(r,"actionHeight",y))}}f==="center"&&this.addSpace(),this.addChildrenMap("background",x),this.addChildrenMap("icon",s),this.addChildrenMap("iconMask",g),this.addChildrenMap("text",e),this.addChildrenMap("action",n),this.addChildrenMap("actionMask",p)}get text(){var t=this.childrenMap.text;return t===void 0?"":t.text}set text(t){var r=this.childrenMap.text;r!==void 0&&r.setText(t)}setText(t){return this.text=t,this}appendText(t){return this.text+=t,this}setIconTexture(t,r){var x=this.childrenMap.icon;return x===void 0?this:(x.setTexture(t,r),this.iconWidth!==void 0&&(Yo(x,this.iconWidth,this.iconHeight),this.resetChildScaleState(x)),this)}setTexture(t,r){return this.setIconTexture(t,r),this}setIconSize(t,r){return r===void 0&&(r=t),this.iconWidth=t,this.iconHeight=r,this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}setActionTexture(t,r){var x=this.childrenMap.action;return x===void 0?this:(x.setTexture(t,r),this.actionWidth!==void 0&&(Yo(x,this.actionWidth,this.actionHeight),this.resetChildScaleState(x)),this)}get actionTexture(){var t=this.childrenMap.action;if(t!==void 0)return t.texture}get actionFrame(){var t=this.childrenMap.action;if(t!==void 0)return t.frame}setActionSize(t,r){return r===void 0&&(r=t),this.actionWidth=t,this.actionHeight=r,this}preLayout(){var t=this.childrenMap.icon;t&&this.iconWidth!==void 0&&Yo(t,this.iconWidth,this.iconHeight);var r=this.childrenMap.action;r&&this.actionWidth!==void 0&&Yo(r,this.actionWidth,this.actionHeight),super.preLayout()}runLayout(t,r,x){if(this.ignoreLayout)return this;super.runLayout(t,r,x);var s=this.childrenMap.iconMask;s&&(s.setPosition(),this.resetChildPositionState(s));var g=this.childrenMap.actionMask;return g&&(g.setPosition(),this.resetChildPositionState(g)),this}resize(t,r){super.resize(t,r);var x=this.childrenMap.iconMask;x&&x.resize();var s=this.childrenMap.actionMask;return s&&s.resize(),this}};Object.assign(Af.prototype,vF);var xe=Af;J.register("label",function(i){var t=new xe(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Label",xe);var Ej=function(i,t){var r=new _a(i,t);return i.add.existing(r),r},ne=Ej;var ga=Phaser.Utils.Objects.GetValue,Mj=Phaser.GameObjects.Text,Aj=Phaser.GameObjects.BitmapText,Rj=function(i,t){var r=ga(t,"$type");r===void 0&&ga(t,"key")&&(r="bitmaptext");var x;switch(r){case"bitmaptext":var s=ga(t,"key"),g=ga(t,"size");g===void 0&&(g=ga(t,"fontSize")),x=new Aj(i,0,0,s,"",g);var e=ga(t,"color");e!==void 0&&x.setTint(e);break;case"text":x=new Mj(i,0,0,"",t);break;default:x=new Os(i,0,0,"",t);break}return i.add.existing(x),x},Rf=Rj;var Oj=Phaser.GameObjects.BitmapText,wj=function(i){return i instanceof Oj},Of=wj;var Lj=Phaser.GameObjects.Text,Fj=function(i){return i instanceof Lj},xa=Fj;var bj=function(i){var t=function(r){var x=i.padding,s=r-x.left-x.right,g=i.style;return xa(i)?(g.wordWrapWidth=s,g.maxLines=0):(g.wrapMode===0&&(g.wrapMode=1),g.wrapWidth=s,g.maxLines=0),g.fixedWidth=r,g.fixedHeight=0,i.updateText(),i.minHeight=i.height,i};return t},mF=bj;var Dj=function(i){var t=function(r){return i.setFixedSize(r,0).runWordWrap(),i.minHeight=i.height,i};return t},gF=Dj;var Ij=function(i){var t=function(r){return i.setMaxWidth(r),i.minHeight=i.height,i};return t},xF=Ij;var Bj=function(i){return i instanceof oo},Gj=function(i,t){return t===void 0&&(t=0),i._minWidth=t,i.runWidthWrap=Bj(i)?gF(i):Of(i)?xF(i):mF(i),i},wf=Gj;var Nj=Phaser.GameObjects.Image,Vj=function(i,t){var r=new Nj(i,0,0,"");return i.add.existing(r),r},Km=Vj;var Uo=Phaser.Utils.Objects.GetValue,zj=function(i,t,r){t=t?wt(t):{};var x=Uo(r,"background",ne),s=Uo(r,"text",Rf),g=Uo(r,"icon",Km),e=Uo(r,"action",Km);if(x?t.background=x(i,t.background):delete t.background,s){var n=Uo(t,"wrapText",!1);n&&(n===!0&&(n="word"),Z(t,"text.wrap.mode",n),t.expandTextWidth=!0),t.text=s(i,t.text),n&&(t.text=wf(t.text))}else delete t.text;return g&&t.icon!==null?t.icon=g(i,t.icon):delete t.icon,e&&t.action!==null?t.action=e(i,t.action):delete t.action,t},ya=zj;var jm=class extends xe{constructor(t,r,x){r=ya(t,r,x),super(t,r),this.type="rexSimpleLabel"}setActiveState(t){var r=this.childrenMap.background;return r&&r.setActiveState&&r.setActiveState(t),this}setHoverState(t){var r=this.childrenMap.background;return r&&r.setHoverState&&r.setHoverState(t),this}setDisableState(t){var r=this.childrenMap.background;return r&&r.setDisableState&&r.setDisableState(t),this}},Xo=jm;J.register("simpleLabel",function(i,t){var r=new Xo(this.scene,i,t);return this.scene.add.existing(r),r});Z(window,"RexPlugins.UI.SimpleLabel",Xo);var Dt=Phaser.Utils.Objects.GetValue,Zm=class extends lt{constructor(t,r){super(t,r),this.type="rexTitleLabel";var x=Dt(r,"background",void 0),s=Dt(r,"icon",void 0),g=Dt(r,"iconMask",void 0),e=Dt(r,"title",void 0),n=Dt(r,"separator",void 0),p=Dt(r,"text",void 0),f=Dt(r,"action",void 0),u=Dt(r,"actionMask",void 0),l=p||e||n;if(x&&this.addBackground(x),s){var a=void 0;this.orientation===0?(l||f)&&(a={right:Dt(r,"space.icon",0),top:Dt(r,"space.iconTop",0),bottom:Dt(r,"space.iconBottom",0)}):(l||f)&&(a={bottom:Dt(r,"space.icon",0),left:Dt(r,"space.iconLeft",0),right:Dt(r,"space.iconRight",0)}),this.add(s,{proportion:0,padding:a}),g&&(g=Be.call(this,s,s,1))}if(l){var o=new lt(t,{orientation:1}),c=Dt(r,"space.separator",0);if(e){var h=Dt(r,"align.title","right"),a={bottom:!n&&p?c:0};o.add(e,{align:h})}if(n){var a={top:e?c:0,bottom:p?c:0,left:Dt(r,"space.separatorLeft",0),right:Dt(r,"space.separatorRight",0)};o.add(n,{expand:!0,padding:a})}if(p){var d=Dt(r,"align.text","right");o.add(p,{align:d})}var a=void 0;f&&(a={right:Dt(r,"space.text",0)}),this.add(o,{proportion:1,padding:a})}if(f){var a;this.orientation===0?a={top:Dt(r,"space.actionTop",0),bottom:Dt(r,"space.actionBottom",0)}:a={left:Dt(r,"space.actionLeft",0),right:Dt(r,"space.actionRight",0)},this.add(f,{proportion:0,padding:a}),u&&(u=Be.call(this,f,f,1))}this.addChildrenMap("background",x),this.addChildrenMap("icon",s),this.addChildrenMap("iconMask",g),this.addChildrenMap("title",e),this.addChildrenMap("separator",n),this.addChildrenMap("text",p),this.addChildrenMap("action",f),this.addChildrenMap("actionMask",u)}get title(){var t=this.childrenMap.title;return t===void 0?"":t.title}set title(t){var r=this.childrenMap.title;r!==void 0&&r.setText(t)}setTitle(t){return this.title=t,this}appendTitle(t){return this.title+=t,this}get text(){var t=this.childrenMap.text;return t===void 0?"":t.text}set text(t){var r=this.childrenMap.text;r!==void 0&&r.setText(t)}setText(t){return this.text=t,this}appendText(t){return this.text+=t,this}setTexture(t,r){var x=this.childrenMap.icon;if(x!==void 0)return x.setTexture(t,r),this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}runLayout(t,r,x){if(this.ignoreLayout)return this;super.runLayout(t,r,x);var s=this.childrenMap.iconMask;s&&(s.setPosition(),this.resetChildPositionState(s));var g=this.childrenMap.actionMask;return g&&(g.setPosition(),this.resetChildPositionState(g)),this}resize(t,r){super.resize(t,r);var x=this.childrenMap.iconMask;x&&x.resize();var s=this.childrenMap.actionMask;return s&&s.resize(),this}},Jm=Zm;J.register("titleLabel",function(i){var t=new Jm(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.TitleLabel",Jm);var Mt=Phaser.Utils.Objects.GetValue,Yj=Phaser.Utils.Objects.IsPlainObject,Uj=function(i,t){var r=Mt(t,"background",void 0),x=Mt(t,"icon",void 0),s=Mt(t,"iconMask",void 0),g=Mt(t,"nameText",void 0),e=Mt(t,"valueText",void 0),n=Mt(t,"bar",void 0),p=Mt(t,"action",void 0),f=Mt(t,"actionMask",void 0);Yj(n)&&(n=new Eo(i,n),i.add.existing(n),g&&i.children.moveBelow(n,g),e&&i.children.moveBelow(n,e));var u=g||e||n;if(r&&this.addBackground(r),x){var l=void 0;this.orientation===0?(u||p)&&(l={right:Mt(t,"space.icon",0),top:Mt(t,"space.iconTop",0),bottom:Mt(t,"space.iconBottom",0)}):(u||p)&&(l={bottom:Mt(t,"space.icon",0),left:Mt(t,"space.iconLeft",0),right:Mt(t,"space.iconRight",0)}),this.add(x,{proportion:0,padding:l}),s&&(s=Be.call(this,x,x,1))}if(u){var a=new lt(i,{orientation:1}),o;if(g||e){if(o=new lt(i,{orientation:0}),g){g.text===""&&g.setText(" "),g.setOrigin(0,g.originY);var l={left:Mt(t,"space.name",0)};o.add(g,{padding:l})}if(e){e.text===""&&e.setText(" "),e.setOrigin(1,e.originY),o.addSpace();var l={right:Mt(t,"space.value",0)};o.add(e,{padding:l}),this.setValueTextFormatCallback(Mt(t,"valueTextFormatCallback",Xj),Mt(t,"valueTextFormatCallbackScope",void 0))}a.add(o,{expand:!0})}if(n){var l={top:o?Mt(t,"space.bar",0):0,bottom:Mt(t,"space.barBottom",0),left:Mt(t,"space.barLeft",0),right:Mt(t,"space.barRight",0)};a.add(n,{expand:!0,padding:l})}var l=void 0;p&&(l={right:Mt(t,"space.text",0)});var c=Mt(t,"align.text","bottom");this.add(a,{proportion:1,align:c,padding:l})}if(p){var l;this.orientation===0?l={top:Mt(t,"space.actionTop",0),bottom:Mt(t,"space.actionBottom",0)}:l={left:Mt(t,"space.actionLeft",0),right:Mt(t,"space.actionRight",0)},this.add(p,{proportion:0,padding:l}),f&&(f=Be.call(this,p,p,1))}this.addChildrenMap("background",r),this.addChildrenMap("icon",x),this.addChildrenMap("iconMask",s),this.addChildrenMap("name",g),this.addChildrenMap("value",e),this.addChildrenMap("bar",n),this.addChildrenMap("action",p),this.addChildrenMap("actionMask",f)},Xj=function(i,t,r){return i.toString()},yF=Uj;var Wj=Phaser.Math.Clamp,CF={setValueTextFormatCallback(i,t){return this.valueTextFormatCallback=i,this.valueTextFormatCallbackScope=t,this},getFormatValueText(i,t,r){i===void 0&&(i=this.value),t===void 0&&(t=this.minValue),r===void 0&&(r=this.maxValue);var x;return this.valueTextFormatCallbackScope?x=this.valueTextFormatCallback(i,t,r):x=this.valueTextFormatCallback.call(this.valueTextFormatCallbackScope,i,t,r),x},updateValueText(i,t,r){var x=this.childrenMap.value;return x&&this.valueTextFormatCallback&&(x.setText(this.getFormatValueText(i,t,r)),x.layout&&x.layout()),this},setValue(i,t,r){return i=Wj(i,t,r),this.value=i,this.minValue=t,this.maxValue=r,this.updateValueText(i,t,r),this.setBarValue(i,t,r),this}};var Lf=class extends lt{constructor(t,r){super(t,r),this.type="rexNameValueLabel",yF.call(this,t,r)}get nameText(){var t=this.childrenMap.name;return t===void 0?"":t.text}set nameText(t){var r=this.childrenMap.name;r!==void 0&&r.setText(t)}setNameText(t){return this.nameText=t,this}get valueText(){var t=this.childrenMap.value;return t===void 0?"":t.text}set valueText(t){var r=this.childrenMap.value;r!==void 0&&r.setText(t)}setValueText(t){return this.valueText=t,this}get barValue(){var t=this.childrenMap.bar;if(t!==void 0)return t.value}set barValue(t){var r=this.childrenMap.bar;r!==void 0&&r.setValue(t)}setBarValue(t,r,x){var s=this.childrenMap.bar;return s===void 0?this:(s.setValue(t,r,x),this)}easeBarValueTo(t,r,x){var s=this.childrenMap.bar;return s===void 0?this:(s.easeValueTo(t,r,x),this)}setTexture(t,r){var x=this.childrenMap.icon;if(x!==void 0)return x.setTexture(t,r),this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}runLayout(t,r,x){if(this.ignoreLayout)return this;super.runLayout(t,r,x);var s=this.childrenMap.iconMask;s&&(s.setPosition(),this.resetChildPositionState(s));var g=this.childrenMap.actionMask;return g&&(g.setPosition(),this.resetChildPositionState(g)),this}resize(t,r){super.resize(t,r);var x=this.childrenMap.iconMask;x&&x.resize();var s=this.childrenMap.actionMask;return s&&s.resize(),this}};Object.assign(Lf.prototype,CF);var $m=Lf;J.register("nameValueLabel",function(i){var t=new $m(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.NameValueLabel",$m);var Ff=lt.prototype.add,TF=lt.prototype.addSpace,Qm=function(i){var t=!i.isRexSpace,r=!t||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(t){var x=!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom");x&&TF.call(this),Ff.call(this,i,{proportion:r,expand:!0});var s=!this.buttonsExpand&&this.buttonsAlign==="center";s&&TF.call(this),this.hasTailSpace=s}else Ff.call(this,i,{proportion:r,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var g=this.sizerChildren.length-1;Ff.call(this,i,{index:g,proportion:r,expand:!0})}else Ff.call(this,i,{proportion:r,expand:!0});return t&&this.buttonGroup.add(i),this},SF={addButton(i){if(Wt(i))for(var t=i,r=0,x=t.length;r<x;r++)Qm.call(this,t[r]);else Qm.call(this,i);return this},addButtons(i){for(var t=0,r=i.length;t<r;t++)Qm.call(this,i[t]);return this}};var kj=lt.prototype.remove,Hj=lt.prototype.clear,qm=function(i,t){return this.getParentSizer(i)!==this?this:(this.buttonGroup.remove(i),kj.call(this,i,t),this)},PF={remove(i,t){if(Wt(i))for(var r=i,x=0,s=r.length;x<s;x++)qm.call(this,r[x],t);else qm.call(this,i,t);return this},clear(i){var t=this.buttonGroup.buttons;return t.length=0,Hj.call(this,i),this},removeButton(r,t){var r=this.getButton(r);return r?(this.remove(r,t),this):this},clearButtons(i){for(var t=this.buttonGroup.buttons,r=t.length-1;r>=0;r--)qm.call(this,t[r],i);return this}};var Kj=function(i,t,r){if(!!i){var x=this.setValueCallback,s=this.setValueCallbackScope;x&&(s?x.call(s,i,t,r):x(i,t,r)),this.fireEvent("button.statechange",i,t,r)}},EF=Kj;var jj=function(i){var t=this;i._selected=void 0,Object.defineProperty(i,"selected",{get:function(){return i._selected},set:function(r){if(i._selected!==r){var x=i._selected;i._selected=r,EF.call(t,i,r,x)}},enumerable:!0,configurable:!0}),i.selected=!1},MF=jj;var AF={add(i){return this.buttons.push(i),i._click||(i._click=new Ns(i,this.clickConfig),i._click.on("click",function(t,r,x,s){this.fireEvent("button.click",r,x,s)},this).on("enable",function(t,r){this.fireEvent("button.enable",r)},this).on("disable",function(t,r){this.fireEvent("button.disable",r)},this),i.on("pointerover",function(t,r,x,s){this.fireEvent("button.over",i,t,s)},this).on("pointerout",function(t,r){this.fireEvent("button.out",i,t,r)},this)),this.buttonsType&&(i.name===void 0&&console.error(`${this.parent.constructor.name}: Option button miss value`),MF.call(this,i)),this},addMultiple(i){for(var t=0,r=i.length;t<r;t++)this.add(i[t]);return this}};var Zj=Phaser.Utils.Array.Remove,RF={remove(i){return this.buttonsType&&delete i.selected,Zj(this.buttons,i),this},clear(){if(this.buttonsType)for(var i=this.buttons,t=0,r=i.length;t<r;t++)delete i[t].selected;return this.buttons.length=0,this}};var Jj=function(i,t,...r){var x;if(typeof t=="number"){if(x=t,t=this.buttons[x],!t)return}else if(x=this.buttons.indexOf(t),x===-1)return;this.eventEmitter!==this.parent&&this.parent.emit(i,t,x,...r),this.groupName!==void 0?this.eventEmitter.emit(i,t,this.groupName,x,...r):this.eventEmitter.emit(i,t,x,...r)},OF=Jj;var Wo=Phaser.Utils.Objects.GetValue,wF={setButtonsType(i){i===void 0&&(i={});var t=Wo(i,"buttonsType",i.type);if(this.buttonsType=t,!this.buttonsType)return this;var r,x;switch(r=Wo(i,"setValueCallback",void 0),x=Wo(i,"setValueCallbackScope",void 0),r===void 0&&(r=Wo(i,"setButtonStateCallback",void 0),x=Wo(i,"setButtonStateCallbackScope",void 0)),this.setValueCallback=r,this.setValueCallbackScope=x,t){case"radio":this.setRadioType();break;case"checkboxes":this.setCheckboxesType();break}return this},setRadioType(){var i=this.parent,t=this.buttons;i._value=void 0;var r=void 0;return Object.defineProperty(i,"value",{get:function(){return i._value},set:function(x){if(i._value!==x){i._value=x;for(var s=0,g=t.length;s<g;s++){var e=t[s];e.rexSizer.hidden||(r===void 0?e.name===x?e.selected=!0:e.selected=!1:r===s?e.selected=!0:e.selected=!1)}}},enumerable:!0,configurable:!0}),i.on("button.click",function(x){r=this.buttons.indexOf(x),i.value=x.name,r=void 0},this),this},setCheckboxesType(){var i=this.parent;return i.on("button.click",function(t){t.selected=!t.selected}),this},clearAllButtonsState(){for(var i=this.buttons,t=0,r=i.length;t<r;t++){var x=i[t];x.selected=!1}return this},getAllButtonsState(){for(var i={},t=this.buttons,r=0,x=t.length;r<x;r++){var s=t[r];s.rexSizer.hidden||(i[s.name]=s.selected)}return i},setSelectedButtonName(i){return this.parent.value=i,this},getSelectedButtonName(){return this.parent.value},setButtonState(i,t){t===void 0&&(t=!0);for(var r=this.buttons,x=0,s=r.length;x<s;x++){var g=r[x];if(!g.rexSizer.hidden&&g.name===i){g.selected=t;break}}return this},getButtonState(i){for(var t=this.buttons,r=0,x=t.length;r<x;r++){var s=t[r];if(!s.rexSizer.hidden&&s.name===i)return s.selected}}};var $j=function(i,t){if(i)if(Wt(i)){for(var r,x=0,s=i.length;x<s;x++)if(r=LF(i[x],t),r)return r}else{var r;for(var g in i)if(r=LF(i[g],t),r)return r}else return null},LF=function(i,t){return i?i.hasOwnProperty("name")?i.name===t?i:null:GetElementByName(i,t):null},FF=$j;var bF=FF;var us={getButton(i){var t=this.buttons,r,x=typeof i;switch(x){case"number":r=t[i];break;case"string":r=bF(t,i);break;default:r=i,t.indexOf(r)===-1&&(r=void 0);break}return r},setButtonEnable(i,t){var r=this.buttons;if(i===void 0||typeof i=="boolean"){t=i;for(var x=0,s=r.length;x<s;x++)r[x]._click.setEnable(t)}else this.getButton(i)._click.setEnable(t);return this},toggleButtonEnable(i){var t=this.buttons;if(i===void 0||typeof i=="boolean")for(var r=0,x=t.length;r<x;r++)t[r]._click.toggleEnable();else this.getButton(i)._click.toggleEnable();return this},getButtonEnable(i){return i===void 0&&(i=0),this.getButton(i)._click.enable},emitButtonClick(i){var t=this.buttonGroup?this.buttonGroup:this;return t.fireEvent("button.click",i),this},showButton(i){return yi(this.getButton(i)),this},hideButton(i){return Ci(this.getButton(i)),this},isButtonShown(i){return ra(this.getButton(i)),this},forEachButtton(i,t){for(var r=this.buttons,x=0,s=r.length;x<s;x++)t?i.call(t,r[x],x,r):i(r[x],x,r);return this}};var bf=class{constructor(t){this.parent=t.parent,this.eventEmitter=t.eventEmitter,this.groupName=t.groupName,this.clickConfig=t.clickConfig,this.buttonsType=void 0,this.buttons=[]}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}},Qj={fireEvent:OF};Object.assign(bf.prototype,AF,RF,wF,us,Qj);var Ca=bf;var Ta={clearAllButtonsState(){return this.buttonGroup.clearAllButtonsState(),this},getAllButtonsState(){return this.buttonGroup.getAllButtonsState()},setSelectedButtonName(i){return this.buttonGroup.setSelectedButtonName(i),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(i,t){return this.buttonGroup.setButtonState(i,t),this},getButtonState(i){return this.buttonGroup.getButtonState(i)}};var Ks=Phaser.Utils.Objects.GetValue,Df=class extends lt{constructor(t,r){r===void 0&&(r={});var x=r.space;typeof x=="number"&&(r.space={item:x}),super(t,r),this.type="rexButtons",this.buttonGroup=new Ca({parent:this,eventEmitter:Ks(r,"eventEmitter",this),groupName:Ks(r,"groupName",void 0),clickConfig:Ks(r,"click",void 0)}).setButtonsType(r);var s=Ks(r,"background",void 0),g=Ks(r,"buttons",void 0);this.buttonsExpand=Ks(r,"expand",!1),this.buttonsAlign=Ks(r,"align",void 0),s&&this.addBackground(s),g&&this.addButtons(g),this.addChildrenMap("background",s),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(Df.prototype,SF,PF,us,Ta);var bt=Df;J.register("buttons",function(i){var t=new bt(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Buttons",bt);var qj=Ke.prototype.add,DF={addButton(i,t,r){return qj.call(this,i,t,r,void 0,0,this.buttonsExpand),this.buttonGroup.add(i),this},addButtons(i,t){for(var r=0,x=i;r<x;r++)this.addButton(i[r],void 0,t);return this}};var _j=Ke.prototype.remove,tZ=Ke.prototype.clear,_m=function(r,t){var r=this.getButton(r);return r?(this.buttonGroup.remove(r),_j.call(this,r,t),this):this},IF={remove(i,t){if(Wt(i))for(var r=i,x=0,s=r.length;x<s;x++)_m.call(this,r[x],t);else _m.call(this,i,t);return this},clear(i){var t=this.buttonGroup.buttons;return t.length=0,tZ.call(this,i),this},removeButton(i,t){return this.remove(i,t),this},clearButtons(i){for(var t=this.buttonGroup.buttons,r=t.length-1;r>=0;r--)_m.call(this,t[r],i);return this}};var dr=Phaser.Utils.Objects.GetValue,If=class extends Ke{constructor(t,r){r===void 0&&(r={});var x=dr(r,"row",0),s=dr(r,"column",r.col||0),g=dr(r,"createCellContainerCallback"),e=dr(r,"buttons",void 0),n=dr(r,"expand",!0),p=n?1:0;if(g&&(r.createCellContainerCallback=void 0),e!==void 0){x=Math.max(x,e.length);for(var f=0,u=e.length;f<u;f++)s=Math.max(s,e[f].length)}r.row=x,r.column=s,r.columnProportions=p,r.rowProportions=p,super(t,r),this.type="rexGridButtons",this.buttonGroup=new Ca({parent:this,eventEmitter:dr(r,"eventEmitter",this),groupName:dr(r,"groupName",void 0),clickConfig:dr(r,"click",void 0)}).setButtonsType(r);var l=dr(r,"background",void 0);this.buttonsExpand=n;var a=dr(r,"space",void 0);if(typeof a=="number"&&(a={itemX:a,itemY:a}),l&&this.addBackground(l),e)for(var o,c,h=0,d=e.length;h<d;h++){o=e[h];for(var v=0,m=o.length;v<m;v++)c=o[v],c&&this.addButton(c,v,h)}else if(g)for(var y=0;y<x;y++)for(var C=0;C<s;C++){var c=g(t,C,y);c&&this.addButton(c,C,y)}this.addChildrenMap("background",l),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(If.prototype,DF,IF,us,Ta);var js=If;J.register("gridButtons",function(i){var t=new js(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.GridButtons",js);var BF=Ei.prototype.add,Bf=function(i){return BF.call(this,i),this.buttonGroup.add(i),this},GF={addButton(i){if(Wt(i))for(var t=i,r=0,x=t.length;r<x;r++)Bf.call(this,t[r]);else Bf.call(this,i);return this},addButtons(i){if(Wt(i[0]))for(var t=i,r,x=0,s=t.length-1;x<=s;x++){r=t[x];for(var g=0,e=r.length;g<e;g++)Bf.call(this,r[g]);x>s&&BF.addNewLine(this)}else for(var g=0,e=i.length;g<e;g++)Bf.call(this,i[g]);return this}};var eZ=Ei.prototype.remove,iZ=Ei.prototype.clear,tg=function(r,t){var r=this.getButton(r);return r?(this.buttonGroup.remove(r),eZ.call(this,r,t),this):this},NF={remove(i,t){if(Wt(i))for(var r=i,x=0,s=r.length;x<s;x++)tg.call(this,r[x],t);else tg.call(this,i,t);return this},clear(i){var t=this.buttonGroup.buttons;return t.length=0,iZ.call(this,i),this},removeButton(i,t){return this.remove(i,t),this},clearButtons(i){for(var t=this.buttonGroup.buttons,r=t.length-1;r>=0;r--)tg.call(this,t[r],i);return this}};var Sa=Phaser.Utils.Objects.GetValue,Gf=class extends Ei{constructor(t,r){r===void 0&&(r={});var x=r.space;typeof x=="number"&&(r.space={item:x,line:x}),super(t,r),this.type="rexFixWidthButtons",this.buttonGroup=new Ca({parent:this,eventEmitter:Sa(r,"eventEmitter",this),groupName:Sa(r,"groupName",void 0),clickConfig:Sa(r,"click",void 0)}).setButtonsType(r);var s=Sa(r,"background",void 0),g=Sa(r,"buttons",void 0);this.buttonsAlign=Sa(r,"align",void 0),s&&this.addBackground(s),g&&this.addButtons(g),this.addChildrenMap("background",s),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(Gf.prototype,GF,NF,us,Ta);var Mi=Gf;J.register("fixWidthButtons",function(i){var t=new Mi(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.FixWidthButtons",Mi);var VF={setAccept(i){return this.childrenMap.fileChooser.setAccept(i),this},setMultiple(i){return this.childrenMap.fileChooser.setMultiple(i),this},loadFile(i,t,r,x,s){return this.childrenMap.fileChooser.loadFile(i,t,r,x,s),this},loadFilePromise(i,t,r,x){return this.childrenMap.fileChooser.loadFilePromise(i,t,r,x)}};var zF=Phaser.Utils.Objects.GetValue,Nf=class extends xe{constructor(t,r){super(t,r),this.type="rexFileSelectorButton";var x=new ks(t);t.add.existing(x),this.addBackground(x),this.addChildrenMap("fileChooser",x),this.setAccept(zF(r,"accept","")),this.setMultiple(zF(r,"multiple",!1)),x.on("change",function(s){var g=s.files;g.length!==0&&(g=Array.from(g),this.emit("select",g,this))},this)}get files(){return this.childrenMap.fileChooser.files}};Object.assign(Nf.prototype,VF);var eg=Nf;J.register("fileSelectorButton",function(i){var t=new eg(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.FileSelectorButton",eg);var YF={getChoice(i){var t=this.childrenMap.choicesSizer;if(t)return t.getButton(i)},getAction(i){return this.childrenMap.actionsSizer.getButton(i)},getToolbar(i){return this.childrenMap.toolbarSizer.getButton(i)},getLeftToolbar(i){return this.childrenMap.leftToolbarSizer.getButton(i)},setChoiceEnable(i,t){var r=this.childrenMap.choicesSizer;return r&&r.setButtonEnable(i,t),this},setActionEnable(i,t){return this.childrenMap.actionsSizer.setButtonEnable(i,t),this},setToolbarEnable(i,t){return this.childrenMap.toolbarSizer.setButtonEnable(i,t),this},setLeftToolbarEnable(i,t){return this.childrenMap.leftToolbarSizer.setButtonEnable(i,t),this},toggleChoiceEnable(i){var t=this.childrenMap.choicesSizer;return t&&t.toggleButtonEnable(i),this},toggleActionEnable(i){return this.childrenMap.actionsSizer.toggleButtonEnable(i),this},toggleToolbarEnable(i){return this.childrenMap.toolbarSizer.toggleButtonEnable(i),this},toggleLeftToolbarEnable(i){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(i),this},getChoiceEnable(i){var t=this.childrenMap.choicesSizer;return t?t.getButtonEnable(i):!1},getActionEnable(i){return this.childrenMap.actionsSizer.getButtonEnable(i)},getToolbarEnable(i){return this.childrenMap.toolbarSizer.getButtonEnable(i)},getLeftToolbarEnable(i){return this.childrenMap.leftToolbarSizer.getButtonEnable(i)},emitChoiceClick(i){var t=this.childrenMap.choicesSizer;return t&&t.emitButtonClick(i),this},emitActionClick(i){return this.childrenMap.actionsSizer.emitButtonClick(i),this},emitToolbarClick(i){return this.childrenMap.toolbarSizer.emitButtonClick(i),this},emitLeftToolbarClick(i){return this.childrenMap.leftToolbarSizer.emitButtonClick(i),this},showChoice(i){var t=this.childrenMap.choicesSizer;return t&&t.showButton(i),this},showAction(i){return this.childrenMap.actionsSizer.showButton(i),this},showToolbar(i){return this.childrenMap.toolbarSizer.showButton(i),this},showLeftToolbar(i){return this.childrenMap.leftToolbarSizer.showButton(i),this},hideChoice(i){var t=this.childrenMap.choicesSizer;return t&&t.hideButton(i),this},hideAction(i){return this.childrenMap.actionsSizer.hideButton(i),this},hideToolbar(i){return this.childrenMap.toolbarSizer.hideButton(i),this},hideLeftToolbar(i){return this.childrenMap.leftToolbarSizer.hideButton(i),this},addChoice(i){var t=this.childrenMap.choicesSizer;return t&&t.addButton(i),this},addAction(i){return this.childrenMap.actionsSizer.addButton(i),this},addToolbar(i){return this.childrenMap.toolbarSizer.addButton(i),this},addLeftToolbar(i){return this.childrenMap.leftToolbarSizer.addButton(i),this},removeChoice(i,t){var r=this.childrenMap.choicesSizer;return r&&r.removeButton(i,t),this},removeAction(i,t){return this.childrenMap.actionsSizer.removeButton(i,t),this},removeToolbar(i,t){return this.childrenMap.toolbarSizer.removeButton(i,t),this},removeLeftToolbar(i,t){return this.childrenMap.leftToolbarSizer.removeButton(i,t),this},clearChoices(i){var t=this.childrenMap.choicesSizer;return t&&t.clearButtons(i),this},clearActions(i){return this.childrenMap.actionsSizer.clearButtons(i),this},clearToolbar(i){return this.childrenMap.toolbarSizer.clearButtons(i),this},clearLeftToolbar(i){return this.childrenMap.leftToolbarSizer.clearButtons(i),this},forEachChoice(i,t){var r=this.childrenMap.choicesSizer;return r&&r.forEachButtton(i,t),this},forEachAction(i,t){return this.childrenMap.actionsSizer.forEachButtton(i,t),this},forEachToolbar(i,t){return this.childrenMap.toolbarSizer.forEachButtton(i,t),this},forEachLeftToolbar(i,t){return this.childrenMap.leftToolbarSizer.forEachButtton(i,t),this},setAllButtonsEnable(i){return i===void 0&&(i=!0),this.childrenMap.toolbarSizer&&this.setToolbarEnable(i),this.childrenMap.leftToolbarSizer&&this.setLeftToolbarEnable(i),this.childrenMap.actionsSizer&&this.setActionEnable(i),this.childrenMap.choicesSizer&&this.setChoiceEnable(i),this},getChoicesButtonStates(){var i=this.childrenMap.choicesSizer;return i?i.getAllButtonsState():{}},getChoicesButtonState(i){var t=this.childrenMap.choicesSizer;return i===void 0?t?t.getAllButtonsState():{}:t?t.getButtonState(i):!1},setChoicesButtonState(i,t){var r=this.childrenMap.choicesSizer;return r&&r.setButtonState(i,t),this},clearChoicesButtonStates(){var i=this.childrenMap.choicesSizer;return i&&i.clearAllButtonsState(),this},getChoicesSelectedButtonName(){var i=this.childrenMap.choicesSizer;return i?i.getSelectedButtonName():""},setChoicesSelectedButtonName(i){var t=this.childrenMap.choicesSizer;return t&&t.setSelectedButtonName(i),this}};var UF={onCreateModalBehavior(i){i.on("button.click",function(t,r,x,s,g){if(r==="actions"){var e={index:x,text:t.text,button:t,dialog:i};switch(i.buttonsType){case"radio":e.value=i.getChoicesSelectedButtonName();break;case"checkboxes":e.value=i.getChoicesButtonStates();break;default:e.value=void 0}i.modalClose(e)}})},modal(i,t){return i&&i.defaultBehavior===!1?this.onCreateModalBehavior=!1:delete this.onCreateModalBehavior,oa.modal.call(this,i,t),this}};var XF={};Object.assign(XF,YF,UF);var WF=XF;var ut=Phaser.Utils.Objects.GetValue,Vf=class extends lt{constructor(t,r){r===void 0&&(r={}),r.orientation=1,super(t,r),this.type="rexDialog",this.eventEmitter=ut(r,"eventEmitter",this);var x=ut(r,"background",void 0),s=ut(r,"title",void 0),g=ut(r,"toolbar",void 0),e=ut(r,"toolbarBackground",void 0),n=ut(r,"leftToolbar",void 0),p=ut(r,"leftToolbarBackground",void 0),f=ut(r,"content",void 0),u=ut(r,"description",void 0),l,a=ut(r,"choices",void 0),o=ut(r,"choicesBackground",void 0),c,h=ut(r,"actions",void 0),d=ut(r,"actionsBackground",void 0),v=ut(r,"click",void 0);x&&this.addBackground(x);var m;g&&(m=new bt(t,{groupName:"toolbar",background:e,buttons:g,orientation:0,space:{item:ut(r,"space.toolbarItem",0)},click:v,eventEmitter:this.eventEmitter}));var y;if(n&&(y=new bt(t,{groupName:"leftToolbar",background:p,buttons:n,orientation:0,space:{item:ut(r,"space.leftToolbarItem",0)},click:v,eventEmitter:this.eventEmitter})),s||g||n){var C=!!s&&ut(r,"expand.title",!0),T=ut(r,"align.title","center"),P=s&&!C&&T==="center"||!s&&(g||n),S=!P,M;S?M=new lt(t,{orientation:0}):M=new Nt(t);var E=S?!0:{height:!0};if(y&&M.add(y,{align:"left",expand:E}),s){S&&!C&&T==="right"&&M.addSpace();var R={left:ut(r,"space.titleLeft",0),right:ut(r,"space.titleRight",0)},w=C?1:0;M.add(s,{align:T,proportion:w,expand:E,padding:R}),S&&!C&&T==="left"&&M.addSpace()}m&&(S&&!s&&M.addSpace(),M.add(m,{align:"right",expand:E}));var A=ut(r,"space.title",0),R;(f||u||a||h)&&(R={bottom:A});var w=ut(r,"proportion.title",0);this.add(M,{padding:R,proportion:w,expand:!0})}if(f){var O=ut(r,"align.content","center"),F=ut(r,"space.content",0),R={left:ut(r,"space.contentLeft",0),right:ut(r,"space.contentRight",0),bottom:u||a||h?F:0},w=ut(r,"proportion.content",0),b=ut(r,"expand.content",!0);this.add(f,{align:O,padding:R,proportion:w,expand:b})}if(u){var O=ut(r,"align.description","center"),I=ut(r,"space.description",0),R={left:ut(r,"space.descriptionLeft",0),right:ut(r,"space.descriptionRight",0),bottom:a||h?I:0},w=ut(r,"proportion.description",0),b=ut(r,"expand.description",!0);this.add(u,{align:O,padding:R,proportion:w,expand:b})}if(a){var N=ut(r,"choicesType","").split("-"),z=ko(N,"wrap")?Mi:ko(N,"grid")?js:bt,U=ko(N,"radio")?"radio":ko(N,"checkboxes")?"checkboxes":void 0,W={left:ut(r,"space.choicesBackgroundLeft",0),right:ut(r,"space.choicesBackgroundRight",0),top:ut(r,"space.choicesBackgroundTop",0),bottom:ut(r,"space.choicesBackgroundBottom",0)},D=ut(r,"space.choice",0);z===bt?W.item=D:z===Mi?(W.item=D,W.line=ut(r,"space.choiceLine",D)):(W.column=ut(r,"space.choiceColumn",D),W.row=ut(r,"space.choiceRow",D));var V={width:ut(r,"choicesWidth",void 0),height:ut(r,"choicesHeight",void 0),groupName:"choices",buttonsType:U,background:o,buttons:a,space:W,click:v,eventEmitter:this.eventEmitter,setValueCallback:ut(r,"choicesSetValueCallback",void 0),setValueCallbackScope:ut(r,"choicesSetValueCallbackScope",void 0)};z===bt&&(V.orientation=ko(N,"x")?0:1),l=new z(t,V);var L=ut(r,"space.choices",0),R={left:ut(r,"space.choicesLeft",0),right:ut(r,"space.choicesRight",0),bottom:h?L:0},O=ut(r,"align.choices","center"),w=ut(r,"proportion.choices",0),b=ut(r,"expand.choices",!0);this.add(l,{align:O,padding:R,proportion:w,expand:b}),this.buttonsType=U}if(h){c=new bt(t,{groupName:"actions",background:d,buttons:h,orientation:0,space:{item:ut(r,"space.action",0)},expand:ut(r,"expand.actions",!1),align:ut(r,"align.actions","center"),click:v,eventEmitter:this.eventEmitter});var R={left:ut(r,"space.actionsLeft",0),right:ut(r,"space.actionsRight",0)},w=ut(r,"proportion.action",0);this.add(c,{align:"center",padding:R,proportion:w,expand:!0})}Ho(this,"click"),Ho(this,"over"),Ho(this,"out"),Ho(this,"enable"),Ho(this,"disable"),this.addChildrenMap("background",x),this.addChildrenMap("title",s),this.addChildrenMap("toolbar",g),this.addChildrenMap("leftToolbar",n),this.addChildrenMap("content",f),this.addChildrenMap("description",u),this.addChildrenMap("choices",l?l.buttons:void 0),this.addChildrenMap("actions",c?c.buttons:void 0),this.addChildrenMap("choicesSizer",l),this.addChildrenMap("actionsSizer",c),this.addChildrenMap("toolbarSizer",m),this.addChildrenMap("leftToolbarSizer",y)}},ko=function(i,t){return i.indexOf(t)!==-1},kF={actions:"action",choices:"choice",toolbar:"toolbar",leftToolbar:"leftToolbar"},Ho=function(i,t){i.on(`button.${t}`,function(r,x,s,g,e){!kF.hasOwnProperty(x)||i.emit(`${kF[x]}.${t}`,r,s,g,e)})};Object.assign(Vf.prototype,WF);var Zs=Vf;J.register("dialog",function(i){var t=new Zs(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Dialog",Zs);var rZ=function(i,t,r){var x=new Xo(i,t,r);return i.add.existing(x),x},Kt=rZ;var sZ=function(i){return i===void 0&&(i={}),nZ.call(this,i),aZ.call(this,i),oZ.call(this,i),hZ.call(this,i),this},nZ=function(i){var t=this.childrenMap.title;t.resetDisplayContent(i.title)},aZ=function(i){var t=this.childrenMap.content;if(t.resetDisplayContent)t.resetDisplayContent(i.content);else{var r=i.content||"";t.setText(r)}},oZ=function(i){var t=this.childrenMap.actions;if(!!t){var r=i.buttons;if(r){for(var g=this.scene,e=this.defaultActionConfig,n=this.defaultActionButtonCreator,p=0,f=r.length;p<f;p++){var u=r[p],l=t[p];l||(l=Kt(g,e,n),this.addAction(l)),l.show().resetDisplayContent(u)}this.buttonMode=r.length;for(var p=r.length,f=t.length;p<f;p++)t[p].hide()}else{var x=t[0];x&&x.resetDisplayContent(i.buttonA);var s=t[1];s&&s.resetDisplayContent(i.buttonB)}}},hZ=function(i){var t=this.childrenMap.choices;if(!!t){var r=i.choices;r||(r=[]);for(var x=this.scene,s=this.defaultChoiceConfig,g=this.defaultActionButtonCreator,e=0,n=r.length;e<n;e++){var p=r[e];typeof p=="string"&&(p={text:p});var f=t[e];f||(f=Kt(x,s,g),this.addChoice(f)),f.show().resetDisplayContent(p);var u;p.hasOwnProperty("value")?u=p.value:u=p.text,f.setName(u)}for(var e=r.length,n=t.length;e<n;e++)t[e].hide()}},HF=sZ;var lZ=function(i,t){Ie(i)&&(t=i,i=void 0),i===void 0&&(i={});var r=this.buttonMode===0;return i.hasOwnProperty("anyTouchClose")||(i.anyTouchClose=r),i.hasOwnProperty("manualClose")||(i.manualClose=!r),oa.modal.call(this,i,t),this},KF=lZ;var uZ={resetDisplayContent:HF,modal:KF},jF=uZ;var fZ=function(i){i.setHoverState&&i.setHoverState(!0)},dZ=function(i){i.setHoverState&&i.setHoverState(!1)},cZ=function(i,t,r,x){i.setActiveState&&i.setActiveState(x)},pZ=function(i){i.setDisableState&&i.setDisableState(!1)},vZ=function(i){i.setDisableState&&i.setDisableState(!0)},mZ=function(){this.on("button.over",fZ).on("button.out",dZ).on("button.enable",pZ).on("button.disable",vZ).on("button.statechange",cZ)},ZF=mZ;var zf={v:0,vertical:0,y:0,h:1,horizontal:1,x:1};var gZ=Phaser.Utils.Objects.GetValue,xZ=function(i,t){var r=gZ(i,"scrollMode",0);return typeof r=="string"&&(r=zf[r]),r},fs=xZ;var JF=Phaser.Math.Percent,yZ=function(i,t,r){var x;return i.y===t.y?x=JF(r.x,i.x,t.x):i.x===t.x&&(x=JF(r.y,i.y,t.y)),x},Yf=yZ;var CZ=function(i,t,r){if(!!this.enable){ig.x=t,ig.y=r;var x,s;this.reverseAxis?(x=this.getEndPoint(),s=this.getStartPoint()):(x=this.getStartPoint(),s=this.getEndPoint()),this.value=Yf(x,s,ig)}},ig={},$F=CZ;var TZ=function(i,t,r){if(!!this.enable&&!!i.isDown){rg.x=i.worldX,rg.y=i.worldY;var x,s;this.reverseAxis?(x=this.getEndPoint(),s=this.getStartPoint()):(x=this.getStartPoint(),s=this.getEndPoint());var g=Yf(x,s,rg);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-g)<.1?this.value=g:this.easeValueTo(g)}},rg={},sg=TZ;var SZ=function(i,t){t===void 0&&(t=PZ);var r=this.childrenMap.thumb,x=r.x,s=r.y;return er(r,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,i),t.x=r.x,t.y=r.y,r.x=x,r.y=s,t},PZ={},Uf=SZ;var EZ=Phaser.Display.Align.LEFT_CENTER,MZ=Phaser.Display.Align.TOP_CENTER,AZ=function(i){if(i===void 0&&(i=RZ),this.childrenMap.thumb){var t=this.orientation===0?EZ:MZ;Uf.call(this,t,i)}else this.orientation===0?(i.x=this.innerLeft+1,i.y=this.centerY):(i.x=this.centerX,i.y=this.innerTop+1);return i},RZ={},QF=AZ;var OZ=Phaser.Display.Align.RIGHT_CENTER,wZ=Phaser.Display.Align.BOTTOM_CENTER,LZ=function(i){if(i===void 0&&(i=FZ),this.childrenMap.thumb){var t=this.orientation===0?OZ:wZ;Uf.call(this,t,i)}else this.orientation===0?(i.x=this.innerRight-1,i.y=this.centerY):(i.x=this.centerX,i.y=this.innerBottom-1);return i},FZ={},qF=LZ;var _F=Phaser.Math.Linear,bZ=function(i,t,r,x){return x===void 0&&(x=DZ),x.x=_F(t.x,r.x,i),x.y=_F(t.y,r.y,i),x},DZ={},tb=bZ;var IZ=function(i){var t=this.childrenMap.thumb;if(t===void 0)return this;i===void 0&&(i=this.value);var r,x;return this.reverseAxis?(r=this.getEndPoint(),x=this.getStartPoint()):(r=this.getStartPoint(),x=this.getEndPoint()),tb(i,r,x,t),this.resetChildPositionState(t),this},eb=IZ;var BZ=Phaser.Display.Align.LEFT_CENTER,GZ=Phaser.Display.Align.TOP_CENTER,NZ=Phaser.Display.Align.RIGHT_CENTER,VZ=Phaser.Display.Align.BOTTOM_CENTER,zZ=function(i){var t=this.childrenMap.indicator;if(t===void 0)return this;i===void 0&&(i=this.value);var r=this.reverseAxis,x,s,g=this.childrenMap.thumb;if(g)if(this.orientation===0){var e=mt(g);if(r){var n=g.x-e*g.originX;x=this.right-n}else{var n=g.x-e*g.originX,p=n+e;x=p-this.left}}else{var f=dt(g);if(r){var u=g.y-f*g.originY;s=this.bottom-u}else{var u=g.y-f*g.originY,l=u+f;s=l-this.top}}else this.orientation===0?x=this.width*i:s=this.height*i;kt(t,x,s);var a;r?a=this.orientation===0?NZ:VZ:a=this.orientation===0?BZ:GZ,wu(t,this,a),this.resetChildPositionState(t)},ib=zZ;var Ii=Phaser.Utils.Objects.GetValue,Xf=Phaser.Utils.Objects.IsPlainObject,YZ=Phaser.Math.Clamp,UZ=Phaser.Math.Snap.To,Wf=class extends ke(lt){constructor(t,r){super(t,r),this.type="rexSlider",this.bootProgressBase(r),this.reverseAxis=Ii(r,"reverseAxis",!1);var x=Ii(r,"background",void 0),s=Ii(r,"track",void 0),g=Ii(r,"indicator",void 0),e=Ii(r,"thumb",void 0);x&&(Xf(x)&&(x=ne(t,x)),this.addBackground(x)),s&&(Xf(s)&&(s=ne(t,s)),this.add(s,{proportion:1,expand:!0,minWidth:this.orientation===0?0:void 0,minHeight:this.orientation===1?0:void 0})),g&&(Xf(g)&&(g=ne(t,g)),this.pin(g)),e&&(Xf(e)&&(e=ne(t,e)),this.pin(e));var n=Ii(r,"input",0);switch(typeof n=="string"&&(n=XZ[n]),n){case 0:e&&(e.setInteractive(),this.scene.input.setDraggable(e),e.on("drag",$F,this).on("dragstart",function(p){this.eventEmitter.emit("inputstart",p)},this).on("dragend",function(p){this.eventEmitter.emit("inputend",p)},this));break;case 1:this.on("pointerdown",sg,this).on("pointermove",sg,this).on("pointerdown",function(p){this.eventEmitter.emit("inputstart",p)},this).on("pointerup",function(p){this.eventEmitter.emit("inputend",p)},this).on("pointerover",function(p){p.isDown&&this.eventEmitter.emit("inputstart",p)},this).on("pointerout",function(p){p.isDown&&this.eventEmitter.emit("inputend",p)},this).setInteractive();break}this.addChildrenMap("background",x),this.addChildrenMap("track",s),this.addChildrenMap("indicator",g),this.addChildrenMap("thumb",e),this.setEnable(Ii(r,"enable",void 0)),this.setGap(Ii(r,"gap",void 0)),this.setValue(Ii(r,"value",0),Ii(r,"min",void 0),Ii(r,"max",void 0))}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t,r,x){return t&&r!==void 0&&(t=t/(x-r)),this.gap=t,this}get value(){return this._value}set value(t){this.gap!==void 0&&(t=UZ(t,this.gap));var r=this._value;this._value=YZ(t,0,1),r!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,r,this.eventEmitter))}runLayout(t,r,x){return this.ignoreLayout?this:(super.runLayout(t,r,x),this.updateThumb(),this.updateIndicator(),this)}},XZ={pan:0,drag:0,click:1,none:-1},WZ={getStartPoint:QF,getEndPoint:qF,updateThumb:eb,updateIndicator:ib};Object.assign(Wf.prototype,WZ);var Bi=Wf;var je=Phaser.Utils.Objects.GetValue,ng=class extends lt{constructor(t,r){super(t,r),this.type="rexScrollBar";var x=je(r,"background",void 0),s=je(r,"buttons",void 0),g=je(s,"top",je(s,"left",void 0)),e=je(s,"bottom",je(s,"right",void 0)),n,p=je(r,"slider",void 0);if(x&&this.addBackground(x),g){this.add(g);var f=new Or(g);f.on("intouch",function(){if(!!this.enable){var d=n.reverseAxis?this.scrollStep:-this.scrollStep;this.value+=d}},this)}if(p){p.orientation=this.orientation,p.eventEmitter=this,p.value=null;var u;if(this.orientation===0){var l=je(p,"width",void 0);u=l===void 0?1:0}else{var a=je(p,"height",void 0);u=a===void 0?1:0}n=new Bi(t,p),t.add.existing(n),this.add(n,{proportion:u})}if(e){this.add(e);var f=new Or(e);f.on("intouch",function(){if(!!this.enable){var v=n.reverseAxis?-this.scrollStep:this.scrollStep;this.value+=v}},this)}var o=[g,e];this.addChildrenMap("background",x),this.addChildrenMap("slider",n),this.addChildrenMap("buttons",o);var c=je(r,"valuechangeCallback",null);if(c!==null){var h=je(r,"valuechangeCallbackScope",void 0);this.on("valuechange",c,h)}this.setEnable(je(r,"enable",void 0)),this.setValue(je(r,"value",0)),this.setScrollStep(je(s,"step",.01))}setScrollStep(t){return this.scrollStep=t,this}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){!this.childrenMap.slider||(this.childrenMap.slider.value=t)}setValue(t,r,x){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,r,x),this}addValue(t,r,x){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,r,x),this}getValue(t,r){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,r):0}easeValueTo(t,r,x){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,r,x),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}},Js=ng;var ag=class extends Js{constructor(t,r){r===void 0&&(r={});var x=ui(r);r={slider:x},r.orientation=x.orientation,delete x.orientation,r.background=x.background,delete x.background,r.buttons=x.buttons,delete x.buttons,super(t,r);var s=this.childrenMap.slider;this.addChildrenMap("track",s.childrenMap.track),this.addChildrenMap("indicator",s.childrenMap.indicator),this.addChildrenMap("thumb",s.childrenMap.thumb)}},rb=ag;var og=class extends Pe{constructor(t,r){super(r),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){var t,r=this.parent,x=r.dragState;return x.isDown&&(t=r.dragThreshold===0?"DRAG":"DRAGBEGIN"),t}update_IDLE(t,r){this.next()}next_DRAGBEGIN(){var t,r=this.parent,x=r.dragState;return x.isDown?t=x.pointer.getDistance()>=r.dragThreshold?"DRAG":"DRAGBEGIN":t="IDLE",t}update_DRAGBEGIN(t,r){this.next()}next_DRAG(){var t,r=this.parent,x=r.dragState;return x.isUp&&(r.outOfBounds?t="BACK":r.slidingEnable?t="SLIDE":t="IDLE"),t}update_DRAG(t,r){var x=this.parent,s=x.dragState;s.justMoved&&x.dragging(),this.next()}enter_DRAG(){this.parent.onDragStart()}exit_DRAG(){this.parent.onDragEnd()}next_SLIDE(){var t,r=this.parent,x=r.dragState;return x.isDown?t="DRAG":r.isSliding||(t="IDLE"),t}enter_SLIDE(){this.parent.onSliding()}exit_SLIDE(){this.parent.stop()}update_SLIDE(t,r){this.parent.sliding(t,r),this.next()}next_BACK(){var t,r=this.parent,x=r.dragState;return x.isDown?t="DRAG":r.isPullBack||(t="IDLE"),t}enter_BACK(){this.parent.onPullBack()}exit_BACK(){this.parent.stop()}update_BACK(t,r){this.parent.pullBack(t,r),this.next()}},sb=og;var kf=Phaser.Utils.Objects.GetValue,kZ=Phaser.Math.Distance.Between,hg=class extends Tt{constructor(t,r){super(t,r),this._enable=void 0,t.setInteractive(kf(r,"inputConfig",void 0)),this.resetFromJSON(r),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(kf(t,"enable",!0)),this.holdThreshold=kf(t,"holdThreshold",50),this.pointerOutReleaseEnable=kf(t,"pointerOutRelease",!0),this}boot(){this.parent.on("pointerdown",this.onPointIn,this),this.parent.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&this.parent.on("pointerout",this.onPointOut,this),this.parent.on("pointermove",this.onPointerMove,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(t){return t===void 0&&(t=!0),this.pointerOutReleaseEnable=t,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){var t=Rn(this.scene);return t}get speed(){if(this.x===this.preX&&this.y===this.preY)return 0;var t=kZ(this.preX,this.preY,this.x,this.y),r=t/(this.dt*.001);return r}get speedX(){return this.dx/(this.dt*.001)}get speedY(){return this.dy/(this.dt*.001)}onPointIn(t,r,x){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.localX=r,this.localY=x)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0)}onPointerMove(t,r,x){!this.enable||!t.isDown||this.pointer!==t||(this.localX=r,this.localY=x)}preupdate(t,r){if(!!this.enable){var x=this.pointer;this.justMoved=!1,x&&!this.isInTouched?(this.x=x.worldX,this.y=x.worldY,this.preX=x.worldX,this.preY=x.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",x,this.localX,this.localY)):x&&this.isInTouched?this.x===x.x&&this.y===x.y?this.holdStartTime===void 0?this.holdStartTime=t:t-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=x.worldX,this.y=x.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",x,this.localX,this.localY)):!x&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",x))}}},nb=hg;var ab=nb;var lg=Phaser.Utils.Objects.GetValue,ug=class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.setValue(lg(t,"value",0)),this.setSpeed(lg(t,"speed",0)),this.setAcceleration(lg(t,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(t){return this.value=t,this}setSpeed(t){return this.speed=t,this}setAcceleration(t){return this.acceleration=t,this}updateSpeed(t){return this.acceleration!==0&&(this.speed+=this.acceleration*t,this.speed<0&&(this.speed=0)),this}getDeltaValue(t){return this.updateSpeed(t),this.speed<=0?0:this.speed*t}update(t){return this.updateSpeed(t),this.speed>0&&(this.value+=this.getDeltaValue(t)),this}get isMoving(){return this.speed>0}},ob=ug;var fg=class{constructor(){this.value,this.dir,this.movement=new ob}init(t,r,x,s,g){return this.value=t,this.end=g,g!==void 0?this.dir=t<g:this.dir=r,this.movement.setSpeed(x).setAcceleration(-s),this}stop(){this.movement.reset()}update(t){var r=this.movement.getDeltaValue(t);return this.dir||(r=-r),this.end===void 0?this.value+=r:r===0?this.value=this.end:(this.value+=r,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}},hb=fg;var jt=Phaser.Utils.Objects.GetValue,HZ=Phaser.Math.Clamp,dg=class extends Tt{constructor(t,r){super(t,r);var x=jt(r,"enable",!0);this._state=new sb(this,{enable:x,eventEmitter:!1});var s={inputConfig:jt(r,"inputConfig",void 0),enable:x,pointerOutRelease:jt(r,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new ab(t,s),this._enable=void 0,this._value=void 0,this._slowDown=new hb;var g=jt(r,"valuechangeCallback",null);if(g!==null){var e=jt(r,"valuechangeCallbackScope",void 0);this.on("valuechange",g,e)}if(g=jt(r,"overmaxCallback",null),g!==null){var e=jt(r,"overmaxCallbackScope",void 0);this.on("overmax",g,e)}if(g=jt(r,"overminCallback",null),g!==null){var e=jt(r,"overminCallbackScope",void 0);this.on("overmin",g,e)}this.resetFromJSON(r),this.boot()}resetFromJSON(t){this.setOrientationMode(jt(t,"orientation",0)),this.setDragThreshold(jt(t,"threshold",10)),this.setSlidingDeceleration(jt(t,"slidingDeceleration",5e3)),this.setBackDeceleration(jt(t,"backDeceleration",2e3));var r=jt(t,"dragRate",1);r=r*(jt(t,"dragReverse",!1)?-1:1),this.setDragRate(r);var x=jt(t,"bounds",void 0);return x?this.setBounds(x):this.setBounds(jt(t,"max",0),jt(t,"min",0)),this.setValue(jt(t,"value",this.maxValue||0)),this.setEnable(jt(t,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(t),this.dragState.destroy(t),this._state=void 0,this.dragState=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return this._enable=t,this._state.setEnable(t),this.dragState.setEnable(t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(t){return typeof t=="string"&&(t=KZ[t]),this.orientationMode=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setSlidingDeceleration(t){return this.slidingDeceleration=t,this}setBackDeceleration(t){return this.backDeceleration=t,this}setDragRate(t){return this.dragRate=t,this}setBounds(t,r){if(Array.isArray(t)){var x=t;t=x[0],r=x[1]}return t<r?(this.minValue=t,this.maxValue=r):(this.minValue=r,this.maxValue=t),this}get value(){return this._value}set value(t){if(t!==this._value){var r=this._value,x=this.overMax(t),s=this.overMin(t);x&&this.emit("overmax",t,r),s&&this.emit("overmin",t,r),this.backEnable||(x&&(t=this.maxValue),s&&(t=this.minValue)),this._value=t,this.emit("valuechange",t,r)}}setValue(t,r){return r===void 0&&(r=!1),r&&(t=HZ(t,this.minValue,this.maxValue)),this.value=t,this}addValue(t,r){return this.setValue(this.value+t,r),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(t){return this.maxValue!=null&&t>this.maxValue}overMin(t){return this.minValue!=null&&t<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){var t;return this.orientationMode===0?t=this.dragState.dy:this.orientationMode===1?t=this.dragState.dx:t=0,t*=this.dragRate,t}get dragSpeed(){var t;return this.orientationMode===0?t=this.dragState.speedY:this.orientationMode===1?t=this.dragState.speedX:t=0,t*=this.dragRate,t}onDragStart(){this.emit("dragstart")}onDragEnd(){this.emit("dragend")}dragging(){this.value+=this.dragDelta}onSliding(){var t=this.value,r=this.dragSpeed;if(r===0){this._slowDown.stop(),this._state.next();return}var x=this.slidingDeceleration;this._slowDown.init(t,r>0,Math.abs(r),x)}sliding(t,r){r*=.001;var x=this._slowDown.update(r).value;this.overMax(x)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(x)?(this.value=this.minValue,this._slowDown.stop()):this.value=x}onPullBack(){var t=this.value,r=this.outOfMinBound?this.minValue:this.maxValue,x=Math.abs(r-t),s=this.backDeceleration,g=Math.sqrt(2*s*x);this._slowDown.init(t,void 0,g,s,r)}pullBack(t,r){r*=.001,this.value=this._slowDown.update(r).value,this._slowDown.isMoving||this._state.next()}stop(){this._slowDown.stop()}},KZ={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},lb=dg;var ub=lb;var Hf=Phaser.Utils.Objects.GetValue,cg=class extends Tt{constructor(t,r){if(super(t,r),this.parent!==this.scene?this.focusMode=Hf(r,"focus",!1):this.focusMode=!1,this.setSpeed(Hf(r,"speed",.1)),this.setEnable(Hf(r,"enable",!0)),!this.focusMode)this.scene.input.on("wheel",this.onSceneScroll,this);else{var t=this.parent;t.setInteractive(Hf(r,"inputConfig",void 0)).on("wheel",function(s,g,e,n,p){!this.enable||this.scroll(e)},this)}}destroy(){this.focusMode||this.scene.input.off("wheel",this.onSceneScroll,this)}onSceneScroll(t,r,x,s,g,e){!this.enable||this.scroll(s)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}scroll(t){t*=this.speed,this.emit("scroll",t,this.parent,this)}},fb=cg;var Zt=Phaser.Utils.Objects.GetValue,jZ=function(i,t){var r=i.scene,x=fs(t),s=new lt(r,{orientation:x}),g=Zt(t,"child.gameObject",void 0),e=0,n=Zt(t,"slider",void 0),p,f=0,u=Zt(n,"position",0);typeof u=="string"&&(u=ZZ[u]);var l=u===0,a=Zt(t,"scroller",!0),o,c=Zt(t,"mouseWheelScroller",!1),h;if(g){var d=Zt(t,"space.child",0);if(i.childMargin={},typeof d!="number"){var v=d;x===0?(e={left:Zt(v,"left",0),right:Zt(v,"right",0)},i.childMargin.top=Zt(v,"top",0),i.childMargin.bottom=Zt(v,"bottom",0)):(e={top:Zt(v,"top",0),bottom:Zt(v,"bottom",0)},i.childMargin.top=Zt(v,"left",0),i.childMargin.bottom=Zt(v,"right",0))}else n&&(x===0?e=l?{right:d}:{left:d}:e=l?{bottom:d}:{top:d}),i.childMargin.top=0,i.childMargin.bottom=0;n?(n===!0&&(n={}),n.orientation=s.orientation===0?1:0,p=new rb(r,n),f=Zt(t,"space.slider",0),i.hideUnscrollableSlider=Zt(n,"hideUnscrollableSlider",!1),i.adaptThumbSizeMode=Zt(n,"adaptThumbSize",!1),i.minThumbSize=Zt(n,"minThumbSize",void 0)):(i.adaptThumbSizeMode=!1,i.minThumbSize=void 0),a&&(a===!0&&(a={}),a.orientation=x,o=new ub(g,a)),c&&(h=new fb(g,c)),p&&!l&&s.add(p,{proportion:0,align:"center",padding:f,expand:!0});var m=Zt(t,"child.proportion",1),y=Zt(t,"child.expand",!0);s.add(g,{proportion:m,align:"center",padding:e,expand:y}),p&&l&&s.add(p,{proportion:0,align:"center",padding:f,expand:!0})}return p&&p.on("valuechange",function(C){i.t=C,i.emit("scroll",i)}),o&&o.on("valuechange",function(C){i.childOY=C,i.emit("scroll",i)}),h&&h.on("scroll",function(C){i.addChildOY(-C,!0)}),i.addChildrenMap("child",g),i.addChildrenMap("slider",p),i.addChildrenMap("scroller",o),i.addChildrenMap("mouseWheelScroller",h),s},ZZ={right:0,left:1,bottom:0,top:1},db=jZ;var JZ=function(){var i=this.topChildOY,t=this.bottomChildOY,r=this.childrenMap.scroller,x=this.childrenMap.slider;return r&&r.setBounds(t,i),x&&x.setEnable(t!==i),this.updateController(),x&&(this.hideUnscrollableSlider&&this.setChildVisible(x,this.isOverflow),this.adaptThumbSizeMode&&$Z.call(this)),this},$Z=function(){var i=Math.min(this.childVisibleHeight/this.childHeight,1),t=this.childrenMap.slider,r=t.childrenMap.track,x=t.childrenMap.thumb,s=this.minThumbSize;if(this.scrollMode===0){var g=r.displayHeight*i;s!==void 0&&g<s&&(g=s),kt(x,void 0,g)}else{var e=r.displayWidth*i;s!==void 0&&e<s&&(e=s),kt(x,e,void 0)}QZ.call(this)},QZ=function(){var i=this.childrenMap.slider,t=i.minWidth,r=i.minHeight;i.minWidth=i.width,i.minHeight=i.height,i.layout(),i.minWidth=t,i.minHeight=r},cb=JZ;var qZ=function(){var i=this.childrenMap.scroller,t=this.childrenMap.slider;i&&i.setValue(this.childOY),t&&t.setValue(this.t)},pb=qZ;var cr=Phaser.Utils.Objects.GetValue,vb=Phaser.Math.Clamp,Kf=class extends lt{constructor(t,r){r===void 0&&(r={});var x=fs(r);r.orientation=x===0?1:0,super(t,r),this.type=cr(r,"type","rexScrollable");var s=cr(r,"background",void 0),g=db(this,r),e=cr(r,"header",void 0),n=cr(r,"footer",void 0);if(s&&this.addBackground(s),e){var p=cr(r,"align.header","center"),f=cr(r,"space.header",0),u;x===0?u={bottom:f}:u={right:f};var l=cr(r,"expand.header",!0);this.add(e,{proportion:0,align:p,padding:u,expand:l})}if(g&&this.add(g,{proportion:1,align:"center",padding:0,expand:!0}),n){var p=cr(r,"align.footer","center"),a=cr(r,"space.footer",0),u;x===0?u={top:a}:u={left:a};var l=cr(r,"expand.footer",!0);this.add(n,{proportion:0,align:p,padding:u,expand:l})}this.addChildrenMap("background",s),this.addChildrenMap("header",e),this.addChildrenMap("footer",n),this.runLayoutFlag=!1}runLayout(t,r,x){return this.ignoreLayout?this:(super.runLayout(t,r,x),this.resizeController(),this.runLayoutFlag||(this.runLayoutFlag=!0,this.setT(0)),this)}set t(t){var r=this.childMargin;if(r.top!==0||r.bottom!==0){var x=this.childrenMap.child,s=x.topChildOY-x.bottomChildOY,g=s+r.top+r.bottom,e=g*t-r.top;t=e/s}this.childrenMap.child.t=t,this.updateController()}get t(){var t=this.childrenMap.child.t,r=this.childMargin;if(r.top!==0||r.bottom!==0){var x=this.childrenMap.child,s=x.topChildOY-x.bottomChildOY,g=s+r.top+r.bottom,e=s*t+r.top;t=e/g}return t}set childOY(t){this.childrenMap.child.childOY=t,this.updateController()}get childOY(){return this.childrenMap.child.childOY}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get isOverflow(){var t=this.childrenMap.child;return t.topChildOY!==t.bottomChildOY}get scrollMode(){return this.orientation===0?1:0}setChildOY(t,r){return r===void 0&&(r=!1),r&&(t=vb(t,this.bottomChildOY,this.topChildOY)),this.childOY=t,this}addChildOY(t,r){return this.setChildOY(this.childOY+t,r),this}setT(t,r){return r===void 0&&(r=!1),r&&(t=vb(t,0,1)),this.t=t,this}addT(t,r){return this.setT(this.t+t,r),this}scrollToTop(){return this.t=0,this}scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this}get sliderEnable(){var t=this.childrenMap.slider;return t?t.enable:!1}set sliderEnable(t){var r=this.childrenMap.slider;!r||r.setEnable(t)}setSliderEnable(t){return t===void 0&&(t=!0),this.sliderEnable=t,this}get scrollerEnable(){var t=this.childrenMap.scroller;return t?t.enable:!1}set scrollerEnable(t){var r=this.childrenMap.scroller;!r||r.setEnable(t)}setScrollerEnable(t){return t===void 0&&(t=!0),this.scrollerEnable=t,this}get mouseWheelScrollerEnable(){var t=this.childrenMap.mouseWheelScroller;return t?t.enable:!1}set mouseWheelScrollerEnable(t){var r=this.childrenMap.mouseWheelScrollerEnable;!r||r.setEnable(t)}setMouseWheelScrollerEnable(t){return t===void 0&&(t=!0),this.mouseWheelScrollerEnable=t,this}setDropZoneEnable(t){t===void 0&&(t=!0);var r=this.childrenMap.child;return r.setInteractive(),r.input.dropZone=t,this}},_Z={resizeController:cb,updateController:pb};Object.assign(Kf.prototype,_Z);var Pa=Kf;var Ht=0,Jt=1,$t=2;var tJ=function(i){var t;return Of(i)?t=$t:xa(i)?t=Ht:t=Jt,t},pr=tJ;var eJ=function(i,t,r){var x=pr(i);switch(x){case Ht:r=i.getWrappedText(t);break;case Jt:r=i.getPenManager(t,r);break;case $t:i.maxWidth>0?r=i.setText(t).getTextBounds().wrappedText.split(`
`):r=t.split(`
`);break}return r},Ea=eJ;var iJ=function(i){return i!==void 0&&(this.text=i),this.lines=Ea(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},mb=iJ;var rJ=function(i){return(i-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},jf=rJ;var sJ=function(i){return i*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},Zf=sJ;var nJ=function(i){var t=i+this.visibleLinesCount+1,r;switch(this.textObjectType){case Ht:r=this.lines.slice(i,t).join(`
`);break;case Jt:var x=this.lines.getLineStartIndex(i),s=this.lines.getLineEndIndex(t-1);r=this.lines.getSliceTagText(x,s,!0);break;case $t:r=this.lines.slice(i,t).join(`
`);break}return r},gb=nJ;var aJ=function(i,t){var r=pr(i);switch(r){case Ht:var g=i.style,x=g.wordWrapWidth,s=g.wordWrapCallback;g.wordWrapWidth=0,g.wordWrapCallback=void 0,i.setText(t),g.wordWrapWidth=x,g.wordWrapCallback=s;break;case Jt:var g=i.style,e=g.wrapMode;g.wrapMode=0,i.setText(t),g.wrapMode=e;break;case $t:var n=i._maxWidth;i._maxWidth=0,i.setText(t),i._maxWidth=n;break}},Ma=aJ;var oJ=function(){var i=this.textObject.rexSizer;this.textObject.y+=i.offsetY-i.preOffsetY,i.preOffsetY=i.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&hJ.call(this)},hJ=function(){if(!!this.textObject.setCrop){var i=this.textObject.rexSizer.offsetY,t,r;i<=0?(t=-i,r=this.height):(t=0,r=this.height-i),this.textObject.setCrop(0,t,this.width,r)}},Jf=oJ;var lJ=function(){var i=Math.max(Math.floor(jf.call(this,-this.textOY)),0),t=Zf.call(this,i)+this.textOY,r=gb.call(this,i);return Ma(this.textObject,r),this.textObject.rexSizer.offsetY=t,Jf.call(this),this},xb=lJ;var uJ=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,nr.call(this),this},yb=uJ;var fJ=function(i,t,r){if(r+=this.textLineHeight+this.textLineSpacing,!(this.textObjectWidth===t&&this._textObjectRealHeight===r)){switch(this.textObjectWidth=t,this._textObjectRealHeight=r,this.textObjectType){case Ht:case Jt:i.setFixedSize(t,r);var x=i.style,s=Math.max(t,0);this.textObjectType===Ht?x.wordWrapWidth=s:(x.wrapMode===0&&(x.wrapMode=1),x.wrapWidth=s);break;case $t:i.setMaxWidth(t);break}this.setText()}},Cb=fJ;var dJ=function(){var i,t,r,x=this.left,s=this.top,g,e,n,p;i=this.textObject,i.rexSizer.hidden||(t=i.rexSizer,r=t.padding,g=x+r.left,e=s+r.top,n=this.width-r.left-r.right,p=this.height-r.top-r.bottom,Cb.call(this,i,n,p),er(i,g,e,n,p,t.align),t.preOffsetY=0,Jf.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))},Tb=dJ;var Sb={setText:mb,updateTextObject:xb,preLayout:yb,layoutChildren:Tb};var Pb=Phaser.Utils.Objects.IsPlainObject,ni=Phaser.Utils.Objects.GetValue,cJ=Phaser.Display.Align.TOP_LEFT,$f=class extends Ti{constructor(t,r,x,s,g,e){Pb(r)?(e=r,r=ni(e,"x",0),x=ni(e,"y",0),s=ni(e,"width",void 0),g=ni(e,"height",void 0)):Pb(s)&&(e=s,s=ni(e,"width",void 0),g=ni(e,"height",void 0)),super(t,r,x,s,g,e),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this._textObjectRealHeight=0,this.lines=void 0,this.text=ni(e,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(ni(e,"clamplTextOY",!0)),this.alwaysScrollable=ni(e,"alwaysScrollable",!1);var n=ni(e,"background",void 0),p=ni(e,"text",void 0);p===void 0&&(p=pJ(t)),this.textCropEnable=ni(e,"textCrop",!!p.setCrop);var f=ni(e,"textMask",!this.textCropEnable);n&&this.addBackground(n),this.add(p),this.sizerChildren=[p];var u=this.getSizerConfig(p);u.align=cJ,u.padding=gi(0),u.expand=!0,this.textObject=p,this.textObjectType=pr(p),u.preOffsetY=0,u.offsetY=0,f&&(this.textMask=Be.call(this,this.textObject,this)),this.addChildrenMap("background",n),this.addChildrenMap("text",p)}destroy(t){if(!!this.scene){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case Ht:this.lines.length=0;break;case Jt:this.lines.destroy();break;case $t:this.lines.length=0;break}this.lines=void 0}super.destroy(t)}}setClampMode(t){return t===void 0&&(t=!0),this.clampTextOY=t,this}get textLineHeight(){if(this._textLineHeight===void 0){var t;switch(this.textObjectType){case Ht:case Jt:var r=this.textObject.style;t=r.metrics.fontSize+r.strokeThickness;break;case $t:var x=this.textObject.fontSize/this.textObject.fontData.size;t=this.textObject.fontData.lineHeight*x;break}this._textLineHeight=t}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var t;switch(this.textObjectType){case Ht:case Jt:t=this.textObject.lineSpacing;break;case $t:t=0;break}this._textLineSpacing=t}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor(jf.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=Zf.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var t=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&t<0&&(t=0),this._textVisibleHeight=t}return this._textVisibleHeight}textOYExceedTop(t){return t===void 0&&(t=this.textOY),t>this.topTextOY}textOYExeceedBottom(t){return t===void 0&&(t=this.textOY),t<this.bottomTextOY}get textOY(){return this._textOY}set textOY(t){var r=this.topTextOY,x=this.bottomTextOY,s=this.textOYExceedTop(t),g=this.textOYExeceedBottom(t);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?t=0:s?t=r:g&&(t=x)),this._textOY!==t&&(this._textOY=t,this.updateTextObject()),s&&(this.execeedTopState||this.emit("execeedtop",this,t,r)),this.execeedTopState=s,g&&(this.execeedBottomState||this.emit("execeedbottom",this,t,x)),this.execeedBottomState=g}setTextOY(t){return this.textOY=t,this}set t(t){this.textOY=-this.textVisibleHeight*t}get t(){var t=this.textVisibleHeight;return t===0?0:this.textOY/-t}setTextOYByPercentage(t){return this.t=t,this}},pJ=function(i){return i.add.text(0,0,"")};Object.assign($f.prototype,Sb);var Eb=$f;var vJ=function(i){Object.defineProperty(i,"childOY",{configurable:!0,get:function(){return i.textOY},set:function(t){i.textOY=t}}),Object.defineProperty(i,"topChildOY",{get:function(){return i.topTextOY}}),Object.defineProperty(i,"bottomChildOY",{get:function(){return i.bottomTextOY}}),Object.defineProperty(i,"childVisibleHeight",{get:function(){return i.textObjectHeight}}),Object.defineProperty(i,"childHeight",{get:function(){return i.textHeight}})},Mb=vJ;var Ab={setText(i){var t=this.childrenMap.child;return t.setText(i),this.resizeController(),this},appendText(i){return this.setText(this.text+i),this}};var RXt=Phaser.Math.Clamp,Rb={scrollToLine(i){return this.setChildOY(-this.lineHeight*i),this},scrollToNextLine(i){i===void 0&&(i=1);var t=this.lineIndex+i;return this.scrollToLine(t),this}};var Dr=Phaser.Utils.Objects.GetValue,Qf=class extends Pa{constructor(t,r){r===void 0&&(r={});var x=Dr(r,"text",void 0),s=Dr(r,"textWidth",void 0),g=Dr(r,"textHeight",void 0),e=Dr(r,"textCrop",!!x.setCrop),n=Dr(r,"textMask",!e),p=Dr(r,"content",""),f=new Eb(t,{width:s,height:g,text:x,textMask:n,textCrop:e&&!n,content:p,clamplTextOY:Dr(r,"clamplChildOY",!1),alwaysScrollable:Dr(r,"alwaysScrollable",!1)});t.add.existing(f);var u=s===void 0?1:0,l=g===void 0;Mb(f),r.scrollMode=0,r.type="rexTextArea",r.child={gameObject:f,proportion:u,expand:l};var a=Dr(r,"space",void 0);a&&(a.child=a.text),super(t,r),this.addChildrenMap("text",x)}get text(){return this.childrenMap.child.text}get lineHeight(){var t=this.childrenMap.child;return t.textLineHeight+t.textLineSpacing}get lineIndex(){return Math.floor(-this.childOY/this.lineHeight)}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.textHeight}};Object.assign(Qf.prototype,Ab,Rb);var Ir=Qf;var qf=Phaser.Utils.Objects.GetValue,mJ=function(i,t,r){t=t?wt(t):{};var x=qf(r,"background",ne),s=qf(r,"text",Rf),g=qf(r,"track",ne),e=qf(r,"thumb",ne);x?t.background=x(i,t.background):delete t.background,s?t.text=s(i,t.text):delete t.text;var n=t.slider;n!==!1&&(n===void 0&&(n={}),g?n.track=g(i,n.track):delete n.track,e?n.thumb=e(i,n.thumb):delete n.thumb,t.slider=n);var p=new Ir(i,t);return i.add.existing(p),p},Ob=mJ;var gJ=Phaser.Utils.Objects.GetValue,xJ=function(i,t,r){var x=gJ(t,"$type");x===void 0&&t&&(t.hasOwnProperty("slider")||t.hasOwnProperty("scroller"))&&(x="textarea");var s;switch(x){case"textarea":s=new Ob(i,t,r);break;default:s=new Kt(i,t,r);break}return i.add.existing(s),s},wb=xJ;var yJ=Phaser.Utils.Objects.GetValue,_f=class extends Zs{constructor(t,r,x){r=r?wt(r):{},x===void 0&&(x={});var s=yJ(x,"background",ne);s?r.background=s(t,r.background):delete r.background,r.title=Kt(t,r.title,x.title),r.content=wb(t,r.content,x.content),r.content instanceof Ir&&ri(r,"height")&&!ri(r,"proportion.content")&&Z(r,"proportion.content",1);var g=r.button,e=r.buttonA||g,n=r.buttonB||g,p=r.buttonMode;p===void 0&&(p=!!e&&!!n?2:e?1:0);var f=x.button,u=x.buttonA||f,l=x.buttonB||f;switch(p){case 2:r.actions=[Kt(t,e,u),Kt(t,n,l)];break;case 1:r.actions=[Kt(t,e,u)];break;case 0:break;default:r.actions=[];break}var a=r.choice;a&&(r.choices=[]),super(t,r),this.type="rexConfirmDialog",this.buttonMode=p,this.defaultActionConfig=g,this.defaultActionButtonCreator=f,this.defaultChoiceConfig=a,this.defaultChoiceCreator=x.choice;var o=this.childrenMap.actions;this.addChildrenMap("buttonA",o?o[0]:null),this.addChildrenMap("buttonB",o?o[1]:null),ZF.call(this)}};Object.assign(_f.prototype,jF);var pg=_f;J.register("confirmDialog",function(i,t){var r=new pg(this.scene,i,t);return this.scene.add.existing(r),r});Z(window,"RexPlugins.UI.ConfirmDialog",pg);var td=Phaser.Utils.Objects.GetValue,Ko=function(i,t,r){var x=td(i,`proportion.${t}`,r.proportion),s=td(i,`align.${t}`,"center"),g=td(i,`space.${t}`,void 0);if(typeof g=="number"&&r.paddingKey){var e=g;g={},g[r.paddingKey]=e}var n=td(i,`expand.${t}`,!0);return{proportion:x,align:s,padding:g,expand:n}},ds=function(i){return Ko(i,"header",{proportion:0,paddingKey:"bottom"})},cs=function(i){return Ko(i,"leftSide",{proportion:0,paddingKey:"right"})},ps=function(i){return Ko(i,"content",{proportion:1})},vs=function(i){return Ko(i,"rightSide",{proportion:0,paddingKey:"left"})},ms=function(i){return Ko(i,"footer",{proportion:0,paddingKey:"top"})},ai=function(i){return{proportion:1,align:"center",padding:0,expand:!0}};var CJ=function(i,t){var r=new lt(i,{orientation:t});return i.add.existing(r),r},oi=CJ;var TJ=function(i){var t=this.scene,r=i.header;r&&this.add(r,ds(i));var x=oi(t,0);this.add(x,ai(i));var s=i.leftSide;s&&x.add(s,cs(i));var g=i.content;g&&x.add(g,ps(i));var e=i.rightSide;e&&x.add(e,vs(i));var n=i.footer;n&&this.add(n,ms(i))},Lb=TJ;var SJ=function(i){var t=this.scene,r=i.header;r&&this.add(r,ds(i));var x=oi(t,0);this.add(x,ai(i));var s=i.leftSide;s&&x.add(s,cs(i));var g=oi(t,1);x.add(g,ai(i));var e=oi(t,0);g.add(e,ai(i));var n=i.content;n&&e.add(n,ps(i));var p=i.rightSide;p&&e.add(p,vs(i));var f=i.footer;f&&g.add(f,ms(i))},Fb=SJ;var PJ=function(i){var t=this.scene,r=i.header;r&&this.add(r,ds(i));var x=oi(t,0);this.add(x,ai(i));var s=oi(t,1);x.add(s,ai(i));var g=oi(t,0);s.add(g,ai(i));var e=i.leftSide;e&&g.add(e,cs(i));var n=i.content;n&&g.add(n,ps(i));var p=i.footer;p&&s.add(p,ms(i));var f=i.rightSide;f&&x.add(f,vs(i))},bb=PJ;var EJ=function(i){var t=this.scene,r=i.header;r&&this.add(r,ds(i));var x=oi(t,0);this.add(x,ai(i));var s=i.leftSide;s&&x.add(s,cs(i));var g=oi(t,1);x.add(g,ai(i));var e=i.content;e&&g.add(e,ps(i));var n=i.footer;n&&g.add(n,ms(i));var p=i.rightSide;p&&x.add(p,vs(i))},Db=EJ;var Ib=Phaser.Utils.Objects.GetValue,Bb=[Lb,Fb,bb,Db],MJ=function(i){this.clear(!0);var t=Ib(i,"background",void 0);t&&this.addBackground(t);var r=Ib(i,"layoutMode",0);typeof r=="string"&&(r=AJ[r.toUpperCase()]);var x=Bb[r]||Bb[0];x.call(this,i),this.addChildrenMap("background",i.background),this.addChildrenMap("header",i.header),this.addChildrenMap("leftSide",i.leftSide),this.addChildrenMap("content",i.content),this.addChildrenMap("rightSide",i.rightSide),this.addChildrenMap("footer",i.footer)},AJ={FFF:0,LFF:1,FFR:2,LFR:3},Gb=MJ;var ed=class extends lt{constructor(t,r){r===void 0&&(r={}),r.orientation=1,super(t,r),this.type="rexHolyGrail",this.build(r)}},RJ={build:Gb};Object.assign(ed.prototype,RJ);var jo=ed;J.register("holyGrail",function(i){var t=new jo(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.HolyGrail",jo);var Nb={getButtonsSizer(i){return this.childrenMap[`${i}ButtonsSizer`]},getButton(i,t){var r=this.getButtonsSizer(i);return r?r.getButton(t):void 0},setButtonEnable(i,t,r){return this.getButtonsSizer(i).setButtonEnable(t,r),this},setLeftButtonEnable(i,t){return this.childrenMap.leftButtonsSizer.setButtonEnable(i,t),this},setRightButtonEnable(i,t){return this.childrenMap.rightButtonsSizer.setButtonEnable(i,t),this},setTopButtonEnable(i,t){return this.childrenMap.topButtonsSizer.setButtonEnable(i,t),this},setBottomButtonEnable(i,t){return this.childrenMap.bottomButtonsSizer.setButtonEnable(i,t),this},toggleButtonEnable(i,t){return this.getButtonsSizer(i).toggleButtonEnable(t),this},toggleLeftButtonEnable(i){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(i),this},toggleRightButtonEnable(i){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(i),this},toggleTopButtonEnable(i){return this.childrenMap.topButtonsSizer.toggleButtonEnable(i),this},toggleBottomButtonEnable(i){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(i),this},getButtonEnable(i,t){return this.getButtonsSizer(i).getButtonEnable(t)},getLeftButtonEnable(i){return this.childrenMap.leftButtonsSizer.getButtonEnable(i)},getRightButtonEnable(i){return this.childrenMap.rightButtonsSizer.getButtonEnable(i)},getTopButtonEnable(i){return this.childrenMap.topButtonsSizer.getButtonEnable(i)},getBottomButtonEnable(i){return this.childrenMap.bottomButtonsSizer.getButtonEnable(i)},emitButtonClick(i,t){var r=this.getButtonsSizer(i);return r?(r.emitButtonClick(t),this):this},emitLeftButtonClick(i){return this.childrenMap.leftButtonsSizer.emitButtonClick(i),this},emitRightButtonClick(i){return this.childrenMap.rightButtonsSizer.emitButtonClick(i),this},emitTopButtonClick(i){return this.childrenMap.topButtonsSizer.emitButtonClick(i),this},emitBottomButtonClick(i){return this.childrenMap.bottomButtonsSizer.emitButtonClick(i),this},getLeftButton(i){return this.childrenMap.leftButtonsSizer.getButton(i)},getRightButton(i){return this.childrenMap.rightButtonsSizer.getButton(i)},getTopButton(i){return this.childrenMap.topButtonsSizer.getButton(i)},getBottomButton(i){return this.childrenMap.bottomButtonsSizer.getButton(i)},showButton(i,t){return yi(this.getButton(i,t)),this},showLeftButton(i){return yi(this.getLeftButton(i)),this},showRightButton(i){return yi(this.getRightButton(i)),this},showTopButton(i){return yi(this.getTopButton(i)),this},showBottomButton(i){return yi(this.getBottomButton(i)),this},hideButton(i,t){return Ci(this.getButton(i,t)),this},hideLeftButton(i){return Ci(this.getLeftButton(i)),this},hideRightButton(i){return Ci(this.getRightButton(i)),this},hideTopButton(i){return Ci(this.getTopButton(i)),this},hideBottomButton(i){return Ci(this.getBottomButton(i)),this},addButton(i,t){return this.getButtonsSizer(i).addButton(t),this},addLeftButton(i){return this.addButton("left",i),this},addRightButton(i){return this.addButton("right",i),this},addTopButton(i){return this.addButton("top",i),this},removeButton(i,t,r){return this.getButtonsSizer(i).removeButton(t,r),this},removeLeftButton(i,t){return this.removeButton("left",i,t),this},removeRightButton(i,t){return this.removeButton("right",i,t),this},removeTopButton(i,t){return this.removeButton("top",i,t),this},removeBottomButton(i,t){return this.removeButton("bottom",i,t),this},clearButtons(i,t){return this.getButtonsSizer(i).clearButtons(t),this},clearLeftButtons(i){return this.clearButtons("left",i),this},clearRightButtons(i){return this.clearButtons("right",i),this},clearTopButtons(i){return this.clearButtons("top",i),this},clearBottomButtonss(i){return this.clearButtons("bottom",i),this},forEachButton(i,t,r){return this.getButtonsSizer(i).forEachButtton(t,r),this},forEachLeftButton(i,t){return this.childrenMap.leftButtonsSizer.forEachButtton(i,t),this},forEachRightButton(i,t){return this.childrenMap.rightButtonsSizer.forEachButtton(i,t),this},forEachTopButton(i,t){return this.childrenMap.topButtonsSizer.forEachButtton(i,t),this},forEachBottomButton(i,t){return this.childrenMap.bottomButtonsSizer.forEachButtton(i,t),this}};var It=Phaser.Utils.Objects.GetValue,id=class extends Ke{constructor(t,r){r===void 0&&(r={}),r.column=3,r.row=3,super(t,r),this.type="rexTabs",this.eventEmitter=It(r,"eventEmitter",this);var x=It(r,"background",void 0),s=It(r,"panel",void 0),g=It(r,"leftButtons",void 0),e=It(r,"leftButtonsBackground",void 0),n,p=It(r,"rightButtons",void 0),f=It(r,"rightButtonsBackground",void 0),u,l=It(r,"topButtons",void 0),a=It(r,"topButtonsBackground",void 0),o,c=It(r,"bottomButtons",void 0),h=It(r,"bottomButtonsBackground",void 0),d,v=It(r,"click",void 0);if(x&&this.addBackground(x),s&&this.add(s,1,1,"center",0,!0),g){var m=It(r,"space.leftButtonsOffset",0),y=It(r,"space.leftButton",0);n=new bt(t,{groupName:"left",background:e,buttons:g,orientation:1,space:{item:y},align:It(r,"align.leftButtons",void 0),click:v,eventEmitter:this.eventEmitter});var C={top:m};this.add(n,0,1,"top",C,!1)}if(p){var T=It(r,"space.rightButtonsOffset",0),P=It(r,"space.rightButton",0);u=new bt(t,{groupName:"right",background:f,buttons:p,orientation:1,space:{item:P},align:It(r,"align.rightButtons",void 0),click:v,eventEmitter:this.eventEmitter});var C={top:T};this.add(u,2,1,"top",C,!1)}if(l){var S=It(r,"space.topButtonsOffset",0),M=It(r,"space.topButton",0);o=new bt(t,{groupName:"top",background:a,buttons:l,orientation:0,space:{item:M},align:It(r,"align.topButtons",void 0),click:v,eventEmitter:this.eventEmitter});var C={left:S};this.add(o,1,0,"left",C,!1)}if(c){var E=It(r,"space.bottomButtonsOffset",0),A=It(r,"space.bottomButton",0);d=new bt(t,{groupName:"bottom",background:h,buttons:c,orientation:0,space:{item:A},align:It(r,"align.bottomButtons",void 0),click:v,eventEmitter:this.eventEmitter});var C={left:E};this.add(d,1,2,"left",C,!1)}this.addChildrenMap("background",x),this.addChildrenMap("panel",s),this.addChildrenMap("leftButtons",g),this.addChildrenMap("rightButtons",p),this.addChildrenMap("topButtons",l),this.addChildrenMap("bottomButtons",c),this.addChildrenMap("leftButtonsSizer",n),this.addChildrenMap("rightButtonsSizer",u),this.addChildrenMap("topButtonsSizer",o),this.addChildrenMap("bottomButtonsSizer",d)}};Object.assign(id.prototype,Nb);var vg=id;J.register("tabs",function(i){var t=new vg(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Tabs",vg);J.register("slider",function(i){var t=new Bi(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Slider",Bi);var rd=class{constructor(t,r){this.container=null,this._deltaHeight=0,this.setParent(t)}setParent(t){this.parent=t,this.parentContainer=t.getParentContainer()}destroy(t){t===void 0&&(t=!1),t||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(t){return t?(this.container&&this.container.destroy(),this.container=t,this.parentContainer.add(t),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var t=this.container;return this.container=null,this.parentContainer.remove(t),t}else return null}setXY(t,r){return this.container&&this.parentContainer.setChildLocalPosition(this.container,t,r),this}setCellContainerAlign(t){return typeof t=="string"&&(t=Ou[t]),this.cellContainerAlign=t,this}get deltaHeight(){return this._deltaHeight}set deltaHeight(t){t==null&&(t=0);var r=this.parent;this._deltaHeight===0&&t!==0?r.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&t===0&&r.nonZeroDeltaHeightCount--;var x=this._deltaHeight!==t;if(this._deltaHeight=t,x){r.resetTotalRowsHeight();var s=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(s,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(t){this.deltaHeight=t}setDeltaHeight(t){return this.deltaHeight=t,this}setDeltaWidth(t){return this.deltaHeight=t,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(t){this.scrollMode!==1&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setHeight(t){return this.height=t,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(t){this.scrollMode!==0&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setWidth(t){return this.width=t,this}get scene(){return this.parentContainer.scene}};Object.assign(rd.prototype,Vr);var Vb=rd;var zb=Phaser.Utils.Objects.GetValue,OJ=Phaser.Utils.Array.SpliceOne,mg=class{constructor(t,r){this.parent=t,this.cells=[],this.cellPool=new pe,this.resetFromJSON(r)}resetFromJSON(t){t===void 0&&(t={}),this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight();var r=t.cellHeight;r===void 0&&(r=30);var x=t.cellWidth;return x===void 0&&(x=30),this.setDefaultCellHeight(r),this.setDefaultCellWidth(x),this.initCells(zb(t,"cellsCount",0)),this.setColumnCount(zb(t,"columns",1)),this}destroy(t){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(t){return this.defaultCellHeight=t,this}setDefaultCellWidth(t){return this.defaultCellWidth=t,this}initCells(t){var r=this.cells;r.length=t;for(var x=0;x<t;x++)r[x]=null;return this}insertNewCells(t,r){var x=this.cells;if(t===x.length){var s=t+r;x.legth=s;for(var g=t;g<s;g++)x[g]=null}else{var e=[];e.length=r;for(var g=0;g<r;g++)e[g]=null;this.cells.splice(t,0,...e)}return this.resetTotalRowsHeight(),this}removeCells(t,r){for(var x=t+r,s=t;s<x;s++)this.freeCell(s);return x===this.cells.length?this.cells.length=t:(r===1?OJ(this.cells,t):this.cells.splice(t,r),this.buildCellIndex(t)),this.resetTotalRowsHeight(),this}setColumnCount(t){return this.colCount=t,this.resetTotalRowsHeight(),this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(t){return t>=0&&t<this.cells.length}heightToRowIndex(t,r){if(r===void 0&&(r=0),t===0)return 0;if(this.defaultCellHeightMode){var p=t/this.defaultCellHeight;switch(r){case 0:p=Math.floor(p);break;case 1:p=Math.ceil(p);break;default:Number.isInteger(p)?p+=1:p=Math.floor(p);break}return p}for(var x=this.rowCount,s=t,g,e,n,p=0;;)if(n=this.getRowHeight(p),s-=n,g=p>=0&&p<x,s>0&&g)p+=1;else{if(s===0)return r===2&&(p+=1),p;if(r===1){var f=p;p+=1,g=p>=0&&p<x,g||(p=f)}return p}}widthToColIndex(t,r){if(t===0)return 0;var x=t/this.defaultCellWidth;return r?x=Math.ceil(x):x=Math.floor(x),x}colRowToCellIndex(t,r){return t>=this.colCount?null:r*this.colCount+t}rowIndexToHeight(t,r){if(this.defaultCellHeightMode)return(r-t+1)*this.defaultCellHeight;for(var x,s=0,g=t;g<=r;g++)x=this.getRowHeight(g),s+=x;return s}colIndexToWidth(t,r){return(r-t+1)*this.defaultCellWidth}getRowHeight(t){var r=this.colCount;if(r<=1)return this.getCellHeight(this.colRowToCellIndex(0,t));for(var x=0,s,g=0;g<r;g++)s=this.getCellHeight(this.colRowToCellIndex(g,t)),x<s&&(x=s);return x}getColWidth(t){return this.defaultCellWidth}getCellHeight(t){if(!this.isValidCellIdx(t))return 0;var r;if(this.defaultCellHeightMode)r=this.defaultCellHeight;else{var x=this.getCell(t,!1),s=x?x.deltaHeight:0;r=this.defaultCellHeight+s}return r}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(t){return t%this.colCount}cellIndxeToRowIndex(t){return Math.floor(t/this.colCount)}getCell(t,r){if(!this.isValidCellIdx(t))return null;if(r===void 0&&(r=!0),this.cells[t]===null&&r){var x=this.newCell(t);this.cells[t]=x}return this.cells[t]}newCell(t){var r=this.cellPool.pop();return r===null?r=new Vb(this):r.setParent(this),r.index=t,r}buildCellIndex(t){t===void 0&&(t=0);for(var r=this.cells,x,s=t,g=r.length;s<g;s++)x=r[s],x&&(x.index=s);return this}getParentContainer(){return this.parent}freeCell(t){return typeof t=="number"&&(t=this.cells[t]),t?(t.destroy(),this.cellPool.push(t),this):this}},Yb=mg;var wJ=function(i){var t=this.table,r=this.topTableOY,x=this.bottomTableOY,s=i>this.topTableOY,g=i<this.bottomTableOY;if(this.clampTableOXY){var e=t.rowCount,n=t.heightToRowIndex(this.instHeight,1);e<n?i=0:s?i=r:g&&(i=x)}return this._tableOY!==i&&(this._tableOY=i),s&&(this.execeedTopState||this.emit("execeedtop",this,i,r)),this.execeedTopState=s,g&&(this.execeedBottomState||this.emit("execeedbottom",this,i,x)),this.execeedBottomState=g,this},Ub=wJ;var LJ=function(i){var t=this.table,r=this.leftTableOX,x=this.rightTableOX,s=i>this.leftTableOX,g=i<this.rightTableOX;if(this.clampTableOXY){var e=t.colCount,n=t.widthToColIndex(this.instWidth,!0);e<n?i=0:s?i=r:g&&(i=x)}return this._tableOX!==i&&(this._tableOX=i),s&&(this.execeedLeftState||this.emit("execeedleft",this,i,r)),this.execeedLeftState=s,g&&(this.execeedRightState||this.emit("execeedright",this,i,x)),this.execeedRightState=g,this},Xb=LJ;var FJ=function(i){return i.hasOwnProperty("geometryMask")?i.geometryMask:i.bitmapMask},Aa=FJ;var bJ=Phaser.Geom.Intersects.RectangleToRectangle,DJ=Phaser.Geom.Rectangle.Overlaps,IJ=function(i,t,r){if(!!t){r===void 0&&(r=i.getAllChildren());for(var x=i.getBounds(),s=Aa(t),g,e,n,p=0,f=r.length;p<f;p++)if(g=r[p],!g.hasOwnProperty("isRexContainerLite")&&g!==s&&!!BJ(g))if(g.getBounds)switch(e=g.getBounds(e),n=GJ(x,e),n){case 4:NJ(i,g,t);break;case 0:bJ(x,e)||DJ(x,e)?gg(i,g,t):VJ(i,g,t);break;default:gg(i,g,t);break}else gg(i,g,t)}},BJ=function(i){if(!i.displayList)return!1;for(;;){var t=i.rexContainer;if(t)if(t.visible){var r=t.parent;if(r){i=r;continue}else return!0}else return!1;else return i.visible}},GJ=function(i,t){var r=0,x=t.top,s=t.bottom,g=t.left,e=t.right;return r+=i.contains(g,x)?1:0,r+=i.contains(g,s)?1:0,r+=i.contains(e,x)?1:0,r+=i.contains(e,s)?1:0,r},NJ=function(i,t,r){i.setChildMaskVisible(t,!0),t.clearMask&&t.clearMask()},gg=function(i,t,r){i.setChildMaskVisible(t,!0),t.setMask&&t.setMask(r)},VJ=function(i,t,r){i.setChildMaskVisible(t,!1),t.clearMask&&t.clearMask()},Wb=IJ;var xg=Phaser.Utils.Objects.GetValue,zJ={update:0,everyTick:1},sd={setupChildrenMask(i){return i===!1?this:(this.setMaskUpdateMode(xg(i,"updateMode",0)),this.enableChildrenMask(xg(i,"padding",0)),this.setMaskLayer(xg(i,"layer",void 0)),this.startMaskUpdate(),this)},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this):this},setMaskUpdateMode(i){return typeof i=="string"&&(i=zJ[i]),this.maskUpdateMode=i,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(i){var t=Be.call(this,null,this,0,i);return this.childrenMask=t.createGeometryMask(),this},setMaskChildrenFlag(i){return i===void 0&&(i=!0),this.maskChildrenFlag=i,this},setMaskLayer(i){return this.maskLayer=i,this},maskChildren(){return!this.childrenMask||!this.maskChildrenFlag||this.alpha===0||!this.visible?this:(this.privateRenderLayer?this.privateRenderLayer.setMask(this.childrenMask):this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):Wb(this,this.childrenMask),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this)},layoutChildrenMask(){if(!this.childrenMask)return this;var i=Aa(this.childrenMask);return i.setPosition().resize(),this.resetChildPositionState(i),this}};var YJ=function(){if(this.cellsCount!==0){var i=this.table;this.startRowIndex=Math.max(i.heightToRowIndex(-this.tableOY,2),0);for(var t=this.startRowIndex,r=Math.max(i.widthToColIndex(-this.tableOX),0),x=r,s=i.colRowToCellIndex(x,t),g=this.bottomBound,e=this.rightBound,n=i.cellsCount-1,p=i.colCount-1,f=this.getCellTLX(x),u=f,l=this.getCellTLY(t);l<g&&s<=n;){if(this.table.isValidCellIdx(s)){var a=i.getCell(s,!0);this.visibleCells.set(a),this.preVisibleCells.contains(a)||this.showCell(a);var o,c;if(this.scrollMode===0?(o=u,c=l):(o=l,c=u),a.cellContainerAlign==null)a.setXY(o,c);else{var h=a.getContainer();er(h,o,c,a.width,a.height,a.cellContainerAlign),a.setXY(h.x,h.y)}}u<e&&x<p?(u+=i.getColWidth(x),x+=1):(u=f,l+=i.getRowHeight(t),x=r,t+=1),s=i.colRowToCellIndex(x,t)}}},kb=YJ;var UJ=function(i){var t=null,r=i.getContainer();if(r?(t=r,i.popContainer()):this.cellContainersPool&&(t=this.cellContainersPool.getFirstDead(),t!==null&&t.setActive(!0).setVisible(!0)),this.emit("cellvisible",i,t,this),this.cellContainersPool){var r=i.getContainer();r?t===null?this.cellContainersPool.add(r):t!==r&&(this.cellContainersPool.add(r),this.cellContainersPool.killAndHide(t)):t!==null&&this.cellContainersPool.killAndHide(t)}},nd=UJ;var XJ=function(i){var t=this.scrollMode===0?this.topLeftX:this.topLeftY,r=this.tableOX+this.table.colIndexToWidth(0,i-1)+t;return r},Hb=XJ;var WJ=function(i){var t=this.scrollMode===0?this.topLeftY:this.topLeftX,r=this.tableOY+this.table.rowIndexToHeight(0,i-1)+t;return r},Kb=WJ;var kJ=function(){var i=this.preVisibleCells,t=this.visibleCells;i.iterate(function(r){t.contains(r)||this.hideCell(r)},this)},jb=kJ;var HJ=function(i){if(this.emit("cellinvisible",i),this.cellContainersPool){var t=i.popContainer();t&&this.cellContainersPool.killAndHide(t)}i.destroyContainer()},ad=HJ;var KJ=function(i){return i===void 0&&(i=!1),i&&(Zb.call(this),this.hideCells()),Zb.call(this),this.showCells(),this.hideCells(),this.setMaskChildrenFlag(),this},Zb=function(){var i=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=i,this.visibleCells.clear()},Jb=KJ;var jJ=function(i){var t=this.table.getCell(i,!1);return t&&this.visibleCells.contains(t)},$b=jJ;var yg=function(i,t){t-=this.y+this.topLeftY,i-=this.x+this.topLeftX;var r=this.tableOY-(this.scrollMode===0?t:i),x=this.tableOX-(this.scrollMode===0?i:t),s=this.table,g=s.heightToRowIndex(-r,0),e=s.widthToColIndex(-x),n=s.colRowToCellIndex(e,g);return n===null||!this.isCellVisible(n)?null:n},Qb=function(i,t){var r=yg.call(this,i,t);if(r!==null)return this.getCellContainer(r)};var qb=function(i,t){return this.visibleCells.each(i,t),this},_b=function(i,t){return this.visibleCells.iterate(i,t),this},tD=function(i,t){return this.table.cells.slice().forEach(i,t),this},eD=function(i,t){return this.table.cells.forEach(i,t),this};var ZJ=function(i){var t=this.cellsCount;return t===i?this:(t>i?this.removeCells(i,t-i):this.insertNewCells(t,i-t),this)},iD=ZJ;var JJ=Phaser.Math.Clamp,$J=function(i,t){return typeof i=="object"&&(i=i.index),t===void 0&&(t=1),t<=0?this:(i=JJ(i,0,this.cellsCount),this.table.insertNewCells(i,t),this)},rD=$J;var QJ=function(i,t){if(typeof i=="object"&&(i=i.index),t===void 0&&(t=1),i<0&&(t+=i,i=0),t<=0)return this;if(i>this.cellsCount)return this;for(var r,x=i,s=i+t;x<s;x++)r=this.getCell(x,!1),r&&(this.visibleCells.contains(r)&&(ad.call(this,r),this.visibleCells.delete(r)),this.preVisibleCells.delete(r));return this.table.removeCells(i,t),this},sD=QJ;var qJ=function(i){return this.table.colCount===i?this:(this.table.setColumnCount(i),this)},nD=qJ;var _J=function(i,t){return this.setCellsCount(i*t),this.table.setColumnCount(i),this},aD=_J;var t$=function(i){var t=this.table.getCell(i,!1);return!t||!t.container?this:(nd.call(this,t),this)},oD=t$;var hD={setTableOY:Ub,setTableOX:Xb,showCells:kb,showCell:nd,getCellTLX:Hb,getCellTLY:Kb,hideCells:jb,hideCell:ad,updateTable:Jb,isCellVisible:$b,pointToCellIndex:yg,pointToCellContainer:Qb,eachVisibleCell:qb,iterateVisibleCell:_b,eachCell:tD,iterateCell:eD,setCellsCount:iD,insertNewCells:rD,removeCells:sD,setColumnCount:nD,setGridSize:aD,updateVisibleCell:oD};Object.assign(hD,sd);var lD=hD;var e$=Phaser.GameObjects.Group,uD=Phaser.Structs.Set,vr=Phaser.Utils.Objects.GetValue,od=class extends Qi{constructor(t,r,x,s,g,e){e===void 0&&(e={}),super(t,r,x,s,g),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new uD,this.preVisibleCells=new uD,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var n=vr(e,"reuseCellContainer",!1);n&&(this.cellContainersPool=new e$(t));var p=vr(e,"cellVisibleCallback",null);if(p!==null){var f=vr(e,"cellVisibleCallbackScope",void 0);this.on("cellvisible",p,f)}if(p=vr(e,"cellInvisibleCallback",null),p!==null){var f=vr(e,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",p,f)}vr(e,"enableLayer",!1)&&this.enableLayer(),this.setupChildrenMask(vr(e,"mask",void 0)),this.setScrollMode(vr(e,"scrollMode",0)),this.setClampMode(vr(e,"clamplTableOXY",!0));var u,l,a,o=this.scrollMode===0;if(o?(u=e.cellWidth,l=e.cellHeight,a=e.columns):(u=e.cellHeight,l=e.cellWidth,a=vr(e,"rows",e.columns)),a||(a=1),this.expandCellSize=u===void 0,this.expandCellSize){var s=o?this.width:this.height;u=s/a}e.cellWidth=u,e.cellHeight=l,e.columns=a,this.table=new Yb(this,e),this.updateTable()}destroy(t){!this.scene||(this.destroyChildrenMask(),this.table.destroy(t),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=i$[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampTableOXY=t,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(t){this.setTableOY(t).updateTable()}set tableOX(t){this.setTableOX(t).updateTable()}setTableOXY(t,r){return this.setTableOY(r).setTableOX(t),this}addTableOY(t){return this.setTableOY(this.tableOY+t),this}addTableOX(t){return this.setTableOX(this.tableOX+t),this}addTableOXY(t,r){return this.addTableOY(r).addTableOX(t),this}setTableOYByPercentage(t){return this.setTableOY(-this.tableVisibleHeight*t),this}getTableOYPercentage(){var t=this.tableVisibleHeight;return t===0?0:this.tableOY/-t}set t(t){this.setTableOYByPercentage(t).updateTable()}get t(){return this.getTableOYPercentage()}scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this}scrollToRow(t){this.scrollToBottom();var r=this.table.rowIndexToHeight(0,t-1);return this.setTableOY(-r).updateTable(),this}scrollToNextRow(t){return t===void 0&&(t=1),this.scrollToRow(this.startRowIndex+t),this}getCell(t){return this.table.getCell(t,!0)}getCellContainer(t){var r=this.table.getCell(t,!1),x;return r&&(x=r.getContainer()),x}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(t,r){var x;return typeof t=="number"?x=this.table.getCell(t,!0):x=t,x.height=r,this}setCellWidth(t,r){var x;return typeof t=="number"?x=this.table.getCell(t,!0):x=t,x.width=r,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var t=this.tableHeight-this.instHeight;return t<0&&(t=0),t}get tableVisibleWidth(){var t,r=this.tableWidth,x=this.instWidth;return r>x?t=r-x:t=0,t}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(t,r){return this.width===t&&this.height===r?this:(super.resize(t,r),this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount),this.updateTable(!0),this.layoutChildrenMask(),this.maskChildren(),this)}};Object.assign(od.prototype,lD);var i$={v:0,vertical:0,h:1,horizontal:1};var fD=od;var dD=fD;var r$=function(i){Object.defineProperty(i,"childOY",{configurable:!0,get:function(){return i.tableOY},set:function(t){i.tableOY=t}}),Object.defineProperty(i,"topChildOY",{get:function(){return i.topTableOY}}),Object.defineProperty(i,"bottomChildOY",{get:function(){return i.bottomTableOY}}),Object.defineProperty(i,"childVisibleHeight",{get:function(){return i.instHeight}}),Object.defineProperty(i,"childHeight",{get:function(){return i.tableHeight}})},cD=r$;var s$=function(i){i.on("cellvisible",function(t,e,x){var s=this.createCellContainerCallback,g=this.createCellContainerCallbackScope;t.item=this.items[t.index],t.items=this.items;var e;g?e=s.call(g,t,e,x):e=s(t,e,x),e&&(t.cellContainerAlign==null&&e.setOrigin&&e.setOrigin(0),e.isRexSizer&&e.layout()),t.item=void 0,t.items=void 0,t.setContainer(e)},this)},pD=s$;var n$=function(i,t,r,x,s,g,e){var n;if(s===void 0?n=x:n=r.pointToCellIndex(x,s),n!=null){var p=r.getCellContainer(n);p&&i.emit(t,p,n,g,e)}},Me=n$;var a$=function(i,t){i.on("pointerdown",function(r,x,s,g){Me(this.eventEmitter,"cell.down",i,r.worldX,r.worldY,r,g)},this).on("pointerup",function(r,x,s,g){Me(this.eventEmitter,"cell.up",i,r.worldX,r.worldY,r,g)},this)},vD=a$;var o$=function(i,t){i.on("pointermove",mD,this).on("pointerover",mD,this).on("pointerout",h$,this)},mD=function(i,t,r,x){var s=this.childrenMap.child,g=s.pointToCellIndex(i.worldX,i.worldY);if(g!==s.input.lastOverCellIndex){var e=s.input.lastOverCellIndex;s.input.lastOverCellIndex=g,Me(this.eventEmitter,"cell.out",s,e,void 0,i,x),Me(this.eventEmitter,"cell.over",s,g,void 0,i,x)}},h$=function(i,t){var r=this.childrenMap.child,x=r.input.lastOverCellIndex;r.input.lastOverCellIndex=void 0,Me(this.eventEmitter,"cell.out",r,x,void 0,i,t)},gD=o$;var l$=Phaser.Utils.Objects.GetValue,u$=function(i,t){var r=l$(t,"click",void 0);r!==!1&&(r===void 0&&(r={}),r.threshold=10,i._click=new Ji(i,r),i._click.on("click",function(x,s,g,e){Me(this.eventEmitter,"cell.click",s,g.worldX,g.worldY,g,e)},this))},xD=u$;var f$=Phaser.Utils.Objects.GetValue,d$=function(i,t){var r=f$(t,"tap",void 0);r!==!1&&(i._tap=new Ys(i,r),i._tap.on("tap",function(x,s,g){var e=`cell.${x.tapsCount}tap`;Me(this.eventEmitter,e,x.gameObject,x.worldX,x.worldY,g)},this))},yD=d$;var c$=Phaser.Utils.Objects.GetValue,p$=function(i,t){var r=c$(t,"press",void 0);r!==!1&&(i._press=new Us(i,r),i._press.on("pressstart",function(x,s,g){Me(this.eventEmitter,"cell.pressstart",i,x.worldX,x.worldY,g)},this).on("pressend",function(x,s,g){Me(this.eventEmitter,"cell.pressend",i,x.worldX,x.worldY,g)},this))},CD=p$;var v$=Phaser.Utils.Objects.GetValue,m$=function(i,t){var r=v$(t,"swipe",void 0);r!==!1&&(r===void 0&&(r={}),r.dir="4dir",i._swipe=new Xs(i,r),i._swipe.on("swipe",function(x,s,g){var e=x.left?"left":x.right?"right":x.up?"up":"down";Me(this.eventEmitter,`cell.swipe${e}`,i,x.worldX,x.worldY,g)},this))},TD=m$;var g$=function(i,t){i.setInteractive(),vD.call(this,i,t),gD.call(this,i,t),xD.call(this,i,t),yD.call(this,i,t),CD.call(this,i,t),TD.call(this,i,t)},SD=g$;var x$=function(i){i===void 0?this.items=[]:this.items=i;var t=this.childrenMap.child;return t.setCellsCount(this.items.length),t.updateTable(!0),this.resizeController(),this},PD=x$;var ED={scrollToRow(i){var t=this.childrenMap.child;return t.scrollToRow(i),this},scrollToNextRow(i){var t=this.childrenMap.child;return t.scrollToNextRow(i),this}};var mr=Phaser.Utils.Objects.GetValue,hd=class extends Pa{constructor(t,r){r===void 0&&(r={});var x=fs(r),s=mr(r,"table",void 0);s===void 0&&(s={}),s.scrollMode=x,s.clamplTableOXY=mr(r,"clamplChildOY",!1);var g=mr(s,"width",void 0),e=mr(s,"height",void 0),n=new dD(t,0,0,g,e,s);t.add.existing(n);var p,f;x===0?(p=g===void 0?1:0,f=e===void 0):(p=e===void 0?1:0,f=g===void 0),cD(n),n.minWidth=g===void 0?0:void 0,n.minHeight=e===void 0?0:void 0,r.type="rexGridTable",r.child={gameObject:n,proportion:p,expand:f};var u=mr(r,"space",void 0);u&&(u.child=u.table),super(t,r),this.addChildrenMap("table",n),this.addChildrenMap("tableLayer",n.maskLayer),this.eventEmitter=mr(r,"eventEmitter",this);var l=mr(r,"createCellContainerCallback",Gt),a=mr(r,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(l,a),pD.call(this,n),this.resizeControllerFlag=!1;var o=x===0?"cellheightchange":"cellwidthchange";n.on(o,function(){this.resizeControllerFlag=!0},this),mr(s,"interactive",!0)&&SD.call(this,n,s),this.setItems(mr(r,"items",[])),t.game.events.on("poststep",this.onPostStep,this)}destroy(t){!this.scene||(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(t))}setCreateCellContainerCallback(t,r){return this.createCellContainerCallback=t,this.createCellContainerCallbackScope=r,this}refresh(){return this.setItems(this.items),this}getCell(t){var r=this.childrenMap.child;return r.getCell(t)}getCellContainer(t){var r=this.childrenMap.child;return r.getCellContainer(t)}updateVisibleCell(t){var r=this.childrenMap.child;return r.updateVisibleCell(t)}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}get startRowIndex(){var t=this.childrenMap.child;return t.startRowIndex}},y$={setItems:PD};Object.assign(hd.prototype,ED,y$);var Cg=hd;J.register("gridTable",function(i){var t=new Cg(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.GridTable",Cg);var C$=function(i,t){return i.sameOrientation?i.orientation=t.orientation:i.orientation=t.orientation===0?1:0,i},Zo=C$;var T$=function(i,t){i.popUp(Zo(i.root.easeIn,i))},S$=function(i,t){i.scaleDown(Zo(i.root.easeOut,i))},MD={setTransitInCallback(i){return i===void 0&&(i=T$),this.transitInCallback=i,this},setTransitOutCallback(i){return i===void 0&&(i=S$),this.transitOutCallback=i,this}};var P$=function(i,t,r,x,s){var g=i.scene,e=g.time.delayedCall(t,function(){g.sys.events.once("postupdate",function(){r.call(x,s)})});return e},AD=P$;var RD={delayCall(i,t,r){return this.timer=AD(this,i,t,r),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}};var E$=function(i,t){var x=this.childrenMap.subMenu;if(x&&x.parentButton===i)return this;this.collapseSubMenu();var r;this.root.toggleOrientation?r=this.orientation===0?1:0:r=this.orientation;var x=new this.constructor(this.scene,{items:t,orientation:r,space:this.space,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:i});return this.pin(x),this.childrenMap.subMenu=x,this.root.emit("expand",x,i,this),this},OD=E$;var M$=function(){var i=this.root;i.emit("collapse",this,this.parentButton,i);var t=i.easeOut.duration;return i.transitOutCallback(this,t),this.collapseSubMenu(),this.delayCall(t,this.destroy,this),this},wD=M$;var A$=function(){var i=this.childrenMap.subMenu;return i===void 0?this:(this.childrenMap.subMenu=void 0,this.remove(i),i.collapse(),this)},LD=A$;var FD={expandSubMenu:OD,collapse:wD,collapseSubMenu:LD};Object.assign(FD,MD,RD);var bD=FD;var R$=function(i,t,r,x){var s;return r&&(t.scene=i,x?s=r.call(x,t):s=r(t),t.scene=void 0),s},DD=R$;var O$=function(i,t,r,x){var s,g=[],e;if(t&&r)for(var n=0,p=t.length;n<p;n++)s=t[n],s.scene=i,x?e=r.call(x,s,n,t):e=r(s,n,t),s.scene=void 0,g.push(e);return g},ID=O$;var w$=function(i){i.on(i.root.expandEventName,function(t,r){if(!this._isPassedEvent){var x=this.root.childrenKey,s=this.items[r][x];s&&this.expandSubMenu(t,s)}},i).on("button.click",function(t,r,x,s){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",t,r,x,s),this.root._isPassedEvent=!1)},i).on("button.over",function(t,r,x,s){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",t,r,x,s),this.root._isPassedEvent=!1)},i).on("button.out",function(t,r,x,s){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",t,r,x,s),this.root._isPassedEvent=!1)},i)},BD=w$;var L$=function(i,t){return typeof t=="number"&&(t={duration:t}),t.hasOwnProperty("orientation")&&t.orientation!==void 0?t.sameOrientation=hs(t.orientation)===i.orientation:t.sameOrientation=!0,t.destroy=!1,t},Tg=L$;var F$=function(){var i=this.root,t=i.easeIn.duration;i.transitInCallback(this,t),this!==this.root&&this.delayCall(t,function(){this.root.emit("popup.complete",this)},this)},GD=F$;var Ge=Phaser.Utils.Objects.GetValue,fd=class extends bt{constructor(t,r){r===void 0&&(r={}),r.hasOwnProperty("orientation")||(r.orientation=1);var x=r._rootMenu,s=r._parentMenu,g=r._parentButton,e=Ge(r,"popup",!0),n=Ge(r,"items",void 0),p=Ge(r,"createBackgroundCallback",void 0),f=Ge(r,"createBackgroundCallbackScope",void 0);r.background=DD(t,n,p,f);var u=Ge(r,"createButtonCallback",void 0),l=Ge(r,"createButtonCallbackScope",void 0);if(r.buttons=ID(t,n,u,l),super(t,r),this.type="rexMenu",this.items=n,this.root=x===void 0?this:x,this.isRoot=this.root===this,this.parentMenu=s,this.parentButton=g,this.timer=void 0,this.isRoot){this.isPopUpMode=e;var a=r.bounds;a===void 0&&(a=vi(t)),this.bounds=a,this.subMenuSide=[this.y<a.centerY?Pg:ud,this.x<a.centerX?Sg:ld];var o=Ge(r,"subMenuSide",void 0);o!==void 0&&(typeof o=="string"&&(o=b$[o]),this.subMenuSide[this.orientation]=o),this.toggleOrientation=Ge(r,"toggleOrientation",!1),this.expandEventName=Ge(r,"expandEvent","button.click"),this.easeIn=Tg(this,Ge(r,"easeIn",0)),this.easeOut=Tg(this,Ge(r,"easeOut",0)),this.setTransitInCallback(Ge(r,"transitIn")),this.setTransitOutCallback(Ge(r,"transitOut")),this.createBackgroundCallback=p,this.createBackgroundCallbackScope=f,this.createButtonCallback=u,this.createButtonCallbackScope=l,this.childrenKey=Ge(r,"childrenKey","children"),this._isPassedEvent=!1,this.pointerDownOutsideCollapsing=Ge(r,"pointerDownOutsideCollapsing",!0),this.pointerDownOutsideCollapsing&&t.input.on("pointerdown",this.onPointerDownOutside,this)}var c=0,h=0;if(!this.root.easeIn.sameOrientation){var d=Zo(this.root.easeIn,this).orientation,v=s?s.orientation:this.orientation,o=this.root.subMenuSide[v];d===0&&o===ld&&(c=1),d===1&&o===ud&&(h=1)}if(e&&this.setOrigin(c,h).layout(),!this.isRoot){this.setScale(this.root.scaleX,this.root.scaleY);var o=this.root.subMenuSide[s.orientation];switch(o){case ld:this.alignTop(g.top).alignRight(g.left);break;case Sg:this.alignTop(g.top).alignLeft(g.right);break;case ud:this.alignLeft(g.left).alignBottom(g.top);break;case Pg:this.alignLeft(g.left).alignTop(g.bottom);break}}BD(this),e&&(this.pushIntoBounds(this.root.bounds),GD.call(this))}destroy(t){!this.scene||(this.isRoot&&this.pointerDownOutsideCollapsing&&this.scene.input.off("pointerdown",this.onPointerDownOutside,this),super.destroy(t),this.removeDelayCall())}isInTouching(t){return super.isInTouching(t)?!0:this.childrenMap.subMenu?this.childrenMap.subMenu.isInTouching(t):!1}onPointerDownOutside(t){this.isInTouching(t)||(this.isPopUpMode?this.collapse():this.collapseSubMenu())}},ld=2,Sg=0,ud=3,Pg=1,b$={up:ud,down:Pg,left:ld,right:Sg};Object.assign(fd.prototype,bD);var Jo=fd;J.register("menu",function(i){var t=new Jo(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Menu",Jo);var D$={setWrapEnable(i){return i===void 0&&(i=!0),this.listWrapEnable=i,this},setCreateButtonCallback(i){return this.listCreateButtonCallback=i,this},setCreateListBackgroundCallback(i){return this.listCreateBackgroundCallback=i,this},setButtonClickCallback(i){return this.listOnButtonClick=i,this},setButtonOverCallback(i){return this.listOnButtonOver=i,this},setButtonOutCallback(i){return this.listOnButtonOut=i,this},setListExpandDirection(i){return typeof i=="string"&&(i=I$[i]),this.listExpandDirection=i,this},setListEaseInDuration(i){return i===void 0&&(i=0),this.listEaseInDuration=i,this},setListEaseOutDuration(i){return i===void 0&&(i=0),this.listEaseOutDuration=i,this},setListTransitInCallback(i){return this.listTransitInCallback=i,this},settListTransitOutCallback(i){return this.listTransitOutCallback=i,this},setListBounds(i){return this.listBounds=i,this},setListWidth(i){return this.listWidth=i,this},setListHeight(i){return this.listHeight=i,this},setListSize(i,t){return this.setListWidth(i).setListHeight(t),this},setListAlignmentMode(i){return this.listAlignMode=i,this},setListAlignmentSide(i){return i===void 0&&(i=""),this.listAlignSide=i,this},setListSpace(i){return i===void 0&&(i={}),this.listSpace=i,this},setListDraggable(i){return i===void 0&&(i=!0),this.listDraggable=i,this}},I$={down:0,up:1},ND=D$;var B$=function(){var i=this.scene,t,r=this.listCreateBackgroundCallback;r&&(t=r.call(this,i),i.add.existing(t));var x=[],s=this.listCreateButtonCallback;if(s)for(var g=this.options,e=0,n=g.length;e<n;e++){var p=s.call(this,i,g[e],e,g);i.add.existing(p),x.push(p)}var f=this.listWidth;f===void 0&&(this.listAlignMode==="text"?f=this.getElement("text").width:f=this.width);var u=this.listHeight,l;return this.listWrapEnable?l=new Mi(i,{width:f,height:u,background:t,buttons:x,space:this.listSpace,draggable:this.listDraggable}):l=new bt(i,{width:f,height:u,orientation:"y",background:t,buttons:x,space:this.listSpace,draggable:this.listDraggable}),i.add.existing(l),l},VD=B$;var G$=function(i,t,r,x,s){x===void 0&&(x="Linear");var g={};switch(g.mode=0,r){case 0:case"x":g.end={x:0};break;case 1:case"y":g.end={y:0};break;default:g.end=0;break}return g.duration=t,g.ease=x,s===void 0?s=new Er(i,g):s.resetFromJSON(g),s.restart(),s},zD=G$;var N$=function(i,t,r,x,s){return ri(i,t)?Pt(i,t):r&&ri(i,r)?Pt(i,r):x&&ri(i,x)?Pt(i,x):s},YD=N$;var Ra=Phaser.Utils.Objects.GetValue,V$=function(i,t){var r=Ra(t,"expandDirection",void 0);typeof r=="string"&&(r=z$[r]);var x=YD(t,"alignTarget","alignTargetX"),s=Ra(t,"alignTargetY",x),g=Ra(t,"alignOffsetX",0),e=Ra(t,"alignOffsetY",0),n=Ra(t,"alignSide",""),p=n.includes("right"),f=Ra(t,"bounds"),u=r===0,l=r===1,a=!u&&!l,o=p?1:0,c=u||a?0:1;i.setOrigin(o,c);var h,d;p?h=x.getTopRight().x:h=x.getTopLeft().x,d=s.getBottomLeft().y,i.setPosition(h+g,d+e);var v=f;v||(v=vi(i.scene)),a&&i.getBottomLeft().y>v.bottom&&(d=s.getTopLeft().y,i.setOrigin(0,1).setPosition(h+g,d+e))},z$={down:0,up:1},UD=V$;var XD=Phaser.Utils.Objects.GetValue,Eg=class extends na{constructor(t,r){r===void 0&&(r={}),r.transitIn==null&&(r.transitIn=function(g,e){Qn(g,e,"y","Cubic")}),r.transitOut==null&&(r.transitOut=function(g,e){zD(g,e,"y","Linear")}),r.manualClose=!0,r.clickOutsideClose=!0,r.destroy=!0,super(t,r),UD(t,r),t.isRexSizer&&t.layout();var x=XD(r,"touchOutsideClose",!1),s=XD(r,"anyTouchClose",!1);s&&(x=!1),s?this.once("open",this.anyTouchClose,this):x&&this.once("open",this.touchOutsideClose,this),this.requestOpen()}shutdown(t){this.isShutdown||(this.scene.input.off("pointerup",this.touchCloseCallback,this),super.shutdown(t))}touchOutsideClose(){return this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&Rr(this.parent,t.worldX,t.worldY)||this.requestClose()}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}},WD=Eg;var kD=WD;var dd=kD;var Y$=function(){if(this.listPanel)return this;var i=VD.call(this);i.on("button.over",function(x,s,g,e){this.listOnButtonOver&&this.listOnButtonOver.call(this,x,s,g,e),this.emit("button.over",this,i,x,s,g,e)},this).on("button.out",function(x,s,g,e){this.listOnButtonOut&&this.listOnButtonOut.call(this,x,s,g,e),this.emit("button.out",this,i,x,s,g,e)},this);var t;!this.listAlignMode||this.listAlignMode==="label"?t=this:t=this.getElement(this.listAlignMode);var r=new dd(i,{duration:{in:this.listEaseInDuration,out:this.listEaseOutDuration},transitIn:this.listTransitInCallback,transitOut:this.listTransitOutCallback,expandDirection:this.listExpandDirection,alignTargetX:t,alignTargetY:this,alignSide:this.listAlignSide,bounds:this.listBounds,anyTouchClose:!0}).on("open",function(){i.on("button.click",function(x,s,g,e){this.listOnButtonClick&&this.listOnButtonClick.call(this,x,s,g,e),this.emit("button.click",this,i,x,s,g,e)},this),this.emit("list.open",this,i)},this).on("close",function(){this.listPanel=void 0,this.dropDownBehavior=void 0},this);return this.listPanel=i,this.dropDownBehavior=r,this.pin(i),this},HD=Y$;var U$=function(){return this.dropDownBehavior?(this.dropDownBehavior.requestClose(),this):this},KD=U$;var X$=function(){return this.listPanel?this.closeListPanel():this.openListPanel(),this},jD=X$;var ZD={openListPanel:HD,closeListPanel:KD,toggleListPanel:jD};Object.assign(ZD,ND);var JD=ZD;var Vt=Phaser.Utils.Objects.GetValue,cd=class extends xe{constructor(t,r){super(t,r),this.type="rexDropDownList",this.timer=void 0,this.setOptions(Vt(r,"options"));var x=Vt(r,"list");this.setWrapEnable(Vt(x,"wrap",!1)),this.setCreateButtonCallback(Vt(x,"createButtonCallback")),this.setCreateListBackgroundCallback(Vt(x,"createBackgroundCallback")),this.setButtonClickCallback(Vt(x,"onButtonClick")),this.setButtonOverCallback(Vt(x,"onButtonOver")),this.setButtonOutCallback(Vt(x,"onButtonOut")),this.setListExpandDirection(Vt(x,"expandDirection")),this.setListEaseInDuration(Vt(x,"easeIn",500)),this.setListEaseOutDuration(Vt(x,"easeOut",100)),this.setListTransitInCallback(Vt(x,"transitIn")),this.settListTransitOutCallback(Vt(x,"transitOut")),this.setListSize(Vt(x,"width"),Vt(x,"height")),this.setListAlignmentMode(Vt(x,"alignParent","text")),this.setListAlignmentSide(Vt(x,"alignSide","")),this.setListBounds(Vt(x,"bounds")),this.setListSpace(Vt(x,"space")),this.setListDraggable(Vt(x,"draggable",!1)),this.setValueChangeCallback(Vt(r,"setValueCallback"),Vt(r,"setValueCallbackScope")),this.setValue(Vt(r,"value")),this.onClick(this.toggleListPanel,this)}destroy(t){!this.scene||(this.listPanel&&(this.listPanel.destroy(t),this.listPanel=void 0),super.destroy(t))}setOptions(t){return t===void 0&&(t=[]),this.options=t,this}setValueChangeCallback(t,r){return this.valueChangeCallback=t,this.valueChangeCallbackScope=r,this}setValue(t){return this.value=t,this}get value(){return this._value}set value(t){if(this._value!==t){var r=this._value;this._value=t;var x=this.valueChangeCallback,s=this.valueChangeCallbackScope;x&&(s?x.call(s,this,t,r):x(this,t,r)),this.emit("valuechange",this,t,r)}}emitButtonClick(t){var r=this.options[t];return r?(this.emit("button.click",this,void 0,r,t),this):this}};Object.assign(cd.prototype,JD);var $s=cd;J.register("dropDownList",function(i){var t=new $s(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.DropDownList",$s);var W$=function(i,t,r){t=t?wt(t):{},r===void 0&&(r={});var x=t.label||t.button,s=t.button||t.label;delete t.label,delete t.button;var g=r.label||r.button||r,e=r.button||r.label||r,n=ya(i,x,g);return n.list=t.list||{},n.list.createButtonCallback=function(p,f){var u=Kt(p,s,e).resetDisplayContent({text:f.text});return f.hasOwnProperty("value")&&(u.value=f.value),u},n.list.onButtonOver=function(p,f,u,l){p.setHoverState&&p.setHoverState(!0)},n.list.onButtonOut=function(p,f,u,l){p.setHoverState&&p.setHoverState(!1)},n},pd=W$;var Mg=class extends $s{constructor(t,r,x){r=pd(t,r,x),super(t,r),this.type="rexSimpleDropDownList"}setOptions(t){t===void 0&&(t=[]);for(var r=0,x=t.length;r<x;r++){var s=t[r];typeof s=="string"&&(t[r]={text:s,value:s})}return super.setOptions(t),this}},Ag=Mg;J.register("simpleDropDownList",function(i,t){var r=new Ag(this.scene,i,t);return this.scene.add.existing(r),r});Z(window,"RexPlugins.UI.SimpleDropDownList",Ag);var k$=function(i,t){i===void 0&&(i=this.startLineIndex),t===void 0&&(t=i+this.pageLinesCount);var r;switch(this.textObjectType){case Ht:case $t:r=this.lines.slice(i,t).join(`
`);break;case Jt:var x=this.lines.getLineStartIndex(i),s=this.lines.getLineEndIndex(t-1);r=this.lines.getSliceTagText(x,s,!0);break}return r},$D=k$;var Rg=function(i){return Array.isArray(i)?i=i.join(`
`):typeof i=="number"&&(i=i.toString()),i},QD={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(r){var t=this.totalLinesCount;this.sections.push(Rg(r));var r=this.sections.join(`
`);this.lines=Ea(this.parent,r,this.lines);for(var x=this.totalLinesCount-t,s=Math.ceil(x/this.pageLinesCount),g=0;g<s;g++)this.pageStartIndexes.push(t+g*this.pageLinesCount);return this},setText(i,t){t===void 0&&(t=!0),t&&this.resetPageIdx(),this.clearText();for(var r=Rg(i).split(this.pageBreak),x=0,s=r.length;x<s;x++)this.appendPage(r[x]);return this},appendText(i){var t=this.content+Rg(i);return this.setText(t,!1),this}};var H$=Phaser.Math.Clamp,qD={getPage(i){return i===void 0&&(i=this.pageIndex),this.setPageIndex(i).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},resetPageIdx(){return this.pageIndex=-1,this},setPageIndex(i){return i=H$(i,0,this.pageCount-1),this.pageIndex=i,this.startLineIndex=this.pageStartIndexes[i],this.endLineIndex=this.pageStartIndexes[i+1],this}};var _D={showPage(i){return this.displayText(this.getPage(i)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},show(){return this.displayText(this.getLines()),this},showNextLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex+1).getLines()),this},showPreviousLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex-1).getLines()),this},displayText(i){Ma(this.parent,i)}};var t3={getLines:$D};Object.assign(t3,QD,qD,_D);var e3=t3;var $o=Phaser.Utils.Objects.GetValue,K$=Phaser.Math.Clamp,vd=class extends Tt{constructor(t,r){super(t,{eventEmitter:!1}),this.textObjectType=pr(this.parent),this.pageStartIndexes=[],this.lines=Ea(this.parent,""),this.sections=[],this.resetFromJSON(r)}resetFromJSON(t){return this.setMaxLines($o(t,"maxLines",void 0)),this.setPageBreak($o(t,"pageBreak",`\f
`)),this.setText($o(t,"text","")),this.setStartLineIndex($o(t,"start",0)),this.setPageIndex($o(t,"page",-1)),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(t){if(!this.isShutdown){switch(this.textObjectType){case Ht:this.lines.length=0;break;case Jt:this.lines.destroy();break;case $t:this.lines.length=0;break}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(t)}}setMaxLines(t){return this.maxLines=t,this}setPageBreak(t){return this.pageBreak=t,this}get pageCount(){return this.pageStartIndexes.length}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get startLineIndex(){return this._startLineIndex}set startLineIndex(t){t=K$(t,0,this.totalLinesCount-1),this._startLineIndex=t}setStartLineIndex(t){return this.startLineIndex=t,this}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var t;switch(this.textObjectType){case Ht:case Jt:var r=this.parent.style.maxLines;r>0?t=r:t=this.totalLinesCount;break;case $t:t=this.totalLinesCount;break}return t}get content(){return this.sections.join(this.pageBreak)}};Object.assign(vd.prototype,e3);var i3=vd;var r3=i3;var Qo=r3;var j$=function(i,t){var r=pr(i);switch(r){case Ht:i.style.syncFont(i.canvas,i.context),t=i.runWordWrap(t);break;case Jt:t=i.getText(t,void 0,void 0,!0);break;case $t:t=i.setText(t).getTextBounds().wrappedText;break}return t},s3=j$;var Oa=Phaser.Utils.Objects.GetFastValue,Og=Phaser.Utils.Objects.GetValue,wg=class extends Tt{constructor(t,r){super(t,r),this.timer=null,this.resetFromJSON(r)}resetFromJSON(t){this.setTextWrapEnable(Og(t,"wrap",!1)),this.setTypeMode(Og(t,"typeMode",0)),this.setTypingSpeed(Og(t,"speed",333)),this.setTextCallback=Oa(t,"setTextCallback",null),this.setTextCallbackScope=Oa(t,"setTextCallbackScope",null),this.setTypingContent(Oa(t,"text","")),this.typingIdx=Oa(t,"typingIdx",0),this.insertIdx=Oa(t,"insertIdx",null);var r=Oa(t,"elapsed",null);return r!==null&&this.start(void 0,void 0,this.typingIdx,r),this}shutdown(t){this.isShutdown||(this.freeTimer(),super.shutdown(t))}setTypeMode(t){return typeof t=="string"&&(t=Z$[t]),this.typeMode=t,this}setTypeSpeed(t){return this.speed=t,this}setTypingSpeed(t){return this.speed=t,this}setTextWrapEnable(t){return t===void 0&&(t=!0),this.textWrapEnable=t,this}set text(t){var r=n3(t);this.textWrapEnable&&(r=s3(this.parent,r)),this._text=r}get text(){return this._text}get isTyping(){return this.getTimer()!==null}get isLastChar(){return this.typingIdx===this.textLen}start(t,r,x,s){return t!==void 0&&this.setTypingContent(t),r!==void 0&&(this.speed=r),x===void 0&&(x=0),this.typingIdx=x+1,this.speed===0?this.stop(!0):(this.setText(""),this.startTimer(s)),this}appendText(t){var r=this.text.concat(n3(t));return this.isTyping?this.setTypingContent(r):this.start(r,void 0,this.textLen),this}stop(t){var r=this.getTimer();return r&&this.freeTimer(),t&&(this.typingIdx=this.textLen,this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)),this}pause(){var t=this.getTimer();return t&&(t.paused=!0),this}resume(){var t=this.getTimer();return t&&(t.paused=!1),this}setTypingContent(t){return this.text=t,this.textLen=this.getTextLength(this.text),this}onTyping(){var t=this.getTypingString(this.text,this.typingIdx,this.textLen,this.typeMode);this.setText(t),this.emit("type"),this.isLastChar?(this.freeTimer(),this.emit("complete",this,this.parent)):(this.timer.delay=this.speed,this.typingIdx++)}getTypingString(t,r,x,s){var g;if(s===0){var e=0,n=r;this.insertIdx=n,g=this.getSubString(t,e,n)}else if(s===1){var n=x,e=n-r;this.insertIdx=0,g=this.getSubString(t,e,n)}else if(s===2){var p=x/2,e=Math.floor(p-r/2),n=e+r;this.insertIdx=r%2?r:0,g=this.getSubString(t,e,n)}else if(s===3){var f=Math.floor(r/2),u;if(f>0){var n=x,e=n-f;u=this.getSubString(t,e,n)}else u="";var l=r-f,a;if(l>0){var e=0,n=e+l;this.insertIdx=n,a=this.getSubString(t,e,n)}else a="",this.insertIdx=0;g=a+u}return g}startTimer(t){this.timer&&this.freeTimer();var r,x;return t===void 0?(r=0,x=0):(r=this.speed,x=t),this.timer=this.scene.time.addEvent({delay:1e-4,startAt:x,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(t){this.setTextCallback&&(this.setTextCallbackScope?t=this.setTextCallback.call(this.setTextCallbackScope,t,this.isLastChar,this.insertIdx):t=this.setTextCallback(t,this.isLastChar,this.insertIdx)),this.textWrapEnable?Ma(this.parent,t):this.parent.setText(t)}getTextLength(t){var r=this.parent,x;return r.getPlainText?x=r.getPlainText(t).length:x=t.length,x}getSubString(t,r,x){var s=this.parent,g;return s.getSubString?g=s.getSubString(t,r,x):g=t.slice(r,x),g}},n3=function(i){return Array.isArray(i)?i=i.join(`
`):typeof i=="number"&&(i=i.toString()),i},Z$={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3},a3=wg;var o3=a3;var qo=o3;var h3=Phaser.Utils.Objects.GetValue,Lg=class extends xe{constructor(t,r){r===void 0&&(r={text:J$(t)}),super(t,r),this.type="rexTextBox";var x=this.childrenMap.text;this.page=new Qo(x,h3(r,"page",void 0)),this.typing=new qo(x,h3(r,"typing",r.type)),this.typing.on("complete",this.onPageEnd,this).on("type",this.onType,this),this.textWidth=x.width,this.textHeight=x.height}start(t,r){return this.page.setText(t),r!==void 0&&this.setTypingSpeed(r),this.typeNextPage(),this}typeNextPage(){if(this.isLastPage)this.emit("complete");else{var t=this.page.getNextPage();this.typing.start(t)}return this}pause(){return this.typing.pause(),this}resume(){return this.typing.resume(),this}stop(t){return this.typing.stop(t),this}setTypeSpeed(t){return this.typing.setTypingSpeed(t),this}setTypingSpeed(t){return this.typing.setTypingSpeed(t),this}get isTyping(){return this.typing.isTyping}get isLastPage(){return this.page.isLastPage}get isFirstPage(){return this.page.isFirstPage}get pageCount(){return this.page.pageCount}get pageIndex(){return this.page.pageIndex}onType(){var t=this.childrenMap.text;(this.textWidth!==t.width||this.textHeight!==t.height)&&(this.textWidth=t.width,this.textHeight=t.height,this.getTopmostSizer().layout()),this.emit("type")}onPageEnd(){this.emit("pageend"),this.isLastPage&&this.emit("complete")}},J$=function(i){return i.add.text(0,0,"",{wordWrap:{width:200},maxLines:5})},_o=Lg;J.register("textBox",function(i){var t=new _o(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.TextBox",_o);var hi=Phaser.Utils.Objects.GetValue,Fg=class extends lt{constructor(t,r){super(t,r),this.type="rexNumberBar";var x=hi(r,"background",void 0),s=hi(r,"icon",void 0),g=hi(r,"iconMask",void 0),e=hi(r,"slider",void 0),n=hi(r,"text",void 0),p=hi(r,"space.icon",0),f=hi(r,"space.slider",0);if(x&&this.addBackground(x),s){var u;this.orientation===0?(e||n)&&(u={right:p}):(e||n)&&(u={bottom:p}),this.add(s,{proportion:0,align:"center",padding:u}),g&&(g=Be.call(this,s,s,1))}var l;if(e){e.orientation=this.orientation,e.eventEmitter=this,e.value=null,e.hasOwnProperty("input")||(e.input=-1),l=new Bi(t,e),t.add.existing(l);var u;this.orientation===0?n&&(u={right:f}):n&&(u={bottom:f});var a;if(this.orientation===0){var o=hi(e,"width",void 0);a=o===void 0?1:0}else{var c=hi(e,"height",void 0);a=c===void 0?1:0}this.add(l,{proportion:a,align:"center",padding:u})}n&&this.add(n),this.addChildrenMap("background",x),this.addChildrenMap("icon",s),this.addChildrenMap("iconMask",g),this.addChildrenMap("slider",l),this.addChildrenMap("text",n);var h=hi(r,"valuechangeCallback",null);if(h!==null){var d=hi(r,"valuechangeCallbackScope",void 0);this.on("valuechange",h,d)}this.setEnable(hi(r,"enable",void 0)),this.setValue(hi(r,"value",0))}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){!this.childrenMap.slider||(this.childrenMap.slider.value=t)}setValue(t,r,x){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,r,x),this}addValue(t,r,x){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,r,x),this}getValue(t,r){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,r):0}easeValueTo(t,r,x){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,r,x),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}get text(){var t=this.childrenMap.text;if(t===void 0)return"";var r;return t.text?r=t.text:r=t.getData("text"),r}set text(t){var r=this.childrenMap.text;r!==void 0&&(r.setText?r.setText(t):r.setData("text",t))}setText(t){return this.text=t,this}},th=Fg;J.register("numberBar",function(i){var t=new th(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.NumberBar",th);J.register("scrollBar",function(i){var t=new Js(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.ScrollBar",Js);var bg=Phaser.Utils.Objects.GetValue,l3={leftTop:"left-top",centerTop:"center-top",rightTop:"right-top",leftCenter:"left-center",center:"center",rightCenter:"right-center",leftBottom:"left-bottom",centerBottom:"center-bottom",rightBottom:"right-bottom"},Dg=class extends Nt{constructor(t,r){super(t,r),this.type="rexBadge";var x=bg(r,"background",void 0);x&&this.addBackground(x),this.addChildrenMap("background",x);var s=bg(r,"main",void 0);s&&this.add(s,{key:"main",align:"center",expand:!1}),this.addChildrenMap("main",s);for(var g in l3){var e=bg(r,g,void 0);e&&(this.add(e,{key:g,align:l3[g],expand:!1}),this.addChildrenMap(g,e))}}},eh=Dg;J.register("badgeLabel",function(i){var t=new eh(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.BadgeLabel",eh);var $$=Nt.prototype.add,u3=function(i,t,r,x,s,g,e,n,p){return i.setVisible(!1),$$.call(this,i,t,r,x,s,g,e,n,p),this},f3={add:u3,addPage:u3};var Q$=function(i){return i===void 0?null:this.sizerChildren.hasOwnProperty(i)?this.sizerChildren[i]:null},d3=Q$;var c3=De.prototype.setChildVisible,q$=function(i,t){this._previousKey=this._currentKey;var r=this.previousPage;r&&(this.swapMode===0?(c3.call(this,r,!1),this.emit("pageinvisible",r,this._previousKey,this)):r.destroy()),i&&!this.sizerChildren.hasOwnProperty(i)&&this.emit("createpage",i,this),this._currentKey=i;var x=this.currentPage;return x&&(c3.call(this,x,!0),this.emit("pagevisible",x,this._currentKey,this),t===void 0&&(t=this.fadeInDuration),t>0&&x.setAlpha(0).fadeIn(t,1)),this},p3=q$;var _$=function(i){return this.sizerChildren.hasOwnProperty(i)},v3=_$;var m3={getPage:d3,swapPage:p3,hasPage:v3};Object.assign(m3,f3);var g3=m3;var x3=Phaser.Utils.Objects.GetValue,md=class extends Nt{constructor(t,r){super(t,r),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(x3(r,"swapMode",0)),this.setFadeInDuration(x3(r,"fadeIn",0))}setSwapMode(t){return typeof t=="string"&&(t=tQ[t]),this.swapMode=t,this}setFadeInDuration(t){return this.fadeInDuration=t,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(t){this.swapPage(t)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}};Object.assign(md.prototype,g3);var tQ={invisible:0,destroy:1},Qs=md;J.register("pages",function(i){var t=new Qs(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Pages",Qs);var S3=Phaser.Math.Vector3,eQ=Phaser.Math.Matrix4,y3=new S3,C3=new S3,T3=new eQ,iQ=function(i,t,r,x,s,g,e){t===void 0&&(t=0),r===void 0&&(r=0),x===void 0&&(x=0),s===void 0&&(s=0),g===void 0&&(g=0),e===void 0&&(e=0),y3.set(t,r,x),C3.set(s,g,e),T3.fromRotationXYTranslation(C3,y3,!0);for(var n=0,p=i.vertices.length;n<p;n++)i.vertices[n].transformMat4(T3)},P3=iQ;var rQ=Phaser.GameObjects.Mesh,sQ=Phaser.Utils.Objects.IsPlainObject,qs=Phaser.Utils.Objects.GetValue,nQ=Phaser.Geom.Mesh.GenerateGridVerts,Ig=Phaser.Math.RadToDeg,gd=Phaser.Math.DegToRad,E3=45,aQ=1+1/Math.sin(gd(E3)),Bg=class extends rQ{constructor(t,r,x,s,g,e){sQ(r)&&(e=r,r=qs(e,"x",0),x=qs(e,"y",0),s=qs(e,"key",null),g=qs(e,"frame",null)),super(t,r,x,s,g),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(aQ),this.hideCCW=qs(e,"hideCCW",!0);var n=qs(e,"gridWidth",32),p=qs(e,"gridHeight",n);this.resetVerts(n,p)}get originX(){return .5}get originY(){return .5}get displayOriginX(){return this.width*.5}get displayOriginY(){return this.height*.5}resetPerspective(){return this.setPerspective(this.width,this.height,E3),this}resetVerts(t,r){if(t!==void 0&&(this.gridWidth=t),r!==void 0&&(this.gridHeight=r),this.clear(),this.dirtyCache[9]=-1,this.width===0||this.height===0)return this;var x=this.frame.cutWidth,s=this.frame.cutHeight;nQ({mesh:this,texture:this.texture.key,frame:this.frame.name,width:x/this.height,height:s/this.height,widthSegments:Math.ceil(x/this.gridWidth),heightSegments:Math.ceil(s/this.gridHeight)});var g=this.transformInfo;return g&&this.transformVerts(g.x,g.y,g.z,g.rotateX,g.rotateY,g.rotateZ),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(t){this.modelRotation.x=t}get angleX(){return Ig(this.rotationX)}set angleX(t){this.rotationX=gd(t)}get rotationY(){return this.modelRotation.y}set rotationY(t){this.modelRotation.y=t}get angleY(){return Ig(this.rotationY)}set angleY(t){this.rotationY=gd(t)}get rotationZ(){return this.modelRotation.z}set rotationZ(t){this.modelRotation.z=t}get angleZ(){return Ig(this.rotationZ)}set angleZ(t){this.rotationZ=gd(t)}transformVerts(t,r,x,s,g,e){return t===void 0&&(t=0),r===void 0&&(r=0),x===void 0&&(x=0),s===void 0&&(s=0),g===void 0&&(g=0),e===void 0&&(e=0),this.transformInfo||(this.transformInfo={}),this.transformInfo.x=t,this.transformInfo.y=r,this.transformInfo.rotateX=s,this.transformInfo.rotateY=g,this.transformInfo.rotateZ=e,P3(this,t,r,x,s,g,e),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}set tint(t){for(var r=this.vertices,x=0,s=r.length;x<s;x++)r[x].color=t}setTint(t){return this.tint=t,this}},wa=Bg;var oQ=Phaser.Textures.DynamicTexture,hQ=function(i,t,r){t===void 0&&(t=2),r===void 0&&(r=2);var x=new oQ(i.sys.textures,null,t,r);return x},ih=hQ;var lQ=Phaser.Utils.Objects.IsPlainObject,xd=Phaser.Utils.Objects.GetValue,Gg=class extends wa{constructor(t,r,x,s,g,e){lQ(r)&&(e=r,r=xd(e,"x",0),x=xd(e,"y",0),s=xd(e,"width",32),g=xd(e,"height",32));var n=ih(t,s,g);super(t,r,x,n,null,e),this.type="rexPerspectiveRenderTexture",this.rt=this.texture}destroy(t){super.destroy(t),this.rt.destroy(),this.rt=null}snapshot(t,r){return r===void 0&&(r={}),r.gameObjects=t,r.renderTexture=this.rt,Ds(r),(this.width!==this.frame.realWidth||this.height!==this.frame.realHeight)&&this.syncSize(),this}},La=Gg;var ZZt=Phaser.Animations.AnimationState,JZt=Phaser.Utils.Objects.IsPlainObject,$Zt=Phaser.Utils.Objects.GetValue;var uQ=function(i,t,r,x){if(Array.isArray(i))for(var s=!1,g=0,e=i.length;g<e;g++){var n=i[g];if(!(x&&!n)&&(r?s=t.call(r,n,g,i):s=t(n,g,i),s))return}else{var s=!1;for(var p in i){var n=i[p];if(!(x&&!n)&&(r?s=t.call(r,n,p,i):s=t(n,p,i),s))return}}},Ne=uQ;var Ng=Phaser.Math.RadToDeg,Vg=Phaser.Math.DegToRad,zg=class extends Qi{constructor(t,r,x,s,g,e){super(t,r,x,s,g),this.faces=e,Ne(e,function(n){n.setPosition(r,x),this.add(n)},this,!0)}get rotationX(){return 0}set rotationX(t){}get angleX(){return Ng(this.rotationX)}set angleX(t){this.rotationX=Vg(t)}get rotationY(){return 0}set rotationY(t){}get angleY(){return Ng(this.rotationY)}set angleY(t){this.rotationY=Vg(t)}get rotationZ(){return 0}set rotationZ(t){}get angleZ(){return Ng(this.rotationZ)}set angleZ(t){this.rotationZ=Vg(t)}setDebug(t,r){return Ne(this.faces,function(x){x.setDebug(t,r)},null,!0),this}panX(t){return Ne(this.faces,function(r){r.panX(t)},null,!0),this}panY(t){return Ne(this.faces,function(r){r.panY(t)},null,!0),this}panZ(t){return Ne(this.faces,function(r){r.panZ(t)},null,!0),this}transformVerts(t,r,x,s,g,e){return Ne(this.faces,function(n){n.transformVerts(t,r,x,s,g,e)},null,!0),this}forEachFace(t,r,x){return Ne(this.faces,t,r,x),this}},Yg=zg;var fQ=Phaser.Utils.Objects.IsPlainObject,dQ={key:"__WHITE"},cQ={image:wa,rendertexture:La},pQ=function(i,t){t===void 0&&(t=dQ);var r;return fQ(t)?(t.hasOwnProperty("type")||(t.hasOwnProperty("key")?t.type="image":t.hasOwnProperty("width")&&(t.type="rendertexture")),r=new cQ[t.type](i,t),i.add.existing(r)):r=t,r},Ug=pQ;var vQ=function(i,t,r){var x;if(r===void 0){x=[];for(var s,g,e=0,n=t.length;e<n;e++)g=t[e],g?s=Ug(i,g):s=null,x.push(s)}else{x={};for(var s,p,e=0,n=r.length;e<n;e++)p=r[e],t.hasOwnProperty(p)?s=Ug(i,t[p]):s=null,x[p]=s}return x},Xg=vQ;var mQ=Phaser.Math.DegToRad,M3=mQ(180),gQ=function(i,t){var r=t.back;r&&(i.orientation===0?r.transformVerts(0,0,0,0,M3,0):r.transformVerts(0,0,0,M3,0,0))},A3=gQ;var Wg=Phaser.Utils.Objects.GetValue,xQ=Phaser.Math.Linear,kg=class extends be{constructor(t,r){super(t,r),this.resetFromJSON(r),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setEase(Wg(t,"ease","Cubic")),this.setFrontToBackDirection(Wg(t,"frontToBack",0)),this.setBackToFrontDirection(Wg(t,"backToFront",1)),this}setFrontToBackDirection(t){return typeof t=="string"&&(t=R3[t]),this.endAngleFB=t===0?180:-180,this}setBackToFrontDirection(t){return typeof t=="string"&&(t=R3[t]),this.endAngleBF=t===0?-180:180,this}start(t,r){if(this.timer.isRunning)return this;this.timer.setDelay(this.delay).setDuration(t);var x=r+1,s=this.parent;return s.face===0?(this.startAngle=0,this.endAngle=this.endAngleFB*x):(this.startAngle=this.endAngleBF,this.endAngle=this.startAngle-this.endAngleBF*x),super.start(),this}flip(t,r){return this.isRunning?this:(t===void 0&&(t=this.duration),r===void 0&&(r=0),this.start(t,r),this.emit("start",this.parent,this),this.parent.currentFaceIndex=(this.parent.currentFaceIndex+r+1)%2,this)}flipRight(t,r){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(0):this.setBackToFrontDirection(0),this.flip(t,r),this}flipLeft(t,r){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(1):this.setBackToFrontDirection(1),this.flip(t,r),this}updateGameObject(t,r){var x=this.easeFn(r.t),s=xQ(this.startAngle,this.endAngle,x);t.orientation===0?t.angleY=s:t.angleX=s}},R3={right:0,"left-to-right":0,left:1,"right-to-left":1},O3=kg;var yQ=Phaser.Utils.Objects.IsPlainObject,_s=Phaser.Utils.Objects.GetValue,CQ=["back","front"],Hg=class extends Yg{constructor(t,r,x,s){yQ(r)&&(s=r,r=_s(s,"x",0),x=_s(s,"y",0));var g=Xg(t,s,CQ),e=g.back,n=g.front,p=_s(s,"width"),f=_s(s,"height");if(p===void 0||f===void 0){if(p===void 0){var u=n?n.width:0,l=e?e.width:0;p=Math.max(u,l)}if(f===void 0){var a=n?n.height:0,o=e?e.height:0;f=Math.max(a,o)}}super(t,r,x,p,f,g),this.type="rexPerspectiveCard",this.frontFaceRotationX=0,this.frontFaceRotationY=0,this.frontFaceRotationZ=0,Ne(g,function(h,d){this[`${d}Face`]=h},this);var c=_s(s,"flip",void 0);c!==!1&&(this.flip=new O3(this,c)),this.setOrientation(_s(s,"orientation",0)),A3(this,g),this.setFace(_s(s,"face",0))}get rotationX(){return this.frontFaceRotationX}set rotationX(t){this.frontFaceRotationX!==t&&(this.frontFaceRotationX=t,Ne(this.faces,function(r){r.rotationX=t},null,!0))}get rotationY(){return this.frontFaceRotationY}set rotationY(t){this.frontFaceRotationY!==t&&(this.frontFaceRotationY=t,Ne(this.faces,function(r){r.rotationY=t},null,!0))}get rotationZ(){return this.frontFaceRotationZ}set rotationZ(t){this.frontFaceRotationZ!==t&&(this.frontFaceRotationZ=t,Ne(this.faces,function(r){r.rotationZ=t},null,!0))}setOrientation(t){return typeof t=="string"&&(t=TQ[t]),this.orientation=t,this}get face(){return this.currentFaceIndex}set face(t){typeof t=="string"&&(t=SQ[t]),this.currentFaceIndex=t;var r=t===1,x=r?180:0;this.orientation===0?this.angleY=x:this.angleX=x}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}},TQ={x:0,horizontal:0,h:0,y:1,vertical:1,v:1},SQ={front:0,back:1},Kg=Hg;var yJt=Phaser.Utils.Objects.GetValue,CJt=Phaser.Math.RadToDeg,TJt=Phaser.Math.DegToRad,SJt=Phaser.Math.Angle.WrapDegrees,PJt=Phaser.Math.Angle.ShortestBetween,EJt=Phaser.Math.Wrap,MJt=Phaser.Math.Linear;var zJt=Phaser.Utils.Objects.IsPlainObject,YJt=Phaser.Utils.Objects.GetValue,UJt=Phaser.Math.DegToRad,XJt=Phaser.Math.RadToDeg,WJt=Phaser.Math.Angle.WrapDegrees,kJt=Phaser.Math.Linear,HJt=Phaser.Math.Wrap;var n$t=Phaser.Utils.Objects.IsPlainObject,a$t=Phaser.Utils.Objects.GetValue,o$t=Phaser.Math.Wrap;var AQ=Phaser.Utils.Objects.GetValue,RQ=function(i,t,r){t.visibleSibling=[],t.isRunning=!1,t.useParentBounds=AQ(r,"useParentBounds",!1),t.setPosition(i.x,i.y).setVisible(!1),i.pin(t)},w3=RQ;var OQ=function(i,t){if(!i)return!1;for(var r=t.visibleSibling,x=0,s=r.length;x<s;x++)i.setChildVisible(r[x],!0);return r.length=0,i.setChildVisible(t,!1),t.isRunning=!1,!0},yd=OQ;var wQ=function(i,t){if(!i)return!1;yd(i,t);var r=t.useParentBounds;Ds({gameObjects:i.getAllVisibleChildren(),renderTexture:t.rt,x:t.x,y:t.y,width:r?i.displayWidth:void 0,height:r?i.displayHeighth:void 0,originX:r?i.originX:void 0,originY:r?i.originY:void 0}),i.setChildVisible(t,!0);for(var x=t.visibleSibling,s=i.children,g=0,e=s.length;g<e;g++){var n=s[g];n.visible&&n!==t&&(i.setChildVisible(n,!1),x.push(n))}return t.isRunning=!0,!0},L3=wQ;var LQ=function(i){return class extends i{constructor(r,x){var s=r.scene;super(s,0,0,1,1,x),s.add.existing(this),w3(r,this,x)}destroy(r){!this.scene||(this.exit(),super.destroy(r))}enter(){var r=L3(this.rexContainer.parent,this);return r&&this.syncSize(),this}exit(){return yd(this.rexContainer.parent,this),this}}},Cd=LQ;var jg=class extends Cd(La){get perspectiveState(){return this.isRunning}},Zg=jg;var FQ=Phaser.Utils.Objects.GetValue,bQ=function(i){var t=this.scene;this.setSnapshotPadding(FQ(i,"snapshotPadding",0)),i=ui(i),delete i.width,delete i.height,i.front={width:1,height:1},i.back={width:1,height:1};var r=new Kg(t,i);t.add.existing(r);var x=r.flip;if(x){var s=this;x.on("start",function(){s.enterPerspectiveMode()}).on("complete",function(){s.exitPerspectiveMode()})}return r},F3=bQ;var DQ=["front","back"],b3={enterPerspectiveMode(){return this.isInPerspectiveMode?this:(this.setChildVisible(this.perspectiveCard,!0),this.snapshotFace(0),this.snapshotFace(1),this.setChildVisible(this.childrenMap.front,!1),this.setChildVisible(this.childrenMap.back,!1),this.perspectiveCard.setSize(this.width,this.height),this)},exitPerspectiveMode(){if(!this.isInPerspectiveMode)return this;this.setChildVisible(this.perspectiveCard,!1);var i=this.perspectiveCard.face===0;return this.setChildVisible(this.childrenMap.front,i),this.setChildVisible(this.childrenMap.back,!i),this},setSnapshotPadding(i){return this.snapshotPadding=i,this},snapshotFace(i){typeof i=="number"&&(i=DQ[i]);var t=this.perspectiveCard.faces[i],r=this.childrenMap[i];t.rt.clear();var x=r.visible;r.visible=!0;var s=r.isRexContainerLite?r.getAllVisibleChildren():r;return t.snapshot(s,{padding:this.snapshotPadding}),r.visible=x,this}};var D3=Phaser.Utils.Objects.GetValue,Td=class extends Nt{constructor(t,r){super(t,r),this.type="rexPerspectiveCard";var x=r.back,s=D3(r,"expand.back",!0);this.add(x,{key:"back",expand:s});var g=r.front,e=D3(r,"expand.front",!0);this.add(g,{key:"front",expand:e}),this.perspectiveCard=F3.call(this,r),this.pin(this.perspectiveCard),this.exitPerspectiveMode(!1)}get flip(){return this.perspectiveCard.flip}get face(){return this.perspectiveCard.face}set face(t){if(!(this.flip&&this.flip.isRunning)){this.perspectiveCard.face=t;var r=t===0,x=this.childrenMap.front,s=this.childrenMap.back;this.setChildVisible(x,r),this.setChildVisible(s,!r)}}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}get isInPerspectiveMode(){return this.perspectiveCard.visible}get rotationX(){return this.perspectiveCard.rotationX}set rotationX(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationX=t}get angleX(){return this.perspectiveCard.angleX}set angleX(t){this.enterPerspectiveMode(),this.perspectiveCard.angleX=t}get rotationY(){return this.perspectiveCard.rotationY}set rotationY(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationY=t}get angleY(){return this.perspectiveCard.angleY}set angleY(t){this.enterPerspectiveMode(),this.perspectiveCard.angleY=t}get rotationZ(){return this.perspectiveCard.rotationZ}set rotationZ(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationZ=t}get angleZ(){return this.perspectiveCard.angleZ}set angleZ(t){this.enterPerspectiveMode(),this.perspectiveCard.angleZ=t}panX(t){return this.enterPerspectiveMode(),this.perspectiveCard.panX(t),this}panY(t){return this.enterPerspectiveMode(),this.perspectiveCard.panY(t),this}panZ(t){return this.enterPerspectiveMode(),this.perspectiveCard.panZ(t),this}transformVerts(t,r,x,s,g,e){return this.enterPerspectiveMode(),this.perspectiveCard.transformVerts(t,r,x,s,g,e),this}forEachFace(t,r,x){return this.enterPerspectiveMode(),this.perspectiveCard.forEachFace(t,r,x),this}};Object.assign(Td.prototype,b3);var Jg=Td;J.register("perspectiveCard",function(i){var t=new Jg(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.PerspectiveCard",Jg);var IQ=function(i){var t=this.getElement("tabs.buttons");if(!(i>=t.length))return t[i].name},I3=IQ;var BQ=function(i){for(var t=this.getElement("tabs.buttons"),r=0,x=t.length;r<x;r++)if(t[r].name===i)return r},B3=BQ;var GQ=Phaser.Utils.Objects.IsPlainObject,$g=Phaser.Utils.Objects.GetValue,NQ=Phaser.Utils.String.UUID,VQ=function(i,t,r){if(GQ(i)){var x=i;i=$g(x,"key"),t=$g(x,"tab"),r=$g(x,"page")}return i||(i=NQ()),t.name=i,this.childrenMap.tabs.addButton(t),this.childrenMap.pages.addPage(r,{key:i}),this},G3=VQ;var zQ=function(i,t){var r;if(typeof i=="number"?r=i:r=this.getPageIndex(i),r!=null){var x;t!==void 0&&(x=this.childrenMap.pages.fadeInDuration,this.childrenMap.pages.fadeInDuration=t),this.childrenMap.tabs.emitButtonClick(r),x!==void 0&&(this.childrenMap.pages.fadeInDuration=x)}return this},YQ=function(i){return this.swapPage(0,i),this},UQ=function(i){var t=this.getElement("tabs.buttons").length-1;return this.swapPage(t,i),this},N3={swapPage:zQ,swapFirstPage:YQ,swapLastPage:UQ};var XQ=function(i,t){typeof i=="number"&&(i=this.getPageKey(i));var r=this.childrenMap.tabs,x=r.getByName(i),s=this.childrenMap.pages,g=s.getElement(i);return!x||!g?this:(s.removeChildrenMap(i),r.removeButton(x,t),s.remove(g,t),this)},V3={removePage:XQ};var WQ=function(i){return typeof i=="number"&&(i=this.getPageKey(i)),this.childrenMap.pages.getPage(i)},z3=WQ;var kQ=function(i){var t;return typeof i=="number"?t=i:t=this.getPageIndex(i),this.getElement("tabs.buttons")[t]},Y3=kQ;var U3={getPageKey:I3,getPageIndex:B3,addPage:G3,getPage:z3,getTab:Y3};Object.assign(U3,N3,V3);var X3=U3;var tn=Phaser.Utils.Objects.GetValue,Sd=lt.prototype.add,Pd=class extends lt{constructor(t,r){r===void 0&&(r={});var x=tn(r,"tabPosition","top"),s=x==="left"||x==="right"?"x":"y";r.orientation=s,super(t,r),this.type="rexTabPages";var g=tn(r,"background",void 0);g&&this.addBackground(g);var e=tn(r,"pages"),n=new Qs(t,e);t.add.existing(n);var p=s==="y",f=p?tn(r,"wrapTabs",!1):!1,u=tn(r,"tabs",void 0);u===void 0&&(u={});var l=f?Mi:bt;u.orientation=p?"x":"y",u.buttonsType="radio";var a=new l(t,u);t.add.existing(a);var o=f?!0:tn(r,"expand.tabs",!1),c=tn(r,"align.tabs","left");switch(x){case"top":case"left":Sd.call(this,a,{proportion:0,expand:o,align:c}),Sd.call(this,n,{proportion:1,expand:!0});break;case"bottom":case"right":Sd.call(this,n,{proportion:1,expand:!0}),Sd.call(this,a,{proportion:0,expand:o,align:c});break}this.addChildrenMap("background",g),this.addChildrenMap("tabs",a),this.addChildrenMap("pages",n),a.on("button.click",function(h){var d=h.name;n.hasPage(d)&&n.swapPage(d)}),a.on("button.statechange",function(h,d,v,m){var y=v?"tab.focus":"tab.blur";this.emit(y,h,h.name)},this),n.on("pagevisible",function(h,d,v){this.emit("page.focus",h,d)}),n.on("pageinvisible",function(h,d,v){this.emit("page.blur",h,d)})}get currentKey(){return this.getElement("pages").currentKey}set currentKey(t){this.showPage(t)}get keys(){return this.getElement("pages").keys}get currentPage(){return this.getElement("pages").currentPage}get previousPage(){return this.getElement("pages").previousPage}};Object.assign(Pd.prototype,X3);var rh=Pd;J.register("tabPages",function(i){var t=new rh(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.TabPages",rh);var Qg=class extends na{constructor(t,r){r===void 0&&(r={}),r.destroy=!1,super(t,r)}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}},W3=Qg;var k3={expand(i){if(this.expanded===!0)return this;i===void 0&&(i=this.transitionDuration),this.expanded=!0;var t=this.childrenMap.title,r=this.childrenMap.child;this.show(r);var x=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();return x.layout(),t.emit("folder.expand",i,this),r.emit("folder.expand",i,this),this.emit("expand.start",this),this.childTransition.once("open",function(){this.emit("expand.complete",this)},this).requestOpen(null,i),this},collapse(i){if(this.expanded===!1)return this;i===void 0&&(i=this.transitionDuration),this.expanded=!1;var t=this.childrenMap.title,r=this.childrenMap.child;return t.emit("folder.collapse",i,this),r.emit("folder.collapse",i,this),this.emit("collapse.start",this),this.childTransition.once("close",function(){this.setChildScale(r,1,1).hide(r);var x=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();x.layout(),this.emit("collapse.complete",this)},this).requestClose(null,i),this},toggle(i){return this.expanded?this.collapse(i):this.expand(i),this}};var HQ=function(i,t){wo.popUp.call(i,t,this.expandDirection)},KQ=function(i,t){wo.scaleDown.call(i,t,this.expandDirection)},H3={setTransitionDuration(i){return this.transitionDuration=i,this.childTransition.setTransitInTime(i).setTransitOutTime(i),this},setExpandCallback(i){return i===void 0&&(i=HQ.bind(this)),this.childTransition.setTransitInCallback(i),this},setCollapseCallback(i){return i===void 0&&(i=KQ.bind(this)),this.childTransition.setTransitOutCallback(i),this}};var Gi=Phaser.Utils.Objects.GetValue,Ed=class extends lt{constructor(t,r){r===void 0&&(r={}),r.hasOwnProperty("orientation")||(r.orientation=1),super(t,r),this.type="rexFolder",this.expanded=void 0,this.expandDirection=this.orientation===1?"y":"x";var x=r.background,s=r.title,g=r.child;x&&this.addBackground(x);var e=this.orientation===1?"left":"top",l=Gi(r,"align.title",e),a=Gi(r,"expand.title",!0);this.add(s,{proportion:0,align:l,expand:a});var n=Gi(r,"toggleByTarget",void 0),p=Gi(r,"toggleClickConfig");n===void 0&&(n=s),n&&Xu.onClick.call(n,function(){this.toggle()},this,p),this.childTransition=new W3(g);var f=Gi(r,"customChildOrigin",!1);if(!f){var u=this.rtl?1:0;g.setOrigin(u)}var l=Gi(r,"align.child","left"),a=Gi(r,"expand.child",!0),o=a?1:0;this.add(g,{proportion:o,align:l,expand:a}),this.addChildrenMap("title",s),this.addChildrenMap("child",g),this.addChildrenMap("background",x);var c=r.transition;this.setTransitionDuration(Gi(c,"duration",200)),this.setExpandCallback(Gi(c,"expandCallback",void 0)),this.setCollapseCallback(Gi(c,"collapseCallback",void 0)),this.reLayoutTarget=Gi(r,"reLayoutTarget",void 0);var h=r.onExpandStart;h&&this.on("expand.start",h);var d=r.onExpandComplete;d&&this.on("expand.complete",d);var v=r.onCollapseStart;v&&this.on("collapse.start",v);var m=r.onCollapseComplete;m&&this.on("collapse.complete",m)}};Object.assign(Ed.prototype,k3,H3);var sh=Ed;J.register("folder",function(i){var t=new sh(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Folder",sh);J.register("textArea",function(i){var t=new Ir(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.TextArea",Ir);var jQ=function(){if(this.rexSizer.hidden)return 0;var i,t=this.child,r=t.rexSizer;return r.hidden?i=0:this.scrollMode===0?i=this.getChildWidth(t):i=0,i},K3=jQ;var ZQ=function(){if(this.rexSizer.hidden)return 0;var i,t=this.child,r=t.rexSizer;return r.hidden||this.scrollMode===0?i=0:i=t.isRexSizer?Math.max(t.minHeight,t.childrenHeight):t.hasOwnProperty("minHeight")?t.minHeight:dt(t),i},j3=ZQ;var JQ=function(i){return i===void 0&&(i=[]),this.child&&this.child.isRexSizer&&i.push(this.child),i},Z3=JQ;var $Q=function(){var i=this.left,t=this.top;this.scrollMode===0?t+=this.childOY:i+=this.childOY,this.child.setPosition(i,t),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},J3=$Q;var QQ=function(){var i=this.child,t,r;i.rexSizer.hidden||(this.scrollMode===0?t=this.width:r=this.height,i.isRexSizer?i.runLayout(this,t,r):kt(i,t,r),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren())},$3=QQ;var Q3={getChildrenWidth:K3,getChildrenHeight:j3,getChildrenSizers:Z3,resetChildPosition:J3,layoutChildren:$3};Object.assign(Q3,sd);var q3=Q3;var _3=Phaser.Utils.Objects.IsPlainObject,Ni=Phaser.Utils.Objects.GetValue,qQ=Phaser.Display.Align.TOP_LEFT,Md=class extends Ti{constructor(t,r,x,s,g,e){_3(r)?(e=r,r=Ni(e,"x",0),x=Ni(e,"y",0),s=Ni(e,"width",void 0),g=Ni(e,"height",void 0)):_3(s)&&(e=s,s=Ni(e,"width",void 0),g=Ni(e,"height",void 0)),super(t,r,x,s,g,e),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setScrollMode(Ni(e,"scrollMode",!0)),this.setClampMode(Ni(e,"clamplChildOY",!0));var n=Ni(e,"child",void 0),p=Ni(e,"expand",!0);n.setOrigin&&n.setOrigin(0),this.add(n),this.sizerChildren=[n];var f=this.getSizerConfig(n);f.align=qQ,f.expand=p,this.child=n,this.setupChildrenMask(Ni(e,"mask",void 0)),this.maskGameObject=Aa(this.childrenMask)}destroy(t){!this.scene||(this.destroyChildrenMask(),this.child=void 0,super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=zf[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampChildOY=t,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get childHeight(){return this.scrollMode===0?dt(this.child):mt(this.child)}get childWidth(){return this.scrollMode===0?mt(this.child):dt(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get childVisibleHeight(){return this.instHeight}get visibleHeight(){var t=this.childHeight-this.childVisibleHeight;return t<0&&(t=0),t}childOYExceedTop(t){return t===void 0&&(t=this.childOY),t>this.topChildOY}childOYExeceedBottom(t){return t===void 0&&(t=this.childOY),t<this.bottomChildOY}get childOY(){return this._childOY}set childOY(t){var r=this.topChildOY,x=this.bottomChildOY,s=this.childOYExceedTop(t),g=this.childOYExeceedBottom(t);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?t=0:s?t=r:g&&(t=x)),this._childOY!==t&&(this._childOY=t,this.resetChildPosition()),s&&(this.execeedTopState||this.emit("execeedtop",this,t,r)),this.execeedTopState=s,g&&(this.execeedBottomState||this.emit("execeedbottom",this,t,x)),this.execeedBottomState=g}setChildOY(t){return this.childOY=t,this}set t(t){this.childOY=-this.visibleHeight*t}get t(){var t=this.visibleHeight;return t===0?0:this.childOY/-t}setChildOYByPercentage(t){return this.t=t,this}};Object.assign(Md.prototype,q3);var t5=Md;var nh=Phaser.Utils.Objects.GetValue,qg=class extends Pa{constructor(t,r){r===void 0&&(r={});var x=fs(r),s=nh(r,"panel",void 0);s===void 0&&(s={}),s.scrollMode=x,s.clamplChildOY=nh(r,"clamplChildOY",!1);var g=new t5(t,s);t.add.existing(g);var e=nh(s,"width",void 0),n=nh(s,"height",void 0),p,f;x===0?(p=e===void 0?1:0,f=n===void 0):(p=n===void 0?1:0,f=e===void 0),r.type="rexScrollablePanel",r.child={gameObject:g,proportion:p,expand:f};var u=nh(r,"space",void 0);u&&(u.child=u.panel),super(t,r),this.addChildrenMap("panel",g.child),this.addChildrenMap("panelLayer",g.maskLayer),this.addChildrenMap("mask",g.maskGameObject)}setChildrenInteractive(t){return t===void 0&&(t={}),t.hasOwnProperty("eventEmitter")||(t.eventEmitter=this),t.hasOwnProperty("targets")||(t.targets=[this.childrenMap.panel]),ua(this.childrenMap.child,t),this}},_g=qg;J.register("scrollablePanel",function(i){var t=new _g(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.ScrollablePanel",_g);var ah={popUp:function(i,t){i.popUp(t)},scaleDown:function(i,t){i.scaleDown(t)},fadeIn:function(i,t){i.fadeIn(t)},fadeOut:function(i,t){i.fadeOut(t)}};var e5=Il;var t0=function(i,t,r){var x=Pt(r,"reverse",!1),s;if(Wt(i[0]))if(x)for(var e=i.length,g=e-1;g>=0;g--)s=t0(i[g],t,r);else for(var g=0,e=i.length;g<e;g++)s=t0(i[g],t,r);else s=_Q(i,t,r);return s},_Q=function(i,t,r){var x=Pt(r,"argsConvert",void 0),s=Pt(r,"argsConvertScope",void 0),g=i[0];if(gs=Ln(gs,i,1),x){x===!0&&(x=Kl,s=void 0);for(var e=0,n=gs.length;e<n;e++)s?gs[e]=x.call(s,gs[e],i):gs[e]=x(gs[e],i)}var p;typeof g=="string"?(p=t[g],p==null&&(p=Pt(t,g,null))):p=g;var f=p.apply(t,gs);return f},gs=[],i5=t0;var r5=i5;var Vi=Phaser.Utils.Objects.GetValue,e0=class extends Tt{constructor(t,r){super(t,r);var x=Vi(r,"clock",void 0);x||(x=new e5(t)),this.clock=x,this.clock.on("update",this.update,this),this.resetFromJSON(r)}resetFromJSON(t){return this.clock.resetFromJSON(Vi(t,"clock",void 0)),this.state=Vi(t,"state",0),this.commands=Vi(t,"commands",[]),this.scope=Vi(t,"scope",void 0),this.setTimeUnit(Vi(t,"timeUnit",0)),this.setDtMode(Vi(t,"dtMode",0)),this.index=Vi(t,"index",0),this.nextTime=Vi(t,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(t){this.isShutdown||(this.clock.shutdown(t),this.commands=void 0,super.shutdown(t))}load(t,r,x){this.stop();var s=Vi(x,"timeUnit",void 0);s!==void 0&&this.setTimeUnit(s);var g=Vi(x,"dtMode",void 0);return g!==void 0&&this.setDtMode(g),t=t.filter(function(e){var n=e[0];return!isNaN(n)}).map(function(e){var n=e[0];return typeof n=="string"&&(e[0]=parseFloat(e[0])),e}),this.dtMode===0&&t.sort(function(e,n){var p=e[0],f=n[0];return p>f?1:p<f?-1:0}),this.commands=t,this.scope=r,this}start(t){return t===void 0&&(t=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(t),this.update(t),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(t){return this.clock.seek(t),this}seekToNext(){return this.seek(this.nextTime),this}get isPlaying(){return this.clock.isRunning}get completed(){return this.state===2}get timeScale(){return this.clock.timeScale}set timeScale(t){this.clock.timeScale=t}setTimeScale(t){return this.timeScale=t,this}get now(){return this.clock.now}update(t){if(this.nextTime>t)return this;for(var r=this.commands.length-1;;){var x=this.commands[this.index],s=x[1];if(Wt(s)||(s=Ln(tq,x,1)),r5(s,this.scope),this.emit("runcommand",s,this.scope),this.index===r)return this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>t)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(t){var r=this.commands[this.index][0];return this.timeUnit===1&&(r=r*1e3),this.dtMode===1&&(r+=t),r}setDtMode(t){return typeof t=="string"&&(t=iq[t]),this.dtMode=t,this}setTimeUnit(t){return typeof t=="string"&&(t=eq[t]),this.timeUnit=t,this}},tq=[],eq={ms:0,s:1,sec:1},iq={abs:0,absolute:0,inc:1,increment:1},s5=e0;var oh=Phaser.Utils.Objects.GetValue,i0=class extends xe{constructor(t,r){r===void 0&&(r={text:createDefaultTextObject(t)}),super(t,r),this.type="rexToast",this.setTransitInTime(oh(r,"duration.in",200)),this.setDisplayTime(oh(r,"duration.hold",1200)),this.setTransitOutTime(oh(r,"duration.out",200)),this.setTransitInCallback(oh(r,"transitIn",xs.popUp)),this.setTransitOutCallback(oh(r,"transitOut",xs.scaleDown)),this.player=new s5(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(t){!this.scene||(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(t))}setDisplayTime(t){return this.displayTime=t,this}setTransitOutTime(t){return this.transitOutTime=t,this}setTransitInTime(t){return this.transitInTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=xs[t]),t){case xs.popUp:t=ah.popUp;break;case xs.fadeIn:t=ah.fadeIn;break}return t||(t=Gt),this.transitInCallback=t,this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=xs[t]),t){case xs.scaleDown:t=ah.scaleDown;break;case xs.fadeOut:t=ah.fadeOut;break}return t||(t=Gt),this.transitOutCallback=t,this}setScale(t,r){return r===void 0&&(r=t),this.scaleX0=t,this.scaleY0=r,super.setScale(t,r),this}showMessage(t){if(this.scaleX0===void 0&&(this.scaleX0=this.scaleX),this.scaleY0===void 0&&(this.scaleY0=this.scaleY),t===void 0){if(this.messages.length===0)return this;t=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(t),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),typeof t=="string"?this.setText(t):t(this),this.layout();var r=[[0,[this.transitInCallback,this,this.transitInTime]],[this.transitInTime,[Gt]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[Gt]]];return this.player.load(r,this).once("complete",function(){this.showMessage()},this).start(),this}},xs={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1},hh=i0;J.register("toast",function(i){var t=new hh(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Toast",hh);var rq=function(i,t){if(t===!1)return null;if(Se(t))return t;var r=new Le(i,t);return i.add.existing(r),r},n5=rq;var sq=function(i,t,r){r===void 0&&(r=!0),r?t=t?wt(t):{}:t||(t={});var x=new mo(i,t);return i.add.existing(x),x},gr=sq;var a5=["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","RebeccaPurple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"],nq=[15792383,16444375,65535,8388564,15794175,16119260,16770244,0,16772045,255,9055202,10824234,14596231,6266528,8388352,13789470,16744272,6591981,16775388,14423100,65535,139,35723,12092939,11119017,11119017,25600,12433259,9109643,5597999,16747520,10040012,9109504,15308410,9419919,4734347,3100495,3100495,52945,9699539,16716947,49151,6908265,6908265,2003199,11674146,16775920,2263842,16711935,14474460,16316671,16766720,14329120,8421504,8421504,32768,11403055,15794160,16738740,13458524,4915330,16777200,15787660,15132410,16773365,8190976,16775885,11393254,15761536,14745599,16448210,13882323,13882323,9498256,16758465,16752762,2142890,8900346,7833753,7833753,11584734,16777184,65280,3329330,16445670,16711935,8388608,6737322,205,12211667,9662683,3978097,8087790,64154,4772300,13047173,1644912,16121850,16770273,16770229,16768685,128,16643558,8421376,7048739,16753920,16729344,14315734,15657130,10025880,11529966,14381203,16773077,16767673,13468991,16761035,14524637,11591910,8388736,6697881,16711680,12357519,4286945,9127187,16416882,16032864,3050327,16774638,10506797,12632256,8900331,6970061,7372944,7372944,16775930,65407,4620980,13808780,32896,14204888,16737095,4251856,15631086,16113331,16777215,16119285,16776960,10145074],r0={},o5;for(lh=0,h5=a5.length;lh<h5;lh++)o5=a5[lh].toLowerCase(),r0[o5]=nq[lh];var lh,h5,l5=function(i){return i=i.toLowerCase(),r0.hasOwnProperty(i)?r0[i]:null};var aq=function(i){return typeof i!="string"||(i.startsWith("#")?i=parseInt(i.substring(1),16):i.startsWith("0x")?i=parseInt(i.substring(2),16):i=l5(i)),i},u5=aq;var oq=Phaser.Utils.String.Pad,hq=function(i,t){t===void 0&&(t="0x");var r=i.toString(16).toUpperCase();return r=oq(r,6,0,1),r=t+r,r},s0=hq;var lq=function(i,t){!i||(i.setTint?i.setTint(t):i.setFillStyle&&i.setFillStyle(t))},f5=lq;var Ai=Phaser.Utils.Objects.GetValue,uq=Phaser.Utils.Objects.IsPlainObject,fq=Phaser.Math.Clamp,n0=class extends lt{constructor(t,r){r===void 0&&(r={}),r.orientation=0,super(t,r),this.type="rexColorInputLite";var x=Ai(r,"background",void 0),s=Ai(r,"swatch"),g;uq(s)&&(g=Ai(s,"size"));var e=n5(t,Ai(r,"swatch")),n=Ai(r,"inputText",!0),p;if(n&&(p=gr(t,n)),x&&this.addBackground(x),e){g=Ai(r,"swatchSize",g);var f;g!==void 0?(kt(e,g,g),f=!1):f=Ai(r,"squareExpandSwatch",!0);var u=f?1:0;this.add(e,{proportion:0,expand:!1,fitRatio:u})}if(p){var l=Ai(n,"width")===void 0?1:0,a=Ai(n,"height")===void 0;this.add(p,{proportion:l,expand:a})}this.addChildrenMap("background",x),this.addChildrenMap("swatch",e),this.addChildrenMap("inputText",p),p&&p.on("close",function(){this.setValue(p.value)},this);var o=Ai(r,"valuechangeCallback",null);if(o!==null){var c=Ai(r,"valuechangeCallbackScope",void 0);this.on("valuechange",o,c)}this.setValue(Ai(r,"value",0))}get value(){return this._value}set value(t){if(typeof t=="string"){if(t=u5(t),t==null){var x=this.childrenMap.inputText;x&&x.setText(s0(this._value));return}}else t=fq(Math.floor(t),0,16777215);if(this._value!==t){this._value=t;var r=this.childrenMap.swatch;r&&f5(r,t);var x=this.childrenMap.inputText;x&&x.setText(s0(t)),this.emit("valuechange",this._value)}}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}},uh=n0;var dq={setCreateColorPickerBackgroundCallback(i){return this.colorPickerCreateBackgroundCallback=i,this},setColorPickerHPalettePosition(i){return this.colorPickerHPalettePosition=i,this},setColorPickerExpandDirection(i){return typeof i=="string"&&(i=cq[i]),this.colorPickerExpandDirection=i,this},setColorPickerEaseInDuration(i){return i===void 0&&(i=0),this.colorPickerEaseInDuration=i,this},setColorPickerEaseOutDuration(i){return i===void 0&&(i=0),this.colorPickerEaseOutDuration=i,this},setColorPickerTransitInCallback(i){return this.colorPickerTransitInCallback=i,this},setColorPickerTransitOutCallback(i){return this.colorPickerTransitOutCallback=i,this},setColorPickerBounds(i){return this.colorPickerBounds=i,this},setColorPickerWidth(i){return this.colorPickerWidth=i,this},setColorPickerHeight(i){return this.colorPickerHeight=i,this},setColorPickerSize(i,t){return this.setColorPickerWidth(i).setColorPickerHeight(t),this},setColorPickerSpace(i){return i===void 0&&(i={}),this.colorPickerSpace=i,this},setColorComponentsHeight(i){return this.colorComponentsHeight=i,this},setColorComponentsFormatLabelConfig(i){return this.colorComponentsFormatLabelConfig=i,this},setColorComponentsInputTextConfig(i){return this.colorComponentsInputTextConfig=i,this},setColorComponentsSpace(i){return i===void 0&&(i={}),this.colorComponentsSpace=i,this}},cq={down:0,up:1},d5=dq;var c5=Phaser.Display.Color,Ad=Phaser.Math.Percent,p5=function(i,t,r){r===void 0&&(r=!1);var x=i.width,s=i.height,g=new c5;if(r)for(var e=0;e<s;e++){var n=Ad(e,0,s);g.setFromHSV(n,1,1),t.fillStyle=g.rgba,t.fillRect(0,e,x,1)}else for(var p=0;p<x;p++){var n=Ad(p,0,x);g.setFromHSV(n,1,1),t.fillStyle=g.rgba,t.fillRect(p,0,1,s)}},v5=function(i,t,r){for(var x=i.width,s=i.height,g=t.getImageData(0,0,x,s),e=g.data,n=new c5,p=0;p<s;p++)for(var f=0;f<x;f++){var u=Ad(f,0,x),l=1-Ad(p,0,s);n.setFromHSV(r,u,l);var a=(p*x+f)*4;e[a]=n.red,e[a+1]=n.green,e[a+2]=n.blue,e[a+3]=255}t.putImageData(g,0,0)};var pq=Phaser.Display.Color,m5=Phaser.Math.Percent,vq=Phaser.Display.Color.ColorToRGBA,mq=Phaser.Display.Color.HSVToRGB,o0=class extends bi{constructor(t,r,x,s,g,e){r===void 0&&(r=0),x===void 0&&(x=0),s===void 0&&(s=2),g===void 0&&(g=2),super(t,r,x,s,g),this.type="rexColorPicker.HPaletteCanvas",this.colorObject=new pq,this.setOrientation(e),this.setSize(s,g)}setOrientation(t){return this.orientation=hs(t),this}updateTexture(){return p5(this.canvas,this.context,this.orientation),super.updateTexture(),this}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue=t}getHue(t,r){return t===void 0?this.hue:(this.orientation===0?this.hue=m5(t,0,this.width):this.hue=m5(r,0,this.height),this.hue)}getColor(t,r){if(t===void 0)return this.color;var x=this.getHue(t,r);return this.colorObject.setFromRGB(mq(x,1,1)),this.colorObject.color}setColor(t){return this.color===t?this:this}colorToLocalPosition(t,r){return r===void 0?r={}:r===!0&&(a0===void 0&&(a0={}),r=a0),this.colorObject.setFromRGB(vq(t)),this.orientation===0?(r.x=this.width*this.colorObject.h,r.y=this.height/2):(r.x=this.width/2,r.y=this.height*this.colorObject.h),r}},a0=void 0,g5=o0;var gq=Phaser.Math.RotateAround,Rd=function(i,t,r,x){x===void 0?x={}:x===!0&&(h0===void 0&&(h0={}),x=h0),t-=i.width*i.originX,r-=i.height*i.originY;var s={x:t*i.scaleX,y:r*i.scaleY};return gq(s,0,0,-i.rotation),x.x=i.x+t,x.y=i.y+r,x},h0;var l0=class extends Nt{constructor(t,r){r===void 0&&(r={}),super(t,r);var x=r.width!=null?1:0,s=new g5(t).setOrientation(x);t.add.existing(s),this.type="rexColorPicker.HPalette",s.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var g=new Le(t,{strokeColor:16777215,strokeWidth:2});t.add.existing(g),this.add(s,{key:"paletteCanvas",expand:!0}).add(g,{key:"marker",expand:!1})}resize(t,r){if(this.width===t&&this.height===r)return this;super.resize(t,r);var x=Math.min(t,r);return this.childrenMap.marker.setSize(x,x),this}onPaletteCanvasPointerDown(t,r,x,s){if(!!t.isDown){var g=this.childrenMap.paletteCanvas,e=g.getColor(r,x);this.setMarkerPosition(e),this.emit("input",e)}}get color(){return this.childrenMap.paletteCanvas.color}setColor(t){if(this.color===t)return this;var r=this.childrenMap.paletteCanvas;return r.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var r=this.childrenMap.paletteCanvas,x=this.childrenMap.marker,s=r.colorToLocalPosition(t,!0);return Rd(r,s.x,s.y,x),this.resetChildPositionState(x),this}getHue(t,r){var x=this.childrenMap.paletteCanvas;return x.getHue(t,r)}},x5=l0;var xq=Phaser.Display.Color,y5=Phaser.Math.Percent,C5=Phaser.Display.Color.ColorToRGBA,yq=Phaser.Display.Color.HSVToRGB,f0=class extends bi{constructor(t,r,x,s,g,e){r===void 0&&(r=0),x===void 0&&(x=0),s===void 0&&(s=2),g===void 0&&(g=2),super(t,r,x,s,g),this.type="rexColorPicker.SVPaletteCanvas",e===void 0&&(e=1),this.colorObject=new xq,this.setHue(e),this.setSize(s,g)}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue!==t&&(this._hue=t,this.colorObject.h=t,this.dirty=!0)}setHue(t){return this.hue=t,this}updateTexture(){return v5(this.canvas,this.context,this.hue),super.updateTexture(),this}getColor(t,r){if(t===void 0)return this.colorObject.color;var x=y5(t,0,this.width),s=1-y5(r,0,this.height);return this.colorObject.setFromRGB(yq(this.hue,x,s)),this.colorObject.color}setColor(t){return this.color===t?this:(this.colorObject.setFromRGB(C5(t)),this.setHue(this.colorObject.h),this)}colorToLocalPosition(t,r){return r===void 0?r={}:r===!0&&(u0===void 0&&(u0={}),r=u0),this.colorObject.setFromRGB(C5(t)),r.x=this.width*this.colorObject.s,r.y=this.height*(1-this.colorObject.v),r}},u0=void 0,T5=f0;var d0=class extends Nt{constructor(t,r){super(t,r);var x=new T5(t);t.add.existing(x),this.type="rexColorPicker.SVPalette",x.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var s=new Le(t,{radius:5,strokeColor:16777215,strokeWidth:2});t.add.existing(s),this.add(x,{key:"paletteCanvas",expand:!0}).add(s,{key:"marker",expand:!1})}onPaletteCanvasPointerDown(t,r,x,s){if(!!t.isDown){var g=this.childrenMap.paletteCanvas,e=g.getColor(r,x);this.setMarkerPosition(e),this.emit("input",e)}}get color(){return this.childrenMap.paletteCanvas.color}setHue(t){var r=this.childrenMap.paletteCanvas;return r.setHue(t),this}setColor(t){if(this.color===t)return this;var r=this.childrenMap.paletteCanvas;return r.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var r=this.childrenMap.paletteCanvas,x=this.childrenMap.marker,s=r.colorToLocalPosition(t,!0);return Rd(r,s.x,s.y,x),this.resetChildPositionState(x),this}},S5=d0;var zi=Phaser.Utils.Objects.GetValue,c0=class extends lt{constructor(t,r){super(t,r),this.type="rexColorPicker",this.freezePalettes=!1;var x=zi(r,"hPalette.position",0);typeof x=="string"&&(x=Cq[x]);var s=x===0||x===2?1:0;this.setOrientation(s);var g=zi(r,"background",void 0),e,n;if(this.orientation===0){var e=zi(r,"hPalette.width",void 0);e===void 0&&(e=zi(r,"hPalette.size",10))}else n=zi(r,"hPalette.height",void 0),n===void 0&&(n=zi(r,"hPalette.size",10));var p=new x5(t,{width:e,height:n});t.add.existing(p);var f=zi(r,"svPalette.width",void 0),u=zi(r,"svPalette.height",void 0),l=new S5(t,{width:f,height:u});t.add.existing(l),g&&this.addBackground(g);var a={proportion:0,expand:!0},o,c;this.orientation===0?(o=f===void 0?1:0,c=u===void 0):(o=u===void 0?1:0,c=f===void 0);var h={proportion:o,expand:c};x===0||x===3?this.add(l,h).add(p,a):this.add(p,a).add(l,h),p.on("input",function(){l.setHue(p.getHue()),this.setValue(l.color,!0)},this),l.on("input",function(){this.setValue(l.color,!0)},this),this.addChildrenMap("background",g),this.addChildrenMap("hPalette",p),this.addChildrenMap("svPalette",l);var d=zi(r,"valuechangeCallback",null);if(d!==null){var v=zi(r,"valuechangeCallbackScope",void 0);this.on("valuechange",d,v)}this.setValue(zi(r,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){var r=this._value;this._value=t,this.freezePalettes||this.updatePalettes(),this.emit("valuechange",t,r,this)}}setValue(t,r){return this.freezePalettes=!!r,this.value=t,this.freezePalettes=!1,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}updatePalettes(){return this.childrenMap.hPalette.setColor(this.color),this.childrenMap.svPalette.setColor(this.color),this}runLayout(t,r,x){return this.ignoreLayout?this:(super.runLayout(t,r,x),this.childrenMap.hPalette.setMarkerPosition(this.value),this.childrenMap.svPalette.setMarkerPosition(this.value),this)}},Cq={bottom:0,left:1,top:2,right:3},fh=c0;var xr=Phaser.Utils.Objects.GetValue,Tq=Phaser.Display.Color,Sq=Phaser.Display.Color.ColorToRGBA,Pq=Phaser.Display.Color.HSVToRGB,en=Phaser.Math.Clamp,p0=class extends lt{constructor(t,r){r===void 0&&(r={}),r.orientation=0,super(t,r),this.type="rexColorComponents",this.colorObject=new Tq;var x=xr(r,"background",void 0),s=xr(r,"formatLabel",void 0);Se(s)||(s=Kt(t,s).resetDisplayContent());var g=[];if(r.inputText0&&r.inputText1&&r.inputText2)g.push(r.inputText0),g.push(r.inputText1),g.push(r.inputText2);else for(var e=xr(r,"inputText"),n=0;n<3;n++){var p=gr(t,e).setMaxLength(3).setNumberInput();g.push(p)}x&&this.addBackground(x);var u=xr(r,"proportion.formatLabel",0),f=!!s.isRexContainerLite,l=xr(r,"expand.formatLabel",f);this.add(s,{proportion:u,expand:l});for(var u=xr(e,"width")===void 0?1:0,l=xr(e,"height")===void 0,n=0,a=g.length;n<a;n++)this.add(g[n],{proportion:u,expand:l});this.addChildrenMap("background",x),this.addChildrenMap("formatLabel",s),this.addChildrenMap("components",g),this.onClick(s,this.toggleColorFormat,this);for(var n=0,a=g.length;n<a;n++)g[n].on("close",function(){this.updateColorObject(),this.setValue(this.colorObject.color)},this);var o=xr(r,"valuechangeCallback",null);if(o!==null){var c=xr(r,"valuechangeCallbackScope",void 0);this.on("valuechange",o,c)}s.setText("RGB"),this.setValue(xr(r,"value",16777215))}get value(){return this._value}set value(t){t=en(Math.floor(t),0,16777215),this._value!==t&&(this._value=t,this.colorObject.setFromRGB(Sq(t)),this.updateComponents(),this.emit("valuechange",this._value))}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}get colorFormat(){return this.childrenMap.formatLabel.text}set colorFormat(t){this.colorFormat!==t&&(this.childrenMap.formatLabel.setText(t),this.updateComponents())}setColorFormat(t){return this.colorFormat=t,this}toggleColorFormat(){return this.colorFormat=this.colorFormat==="RGB"?"HSV":"RGB",this}updateComponents(){var t=this.childrenMap.components,r,x,s;return this.colorFormat==="RGB"?(r=this.colorObject.red,x=this.colorObject.green,s=this.colorObject.blue):(r=Math.floor(this.colorObject.h*360),x=Math.floor(this.colorObject.s*100),s=Math.floor(this.colorObject.v*100)),t[0].setValue(r),t[1].setValue(x),t[2].setValue(s),this}updateColorObject(){var t=this.childrenMap.components;if(this.colorFormat==="RGB"){var r=en(t[0].value,0,255),x=en(t[1].value,0,255),s=en(t[2].value,0,255);this.colorObject.setTo(r,x,s)}else{var g=en(t[0].value,0,359)/360,e=en(t[1].value,0,100)/100,n=en(t[2].value,0,100)/100;this.colorObject.setFromRGB(Pq(g,e,n))}return this}},dh=p0;var P5=Vu;var ch=P5;var v0=Phaser.Utils.Objects.GetValue,m0=class extends lt{constructor(t,r){r===void 0&&(r={}),r.orientation=1,super(t,r),this.type="rexColorInput.ColorPickerPanel";var x=v0(r,"background",void 0),s=new fh(t,{hPalette:r.hPalette||{},svPalette:r.svPalette||{},space:{item:v0(r,"space.hPalette",8)}});t.add.existing(s);var g;if(r.colorComponents&&(g=new dh(t,r.colorComponents),t.add.existing(g)),x){this.addBackground(x);var e=new ch(x,{stopAllLevels:!1})}this.add(s,{proportion:1,expand:!0}),g&&this.add(g,{proportion:0,expand:!0}),this.addChildrenMap("background",x),this.addChildrenMap("colorPicker",s),this.addChildrenMap("colorComponents",g),s.on("valuechange",function(n){this.setValue(n)},this),g&&g.on("valuechange",function(n){this.setValue(n)},this),this.setValue(v0(r,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){this._value=t;var r=this.childrenMap.colorPicker;r.setValue(t);var x=this.childrenMap.colorComponents;x&&x.setValue(t),this.emit("valuechange",t)}}setValue(t){return this.value=t,this}},E5=m0;var V_t=Phaser.Utils.Objects.GetValue,Eq=function(t){var t=this.scene,r,x=this.colorPickerCreateBackgroundCallback;x&&(r=x.call(this,t),t.add.existing(r));var s=this.colorPickerWidth;s===void 0&&(s=this.width);var g=this.colorPickerHeight;g===void 0&&(g=s);var e;this.colorComponentsHeight>0?e={height:this.colorComponentsHeight,formatLabel:this.colorComponentsFormatLabelConfig,inputText:this.colorComponentsInputTextConfig,space:this.colorComponentsSpace}:e=!1;var n=new E5(t,{width:s,height:g,background:r,space:this.colorPickerSpace,hPalette:{position:this.colorPickerHPalettePosition},colorComponents:e,value:this.value});return t.add.existing(n),n},M5=Eq;var Mq=function(){if(!this.colorPicker){var i=M5.call(this).layout(),t=new dd(i,{duration:{in:this.colorPickerEaseInDuration,out:this.colorPickerEaseOutDuration},transitIn:this.colorPickerTransitInCallback,transitOut:this.colorPickerTransitOutCallback,expandDirection:this.colorPickerExpandDirection,alignTargetX:this,alignTargetY:this,bounds:this.colorPickerBounds,touchOutsideClose:!0}).on("open",function(){i.on("valuechange",function(r){this.setValue(r)},this)},this).on("close",function(){this.colorPicker=void 0,this.dropDownBehavior=void 0},this);return this.colorPicker=i,this.dropDownBehavior=t,this.pin(i),this}},A5=Mq;var R5={openColorPicker:A5};Object.assign(R5,d5);var O5=R5;var ye=Phaser.Utils.Objects.GetValue,Od=class extends uh{constructor(t,r){r===void 0&&(r={}),super(t,r),this.type="rexColorInput",r.hasOwnProperty("colorPicker")||(r.colorPicker={background:{color:0}});var x=r.colorPicker,s=x!==!1&&x!==null;if(s){this.setColorPickerSize(ye(x,"width",160),ye(x,"height",170));var g,e=ye(x,"background");e?g=function(o){return ne(o,e)}:g=ye(x,"createBackgroundCallback"),this.setCreateColorPickerBackgroundCallback(g),this.setColorPickerHPalettePosition(ye(x,"hPalettePosition",0)),this.setColorPickerExpandDirection(ye(x,"expandDirection")),this.setColorPickerEaseInDuration(ye(x,"easeIn",200)),this.setColorPickerEaseOutDuration(ye(x,"easeOut",200)),this.setColorPickerTransitInCallback(ye(x,"transitIn")),this.setColorPickerTransitOutCallback(ye(x,"transitOut")),this.setColorPickerBounds(ye(x,"bounds"));var n=ye(x,"space");n===void 0&&(n={left:10,right:10,top:10,bottom:10,item:8}),this.setColorPickerSpace(n)}var p=r.colorComponents,f=p!==!1&&p!==null;if(s&&f){this.setColorComponentsHeight(ye(p,"height",30)),this.setColorComponentsFormatLabelConfig(ye(p,"formatLabel"));var u=ye(p,"inputText");u||(u=ye(r,"inputText")),this.setColorComponentsInputTextConfig(u);var l=ye(p,"space");l===void 0&&(l={item:8}),this.setColorComponentsSpace(l)}var a=this.childrenMap.swatch;a&&s&&this.onClick(a,this.openColorPicker,this)}};Object.assign(Od.prototype,O5);var ph=Od;J.register("colorInput",function(i){var t=new ph(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.ColorInput",ph);J.register("colorInputLite",function(i){var t=new uh(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.ColorInputBase",uh);J.register("colorPicker",function(i){var t=new fh(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.ColorPicker",fh);J.register("colorComponents",function(i){var t=new dh(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.ColorComponents",dh);var Aq=function(){return function(i,t,r,x){t!=="panel"&&r.setChildVisible(i,!0)}},Rq=function(){return function(i,t,r,x){t!=="panel"&&r.setChildVisible(i,!1)}},w5={show:Aq,hide:Rq};var Oq=function(i,t){return t===void 0&&(t=1),function(r,x,s,g){x!=="panel"&&s.fadeChild(r,g?0:i,t)}},wq=function(i,t){return t===void 0&&(t=0),function(r,x,s,g){x!=="panel"&&s.fadeChild(r,g?0:i,t)}},L5={show:Oq,hide:wq};var F5=function(i,t){return function(r,x,s,g){x!=="panel"&&s.moveChild(r,g?0:i,t)}},b5={show:F5,hide:F5};var D5=function(i,t){return function(r,x,s,g){x==="panel"&&s.moveChild(r,g?0:i,t)}},I5={show:D5,hide:D5};var g0={visible:w5,fade:L5,move:b5,"move-panel":I5},Lq=function(i){var t,r;[t,...r]=typeof i=="string"?[i]:i;var x,s;return g0.hasOwnProperty(t)?(x=g0[t].show.apply(null,r),s=g0[t].hide.apply(null,r)):(x=Gt,s=Gt),{show:x,hide:s}},B5=Lq;var G5={showChild(i,t){var r=this.sizerChildren[i];return r&&(this.emit("showchild",r,i,this,t),this.resetChildState(r)),this},hideChild(i,t){var r=this.sizerChildren[i];return r&&(this.emit("hidechild",r,i,this,t),this.resetChildState(r)),this},swapChild(i,t){return this.currentChildKey===i||(this.currentChildKey==="panel"||i==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=i,this.hideChild(this.previousChildKey,t),this.showChild(this.currentChildKey,t)):(this.swapChild("panel",t),this.swapChild(i,t))),this},showPanel(i){return this.swapChild("panel",i),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var i=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(i),this},toggleRightSide(){var i=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(i),this},toggleTopSide(){var i=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(i),this},toggleBottomSide(){var i=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(i),this}};var Fq=De.prototype.setChildVisible,N5={setChildVisible(i,t){var r;if(typeof i=="string"){var r=i;i=this.sizerChildren[r]}else r=os(this.sizerChildren,i);return t===void 0&&(t=this.currentChildKey===r),Fq.call(this,i,t),this}};var V5={fadeChild(i,t,r){var x;return typeof i=="string"?(x=i,i=this.sizerChildren[x]):x=os(this.sizerChildren,i),t===void 0&&(t=500),r===void 0&&(r=this.currentChildKey===x?1:0),i.fadeIn(t,{start:i.alpha,end:r}),this},fadeChildPromise(i,t,r){return typeof i=="string"&&(i=this.sizerChildren[key]),this.fadeChild(i,t,r),i._fade?At(i._fade):Promise.resolve()}};var z5={moveChild(i,t,r,x){var s;typeof i=="string"?(s=i,i=this.sizerChildren[s]):s=os(this.sizerChildren,i),t===void 0&&(t=500);var g=this.currentChildKey===s;if(x===void 0)switch(s){case"leftSide":case"rightSide":x=mt(i);break;case"topSide":case"bottomSide":x=dt(i);break;default:if(g)switch(this.previousChildKey){case"leftSide":case"rightSide":x=mt(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":x=dt(this.sizerChildren[this.previousChildKey]);break;default:x=0;break}else switch(this.currentChildKey){case"leftSide":case"rightSide":x=mt(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":x=dt(this.sizerChildren[this.currentChildKey]);break;default:x=0;break}break}var e,n,p,f;if(g)switch(s){case"panel":switch(this.previousChildKey){case"leftSide":e=!0;break;case"rightSide":n=!0;break;case"topSide":p=!0;break;case"bottomSide":f=!0;break}break;case"leftSide":n=!0;break;case"rightSide":e=!0;break;case"topSide":f=!0;break;case"bottomSide":p=!0;break}else switch(s){case"panel":switch(this.currentChildKey){case"leftSide":n=!0;break;case"rightSide":e=!0;break;case"topSide":f=!0;break;case"bottomSide":p=!0;break}break;case"leftSide":e=!0;break;case"rightSide":n=!0;break;case"topSide":p=!0;break;case"bottomSide":f=!0;break}return e?i.moveTo(t,`-=${x}`,void 0,r):n?i.moveTo(t,`+=${x}`,void 0,r):p?i.moveTo(t,void 0,`-=${x}`,r):f?i.moveTo(t,void 0,`+=${x}`,r):i.moveTo(0),this},moveChildPromise(i,t,r,x){return typeof i=="string"&&(i=this.sizerChildren[key]),this.moveChild(i,t,r,x),i._easeMove?At(i._easeMove):Promise.resolve()}};var Y5={};Object.assign(Y5,N5,V5,z5);var U5=Y5;var Ze=Phaser.Utils.Objects.GetValue,wd=class extends Nt{constructor(t,r){super(t,r),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var x=Ze(r,"showChildCallback",void 0);if(x)if(Ie(x)){var s=Ze(r,"showChildCallbackScope",void 0);this.on("showchild",x,s);var g=Ze(r,"hideChildCallback",void 0),e=Ze(r,"hideChildCallbackScope",void 0);this.on("hidechild",g,e)}else{var n=B5(x);this.on("showchild",n.show),this.on("hidechild",n.hide)}var p=Ze(r,"background",void 0),f=Ze(r,"panel",void 0),u=Ze(r,"leftSide",void 0),l=Ze(r,"rightSide",void 0),a=Ze(r,"topSide",void 0),o=Ze(r,"bottomSide",void 0);if(p&&this.addBackground(p),f&&this.add(f,"panel","center",0,!0),u){var c=Ze(r,"expand.left",!0);this.add(u,"leftSide","left-top",0,{height:c})}if(l){var c=Ze(r,"expand.right",!0);this.add(l,"rightSide","right-top",0,{height:c})}if(a){var c=Ze(r,"expand.top",!0);this.add(a,"topSide","left-top",0,{width:c})}if(o){var c=Ze(r,"expand.bottom",!0);this.add(o,"bottomSide","left-bottom",0,{width:c})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}};Object.assign(wd.prototype,G5,U5);var x0=wd;J.register("sides",function(i){var t=new x0(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Sides",x0);var y0=class extends xe{constructor(t,r){r=ya(t,r),super(t,r),this.type="rexTweaker.Title"}setTitle(t){return t=t?wt(t):{},t.hasOwnProperty("text")||(t.hasOwnProperty("title")?t.text=t.title:t.text=""),this.resetDisplayContent(t),this}},Ld=y0;var C0=class extends Ld{constructor(t,r){r===void 0&&(r={}),super(t,r),this.type="rexTweaker.FolderTitle";var x=new Mo(t,r.expandedIcon);t.add.existing(x),this.addSpace().add(x,{proportion:0,expand:!1,padding:1,fitRatio:1}),this.addChildrenMap("expandedIcon",x)}setExpandedState(t){t===void 0&&(t=!0);var r=t?"down":"right",x=this.childrenMap.expandedIcon;return x.setDirection(r),this}},X5=C0;var bq=function(i,t){var r=new bd(i,t);return i.add.existing(r),r},Fd=bq;var Dq=function(i,t,r){return ne(i,r)},Fa=Dq;var W5={setBindingTarget(i){var t=this.childrenMap.child;return t.setBindingTarget(i),this}};var k5={getMaxInputRowTitleWidth(){var i=this.childrenMap.child,t=i.getMaxInputRowTitleWidth();return t+this.getInnerPadding("left")},setInputRowTitleWidth(i){i-=this.getInnerPadding("left");var t=this.childrenMap.child;return t.setInputRowTitleWidth(i),this}};var Dd=class extends sh{constructor(t,r){super(t,r),this.type="rexTweaker.Folder"}setTitle(t){var r=this.childrenMap.title;return r.setTitle(t),this}};Object.assign(Dd.prototype,W5,k5);var H5=Dd;var ba=Phaser.Utils.Objects.GetValue,Iq=function(i,t,r){var x=ba(r,"title")||{},s=new X5(i,x);i.add.existing(s),s.on("folder.expand",function(){s.setExpandedState(!0)}).on("folder.collapse",function(){s.setExpandedState(!1)});var g={root:ba(r,"root"),styles:ba(r,"tweaker"),space:ba(r,"space")||{}},e=Fd(i,g),n=ba(r,"background"),p=Fa(i,t,n),f=new H5(i,{orientation:1,title:s,child:e,background:p,transition:{duration:ba(r,"transition.duration",200)}});return i.add.existing(f),f},K5=Iq;var j5=Phaser.Utils.Objects.GetValue,Bq=function(i){var t=this.scene,r=j5(this.styles,"folder")||{};r.tweaker=this.styles,r.root=this.root;var x=K5(t,i,r);delete r.tweaker,delete r.root,this.add(x,{expand:!0}),x.setTitle(i);var s=j5(i,"expanded",!0);s?x.expand(0):x.collapse(0);var g=x.getElement("child");return i.key&&this.root.addChildrenMap(i.key,g),g},Z5=Bq;var J5={setBindingTarget(i){for(var t=this.childrenMap.pages.children,r=0,x=t.length;r<x;r++)t[r].setBindingTarget(i);return this}};var $5={getMaxInputRowTitleWidth(){for(var i=0,t=this.childrenMap.pages.children,r=0,x=t.length;r<x;r++)i=Math.max(i,t[r].getMaxInputRowTitleWidth());return i+this.getInnerPadding("left")},setInputRowTitleWidth(i){i-=this.getInnerPadding("left");for(var t=this.childrenMap.pages.children,r=0,x=t.length;r<x;r++)t[r].setInputRowTitleWidth(i);return this}};var Id=class extends rh{constructor(t,r){super(t,r),this.type="rexTweaker.TabPages"}};Object.assign(Id.prototype,J5,$5);var Q5=Id;var Bd=Phaser.Utils.Objects.GetValue,Gq=function(i,t,r){var x=new Q5(i,r);i.add.existing(x);for(var s=Bd(r,"tab"),g={root:Bd(r,"root"),styles:Bd(r,"tweaker")},e=Bd(t,"pages")||[],n=0,p=e.length;n<p;n++){var f=e[n];x.addPage({key:f.title,tab:Kt(i,s).setActiveState(!1).resetDisplayContent({text:f.title}),page:Fd(i,g)})}return x.on("tab.focus",function(u,l){u.setActiveState(!0)}).on("tab.blur",function(u,l){u.setActiveState(!1)}),x},q5=Gq;var _5=Phaser.Utils.Objects.GetValue,Nq=function(i){var t=this.scene,r=_5(this.styles,"tab")||{};r.tweaker=this.styles,r.root=this.root;var x=q5(t,i,r);delete r.tweaker,delete r.root,this.add(x,{expand:!0});for(var s=_5(i,"pages")||[],g=[],e=0,n=0,p=s.length;n<p;n++){var f=x.getPage(n),u=s[n].show;u&&(e=n);var l=s[n].key;l&&this.root.addChildrenMap(l,f),g.push(f)}return x.swapPage(e,0),g},t6=Nq;var Da="string",Gd="number",Nd="range",Vd="list",e6="buttons",zd="boolean",i6="toggleSwitch",r6="color";var Vq=function(i,t,r){if(r.view)return r.view;if(r.options)return Vd;if(!i)return Da;var x=i[t];switch(typeof x){case"number":return zq(r,"min","max")?Nd:Gd;case"string":return Da;case"boolean":return zd;default:return Da}},zq=function(i,...t){for(var r=0,x=t.length;r<x;r++)if(i[t[r]]===void 0)return!1;return!0},s6=Vq;var n6={setupBinding(){var i=this.childrenMap.inputField;return i.on("valuechange",function(t){!this.bindingTarget||!this.autoUpdateEnable||(this.bindingTarget[this.bindTargetKey]=t)},this),this},setAutoUpdateEnable(i){return i===void 0&&(i=!0),this.autoUpdateEnable=i,this},setBindingTarget(i,t){return this.bindingTarget=i,t!==void 0&&this.setBindingTargetKey(t),this.syncTargetValue(),this},setBindingTargetKey(i){return this.bindTargetKey=i,this},syncTargetValue(){if(!this.bindingTarget||!this.bindTargetKey)return this;var i=this.childrenMap.inputField;return i.syncValue(this.bindingTarget[this.bindTargetKey]),this}};var a6={startMonitorTarget(){return this.isMonitoring?this:(this.isMonitoring=!0,this.scene.events.on("postupdate",this.onMonitorTarget,this),this)},stopMonitorTarget(){return this.isMonitoring?(this.isMonitoring=!1,this.scene.events.off("postupdate",this.onMonitorTarget,this),this):this},onMonitorTarget(){if(!!this.bindingTarget){var i=this.bindingTarget[this.bindTargetKey],t=this.childrenMap.inputField;t.value!==i&&t.syncValue(i)}}};var o6={getMinTitleWidth(){var i=this.childrenMap.title;if(!i)return 0;var t=i.rexSizer.padding,r=this.getChildWidth(this.childrenMap.title)+t.left+t.right;return r+this.getInnerPadding("left")},setMinTitleWidth(i){var t=this.childrenMap.title;if(!t)return this;var r=t.rexSizer.padding;return i-=r.left+r.right,t.minWidth=i,this}};var T0=Phaser.Utils.Objects.GetValue,Yd=class extends lt{constructor(t,r){super(t,r),this.type="rexTweaker.InputRow",this.bindingTarget=void 0,this.bindTargetKey=void 0,this.autoUpdateEnable=!0;var x=r.inputTitle,s=r.inputField,g=r.background,f=T0(r,"proportion.title",0),e=T0(r,"space.title",0),n;this.orientation===0?n={right:e}:n={bottom:e},this.add(x,{proportion:f,expand:!0,padding:n});var p=r.parentOrientation===1?1:0,f=T0(r,"proportion.inputField",p);this.add(s,{proportion:f,expand:!0}),g&&this.addBackground(g),this.addChildrenMap("title",x),this.addChildrenMap("inputField",s),this.addChildrenMap("background",g),this.setupBinding()}destroy(t){!this.scene||(this.stopMonitorTarget(),super.destroy(t))}setTitle(t){var r=this.childrenMap.title;return r.setTitle(t),this}preLayout(){var t=this.childrenMap.title;t&&(t.minWidth=0),super.preLayout()}};Object.assign(Yd.prototype,n6,a6,o6);var Ud=Yd;var Yq=function(i,t,r){var x=new Ld(i,r);return i.add.existing(x),x},Xd=Yq;var S0=class extends lt{get bindingTarget(){return this.getParentSizer().bindingTarget}get bindingKey(){return this.getParentSizer().bindTargetKey}get value(){return this._value}validate(t){return this.syncValueFlag||!this.validateCallback?!0:this.validateCallback(t,this._value,this.bindingTarget,this.bindingKey)}set value(t){if(this._value!==t){var r=this._value;this._value=t,this.syncValueFlag||this.emit("valuechange",t,r,this.bindingTarget,this.bindingKey)}}getValue(){return this.value}setValue(t){return this.value=t,this}syncValue(t){return this.syncValueFlag=!0,this.value=t,this.syncValueFlag=!1,this}get readOnly(){return this._readOnly}set readOnly(t){this._readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,!0}setTextFormatCallback(t){return this.textFormatCallback=t,this}setValidateCallback(t){return this.validateCallback=t,this}},Ae=S0;var P0=class extends Ae{constructor(t,r){r===void 0&&(r={}),super(t),this.type="rexTweaker.TextInput";var x=r.inputText,s=gr(t,x);this.add(s,{proportion:1,expand:!0}),this.addChildrenMap("inputText",s),s.on("close",function(){this.setValue(s.value)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var r=this.textFormatCallback?this.textFormatCallback(t):t;this.childrenMap.inputText.setText(r),super.value=t}}setInputTextReadOnly(t){return t===void 0&&(t=!0),this.childrenMap.inputText.setReadOnly(t),this}},h6=P0;var Uq=function(i,t,r){var x=new h6(i,r);return i.add.existing(x),x.setInputTextReadOnly(!!t.inputTextReadOnly),x},E0=Uq;var M0=class extends Ae{constructor(t,r){r===void 0&&(r={}),super(t),this.type="rexTweaker.NumberInput";var x=r.inputNumber||r.inputText,s=gr(t,x).setNumberInput();this.add(s,{proportion:1,expand:!0}),this.addChildrenMap("inputText",s),s.on("close",function(){this.setValue(s.value)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var r=this.textFormatCallback?this.textFormatCallback(t):t;this.childrenMap.inputText.setText(r),super.value=t}}setInputTextReadOnly(t){return t===void 0&&(t=!0),this.childrenMap.inputText.setReadOnly(t),this}},l6=M0;var Xq=function(i,t,r){var x=new l6(i,r);return i.add.existing(x),x.setInputTextReadOnly(!!t.inputTextReadOnly),x},u6=Xq;var Wq=function(i,t){var r=new Bi(i,t);return i.add.existing(r),r},f6=Wq;var A0=Phaser.Utils.Objects.GetValue,kq=Phaser.Math.Linear,Hq=Phaser.Math.Snap.Floor,R0=class extends Ae{constructor(t,r){r===void 0&&(r={}),super(t),this.type="rexTweaker.RangeInput";var x=r.slider,s=this.orientation===0?"track.height":"track.width",g=A0(x,s),e=f6(t,x),u=r.parentOrientation===1?2:0,l=A0(r,"proportion.range.slider",u),n=g===void 0;this.add(e,{proportion:l,expand:n});var p=r.inputNumber||r.inputText,f=gr(t,p).setNumberInput(),u=r.parentOrientation===1?1:0,l=A0(r,"proportion.range.inputText",u);this.add(f,{proportion:l,expand:!0}),this.addChildrenMap("slider",e),this.addChildrenMap("inputText",f),f.on("close",function(){this.setValue(f.value)},this),e.on("valuechange",function(){var a=kq(this.minValue,this.maxValue,e.value);this.step&&(a=Hq(a,this.step,this.minValue)),this.setValue(a)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var r=this.textFormatCallback?this.textFormatCallback(t):t;this.childrenMap.inputText.setText("").setText(r),this.childrenMap.slider.setValue(t,this.minValue,this.maxValue),super.value=t}}setRange(t,r,x){return this.minValue=t,this.maxValue=r,this.step=x,this.childrenMap.slider.setGap(x,t,r),this}setInputTextReadOnly(t){return t===void 0&&(t=!0),this.childrenMap.inputText.setReadOnly(t),this}},d6=R0;var Kq=function(i,t,r){var x=new d6(i,r);return i.add.existing(x),x.setRange(t.min,t.max,t.step),x.setInputTextReadOnly(!!t.inputTextReadOnly),x},c6=Kq;var jq=function(i,t){t=pd(i,t);var r=new $s(i,t);return i.add.existing(r),r},p6=jq;var O0=function(i,t){for(var r=0,x=i.length;r<x;r++){var s=i[r];if(s.value===t)return r}},v6=function(i,t){var r=O0(i,t);if(r!=null)return i[r].text};var w0=class extends Ae{constructor(t,r){r===void 0&&(r={}),super(t),this.type="rexTweaker.ListInput";var x=p6(t,r.list);this.add(x,{proportion:1,expand:!0}),this.addChildrenMap("list",x),x.on("button.click",function(s,g,e,n,p,f){this.setValue(e.value)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var r=this.childrenMap.list,x=v6(r.options,t);r.resetDisplayContent({text:x}),super.value=t}}setOptions(t){return this.childrenMap.list.setOptions(t),this}},m6=w0;var Zq=function(i,t,r){var x=new m6(i,r);return i.add.existing(x),x.setOptions(t.options),x},g6=Zq;var Jq=function(i,t){var r=new bt(i,t);return i.add.existing(r),r},Wd=Jq;var $q=function(i,t){for(var r=0,x=i.length;r<x;r++){var s=i[r];!s||s.setActiveState(r===t)}},x6=$q;var Qq=Phaser.Utils.Objects.GetValue,L0=class extends Ae{constructor(t,r){r===void 0&&(r={}),super(t),this.type="rexTweaker.ButtonsInput";var x=r.button?wt(r.button):{},s=Qq(x,"expand",!0);s&&(x.align="center"),delete x.expand;var g=Wd(t,{expand:s});g.buttonConfig=x,this.add(g,{proportion:1,expand:!0}),this.addChildrenMap("list",g),g.on("button.click",function(e,n,p,f){var u=g.options[n];!u||(this._selectedIndex=n,this.setValue(u.value),this._selectedIndex=void 0)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var r=this.childrenMap.list,x=this._selectedIndex;x===void 0&&(x=O0(r.options,t)),x6(r.childrenMap.buttons,x),super.value=t}}setOptions(t){var r=this.childrenMap.list;r.options=t;var x=this.scene,s=r.buttonConfig;r.clearButtons(!0);for(var g=0,e=t.length;g<e;g++){var n=t[g],p=Kt(x,s).setActiveState(!1).resetDisplayContent({text:n.text});r.addButton(p)}return this}},y6=L0;var qq=function(i,t,r){var x=new y6(i,r);return i.add.existing(x),x.setOptions(t.options),x},C6=qq;var _q=function(i,t){var r=new xo(i,t);return i.add.existing(r),r},T6=_q;var t_=Phaser.Utils.Objects.GetValue,F0=class extends Ae{constructor(t,r){r===void 0&&(r={}),super(t),this.type="rexTweaker.CheckboxInput";var x=r.checkbox,s=T6(t,x),g=t_(x,"size");g!==void 0&&s.setSize(g,g);var e=g!==void 0?0:1;this.add(s,{proportion:0,expand:!1,fitRatio:e}),this.addChildrenMap("checkbox",s),s.on("valuechange",function(n){this.setValue(n)},this)}get value(){return this._value}set value(t){this._value!==t&&(this.validate(t)||(t=this._value),this.childrenMap.checkbox.setValue(t),super.value=t)}},S6=F0;var e_=function(i,t,r){var x=new S6(i,r);return i.add.existing(x),x},P6=e_;var i_=function(i,t){var r=new yo(i,t);return i.add.existing(r),r},E6=i_;var r_=Phaser.Utils.Objects.GetValue,b0=class extends Ae{constructor(t,r){r===void 0&&(r={}),super(t),this.type="rexTweaker.ToggleSwitchInput";var x=r.toggleSwitch,s=E6(t,x),g=r_(x,"size");g!==void 0&&s.setSize(g,g);var e=g!==void 0?0:1;this.addSpace().add(s,{proportion:0,expand:!1,fitRatio:e}),this.addChildrenMap("toggleSwitch",s),s.on("valuechange",function(n){this.setValue(n)},this)}get value(){return this._value}set value(t){this._value!==t&&(this.validate(t)||(t=this._value),this.childrenMap.toggleSwitch.setValue(t),super.value=t)}},M6=b0;var s_=function(i,t,r){var x=new M6(i,r);return i.add.existing(x),x},A6=s_;var n_=function(i,t,r){r===void 0&&(r=!0),r?t=t?wt(t):{}:t||(t={});var x=new ph(i,t);return i.add.existing(x),x},R6=n_;var D0=class extends Ae{constructor(t,r){r===void 0&&(r={}),super(t),this.type="rexTweaker.ColorInput";var x=r.colorInput,s=R6(t,x);this.add(s,{proportion:1,expand:!0}),this.addChildrenMap("colorInput",s),s.on("valuechange",function(g){this.setValue(g)},this)}get value(){return this._value}set value(t){this._value!==t&&(this.validate(t)||(t=this._value),this.childrenMap.colorInput.setValue(t),super.value=t)}},O6=D0;var a_=function(i,t,r){var x=new O6(i,r);return i.add.existing(x),x},w6=a_;var o_=function(i,t,r){var x=t.view,s;switch(x){case Da:s=E0;break;case Gd:s=u6;break;case Nd:s=c6;break;case Vd:s=g6;break;case e6:s=C6;break;case zd:s=P6;break;case i6:s=A6;break;case r6:s=w6;break;default:s=Ie(x)?x:E0;break}var g=s(i,t,r,g);return g.setTextFormatCallback(t.format),g},L6=o_;var F6=Phaser.Utils.Objects.GetValue,h_=function(i,t,r){var x=F6(r,"title")||{},s=Xd(i,t,x),g=L6(i,t,r),e=F6(r,"background")||{},n=ne(i,e),p=new Ud(i,Ph(Xa(Xa({},t),r),{inputTitle:s,inputField:g,background:n}));return i.add.existing(p),p.setTitle(t),p},b6=h_;var mre=Phaser.Utils.Objects.GetValue,l_=function(i,t,r){arguments.length===1?(r=i,i=r.bindingTarget,t=r.bindingKey):r===void 0&&(r={}),r.title||(r.title=t),r.view||(r.view=s6(i,t,r));var x=this.styles.inputRow||{};x.parentOrientation=this.styles.orientation;var s=b6(this.scene,r,x),g=s.childrenMap.inputField,e;return this.orientation===1?e=0:(e=this.itemWidth>0?0:1,s.setMinWidth(this.itemWidth)),this.add(s,{proportion:e,expand:!0}),r.onValueChange&&g.on("valuechange",r.onValueChange),r.onValidate&&g.setValidateCallback(r.onValidate),s.setAutoUpdateEnable(r.autoUpdate),s.setBindingTarget(i,t),r.monitor&&s.startMonitorTarget(),r.key&&this.root.addChildrenMap(r.key,s),this},D6=l_;var u_=function(i,t){var r=new Le(i,t);return i.add.existing(r),r},I6=u_;var I0=Phaser.Utils.Objects.GetValue,f_=function(i,t,r){for(var x=I0(r,"title")||{},s=Xd(i,t,x),g=t.buttons,e=I0(r,"button")||{},n=[],p=0,f=g.length;p<f;p++){var u=Kt(i,e);n.push(u);var l=g[p];u.resetDisplayContent({text:l.label}),u.callback=l.callback}var a=Wd(i,{buttons:n,expand:n.length===1}),o=I0(r,"background")||{},c=I6(i,o),h=new Ud(i,Ph(Xa({},r),{inputTitle:s,inputField:a,background:c}));return i.add.existing(h),h.setTitle(t),a.on("button.click",function(d){d.callback(h.bindingTarget)}),h},B6=f_;var d_=Phaser.Utils.Objects.GetValue,c_=function(i){var t=this.scene;i===void 0&&(i={}),i.hasOwnProperty("label")&&(i.buttons=[{label:i.label,callback:i.callback}],delete i.label,delete i.callback);var r=i.bindingTarget;delete i.bindingTarget;var x=d_(this.styles,"inputRow")||{},s=B6(t,i,x);return this.add(s,{expand:!0}),r&&s.setBindingTarget(r),i.key&&this.root.addChildrenMap(i.key,s),this},B0=c_;var p_=Phaser.Utils.Objects.GetValue,v_=function(i){var t=this.scene,r=p_(this.styles,"separator"),x=Fa(t,i,r);return this.add(x,{expand:!0}),this},G6=v_;var m_=function(i){for(var t=this.sizerChildren,r=0,x=t.length;r<x;r++){var s=t[r];!s.setBindingTarget||s.setBindingTarget(i)}return this},N6=m_;var g_=function(){for(var i=0,t=this.sizerChildren,r=0,x=t.length;r<x;r++){var s=t[r];s.rexSizer.hidden||(s.getMinTitleWidth?i=Math.max(i,s.getMinTitleWidth()):s.getMaxInputRowTitleWidth&&(i=Math.max(i,s.getMaxInputRowTitleWidth())))}return i+this.getInnerPadding("left")},V6=g_;var x_=function(i){i-=this.getInnerPadding("left");for(var t=this.sizerChildren,r=0,x=t.length;r<x;r++){var s=t[r];s.rexSizer.hidden||(s.setMinTitleWidth?s.setMinTitleWidth(i):s.setInputRowTitleWidth&&s.setInputRowTitleWidth(i))}return this},z6=x_;var y_={addFolder:Z5,addTab:t6,addInput:D6,addButton:B0,addButtons:B0,addSeparator:G6,setBindingTarget:N6,getMaxInputRowTitleWidth:V6,setInputRowTitleWidth:z6},Y6=y_;var kd=Phaser.Utils.Objects.GetValue,Hd=class extends lt{constructor(t,r){if(r===void 0&&(r={}),r.orientation===void 0&&(r.orientation=1),super(t,r),this.type="rexTweakerShell",this.root=r.root||this,this.styles=kd(r,"styles")||{},this.styles.orientation=this.orientation,this.itemWidth=kd(this.styles,"itemWidth",0),this.root===this&&this.orientation===1){var x=kd(r,"inputRow.alignTitle");if(x===void 0){var s=kd(this.styles,"inputRow.proportion.title");x=!s}else x&&Z(this.styles,"inputRow.proportion.title",0);this.alignInputRowTitle=x}else this.alignInputRowTitle=!1;var g=Fa(t,void 0,r.background);g&&this.addBackground(g)}preLayout(){super.preLayout(),this.alignInputRowTitle&&this.setInputRowTitleWidth(this.getMaxInputRowTitleWidth())}};Object.assign(Hd.prototype,Y6);var bd=Hd;var G0=class extends bd{constructor(t,r){r===void 0&&(r={}),r.styles===void 0&&(r.styles={}),r.background=r.styles.background||{},r.space=r.styles.space||{},super(t,r),this.type="rexTweaker"}},N0=G0;J.register("tweaker",function(i){var t=new N0(this.scene,i);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Tweaker",N0);function iI(i){return typeof i=="undefined"||i===null}function C_(i){return typeof i=="object"&&i!==null}function T_(i){return Array.isArray(i)?i:iI(i)?[]:[i]}function S_(i,t){var r,x,s,g;if(t)for(g=Object.keys(t),r=0,x=g.length;r<x;r+=1)s=g[r],i[s]=t[s];return i}function P_(i,t){var r="",x;for(x=0;x<t;x+=1)r+=i;return r}function E_(i){return i===0&&Number.NEGATIVE_INFINITY===1/i}var M_=iI,A_=C_,R_=T_,O_=P_,w_=E_,L_=S_,ae={isNothing:M_,isObject:A_,toArray:R_,repeat:O_,isNegativeZero:w_,extend:L_};function rI(i,t){var r="",x=i.reason||"(unknown reason)";return i.mark?(i.mark.name&&(r+='in "'+i.mark.name+'" '),r+="("+(i.mark.line+1)+":"+(i.mark.column+1)+")",!t&&i.mark.snippet&&(r+=`

`+i.mark.snippet),x+" "+r):x}function mh(i,t){Error.call(this),this.name="YAMLException",this.reason=i,this.mark=t,this.message=rI(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}mh.prototype=Object.create(Error.prototype);mh.prototype.constructor=mh;mh.prototype.toString=function(t){return this.name+": "+rI(this,t)};var Ve=mh;function V0(i,t,r,x,s){var g="",e="",n=Math.floor(s/2)-1;return x-t>n&&(g=" ... ",t=x-n+g.length),r-x>n&&(e=" ...",r=x+n-e.length),{str:g+i.slice(t,r).replace(/\t/g,"\u2192")+e,pos:x-t+g.length}}function z0(i,t){return ae.repeat(" ",t-i.length)+i}function F_(i,t){if(t=Object.create(t||null),!i.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,x=[0],s=[],g,e=-1;g=r.exec(i.buffer);)s.push(g.index),x.push(g.index+g[0].length),i.position<=g.index&&e<0&&(e=x.length-2);e<0&&(e=x.length-1);var n="",p,f,u=Math.min(i.line+t.linesAfter,s.length).toString().length,l=t.maxLength-(t.indent+u+3);for(p=1;p<=t.linesBefore&&!(e-p<0);p++)f=V0(i.buffer,x[e-p],s[e-p],i.position-(x[e]-x[e-p]),l),n=ae.repeat(" ",t.indent)+z0((i.line-p+1).toString(),u)+" | "+f.str+`
`+n;for(f=V0(i.buffer,x[e],s[e],i.position,l),n+=ae.repeat(" ",t.indent)+z0((i.line+1).toString(),u)+" | "+f.str+`
`,n+=ae.repeat("-",t.indent+u+3+f.pos)+`^
`,p=1;p<=t.linesAfter&&!(e+p>=s.length);p++)f=V0(i.buffer,x[e+p],s[e+p],i.position-(x[e]-x[e+p]),l),n+=ae.repeat(" ",t.indent)+z0((i.line+p+1).toString(),u)+" | "+f.str+`
`;return n.replace(/\n$/,"")}var b_=F_,D_=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],I_=["scalar","sequence","mapping"];function B_(i){var t={};return i!==null&&Object.keys(i).forEach(function(r){i[r].forEach(function(x){t[String(x)]=r})}),t}function G_(i,t){if(t=t||{},Object.keys(t).forEach(function(r){if(D_.indexOf(r)===-1)throw new Ve('Unknown option "'+r+'" is met in definition of "'+i+'" YAML type.')}),this.options=t,this.tag=i,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=B_(t.styleAliases||null),I_.indexOf(this.kind)===-1)throw new Ve('Unknown kind "'+this.kind+'" is specified for "'+i+'" YAML type.')}var Ce=G_;function U6(i,t){var r=[];return i[t].forEach(function(x){var s=r.length;r.forEach(function(g,e){g.tag===x.tag&&g.kind===x.kind&&g.multi===x.multi&&(s=e)}),r[s]=x}),r}function N_(){var i={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function x(s){s.multi?(i.multi[s.kind].push(s),i.multi.fallback.push(s)):i[s.kind][s.tag]=i.fallback[s.tag]=s}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(x);return i}function U0(i){return this.extend(i)}U0.prototype.extend=function(t){var r=[],x=[];if(t instanceof Ce)x.push(t);else if(Array.isArray(t))x=x.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(x=x.concat(t.explicit));else throw new Ve("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(g){if(!(g instanceof Ce))throw new Ve("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(g.loadKind&&g.loadKind!=="scalar")throw new Ve("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(g.multi)throw new Ve("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),x.forEach(function(g){if(!(g instanceof Ce))throw new Ve("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(U0.prototype);return s.implicit=(this.implicit||[]).concat(r),s.explicit=(this.explicit||[]).concat(x),s.compiledImplicit=U6(s,"implicit"),s.compiledExplicit=U6(s,"explicit"),s.compiledTypeMap=N_(s.compiledImplicit,s.compiledExplicit),s};var sI=U0,nI=new Ce("tag:yaml.org,2002:str",{kind:"scalar",construct:function(i){return i!==null?i:""}}),aI=new Ce("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(i){return i!==null?i:[]}}),oI=new Ce("tag:yaml.org,2002:map",{kind:"mapping",construct:function(i){return i!==null?i:{}}}),hI=new sI({explicit:[nI,aI,oI]});function V_(i){if(i===null)return!0;var t=i.length;return t===1&&i==="~"||t===4&&(i==="null"||i==="Null"||i==="NULL")}function z_(){return null}function Y_(i){return i===null}var lI=new Ce("tag:yaml.org,2002:null",{kind:"scalar",resolve:V_,construct:z_,predicate:Y_,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function U_(i){if(i===null)return!1;var t=i.length;return t===4&&(i==="true"||i==="True"||i==="TRUE")||t===5&&(i==="false"||i==="False"||i==="FALSE")}function X_(i){return i==="true"||i==="True"||i==="TRUE"}function W_(i){return Object.prototype.toString.call(i)==="[object Boolean]"}var uI=new Ce("tag:yaml.org,2002:bool",{kind:"scalar",resolve:U_,construct:X_,predicate:W_,represent:{lowercase:function(i){return i?"true":"false"},uppercase:function(i){return i?"TRUE":"FALSE"},camelcase:function(i){return i?"True":"False"}},defaultStyle:"lowercase"});function k_(i){return 48<=i&&i<=57||65<=i&&i<=70||97<=i&&i<=102}function H_(i){return 48<=i&&i<=55}function K_(i){return 48<=i&&i<=57}function j_(i){if(i===null)return!1;var t=i.length,r=0,x=!1,s;if(!t)return!1;if(s=i[r],(s==="-"||s==="+")&&(s=i[++r]),s==="0"){if(r+1===t)return!0;if(s=i[++r],s==="b"){for(r++;r<t;r++)if(s=i[r],s!=="_"){if(s!=="0"&&s!=="1")return!1;x=!0}return x&&s!=="_"}if(s==="x"){for(r++;r<t;r++)if(s=i[r],s!=="_"){if(!k_(i.charCodeAt(r)))return!1;x=!0}return x&&s!=="_"}if(s==="o"){for(r++;r<t;r++)if(s=i[r],s!=="_"){if(!H_(i.charCodeAt(r)))return!1;x=!0}return x&&s!=="_"}}if(s==="_")return!1;for(;r<t;r++)if(s=i[r],s!=="_"){if(!K_(i.charCodeAt(r)))return!1;x=!0}return!(!x||s==="_")}function Z_(i){var t=i,r=1,x;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),x=t[0],(x==="-"||x==="+")&&(x==="-"&&(r=-1),t=t.slice(1),x=t[0]),t==="0")return 0;if(x==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function J_(i){return Object.prototype.toString.call(i)==="[object Number]"&&i%1===0&&!ae.isNegativeZero(i)}var fI=new Ce("tag:yaml.org,2002:int",{kind:"scalar",resolve:j_,construct:Z_,predicate:J_,represent:{binary:function(i){return i>=0?"0b"+i.toString(2):"-0b"+i.toString(2).slice(1)},octal:function(i){return i>=0?"0o"+i.toString(8):"-0o"+i.toString(8).slice(1)},decimal:function(i){return i.toString(10)},hexadecimal:function(i){return i>=0?"0x"+i.toString(16).toUpperCase():"-0x"+i.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),$_=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Q_(i){return!(i===null||!$_.test(i)||i[i.length-1]==="_")}function q_(i){var t,r;return t=i.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var __=/^[-+]?[0-9]+e/;function ttt(i,t){var r;if(isNaN(i))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===i)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===i)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ae.isNegativeZero(i))return"-0.0";return r=i.toString(10),__.test(r)?r.replace("e",".e"):r}function ett(i){return Object.prototype.toString.call(i)==="[object Number]"&&(i%1!==0||ae.isNegativeZero(i))}var dI=new Ce("tag:yaml.org,2002:float",{kind:"scalar",resolve:Q_,construct:q_,predicate:ett,represent:ttt,defaultStyle:"lowercase"}),cI=hI.extend({implicit:[lI,uI,fI,dI]}),pI=cI,vI=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),mI=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function itt(i){return i===null?!1:vI.exec(i)!==null||mI.exec(i)!==null}function rtt(i){var t,r,x,s,g,e,n,p=0,f=null,u,l,a;if(t=vI.exec(i),t===null&&(t=mI.exec(i)),t===null)throw new Error("Date resolve error");if(r=+t[1],x=+t[2]-1,s=+t[3],!t[4])return new Date(Date.UTC(r,x,s));if(g=+t[4],e=+t[5],n=+t[6],t[7]){for(p=t[7].slice(0,3);p.length<3;)p+="0";p=+p}return t[9]&&(u=+t[10],l=+(t[11]||0),f=(u*60+l)*6e4,t[9]==="-"&&(f=-f)),a=new Date(Date.UTC(r,x,s,g,e,n,p)),f&&a.setTime(a.getTime()-f),a}function stt(i){return i.toISOString()}var gI=new Ce("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:itt,construct:rtt,instanceOf:Date,represent:stt});function ntt(i){return i==="<<"||i===null}var xI=new Ce("tag:yaml.org,2002:merge",{kind:"scalar",resolve:ntt}),K0=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function att(i){if(i===null)return!1;var t,r,x=0,s=i.length,g=K0;for(r=0;r<s;r++)if(t=g.indexOf(i.charAt(r)),!(t>64)){if(t<0)return!1;x+=6}return x%8===0}function ott(i){var t,r,x=i.replace(/[\r\n=]/g,""),s=x.length,g=K0,e=0,n=[];for(t=0;t<s;t++)t%4===0&&t&&(n.push(e>>16&255),n.push(e>>8&255),n.push(e&255)),e=e<<6|g.indexOf(x.charAt(t));return r=s%4*6,r===0?(n.push(e>>16&255),n.push(e>>8&255),n.push(e&255)):r===18?(n.push(e>>10&255),n.push(e>>2&255)):r===12&&n.push(e>>4&255),new Uint8Array(n)}function htt(i){var t="",r=0,x,s,g=i.length,e=K0;for(x=0;x<g;x++)x%3===0&&x&&(t+=e[r>>18&63],t+=e[r>>12&63],t+=e[r>>6&63],t+=e[r&63]),r=(r<<8)+i[x];return s=g%3,s===0?(t+=e[r>>18&63],t+=e[r>>12&63],t+=e[r>>6&63],t+=e[r&63]):s===2?(t+=e[r>>10&63],t+=e[r>>4&63],t+=e[r<<2&63],t+=e[64]):s===1&&(t+=e[r>>2&63],t+=e[r<<4&63],t+=e[64],t+=e[64]),t}function ltt(i){return Object.prototype.toString.call(i)==="[object Uint8Array]"}var yI=new Ce("tag:yaml.org,2002:binary",{kind:"scalar",resolve:att,construct:ott,predicate:ltt,represent:htt}),utt=Object.prototype.hasOwnProperty,ftt=Object.prototype.toString;function dtt(i){if(i===null)return!0;var t=[],r,x,s,g,e,n=i;for(r=0,x=n.length;r<x;r+=1){if(s=n[r],e=!1,ftt.call(s)!=="[object Object]")return!1;for(g in s)if(utt.call(s,g))if(!e)e=!0;else return!1;if(!e)return!1;if(t.indexOf(g)===-1)t.push(g);else return!1}return!0}function ctt(i){return i!==null?i:[]}var CI=new Ce("tag:yaml.org,2002:omap",{kind:"sequence",resolve:dtt,construct:ctt}),ptt=Object.prototype.toString;function vtt(i){if(i===null)return!0;var t,r,x,s,g,e=i;for(g=new Array(e.length),t=0,r=e.length;t<r;t+=1){if(x=e[t],ptt.call(x)!=="[object Object]"||(s=Object.keys(x),s.length!==1))return!1;g[t]=[s[0],x[s[0]]]}return!0}function mtt(i){if(i===null)return[];var t,r,x,s,g,e=i;for(g=new Array(e.length),t=0,r=e.length;t<r;t+=1)x=e[t],s=Object.keys(x),g[t]=[s[0],x[s[0]]];return g}var TI=new Ce("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:vtt,construct:mtt}),gtt=Object.prototype.hasOwnProperty;function xtt(i){if(i===null)return!0;var t,r=i;for(t in r)if(gtt.call(r,t)&&r[t]!==null)return!1;return!0}function ytt(i){return i!==null?i:{}}var SI=new Ce("tag:yaml.org,2002:set",{kind:"mapping",resolve:xtt,construct:ytt}),j0=pI.extend({implicit:[gI,xI],explicit:[yI,CI,TI,SI]}),Cs=Object.prototype.hasOwnProperty,Kd=1,PI=2,EI=3,jd=4,Y0=1,Ctt=2,X6=3,Ttt=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Stt=/[\x85\u2028\u2029]/,Ptt=/[,\[\]\{\}]/,MI=/^(?:!|!!|![a-z\-]+!)$/i,AI=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function W6(i){return Object.prototype.toString.call(i)}function yr(i){return i===10||i===13}function sn(i){return i===9||i===32}function Je(i){return i===9||i===32||i===10||i===13}function Ba(i){return i===44||i===91||i===93||i===123||i===125}function Ett(i){var t;return 48<=i&&i<=57?i-48:(t=i|32,97<=t&&t<=102?t-97+10:-1)}function Mtt(i){return i===120?2:i===117?4:i===85?8:0}function Att(i){return 48<=i&&i<=57?i-48:-1}function k6(i){return i===48?"\0":i===97?"\x07":i===98?"\b":i===116||i===9?"	":i===110?`
`:i===118?"\v":i===102?"\f":i===114?"\r":i===101?"\x1B":i===32?" ":i===34?'"':i===47?"/":i===92?"\\":i===78?"\x85":i===95?"\xA0":i===76?"\u2028":i===80?"\u2029":""}function Rtt(i){return i<=65535?String.fromCharCode(i):String.fromCharCode((i-65536>>10)+55296,(i-65536&1023)+56320)}var RI=new Array(256),OI=new Array(256);for(rn=0;rn<256;rn++)RI[rn]=k6(rn)?1:0,OI[rn]=k6(rn);var rn;function Ott(i,t){this.input=i,this.filename=t.filename||null,this.schema=t.schema||j0,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=i.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function wI(i,t){var r={name:i.filename,buffer:i.input.slice(0,-1),position:i.position,line:i.line,column:i.position-i.lineStart};return r.snippet=b_(r),new Ve(t,r)}function ft(i,t){throw wI(i,t)}function Zd(i,t){i.onWarning&&i.onWarning.call(null,wI(i,t))}var H6={YAML:function(t,r,x){var s,g,e;t.version!==null&&ft(t,"duplication of %YAML directive"),x.length!==1&&ft(t,"YAML directive accepts exactly one argument"),s=/^([0-9]+)\.([0-9]+)$/.exec(x[0]),s===null&&ft(t,"ill-formed argument of the YAML directive"),g=parseInt(s[1],10),e=parseInt(s[2],10),g!==1&&ft(t,"unacceptable YAML version of the document"),t.version=x[0],t.checkLineBreaks=e<2,e!==1&&e!==2&&Zd(t,"unsupported YAML version of the document")},TAG:function(t,r,x){var s,g;x.length!==2&&ft(t,"TAG directive accepts exactly two arguments"),s=x[0],g=x[1],MI.test(s)||ft(t,"ill-formed tag handle (first argument) of the TAG directive"),Cs.call(t.tagMap,s)&&ft(t,'there is a previously declared suffix for "'+s+'" tag handle'),AI.test(g)||ft(t,"ill-formed tag prefix (second argument) of the TAG directive");try{g=decodeURIComponent(g)}catch(e){ft(t,"tag prefix is malformed: "+g)}t.tagMap[s]=g}};function ys(i,t,r,x){var s,g,e,n;if(t<r){if(n=i.input.slice(t,r),x)for(s=0,g=n.length;s<g;s+=1)e=n.charCodeAt(s),e===9||32<=e&&e<=1114111||ft(i,"expected valid JSON character");else Ttt.test(n)&&ft(i,"the stream contains non-printable characters");i.result+=n}}function K6(i,t,r,x){var s,g,e,n;for(ae.isObject(r)||ft(i,"cannot merge mappings; the provided source object is unacceptable"),s=Object.keys(r),e=0,n=s.length;e<n;e+=1)g=s[e],Cs.call(t,g)||(t[g]=r[g],x[g]=!0)}function Ga(i,t,r,x,s,g,e,n,p){var f,u;if(Array.isArray(s))for(s=Array.prototype.slice.call(s),f=0,u=s.length;f<u;f+=1)Array.isArray(s[f])&&ft(i,"nested arrays are not supported inside keys"),typeof s=="object"&&W6(s[f])==="[object Object]"&&(s[f]="[object Object]");if(typeof s=="object"&&W6(s)==="[object Object]"&&(s="[object Object]"),s=String(s),t===null&&(t={}),x==="tag:yaml.org,2002:merge")if(Array.isArray(g))for(f=0,u=g.length;f<u;f+=1)K6(i,t,g[f],r);else K6(i,t,g,r);else!i.json&&!Cs.call(r,s)&&Cs.call(t,s)&&(i.line=e||i.line,i.lineStart=n||i.lineStart,i.position=p||i.position,ft(i,"duplicated mapping key")),s==="__proto__"?Object.defineProperty(t,s,{configurable:!0,enumerable:!0,writable:!0,value:g}):t[s]=g,delete r[s];return t}function Z0(i){var t;t=i.input.charCodeAt(i.position),t===10?i.position++:t===13?(i.position++,i.input.charCodeAt(i.position)===10&&i.position++):ft(i,"a line break is expected"),i.line+=1,i.lineStart=i.position,i.firstTabInLine=-1}function Qt(i,t,r){for(var x=0,s=i.input.charCodeAt(i.position);s!==0;){for(;sn(s);)s===9&&i.firstTabInLine===-1&&(i.firstTabInLine=i.position),s=i.input.charCodeAt(++i.position);if(t&&s===35)do s=i.input.charCodeAt(++i.position);while(s!==10&&s!==13&&s!==0);if(yr(s))for(Z0(i),s=i.input.charCodeAt(i.position),x++,i.lineIndent=0;s===32;)i.lineIndent++,s=i.input.charCodeAt(++i.position);else break}return r!==-1&&x!==0&&i.lineIndent<r&&Zd(i,"deficient indentation"),x}function Qd(i){var t=i.position,r;return r=i.input.charCodeAt(t),!!((r===45||r===46)&&r===i.input.charCodeAt(t+1)&&r===i.input.charCodeAt(t+2)&&(t+=3,r=i.input.charCodeAt(t),r===0||Je(r)))}function J0(i,t){t===1?i.result+=" ":t>1&&(i.result+=ae.repeat(`
`,t-1))}function wtt(i,t,r){var x,s,g,e,n,p,f,u,l=i.kind,a=i.result,o;if(o=i.input.charCodeAt(i.position),Je(o)||Ba(o)||o===35||o===38||o===42||o===33||o===124||o===62||o===39||o===34||o===37||o===64||o===96||(o===63||o===45)&&(s=i.input.charCodeAt(i.position+1),Je(s)||r&&Ba(s)))return!1;for(i.kind="scalar",i.result="",g=e=i.position,n=!1;o!==0;){if(o===58){if(s=i.input.charCodeAt(i.position+1),Je(s)||r&&Ba(s))break}else if(o===35){if(x=i.input.charCodeAt(i.position-1),Je(x))break}else{if(i.position===i.lineStart&&Qd(i)||r&&Ba(o))break;if(yr(o))if(p=i.line,f=i.lineStart,u=i.lineIndent,Qt(i,!1,-1),i.lineIndent>=t){n=!0,o=i.input.charCodeAt(i.position);continue}else{i.position=e,i.line=p,i.lineStart=f,i.lineIndent=u;break}}n&&(ys(i,g,e,!1),J0(i,i.line-p),g=e=i.position,n=!1),sn(o)||(e=i.position+1),o=i.input.charCodeAt(++i.position)}return ys(i,g,e,!1),i.result?!0:(i.kind=l,i.result=a,!1)}function Ltt(i,t){var r,x,s;if(r=i.input.charCodeAt(i.position),r!==39)return!1;for(i.kind="scalar",i.result="",i.position++,x=s=i.position;(r=i.input.charCodeAt(i.position))!==0;)if(r===39)if(ys(i,x,i.position,!0),r=i.input.charCodeAt(++i.position),r===39)x=i.position,i.position++,s=i.position;else return!0;else yr(r)?(ys(i,x,s,!0),J0(i,Qt(i,!1,t)),x=s=i.position):i.position===i.lineStart&&Qd(i)?ft(i,"unexpected end of the document within a single quoted scalar"):(i.position++,s=i.position);ft(i,"unexpected end of the stream within a single quoted scalar")}function Ftt(i,t){var r,x,s,g,e,n;if(n=i.input.charCodeAt(i.position),n!==34)return!1;for(i.kind="scalar",i.result="",i.position++,r=x=i.position;(n=i.input.charCodeAt(i.position))!==0;){if(n===34)return ys(i,r,i.position,!0),i.position++,!0;if(n===92){if(ys(i,r,i.position,!0),n=i.input.charCodeAt(++i.position),yr(n))Qt(i,!1,t);else if(n<256&&RI[n])i.result+=OI[n],i.position++;else if((e=Mtt(n))>0){for(s=e,g=0;s>0;s--)n=i.input.charCodeAt(++i.position),(e=Ett(n))>=0?g=(g<<4)+e:ft(i,"expected hexadecimal character");i.result+=Rtt(g),i.position++}else ft(i,"unknown escape sequence");r=x=i.position}else yr(n)?(ys(i,r,x,!0),J0(i,Qt(i,!1,t)),r=x=i.position):i.position===i.lineStart&&Qd(i)?ft(i,"unexpected end of the document within a double quoted scalar"):(i.position++,x=i.position)}ft(i,"unexpected end of the stream within a double quoted scalar")}function btt(i,t){var r=!0,x,s,g,e=i.tag,n,p=i.anchor,f,u,l,a,o,c=Object.create(null),h,d,v,m;if(m=i.input.charCodeAt(i.position),m===91)u=93,o=!1,n=[];else if(m===123)u=125,o=!0,n={};else return!1;for(i.anchor!==null&&(i.anchorMap[i.anchor]=n),m=i.input.charCodeAt(++i.position);m!==0;){if(Qt(i,!0,t),m=i.input.charCodeAt(i.position),m===u)return i.position++,i.tag=e,i.anchor=p,i.kind=o?"mapping":"sequence",i.result=n,!0;r?m===44&&ft(i,"expected the node content, but found ','"):ft(i,"missed comma between flow collection entries"),d=h=v=null,l=a=!1,m===63&&(f=i.input.charCodeAt(i.position+1),Je(f)&&(l=a=!0,i.position++,Qt(i,!0,t))),x=i.line,s=i.lineStart,g=i.position,Na(i,t,Kd,!1,!0),d=i.tag,h=i.result,Qt(i,!0,t),m=i.input.charCodeAt(i.position),(a||i.line===x)&&m===58&&(l=!0,m=i.input.charCodeAt(++i.position),Qt(i,!0,t),Na(i,t,Kd,!1,!0),v=i.result),o?Ga(i,n,c,d,h,v,x,s,g):l?n.push(Ga(i,null,c,d,h,v,x,s,g)):n.push(h),Qt(i,!0,t),m=i.input.charCodeAt(i.position),m===44?(r=!0,m=i.input.charCodeAt(++i.position)):r=!1}ft(i,"unexpected end of the stream within a flow collection")}function Dtt(i,t){var r,x,s=Y0,g=!1,e=!1,n=t,p=0,f=!1,u,l;if(l=i.input.charCodeAt(i.position),l===124)x=!1;else if(l===62)x=!0;else return!1;for(i.kind="scalar",i.result="";l!==0;)if(l=i.input.charCodeAt(++i.position),l===43||l===45)Y0===s?s=l===43?X6:Ctt:ft(i,"repeat of a chomping mode identifier");else if((u=Att(l))>=0)u===0?ft(i,"bad explicit indentation width of a block scalar; it cannot be less than one"):e?ft(i,"repeat of an indentation width identifier"):(n=t+u-1,e=!0);else break;if(sn(l)){do l=i.input.charCodeAt(++i.position);while(sn(l));if(l===35)do l=i.input.charCodeAt(++i.position);while(!yr(l)&&l!==0)}for(;l!==0;){for(Z0(i),i.lineIndent=0,l=i.input.charCodeAt(i.position);(!e||i.lineIndent<n)&&l===32;)i.lineIndent++,l=i.input.charCodeAt(++i.position);if(!e&&i.lineIndent>n&&(n=i.lineIndent),yr(l)){p++;continue}if(i.lineIndent<n){s===X6?i.result+=ae.repeat(`
`,g?1+p:p):s===Y0&&g&&(i.result+=`
`);break}for(x?sn(l)?(f=!0,i.result+=ae.repeat(`
`,g?1+p:p)):f?(f=!1,i.result+=ae.repeat(`
`,p+1)):p===0?g&&(i.result+=" "):i.result+=ae.repeat(`
`,p):i.result+=ae.repeat(`
`,g?1+p:p),g=!0,e=!0,p=0,r=i.position;!yr(l)&&l!==0;)l=i.input.charCodeAt(++i.position);ys(i,r,i.position,!1)}return!0}function j6(i,t){var r,x=i.tag,s=i.anchor,g=[],e,n=!1,p;if(i.firstTabInLine!==-1)return!1;for(i.anchor!==null&&(i.anchorMap[i.anchor]=g),p=i.input.charCodeAt(i.position);p!==0&&(i.firstTabInLine!==-1&&(i.position=i.firstTabInLine,ft(i,"tab characters must not be used in indentation")),!(p!==45||(e=i.input.charCodeAt(i.position+1),!Je(e))));){if(n=!0,i.position++,Qt(i,!0,-1)&&i.lineIndent<=t){g.push(null),p=i.input.charCodeAt(i.position);continue}if(r=i.line,Na(i,t,EI,!1,!0),g.push(i.result),Qt(i,!0,-1),p=i.input.charCodeAt(i.position),(i.line===r||i.lineIndent>t)&&p!==0)ft(i,"bad indentation of a sequence entry");else if(i.lineIndent<t)break}return n?(i.tag=x,i.anchor=s,i.kind="sequence",i.result=g,!0):!1}function Itt(i,t,r){var x,s,g,e,n,p,f=i.tag,u=i.anchor,l={},a=Object.create(null),o=null,c=null,h=null,d=!1,v=!1,m;if(i.firstTabInLine!==-1)return!1;for(i.anchor!==null&&(i.anchorMap[i.anchor]=l),m=i.input.charCodeAt(i.position);m!==0;){if(!d&&i.firstTabInLine!==-1&&(i.position=i.firstTabInLine,ft(i,"tab characters must not be used in indentation")),x=i.input.charCodeAt(i.position+1),g=i.line,(m===63||m===58)&&Je(x))m===63?(d&&(Ga(i,l,a,o,c,null,e,n,p),o=c=h=null),v=!0,d=!0,s=!0):d?(d=!1,s=!0):ft(i,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),i.position+=1,m=x;else{if(e=i.line,n=i.lineStart,p=i.position,!Na(i,r,PI,!1,!0))break;if(i.line===g){for(m=i.input.charCodeAt(i.position);sn(m);)m=i.input.charCodeAt(++i.position);if(m===58)m=i.input.charCodeAt(++i.position),Je(m)||ft(i,"a whitespace character is expected after the key-value separator within a block mapping"),d&&(Ga(i,l,a,o,c,null,e,n,p),o=c=h=null),v=!0,d=!1,s=!1,o=i.tag,c=i.result;else if(v)ft(i,"can not read an implicit mapping pair; a colon is missed");else return i.tag=f,i.anchor=u,!0}else if(v)ft(i,"can not read a block mapping entry; a multiline key may not be an implicit key");else return i.tag=f,i.anchor=u,!0}if((i.line===g||i.lineIndent>t)&&(d&&(e=i.line,n=i.lineStart,p=i.position),Na(i,t,jd,!0,s)&&(d?c=i.result:h=i.result),d||(Ga(i,l,a,o,c,h,e,n,p),o=c=h=null),Qt(i,!0,-1),m=i.input.charCodeAt(i.position)),(i.line===g||i.lineIndent>t)&&m!==0)ft(i,"bad indentation of a mapping entry");else if(i.lineIndent<t)break}return d&&Ga(i,l,a,o,c,null,e,n,p),v&&(i.tag=f,i.anchor=u,i.kind="mapping",i.result=l),v}function Btt(i){var t,r=!1,x=!1,s,g,e;if(e=i.input.charCodeAt(i.position),e!==33)return!1;if(i.tag!==null&&ft(i,"duplication of a tag property"),e=i.input.charCodeAt(++i.position),e===60?(r=!0,e=i.input.charCodeAt(++i.position)):e===33?(x=!0,s="!!",e=i.input.charCodeAt(++i.position)):s="!",t=i.position,r){do e=i.input.charCodeAt(++i.position);while(e!==0&&e!==62);i.position<i.length?(g=i.input.slice(t,i.position),e=i.input.charCodeAt(++i.position)):ft(i,"unexpected end of the stream within a verbatim tag")}else{for(;e!==0&&!Je(e);)e===33&&(x?ft(i,"tag suffix cannot contain exclamation marks"):(s=i.input.slice(t-1,i.position+1),MI.test(s)||ft(i,"named tag handle cannot contain such characters"),x=!0,t=i.position+1)),e=i.input.charCodeAt(++i.position);g=i.input.slice(t,i.position),Ptt.test(g)&&ft(i,"tag suffix cannot contain flow indicator characters")}g&&!AI.test(g)&&ft(i,"tag name cannot contain such characters: "+g);try{g=decodeURIComponent(g)}catch(n){ft(i,"tag name is malformed: "+g)}return r?i.tag=g:Cs.call(i.tagMap,s)?i.tag=i.tagMap[s]+g:s==="!"?i.tag="!"+g:s==="!!"?i.tag="tag:yaml.org,2002:"+g:ft(i,'undeclared tag handle "'+s+'"'),!0}function Gtt(i){var t,r;if(r=i.input.charCodeAt(i.position),r!==38)return!1;for(i.anchor!==null&&ft(i,"duplication of an anchor property"),r=i.input.charCodeAt(++i.position),t=i.position;r!==0&&!Je(r)&&!Ba(r);)r=i.input.charCodeAt(++i.position);return i.position===t&&ft(i,"name of an anchor node must contain at least one character"),i.anchor=i.input.slice(t,i.position),!0}function Ntt(i){var t,r,x;if(x=i.input.charCodeAt(i.position),x!==42)return!1;for(x=i.input.charCodeAt(++i.position),t=i.position;x!==0&&!Je(x)&&!Ba(x);)x=i.input.charCodeAt(++i.position);return i.position===t&&ft(i,"name of an alias node must contain at least one character"),r=i.input.slice(t,i.position),Cs.call(i.anchorMap,r)||ft(i,'unidentified alias "'+r+'"'),i.result=i.anchorMap[r],Qt(i,!0,-1),!0}function Na(i,t,r,x,s){var g,e,n,p=1,f=!1,u=!1,l,a,o,c,h,d;if(i.listener!==null&&i.listener("open",i),i.tag=null,i.anchor=null,i.kind=null,i.result=null,g=e=n=jd===r||EI===r,x&&Qt(i,!0,-1)&&(f=!0,i.lineIndent>t?p=1:i.lineIndent===t?p=0:i.lineIndent<t&&(p=-1)),p===1)for(;Btt(i)||Gtt(i);)Qt(i,!0,-1)?(f=!0,n=g,i.lineIndent>t?p=1:i.lineIndent===t?p=0:i.lineIndent<t&&(p=-1)):n=!1;if(n&&(n=f||s),(p===1||jd===r)&&(Kd===r||PI===r?h=t:h=t+1,d=i.position-i.lineStart,p===1?n&&(j6(i,d)||Itt(i,d,h))||btt(i,h)?u=!0:(e&&Dtt(i,h)||Ltt(i,h)||Ftt(i,h)?u=!0:Ntt(i)?(u=!0,(i.tag!==null||i.anchor!==null)&&ft(i,"alias node should not have any properties")):wtt(i,h,Kd===r)&&(u=!0,i.tag===null&&(i.tag="?")),i.anchor!==null&&(i.anchorMap[i.anchor]=i.result)):p===0&&(u=n&&j6(i,d))),i.tag===null)i.anchor!==null&&(i.anchorMap[i.anchor]=i.result);else if(i.tag==="?"){for(i.result!==null&&i.kind!=="scalar"&&ft(i,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+i.kind+'"'),l=0,a=i.implicitTypes.length;l<a;l+=1)if(c=i.implicitTypes[l],c.resolve(i.result)){i.result=c.construct(i.result),i.tag=c.tag,i.anchor!==null&&(i.anchorMap[i.anchor]=i.result);break}}else if(i.tag!=="!"){if(Cs.call(i.typeMap[i.kind||"fallback"],i.tag))c=i.typeMap[i.kind||"fallback"][i.tag];else for(c=null,o=i.typeMap.multi[i.kind||"fallback"],l=0,a=o.length;l<a;l+=1)if(i.tag.slice(0,o[l].tag.length)===o[l].tag){c=o[l];break}c||ft(i,"unknown tag !<"+i.tag+">"),i.result!==null&&c.kind!==i.kind&&ft(i,"unacceptable node kind for !<"+i.tag+'> tag; it should be "'+c.kind+'", not "'+i.kind+'"'),c.resolve(i.result,i.tag)?(i.result=c.construct(i.result,i.tag),i.anchor!==null&&(i.anchorMap[i.anchor]=i.result)):ft(i,"cannot resolve a node with !<"+i.tag+"> explicit tag")}return i.listener!==null&&i.listener("close",i),i.tag!==null||i.anchor!==null||u}function Vtt(i){var t=i.position,r,x,s,g=!1,e;for(i.version=null,i.checkLineBreaks=i.legacy,i.tagMap=Object.create(null),i.anchorMap=Object.create(null);(e=i.input.charCodeAt(i.position))!==0&&(Qt(i,!0,-1),e=i.input.charCodeAt(i.position),!(i.lineIndent>0||e!==37));){for(g=!0,e=i.input.charCodeAt(++i.position),r=i.position;e!==0&&!Je(e);)e=i.input.charCodeAt(++i.position);for(x=i.input.slice(r,i.position),s=[],x.length<1&&ft(i,"directive name must not be less than one character in length");e!==0;){for(;sn(e);)e=i.input.charCodeAt(++i.position);if(e===35){do e=i.input.charCodeAt(++i.position);while(e!==0&&!yr(e));break}if(yr(e))break;for(r=i.position;e!==0&&!Je(e);)e=i.input.charCodeAt(++i.position);s.push(i.input.slice(r,i.position))}e!==0&&Z0(i),Cs.call(H6,x)?H6[x](i,x,s):Zd(i,'unknown document directive "'+x+'"')}if(Qt(i,!0,-1),i.lineIndent===0&&i.input.charCodeAt(i.position)===45&&i.input.charCodeAt(i.position+1)===45&&i.input.charCodeAt(i.position+2)===45?(i.position+=3,Qt(i,!0,-1)):g&&ft(i,"directives end mark is expected"),Na(i,i.lineIndent-1,jd,!1,!0),Qt(i,!0,-1),i.checkLineBreaks&&Stt.test(i.input.slice(t,i.position))&&Zd(i,"non-ASCII line breaks are interpreted as content"),i.documents.push(i.result),i.position===i.lineStart&&Qd(i)){i.input.charCodeAt(i.position)===46&&(i.position+=3,Qt(i,!0,-1));return}if(i.position<i.length-1)ft(i,"end of the stream or a document separator is expected");else return}function LI(i,t){i=String(i),t=t||{},i.length!==0&&(i.charCodeAt(i.length-1)!==10&&i.charCodeAt(i.length-1)!==13&&(i+=`
`),i.charCodeAt(0)===65279&&(i=i.slice(1)));var r=new Ott(i,t),x=i.indexOf("\0");for(x!==-1&&(r.position=x,ft(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)Vtt(r);return r.documents}function ztt(i,t,r){t!==null&&typeof t=="object"&&typeof r=="undefined"&&(r=t,t=null);var x=LI(i,r);if(typeof t!="function")return x;for(var s=0,g=x.length;s<g;s+=1)t(x[s])}function Ytt(i,t){var r=LI(i,t);if(r.length!==0){if(r.length===1)return r[0];throw new Ve("expected a single document in the stream, but found more")}}var Utt=ztt,Xtt=Ytt,FI={loadAll:Utt,load:Xtt},bI=Object.prototype.toString,DI=Object.prototype.hasOwnProperty,$0=65279,Wtt=9,gh=10,ktt=13,Htt=32,Ktt=33,jtt=34,X0=35,Ztt=37,Jtt=38,$tt=39,Qtt=42,II=44,qtt=45,Jd=58,_tt=61,tet=62,eet=63,iet=64,BI=91,GI=93,ret=96,NI=123,set=124,VI=125,Re={};Re[0]="\\0";Re[7]="\\a";Re[8]="\\b";Re[9]="\\t";Re[10]="\\n";Re[11]="\\v";Re[12]="\\f";Re[13]="\\r";Re[27]="\\e";Re[34]='\\"';Re[92]="\\\\";Re[133]="\\N";Re[160]="\\_";Re[8232]="\\L";Re[8233]="\\P";var net=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],aet=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function oet(i,t){var r,x,s,g,e,n,p;if(t===null)return{};for(r={},x=Object.keys(t),s=0,g=x.length;s<g;s+=1)e=x[s],n=String(t[e]),e.slice(0,2)==="!!"&&(e="tag:yaml.org,2002:"+e.slice(2)),p=i.compiledTypeMap.fallback[e],p&&DI.call(p.styleAliases,n)&&(n=p.styleAliases[n]),r[e]=n;return r}function het(i){var t,r,x;if(t=i.toString(16).toUpperCase(),i<=255)r="x",x=2;else if(i<=65535)r="u",x=4;else if(i<=4294967295)r="U",x=8;else throw new Ve("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+ae.repeat("0",x-t.length)+t}var uet=1,xh=2;function fet(i){this.schema=i.schema||j0,this.indent=Math.max(1,i.indent||2),this.noArrayIndent=i.noArrayIndent||!1,this.skipInvalid=i.skipInvalid||!1,this.flowLevel=ae.isNothing(i.flowLevel)?-1:i.flowLevel,this.styleMap=oet(this.schema,i.styles||null),this.sortKeys=i.sortKeys||!1,this.lineWidth=i.lineWidth||80,this.noRefs=i.noRefs||!1,this.noCompatMode=i.noCompatMode||!1,this.condenseFlow=i.condenseFlow||!1,this.quotingType=i.quotingType==='"'?xh:uet,this.forceQuotes=i.forceQuotes||!1,this.replacer=typeof i.replacer=="function"?i.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Z6(i,t){for(var r=ae.repeat(" ",t),x=0,s=-1,g="",e,n=i.length;x<n;)s=i.indexOf(`
`,x),s===-1?(e=i.slice(x),x=n):(e=i.slice(x,s+1),x=s+1),e.length&&e!==`
`&&(g+=r),g+=e;return g}function W0(i,t){return`
`+ae.repeat(" ",i.indent*t)}function det(i,t){var r,x,s;for(r=0,x=i.implicitTypes.length;r<x;r+=1)if(s=i.implicitTypes[r],s.resolve(t))return!0;return!1}function $d(i){return i===Htt||i===Wtt}function yh(i){return 32<=i&&i<=126||161<=i&&i<=55295&&i!==8232&&i!==8233||57344<=i&&i<=65533&&i!==$0||65536<=i&&i<=1114111}function J6(i){return yh(i)&&i!==$0&&i!==ktt&&i!==gh}function $6(i,t,r){var x=J6(i),s=x&&!$d(i);return(r?x:x&&i!==II&&i!==BI&&i!==GI&&i!==NI&&i!==VI)&&i!==X0&&!(t===Jd&&!s)||J6(t)&&!$d(t)&&i===X0||t===Jd&&s}function cet(i){return yh(i)&&i!==$0&&!$d(i)&&i!==qtt&&i!==eet&&i!==Jd&&i!==II&&i!==BI&&i!==GI&&i!==NI&&i!==VI&&i!==X0&&i!==Jtt&&i!==Qtt&&i!==Ktt&&i!==set&&i!==_tt&&i!==tet&&i!==$tt&&i!==jtt&&i!==Ztt&&i!==iet&&i!==ret}function pet(i){return!$d(i)&&i!==Jd}function vh(i,t){var r=i.charCodeAt(t),x;return r>=55296&&r<=56319&&t+1<i.length&&(x=i.charCodeAt(t+1),x>=56320&&x<=57343)?(r-55296)*1024+x-56320+65536:r}function zI(i){var t=/^\n* /;return t.test(i)}var YI=1,k0=2,UI=3,XI=4,Ia=5;function vet(i,t,r,x,s,g,e,n){var p,f=0,u=null,l=!1,a=!1,o=x!==-1,c=-1,h=cet(vh(i,0))&&pet(vh(i,i.length-1));if(t||e)for(p=0;p<i.length;f>=65536?p+=2:p++){if(f=vh(i,p),!yh(f))return Ia;h=h&&$6(f,u,n),u=f}else{for(p=0;p<i.length;f>=65536?p+=2:p++){if(f=vh(i,p),f===gh)l=!0,o&&(a=a||p-c-1>x&&i[c+1]!==" ",c=p);else if(!yh(f))return Ia;h=h&&$6(f,u,n),u=f}a=a||o&&p-c-1>x&&i[c+1]!==" "}return!l&&!a?h&&!e&&!s(i)?YI:g===xh?Ia:k0:r>9&&zI(i)?Ia:e?g===xh?Ia:k0:a?XI:UI}function met(i,t,r,x,s){i.dump=function(){if(t.length===0)return i.quotingType===xh?'""':"''";if(!i.noCompatMode&&(net.indexOf(t)!==-1||aet.test(t)))return i.quotingType===xh?'"'+t+'"':"'"+t+"'";var g=i.indent*Math.max(1,r),e=i.lineWidth===-1?-1:Math.max(Math.min(i.lineWidth,40),i.lineWidth-g),n=x||i.flowLevel>-1&&r>=i.flowLevel;function p(f){return det(i,f)}switch(vet(t,n,i.indent,e,p,i.quotingType,i.forceQuotes&&!x,s)){case YI:return t;case k0:return"'"+t.replace(/'/g,"''")+"'";case UI:return"|"+Q6(t,i.indent)+q6(Z6(t,g));case XI:return">"+Q6(t,i.indent)+q6(Z6(get(t,e),g));case Ia:return'"'+xet(t)+'"';default:throw new Ve("impossible error: invalid scalar style")}}()}function Q6(i,t){var r=zI(i)?String(t):"",x=i[i.length-1]===`
`,s=x&&(i[i.length-2]===`
`||i===`
`),g=s?"+":x?"":"-";return r+g+`
`}function q6(i){return i[i.length-1]===`
`?i.slice(0,-1):i}function get(i,t){for(var r=/(\n+)([^\n]*)/g,x=function(){var f=i.indexOf(`
`);return f=f!==-1?f:i.length,r.lastIndex=f,_6(i.slice(0,f),t)}(),s=i[0]===`
`||i[0]===" ",g,e;e=r.exec(i);){var n=e[1],p=e[2];g=p[0]===" ",x+=n+(!s&&!g&&p!==""?`
`:"")+_6(p,t),s=g}return x}function _6(i,t){if(i===""||i[0]===" ")return i;for(var r=/ [^ ]/g,x,s=0,g,e=0,n=0,p="";x=r.exec(i);)n=x.index,n-s>t&&(g=e>s?e:n,p+=`
`+i.slice(s,g),s=g+1),e=n;return p+=`
`,i.length-s>t&&e>s?p+=i.slice(s,e)+`
`+i.slice(e+1):p+=i.slice(s),p.slice(1)}function xet(i){for(var t="",r=0,x,s=0;s<i.length;r>=65536?s+=2:s++)r=vh(i,s),x=Re[r],!x&&yh(r)?(t+=i[s],r>=65536&&(t+=i[s+1])):t+=x||het(r);return t}function yet(i,t,r){var x="",s=i.tag,g,e,n;for(g=0,e=r.length;g<e;g+=1)n=r[g],i.replacer&&(n=i.replacer.call(r,String(g),n)),(Br(i,t,n,!1,!1)||typeof n=="undefined"&&Br(i,t,null,!1,!1))&&(x!==""&&(x+=","+(i.condenseFlow?"":" ")),x+=i.dump);i.tag=s,i.dump="["+x+"]"}function tI(i,t,r,x){var s="",g=i.tag,e,n,p;for(e=0,n=r.length;e<n;e+=1)p=r[e],i.replacer&&(p=i.replacer.call(r,String(e),p)),(Br(i,t+1,p,!0,!0,!1,!0)||typeof p=="undefined"&&Br(i,t+1,null,!0,!0,!1,!0))&&((!x||s!=="")&&(s+=W0(i,t)),i.dump&&gh===i.dump.charCodeAt(0)?s+="-":s+="- ",s+=i.dump);i.tag=g,i.dump=s||"[]"}function Cet(i,t,r){var x="",s=i.tag,g=Object.keys(r),e,n,p,f,u;for(e=0,n=g.length;e<n;e+=1)u="",x!==""&&(u+=", "),i.condenseFlow&&(u+='"'),p=g[e],f=r[p],i.replacer&&(f=i.replacer.call(r,p,f)),Br(i,t,p,!1,!1)&&(i.dump.length>1024&&(u+="? "),u+=i.dump+(i.condenseFlow?'"':"")+":"+(i.condenseFlow?"":" "),Br(i,t,f,!1,!1)&&(u+=i.dump,x+=u));i.tag=s,i.dump="{"+x+"}"}function Tet(i,t,r,x){var s="",g=i.tag,e=Object.keys(r),n,p,f,u,l,a;if(i.sortKeys===!0)e.sort();else if(typeof i.sortKeys=="function")e.sort(i.sortKeys);else if(i.sortKeys)throw new Ve("sortKeys must be a boolean or a function");for(n=0,p=e.length;n<p;n+=1)a="",(!x||s!=="")&&(a+=W0(i,t)),f=e[n],u=r[f],i.replacer&&(u=i.replacer.call(r,f,u)),Br(i,t+1,f,!0,!0,!0)&&(l=i.tag!==null&&i.tag!=="?"||i.dump&&i.dump.length>1024,l&&(i.dump&&gh===i.dump.charCodeAt(0)?a+="?":a+="? "),a+=i.dump,l&&(a+=W0(i,t)),Br(i,t+1,u,!0,l)&&(i.dump&&gh===i.dump.charCodeAt(0)?a+=":":a+=": ",a+=i.dump,s+=a));i.tag=g,i.dump=s||"{}"}function eI(i,t,r){var x,s,g,e,n,p;for(s=r?i.explicitTypes:i.implicitTypes,g=0,e=s.length;g<e;g+=1)if(n=s[g],(n.instanceOf||n.predicate)&&(!n.instanceOf||typeof t=="object"&&t instanceof n.instanceOf)&&(!n.predicate||n.predicate(t))){if(r?n.multi&&n.representName?i.tag=n.representName(t):i.tag=n.tag:i.tag="?",n.represent){if(p=i.styleMap[n.tag]||n.defaultStyle,bI.call(n.represent)==="[object Function]")x=n.represent(t,p);else if(DI.call(n.represent,p))x=n.represent[p](t,p);else throw new Ve("!<"+n.tag+'> tag resolver accepts not "'+p+'" style');i.dump=x}return!0}return!1}function Br(i,t,r,x,s,g,e){i.tag=null,i.dump=r,eI(i,r,!1)||eI(i,r,!0);var n=bI.call(i.dump),p=x,f;x&&(x=i.flowLevel<0||i.flowLevel>t);var u=n==="[object Object]"||n==="[object Array]",l,a;if(u&&(l=i.duplicates.indexOf(r),a=l!==-1),(i.tag!==null&&i.tag!=="?"||a||i.indent!==2&&t>0)&&(s=!1),a&&i.usedDuplicates[l])i.dump="*ref_"+l;else{if(u&&a&&!i.usedDuplicates[l]&&(i.usedDuplicates[l]=!0),n==="[object Object]")x&&Object.keys(i.dump).length!==0?(Tet(i,t,i.dump,s),a&&(i.dump="&ref_"+l+i.dump)):(Cet(i,t,i.dump),a&&(i.dump="&ref_"+l+" "+i.dump));else if(n==="[object Array]")x&&i.dump.length!==0?(i.noArrayIndent&&!e&&t>0?tI(i,t-1,i.dump,s):tI(i,t,i.dump,s),a&&(i.dump="&ref_"+l+i.dump)):(yet(i,t,i.dump),a&&(i.dump="&ref_"+l+" "+i.dump));else if(n==="[object String]")i.tag!=="?"&&met(i,i.dump,t,g,p);else{if(n==="[object Undefined]")return!1;if(i.skipInvalid)return!1;throw new Ve("unacceptable kind of an object to dump "+n)}i.tag!==null&&i.tag!=="?"&&(f=encodeURI(i.tag[0]==="!"?i.tag.slice(1):i.tag).replace(/!/g,"%21"),i.tag[0]==="!"?f="!"+f:f.slice(0,18)==="tag:yaml.org,2002:"?f="!!"+f.slice(18):f="!<"+f+">",i.dump=f+" "+i.dump)}return!0}function Set(i,t){var r=[],x=[],s,g;for(H0(i,r,x),s=0,g=x.length;s<g;s+=1)t.duplicates.push(r[x[s]]);t.usedDuplicates=new Array(g)}function H0(i,t,r){var x,s,g;if(i!==null&&typeof i=="object")if(s=t.indexOf(i),s!==-1)r.indexOf(s)===-1&&r.push(s);else if(t.push(i),Array.isArray(i))for(s=0,g=i.length;s<g;s+=1)H0(i[s],t,r);else for(x=Object.keys(i),s=0,g=x.length;s<g;s+=1)H0(i[x[s]],t,r)}function Pet(i,t){t=t||{};var r=new fet(t);r.noRefs||Set(i,r);var x=i;return r.replacer&&(x=r.replacer.call({"":x},"",x)),Br(r,0,x,!0,!0)?r.dump+`
`:""}var Eet=Pet,Met={dump:Eet};function Q0(i,t){return function(){throw new Error("Function yaml."+i+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var Aet=Ce,Ret=sI,Oet=hI,wet=cI,Let=pI,Fet=j0,bet=FI.load,Det=FI.loadAll,Iet=Met.dump,Bet=Ve,Get={binary:yI,float:dI,map:oI,null:lI,pairs:TI,set:SI,timestamp:gI,bool:uI,int:fI,merge:xI,omap:CI,seq:aI,str:nI},Net=Q0("safeLoad","load"),Vet=Q0("safeLoadAll","loadAll"),zet=Q0("safeDump","dump"),Yet={Type:Aet,Schema:Ret,FAILSAFE_SCHEMA:Oet,JSON_SCHEMA:wet,CORE_SCHEMA:Let,DEFAULT_SCHEMA:Fet,load:bet,loadAll:Det,dump:Iet,YAMLException:Bet,types:Get,safeLoad:Net,safeLoadAll:Vet,safeDump:zet},WI=Yet;var kI=WI;var Uet=function(i){if(typeof i=="string")try{return kI.load(i)}catch(t){console.log(t);return}return i},nn=Uet;var Xet=function(i,t){if(i.hasOwnProperty("$type"))return i.$type;if(i.hasOwnProperty("name")){var r=t[`#${i.name}`];if(r&&r.hasOwnProperty("$type"))return r.$type}if(i.hasOwnProperty("$class"))for(var x=i.$class.split(" "),s=0,g=x.length;s<g;s++){var r=t[`.${x[s]}`];if(r&&r.hasOwnProperty("$type"))return r.$type}},HI=Xet;var KI=function(i,t){if(t===void 0)return i;for(var r in t)if(!i.hasOwnProperty(r))i[r]=wt(t[r]);else{var x=i[r];x&&typeof x=="object"&&KI(x,t[r])}return i},qd=KI;var Wet=function(i,t){if(t===void 0)return i;if(i.hasOwnProperty("name")&&qd(i,t[`#${i.name}`]),i.hasOwnProperty("$class"))for(var r=i.$class.split(" "),x=0,s=r.length;x<s;x++)qd(i,t[`.${r[x]}`]);return i.hasOwnProperty("$type")&&qd(i,t[i.$type]),i},pt=Wet;var jI=["tint","alpha","visible","flipX","flipY"],ket=function(i,t){for(var r=0,x=jI.length;r<x;r++){var s=jI[r],g=t[s];g!==void 0&&(i[s]=g)}return t.cropResize&&!i.resize&&(i.resize=function(e,n){return i.setCrop(0,0,e,n),i}),i},$e=ket;var Het=function(i,t,r,x,s,g){t=pt(t,x);var e=new g(i,0,0,t.key,t.frame);return t.width!==void 0&&e.setDisplayWidth(t.width),t.height!==void 0&&e.setDisplayHeight(t.height),$e(e,t),i.add.existing(e),e},_d=Het;var Ket=Phaser.GameObjects.Image,jet=function(i,t,r,x,s){return _d(i,t,r,x,s,Ket)},ZI=jet;var Zet=Phaser.GameObjects.Sprite,Jet=function(i,t,r,x,s){return _d(i,t,r,x,s,Zet)},JI=Jet;var $et=Phaser.GameObjects.Video,Qet=function(i,t,r,x,s){t=pt(t,x);var g=new $et(i,0,0,t.key);return t.width!==void 0&&g.setDisplayWidth(t.width),t.height!==void 0&&g.setDisplayHeight(t.height),$e(g,t),i.add.existing(g),g},$I=Qet;var qet=Phaser.GameObjects.Text,_et=function(i,t,r,x,s){t=pt(t,x);var g=new qet(i,0,0,t.text,t);return $e(g,t),i.add.existing(g),g},QI=_et;var tit=function(i,t,r,x,s){t=pt(t,x);var g=new Os(i,0,0,t.text,t);return $e(g,t),i.add.existing(g),g},qI=tit;var eit=function(i,t,r,x,s){t=pt(t,x);var g=new Le(i,t);return i.add.existing(g),g},_I=eit;var iit=function(i,t,r,x,s){t=pt(t,x);var g=new Ja(i,t);return $e(g,t),i.add.existing(g),g},tB=iit;var rit=function(i,t,r,x,s){t=pt(t,x);var g=new Qa(i,t);return i.add.existing(g),g},eB=rit;var sit=function(i,t,r,x,s){t=pt(t,x);var g=t.width||1,e=t.height||1,n=new bi(i,0,0,g,e);return t.fill!==void 0&&n.fill(t.fill),$e(n,t),i.add.existing(n),n},iB=sit;var nit=function(i,t,r,x,s){t=pt(t,x);var g=new Co(i,0,0,t.key,t.frame,t);return t.width!==void 0&&g.setDisplayWidth(t.width),t.height!==void 0&&g.setDisplayHeight(t.height),$e(g,t),i.add.existing(g),g},rB=nit;var ait=function(i,t,r,x,s){var g=new Hs(i);return g},sB=ait;var oit=function(i,t,r,x,s,g){var e=t[r];if(!!e){var n;return n=Yi(i,e,x,s,g),t[r]=n,n}},nt=oit;var hit=function(i,t,r,x,s){if(t){Array.isArray(t)||(t=[t]);for(var g=0,e=t.length;g<e;g++){var n=t[g];n.$child||(n={$child:n},t[g]=n),nt(i,n,"$child",r,x,s)}}return t},q0=hit;var lit=function(i,t,r,x,s,g){t=pt(t,x);var e=q0(i,t.background,r,x,s),n=q0(i,t.children,r,x,s),p=new g(i,t);if(i.add.existing(p),e)for(var f=0,u=e.length;f<u;f++){var l=e[f];p.addBackground(l.$child,l.padding)}if(n)for(var f=0,u=n.length;f<u;f++){var l=n[f];p.add(l.$child,l)}return p},Cr=lit;var uit=function(i,t,r,x,s){return Cr(i,t,r,x,s,lt)},nB=uit;var fit=function(i,t,r,x,s){return Cr(i,t,r,x,s,Ei)},aB=fit;var dit=function(i,t,r,x,s){var g=t.createCellContainerCallback;if(g){var e=g.$child;delete g.$child,t.createCellContainerCallback=function(n,p,f,u){var l=Yi(n,e,r,x,s);for(var a in g)u[a]=g[a];return l}}return Cr(i,t,r,x,s,Ke)},oB=dit;var cit=function(i,t,r,x,s){return Cr(i,t,r,x,s,Nt)},hB=cit;var lB=function(i,t,r,x,s,g){var e=t[r];if(!!e){if(Array.isArray(e))for(var n=0,p=e.length;n<p;n++)Array.isArray(e[n])?lB(i,e,n,x,s,g):nt(i,e,n,x,s,g);else for(var f in e)nt(i,e,f,x,s,g);return e}},Ui=lB;var pit=function(i,t,r,x,s){t=pt(t,x),nt(i,t,"background",r,x,s),Ui(i,t,"buttons",r,x,s);var g=new bt(i,t);return i.add.existing(g),g},uB=pit;var vit=function(i,t,r,x,s){t=pt(t,x),nt(i,t,"background",r,x,s),Ui(i,t,"buttons",r,x,s);var g=new Mi(i,t);return i.add.existing(g),g},fB=vit;var mit=function(i,t,r,x,s){t=pt(t,x),nt(i,t,"background",r,x,s);var g=t.buttons;if(g)for(var e=0,n=g.length;e<n;e++)Ui(i,g,e,r,x,s);var p=t.createCellContainerCallback;if(p){var f=p.$child;delete p.$child,t.createCellContainerCallback=function(l,a,o,c){var h=Yi(l,f,r,x,s);for(var d in p)c[d]=p[d];return h}}var u=new js(i,t);return i.add.existing(u),u},dB=mit;var git=function(i,t,r,x,s,g){t=pt(t,x),nt(i,t,"background",r,x,s),nt(i,t,"icon",r,x,s),nt(i,t,"text",r,x,s),nt(i,t,"action",r,x,s);var e=new g(i,t);return i.add.existing(e),e},Va=git;var xit=function(i,t,r,x,s){return Va(i,t,r,x,s,xe)},cB=xit;var yit=function(i,t,r,x,s){t=pt(t,x),nt(i,t,"background",r,x,s),nt(i,t,"main",r,x,s),nt(i,t,"leftTop",r,x,s),nt(i,t,"centerTop",r,x,s),nt(i,t,"rightTop",r,x,s),nt(i,t,"leftCenter",r,x,s),nt(i,t,"center",r,x,s),nt(i,t,"rightCenter",r,x,s),nt(i,t,"leftBottom",r,x,s),nt(i,t,"centerBottom",r,x,s),nt(i,t,"rightBottom",r,x,s);var g=new eh(i,t);return i.add.existing(g),g},pB=yit;var Cit=function(i,t,r,x,s){t=pt(t,x),nt(i,t,"background",r,x,s),nt(i,t,"toolbarBackground",r,x,s),nt(i,t,"leftToolbarBackground",r,x,s),nt(i,t,"choicesBackground",r,x,s),nt(i,t,"actionsBackground",r,x,s),nt(i,t,"title",r,x,s),Ui(i,t,"toolbar",r,x,s),Ui(i,t,"leftToolbar",r,x,s),nt(i,t,"content",r,x,s),nt(i,t,"description",r,x,s),Ui(i,t,"choices",r,x,s),Ui(i,t,"actions",r,x,s);var g=new Zs(i,t);return i.add.existing(g),g},vB=Cit;var Tit=function(i,t,r,x,s){return Va(i,t,r,x,s,_o)},mB=Tit;var Sit=function(i,t,r,x,s){t=pt(t,x),nt(i,t,"background",r,x,s),nt(i,t,"track",r,x,s),nt(i,t,"indicator",r,x,s),nt(i,t,"thumb",r,x,s);var g=new Bi(i,t);return i.add.existing(g),g},gB=Sit;var Pit=function(i,t,r,x,s){return t&&(nt(i,t,"background",r,x,s),nt(i,t,"track",r,x,s),nt(i,t,"indicator",r,x,s),nt(i,t,"thumb",r,x,s)),t},za=Pit;var Eit=function(i,t,r,x,s){t=pt(t,x),nt(i,t,"background",r,x,s),nt(i,t,"icon",r,x,s),za(i,t.slider,r,x,s),nt(i,t,"text",r,x,s);var g=new th(i,t);return i.add.existing(g),g},xB=Eit;var Mit=function(i,t,r,x,s){t=pt(t,x),nt(i,t,"background",r,x,s),za(i,t.slider,r,x,s);var g=t.buttons;g&&(nt(i,g,"top",r,x,s),nt(i,g,"bottom",r,x,s),nt(i,g,"left",r,x,s),nt(i,g,"right",r,x,s));var e=new Js(i,t);return i.add.existing(e),e},yB=Mit;var Ait=function(i,t,r,x,s){t=pt(t,x),nt(i,t,"background",r,x,s),nt(i,t,"text",r,x,s),za(i,t.slider,r,x,s),nt(i,t,"header",r,x,s),nt(i,t,"footer",r,x,s);var g=new Ir(i,t);return i.add.existing(g),g},CB=Ait;var Rit=function(i,t,r,x,s){return Cr(i,t,r,x,s,Qs)},TB=Rit;var Oit=function(i,t,r,x,s){return Va(i,t,r,x,s,hh)},SB=Oit;var wit=function(i,t,r,x,s){t=pt(t,x),nt(i,t,"background",r,x,s),nt(i,t,"text",r,x,s);var g=new Go(i,t);return i.add.existing(g),g},PB=wit;var Lit=function(i,t,r,x,s){t=pt(t,x),nt(i,t,"background",r,x,s),nt(i,t,"content",r,x,s),nt(i,t,"leftSide",r,x,s),nt(i,t,"rightSide",r,x,s),nt(i,t,"header",r,x,s),nt(i,t,"footer",r,x,s);var g=new jo(i,t);return i.add.existing(g),g},EB=Lit;var Fit=function(i,t,r,x,s){t=pt(t,x);var g=t.background;delete t.background,g&&(t.createBackgroundCallback=function(n){var p=n.scene,f=Yi(p,wt(g),r,x,s);return f}),t.createButtonCallback=function(n,p,f){var u=n.scene,l=n.$next;delete n.scene,delete n.$next;var a=Yi(u,wt(n),r,x,s);return n.scene=u,n.$next=l,a},t.childrenKey="$next";var e=new Jo(i,t);return i.add.existing(e),e},MB=Fit;var bit={Image:ZI,Sprite:JI,Video:$I,Text:QI,BBCodeText:qI,RoundRectangle:_I,Ninepatch:tB,Ninepatch2:eB,Canvas:iB,CircleMaskImage:rB,Space:sB,Sizer:nB,FixWidthSizer:aB,GridSizer:oB,OverlapSizer:hB,Buttons:uB,FixWidthButtons:fB,GridButtons:dB,Label:cB,BadgeLabel:pB,Dialog:vB,TextBox:mB,Slider:gB,NumberBar:xB,ScrollBar:yB,TextArea:CB,Pages:TB,Toast:SB,Knob:PB,HolyGrail:EB,Menu:MB},AB=bit;var Dit=function(i,t,r,x,s){var g=HI(t,x);if(!g){console.warn(`rexUI.Make: Can't get type name in ${JSON.stringify(t)}`);return}var e;if(s&&(e=s[g]),e||(e=AB[g]),!e){console.warn(`rexUI.Make: Can't create ${g} game object.`);return}var n=e(i,t,r,x,s);return t.name&&n.setName(t.name),n},Yi=Dit;var Iit=function(i,t,r,x,s){if(t=nn(t),Array.isArray(t))t=t[t.length-1];else if(t.$root){var g=t;if(t=t.$root,delete g.$root,x===void 0)x=g;else for(var e in g)x[e]||(x[e]=g[e])}x=nn(x);var n=Yi(i,t,r,x,s);return n},RB=Iit;var OB=Phaser.Utils.Objects.IsPlainObject,_0=class{constructor(t,r,x){this.setScene(t),this.setStyles(r),this.setBuilders(x)}setScene(t){return this.scene=t,this}setStyles(t){return this.styles=nn(t),this}addStyle(t,r){if(this.styles===void 0&&(this.styles={}),typeof t=="string"&&r===void 0&&(t=nn(t)),OB(t)){var x=t;for(t in x)this.styles[t]=x[t]}else this.styles[t]=nn(r);return this}clearStyles(){return this.setStyles(),this}setBuilders(t){return this.customBuilders=t,this}addBuilder(t,r){if(this.customBuilders===void 0&&(this.customBuilders={}),OB(t)){var x=t;for(t in x)this.customBuilders[t]=x[t]}else this.customBuilders[t]=r;return this}clearBuilder(){return this.setBuilders(),this}make(t,r){return RB(this.scene,t,r,this.styles,this.customBuilders)}},tx=_0;J.register("maker",function(i,t){return new tx(this.scene,i,t)});Z(window,"RexPlugins.UI.Maker",tx);J.register("click",function(i,t){return new Ns(i,t)});Z(window,"RexPlugins.UI.Click",Ns);J.register("clickOutside",function(i,t){return new Do(i,t)});Z(window,"RexPlugins.UI.ClickOutside",Do);J.register("inTouching",function(i,t){return new Or(i,t)});Z(window,"RexPlugins.UI.InTouching",Or);J.register("tap",function(i,t){return Se(i)||(t=i,i=this.scene),new Ys(i,t)});Z(window,"RexPlugins.UI.Tap",Ys);J.register("press",function(i,t){return Se(i)||(t=i,i=this.scene),new Us(i,t)});Z(window,"RexPlugins.UI.Press",Us);J.register("swipe",function(i,t){return Se(i)||(t=i,i=this.scene),new Xs(i,t)});Z(window,"RexPlugins.UI.Swipe",Xs);var ex=hm;J.register("pan",function(i,t){return Se(i)||(t=i,i=this.scene),new ex(i,t)});Z(window,"RexPlugins.UI.Pan",ex);var Bit=function(i){for(var t=i.scene.input,r=t.manager,x=r.pointersTotal,s=r.pointers,g,e=0;e<x;e++)if(g=s[e],!(!g.primaryDown||t.getDragState(g)!==0||!Pn(i,g)))return t.setDragState(g,1),t._drag[g.id]=[i],t.dragDistanceThreshold===0||t.dragTimeThreshold===0?(t.setDragState(g,3),t.processDragStartList(g)):t.setDragState(g,2),!0;return!1},tc=Bit;var ec=Phaser.Utils.Objects.GetValue,wB=Phaser.Math.Distance.Between,LB=Phaser.Math.RotateAroundDistance,ix=class extends Tt{constructor(t,r){super(t,{eventEmitter:!1}),this._enable=void 0,t.setInteractive(ec(r,"inputConfig",void 0)),this.resetFromJSON(r),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.setEnable(ec(t,"enable",!0)),this.setAxisMode(ec(t,"axis",0)),this.setAxisRotation(ec(t,"rotation",0)),this}toJSON(){return{enable:this.enable,axis:this.axisMode,rotation:this.axisRotation}}boot(){var t=this.parent;t.on("dragstart",this.onDragStart,this),t.on("drag",this.onDrag,this),t.on("dragend",this.onDragEnd,this)}shutdown(t){this.isShutdown||(this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragend(),this._enable=t,this.scene.input.setDraggable(this.parent,t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setAxisMode(t){return typeof t=="string"&&(t=Git[t]),this.axisMode=t,this}setAxisRotation(t){return this.axisRotation=t,this}drag(){return tc(this.parent),this}dragend(){if(!!this.isDragging)return this.scene.input.setDragState(this.pointer,5),this}onDragStart(t,r,x){this.isDragging||(this.pointer=t)}onDrag(t,r,x){if(this.pointer===t){var s=this.parent;if(this.axisMode===0)s.x=r,s.y=x;else if(this.axisRotation===0)this.axisMode===1?s.x=r:this.axisMode===2&&(s.y=x);else{var g,e={x:r,y:x};g=wB(e.x,e.y,s.x,s.y),e=LB(e,s.x,s.y,-this.axisRotation,g),this.axisMode===1?e.y=s.y:this.axisMode===2&&(e.x=s.x),g=wB(e.x,e.y,s.x,s.y),e=LB(e,s.x,s.y,this.axisRotation,g),s.x=e.x,s.y=e.y}}}onDragEnd(t,r,x,s){this.pointer===t&&(this.pointer=void 0)}get isDragging(){return this.pointer!==void 0}},Git={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2},FB=ix;var bB=FB;var rx=bB;J.register("drag",function(i,t){return new rx(i,t)});Z(window,"RexPlugins.UI.Drag",rx);var sx=vm;J.register("pinch",function(i){return new sx(this.scene,i)});Z(window,"RexPlugins.UI.Pinch",sx);var nx=ym;J.register("rotate",function(i){return new nx(this.scene,i)});Z(window,"RexPlugins.UI.Rotate",nx);var Nit=Phaser.Utils.Objects.IsPlainObject,DB=Phaser.Utils.Objects.GetValue,Vit=function(i,t,r){var x;if(i===void 0)i=r.texture.key,t=r.frame.name;else if(Nit(i)){var s=i;i=DB(s,"key",r.texture.key),t=DB(s,"frame",r.frame.name)}else typeof i=="string"||(x=i);return x===void 0&&(x=function(g){g.setTexture(i,t)}),x},ax=Vit;var Ch=Phaser.Utils.Objects.GetValue,zit=Phaser.Utils.Objects.GetAdvancedValue,Yit=Phaser.Math.Linear,ox=class extends be{constructor(t,r){super(t,r),this.resetFromJSON(r),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setDuration(zit(t,"duration",500)),this.setEase(Ch(t,"ease","Sine")),this.setOrientation(Ch(t,"orientation",0)),this.setFrontFace(Ch(t,"front",void 0)),this.setBackFace(Ch(t,"back",void 0)),this.setFace(Ch(t,"face",0)),this}setOrientation(t){return typeof t=="string"&&(t=Uit[t]),this.orientation=t,this}get face(){return this._face}set face(t){typeof t=="string"&&(t=Xit[t]),this._face=t,t===0&&this.frontFaceCallback?this.frontFaceCallback(this.parent):t===1&&this.backFaceCallback&&this.backFaceCallback(this.parent)}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}setFrontFace(t,r){return this.frontFaceCallback=ax(t,r,this.parent),this}setBackFace(t,r){return this.backFaceCallback=ax(t,r,this.parent),this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.orientation===0?this.scale0=t.scaleX:this.scale0=t.scaleY,this.timer.setDelay(this.delay).setDuration(this.duration/2).setRepeat(1),super.start(),this}flip(t){return this.isRunning?this:(t!==void 0&&this.setDuration(t),this.start(),this)}updateGameObject(t,r){r.justRestart&&this.toggleFace();var x=r.t;r.isOddIteration&&(x=1-x),x=this.easeFn(x);var s=Yit(this.scale0,0,x);this.orientation===0?t.scaleX=s:t.scaleY=s}},Uit={x:0,horizontal:0,y:1,vertical:1},Xit={front:0,back:1},IB=ox;var BB=IB;var hx=BB;J.register("flip",function(i,t){return new hx(i,t)});Z(window,"RexPlugins.UI.Flip",hx);J.register("shake",function(i,t){return new Lo(i,t)});Z(window,"RexPlugins.UI.Shake",Lo);J.register("touchEventStop",function(i,t){return new ch(i,t)});Z(window,"RexPlugins.UI.TouchEventStop",ch);var lx=Zg;J.register("perspective",function(i,t){return new lx(i,t)});Z(window,"RexPlugins.UI.Perspective",lx);var GB=Phaser.Math.RotateAround,ic=function(i,t,r){var x=i.width/2,s=i.height/2;return Oe.x=t-x,Oe.y=r-s,GB(Oe,0,0,i.rotation),Oe.x*=i.scaleX,Oe.y*=i.scaleY,Oe.x+=i.x,Oe.y+=i.y,Oe},NB=function(i,t,r){var x=i.width/2,s=i.height/2;return Oe.x=t-i.x,Oe.y=r-i.y,Oe.x/=i.scaleX,Oe.y/=i.scaleY,GB(Oe,0,0,-i.rotation),Oe.x+=x,Oe.y+=s,Oe},Oe={x:0,y:0};var ux=class{constructor(t,r){this.parent=t,this.vertex=r,this._localX=void 0,this._localY=void 0}destroy(){this.parent=void 0,this.vertex=void 0}updateVertexPosition(t,r){var x=this.parent,s=x.height,g=x.frame.cutWidth/s/2,e=x.frame.cutHeight/s/2,n=t/s-g,p=r/s-e,f=this.vertex;return f.x=n,f.y=-p,x.forceUpdate(),this}get localX(){return this._localX}set localX(t){this.setLocalXY(t,this._localY)}get localY(){return this._localY}set localY(t){this.setLocalXY(this._localX,t)}get localXOrigin(){return this._localXOrigin}get localYOrigin(){return this._localYOrigin}resetLocalXY(t,r){return this._localXOrigin=t,this._localYOrigin=r,this._localX=t,this._localY=r,this}setLocalXY(t,r,x){return this._localX===t&&this._localY===r?this:(this._localX=t,this._localY=r,x||this.updateVertexPosition(t,r),this)}setWorldXY(t,r){if(this._worldX===t&&this._worldY===r)return this;var x=NB(this.parent,t,r);return this.setLocalXY(x.x,x.y),this}setPosition(t,r){return this.setWorldXY(t,r),this}getWorldXY(){return ic(this.parent,this._localX,this._localY)}get x(){var t=ic(this.parent,this._localX,this._localY);return t.x}set x(t){this.setWorldXY(t,this.y)}get y(){var t=ic(this.parent,this._localX,this._localY);return t.y}set y(t){this.setWorldXY(this.x,t)}},VB=ux;var Wit=Phaser.Geom.Mesh.Vertex,kit=Phaser.Geom.Mesh.Face,Hit=function(i){for(var t=i.isNinePointMode,r=t?9:4,x=i.vertices,s=i.faces,g=i.controlPoints,e=0;e<r;e++){var n=new Wit;x.push(n),g.push(new VB(i,n))}var p;t?p=Zit:i.fourPointsModeRTL?p=jit:p=Kit;for(var e=0,f=p.length;e<f;e+=3){var u=x[p[e+0]],l=x[p[e+1]],a=x[p[e+2]];s.push(new kit(u,l,a))}t?(i.topLeft=g[0],i.topCenter=g[1],i.topRight=g[2],i.centerLeft=g[3],i.center=g[4],i.centerRight=g[5],i.bottomLeft=g[6],i.bottomCenter=g[7],i.bottomRight=g[8]):(i.topLeft=g[0],i.topRight=g[1],i.bottomLeft=g[2],i.bottomRight=g[3])},Kit=[0,2,3,0,3,1],jit=[1,3,2,1,2,0],Zit=[0,3,4,0,4,1,1,4,2,4,5,2,3,6,4,6,7,4,4,7,8,4,8,5],zB=Hit;var Jit=function(i){var t,r=0,x=i.height,s=0,g=i.width;if(i.isNinePointMode){var e=(s+g)/2,n=(r+x)/2;t=[s,r,e,r,g,r,s,n,e,n,g,n,s,x,e,x,g,x]}else t=[s,r,g,r,s,x,g,x];return t},YB=Jit;var $it=Phaser.GameObjects.Mesh,Qit=Phaser.Utils.Objects.IsPlainObject,Ya=Phaser.Utils.Objects.GetValue,fx=class extends $it{constructor(t,r,x,s,g,e){Qit(r)&&(e=r,r=Ya(e,"x",0),x=Ya(e,"y",0),s=Ya(e,"key",null),g=Ya(e,"frame",null)),super(t,r,x,s,g),this.type="rexQuadImage",this.isNinePointMode=Ya(e,"ninePointMode",!1),this.fourPointsModeRTL=Ya(e,"rtl",!1),this.controlPoints=[],zB(this),this.hideCCW=!1,this.syncSize()}preDestroy(){for(var t=0,r=this.controlPoints.length;t<r;t++)this.controlPoints[t].destroy();this.controlPoints=void 0,super.preDestroy()}resetVerts(){this.dirtyCache[9]=-1;for(var t=YB(this),r=this.width,x=this.height,s=this.frame.cutWidth/x/2,g=this.frame.cutHeight/x/2,e=this.frame.u0,n=this.frame.u1,p=this.frame.v0,f=this.frame.v1,u=n-e,l=f-p,a=this.controlPoints,o=0,c=t.length;o<c;o+=2){var h=t[o+0],d=t[o+1],v=o/2,m=h/x-s,y=d/x-g,C=e+u*(h/r),T=p+l*(d/x);this.vertices[v].set(m,-y,0).setUVs(C,T),a[v].resetLocalXY(h,d)}return this}syncSize(){return this.setSizeToFrame(),this.setOrtho(this.width/this.height,1),this.resetVerts(),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}set tint(t){for(var r=this.vertices,x=0,s=r.length;x<s;x++)r[x].color=t}setTint(t){return this.tint=t,this}},rc=fx;var vle=Phaser.Utils.Objects.IsPlainObject,mle=Phaser.Utils.Objects.GetValue;var qit=function(i,t,r){t===void 0&&(t=0),r===void 0&&(r=0);for(var x=i.width,s=i.height,g=x*.5,e=s*.5,n=Math.tan(t)*e,p=Math.tan(r)*g,f=i.controlPoints,u=0,l=f.length;u<l;u++){var a=f[u],o=a.localXOrigin,c=a.localYOrigin;a.localX=o+(c>e?n:-n),a.localY=c+(o>g?p:-p)}},dx=qit;var _it=Phaser.Utils.Objects.IsPlainObject,sc=Phaser.Utils.Objects.GetValue,UB=Phaser.Math.DegToRad,XB=Phaser.Math.RadToDeg,cx=class extends rc{constructor(t,r,x,s,g){if(_it(r)){var e=r;r=sc(e,"x",0),x=sc(e,"y",0),s=sc(e,"key",null),g=sc(e,"frame",null)}super(t,r,x,s,g),this.type="rexSkewmage",this._skewX=0,this._skewY=0}get skewX(){return this._skewX}set skewX(t){this._skewX=t,dx(this,this._skewX,this._skewY)}get skewXDeg(){return XB(this._skewX)}set skewXDeg(t){this.skewX=UB(t)}get skewY(){return this._skewY}set skewY(t){this._skewY=t,dx(this,this._skewX,this._skewY)}get skewYDeg(){return XB(this._skewY)}set skewYDeg(t){this.skewY=UB(t)}setSkewX(t){return this.skewX=t,this}setSkewY(t){return this.skewY=t,this}setSkew(t,r){return r===void 0&&(r=t),this.skewX=t,this.skewY=r,this}setSkewXDeg(t){return this.skewXDeg=t,this}setSkewYDeg(t){return this.skewYDeg=t,this}setSkewDeg(t,r){return r===void 0&&(r=t),this.skewXDeg=t,this.skewYDeg=r,this}},px=cx;var trt=Phaser.Utils.Objects.IsPlainObject,nc=Phaser.Utils.Objects.GetValue,vx=class extends px{constructor(t,r,x,s,g){if(trt(r)){var e=r;r=nc(e,"x",0),x=nc(e,"y",0),s=nc(e,"width",32),g=nc(e,"height",32)}var n=ih(t,s,g);super(t,r,x,n,null),this.type="rexSkewRenderTexture",this.rt=this.texture}destroy(t){super.destroy(t),this.rt.destroy(),this.rt=null}},mx=vx;var gx=class extends Cd(mx){get skewState(){return this.isRunning}},xx=gx;var yx=xx;J.register("skew",function(i,t){return new yx(i,t)});Z(window,"RexPlugins.UI.Skew",yx);J.register("anchor",function(i,t){return new Oo(i,t)});Z(window,"RexPlugins.UI.Anchor",Oo);J.register("textTyping",function(i,t){return new qo(i,t)});Z(window,"RexPlugins.UI.TextTyping",qo);J.register("textPage",function(i,t){return new Qo(i,t)});Z(window,"RexPlugins.UI.TextPage",Qo);var Ua=void 0,WB=function(i){i!==Ua&&(Ua!==void 0&&Ua.close(),Ua=i)},kB=function(i){i===Ua&&(Ua=void 0)};var Gr=Phaser.Utils.Objects.GetValue,ert=Phaser.Utils.Objects.Clone,irt=function(i,t){t===void 0&&(t={}),t=ert(t);var r=i.scene,x=i.style,s=Gr(t,"backgroundColor",x.backgroundColor);s===null&&(s="transparent"),t.text=Gr(t,"text",i.text),t.fontFamily=Gr(t,"fontFamily",x.fontFamily),t.fontSize=Gr(t,"fontSize",x.fontSize),t.color=Gr(t,"color",x.color),t.backgroundColor=s,t.direction=Gr(t,"rtl",x.rtl)?"rtl":"ltr",t.align=Gr(t,"align",rrt(x)),t.direction==="rtl"&&xa(i)&&(t.align="right");var g=new df(r,i.x,i.y,Gr(t,"width",i.width),Gr(t,"height",i.height),t);g.setOrigin(i.originX,i.originY).setScrollFactor(i.scrollFactorX,i.scrollFactorY);var e=i.parentContainer;return e?e.add(g):r.add.existing(g),g},rrt=function(i){return i.hasOwnProperty("align")?i.align:i.hasOwnProperty("halign")?i.halign:"left"};var HB=irt;var ac=Phaser.Utils.Objects.GetValue,srt=Phaser.Utils.Objects.Merge,nrt=function(i,t){i===void 0&&(i={}),i=srt(i,this.openConfig),WB(this),Ie(i)&&(t=i,i=void 0),t===void 0&&(t=ac(i,"onClose",void 0));var r=ac(i,"onOpen",void 0),x=ac(i,"onTextChanged",void 0);return this.inputText=HB(this.parent,i).on("textchange",function(s){var g=s.text;x?x(this.parent,g):this.parent.text=g},this).setFocus(),this.parent.setVisible(!1),this.onClose=t,ac(i,"enterClose",!0)&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=this.scene.time.delayedCall(0,function(){this.scene.input.once("pointerdown",this.close,this),r&&r(this.parent),this.emit("open",this.parent)},[],this),this},KB=nrt;var art=function(){return kB(this),this.parent.setVisible(!0),this.inputText&&(this.inputText.destroy(),this.inputText=void 0),this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this.emit("close",this.parent),this},jB=art;var ort={open:KB,close:jB},ZB=ort;var hrt=Phaser.Utils.Objects.GetValue,oc=class extends Tt{constructor(t,r){super(t),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0,this.setOpenConfig(r);var x=hrt(r,"clickEnable",!0);x&&t.on("pointerdown",function(){this.open()},this).setInteractive()}shutdown(t){this.isShutdown||(this.close(),super.shutdown(t))}setOpenConfig(t){return t===void 0&&(t={}),this.openConfig=t,this}get isOpened(){return this.inputText!==void 0}get text(){return this.isOpened?this.inputText.text:this.parent.text}};Object.assign(oc.prototype,ZB);var Th=oc;var lrt=function(i,t,r){return i._edit||(i._edit=new Th(i,{clickEnable:!1})),i._edit.open(t,r),i._edit},Cx=lrt;var Tx=Th;J.register("textEdit",function(i,t){return new Tx(i,t)});Z(window,"RexPlugins.UI.TextEdit",Tx);var JB=Cx;var urt=function(i,t,r){if(t==null)return i;if(t===0)return Sx(i,0,r),i;var x=i.text.length;if(x===0)return Sx(i,t,r),i;for(var s=Math.floor(t*1.5/x),g={},e=QB(i,s,t,r,g),n=0;n<=65535&&e!==0;n++){if(s+=e,s<0){s=0;break}e=QB(i,s,t,r,g)}return n===65535&&console.warn(`SetFontSizeToFitWidth: Test count exceeds ${65535}`),i.setFontSize(s),Sx(i,t,r),i},$B=function(i,t,r){return r[t]===void 0&&(i.setFontSize(t),r[t]={width:i.width,height:i.height}),r[t]},QB=function(i,t,r,x,s){var g=$B(i,t,s),e=$B(i,t+1,s);if(x!==void 0){if(g.height<=x&&e.height>x)return 0;if(g.height>x)return-1}return g.width<=r&&e.width>r?0:g.width>r?-1:Math.floor(r-g.width)},Sx=function(i,t,r){var x=i.style;x.fixedWidth=t,x.parent.width=t,r!==void 0&&(x.fixedHeight=r,x.parent.height=r),x.update(!1)},Sh=urt;var frt=function(i,t){return t===void 0&&(t=0),i._minWidth=t,i.runWidthWrap=function(r,x){return Sh(i,r,x),i},i.resize=function(r,x){return i.width===r&&i.height===x||i.setFixedSize(r,x),i},i},qB=frt;var hc=class extends Phaser.Plugins.ScenePlugin{constructor(t,r){super(t,r),this.add=new J(t)}start(){var t=this.scene.events;t.on("destroy",this.destroy,this)}isInTouching(t,r,x,s){return t.visible?ss(t,r,x,s):!1}get viewport(){return vi(this.scene,this.scene.cameras.main,!0)}},drt={getParentSizer:re,getTopmostSizer:Ao,hide:Ci,show:yi,isShown:ra,edit:JB,wrapExpandText:wf,fontSizeExpandText:qB,fontSizeResize:Sh,setFontSizeToFitWidth:Sh,waitEvent:Jr,waitComplete:At,delayPromise:cf,setChildrenInteractive:ua,fadeIn:Mr,fadeOutDestroy:Ar,easeMoveTo:ea,easeMoveFrom:ia,modal:Gs,modalPromise:Uu,modalClose:aa,requestDrag:tc,openFileChooser:vf};Object.assign(hc.prototype,drt);var _B=hc;var e9=Ox(t9()),i9={type:Phaser.AUTO,width:256,height:238,pixelArt:!0,autoRound:!0,scale:{mode:Phaser.Scale.ScaleModes.FIT,autoRound:!0,autoCenter:Phaser.Scale.Center.CENTER_HORIZONTALLY},physics:{default:"arcade",arcade:{tileBias:20,gravity:{x:0,y:0},debug:!0,debugShowBody:!1,debugShowStaticBody:!1}},plugins:{scene:[{key:"rexUI",plugin:_B,mapping:"rexUI"},{key:"animatedTiles",plugin:e9.default,mapping:"animatedTiles"}]},scene:[ka,Ka,Ha]};var Ape=new r9.default.Game(i9);
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Greg McLean <GregDevProjects>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */
/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       pi-kei
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2013-2023 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/
//# sourceMappingURL=index.js.map
